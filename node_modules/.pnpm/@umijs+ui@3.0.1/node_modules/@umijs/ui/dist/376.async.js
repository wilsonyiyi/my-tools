(self.webpackChunk_umijs_ui=self.webpackChunk_umijs_ui||[]).push([[376],{61601:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var M=function(k,E){var N=k.nodes,I=k.edges,m=[],y={};if(!N)throw new Error("invalid nodes data!");return N&&N.forEach(function(v,p){y[v.id]=p;var g=[];m.push(g)}),I&&I.forEach(function(v){var p=v.source,g=v.target,T=y[p],w=y[g];!T&&T!==0||!w&&w!==0||(m[T][w]=1,E||(m[w][T]=1))}),m},x=M;S.default=x},33101:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"GADDIAsync",{enumerable:!0,get:function(){return x.GADDIAsync}}),Object.defineProperty(S,"connectedComponentAsync",{enumerable:!0,get:function(){return x.connectedComponentAsync}}),S.default=void 0,Object.defineProperty(S,"detectAllCyclesAsync",{enumerable:!0,get:function(){return x.detectAllCyclesAsync}}),Object.defineProperty(S,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllDirectedCycleAsync}}),Object.defineProperty(S,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllUndirectedCycleAsync}}),Object.defineProperty(S,"detectCycleAsync",{enumerable:!0,get:function(){return x.detectCycleAsync}}),S.detectDirectedCycleAsync=void 0,Object.defineProperty(S,"dijkstraAsync",{enumerable:!0,get:function(){return x.dijkstraAsync}}),Object.defineProperty(S,"findAllPathAsync",{enumerable:!0,get:function(){return x.findAllPathAsync}}),Object.defineProperty(S,"findShortestPathAsync",{enumerable:!0,get:function(){return x.findShortestPathAsync}}),Object.defineProperty(S,"floydWarshallAsync",{enumerable:!0,get:function(){return x.floydWarshallAsync}}),Object.defineProperty(S,"getAdjMatrixAsync",{enumerable:!0,get:function(){return x.getAdjMatrixAsync}}),Object.defineProperty(S,"getDegreeAsync",{enumerable:!0,get:function(){return x.getDegreeAsync}}),Object.defineProperty(S,"getInDegreeAsync",{enumerable:!0,get:function(){return x.getInDegreeAsync}}),Object.defineProperty(S,"getNeighborsAsync",{enumerable:!0,get:function(){return x.getNeighborsAsync}}),Object.defineProperty(S,"getOutDegreeAsync",{enumerable:!0,get:function(){return x.getOutDegreeAsync}}),Object.defineProperty(S,"labelPropagationAsync",{enumerable:!0,get:function(){return x.labelPropagationAsync}}),Object.defineProperty(S,"louvainAsync",{enumerable:!0,get:function(){return x.louvainAsync}}),Object.defineProperty(S,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return x.minimumSpanningTreeAsync}}),Object.defineProperty(S,"pageRankAsync",{enumerable:!0,get:function(){return x.pageRankAsync}});var x=M(88312),z=x.detectCycleAsync;S.detectDirectedCycleAsync=z;var k={getAdjMatrixAsync:x.getAdjMatrixAsync,connectedComponentAsync:x.connectedComponentAsync,getDegreeAsync:x.getDegreeAsync,getInDegreeAsync:x.getInDegreeAsync,getOutDegreeAsync:x.getOutDegreeAsync,detectCycleAsync:x.detectCycleAsync,detectDirectedCycleAsync:z,detectAllCyclesAsync:x.detectAllCyclesAsync,detectAllDirectedCycleAsync:x.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:x.detectAllUndirectedCycleAsync,dijkstraAsync:x.dijkstraAsync,findAllPathAsync:x.findAllPathAsync,findShortestPathAsync:x.findShortestPathAsync,floydWarshallAsync:x.floydWarshallAsync,labelPropagationAsync:x.labelPropagationAsync,louvainAsync:x.louvainAsync,minimumSpanningTreeAsync:x.minimumSpanningTreeAsync,pageRankAsync:x.pageRankAsync,getNeighborsAsync:x.getNeighborsAsync,GADDIAsync:x.GADDIAsync};S.default=k},26773:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=k(M(99878)),z=M(21152);function k(m){return m&&m.__esModule?m:{default:m}}function E(m){m===void 0&&(m={});var y=m,v=function(){},p=function(){var g={};return function(T){var w=T.next,C=w;return g[C]?!1:(g[C]=!0,!0)}}();return y.allowTraversal=m.allowTraversal||p,y.enter=m.enter||v,y.leave=m.leave||v,y}var N=function(y,v,p,g){g===void 0&&(g=!0);var T=E(p),w=new x.default,C=y.edges,O=C===void 0?[]:C;w.enqueue(v);for(var b="",l=function(){var Z=w.dequeue();T.enter({current:Z,previous:b}),(0,z.getNeighbors)(Z,O,g?"target":void 0).forEach(function(X){T.allowTraversal({previous:b,current:Z,next:X})&&w.enqueue(X)}),T.leave({current:Z,previous:b}),b=Z};!w.isEmpty();)l()},I=N;S.default=I},15968:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=E,S.detectStrongConnectComponents=S.detectConnectedComponents=void 0;var x=M(21152),z=function(I){for(var m=I.nodes,y=m===void 0?[]:m,v=I.edges,p=v===void 0?[]:v,g=[],T={},w=[],C=function K(Z){w.push(Z),T[Z.id]=!0;for(var X=(0,x.getNeighbors)(Z.id,p),W=function(it){var J=X[it];if(!T[J]){var rt=y.filter(function(mt){return mt.id===J});rt.length>0&&K(rt[0])}},U=0;U<X.length;++U)W(U)},O=0;O<y.length;O++){var b=y[O];if(!T[b.id]){C(b);for(var l=[];w.length>0;)l.push(w.pop());g.push(l)}}return g};S.detectConnectedComponents=z;var k=function(I){for(var m=I.nodes,y=m===void 0?[]:m,v=I.edges,p=v===void 0?[]:v,g=[],T={},w={},C={},O=[],b=0,l=function W(U){w[U.id]=b,C[U.id]=b,b+=1,g.push(U),T[U.id]=!0;for(var et=(0,x.getNeighbors)(U.id,p,"target").filter(function(pt){return y.map(function(ft){return ft.id}).indexOf(pt)>-1}),it=function(ft){var Mt=et[ft];if(!w[Mt]&&w[Mt]!==0){var zt=y.filter(function(Vt){return Vt.id===Mt});zt.length>0&&W(zt[0]),C[U.id]=Math.min(C[U.id],C[Mt])}else T[Mt]&&(C[U.id]=Math.min(C[U.id],w[Mt]))},J=0;J<et.length;J++)it(J);if(C[U.id]===w[U.id]){for(var rt=[];g.length>0;){var mt=g.pop();if(T[mt.id]=!1,rt.push(mt),mt===U)break}rt.length>0&&O.push(rt)}},K=0,Z=y;K<Z.length;K++){var X=Z[K];!w[X.id]&&w[X.id]!==0&&l(X)}return O};S.detectStrongConnectComponents=k;function E(N,I){return I?k(N):z(N)}},94061:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.secondReg=S.dateReg=void 0;var M=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;S.secondReg=M;var x=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;S.dateReg=x},67543:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getOutDegree=S.getInDegree=S.default=void 0;var M=function(N){var I={},m=N.nodes,y=m===void 0?[]:m,v=N.edges,p=v===void 0?[]:v;return y.forEach(function(g){I[g.id]={degree:0,inDegree:0,outDegree:0}}),p.forEach(function(g){I[g.source].degree++,I[g.source].outDegree++,I[g.target].degree++,I[g.target].inDegree++}),I},x=M;S.default=x;var z=function(N,I){var m=M(N);return m[I]?M(N)[I].inDegree:0};S.getInDegree=z;var k=function(N,I){var m=M(N);return m[I]?M(N)[I].outDegree:0};S.getOutDegree=k},27945:function(le,S,M){"use strict";function x(w){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},x(w)}Object.defineProperty(S,"__esModule",{value:!0}),S.detectAllUndirectedCycle=S.detectAllDirectedCycle=S.detectAllCycles=S.default=void 0;var z=m(M(86015)),k=I(M(15968)),E=M(21152);function N(w){if(typeof WeakMap!="function")return null;var C=new WeakMap,O=new WeakMap;return(N=function(l){return l?O:C})(w)}function I(w,C){if(!C&&w&&w.__esModule)return w;if(w===null||x(w)!=="object"&&typeof w!="function")return{default:w};var O=N(C);if(O&&O.has(w))return O.get(w);var b={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in w)if(K!=="default"&&Object.prototype.hasOwnProperty.call(w,K)){var Z=l?Object.getOwnPropertyDescriptor(w,K):null;Z&&(Z.get||Z.set)?Object.defineProperty(b,K,Z):b[K]=w[K]}return b.default=w,O&&O.set(w,b),b}function m(w){return w&&w.__esModule?w:{default:w}}var y=function(C){var O=null,b=C.nodes,l=b===void 0?[]:b,K={},Z={},X={},W={};l.forEach(function(it){Z[it.id]=it});for(var U={enter:function(J){var rt=J.current,mt=J.previous;if(X[rt]){O={};for(var pt=rt,ft=mt;ft!==rt;)O[pt]=ft,pt=ft,ft=K[ft];O[pt]=ft}else X[rt]=rt,delete Z[rt],K[rt]=mt},leave:function(J){var rt=J.current;W[rt]=rt,delete X[rt]},allowTraversal:function(J){var rt=J.next;return O?!1:!W[rt]}};Object.keys(Z).length;){var et=Object.keys(Z)[0];(0,z.default)(C,et,U)}return O},v=function(C,O,b){var l,K;b===void 0&&(b=!0);for(var Z=[],X=(0,k.default)(C,!1),W=0,U=X;W<U.length;W++){var et=U[W];if(et.length)for(var it=et[0],J=it.id,rt=[it],mt=(l={},l[J]=it,l),pt=(K={},K[J]=new Set,K);rt.length>0;)for(var ft=rt.pop(),Mt=ft.id,zt=(0,E.getNeighbors)(Mt,C.edges),Vt=function(St){var qt,re=zt[St],Nt=C.nodes.find(function(At){return At.id===re});if(re===Mt)Z.push((qt={},qt[re]=ft,qt));else if(!(re in pt))mt[re]=ft,rt.push(Nt),pt[re]=new Set([ft]);else if(!pt[Mt].has(Nt)){for(var be=!0,Te=[Nt,ft],nr=mt[Mt];pt[re].size&&!pt[re].has(nr)&&(Te.push(nr),nr!==mt[nr.id]);)nr=mt[nr.id];if(Te.push(nr),O&&b?(be=!1,Te.findIndex(function(At){return O.indexOf(At.id)>-1})>-1&&(be=!0)):O&&!b&&Te.findIndex(function(At){return O.indexOf(At.id)>-1})>-1&&(be=!1),be){for(var Rt={},Dt=1;Dt<Te.length;Dt+=1)Rt[Te[Dt-1].id]=Te[Dt];Te.length&&(Rt[Te[Te.length-1].id]=Te[0]),Z.push(Rt)}pt[re].add(ft)}},kt=0;kt<zt.length;kt+=1)Vt(kt)}return Z};S.detectAllUndirectedCycle=v;var p=function(C,O,b){b===void 0&&(b=!0);for(var l=[],K=new Set,Z=[],X=[],W={},U={},et=function(nr){for(var Rt=[nr];Rt.length>0;){var Dt=Rt.pop();K.has(Dt)&&(K.delete(Dt),Z[Dt.id].forEach(function(At){Rt.push(At)}),Z[Dt.id].clear())}},it=function Te(nr,Rt,Dt){var At=!1;if(O&&b===!1&&O.indexOf(nr.id)>-1)return At;l.push(nr),K.add(nr);for(var Xt=Dt[nr.id],$t=0;$t<Xt.length;$t+=1){var Tt=W[Xt[$t]];if(Tt===Rt){for(var Kt={},Ee=1;Ee<l.length;Ee+=1)Kt[l[Ee-1].id]=l[Ee];l.length&&(Kt[l[l.length-1].id]=l[0]),X.push(Kt),At=!0}else K.has(Tt)||Te(Tt,Rt,Dt)&&(At=!0)}if(At)et(nr);else for(var $t=0;$t<Xt.length;$t+=1){var Tt=W[Xt[$t]];Z[Tt.id].has(nr)||Z[Tt.id].add(nr)}return l.pop(),At},J=C.nodes,rt=J===void 0?[]:J,mt=0;mt<rt.length;mt+=1){var pt=rt[mt],ft=pt.id;U[ft]=mt,W[mt]=pt}if(O&&b)for(var Mt=function(nr){var Rt=O[nr];U[rt[nr].id]=U[Rt],U[Rt]=0,W[0]=rt.find(function(Dt){return Dt.id===Rt}),W[U[rt[nr].id]]=rt[nr]},mt=0;mt<O.length;mt++)Mt(mt);for(var zt=function(nr){for(var Rt,Dt,At=1/0,Xt=0;Xt<nr.length;Xt+=1)for(var $t=nr[Xt],Tt=0;Tt<$t.length;Tt++){var Kt=U[$t[Tt].id];Kt<At&&(At=Kt,Dt=Xt)}for(var Ee=nr[Dt],vt=[],Xt=0;Xt<Ee.length;Xt+=1){var bt=Ee[Xt];vt[bt.id]=[];for(var wt=0,D=(0,E.getNeighbors)(bt.id,C.edges,"target").filter(function(ct){return Ee.map(function(ie){return ie.id}).indexOf(ct)>-1});wt<D.length;wt++){var tt=D[wt];tt===bt.id&&!(b===!1&&O.indexOf(bt.id)>-1)?X.push((Rt={},Rt[bt.id]=bt,Rt)):vt[bt.id].push(U[tt])}}return{component:Ee,adjList:vt,minIdx:At}},Vt=0;Vt<rt.length;){var kt=rt.filter(function(Te){return U[Te.id]>=Vt}),st=(0,k.detectStrongConnectComponents)({nodes:kt,edges:C.edges}).filter(function(Te){return Te.length>1});if(st.length===0)break;var St=zt(st),qt=St.minIdx,re=St.adjList,Nt=St.component;if(Nt.length>1){Nt.forEach(function(Te){Z[Te.id]=new Set});var be=W[qt];if(O&&b&&O.indexOf(be.id)===-1)return X;it(be,be,re),Vt=qt+1}else break}return X};S.detectAllDirectedCycle=p;var g=function(C,O,b,l){return l===void 0&&(l=!0),O?p(C,b,l):v(C,b,l)};S.detectAllCycles=g;var T=y;S.default=T},86015:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=E;var x=M(21152);function z(N){N===void 0&&(N={});var I=N,m=function(){},y=function(){var v={};return function(p){var g=p.next;return v[g]?!1:(v[g]=!0,!0)}}();return I.allowTraversal=N.allowTraversal||y,I.enter=N.enter||m,I.leave=N.leave||m,I}function k(N,I,m,y){y.enter({current:I,previous:m});var v=N.edges,p=v===void 0?[]:v;(0,x.getNeighbors)(I,p,"target").forEach(function(g){y.allowTraversal({previous:m,current:I,next:g})&&k(N,g,I,y)}),y.leave({current:I,previous:m})}function E(N,I,m){k(N,I,"",z(m))}},40467:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=M(39889),z=M(76405),k=M(21152),E=function(v,p,g){for(var T=1/0,w,C=0;C<p.length;C++){var O=p[C].id;!g[O]&&v[O]<=T&&(T=v[O],w=p[C])}return w},N=function(v,p,g,T){var w=v.nodes,C=w===void 0?[]:w,O=v.edges,b=O===void 0?[]:O,l=[],K={},Z={},X={};C.forEach(function(mt,pt){var ft=mt.id;l.push(ft),Z[ft]=1/0,ft===p&&(Z[ft]=0)});for(var W=C.length,U=function(pt){var ft=E(Z,C,K),Mt=ft.id;if(K[Mt]=!0,Z[Mt]===1/0)return"continue";var zt=[];g?zt=(0,k.getOutEdgesNodeId)(Mt,b):zt=(0,k.getEdgesByNodeId)(Mt,b),zt.forEach(function(Vt){var kt=Vt.target,st=Vt.source,St=kt===Mt?st:kt,qt=T&&Vt[T]?Vt[T]:1;Z[St]>Z[ft.id]+qt?(Z[St]=Z[ft.id]+qt,X[St]=[ft.id]):Z[St]===Z[ft.id]+qt&&X[St].push(ft.id)})},et=0;et<W;et++)U(et);X[p]=[p];var it={};for(var J in Z)Z[J]!==1/0&&m(p,J,X,it);var rt={};for(var J in it)rt[J]=it[J][0];return{length:Z,path:rt,allPath:it}},I=N;S.default=I;function m(y,v,p,g){if(y===v)return[y];if(g[v])return g[v];for(var T=[],w=0,C=p[v];w<C.length;w++){var O=C[w],b=m(y,O,p,g);if(!b)return;for(var l=0,K=b;l<K.length;l++){var Z=K[l];(0,z.isArray)(Z)?T.push((0,x.__spreadArray)((0,x.__spreadArray)([],Z,!0),[v],!1)):T.push([Z,v])}}return g[v]=T,g[v]}},80735:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.findShortestPath=S.findAllPath=void 0;var x=k(M(40467)),z=M(21152);function k(I){return I&&I.__esModule?I:{default:I}}var E=function(m,y,v,p,g){var T=(0,x.default)(m,y,p,g),w=T.length,C=T.path,O=T.allPath;return{length:w[v],path:C[v],allPath:O[v]}};S.findShortestPath=E;var N=function(m,y,v,p){var g;if(y===v)return[[y]];var T=m.edges,w=T===void 0?[]:T,C=[y],O=(g={},g[y]=!0,g),b=[],l=[],K=p?(0,z.getNeighbors)(y,w,"target"):(0,z.getNeighbors)(y,w);for(b.push(K);C.length>0&&b.length>0;){var Z=b[b.length-1];if(Z.length){var X=Z.shift();X&&(C.push(X),O[X]=!0,K=p?(0,z.getNeighbors)(X,w,"target"):(0,z.getNeighbors)(X,w),b.push(K.filter(function(et){return!O[et]})))}else{var W=C.pop();O[W]=!1,b.pop();continue}if(C[C.length-1]===v){var U=C.map(function(it){return it});l.push(U);var W=C.pop();O[W]=!1,b.pop()}}return l};S.findAllPath=N},90781:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=z(M(61601));function z(N){return N&&N.__esModule?N:{default:N}}var k=function(I,m){for(var y=(0,x.default)(I,m),v=[],p=y.length,g=0;g<p;g+=1){v[g]=[];for(var T=0;T<p;T+=1)g===T?v[g][T]=0:y[g][T]===0||!y[g][T]?v[g][T]=1/0:v[g][T]=y[g][T]}for(var w=0;w<p;w+=1)for(var g=0;g<p;g+=1)for(var T=0;T<p;T+=1)v[g][T]>v[g][w]+v[w][T]&&(v[g][T]=v[g][w]+v[w][T]);return v},E=k;S.default=E},8828:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=M(76405),z=M(47834),k=function(){function T(w,C,O,b,l){this.fromNode=w,this.toNode=C,this.nodeEdgeNodeLabel={nodeLabel1:O||z.VACANT_NODE_LABEL,edgeLabel:b||z.VACANT_EDGE_LABEL,nodeLabel2:l||z.VACANT_NODE_LABEL}}return T.prototype.equalTo=function(w){return this.fromNode===w.formNode&&this.toNode===w.toNode&&this.nodeEdgeNodeLabel===w.nodeEdgeNodeLabel},T.prototype.notEqualTo=function(w){return!this.equalTo(w)},T}(),E=function(){function T(){this.rmpath=[],this.dfsEdgeList=[]}return T.prototype.equalTo=function(w){var C=this.dfsEdgeList.length,O=w.length;if(C!==O)return!1;for(var b=0;b<C;b++)if(this.dfsEdgeList[b]!==w[b])return!1;return!0},T.prototype.notEqualTo=function(w){return!this.equalTo(w)},T.prototype.pushBack=function(w,C,O,b,l){return this.dfsEdgeList.push(new k(w,C,O,b,l)),this.dfsEdgeList},T.prototype.toGraph=function(w,C){w===void 0&&(w=z.VACANT_GRAPH_ID),C===void 0&&(C=!1);var O=new z.Graph(w,!0,C);return this.dfsEdgeList.forEach(function(b){var l=b.fromNode,K=b.toNode,Z=b.nodeEdgeNodeLabel,X=Z.nodeLabel1,W=Z.edgeLabel,U=Z.nodeLabel2;X!==z.VACANT_NODE_LABEL&&O.addNode(l,X),U!==z.VACANT_NODE_LABEL&&O.addNode(K,U),X!==z.VACANT_NODE_LABEL&&U!==X&&O.addEdge(void 0,l,K,W)}),O},T.prototype.buildRmpath=function(){this.rmpath=[];for(var w=void 0,C=this.dfsEdgeList.length,O=C-1;O>=0;O--){var b=this.dfsEdgeList[O],l=b.fromNode,K=b.toNode;l<K&&(w===void 0||K===w)&&(this.rmpath.push(O),w=l)}return this.rmpath},T.prototype.getNodeNum=function(){var w={};return this.dfsEdgeList.forEach(function(C){w[C.fromNode]||(w[C.fromNode]=!0),w[C.toNode]||(w[C.toNode]=!0)}),Object.keys(w).length},T}(),N=function(){function T(w){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!w){for(;w;){var C=w.edge;this.edges.push(C),this.nodesUsed[C.from]=1,this.nodesUsed[C.to]=1,this.edgesUsed[C.id]=1,w=w.preNode}this.edges=this.edges.reverse()}}return T.prototype.hasNode=function(w){return this.nodesUsed[w.id]===1},T.prototype.hasEdge=function(w){return this.edgesUsed[w.id]===1},T}(),I=function(){function T(w){var C=w.graphs,O=w.minSupport,b=O===void 0?2:O,l=w.minNodeNum,K=l===void 0?1:l,Z=w.maxNodeNum,X=Z===void 0?4:Z,W=w.top,U=W===void 0?10:W,et=w.directed,it=et===void 0?!1:et,J=w.verbose,rt=J===void 0?!1:J;this.graphs=C,this.dfsCode=new E,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=b,this.top=U,this.directed=it,this.counter=0,this.maxNodeNum=X,this.minNodeNum=K,this.verbose=rt,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return T.prototype.findForwardRootEdges=function(w,C){var O=this,b=[],l=w.nodeMap;return C.edges.forEach(function(K){(O.directed||C.label<=l[K.to].label)&&b.push(K)}),b},T.prototype.findBackwardEdge=function(w,C,O,b){if(!this.directed&&C===O)return null;for(var l=w.nodeMap,K=l[O.to],Z=K.edges,X=Z.length,W=0;W<X;W++){var U=Z[W];if(!(b.hasEdge(U)||U.to!==C.from)){if(this.directed){if(l[C.from].label<l[O.to].label||l[C.from].label===l[O.to].label&&C.label<=U.label)return U}else if(C.label<U.label||C.label===U.label&&l[C.to].label<=l[O.to].label)return U}}return null},T.prototype.findForwardPureEdges=function(w,C,O,b){for(var l=[],K=C.to,Z=w.nodeMap[K].edges,X=Z.length,W=0;W<X;W++){var U=Z[W],et=w.nodeMap[U.to];O<=et.label&&!b.hasNode(et)&&l.push(U)}return l},T.prototype.findForwardRmpathEdges=function(w,C,O,b){for(var l=[],K=w.nodeMap,Z=K[C.to].label,X=K[C.from],W=X.edges,U=W.length,et=0;et<U;et++){var it=W[et],J=K[it.to].label;C.to===it.to||O>J||b.hasNode(K[it.to])||(C.label<it.label||C.label===it.label&&Z<=J)&&l.push(it)}return l},T.prototype.getSupport=function(w){var C={};return w.forEach(function(O){C[O.graphId]||(C[O.graphId]=!0)}),Object.keys(C).length},T.prototype.findMinLabel=function(w){var C=void 0;return Object.keys(w).forEach(function(O){var b=w[O],l=b.nodeLabel1,K=b.edgeLabel,Z=b.nodeLabel2;if(!C){C={nodeLabel1:l,edgeLabel:K,nodeLabel2:Z};return}(l<C.nodeLabel1||l===C.nodeLabel1&&K<C.edgeLabel||l===C.nodeLabel1&&K===C.edgeLabel&&Z<C.nodeLabel2)&&(C={nodeLabel1:l,edgeLabel:K,nodeLabel2:Z})}),C},T.prototype.isMin=function(){var w=this,C=this.dfsCode;if(this.verbose&&console.log("isMin checking",C),C.dfsEdgeList.length===1)return!0;var O=this.directed,b=C.toGraph(z.VACANT_GRAPH_ID,O),l=b.nodeMap,K=new E,Z={};b.nodes.forEach(function(et){var it=w.findForwardRootEdges(b,et);it.forEach(function(J){var rt=l[J.to],mt="".concat(et.label,"-").concat(J.label,"-").concat(rt.label);Z[mt]||(Z[mt]={projected:[],nodeLabel1:et.label,edgeLabel:J.label,nodeLabel2:rt.label});var pt={graphId:b.id,edge:J,preNode:null};Z[mt].projected.push(pt)})});var X=this.findMinLabel(Z);if(X){K.dfsEdgeList.push(new k(0,1,X.nodeLabel1,X.edgeLabel,X.nodeLabel2));var W=function et(it){for(var J=K.buildRmpath(),rt=K.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,mt=K.dfsEdgeList[J[0]].toNode,pt={},ft=!1,Mt=0,zt=O?-1:0,Vt=function(Xt){if(ft)return"break";it.forEach(function($t){var Tt=new N($t),Kt=w.findBackwardEdge(b,Tt.edges[J[Xt]],Tt.edges[J[0]],Tt);Kt&&(pt[Kt.label]||(pt[Kt.label]={projected:[],edgeLabel:Kt.label}),pt[Kt.label].projected.push({graphId:b.id,edge:pt,preNode:$t}),Mt=K.dfsEdgeList[J[Xt]].fromNode,ft=!0)})},kt=J.length-1;kt>zt;kt--){var st=Vt(kt);if(st==="break")break}if(ft){var St=w.findMinLabel(pt);K.dfsEdgeList.push(new k(mt,Mt,z.VACANT_NODE_LABEL,St.edgeLabel,z.VACANT_NODE_LABEL));var qt=K.dfsEdgeList.length-1;return w.dfsCode.dfsEdgeList[qt]!==K.dfsEdgeList[qt]?!1:et(pt[St.edgeLabel].projected)}var re={};ft=!1;var Nt=0;it.forEach(function(At){var Xt=new N(At),$t=w.findForwardPureEdges(b,Xt.edges[J[0]],rt,Xt);$t.length>0&&(ft=!0,Nt=mt,$t.forEach(function(Tt){var Kt="".concat(Tt.label,"-").concat(l[Tt.to].label);re[Kt]||(re[Kt]={projected:[],edgeLabel:Tt.label,nodeLabel2:l[Tt.to].label}),re[Kt].projected.push({graphId:b.id,edge:Tt,preNode:At})}))});for(var be=J.length,Te=function(Xt){if(ft)return"break";var $t=J[Xt];it.forEach(function(Tt){var Kt=new N(Tt),Ee=w.findForwardRmpathEdges(b,Kt.edges[$t],rt,Kt);Ee.length>0&&(ft=!0,Nt=K.dfsEdgeList[$t].fromNode,Ee.forEach(function(vt){var bt="".concat(vt.label,"-").concat(l[vt.to].label);re[bt]||(re[bt]={projected:[],edgeLabel:vt.label,nodeLabel2:l[vt.to].label}),re[bt].projected.push({graphId:b.id,edge:vt,preNode:Tt})}))})},kt=0;kt<be;kt++){var nr=Te(kt);if(nr==="break")break}if(!ft)return!0;var Rt=w.findMinLabel(re);K.dfsEdgeList.push(new k(Nt,mt+1,z.VACANT_NODE_LABEL,Rt.edgeLabel,Rt.nodeLabel2));var Dt=K.dfsEdgeList.length-1;return C.dfsEdgeList[Dt]!==K.dfsEdgeList[Dt]?!1:et(re["".concat(Rt.edgeLabel,"-").concat(Rt.nodeLabel2)].projected)},U="".concat(X.nodeLabel1,"-").concat(X.edgeLabel,"-").concat(X.nodeLabel2);return W(Z[U].projected)}},T.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var w=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,x.clone)(w))}},T.prototype.subGraphMining=function(w){var C=this,O=this.getSupport(w);if(!(O<this.minSupport)&&this.isMin()){this.report();var b=this.dfsCode.getNodeNum(),l=this.dfsCode.buildRmpath(),K=this.dfsCode.dfsEdgeList[l[0]].toNode,Z=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,X={},W={};w.forEach(function(U){for(var et=C.graphs[U.graphId],it=et.nodeMap,J=new N(U),rt=l.length-1;rt>=0;rt--){var mt=C.findBackwardEdge(et,J.edges[l[rt]],J.edges[l[0]],J);if(mt){var pt="".concat(C.dfsCode.dfsEdgeList[l[rt]].fromNode,"-").concat(mt.label);W[pt]||(W[pt]={projected:[],toNodeId:C.dfsCode.dfsEdgeList[l[rt]].fromNode,edgeLabel:mt.label}),W[pt].projected.push({graphId:U.graphId,edge:mt,preNode:U})}}if(!(b>=C.maxNodeNum)){var ft=C.findForwardPureEdges(et,J.edges[l[0]],Z,J);ft.forEach(function(zt){var Vt="".concat(K,"-").concat(zt.label,"-").concat(it[zt.to].label);X[Vt]||(X[Vt]={projected:[],fromNodeId:K,edgeLabel:zt.label,nodeLabel2:it[zt.to].label}),X[Vt].projected.push({graphId:U.graphId,edge:zt,preNode:U})});for(var Mt=function(Vt){var kt=C.findForwardRmpathEdges(et,J.edges[l[Vt]],Z,J);kt.forEach(function(st){var St="".concat(C.dfsCode.dfsEdgeList[l[Vt]].fromNode,"-").concat(st.label,"-").concat(it[st.to].label);X[St]||(X[St]={projected:[],fromNodeId:C.dfsCode.dfsEdgeList[l[Vt]].fromNode,edgeLabel:st.label,nodeLabel2:it[st.to].label}),X[St].projected.push({graphId:U.graphId,edge:st,preNode:U})})},rt=0;rt<l.length;rt++)Mt(rt)}}),Object.keys(W).forEach(function(U){var et=W[U],it=et.toNodeId,J=et.edgeLabel;C.dfsCode.dfsEdgeList.push(new k(K,it,"-1",J,"-1")),C.subGraphMining(W[U].projected),C.dfsCode.dfsEdgeList.pop()}),Object.keys(X).forEach(function(U){var et=X[U],it=et.fromNodeId,J=et.edgeLabel,rt=et.nodeLabel2;C.dfsCode.dfsEdgeList.push(new k(it,K+1,z.VACANT_NODE_LABEL,J,rt)),C.subGraphMining(X[U].projected),C.dfsCode.dfsEdgeList.pop()})}},T.prototype.generate1EdgeFrequentSubGraphs=function(){var w=this.graphs,C=this.directed,O=this.minSupport,b=this.frequentSize1Subgraphs,l={},K={},Z={},X={};return Object.keys(w).forEach(function(W){var U=w[W],et=U.nodeMap;U.nodes.forEach(function(it,J){var rt=it.label,mt="".concat(W,"-").concat(rt);if(!Z[mt]){var pt=l[rt]||0;pt++,l[rt]=pt}Z[mt]={graphKey:W,label:rt},it.edges.forEach(function(ft){var Mt=rt,zt=et[ft.to].label;if(!C&&Mt>zt){var Vt=zt;zt=Mt,Mt=Vt}var kt=ft.label,st="".concat(W,"-").concat(Mt,"-").concat(kt,"-").concat(zt),St="".concat(Mt,"-").concat(kt,"-").concat(zt);if(!K[St]){var qt=K[St]||0;qt++,K[St]=qt}X[st]={graphId:W,nodeLabel1:Mt,edgeLabel:kt,nodeLabel2:zt}})})}),Object.keys(l).forEach(function(W){var U=l[W];if(!(U<O)){var et={nodes:[],edges:[]};et.nodes.push({id:"0",label:W}),b.push(et)}}),b},T.prototype.run=function(){var w=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var C=this.graphs,O=this.directed,b={};Object.keys(C).forEach(function(l){var K=C[l],Z=K.nodeMap;K.nodes.forEach(function(X){var W=w.findForwardRootEdges(K,X);W.forEach(function(U){var et=Z[U.to],it="".concat(X.label,"-").concat(U.label,"-").concat(et.label);b[it]||(b[it]={projected:[],nodeLabel1:X.label,edgeLabel:U.label,nodeLabel2:et.label});var J={graphId:l,edge:U,preNode:null};b[it].projected.push(J)})})}),Object.keys(b).forEach(function(l){var K=b[l],Z=K.projected,X=K.nodeLabel1,W=K.edgeLabel,U=K.nodeLabel2;w.dfsCode.dfsEdgeList.push(new k(0,1,X,W,U)),w.subGraphMining(Z),w.dfsCode.dfsEdgeList.pop()})}},T}(),m=function(w,C,O,b){var l={};return Object.keys(w).forEach(function(K,Z){var X=w[K],W=new z.Graph(Z,!0,C),U={};X.nodes.forEach(function(et,it){W.addNode(it,et[O]),U[et.id]=it}),X.edges.forEach(function(et,it){var J=U[et.source],rt=U[et.target];W.addEdge(-1,J,rt,et[b])}),W&&W.getNodeNum()&&(l[W.id]=W)}),l},y=function(w,C,O){var b=[];return w.forEach(function(l){var K={nodes:[],edges:[]};l.nodes.forEach(function(Z){var X;K.nodes.push((X={id:"".concat(Z.id)},X[C]=Z.label,X))}),l.edges.forEach(function(Z){var X;K.edges.push((X={source:"".concat(Z.from),target:"".concat(Z.to)},X[O]=Z.label,X))}),b.push(K)}),b},v="cluster",p=function(w){var C=w.graphs,O=w.directed,b=O===void 0?!1:O,l=w.nodeLabelProp,K=l===void 0?v:l,Z=w.edgeLabelProp,X=Z===void 0?v:Z,W=m(C,b,K,X),U=w.minSupport,et=w.maxNodeNum,it=w.minNodeNum,J=w.verbose,rt=w.top,mt={graphs:W,minSupport:U,maxNodeNum:et,minNodeNum:it,top:rt,verbose:J,directed:b},pt=new I(mt);pt.run();var ft=y(pt.frequentSubgraphs,K,X);return ft},g=p;S.default=g},47834:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.VACANT_NODE_LABEL=S.VACANT_NODE_ID=S.VACANT_GRAPH_ID=S.VACANT_EDGE_LABEL=S.VACANT_EDGE_ID=S.Node=S.Graph=S.Edge=S.AUTO_EDGE_ID=void 0;var M=-1;S.VACANT_EDGE_ID=M;var x=-1;S.VACANT_NODE_ID=x;var z="-1";S.VACANT_EDGE_LABEL=z;var k="-1";S.VACANT_NODE_LABEL=k;var E=-1;S.VACANT_GRAPH_ID=E;var N="-1";S.AUTO_EDGE_ID=N;var I=function(){function v(p,g,T,w){p===void 0&&(p=M),g===void 0&&(g=x),T===void 0&&(T=x),w===void 0&&(w=z),this.id=p,this.from=g,this.to=T,this.label=w}return v}();S.Edge=I;var m=function(){function v(p,g){p===void 0&&(p=x),g===void 0&&(g=k),this.id=p,this.label=g,this.edges=[],this.edgeMap={}}return v.prototype.addEdge=function(p){this.edges.push(p),this.edgeMap[p.id]=p},v}();S.Node=m;var y=function(){function v(p,g,T){p===void 0&&(p=x),g===void 0&&(g=!0),T===void 0&&(T=!1),this.id=p,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=T}return v.prototype.getNodeNum=function(){return this.nodes.length},v.prototype.addNode=function(p,g){if(!this.nodeMap[p]){var T=new m(p,g);this.nodes.push(T),this.nodeMap[p]=T,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(p)}},v.prototype.addEdge=function(p,g,T,w){if((this.edgeIdAutoIncrease||p===void 0)&&(p=this.counter++),!(this.nodeMap[g]&&this.nodeMap[T]&&this.nodeMap[T].edgeMap[p])){var C=new I(p,g,T,w);if(this.edges.push(C),this.edgeMap[p]=C,this.nodeMap[g].addEdge(C),this.edgeLabelMap[w]||(this.edgeLabelMap[w]=[]),this.edgeLabelMap[w].push(C),!this.directed){var O=new I(p,T,g,w);this.nodeMap[T].addEdge(O),this.edgeLabelMap[w].push(O)}}},v}();S.Graph=y},22735:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=M(39889),z=I(M(90781)),k=I(M(8828)),E=I(M(40467)),N=M(21152);function I(X){return X&&X.__esModule?X:{default:X}}var m=function(W,U,et,it){et===void 0&&(et="cluster"),it===void 0&&(it=2);var J=[],rt=W.nodes;return U.forEach(function(mt,pt){J.push(y(rt,mt,pt,et,it))}),J},y=function(W,U,et,it,J){var rt=[et],mt=[],pt={};return U.forEach(function(ft,Mt){if(ft<=J&&et!==Mt){rt.push(Mt),mt.push(W[Mt]);var zt=W[Mt][it];pt[zt]?(pt[zt].count++,pt[zt].dists.push(ft)):pt[zt]={count:1,dists:[ft]}}}),Object.keys(pt).forEach(function(ft){pt[ft].dists=pt[ft].dists.sort(function(Mt,zt){return Mt-zt})}),{nodeIdx:et,nodeId:W[et].id,nodeIdxs:rt,neighbors:mt,neighborNum:rt.length-1,nodeLabelCountMap:pt}},v=function(W,U,et,it,J){var rt=Math.ceil(et/U),mt={},pt=0;return it.forEach(function(ft,Mt){for(var zt=0,Vt=0,kt=ft.nodeIdxs,st=ft.neighborNum-1;zt<rt;){for(var St=kt[1+Math.floor(Math.random()*st)],qt=0;(mt["".concat(Mt,"-").concat(St)]||mt["".concat(St,"-").concat(Mt)])&&(St=Math.floor(Math.random()*U),qt++,!(qt>2*U)););if(qt<2*U&&(mt["".concat(Mt,"-").concat(St)]={start:Mt,end:St,distance:J[Mt][St]},zt++,pt++,pt>=et))return mt;if(Vt++,Vt>2*U)break}if(zt<rt){var re=rt-zt;rt=(rt+re)/(U-Mt-1)}}),mt},p=function(W,U,et,it){var J=et.nodes;return it||(it={}),Object.keys(W).forEach(function(rt){var mt,pt;if(!(it&&it[rt])){it[rt]={nodes:[],edges:[]};var ft=W[rt],Mt=(mt=U[ft.start])===null||mt===void 0?void 0:mt.nodeIdxs,zt=(pt=U[ft.end])===null||pt===void 0?void 0:pt.nodeIdxs;if(!(!Mt||!zt)){var Vt=new Set(zt),kt=Mt.filter(function(Nt){return Vt.has(Nt)});if(!(!kt||!kt.length)){for(var st={},St=kt.length,qt=0;qt<St;qt++){var re=J[kt[qt]];it[rt].nodes.push(re),st[re.id]=!0}et.edges.forEach(function(Nt){st[Nt.source]&&st[Nt.target]&&it[rt].edges.push(Nt)})}}}}),it},g=function(W,U,et,it){var J,rt,mt={};W.nodes.forEach(function(ft){mt[ft.id]=ft});var pt=0;return!(!((J=U==null?void 0:U.edges)===null||J===void 0)&&J.length)||((rt=U==null?void 0:U.nodes)===null||rt===void 0?void 0:rt.length)<2?0:(W.edges.forEach(function(ft){var Mt=mt[ft.source][et],zt=mt[ft.target][et],Vt=U==null?void 0:U.nodes[0][et],kt=U==null?void 0:U.nodes[1][et],st=U==null?void 0:U.edges[0][it];ft[it]===st&&(Mt===Vt&&zt===kt||Mt===kt&&zt===Vt)&&pt++}),pt)},T=function(W,U,et){for(var it=1/0,J=0,rt=function(ft){var Mt=W[ft],zt=Object.keys(Mt).sort(function(Nt,be){return Mt[Nt]-Mt[be]}),Vt=10,kt=[];zt.forEach(function(Nt,be){kt[be%Vt]||(kt[be%Vt]={graphs:[],totalCount:0,aveCount:0}),kt[be%Vt].graphs.push(Nt),kt[be%Vt].totalCount+=Mt[Nt]});var st=0,St=[];kt.forEach(function(Nt){var be=Nt.totalCount/Nt.graphs.length;Nt.aveCount=be,St.push(be);var Te=0,nr=Nt.length;Nt.graphs.forEach(function(Rt,Dt){var At=Mt[Rt];Nt.graphs.forEach(function(Xt,$t){Dt!==$t&&(Te+=Math.abs(At-Mt[Xt]))})}),Te/=nr*(nr-1)/2,st+=Te}),st/=kt.length;var qt=0;St.forEach(function(Nt,be){St.forEach(function(Te,nr){be!==nr&&(qt+=Math.abs(Nt-Te))}),qt/=St.length*(St.length-1)/2});var re=qt-st;it<re&&(it=re,J=ft)},mt=0;mt<U;mt++)rt(mt);return{structure:et[J],structureCountMap:W[J]}},w=function(W,U){var et={},it={};return W.forEach(function(J,rt){et[J.id]={idx:rt,node:J,degree:0,inDegree:0,outDegree:0};var mt=J[U];it[mt]||(it[mt]=[]),it[mt].push(J)}),{nodeMap:et,nodeLabelMap:it}},C=function(W,U,et){var it={},J={};return W.forEach(function(rt,mt){it["".concat(N.uniqueId)]={idx:mt,edge:rt};var pt=rt[U];J[pt]||(J[pt]=[]),J[pt].push(rt);var ft=et[rt.source];ft&&(ft.degree++,ft.outDegree++);var Mt=et[rt.target];Mt&&(Mt.degree++,Mt.inDegree++)}),{edgeMap:it,edgeLabelMap:J}},O=function(W,U,et){var it=U.length,J={};return U.forEach(function(rt,mt){for(var pt=et?0:mt+1,ft=W[mt].id,Mt=pt;Mt<it;Mt++)if(mt!==Mt){var zt=W[Mt].id,Vt=rt[Mt];J["".concat(ft,"-").concat(zt)]=Vt,et||(J["".concat(zt,"-").concat(ft)]=Vt)}}),J},b=function(W,U,et,it,J,rt,mt,pt,ft,Mt,zt){var Vt,kt="".concat(U.id,"-").concat(et.id);if(Mt&&Mt[kt])return Mt[kt];var st=zt?zt[kt]:void 0;if(!st){var St=(Vt={},Vt[kt]={start:it[U.id].idx,end:it[et.id].idx,distance:J},Vt);zt=p(St,rt,W,zt),st=zt[kt]}return g(st,mt,pt,ft)},l=function(W,U,et,it){var J,rt,mt,pt=(J=W[U])===null||J===void 0?void 0:J.degree,ft=(rt=W[U])===null||rt===void 0?void 0:rt.inDegree,Mt=(mt=W[U])===null||mt===void 0?void 0:mt.outDegree;return W[U]===void 0&&(pt=1/0,ft=1/0,Mt=1/0,it[U].forEach(function(zt){var Vt=et[zt.id].degree;pt>Vt&&(pt=Vt);var kt=et[zt.id].inDegree;ft>kt&&(ft=kt);var st=et[zt.id].outDegree;Mt>st&&(Mt=st)}),W[U]={degree:pt,inDegree:ft,outDegree:Mt}),{minPatternNodeLabelDegree:pt,minPatternNodeLabelInDegree:ft,minPatternNodeLabelOutDegree:Mt}},K=function(W,U,et,it,J,rt,mt){var pt;if(et===void 0&&(et=!1),rt===void 0&&(rt="cluster"),mt===void 0&&(mt="cluster"),!(!W||!W.nodes)){var ft=W.nodes.length;if(ft){var Mt=(0,z.default)(W,et),zt=(0,z.default)(U,et),Vt=O(W.nodes,Mt,et),kt=O(U.nodes,zt,et),st=w(W.nodes,rt),St=st.nodeMap,qt=st.nodeLabelMap,re=w(U.nodes,rt),Nt=re.nodeMap,be=re.nodeLabelMap;C(W.edges,mt,St);var Te=C(U.edges,mt,Nt).edgeLabelMap,nr=[];zt==null||zt.forEach(function(nn){nr=nr.concat(nn)}),J||(J=Math.max.apply(Math,(0,x.__spreadArray)((0,x.__spreadArray)([],nr,!1),[2],!1))),it||(it=J);var Rt=m(W,Mt,rt,it),Dt=m(U,zt,rt,it),At=Math.min(100,ft*(ft-1)/2),Xt=v(it,ft,At,Rt,Mt),$t=p(Xt,Rt,W),Tt=10,Kt=1,Ee=1,vt=4,bt={graphs:$t,nodeLabelProp:rt,edgeLabelProp:mt,minSupport:Kt,minNodeNum:Ee,maxNodeNum:vt,directed:et},wt=(0,k.default)(bt).slice(0,Tt),D=wt.length,tt=[];wt.forEach(function(nn,vn){tt[vn]={},Object.keys($t).forEach(function(ln){var pn=$t[ln],Bn=g(pn,nn,rt,mt);tt[vn][ln]=Bn})});var Ot=T(tt,D,wt),ct=Ot.structure,ie=Ot.structureCountMap,pe=U.nodes[0],Ge=[],Re=(pt=U.nodes[0])===null||pt===void 0?void 0:pt[rt],Je=-1/0;U.nodes.forEach(function(nn){var vn=nn[rt],ln=qt[vn];(ln==null?void 0:ln.length)>Je&&(Je=ln.length,Ge=ln,Re=vn,pe=nn)});var Ve={},ce={},Le={},je={},Be={},vr={};Object.keys(be).forEach(function(nn,vn){Be[nn]=[],et&&(vr[nn]=[]);var ln=-1/0,pn=be[nn],Bn={};pn.forEach(function(zn){var Hn=kt["".concat(pe.id,"-").concat(zn.id)];if(Hn&&Be[nn].push(Hn),ln<Hn&&(ln=Hn),Bn["".concat(pe.id,"-").concat(zn.id)]={start:0,end:Nt[zn.id].idx,distance:Hn},et){var hi=kt["".concat(zn.id,"-").concat(pe.id)];hi&&vr[nn].push(hi)}}),Be[nn]=Be[nn].sort(function(zn,Hn){return zn-Hn}),et&&(vr[nn]=vr[nn].sort(function(zn,Hn){return zn-Hn})),ce=p(Bn,Dt,U,ce);var Oe=[];if(Object.keys(Bn).forEach(function(zn){if(Le[zn]){Oe.push(Le[zn]);return}var Hn=ce[zn];Le[zn]=g(Hn,ct,rt,mt),Oe.push(Le[zn])}),Oe=Oe.sort(function(zn,Hn){return Hn-zn}),je["".concat(pe.id,"-").concat(nn)]=Oe,nn!==Re)for(var Cn=(Ge==null?void 0:Ge.length)||0,Gn=function(Hn){var hi=Ge[Hn],_i=Rt[St[hi.id].idx],pi=_i.nodeLabelCountMap[nn],Pt=be[nn].length;if(!pi||pi.count<Pt)return Ge.splice(Hn,1),"continue";for(var Lt=!1,H=0;H<Pt;H++)if(pi.dists[H]>Be[nn][H]){Lt=!0;break}if(Lt)return Ge.splice(Hn,1),"continue";var G={};_i.neighbors.forEach(function(Bt){var Ht=Vt["".concat(hi.id,"-").concat(Bt.id)];G["".concat(hi.id,"-").concat(Bt.id)]={start:St[hi.id].idx,end:St[Bt.id].idx,distance:Ht}}),$t=p(G,Rt,W,$t);var F=[];Object.keys(G).forEach(function(Bt){if(ie[Bt]){F.push(ie[Bt]);return}var Ht=$t[Bt];ie[Bt]=g(Ht,ct,rt,mt),F.push(ie[Bt])}),F=F.sort(function(Bt,Ht){return Ht-Bt});for(var ot=!1,H=0;H<Pt;H++)if(F[H]<Oe[H]){ot=!0;break}if(ot)return Ge.splice(Hn,1),"continue"},bi=Cn-1;bi>=0;bi--)Gn(bi)});var or=[];Ge==null||Ge.forEach(function(nn){for(var vn=St[nn.id].idx,ln=y(W.nodes,Mt[vn],vn,rt,J),pn=ln.neighbors,Bn=pn.length,Oe=!1,Cn=Bn-1;Cn>=0;Cn--){if(pn.length+1<U.nodes.length){Oe=!0;return}var Gn=pn[Cn],bi=Gn[rt];if(!be[bi]||!be[bi].length){pn.splice(Cn,1);continue}if(!Be[bi]||!Be[bi].length){pn.splice(Cn,1);continue}var zn="".concat(nn.id,"-").concat(Gn.id),Hn=Vt[zn],hi=Be[bi].length-1,_i=Be[bi][hi];if(Hn>_i){pn.splice(Cn,1);continue}if(et){var pi="".concat(Gn.id,"-").concat(nn.id),Pt=Vt[pi];hi=vr[bi].length-1;var Lt=vr[bi][hi];if(Pt>Lt){pn.splice(Cn,1);continue}}var H=ie[zn]?ie[zn]:b(W,nn,Gn,St,Hn,Rt,ct,rt,mt,ie,$t),G="".concat(pe.id,"-").concat(bi),F=je[G][je[G].length-1];if(H<F){pn.splice(Cn,1);continue}var ot=l(Ve,bi,Nt,be),Bt=ot.minPatternNodeLabelDegree,Ht=ot.minPatternNodeLabelInDegree,Yt=ot.minPatternNodeLabelOutDegree;if(St[Gn.id].degree<Bt){pn.splice(Cn,1);continue}}Oe||or.push({nodes:[nn].concat(pn)})});var Ae=(0,E.default)(U,pe.id,!1).length,yr={};et?(Object.keys(Ae).forEach(function(nn){var vn=Nt[nn].node[rt];yr[vn]?yr[vn].push(Ae[nn]):yr[vn]=[Ae[nn]]}),Object.keys(yr).forEach(function(nn){yr[nn].sort(function(vn,ln){return vn-ln})})):yr=Be;for(var Cr=or.length,zr=function(vn){var ln=or[vn],pn=ln.nodes[0],Bn={},Oe={};ln.nodes.forEach(function(Er,ye){Oe[Er.id]={idx:ye,node:Er,degree:0,inDegree:0,outDegree:0};var Ft=Er[rt];Bn[Ft]?Bn[Ft]++:Bn[Ft]=1});var Cn=[],Gn={};W.edges.forEach(function(Er){Oe[Er.source]&&Oe[Er.target]&&(Cn.push(Er),Gn[Er[mt]]?Gn[Er[mt]]++:Gn[Er[mt]]=1,Oe[Er.source].degree++,Oe[Er.target].degree++,Oe[Er.source].outDegree++,Oe[Er.target].inDegree++)});for(var bi=Object.keys(Te).length,zn=!1,Hn=0;Hn<bi;Hn++){var hi=Object.keys(Te)[Hn];if(!Gn[hi]||Gn[hi]<Te[hi].length){zn=!0;break}}if(zn)return or.splice(vn,1),"continue";var _i=Cn.length;if(_i<U.edges.length)return or.splice(vn,1),"break";for(var pi=!1,Pt=function(ye){var Ft=Cn[ye],ne=Ft[mt],Pe=Te[ne];if(!Pe||!Pe.length)return Gn[ne]--,Pe&&Gn[ne]<Pe.length?(pi=!0,"break"):(Cn.splice(ye,1),Oe[Ft.source].degree--,Oe[Ft.target].degree--,Oe[Ft.source].outDegree--,Oe[Ft.target].inDegree--,"continue");var Ce=Oe[Ft.source].node[rt],Ue=Oe[Ft.target].node[rt],Xe=!1;if(Pe.forEach(function(Wr){var $r=Nt[Wr.source].node,mn=Nt[Wr.target].node;$r[rt]===Ce&&mn[rt]===Ue&&(Xe=!0),!et&&$r[rt]===Ue&&mn[rt]===Ce&&(Xe=!0)}),!Xe)return Gn[ne]--,Pe&&Gn[ne]<Pe.length?(pi=!0,"break"):(Cn.splice(ye,1),Oe[Ft.source].degree--,Oe[Ft.target].degree--,Oe[Ft.source].outDegree--,Oe[Ft.target].inDegree--,"continue")},Hn=_i-1;Hn>=0;Hn--){var Lt=Pt(Hn);if(Lt==="break")break}if(pi)return or.splice(vn,1),"continue";ln.edges=Cn;var H=(0,E.default)(ln,ln.nodes[0].id,!1).length;if(Object.keys(H).reverse().forEach(function(Er){if(!(Er===ln.nodes[0].id||pi)){if(H[Er]===1/0){var ye=Oe[Er].node[rt];if(Bn[ye]--,Bn[ye]<be[ye].length){pi=!0;return}var Ft=ln.nodes.indexOf(Oe[Er].node);ln.nodes.splice(Ft,1),Oe[Er]=void 0;return}var ne=St[Er].node[rt];if(!yr[ne]||!yr[ne].length||H[Er]>yr[ne][yr[ne].length-1]){var ye=Oe[Er].node[rt];if(Bn[ye]--,Bn[ye]<be[ye].length){pi=!0;return}var Ft=ln.nodes.indexOf(Oe[Er].node);ln.nodes.splice(Ft,1),Oe[Er]=void 0}}}),pi)return or.splice(vn,1),"continue";for(var G=!0,F=0;G&&!pi;){G=!1;var ot=et?Oe[pn.id].degree<Nt[pe.id].degree||Oe[pn.id].inDegree<Nt[pe.id].inDegree||Oe[pn.id].outDegree<Nt[pe.id].outDegree:Oe[pn.id].degree<Nt[pe.id].degree;if(ot){pi=!0;break}if(Bn[pn[rt]]<be[pn[rt]].length){pi=!0;break}for(var Bt=ln.nodes.length,Ht=Bt-1;Ht>=0;Ht--){var Yt=ln.nodes[Ht],he=Oe[Yt.id].degree,at=Oe[Yt.id].inDegree,yt=Oe[Yt.id].outDegree,te=Yt[rt],Me=l(Ve,te,Nt,be),_e=Me.minPatternNodeLabelDegree,tr=Me.minPatternNodeLabelInDegree,sr=Me.minPatternNodeLabelOutDegree,ge=et?he<_e||at<tr||yt<sr:he<_e;if(ge){if(Bn[Yt[rt]]--,Bn[Yt[rt]]<be[Yt[rt]].length){pi=!0;break}ln.nodes.splice(Ht,1),Oe[Yt.id]=void 0,G=!0}}if(pi||!G&&F!==0)break;_i=Cn.length;for(var Fe=_i-1;Fe>=0;Fe--){var qe=Cn[Fe];if(!Oe[qe.source]||!Oe[qe.target]){Cn.splice(Fe,1);var _r=qe[mt];if(Gn[_r]--,Oe[qe.source]&&(Oe[qe.source].degree--,Oe[qe.source].outDegree--),Oe[qe.target]&&(Oe[qe.target].degree--,Oe[qe.target].inDegree--),Te[_r]&&Gn[_r]<Te[_r].length){pi=!0;break}G=!0}}F++}if(pi||pi||ln.nodes.length<U.nodes.length||Cn.length<U.edges.length)return or.splice(vn,1),"continue"},Mr=Cr-1;Mr>=0;Mr--){var un=zr(Mr);if(un==="break")break}for(var hn=or.length,Un=function(vn){var ln=or[vn],pn={};ln.edges.forEach(function(Cn){var Gn="".concat(Cn.source,"-").concat(Cn.target,"-").concat(Cn.label);pn[Gn]?pn[Gn]++:pn[Gn]=1});for(var Bn=function(Gn){var bi=or[Gn],zn={};bi.edges.forEach(function(hi){var _i="".concat(hi.source,"-").concat(hi.target,"-").concat(hi.label);zn[_i]?zn[_i]++:zn[_i]=1});var Hn=!0;Object.keys(zn).length!==Object.keys(pn).length?Hn=!1:Object.keys(pn).forEach(function(hi){zn[hi]!==pn[hi]&&(Hn=!1)}),Hn&&or.splice(Gn,1)},Oe=hn-1;Oe>vn;Oe--)Bn(Oe);hn=or.length},Mr=0;Mr<=hn-1;Mr++)Un(Mr);return or}}},Z=K;S.default=Z},60877:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=k(M(61601)),z=M(21152);function k(I){return I&&I.__esModule?I:{default:I}}var E=function(m,y,v,p){y===void 0&&(y=!1),v===void 0&&(v="weight"),p===void 0&&(p=1e3);var g=m.nodes,T=g===void 0?[]:g,w=m.edges,C=w===void 0?[]:w,O={},b={};T.forEach(function(rt,mt){var pt=(0,z.uniqueId)();rt.clusterId=pt,O[pt]={id:pt,nodes:[rt]},b[rt.id]={node:rt,idx:mt}});var l=(0,x.default)(m,y),K=[],Z={};l.forEach(function(rt,mt){var pt=0,ft=T[mt].id;Z[ft]={},rt.forEach(function(Mt,zt){if(Mt){pt+=Mt;var Vt=T[zt].id;Z[ft][Vt]=Mt}}),K.push(pt)});for(var X=0,W=function(){var mt=!1;if(T.forEach(function(pt){var ft={};Object.keys(Z[pt.id]).forEach(function(re){var Nt=Z[pt.id][re],be=b[re].node,Te=be.clusterId;ft[Te]||(ft[Te]=0),ft[Te]+=Nt});var Mt=-1/0,zt=[];if(Object.keys(ft).forEach(function(re){Mt<ft[re]?(Mt=ft[re],zt=[re]):Mt===ft[re]&&zt.push(re)}),!(zt.length===1&&zt[0]===pt.clusterId)){var Vt=zt.indexOf(pt.clusterId);if(Vt>=0&&zt.splice(Vt,1),zt&&zt.length){mt=!0;var kt=O[pt.clusterId],st=kt.nodes.indexOf(pt);kt.nodes.splice(st,1);var St=Math.floor(Math.random()*zt.length),qt=O[zt[St]];qt.nodes.push(pt),pt.clusterId=qt.id}}}),!mt)return"break";X++};X<p;){var U=W();if(U==="break")break}Object.keys(O).forEach(function(rt){var mt=O[rt];(!mt.nodes||!mt.nodes.length)&&delete O[rt]});var et=[],it={};C.forEach(function(rt){var mt=rt.source,pt=rt.target,ft=rt[v]||1,Mt=b[mt].node.clusterId,zt=b[pt].node.clusterId,Vt="".concat(Mt,"---").concat(zt);if(it[Vt])it[Vt].weight+=ft,it[Vt].count++;else{var kt={source:Mt,target:zt,weight:ft,count:1};it[Vt]=kt,et.push(kt)}});var J=[];return Object.keys(O).forEach(function(rt){J.push(O[rt])}),{clusters:J,clusterEdges:et}},N=E;S.default=N},16742:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=M(76405),z=I(M(61601)),k=I(M(12023)),E=M(26580),N=M(71547);function I(g){return g&&g.__esModule?g:{default:g}}var m=function(T,w,C,O){for(var b=w.length,l=2*O,K=0,Z=0;Z<b;Z++)for(var X=T[Z].clusterId,W=0;W<b;W++){var U=T[W].clusterId;if(X===U){var et=w[Z][W]||0,it=C[Z]||0,J=C[W]||0;K+=et-it*J/l}}return K*=1/l,K},y=function(T,w){T===void 0&&(T=[]);for(var C=T.length,O=new k.default([]),b=0;b<C;b++)O=O.add(new k.default(w[b]));var l=O.avg(C);l.normalize();for(var K=0,b=0;b<C;b++){var Z=new k.default(w[b]),X=Z.squareEuclideanDistance(l);K+=X}var W=[];T.forEach(function(){W.push([])});for(var b=0;b<C;b++){var Z=new k.default(w[b]);T[b].clusterInertial=0;for(var U=0;U<C;U++){if(b===U){W[b][U]=0;continue}var et=new k.default(w[U]);W[b][U]=Z.squareEuclideanDistance(et),T[b].clusterInertial+=W[b][U]}}for(var it=0,J=2*C*K,b=0;b<C;b++)for(var rt=T[b].clusterId,U=0;U<C;U++){var mt=T[U].clusterId;if(!(b===U||rt!==mt)){var pt=T[b].clusterInertial*T[U].clusterInertial/Math.pow(J,2)-W[b][U]/J;it+=pt}}return Number(it.toFixed(4))},v=function(T,w,C,O,b,l,K,Z,X){w===void 0&&(w=!1),C===void 0&&(C="weight"),O===void 0&&(O=1e-4),b===void 0&&(b=!1),l===void 0&&(l=void 0),K===void 0&&(K=[]),Z===void 0&&(Z=["id"]),X===void 0&&(X=1);var W=T.nodes,U=W===void 0?[]:W,et=T.edges,it=et===void 0?[]:et,J=[];if(b){U.forEach(function($t,Tt){$t.properties=$t.properties||{},$t.originIndex=Tt});var rt=[];U.every(function($t){return $t.hasOwnProperty("nodeType")})&&(rt=Array.from(new Set(U.map(function($t){return $t.nodeType}))),U.forEach(function($t){$t.properties.nodeType=rt.findIndex(function(Tt){return Tt===$t.nodeType})}));var mt=(0,E.getAllProperties)(U,l);J=(0,N.oneHot)(mt,K,Z)}var pt=1,ft={},Mt={};U.forEach(function($t,Tt){var Kt=String(pt++);$t.clusterId=Kt,ft[Kt]={id:Kt,nodes:[$t]},Mt[$t.id]={node:$t,idx:Tt}});var zt=(0,z.default)(T,w),Vt=[],kt={},st=0;zt.forEach(function($t,Tt){var Kt=0,Ee=U[Tt].id;kt[Ee]={},$t.forEach(function(vt,bt){if(vt){Kt+=vt;var wt=U[bt].id;kt[Ee][wt]=vt,st+=vt}}),Vt.push(Kt)}),st/=2;for(var St=1/0,qt=1/0,re=0,Nt=[],be={};;){b&&U.every(function($t){return $t.hasOwnProperty("properties")})?St=m(U,zt,Vt,st)+y(U,J)*X:St=m(U,zt,Vt,st),re===0&&(qt=St,Nt=U,be=ft);var Te=St>0&&St>qt&&St-qt<O;if(St>qt&&(Nt=U.map(function($t){return{node:$t,clusterId:$t.clusterId}}),be=(0,x.clone)(ft),qt=St),Te||re>100)break;re++,Object.keys(ft).forEach(function($t){var Tt=0;it.forEach(function(Kt){var Ee=Kt.source,vt=Kt.target,bt=Mt[Ee].node.clusterId,wt=Mt[vt].node.clusterId;(bt===$t&&wt!==$t||wt===$t&&bt!==$t)&&(Tt=Tt+(Kt[C]||1))}),ft[$t].sumTot=Tt}),U.forEach(function($t,Tt){var Kt=ft[$t.clusterId],Ee=0,vt,bt=Vt[Tt]/(2*st),wt=0,D=Kt.nodes;D.forEach(function(ce){var Le=Mt[ce.id].idx;wt+=zt[Tt][Le]||0});var tt=wt-Kt.sumTot*bt,Ot=D.filter(function(ce){return ce.id!==$t.id}),ct=[];Ot.forEach(function(ce,Le){ct[Le]=J[ce.originIndex]});var ie=y(Ot,J)*X,pe=kt[$t.id];if(Object.keys(pe).forEach(function(ce){var Le=Mt[ce].node,je=Le.clusterId;if(je!==$t.clusterId){var Be=ft[je],vr=Be.nodes;if(!(!vr||!vr.length)){var or=0;vr.forEach(function(un){var hn=Mt[un.id].idx;or+=zt[Tt][hn]||0});var Ae=or-Be.sumTot*bt,yr=vr.concat([$t]),Cr=[];yr.forEach(function(un,hn){Cr[hn]=J[un.originIndex]});var zr=y(yr,J)*X,Mr=Ae-tt;b&&(Mr=Ae+zr-(tt+ie)),Mr>Ee&&(Ee=Mr,vt=Be)}}}),Ee>0){vt.nodes.push($t);var Ge=$t.clusterId;$t.clusterId=vt.id;var Re=Kt.nodes.indexOf($t);Kt.nodes.splice(Re,1);var Je=0,Ve=0;it.forEach(function(ce){var Le=ce.source,je=ce.target,Be=Mt[Le].node.clusterId,vr=Mt[je].node.clusterId;(Be===vt.id&&vr!==vt.id||vr===vt.id&&Be!==vt.id)&&(Je=Je+(ce[C]||1)),(Be===Ge&&vr!==Ge||vr===Ge&&Be!==Ge)&&(Ve=Ve+(ce[C]||1))}),vt.sumTot=Je,Kt.sumTot=Ve}})}var nr={},Rt=0;Object.keys(be).forEach(function($t){var Tt=be[$t];if(!Tt.nodes||!Tt.nodes.length){delete be[$t];return}var Kt=String(Rt+1);Kt!==$t&&(Tt.id=Kt,Tt.nodes=Tt.nodes.map(function(Ee){return{id:Ee.id,clusterId:Kt}}),be[Kt]=Tt,nr[$t]=Kt,delete be[$t],Rt++)}),Nt.forEach(function($t){var Tt=$t.node,Kt=$t.clusterId;Tt&&(Tt.clusterId=Kt,Tt.clusterId&&nr[Tt.clusterId]&&(Tt.clusterId=nr[Tt.clusterId]))});var Dt=[],At={};it.forEach(function($t){var Tt=$t.source,Kt=$t.target,Ee=$t[C]||1,vt=Mt[Tt].node.clusterId,bt=Mt[Kt].node.clusterId;if(!(!vt||!bt)){var wt="".concat(vt,"---").concat(bt);if(At[wt])At[wt].weight+=Ee,At[wt].count++;else{var D={source:vt,target:bt,weight:Ee,count:1};At[wt]=D,Dt.push(D)}}});var Xt=[];return Object.keys(be).forEach(function($t){Xt.push(be[$t])}),{clusters:Xt,clusterEdges:Dt}},p=v;S.default=p},39972:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=E(M(80746)),z=E(M(7846)),k=M(21152);function E(v){return v&&v.__esModule?v:{default:v}}var N=function(p,g){var T=[],w=p.nodes,C=w===void 0?[]:w,O=p.edges,b=O===void 0?[]:O;if(C.length===0)return T;var l=C[0],K=new Set;K.add(l);var Z=function(J,rt){return g?J.weight-rt.weight:0},X=new z.default(Z);for((0,k.getEdgesByNodeId)(l.id,b).forEach(function(it){X.insert(it)});!X.isEmpty();){var W=X.delMin(),U=W.source,et=W.target;K.has(U)&&K.has(et)||(T.push(W),K.has(U)||(K.add(U),(0,k.getEdgesByNodeId)(U,b).forEach(function(it){X.insert(it)})),K.has(et)||(K.add(et),(0,k.getEdgesByNodeId)(et,b).forEach(function(it){X.insert(it)})))}return T},I=function(p,g){var T=[],w=p.nodes,C=w===void 0?[]:w,O=p.edges,b=O===void 0?[]:O;if(C.length===0)return T;var l=b.map(function(U){return U});g&&l.sort(function(U,et){return U.weight-et.weight});for(var K=new x.default(C.map(function(U){return U.id}));l.length>0;){var Z=l.shift(),X=Z.source,W=Z.target;K.connected(X,W)||(T.push(Z),K.union(X,W))}return T},m=function(p,g,T){var w={prim:N,kruskal:I};return T?w[T](p,g):I(p,g)},y=m;S.default=y},91234:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=k(M(67543)),z=M(21152);function k(I){return I&&I.__esModule?I:{default:I}}var E=function(m,y,v){typeof y!="number"&&(y=1e-6),typeof v!="number"&&(v=.85);for(var p=1,g=0,T=1e3,w=m.nodes,C=w===void 0?[]:w,O=m.edges,b=O===void 0?[]:O,l=C.length,K,Z={},X={},W=0;W<l;++W){var U=C[W],et=U.id;Z[et]=1/l,X[et]=1/l}for(var it=(0,x.default)(m);T>0&&p>y;){g=0;for(var W=0;W<l;++W){var U=C[W],et=U.id;if(K=0,it[U.id].inDegree===0)Z[et]=0;else{for(var J=(0,z.getNeighbors)(et,b,"source"),rt=0;rt<J.length;++rt){var mt=J[rt],pt=it[mt].outDegree;pt>0&&(K+=X[mt]/pt)}Z[et]=v*K,g+=Z[et]}}g=(1-g)/l,p=0;for(var W=0;W<l;++W){var U=C[W],et=U.id;K=Z[et]+g,p+=Math.abs(K-X[et]),X[et]=K}T-=1}return X},N=E;S.default=N},7846:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var M=function(E,N){return E-N},x=function(){function k(E){E===void 0&&(E=M),this.compareFn=E,this.list=[]}return k.prototype.getLeft=function(E){return 2*E+1},k.prototype.getRight=function(E){return 2*E+2},k.prototype.getParent=function(E){return E===0?null:Math.floor((E-1)/2)},k.prototype.isEmpty=function(){return this.list.length<=0},k.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},k.prototype.delMin=function(){var E=this.top(),N=this.list.pop();return this.list.length>0&&(this.list[0]=N,this.moveDown(0)),E},k.prototype.insert=function(E){if(E!==null){this.list.push(E);var N=this.list.length-1;return this.moveUp(N),!0}return!1},k.prototype.moveUp=function(E){for(var N=this.getParent(E);E&&E>0&&this.compareFn(this.list[N],this.list[E])>0;){var I=this.list[N];this.list[N]=this.list[E],this.list[E]=I,E=N,N=this.getParent(E)}},k.prototype.moveDown=function(E){var N,I=E,m=this.getLeft(E),y=this.getRight(E),v=this.list.length;m!==null&&m<v&&this.compareFn(this.list[I],this.list[m])>0?I=m:y!==null&&y<v&&this.compareFn(this.list[I],this.list[y])>0&&(I=y),E!==I&&(N=[this.list[I],this.list[E]],this.list[E]=N[0],this.list[I]=N[1],this.moveDown(I))},k}(),z=x;S.default=z},62207:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=S.LinkedListNode=void 0;var M=function(N,I){return N===I},x=function(){function E(N,I){I===void 0&&(I=null),this.value=N,this.next=I}return E.prototype.toString=function(N){return N?N(this.value):"".concat(this.value)},E}();S.LinkedListNode=x;var z=function(){function E(N){N===void 0&&(N=M),this.head=null,this.tail=null,this.compare=N}return E.prototype.prepend=function(N){var I=new x(N,this.head);return this.head=I,this.tail||(this.tail=I),this},E.prototype.append=function(N){var I=new x(N);return this.head?(this.tail.next=I,this.tail=I,this):(this.head=I,this.tail=I,this)},E.prototype.delete=function(N){if(!this.head)return null;for(var I=null;this.head&&this.compare(this.head.value,N);)I=this.head,this.head=this.head.next;var m=this.head;if(m!==null)for(;m.next;)this.compare(m.next.value,N)?(I=m.next,m.next=m.next.next):m=m.next;return this.compare(this.tail.value,N)&&(this.tail=m),I},E.prototype.find=function(N){var I=N.value,m=I===void 0?void 0:I,y=N.callback,v=y===void 0?void 0:y;if(!this.head)return null;for(var p=this.head;p;){if(v&&v(p.value)||m!==void 0&&this.compare(p.value,m))return p;p=p.next}return null},E.prototype.deleteTail=function(){var N=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,N;for(var I=this.head;I.next;)I.next.next?I=I.next:I.next=null;return this.tail=I,N},E.prototype.deleteHead=function(){if(!this.head)return null;var N=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),N},E.prototype.fromArray=function(N){var I=this;return N.forEach(function(m){return I.append(m)}),this},E.prototype.toArray=function(){for(var N=[],I=this.head;I;)N.push(I),I=I.next;return N},E.prototype.reverse=function(){for(var N=this.head,I=null,m=null;N;)m=N.next,N.next=I,I=N,N=m;this.tail=this.head,this.head=I},E.prototype.toString=function(N){return N===void 0&&(N=void 0),this.toArray().map(function(I){return I.toString(N)}).toString()},E}(),k=z;S.default=k},99878:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=z(M(62207));function z(N){return N&&N.__esModule?N:{default:N}}var k=function(){function N(){this.linkedList=new x.default}return N.prototype.isEmpty=function(){return!this.linkedList.head},N.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},N.prototype.enqueue=function(I){this.linkedList.append(I)},N.prototype.dequeue=function(){var I=this.linkedList.deleteHead();return I?I.value:null},N.prototype.toString=function(I){return this.linkedList.toString(I)},N}(),E=k;S.default=E},80746:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var M=function(){function z(k){this.count=k.length,this.parent={};for(var E=0,N=k;E<N.length;E++){var I=N[E];this.parent[I]=I}}return z.prototype.find=function(k){for(;this.parent[k]!==k;)k=this.parent[k];return k},z.prototype.union=function(k,E){var N=this.find(k),I=this.find(E);N!==I&&(N<I?(this.parent[E]!==E&&this.union(this.parent[E],k),this.parent[E]=this.parent[k]):(this.parent[k]!==k&&this.union(this.parent[k],E),this.parent[k]=this.parent[E]))},z.prototype.connected=function(k,E){return this.find(k)===this.find(E)},z}(),x=M;S.default=x},19392:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.DistanceType=void 0;var M;S.DistanceType=M,function(x){x.EuclideanDistance="euclideanDistance"}(M||(S.DistanceType=M={}))},21152:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.uniqueId=S.getOutEdgesNodeId=S.getNeighbors=S.getEdgesByNodeId=void 0;var M=function(N,I,m){I===void 0&&(I=[]);var y=I.filter(function(T){return T.source===N||T.target===N});if(m==="target"){var v=function(w){return w.source===N};return y.filter(v).map(function(T){return T.target})}if(m==="source"){var p=function(w){return w.target===N};return y.filter(p).map(function(T){return T.source})}var g=function(w){return w.source===N?w.target:w.source};return y.map(g)};S.getNeighbors=M;var x=function(N,I){return I.filter(function(m){return m.source===N})};S.getOutEdgesNodeId=x;var z=function(N,I){return I.filter(function(m){return m.source===N||m.target===N})};S.getEdgesByNodeId=z;var k=function(N){N===void 0&&(N=0);var I="".concat(Math.random()).split(".")[1].substr(0,5),m="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(N,"-").concat(I).concat(m)};S.uniqueId=k},71547:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.oneHot=S.getDistance=S.getAllKeyValueMap=S.default=void 0;var x=M(76405),z=M(19392),k=E(M(12023));function E(v){return v&&v.__esModule?v:{default:v}}var N=function(p,g,T){var w=[];g!=null&&g.length?w=g:(p.forEach(function(O){w=w.concat(Object.keys(O))}),w=(0,x.uniq)(w));var C={};return w.forEach(function(O){var b=[];p.forEach(function(l){l[O]!==void 0&&l[O]!==""&&b.push(l[O])}),b.length&&!(T!=null&&T.includes(O))&&(C[O]=(0,x.uniq)(b))}),C};S.getAllKeyValueMap=N;var I=function(p,g,T){var w=N(p,g,T),C=[];return Object.keys(w).length&&p.forEach(function(O,b){var l=[];if(Object.keys(w).length===1){var K=Object.keys(w)[0],Z=w[K];Z.every(function(X){return!isNaN(Number(X))})&&(l=[O[K]])}else Object.keys(w).forEach(function(X){for(var W=O[X],U=w[X],et=U.findIndex(function(rt){return W===rt}),it=[],J=0;J<U.length;J++)J===et?it.push(1):it.push(0);l=l.concat(it)});C[b]=l}),C};S.oneHot=I;var m=function(p,g,T,w){T===void 0&&(T=z.DistanceType.EuclideanDistance);var C=0;switch(T){case z.DistanceType.EuclideanDistance:C=new k.default(p).euclideanDistance(new k.default(g));break;default:break}return C};S.getDistance=m;var y={getAllKeyValueMap:N,oneHot:I,getDistance:m};S.default=y},26580:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getPropertyWeight=S.getAllSortProperties=S.getAllProperties=S.default=void 0;var x=M(94061),z=function(y,v){y===void 0&&(y=[]),v===void 0&&(v=100);var p={};y.forEach(function(T){T.properties&&Object.keys(T.properties).forEach(function(w){if(w==="id"||!"".concat(T.properties[w]).match(x.secondReg)&&!"".concat(T.properties[w]).match(x.dateReg)&&isNaN(Number(T.properties[w]))){p.hasOwnProperty(w)&&delete p[w];return}p.hasOwnProperty(w)?p[w]+=1:p[w]=1})});var g=Object.keys(p).sort(function(T,w){return p[w]-p[T]});return g.length<v?g:g.slice(0,v)};S.getAllSortProperties=z;var k=function(y,v){return v.map(function(p){if(y.hasOwnProperty(p)){if(!isNaN(Number(y[p])))return Number(y[p]);if(y[p].match(x.secondReg)||y[p].match(x.dateReg))return Number(Date.parse(new Date(y[p])))/1e3}return 0})},E=function(y){for(var v=z(y),p=[],g=0;g<y.length;g++)p[g]=k(y[g].properties,v);return p};S.getPropertyWeight=E;var N=function(y,v){v===void 0&&(v=void 0);var p=[];return y.forEach(function(g){v===void 0&&p.push(g),g[v]!==void 0&&p.push(g[v])}),p};S.getAllProperties=N;var I={getAllSortProperties:z,getPropertyWeight:E,getAllProperties:N};S.default=I},12023:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=M(76405),z=function(){function E(N){this.arr=N}return E.prototype.getArr=function(){return this.arr||[]},E.prototype.add=function(N){var I,m=N.arr;if(!(!((I=this.arr)===null||I===void 0)&&I.length))return new E(m);if(!(m!=null&&m.length))return new E(this.arr);if(this.arr.length===m.length){var y=[];for(var v in this.arr)y[v]=this.arr[v]+m[v];return new E(y)}},E.prototype.subtract=function(N){var I,m=N.arr;if(!(!((I=this.arr)===null||I===void 0)&&I.length))return new E(m);if(!(m!=null&&m.length))return new E(this.arr);if(this.arr.length===m.length){var y=[];for(var v in this.arr)y[v]=this.arr[v]-m[v];return new E(y)}},E.prototype.avg=function(N){var I=[];if(N!==0)for(var m in this.arr)I[m]=this.arr[m]/N;return new E(I)},E.prototype.negate=function(){var N=[];for(var I in this.arr)N[I]=-this.arr[I];return new E(N)},E.prototype.squareEuclideanDistance=function(N){var I,m=N.arr;if(!(!((I=this.arr)===null||I===void 0)&&I.length)||!(m!=null&&m.length))return 0;if(this.arr.length===m.length){var y=0;for(var v in this.arr)y+=Math.pow(this.arr[v]-N.arr[v],2);return y}},E.prototype.euclideanDistance=function(N){var I,m=N.arr;if(!(!((I=this.arr)===null||I===void 0)&&I.length)||!(m!=null&&m.length))return 0;if(this.arr.length===m.length){var y=0;for(var v in this.arr)y+=Math.pow(this.arr[v]-N.arr[v],2);return Math.sqrt(y)}else console.error("The two vectors are unequal in length.")},E.prototype.normalize=function(){var N=[],I=(0,x.clone)(this.arr);I.sort(function(p,g){return p-g});var m=I[I.length-1],y=I[0];for(var v in this.arr)N[v]=(this.arr[v]-y)/(m-y);return new E(N)},E.prototype.norm2=function(){var N;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return 0;var I=0;for(var m in this.arr)I+=Math.pow(this.arr[m],2);return Math.sqrt(I)},E.prototype.dot=function(N){var I,m=N.arr;if(!(!((I=this.arr)===null||I===void 0)&&I.length)||!(m!=null&&m.length))return 0;if(this.arr.length===m.length){var y=0;for(var v in this.arr)y+=this.arr[v]*N.arr[v];return y}else console.error("The two vectors are unequal in length.")},E.prototype.equal=function(N){var I,m=N.arr;if(((I=this.arr)===null||I===void 0?void 0:I.length)!==(m==null?void 0:m.length))return!1;for(var y in this.arr)if(this.arr[y]!==m[y])return!1;return!0},E}(),k=z;S.default=k},33013:function(le,S,M){"use strict";function x(X){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},x(X)}Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"GADDI",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(S,"breadthFirstSearch",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(S,"connectedComponent",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(S,"depthFirstSearch",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(S,"detectCycle",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(S,"dijkstra",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(S,"findAllPath",{enumerable:!0,get:function(){return v.findAllPath}}),Object.defineProperty(S,"findShortestPath",{enumerable:!0,get:function(){return v.findShortestPath}}),Object.defineProperty(S,"floydWarshall",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(S,"getAdjMatrix",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(S,"getDegree",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(S,"getInDegree",{enumerable:!0,get:function(){return N.getInDegree}}),Object.defineProperty(S,"getNeighbors",{enumerable:!0,get:function(){return b.getNeighbors}}),Object.defineProperty(S,"getOutDegree",{enumerable:!0,get:function(){return N.getOutDegree}}),Object.defineProperty(S,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(S,"louvain",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(S,"minimumSpanningTree",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(S,"pageRank",{enumerable:!0,get:function(){return C.default}});var z=Z(M(61601)),k=Z(M(26773)),E=Z(M(15968)),N=K(M(67543)),I=Z(M(27945)),m=Z(M(86015)),y=Z(M(40467)),v=M(80735),p=Z(M(90781)),g=Z(M(60877)),T=Z(M(16742)),w=Z(M(39972)),C=Z(M(91234)),O=Z(M(22735)),b=M(21152);function l(X){if(typeof WeakMap!="function")return null;var W=new WeakMap,U=new WeakMap;return(l=function(it){return it?U:W})(X)}function K(X,W){if(!W&&X&&X.__esModule)return X;if(X===null||x(X)!=="object"&&typeof X!="function")return{default:X};var U=l(W);if(U&&U.has(X))return U.get(X);var et={},it=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in X)if(J!=="default"&&Object.prototype.hasOwnProperty.call(X,J)){var rt=it?Object.getOwnPropertyDescriptor(X,J):null;rt&&(rt.get||rt.set)?Object.defineProperty(et,J,rt):et[J]=X[J]}return et.default=X,U&&U.set(X,et),et}function Z(X){return X&&X.__esModule?X:{default:X}}},52415:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MESSAGE=S.ALGORITHM=void 0;var M={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};S.ALGORITHM=M;var x={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};S.MESSAGE=x},19240:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var x=M(52415),z=k(M(17924));function k(I){return I&&I.__esModule?I:{default:I}}var E=function(m){return function(){for(var y=[],v=0;v<arguments.length;v++)y[v]=arguments[v];return new Promise(function(p,g){var T=new z.default;T.postMessage({_algorithmType:m,data:y}),T.onmessage=function(w){var C=w.data,O=C.data,b=C._algorithmType;x.MESSAGE.SUCCESS===b?p(O):g(),T.terminate()}})}},N=E;S.default=N},88312:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.pageRankAsync=S.minimumSpanningTreeAsync=S.louvainAsync=S.labelPropagationAsync=S.getOutDegreeAsync=S.getNeighborsAsync=S.getInDegreeAsync=S.getDegreeAsync=S.getAdjMatrixAsync=S.floydWarshallAsync=S.findShortestPathAsync=S.findAllPathAsync=S.dijkstraAsync=S.detectCycleAsync=S.detectAllUndirectedCycleAsync=S.detectAllDirectedCycleAsync=S.detectAllCyclesAsync=S.connectedComponentAsync=S.GADDIAsync=void 0;var x=k(M(19240)),z=M(52415);function k(et){return et&&et.__esModule?et:{default:et}}var E=function(it,J){return(0,x.default)(z.ALGORITHM.getAdjMatrix).apply(void 0,[it,J])};S.getAdjMatrixAsync=E;var N=function(it,J){return(0,x.default)(z.ALGORITHM.connectedComponent).apply(void 0,[it,J])};S.connectedComponentAsync=N;var I=function(it){return(0,x.default)(z.ALGORITHM.getDegree)(it)};S.getDegreeAsync=I;var m=function(it,J){return(0,x.default)(z.ALGORITHM.getInDegree)(it,J)};S.getInDegreeAsync=m;var y=function(it,J){return(0,x.default)(z.ALGORITHM.getOutDegree)(it,J)};S.getOutDegreeAsync=y;var v=function(it){return(0,x.default)(z.ALGORITHM.detectCycle)(it)};S.detectCycleAsync=v;var p=function(it){return(0,x.default)(z.ALGORITHM.detectAllCycles)(it)};S.detectAllCyclesAsync=p;var g=function(it){return(0,x.default)(z.ALGORITHM.detectAllDirectedCycle)(it)};S.detectAllDirectedCycleAsync=g;var T=function(it){return(0,x.default)(z.ALGORITHM.detectAllUndirectedCycle)(it)};S.detectAllUndirectedCycleAsync=T;var w=function(it,J,rt,mt){return(0,x.default)(z.ALGORITHM.dijkstra).apply(void 0,[it,J,rt,mt])};S.dijkstraAsync=w;var C=function(it,J,rt,mt){return(0,x.default)(z.ALGORITHM.findAllPath).apply(void 0,[it,J,rt,mt])};S.findAllPathAsync=C;var O=function(it,J,rt,mt,pt){return(0,x.default)(z.ALGORITHM.findShortestPath).apply(void 0,[it,J,rt,mt,pt])};S.findShortestPathAsync=O;var b=function(it,J){return(0,x.default)(z.ALGORITHM.floydWarshall).apply(void 0,[it,J])};S.floydWarshallAsync=b;var l=function(it,J,rt,mt){return mt===void 0&&(mt=1e3),(0,x.default)(z.ALGORITHM.labelPropagation)(it,J,rt,mt)};S.labelPropagationAsync=l;var K=function(it,J,rt,mt){return(0,x.default)(z.ALGORITHM.louvain)(it,J,rt,mt)};S.louvainAsync=K;var Z=function(it,J,rt){return(0,x.default)(z.ALGORITHM.minimumSpanningTree).apply(void 0,[it,J,rt])};S.minimumSpanningTreeAsync=Z;var X=function(it,J,rt){return(0,x.default)(z.ALGORITHM.pageRank).apply(void 0,[it,J,rt])};S.pageRankAsync=X;var W=function(it,J,rt){return(0,x.default)(z.ALGORITHM.getNeighbors).apply(void 0,[it,J,rt])};S.getNeighborsAsync=W;var U=function(it,J,rt,mt,pt,ft,Mt){return rt===void 0&&(rt=!1),ft===void 0&&(ft="cluster"),Mt===void 0&&(Mt="cluster"),(0,x.default)(z.ALGORITHM.GADDI).apply(void 0,[it,J,rt,mt,pt,ft,Mt])};S.GADDIAsync=U},17924:function(le,S,M){"use strict";function x(y){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},x(y)}Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var z=N(M(33013)),k=M(52415);function E(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,p=new WeakMap;return(E=function(T){return T?p:v})(y)}function N(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||x(y)!=="object"&&typeof y!="function")return{default:y};var p=E(v);if(p&&p.has(y))return p.get(y);var g={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in y)if(w!=="default"&&Object.prototype.hasOwnProperty.call(y,w)){var C=T?Object.getOwnPropertyDescriptor(y,w):null;C&&(C.get||C.set)?Object.defineProperty(g,w,C):g[w]=y[w]}return g.default=y,p&&p.set(y,g),g}var I=typeof self!="undefined"?self:{};I.onmessage=function(y){var v=y.data,p=v._algorithmType,g=v.data;if(p){if(typeof z[p]=="function"){var T=z[p].apply(z,g);I.postMessage({_algorithmType:k.MESSAGE.SUCCESS,data:T});return}I.postMessage({_algorithmType:k.MESSAGE.FAILURE})}};var m=null;S.default=m},72470:function(){},70434:function(){},85337:function(){},10758:function(){},1036:function(){},87117:function(){},42622:function(){},43295:function(){},7193:function(){},31974:function(){},69069:function(){},18859:function(){},82274:function(le,S,M){"use strict";M.r(S),M.d(S,{Camera:function(){return wu},Geometry:function(){return Fs},Kernel:function(){return la},Material:function(){return cu},Renderable:function(){return Qo},World:function(){return rv}});function x(_,nt,R,Y){R&&Object.defineProperty(_,nt,{enumerable:R.enumerable,configurable:R.configurable,writable:R.writable,value:R.initializer?R.initializer.call(Y):void 0})}var z=M(20319),k=M(88024);function E(_,nt,R,Y,Q){var Et={};return Object.keys(Y).forEach(function(Gt){Et[Gt]=Y[Gt]}),Et.enumerable=!!Et.enumerable,Et.configurable=!!Et.configurable,("value"in Et||Et.initializer)&&(Et.writable=!0),Et=R.slice().reverse().reduce(function(Gt,ee){return ee(_,nt,Gt)||Gt},Et),Q&&Et.initializer!==void 0&&(Et.value=Et.initializer?Et.initializer.call(Q):void 0,Et.initializer=void 0),Et.initializer===void 0&&(Object.defineProperty(_,nt,Et),Et=null),Et}var N=M(91010),I=M(366),m=M.n(I),y=M(10270),v=-1,p=1;function g(){return p++}var T=function _(nt){(0,z.Z)(this,_)},w=function(){function _(nt){(0,z.Z)(this,_),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=nt}return(0,k.Z)(_,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(R){return this.lookup[R]>-1}},{key:"create",value:function(R,Y){this.lookup[R]=this.components.length;var Q=new this.clazz(Y||{});return this.components.push(Q),this.entities.push(R),Q}},{key:"remove",value:function(R){var Y=this.lookup[R];Y>-1&&Y<this.components.length-1&&(this.components[Y]=this.components[this.components.length-1],this.entities[Y]=this.entities[this.entities.length-1],this.lookup[this.entities[Y]]=Y),this.components.pop(),this.entities.pop(),delete this.lookup[R]}},{key:"removeKeepSorted",value:function(R){var Y=this.lookup[R];if(Y>-1){var Q=this.entities[Y];if(Y<this.components.length-1){for(var Et=Y+1;Et<this.components.length;++Et)this.components[Et-1]=this.components[Et];for(var Gt=Y+1;Gt<this.entities.length;++Gt)this.entities[Gt-1]=this.entities[Gt],this.lookup[this.entities[Gt-1]]=Gt-1}this.components.pop(),this.entities.pop(),delete this.lookup[Q]}}},{key:"moveItem",value:function(R,Y){if(R!==Y){for(var Q=this.components[R],Et=this.entities[R],Gt=R<Y?1:-1,ee=R;ee!==Y;ee+=Gt){var ve=ee+Gt;this.components[ee]=this.components[ve],this.entities[ee]=this.entities[ve],this.lookup[this.entities[ee]]=ee}this.components[Y]=Q,this.entities[Y]=Et,this.lookup[Et]=Y}}},{key:"getEntity",value:function(R){return this.entities[R]}},{key:"getComponent",value:function(R){return this.components[R]}},{key:"getComponentByEntity",value:function(R){var Y=this.lookup[R];return Y>-1?this.components[Y]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(R){for(var Y=0,Q=Object.keys(this.lookup);Y<Q.length;Y++){var Et=Q[Y],Gt=Number(Et);if(this.lookup[Gt]===R)return Gt}return v}},{key:"find",value:function(R){for(var Y=0;Y<this.getCount();Y++){var Q=this.getComponent(Y);if(R(Q,Y))return Q}return null}},{key:"findIndex",value:function(R){for(var Y=0;Y<this.getCount();Y++){var Q=this.getComponent(Y);if(R(Q,Y))return Y}return-1}},{key:"forEach",value:function(R){for(var Y=0,Q=Object.keys(this.lookup);Y<Q.length;Y++){var Et=Q[Y],Gt=Number(Et),ee=this.lookup[Gt];R(Gt,this.getComponent(ee))}}},{key:"forEachAsync",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){var Et,Gt,ee,ve,Ie;return m().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:Et=0,Gt=Object.keys(this.lookup);case 1:if(!(Et<Gt.length)){pr.next=10;break}return ee=Gt[Et],ve=Number(ee),Ie=this.lookup[ve],pr.next=7,Q(ve,this.getComponent(Ie));case 7:Et++,pr.next=1;break;case 10:case"end":return pr.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"map",value:function(R){for(var Y=[],Q=0,Et=Object.keys(this.lookup);Q<Et.length;Q++){var Gt=Et[Q],ee=Number(Gt),ve=this.lookup[ee];Y.push(R(ee,this.getComponent(ve)))}return Y}}]),_}(),C=M(39455),O=M(45540),b={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},l=function _(){(0,z.Z)(this,_),this.index=void 0},K=function _(){(0,z.Z)(this,_),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Z=function(){function _(){(0,z.Z)(this,_),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,k.Z)(_,[{key:"read",value:function(R){return this.reads.find(function(Y){return Y.index===R.index})||this.reads.push(R),R}},{key:"sample",value:function(R){return this.read(R),R}},{key:"write",value:function(R,Y){var Q=this.writes.find(function(ve){return ve.index===Y.index});if(Q)return Y;var Et=R.getResourceNode(Y);Et.resource.version++,Et.resource.imported&&(this.hasSideEffect=!0);var Gt=R.createResourceNode(Et.resource),ee=R.getResourceNode(Gt);return ee.writer=this,this.writes.push(Gt),Gt}}]),_}(),X=M(40883),W=M(28830),U=M(9809),et=function _(){(0,z.Z)(this,_),this.first=void 0,this.last=void 0};function it(_){var nt=J();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var rt=function(_){(0,X.Z)(R,_);var nt=it(R);function R(){var Y;(0,z.Z)(this,R);for(var Q=arguments.length,Et=new Array(Q),Gt=0;Gt<Q;Gt++)Et[Gt]=arguments[Gt];return Y=nt.call.apply(nt,[this].concat(Et)),Y.version=0,Y.refs=0,Y.name=void 0,Y.imported=void 0,Y.priority=void 0,Y.discardStart=!0,Y.discardEnd=!1,Y.descriptor=void 0,Y.resource=void 0,Y}return(0,k.Z)(R,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),R}(et),mt=function _(){(0,z.Z)(this,_),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},pt,ft,Mt,zt,Vt,kt;function st(_,nt){var R;if(typeof Symbol=="undefined"||_[Symbol.iterator]==null){if(Array.isArray(_)||(R=St(_))||nt&&_&&typeof _.length=="number"){R&&(_=R);var Y=0,Q=function(){};return{s:Q,n:function(){return Y>=_.length?{done:!0}:{done:!1,value:_[Y++]}},e:function(Ie){throw Ie},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=_[Symbol.iterator]()},n:function(){var Ie=R.next();return Et=Ie.done,Ie},e:function(Ie){Gt=!0,ee=Ie},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function St(_,nt){if(_){if(typeof _=="string")return qt(_,nt);var R=Object.prototype.toString.call(_).slice(8,-1);if(R==="Object"&&_.constructor&&(R=_.constructor.name),R==="Map"||R==="Set")return Array.from(_);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return qt(_,nt)}}function qt(_,nt){(nt==null||nt>_.length)&&(nt=_.length);for(var R=0,Y=new Array(nt);R<nt;R++)Y[R]=_[R];return Y}var re=(pt=(0,O.b2)(),ft=(0,O.f3)(b.RenderEngine),pt(Mt=(zt=(kt=function(){function _(){(0,z.Z)(this,_),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],x(this,"engine",Vt,this)}return(0,k.Z)(_,[{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return this.compile(),Gt.next=3,this.executePassNodes(Q);case 3:case"end":return Gt.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(R){R.tearDown&&R.tearDown()}),this.reset()}},{key:"addPass",value:function(R,Y,Q,Et){var Gt=new K;Gt.execute=Q,Et&&(Gt.tearDown=Et),Gt.name=R;var ee=new Z;return ee.name=R,this.passNodes.push(ee),this.frameGraphPasses.push(Gt),Y(this,ee,Gt),Gt}},{key:"getPass",value:function(R){return this.frameGraphPasses.find(function(Y){return Y.name===R})}},{key:"compile",value:function(){var R=this,Y=st(this.passNodes),Q;try{for(Y.s();!(Q=Y.n()).done;){var Et=Q.value;Et.refCount=Et.writes.length+(Et.hasSideEffect?1:0),Et.reads.forEach(function(Ji){R.resourceNodes[Ji.index].readerCount++})}}catch(Ji){Y.e(Ji)}finally{Y.f()}var Gt=[],ee=st(this.resourceNodes),ve;try{for(ee.s();!(ve=ee.n()).done;){var Ie=ve.value;Ie.readerCount===0&&Gt.push(Ie)}}catch(Ji){ee.e(Ji)}finally{ee.f()}for(;Gt.length;){var We=Gt.pop(),pr=We&&We.writer;if(pr&&--pr.refCount===0){var Tr=st(pr.reads),Br;try{for(Tr.s();!(Br=Tr.n()).done;){var Ir=Br.value,Dr=this.resourceNodes[Ir.index];--Dr.readerCount===0&&Gt.push(Dr)}}catch(Ji){Tr.e(Ji)}finally{Tr.f()}}}this.resourceNodes.forEach(function(Ji){Ji.resource.refs+=Ji.readerCount});var en=st(this.passNodes),Sn;try{for(en.s();!(Sn=en.n()).done;){var Dn=Sn.value;if(Dn.refCount){var gn=st(Dn.reads),ei;try{for(gn.s();!(ei=gn.n()).done;){var In=ei.value,xi=this.resourceNodes[In.index].resource;xi.first=xi.first?xi.first:Dn,xi.last=Dn}}catch(Ji){gn.e(Ji)}finally{gn.f()}var ai=st(Dn.writes),oi;try{for(ai.s();!(oi=ai.n()).done;){var va=oi.value,Yi=this.resourceNodes[va.index].resource;Yi.first=Yi.first?Yi.first:Dn,Yi.last=Dn}}catch(Ji){ai.e(Ji)}finally{ai.f()}}}}catch(Ji){en.e(Ji)}finally{en.f()}for(var Ia=0;Ia<2;Ia++){var ra=st(this.resourceNodes),Pa;try{for(ra.s();!(Pa=ra.n()).done;){var Jr=Pa.value,Ys=Jr.resource;if(Ys.priority===Ia&&Ys.refs){var tc=Ys.first,Bc=Ys.last;tc&&Bc&&(tc.devirtualize.push(Ys),Bc.destroy.push(Ys))}}}catch(Ji){ra.e(Ji)}finally{ra.f()}}}},{key:"executePassNodes",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){var Et,Gt,ee,ve,Ie,We,pr,Tr,Br,Ir,Dr,en,Sn,Dn,gn,ei,In;return m().wrap(function(ai){for(;;)switch(ai.prev=ai.next){case 0:Et=st(this.passNodes.entries()),ai.prev=1,Et.s();case 3:if((Gt=Et.n()).done){ai.next=18;break}if(ee=(0,C.Z)(Gt.value,2),ve=ee[0],Ie=ee[1],!Ie.refCount){ai.next=16;break}We=st(Ie.devirtualize);try{for(We.s();!(pr=We.n()).done;)Tr=pr.value,Tr.preExecuteDevirtualize(this.engine)}catch(oi){We.e(oi)}finally{We.f()}Br=st(Ie.destroy);try{for(Br.s();!(Ir=Br.n()).done;)Dr=Ir.value,Dr.preExecuteDestroy(this.engine)}catch(oi){Br.e(oi)}finally{Br.f()}return ai.next=12,this.frameGraphPasses[ve].execute(this,this.frameGraphPasses[ve],Q);case 12:en=st(Ie.devirtualize);try{for(en.s();!(Sn=en.n()).done;)Dn=Sn.value,Dn.postExecuteDevirtualize(this.engine)}catch(oi){en.e(oi)}finally{en.f()}gn=st(Ie.destroy);try{for(gn.s();!(ei=gn.n()).done;)In=ei.value,In.postExecuteDestroy(this.engine)}catch(oi){gn.e(oi)}finally{gn.f()}case 16:ai.next=3;break;case 18:ai.next=23;break;case 20:ai.prev=20,ai.t0=ai.catch(1),Et.e(ai.t0);case 23:return ai.prev=23,Et.f(),ai.finish(23);case 26:this.reset();case 27:case"end":return ai.stop()}},Y,this,[[1,20,23,26]])}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(R){return this.resourceNodes[R.index]}},{key:"createResourceNode",value:function(R){var Y=new mt;Y.resource=R,Y.version=R.version,this.resourceNodes.push(Y);var Q=new l;return Q.index=this.resourceNodes.length-1,Q}},{key:"createTexture",value:function(R,Y,Q){var Et=new rt;return Et.name=Y,Et.descriptor=Q,this.createResourceNode(Et)}},{key:"createRenderTarget",value:function(R,Y,Q){var Et=new rt;return Et.name=Y,Et.descriptor=Q,this.createResourceNode(Et)}},{key:"present",value:function(R){this.addPass("Present",function(Y,Q){Q.read(R),Q.hasSideEffect=!0},(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:case"end":return Et.stop()}},Y)})))}}]),_}(),kt),Vt=E(zt.prototype,"engine",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt))||Mt),Nt=M(41470),be=M(95353),Te=M(59196),nr=M(65316),Rt=M(91606),Dt=M(24622),At=9007199254740991,Xt="[object Arguments]",$t="[object Array]",Tt="[object Boolean]",Kt="[object Date]",Ee="[object Error]",vt="[object Function]",bt="[object Map]",wt="[object Number]",D="[object Object]",tt="[object RegExp]",Ot="[object Set]",ct="[object String]",ie="[object WeakMap]",pe="[object ArrayBuffer]",Ge="[object DataView]",Re="[object Float32Array]",Je="[object Float64Array]",Ve="[object Int8Array]",ce="[object Int16Array]",Le="[object Int32Array]",je="[object Uint8Array]",Be="[object Uint8ClampedArray]",vr="[object Uint16Array]",or="[object Uint32Array]",Ae={};Ae[Re]=Ae[Je]=Ae[Ve]=Ae[ce]=Ae[Le]=Ae[je]=Ae[Be]=Ae[vr]=Ae[or]=!0,Ae[Xt]=Ae[$t]=Ae[pe]=Ae[Tt]=Ae[Ge]=Ae[Kt]=Ae[Ee]=Ae[vt]=Ae[bt]=Ae[wt]=Ae[D]=Ae[tt]=Ae[Ot]=Ae[ct]=Ae[ie]=!1;function yr(_){return function(nt){return _(nt)}}var Cr=Object.prototype,zr=Cr.toString;function Mr(_){return hn(_)&&un(_.length)&&!!Ae[zr.call(_)]}function un(_){return typeof _=="number"&&_>-1&&_%1===0&&_<=At}function hn(_){return!!_&&(0,Dt.Z)(_)==="object"}var Un=Mr;function nn(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function vn(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?nn(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):nn(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}function ln(_){var nt=pn();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function pn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Bn=function(_){(0,X.Z)(R,_);var nt=ln(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.dirty=!0,Q.attributes=[],Q.indices=void 0,Q.indicesBuffer=void 0,Q.vertexCount=0,Q.maxInstancedCount=void 0,Q.aabb=void 0,Q.entity=void 0,Object.assign((0,be.Z)(Q),Y),Q}return(0,k.Z)(R,[{key:"setAttribute",value:function(Q,Et,Gt,ee){var ve=this.attributes.find(function(Ie){return Ie.name===Q});return ve?(ve.data=Et,ve.dirty=!0):this.attributes.push(vn(vn({dirty:!0,name:Q,data:Et},Gt),{},{bufferGetter:ee})),this.dirty=!0,this}},{key:"setIndex",value:function(Q){return this.indices=new Uint32Array(Q.buffer?Q.buffer:Q),this.dirty=!0,this}},{key:"applyMatrix",value:function(Q){var Et=this.attributes.find(function(Tr){var Br=Tr.name;return Br==="position"}),Gt=this.attributes.find(function(Tr){var Br=Tr.name;return Br==="normal"});if(Et&&(Et.dirty=!0,Et.data&&Et.data.length))for(var ee=0;ee<Et.data.length;ee+=3){var ve=Te.fromValues(Et.data[ee],Et.data[ee+1],Et.data[ee+2],1);Te.transformMat4(ve,ve,Q),Un(Et.data)?Et.data.set([ve[0],ve[1],ve[2]],ee):(Et.data[ee]=ve[0],Et.data[ee+1]=ve[1],Et.data[ee+2]=ve[2])}if(Gt){var Ie=nr.normalFromMat4(nr.create(),Q);if(Gt.data&&Gt.data.length)for(var We=0;We<Gt.data.length;We+=3){var pr=Rt.fromValues(Gt.data[We],Gt.data[We+1],Gt.data[We+2]);Rt.transformMat3(pr,pr,Ie),Rt.normalize(pr,pr),Un(Gt.data)?Gt.data.set([pr[0],pr[1],pr[2]],We):(Gt.data[We]=pr[0],Gt.data[We+1]=pr[1],Gt.data[We+2]=pr[2])}}}}]),R}(T),Oe;(function(_){_[_.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",_[_.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",_[_.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",_[_.POINTS=0]="POINTS",_[_.LINES=1]="LINES",_[_.LINE_LOOP=2]="LINE_LOOP",_[_.LINE_STRIP=3]="LINE_STRIP",_[_.TRIANGLES=4]="TRIANGLES",_[_.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_[_.TRIANGLE_FAN=6]="TRIANGLE_FAN",_[_.ZERO=0]="ZERO",_[_.ONE=1]="ONE",_[_.SRC_COLOR=768]="SRC_COLOR",_[_.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",_[_.SRC_ALPHA=770]="SRC_ALPHA",_[_.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",_[_.DST_ALPHA=772]="DST_ALPHA",_[_.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",_[_.DST_COLOR=774]="DST_COLOR",_[_.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",_[_.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",_[_.FUNC_ADD=32774]="FUNC_ADD",_[_.BLEND_EQUATION=32777]="BLEND_EQUATION",_[_.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",_[_.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",_[_.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",_[_.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",_[_.MAX_EXT=32776]="MAX_EXT",_[_.MIN_EXT=32775]="MIN_EXT",_[_.BLEND_DST_RGB=32968]="BLEND_DST_RGB",_[_.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",_[_.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",_[_.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",_[_.CONSTANT_COLOR=32769]="CONSTANT_COLOR",_[_.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",_[_.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",_[_.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",_[_.BLEND_COLOR=32773]="BLEND_COLOR",_[_.ARRAY_BUFFER=34962]="ARRAY_BUFFER",_[_.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",_[_.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",_[_.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",_[_.STREAM_DRAW=35040]="STREAM_DRAW",_[_.STATIC_DRAW=35044]="STATIC_DRAW",_[_.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",_[_.BUFFER_SIZE=34660]="BUFFER_SIZE",_[_.BUFFER_USAGE=34661]="BUFFER_USAGE",_[_.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",_[_.FRONT=1028]="FRONT",_[_.BACK=1029]="BACK",_[_.FRONT_AND_BACK=1032]="FRONT_AND_BACK",_[_.CULL_FACE=2884]="CULL_FACE",_[_.BLEND=3042]="BLEND",_[_.DITHER=3024]="DITHER",_[_.STENCIL_TEST=2960]="STENCIL_TEST",_[_.DEPTH_TEST=2929]="DEPTH_TEST",_[_.SCISSOR_TEST=3089]="SCISSOR_TEST",_[_.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",_[_.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",_[_.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",_[_.NO_ERROR=0]="NO_ERROR",_[_.INVALID_ENUM=1280]="INVALID_ENUM",_[_.INVALID_VALUE=1281]="INVALID_VALUE",_[_.INVALID_OPERATION=1282]="INVALID_OPERATION",_[_.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",_[_.CW=2304]="CW",_[_.CCW=2305]="CCW",_[_.LINE_WIDTH=2849]="LINE_WIDTH",_[_.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",_[_.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",_[_.CULL_FACE_MODE=2885]="CULL_FACE_MODE",_[_.FRONT_FACE=2886]="FRONT_FACE",_[_.DEPTH_RANGE=2928]="DEPTH_RANGE",_[_.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",_[_.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",_[_.DEPTH_FUNC=2932]="DEPTH_FUNC",_[_.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",_[_.STENCIL_FUNC=2962]="STENCIL_FUNC",_[_.STENCIL_FAIL=2964]="STENCIL_FAIL",_[_.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",_[_.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",_[_.STENCIL_REF=2967]="STENCIL_REF",_[_.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",_[_.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",_[_.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",_[_.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",_[_.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",_[_.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",_[_.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",_[_.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",_[_.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",_[_.VIEWPORT=2978]="VIEWPORT",_[_.SCISSOR_BOX=3088]="SCISSOR_BOX",_[_.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",_[_.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",_[_.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",_[_.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",_[_.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",_[_.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",_[_.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",_[_.RED_BITS=3410]="RED_BITS",_[_.GREEN_BITS=3411]="GREEN_BITS",_[_.BLUE_BITS=3412]="BLUE_BITS",_[_.ALPHA_BITS=3413]="ALPHA_BITS",_[_.DEPTH_BITS=3414]="DEPTH_BITS",_[_.STENCIL_BITS=3415]="STENCIL_BITS",_[_.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",_[_.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",_[_.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",_[_.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",_[_.SAMPLES=32937]="SAMPLES",_[_.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",_[_.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",_[_.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",_[_.DONT_CARE=4352]="DONT_CARE",_[_.FASTEST=4353]="FASTEST",_[_.NICEST=4354]="NICEST",_[_.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",_[_.BYTE=5120]="BYTE",_[_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_[_.SHORT=5122]="SHORT",_[_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_[_.INT=5124]="INT",_[_.UNSIGNED_INT=5125]="UNSIGNED_INT",_[_.FLOAT=5126]="FLOAT",_[_.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_[_.ALPHA=6406]="ALPHA",_[_.RGB=6407]="RGB",_[_.RGBA=6408]="RGBA",_[_.LUMINANCE=6409]="LUMINANCE",_[_.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_[_.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_[_.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_[_.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_[_.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",_[_.VERTEX_SHADER=35633]="VERTEX_SHADER",_[_.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",_[_.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",_[_.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",_[_.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",_[_.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",_[_.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",_[_.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",_[_.SHADER_TYPE=35663]="SHADER_TYPE",_[_.DELETE_STATUS=35712]="DELETE_STATUS",_[_.LINK_STATUS=35714]="LINK_STATUS",_[_.VALIDATE_STATUS=35715]="VALIDATE_STATUS",_[_.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",_[_.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",_[_.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",_[_.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",_[_.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",_[_.NEVER=512]="NEVER",_[_.LESS=513]="LESS",_[_.EQUAL=514]="EQUAL",_[_.LEQUAL=515]="LEQUAL",_[_.GREATER=516]="GREATER",_[_.NOTEQUAL=517]="NOTEQUAL",_[_.GEQUAL=518]="GEQUAL",_[_.ALWAYS=519]="ALWAYS",_[_.KEEP=7680]="KEEP",_[_.REPLACE=7681]="REPLACE",_[_.INCR=7682]="INCR",_[_.DECR=7683]="DECR",_[_.INVERT=5386]="INVERT",_[_.INCR_WRAP=34055]="INCR_WRAP",_[_.DECR_WRAP=34056]="DECR_WRAP",_[_.VENDOR=7936]="VENDOR",_[_.RENDERER=7937]="RENDERER",_[_.VERSION=7938]="VERSION",_[_.NEAREST=9728]="NEAREST",_[_.LINEAR=9729]="LINEAR",_[_.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",_[_.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",_[_.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",_[_.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",_[_.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",_[_.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",_[_.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",_[_.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",_[_.TEXTURE_2D=3553]="TEXTURE_2D",_[_.TEXTURE=5890]="TEXTURE",_[_.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_[_.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",_[_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_[_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_[_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_[_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",_[_.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",_[_.TEXTURE0=33984]="TEXTURE0",_[_.TEXTURE1=33985]="TEXTURE1",_[_.TEXTURE2=33986]="TEXTURE2",_[_.TEXTURE3=33987]="TEXTURE3",_[_.TEXTURE4=33988]="TEXTURE4",_[_.TEXTURE5=33989]="TEXTURE5",_[_.TEXTURE6=33990]="TEXTURE6",_[_.TEXTURE7=33991]="TEXTURE7",_[_.TEXTURE8=33992]="TEXTURE8",_[_.TEXTURE9=33993]="TEXTURE9",_[_.TEXTURE10=33994]="TEXTURE10",_[_.TEXTURE11=33995]="TEXTURE11",_[_.TEXTURE12=33996]="TEXTURE12",_[_.TEXTURE13=33997]="TEXTURE13",_[_.TEXTURE14=33998]="TEXTURE14",_[_.TEXTURE15=33999]="TEXTURE15",_[_.TEXTURE16=34e3]="TEXTURE16",_[_.TEXTURE17=34001]="TEXTURE17",_[_.TEXTURE18=34002]="TEXTURE18",_[_.TEXTURE19=34003]="TEXTURE19",_[_.TEXTURE20=34004]="TEXTURE20",_[_.TEXTURE21=34005]="TEXTURE21",_[_.TEXTURE22=34006]="TEXTURE22",_[_.TEXTURE23=34007]="TEXTURE23",_[_.TEXTURE24=34008]="TEXTURE24",_[_.TEXTURE25=34009]="TEXTURE25",_[_.TEXTURE26=34010]="TEXTURE26",_[_.TEXTURE27=34011]="TEXTURE27",_[_.TEXTURE28=34012]="TEXTURE28",_[_.TEXTURE29=34013]="TEXTURE29",_[_.TEXTURE30=34014]="TEXTURE30",_[_.TEXTURE31=34015]="TEXTURE31",_[_.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",_[_.REPEAT=10497]="REPEAT",_[_.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",_[_.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",_[_.FLOAT_VEC2=35664]="FLOAT_VEC2",_[_.FLOAT_VEC3=35665]="FLOAT_VEC3",_[_.FLOAT_VEC4=35666]="FLOAT_VEC4",_[_.INT_VEC2=35667]="INT_VEC2",_[_.INT_VEC3=35668]="INT_VEC3",_[_.INT_VEC4=35669]="INT_VEC4",_[_.BOOL=35670]="BOOL",_[_.BOOL_VEC2=35671]="BOOL_VEC2",_[_.BOOL_VEC3=35672]="BOOL_VEC3",_[_.BOOL_VEC4=35673]="BOOL_VEC4",_[_.FLOAT_MAT2=35674]="FLOAT_MAT2",_[_.FLOAT_MAT3=35675]="FLOAT_MAT3",_[_.FLOAT_MAT4=35676]="FLOAT_MAT4",_[_.SAMPLER_2D=35678]="SAMPLER_2D",_[_.SAMPLER_CUBE=35680]="SAMPLER_CUBE",_[_.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",_[_.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",_[_.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",_[_.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",_[_.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",_[_.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",_[_.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",_[_.COMPILE_STATUS=35713]="COMPILE_STATUS",_[_.LOW_FLOAT=36336]="LOW_FLOAT",_[_.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",_[_.HIGH_FLOAT=36338]="HIGH_FLOAT",_[_.LOW_INT=36339]="LOW_INT",_[_.MEDIUM_INT=36340]="MEDIUM_INT",_[_.HIGH_INT=36341]="HIGH_INT",_[_.FRAMEBUFFER=36160]="FRAMEBUFFER",_[_.RENDERBUFFER=36161]="RENDERBUFFER",_[_.RGBA4=32854]="RGBA4",_[_.RGB5_A1=32855]="RGB5_A1",_[_.RGB565=36194]="RGB565",_[_.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",_[_.STENCIL_INDEX=6401]="STENCIL_INDEX",_[_.STENCIL_INDEX8=36168]="STENCIL_INDEX8",_[_.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_[_.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",_[_.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",_[_.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",_[_.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",_[_.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",_[_.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",_[_.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",_[_.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",_[_.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",_[_.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",_[_.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",_[_.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",_[_.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",_[_.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",_[_.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",_[_.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",_[_.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",_[_.NONE=0]="NONE",_[_.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",_[_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",_[_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",_[_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",_[_.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",_[_.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",_[_.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",_[_.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",_[_.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",_[_.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",_[_.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",_[_.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",_[_.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",_[_.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",_[_.COPY_SRC=1]="COPY_SRC",_[_.COPY_DST=2]="COPY_DST",_[_.SAMPLED=4]="SAMPLED",_[_.STORAGE=8]="STORAGE",_[_.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Oe||(Oe={}));var Cn,Gn,bi,zn,Hn,hi,_i,pi,Pt=(Cn=(0,O.b2)(),Gn=(0,O.f3)(b.GeometryComponentManager),bi=(0,O.f3)(b.RenderEngine),Cn(zn=(Hn=(pi=function(){function _(){(0,z.Z)(this,_),x(this,"geometry",hi,this),x(this,"engine",_i,this)}return(0,k.Z)(_,[{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q=this;return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:this.geometry.forEach(function(ee,ve){ve.dirty&&(ve.attributes.forEach(function(Ie){if(Ie.dirty&&Ie.data){if(!Ie.buffer)Ie.buffer=Q.engine.createBuffer({data:Ie.data,type:Oe.FLOAT});else{var We;(We=Ie.buffer)===null||We===void 0||We.subData({data:Ie.data,offset:0})}Ie.dirty=!1}}),ve.indices&&(ve.indicesBuffer?ve.indicesBuffer.subData({data:ve.indices,offset:0}):ve.indicesBuffer=Q.engine.createElements({data:ve.indices,count:ve.indices.length,type:Oe.UNSIGNED_INT,usage:Oe.STATIC_DRAW})),ve.dirty=!1)});case 1:case"end":return Gt.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.geometry.forEach(function(R,Y){Y.indicesBuffer&&Y.indicesBuffer.destroy(),Y.attributes.forEach(function(Q){Q.buffer&&Q.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},Y=R.vertexCount,Q=g();return this.geometry.create(Q,{vertexCount:Y})}},{key:"createInstancedBufferGeometry",value:function(R){var Y=R.maxInstancedCount,Q=R.vertexCount,Et=g();return this.geometry.create(Et,{maxInstancedCount:Y,vertexCount:Q})}}]),_}(),pi),hi=E(Hn.prototype,"geometry",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i=E(Hn.prototype,"engine",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn))||zn);function Lt(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function H(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Lt(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Lt(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}function G(_){var nt=F();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var ot=function(_){(0,X.Z)(R,_);var nt=G(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.vertexShaderGLSL=void 0,Q.fragmentShaderGLSL=void 0,Q.defines={},Q.dirty=!0,Q.uniforms=[],Q.cull={enable:!0,face:Oe.BACK},Q.depth={enable:!0},Q.blend=void 0,Q.entity=void 0,Q.type=void 0,Object.assign((0,be.Z)(Q),Y),Q}return(0,k.Z)(R,[{key:"setDefines",value:function(Q){return this.defines=H(H({},this.defines),Q),this}},{key:"setCull",value:function(Q){return this.cull=Q,this}},{key:"setDepth",value:function(Q){return this.depth=Q,this}},{key:"setBlend",value:function(Q){return this.blend=Q,this}},{key:"setUniform",value:function(Q,Et){var Gt=this;if(typeof Q!="string")return Object.keys(Q).forEach(function(ve){return Gt.setUniform(ve,Q[ve])}),this;var ee=this.uniforms.find(function(ve){return ve.name===Q});return ee?(ee.dirty=!0,ee.data=Et):this.uniforms.push({name:Q,dirty:!0,data:Et}),this.dirty=!0,this}}]),R}(T),Bt,Ht,Yt,he,at,yt,te,Me,_e,tr;function sr(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function ge(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?sr(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):sr(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var Fe=(Bt=(0,O.b2)(),Ht=(0,O.f3)(b.MaterialComponentManager),Yt=(0,O.f3)(b.RenderEngine),he=(0,O.f3)(b.ShaderModuleService),Bt(at=(yt=(tr=function(){function _(){(0,z.Z)(this,_),x(this,"material",te,this),x(this,"engine",Me,this),x(this,"shaderModule",_e,this)}return(0,k.Z)(_,[{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:case"end":return Et.stop()}},Y)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(R){var Y=g(),Q=R.vertexShader,Et=R.fragmentShader,Gt=[];if(!this.engine.supportWebGPU){var ee="material-".concat(Y);this.shaderModule.registerModule(ee,{vs:R.vertexShader,fs:R.fragmentShader});var ve=this.shaderModule.getModule(ee);Q=ve.vs,Et=ve.fs,ve.uniforms&&(Gt=Object.keys(ve.uniforms).map(function(Ie){return{dirty:!0,name:Ie,data:ve.uniforms[Ie]}}))}return this.material.create(Y,ge(ge({vertexShaderGLSL:Q,fragmentShaderGLSL:Et},R),{},{uniforms:Gt}))}}]),_}(),tr),te=E(yt.prototype,"material",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=E(yt.prototype,"engine",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=E(yt.prototype,"shaderModule",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt))||at);function qe(_){var nt=_r();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function _r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Er;(function(_){_[_.Standard=0]="Standard"})(Er||(Er={}));var ye=function(_){(0,X.Z)(R,_);var nt=qe(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.strategy=Er.Standard,Q.visibilityPlaneMask=0,Q.visible=!1,Object.assign((0,be.Z)(Q),Y),Q}return R}(T),Ft=function(){function _(nt,R){(0,z.Z)(this,_),this.center=void 0,this.halfExtents=void 0,this.min=Rt.create(),this.max=Rt.create(),this.update(nt,R)}return(0,k.Z)(_,[{key:"update",value:function(R,Y){this.center=R||Rt.create(),this.halfExtents=Y||Rt.fromValues(.5,.5,.5),this.min=Rt.sub(this.min,this.center,this.halfExtents),this.max=Rt.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(R,Y){Rt.add(this.center,Y,R),Rt.scale(this.center,this.center,.5),Rt.sub(this.halfExtents,Y,R),Rt.scale(this.halfExtents,this.halfExtents,.5),Rt.copy(this.min,R),Rt.copy(this.max,Y)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(R){var Y=this.center,Q=Y[0],Et=Y[1],Gt=Y[2],ee=this.halfExtents,ve=ee[0],Ie=ee[1],We=ee[2],pr=Q-ve,Tr=Q+ve,Br=Et-Ie,Ir=Et+Ie,Dr=Gt-We,en=Gt+We,Sn=R.center,Dn=Sn[0],gn=Sn[1],ei=Sn[2],In=R.halfExtents,xi=In[0],ai=In[1],oi=In[2],va=Dn-xi,Yi=Dn+xi,Ia=gn-ai,ra=gn+ai,Pa=ei-oi,Jr=ei+oi;va<pr&&(pr=va),Yi>Tr&&(Tr=Yi),Ia<Br&&(Br=Ia),ra>Ir&&(Ir=ra),Pa<Dr&&(Dr=Pa),Jr>en&&(en=Jr),Y[0]=(pr+Tr)*.5,Y[1]=(Br+Ir)*.5,Y[2]=(Dr+en)*.5,ee[0]=(Tr-pr)*.5,ee[1]=(Ir-Br)*.5,ee[2]=(en-Dr)*.5,this.min[0]=pr,this.min[1]=Br,this.min[2]=Dr,this.max[0]=Tr,this.max[1]=Ir,this.max[2]=en}},{key:"intersects",value:function(R){var Y=this.getMax(),Q=this.getMin(),Et=R.getMax(),Gt=R.getMin();return Q[0]<=Et[0]&&Y[0]>=Gt[0]&&Q[1]<=Et[1]&&Y[1]>=Gt[1]&&Q[2]<=Et[2]&&Y[2]>=Gt[2]}},{key:"containsPoint",value:function(R){var Y=this.getMin(),Q=this.getMax();return!(R[0]<Y[0]||R[0]>Q[0]||R[1]<Y[1]||R[1]>Q[1]||R[2]<Y[2]||R[2]>Q[2])}},{key:"getNegativeFarPoint",value:function(R){return R.pnVertexFlag===273?Rt.copy(Rt.create(),this.min):R.pnVertexFlag===272?Rt.fromValues(this.min[0],this.min[1],this.max[2]):R.pnVertexFlag===257?Rt.fromValues(this.min[0],this.max[1],this.min[2]):R.pnVertexFlag===256?Rt.fromValues(this.min[0],this.max[1],this.max[2]):R.pnVertexFlag===17?Rt.fromValues(this.max[0],this.min[1],this.min[2]):R.pnVertexFlag===16?Rt.fromValues(this.max[0],this.min[1],this.max[2]):R.pnVertexFlag===1?Rt.fromValues(this.max[0],this.max[1],this.min[2]):Rt.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(R){return R.pnVertexFlag===273?Rt.copy(Rt.create(),this.max):R.pnVertexFlag===272?Rt.fromValues(this.max[0],this.max[1],this.min[2]):R.pnVertexFlag===257?Rt.fromValues(this.max[0],this.min[1],this.max[2]):R.pnVertexFlag===256?Rt.fromValues(this.max[0],this.min[1],this.min[2]):R.pnVertexFlag===17?Rt.fromValues(this.min[0],this.max[1],this.max[2]):R.pnVertexFlag===16?Rt.fromValues(this.min[0],this.max[1],this.min[2]):R.pnVertexFlag===1?Rt.fromValues(this.min[0],this.min[1],this.max[2]):Rt.fromValues(this.min[0],this.min[1],this.min[2])}}]),_}();function ne(_){var nt=Pe();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Pe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Ce=function(_){(0,X.Z)(R,_);var nt=ne(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.material=void 0,Q.geometry=void 0,Q.aabb=new Ft,Q.aabbDirty=!0,Q.model=void 0,Q.visible=!0,Q.children=[],Object.assign((0,be.Z)(Q),Y),Q}return R}(T),Ue=function(){function _(nt,R){(0,z.Z)(this,_),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=nt||0,this.normal=R||Rt.fromValues(0,1,0),this.updatePNVertexFlag()}return(0,k.Z)(_,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(R){return Rt.dot(R,this.normal)-this.distance}},{key:"normalize",value:function(){var R=1/Rt.len(this.normal);Rt.scale(this.normal,this.normal,R),this.distance*=R}},{key:"intersectsLine",value:function(R,Y,Q){var Et=this.distanceToPoint(R),Gt=this.distanceToPoint(Y),ee=Et/(Et-Gt),ve=ee>=0&&ee<=1;return ve&&Q&&Rt.lerp(Q,R,Y,ee),ve}}]),_}(),Xe;(function(_){_[_.OUTSIDE=4294967295]="OUTSIDE",_[_.INSIDE=0]="INSIDE",_[_.INDETERMINATE=2147483647]="INDETERMINATE"})(Xe||(Xe={}));var Wr=function(){function _(nt){if((0,z.Z)(this,_),this.planes=[],nt)this.planes=nt;else for(var R=0;R<6;R++)this.planes.push(new Ue)}return(0,k.Z)(_,[{key:"extractFromVPMatrix",value:function(R){var Y=(0,C.Z)(R,16),Q=Y[0],Et=Y[1],Gt=Y[2],ee=Y[3],ve=Y[4],Ie=Y[5],We=Y[6],pr=Y[7],Tr=Y[8],Br=Y[9],Ir=Y[10],Dr=Y[11],en=Y[12],Sn=Y[13],Dn=Y[14],gn=Y[15];Rt.set(this.planes[0].normal,ee-Q,pr-ve,Dr-Tr),this.planes[0].distance=-(gn-en),Rt.set(this.planes[1].normal,ee+Q,pr+ve,Dr+Tr),this.planes[1].distance=-(gn+en),Rt.set(this.planes[2].normal,ee+Et,pr+Ie,Dr+Br),this.planes[2].distance=-(gn+Sn),Rt.set(this.planes[3].normal,ee-Et,pr-Ie,Dr-Br),this.planes[3].distance=-(gn-Sn),Rt.set(this.planes[4].normal,ee-Gt,pr-We,Dr-Ir),this.planes[4].distance=-(gn-Dn),Rt.set(this.planes[5].normal,ee+Gt,pr+We,Dr+Ir),this.planes[5].distance=-(gn+Dn),this.planes.forEach(function(ei){ei.normalize(),ei.updatePNVertexFlag()})}}]),_}();function $r(_){return typeof _=="number"}function mn(_){return _===void 0?0:_>360||_<-360?_%360:_}function Nn(_,nt,R){return isNumber(_)?vec3.fromValues(_,nt,R):_.length===3?vec3.clone(_):vec3.fromValues(_[0],_[1],_[2])}function kn(_,nt){return nt[0]=_[0],nt[1]=_[1],nt[2]=_[2],nt[3]=_[4],nt[4]=_[5],nt[5]=_[6],nt[6]=_[8],nt[7]=_[9],nt[8]=_[10],nt}function Jn(_){var nt=(0,C.Z)(_,3),R=nt[0],Y=nt[1],Q=nt[2],Et=R+Y*256+Q*65536-1;return Et}function ri(_){return[_+1&255,_+1>>8&255,_+1>>8>>8&255]}var Ri,di,Ki,yo,Ea,ta,mo,Na,To,vi,xa,Vo,zi,ao;function jo(_,nt){var R;if(typeof Symbol=="undefined"||_[Symbol.iterator]==null){if(Array.isArray(_)||(R=ps(_))||nt&&_&&typeof _.length=="number"){R&&(_=R);var Y=0,Q=function(){};return{s:Q,n:function(){return Y>=_.length?{done:!0}:{done:!1,value:_[Y++]}},e:function(Ie){throw Ie},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=_[Symbol.iterator]()},n:function(){var Ie=R.next();return Et=Ie.done,Ie},e:function(Ie){Gt=!0,ee=Ie},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function ps(_,nt){if(_){if(typeof _=="string")return Io(_,nt);var R=Object.prototype.toString.call(_).slice(8,-1);if(R==="Object"&&_.constructor&&(R=_.constructor.name),R==="Map"||R==="Set")return Array.from(_);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return Io(_,nt)}}function Io(_,nt){(nt==null||nt>_.length)&&(nt=_.length);for(var R=0,Y=new Array(nt);R<nt;R++)Y[R]=_[R];return Y}var Ja=(Ri=(0,O.b2)(),di=(0,O.f3)(b.MeshComponentManager),Ki=(0,O.f3)(b.CullableComponentManager),yo=(0,O.f3)(b.GeometryComponentManager),Ea=(0,O.f3)(b.HierarchyComponentManager),ta=(0,O.f3)(b.TransformComponentManager),Ri(mo=(Na=(ao=function(){function _(){(0,z.Z)(this,_),x(this,"mesh",To,this),x(this,"cullable",vi,this),x(this,"geometry",xa,this),x(this,"hierarchy",Vo,this),x(this,"transform",zi,this),this.planes=void 0}return(0,k.Z)(_,[{key:"setFrustumPlanes",value:function(R){this.planes=R}},{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){var Et,Gt,ee,ve,Ie,We,pr,Tr,Br,Ir,Dr,en,Sn,Dn,gn,ei,In,xi,ai,oi,va;return m().wrap(function(Ia){for(;;)switch(Ia.prev=Ia.next){case 0:Et=jo(Q);try{for(Et.s();!(Gt=Et.n()).done;){ee=Gt.value,ve=ee.getScene(),Ie=ee.getCamera(),We=jo(ve.getEntities());try{for(We.s();!(pr=We.n()).done;)Tr=pr.value,Br=this.mesh.getComponentByEntity(Tr),Br&&(Ir=this.hierarchy.getComponentByEntity(Tr),Dr=this.cullable.getComponentByEntity(Tr),en=Br.geometry,Sn=this.transform.getComponentByEntity(Tr),en&&en.aabb&&Sn&&Br.aabbDirty&&(Dn=Sn.worldTransform,gn=en.aabb,ei=gn.center,In=gn.halfExtents,xi=Rt.transformMat4(Rt.create(),ei,Dn),ai=kn(Dn,nr.create()),oi=Rt.transformMat3(Rt.create(),In,ai),Br.aabb.update(xi,oi),Br.aabbDirty=!1),Dr&&en&&(va=this.cullable.getComponentByEntity((Ir==null?void 0:Ir.parentID)||-1),Dr.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(Br.aabb,(va==null?void 0:va.visibilityPlaneMask)||Xe.INDETERMINATE,this.planes||Ie.getFrustum().planes),Dr.visible=Dr.visibilityPlaneMask!==Xe.OUTSIDE))}catch(ra){We.e(ra)}finally{We.f()}}}catch(ra){Et.e(ra)}finally{Et.f()}case 2:case"end":return Ia.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(R,Y,Q){if(Y===Xe.OUTSIDE||Y===Xe.INSIDE)return Y;for(var Et=Xe.INSIDE,Gt=0,ee=Q.length;Gt<ee;++Gt){var ve=Gt<31?1<<Gt:0;if(!(Gt<31&&!(Y&ve))){var Ie=Q[Gt],We=Ie.normal,pr=Ie.distance;if(Rt.dot(We,R.getNegativeFarPoint(Q[Gt]))+pr>0)return Xe.OUTSIDE;Rt.dot(We,R.getPositiveFarPoint(Q[Gt]))+pr>0&&(Et|=ve)}}return Et}}]),_}(),ao),To=E(Na.prototype,"mesh",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=E(Na.prototype,"cullable",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=E(Na.prototype,"geometry",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vo=E(Na.prototype,"hierarchy",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zi=E(Na.prototype,"transform",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na))||mo),Pn=M(96518),$s,na,oo,Xa,qo,On,bo,gs,ts,es,Wn,so,ia,Bi,rs,Po,ga,ys,Qs,ms,Eo,Ai,Ya,bs;function Ha(_,nt){var R;if(typeof Symbol=="undefined"||_[Symbol.iterator]==null){if(Array.isArray(_)||(R=Ns(_))||nt&&_&&typeof _.length=="number"){R&&(_=R);var Y=0,Q=function(){};return{s:Q,n:function(){return Y>=_.length?{done:!0}:{done:!1,value:_[Y++]}},e:function(Ie){throw Ie},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=_[Symbol.iterator]()},n:function(){var Ie=R.next();return Et=Ie.done,Ie},e:function(Ie){Gt=!0,ee=Ie},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function Ns(_,nt){if(_){if(typeof _=="string")return La(_,nt);var R=Object.prototype.toString.call(_).slice(8,-1);if(R==="Object"&&_.constructor&&(R=_.constructor.name),R==="Map"||R==="Set")return Array.from(_);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return La(_,nt)}}function La(_,nt){(nt==null||nt>_.length)&&(nt=_.length);for(var R=0,Y=new Array(nt);R<nt;R++)Y[R]=_[R];return Y}var ya=($s=(0,O.b2)(),na=(0,O.f3)(b.MeshComponentManager),oo=(0,O.f3)(b.GeometryComponentManager),Xa=(0,O.f3)(b.MaterialComponentManager),qo=(0,O.f3)(b.CullableComponentManager),On=(0,O.f3)(b.TransformComponentManager),bo=(0,O.f3)(b.HierarchyComponentManager),gs=(0,O.f3)(b.Systems),ts=(0,O.t6)(b.FrameGraphSystem),es=(0,O.f3)(b.RenderEngine),Wn=(0,O.f3)(b.ResourcePool),$s(so=(ia=(bs=Ya=function(){function _(){var nt=this;(0,z.Z)(this,_),x(this,"mesh",Bi,this),x(this,"geometry",rs,this),x(this,"material",Po,this),x(this,"cullable",ga,this),x(this,"transform",ys,this),x(this,"hierarchy",Qs,this),x(this,"frameGraphSystem",ms,this),x(this,"engine",Eo,this),x(this,"resourcePool",Ai,this),this.modelCache={},this.setup=function(R,Y,Q){var Et=R.createRenderTarget(Y,"color buffer",{width:1,height:1,usage:Oe.RENDER_ATTACHMENT|Oe.SAMPLED|Oe.COPY_SRC});Q.data={output:Y.write(R,Et)}},this.execute=function(){var R=(0,y.Z)(m().mark(function Y(Q,Et,Gt){var ee,ve,Ie,We,pr,Tr;return m().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:ee=Q.getResourceNode(Et.data.output),ve=nt.resourcePool.getOrCreateResource(ee.resource),Ie=Ha(Gt),Ir.prev=3,Ie.s();case 5:if((We=Ie.n()).done){Ir.next=11;break}return pr=We.value,Ir.next=9,nt.initView(pr);case 9:Ir.next=5;break;case 11:Ir.next=16;break;case 13:Ir.prev=13,Ir.t0=Ir.catch(3),Ie.e(Ir.t0);case 16:return Ir.prev=16,Ie.f(),Ir.finish(16);case 19:Tr=nt.engine.getCanvas(),ve.resize({width:Tr.width,height:Tr.height}),nt.engine.setScissor({enable:!1}),nt.engine.clear({framebuffer:ve,color:Gt[0].getClearColor(),depth:1}),nt.engine.useFramebuffer(ve,function(){var Dr=Ha(Gt),en;try{for(Dr.s();!(en=Dr.n()).done;){var Sn=en.value;nt.renderView(Sn)}}catch(Dn){Dr.e(Dn)}finally{Dr.f()}});case 24:case"end":return Ir.stop()}},Y,null,[[3,13,16,19]])}));return function(Y,Q,Et){return R.apply(this,arguments)}}()}return(0,k.Z)(_,[{key:"renderView",value:function(R){var Y=R.getScene(),Q=R.getCamera(),Et=Q.getViewTransform(),Gt=Pn.multiply(Pn.create(),Q.getPerspective(),Et);Q.getFrustum().extractFromVPMatrix(Gt);var ee=R.getViewport(),ve=ee.x,Ie=ee.y,We=ee.width,pr=ee.height;this.engine.viewport({x:ve,y:Ie,width:We,height:pr});var Tr=Ha(Y.getEntities()),Br;try{for(Tr.s();!(Br=Tr.n()).done;){var Ir=Br.value;this.renderMesh(Ir,{camera:Q,view:R,viewMatrix:Et})}}catch(Dr){Tr.e(Dr)}finally{Tr.f()}}},{key:"renderMesh",value:function(R,Y){var Q=Y.camera,Et=Y.view,Gt=Y.viewMatrix,ee=this.mesh.getComponentByEntity(R);if(!(!ee||!ee.visible)){var ve=ee.material,Ie=ee.geometry;if(!(!Ie||Ie.dirty||!ve)){var We=this.transform.getComponentByEntity(R),pr=Pn.multiply(Pn.create(),Gt,We.worldTransform),Tr=Et.getViewport(),Br=Tr.width,Ir=Tr.height;ve.setUniform({projectionMatrix:Q.getPerspective(),modelViewMatrix:pr,modelMatrix:We.worldTransform,viewMatrix:Gt,cameraPosition:Q.getPosition(),u_viewport:[Br,Ir]}),ee.model&&(ee.model.draw({uniforms:ve.uniforms.reduce(function(Dr,en){return Dr[en.name]=en.data,Dr},{})}),ve.uniforms.forEach(function(Dr){Dr.dirty=!1}),ve.dirty=!1)}}}},{key:"initMesh",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q,Et){var Gt,ee,ve,Ie,We,pr,Tr,Br;return m().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(Gt=this.mesh.getComponentByEntity(Q),Gt){Dr.next=3;break}return Dr.abrupt("return");case 3:if(ee=Gt.material,ve=Gt.geometry,!(!ve||ve.dirty||!ee)){Dr.next=7;break}return Dr.abrupt("return");case 7:if(Gt.model){Dr.next=24;break}if(Ie="m-".concat(ee.entity,"-g-").concat(ve.entity),!this.modelCache[Ie]){Dr.next=12;break}return Gt.model=this.modelCache[Ie],Dr.abrupt("return");case 12:return ee.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),We=this.engine,pr=We.createModel,Tr=We.createAttribute,Br={vs:ee.vertexShaderGLSL,fs:ee.fragmentShaderGLSL,defines:ee.defines,attributes:ve.attributes.reduce(function(en,Sn){return Sn.data&&Sn.buffer&&(en[Sn.name]=Tr({buffer:Sn.buffer,attributes:Sn.attributes,arrayStride:Sn.arrayStride,stepMode:Sn.stepMode,divisor:Sn.stepMode==="vertex"?0:1})),en},{}),uniforms:ee.uniforms.reduce(function(en,Sn){return en[Sn.name]=Sn.data,en},{}),scissor:{enable:!0,box:function(){return Et.getViewport()}}},ee.cull&&(Br.cull=ee.cull),ee.depth&&(Br.depth=ee.depth),ee.blend&&(Br.blend=ee.blend),ve.indicesBuffer&&(Br.elements=ve.indicesBuffer),ve.maxInstancedCount&&(Br.instances=ve.maxInstancedCount,Br.count=ve.vertexCount||3),Dr.next=22,pr(Br);case 22:Gt.model=Dr.sent,this.modelCache[Ie]=Gt.model;case 24:case"end":return Dr.stop()}},Y,this)}));function R(Y,Q){return nt.apply(this,arguments)}return R}()},{key:"initView",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){var Et,Gt,ee,ve;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:Et=Q.getScene(),Gt=Ha(Et.getEntities()),We.prev=2,Gt.s();case 4:if((ee=Gt.n()).done){We.next=10;break}return ve=ee.value,We.next=8,this.initMesh(ve,Q);case 8:We.next=4;break;case 10:We.next=15;break;case 12:We.prev=12,We.t0=We.catch(2),Gt.e(We.t0);case 15:return We.prev=15,Gt.f(),We.finish(15);case 18:case"end":return We.stop()}},Y,this,[[2,12,15,18]])}));function R(Y){return nt.apply(this,arguments)}return R}()}]),_}(),Ya.IDENTIFIER="Render Pass",bs),Bi=E(ia.prototype,"mesh",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rs=E(ia.prototype,"geometry",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Po=E(ia.prototype,"material",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ga=E(ia.prototype,"cullable",[qo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ys=E(ia.prototype,"transform",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs=E(ia.prototype,"hierarchy",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ms=E(ia.prototype,"frameGraphSystem",[gs,ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eo=E(ia.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ai=E(ia.prototype,"resourcePool",[Wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ia))||so),Za,xo,Ka,Ga,Js,ka,$a,wo,qa,Xo,fi,ma,to;function ba(_,nt){var R;if(typeof Symbol=="undefined"||_[Symbol.iterator]==null){if(Array.isArray(_)||(R=Mi(_))||nt&&_&&typeof _.length=="number"){R&&(_=R);var Y=0,Q=function(){};return{s:Q,n:function(){return Y>=_.length?{done:!0}:{done:!1,value:_[Y++]}},e:function(Ie){throw Ie},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=_[Symbol.iterator]()},n:function(){var Ie=R.next();return Et=Ie.done,Ie},e:function(Ie){Gt=!0,ee=Ie},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function Mi(_,nt){if(_){if(typeof _=="string")return ca(_,nt);var R=Object.prototype.toString.call(_).slice(8,-1);if(R==="Object"&&_.constructor&&(R=_.constructor.name),R==="Map"||R==="Set")return Array.from(_);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return ca(_,nt)}}function ca(_,nt){(nt==null||nt>_.length)&&(nt=_.length);for(var R=0,Y=new Array(nt);R<nt;R++)Y[R]=_[R];return Y}var Es={NONE:0,ENCODE:1,HIGHLIGHT:2},aa=(Za=(0,O.b2)(),xo=(0,O.f3)(b.RenderEngine),Ka=(0,O.f3)(b.ResourcePool),Ga=(0,O.f3)(b.RenderPassFactory),Js=(0,O.f3)(b.MeshComponentManager),Za(ka=($a=(to=ma=function(){function _(){var nt=this;(0,z.Z)(this,_),x(this,"engine",wo,this),x(this,"resourcePool",qa,this),x(this,"renderPassFactory",Xo,this),x(this,"mesh",fi,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(R,Y,Q){var Et=R.createRenderTarget(Y,"picking fbo",{width:1,height:1});Q.data={output:Y.write(R,Et)},Y.hasSideEffect=!0},this.execute=function(){var R=(0,y.Z)(m().mark(function Y(Q,Et,Gt){var ee,ve,Ie;return m().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(nt.views=Gt,!nt.alreadyInRendering){pr.next=3;break}return pr.abrupt("return");case 3:ee=ba(Gt);try{for(Ie=function(){var Br=ve.value,Ir=Br.getViewport(),Dr=Ir.width,en=Ir.height;nt.alreadyInRendering=!0;var Sn=Q.getResourceNode(Et.data.output);nt.pickingFBO=nt.resourcePool.getOrCreateResource(Sn.resource),nt.pickingFBO.resize({width:Dr,height:en}),nt.engine.useFramebuffer(nt.pickingFBO,function(){nt.engine.clear({framebuffer:nt.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Dn=nt.renderPassFactory(ya.IDENTIFIER),gn=[],ei=Br.getScene(),In=ba(ei.getEntities()),xi;try{for(In.s();!(xi=In.n()).done;){var ai=xi.value,oi=nt.mesh.getComponentByEntity(ai),va=oi.material;va.setUniform("u_PickingStage",Es.ENCODE),gn.push(oi)}}catch(Yi){In.e(Yi)}finally{In.f()}Dn.renderView(Br),gn.forEach(function(Yi){var Ia=Yi.material;Ia.setUniform("u_PickingStage",Es.HIGHLIGHT)}),nt.alreadyInRendering=!1})},ee.s();!(ve=ee.n()).done;)Ie()}catch(Tr){ee.e(Tr)}finally{ee.f()}case 5:case"end":return pr.stop()}},Y)}));return function(Y,Q,Et){return R.apply(this,arguments)}}(),this.pick=function(R,Y){var Q=R.x,Et=R.y,Gt=nt.engine,ee=Gt.readPixels,ve=Gt.useFramebuffer,Ie=Y.getViewport(),We=Ie.width,pr=Ie.height,Tr=Q*window.devicePixelRatio,Br=Et*window.devicePixelRatio;if(!(Tr>We||Tr<0||Br>pr||Br<0)){var Ir,Dr;return ve(nt.pickingFBO,function(){Ir=ee({x:Math.round(Tr),y:Math.round(pr-(Et+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:nt.pickingFBO}),(Ir[0]!==0||Ir[1]!==0||Ir[2]!==0)&&(Dr=Jn(Ir),nt.highlightEnabled&&nt.highlightPickedFeature(Ir,Y))}),Dr}}}return(0,k.Z)(_,[{key:"enableHighlight",value:function(R){this.highlightEnabled=R}},{key:"setHighlightColor",value:function(R){this.highlightColor=R}},{key:"highlightPickedFeature",value:function(R,Y){if(R){var Q=ba(Y.getScene().getEntities()),Et;try{for(Q.s();!(Et=Q.n()).done;){var Gt=Et.value,ee=this.mesh.getComponentByEntity(Gt),ve=ee.material;ve.setUniform("u_PickingStage",Es.HIGHLIGHT),ve.setUniform("u_PickingColor",[R[0],R[1],R[2]]),ve.setUniform("u_HighlightColor",this.highlightColor)}}catch(Ie){Q.e(Ie)}finally{Q.f()}}}}]),_}(),ma.IDENTIFIER="PixelPicking Pass",to),wo=E($a.prototype,"engine",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qa=E($a.prototype,"resourcePool",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xo=E($a.prototype,"renderPassFactory",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=E($a.prototype,"mesh",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$a))||ka),uo,eo,fo,qs,Yo,Oo,ns,Wu,yu,xs=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,jt=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,se=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,rr=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,cr=(uo=(0,O.b2)(),eo=(0,O.f3)(b.RenderEngine),fo=(0,O.f3)(b.ResourcePool),uo(qs=(Yo=(yu=Wu=function _(){var nt=this;(0,z.Z)(this,_),x(this,"engine",Oo,this),x(this,"resourcePool",ns,this),this.model=void 0,this.setup=function(R,Y,Q){var Et=R.getPass(ya.IDENTIFIER);if(Et){var Gt=R.createRenderTarget(Y,"render to screen",{width:1,height:1});Q.data={input:Y.read(Et.data.output),output:Y.write(R,Gt)}}},this.execute=function(){var R=(0,y.Z)(m().mark(function Y(Q,Et){var Gt,ee,ve,Ie,We,pr,Tr;return m().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(Gt=nt.engine,ee=Gt.createModel,ve=Gt.createAttribute,Ie=Gt.createBuffer,nt.model){Ir.next=6;break}return Ir.next=4,ee({vs:nt.engine.supportWebGPU?rr:jt,fs:nt.engine.supportWebGPU?se:xs,attributes:{a_Position:ve({buffer:Ie({data:[-4,-4,4,-4,0,4],type:Oe.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:We=Ir.sent,nt.model=We;case 6:pr=Q.getResourceNode(Et.data.input),Tr=nt.resourcePool.getOrCreateResource(pr.resource),nt.engine.useFramebuffer(null,function(){nt.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),nt.model.draw({uniforms:{u_Texture:Tr}})});case 9:case"end":return Ir.stop()}},Y)}));return function(Y,Q){return R.apply(this,arguments)}}(),this.tearDown=function(){nt.model=void 0}},Wu.IDENTIFIER="Copy Pass",yu),Oo=E(Yo.prototype,"engine",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=E(Yo.prototype,"resourcePool",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yo))||qs),Gr,cn,xn,Zn,Wi,Ra,Fa,Ho,xf,wa,ro,mu,ic,Yc=(Gr=(0,O.b2)(),cn=(0,O.f3)(b.Systems),xn=(0,O.t6)(b.FrameGraphSystem),Zn=(0,O.f3)(b.RenderPassFactory),Wi=(0,O.f3)(b.ConfigService),Ra=(0,O.f3)(b.ResourcePool),Gr(Fa=(Ho=(ic=function(){function _(){(0,z.Z)(this,_),x(this,"frameGraphSystem",xf,this),x(this,"renderPassFactory",wa,this),x(this,"configService",ro,this),x(this,"resourcePool",mu,this)}return(0,k.Z)(_,[{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){var Et,Gt,ee,ve,Ie,We,pr,Tr,Br;return m().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:Et=this.renderPassFactory(ya.IDENTIFIER),Gt=Et.setup,ee=Et.execute,ve=this.frameGraphSystem.addPass(ya.IDENTIFIER,Gt,ee),Ie=this.renderPassFactory(cr.IDENTIFIER),We=Ie.setup,pr=Ie.execute,Tr=Ie.tearDown,Br=this.frameGraphSystem.addPass(cr.IDENTIFIER,We,pr,Tr),this.frameGraphSystem.present(Br.data.output);case 5:case"end":return Dr.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(R,Y){var Q=this.renderPassFactory(aa.IDENTIFIER);return Q.pick(R,Y)}}]),_}(),ic),xf=E(Ho.prototype,"frameGraphSystem",[cn,xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=E(Ho.prototype,"renderPassFactory",[Zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ro=E(Ho.prototype,"configService",[Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=E(Ho.prototype,"resourcePool",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ho))||Fa);function wf(_){var nt=Sf();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Sf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var _f=function(_){(0,X.Z)(R,_);var nt=wf(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.parentID=void 0,Object.assign((0,be.Z)(Q),Y),Q}return R}(T),tu,bu,eu,co,Hc,Mf,zl,Ls,Wl,Vl,Eu=(tu=(0,O.b2)(),bu=(0,O.f3)(b.HierarchyComponentManager),eu=(0,O.f3)(b.TransformComponentManager),co=(0,O.f3)(b.MeshComponentManager),tu(Hc=(Mf=(Vl=function(){function _(){(0,z.Z)(this,_),x(this,"hierarchy",zl,this),x(this,"transform",Ls,this),x(this,"mesh",Wl,this)}return(0,k.Z)(_,[{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return Et.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var R=this;this.transform.forEach(function(Y,Q){(Q.isDirty()||Q.isLocalDirty())&&(R.setMeshAABBDirty(R.mesh.getComponentByEntity(Y)),Q.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var R=this;this.hierarchy.forEach(function(Y,Q){var Et=R.transform.getComponentByEntity(Y),Gt=R.transform.getComponentByEntity(Q.parentID);Et!==null&&Gt!==null&&Et.updateTransformWithParent(Gt)})}},{key:"attach",value:function(R,Y,Q){this.hierarchy.contains(R)&&this.detach(R),this.hierarchy.create(R,{parentID:Y});var Et=this.mesh.getComponentByEntity(Y);if(this.setMeshAABBDirty(Et),Et&&Et.children.indexOf(R)===-1&&Et.children.push(R),this.hierarchy.getCount()>1)for(var Gt=this.hierarchy.getCount()-1;Gt>0;--Gt)for(var ee=this.hierarchy.getEntity(Gt),ve=0;ve<Gt;++ve){var Ie=this.hierarchy.getComponent(ve);if(Ie.parentID===ee){this.hierarchy.moveItem(Gt,ve),++Gt;break}}var We=this.hierarchy.getComponentByEntity(R),pr=this.transform.getComponentByEntity(Y);pr===null&&(pr=this.transform.create(Y));var Tr=this.transform.getComponentByEntity(R);Tr===null&&(Tr=this.transform.create(R),pr=this.transform.getComponentByEntity(Y)),Tr.parent=pr,!Q&&pr&&(Tr.matrixTransform(Pn.invert(Pn.create(),pr.worldTransform)),Tr.updateTransform()),pr&&Tr.updateTransformWithParent(pr)}},{key:"detach",value:function(R){var Y=this.hierarchy.getComponentByEntity(R);if(Y!==null){var Q=this.transform.getComponentByEntity(R);Q!==null&&(Q.parent=null,Q.applyTransform()),this.hierarchy.removeKeepSorted(R);var Et=this.mesh.getComponentByEntity(Y.parentID);if(Et){var Gt=Et.children.indexOf(R);Et.children.splice(Gt,1)}this.setMeshAABBDirty(Et)}}},{key:"detachChildren",value:function(R){var Y=this.mesh.getComponentByEntity(R);Y&&(Y.children=[]);for(var Q=0;Q<this.hierarchy.getCount();){var Et;if(((Et=this.hierarchy.getComponent(Q))===null||Et===void 0?void 0:Et.parentID)===R){var Gt=this.hierarchy.getEntity(Q);this.detach(Gt)}else++Q}}},{key:"setMeshAABBDirty",value:function(R){R&&(R.aabbDirty=!0)}}]),_}(),Vl),zl=E(Mf.prototype,"hierarchy",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=E(Mf.prototype,"transform",[eu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=E(Mf.prototype,"mesh",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mf))||Hc),Xn=M(14717);function Cf(_){var nt=Af();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Af(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Vu=function(_){(0,X.Z)(R,_);var nt=Cf(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.dirtyFlag=void 0,Q.localDirtyFlag=void 0,Q.parent=null,Q.localPosition=Rt.fromValues(0,0,0),Q.localRotation=Xn.fromValues(0,0,0,1),Q.localScale=Rt.fromValues(1,1,1),Q.localTransform=Pn.create(),Q.position=Rt.fromValues(0,0,0),Q.rotation=Xn.fromValues(0,0,0,1),Q.scaling=Rt.fromValues(1,1,1),Q.worldTransform=Pn.create(),Q.matrixTransform=function(){var Et=Pn.create();return function(Gt){Pn.multiply(Et,Q.getLocalTransform(),Gt),Pn.getScaling(Q.localScale,Et),Pn.getTranslation(Q.localPosition,Et),Pn.getRotation(Q.localRotation,Et)}}(),Q.rotateRollPitchYaw=function(){var Et=Xn.create(),Gt=Xn.create(),ee=Xn.create();return function(ve,Ie,We){Q.setDirty(),Xn.fromEuler(Et,ve,0,0),Xn.fromEuler(Gt,0,Ie,0),Xn.fromEuler(ee,0,0,We),Xn.multiply(Q.localRotation,Et,Q.localRotation),Xn.multiply(Q.localRotation,Q.localRotation,Gt),Xn.multiply(Q.localRotation,ee,Q.localRotation),Xn.normalize(Q.localRotation,Q.localRotation)}}(),Q.lerp=function(){var Et=Rt.create(),Gt=Xn.create(),ee=Rt.create(),ve=Rt.create(),Ie=Xn.create(),We=Rt.create();return function(pr,Tr,Br){Q.setDirty(),Pn.getScaling(Et,pr.worldTransform),Pn.getTranslation(ee,pr.worldTransform),Pn.getRotation(Gt,pr.worldTransform),Pn.getScaling(ve,Tr.worldTransform),Pn.getTranslation(We,Tr.worldTransform),Pn.getRotation(Ie,Tr.worldTransform),Rt.lerp(Q.localScale,Et,ve,Br),Xn.slerp(Q.localRotation,Gt,Ie,Br),Rt.lerp(Q.localPosition,ee,We,Br)}}(),Q.translate=function(){var Et=Rt.create();return function(Gt){return Rt.add(Et,Q.getPosition(),Gt),Q.setPosition(Et),Q.setDirty(!0),(0,be.Z)(Q)}}(),Q.translateLocal=function(){return function(Et){return Rt.transformQuat(Et,Et,Q.localRotation),Rt.add(Q.localPosition,Q.localPosition,Et),Q.setLocalDirty(!0),(0,be.Z)(Q)}}(),Q.setPosition=function(){var Et=Pn.create();return function(Gt){return Q.position=Gt,Q.setLocalDirty(!0),Q.parent===null?Rt.copy(Q.localPosition,Gt):(Pn.copy(Et,Q.parent.worldTransform),Pn.invert(Et,Et),Rt.transformMat4(Q.localPosition,Gt,Et)),(0,be.Z)(Q)}}(),Q.rotate=function(){var Et=Xn.create();return function(Gt){if(Q.parent===null)Xn.multiply(Q.localRotation,Q.localRotation,Gt),Xn.normalize(Q.localRotation,Q.localRotation);else{var ee=Q.getRotation(),ve=Q.parent.getRotation();Xn.copy(Et,ve),Xn.invert(Et,Et),Xn.multiply(Et,Et,Gt),Xn.multiply(Q.localRotation,Gt,ee),Xn.normalize(Q.localRotation,Q.localRotation)}return Q.setLocalDirty(),(0,be.Z)(Q)}}(),Q.rotateLocal=function(){return function(Et){return Xn.multiply(Q.localRotation,Q.localRotation,Et),Xn.normalize(Q.localRotation,Q.localRotation),Q.setLocalDirty(!0),(0,be.Z)(Q)}}(),Q.setRotation=function(){var Et=Xn.create();return function(Gt){return Q.parent===null?Xn.copy(Q.localRotation,Gt):(Xn.copy(Et,Q.parent.getRotation()),Xn.invert(Et,Et),Xn.copy(Q.localRotation,Et),Xn.mul(Q.localRotation,Q.localRotation,Gt)),Q.setLocalDirty(!0),(0,be.Z)(Q)}}(),Q}return(0,k.Z)(R,[{key:"setLocalPosition",value:function(Q){Rt.copy(this.localPosition,Q),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(Q){Rt.copy(this.localScale,Q),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(Q){return Xn.copy(this.localRotation,Q),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Q?this.dirtyFlag|=R.DIRTY:this.dirtyFlag&=~R.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Q?(this.localDirtyFlag|=R.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~R.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(Pn.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(Q){Pn.multiply(this.worldTransform,Q.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Pn.getScaling(this.localScale,this.worldTransform),Pn.getTranslation(this.localPosition,this.worldTransform),Pn.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=Rt.fromValues(0,0,0),this.localRotation=Xn.fromValues(0,0,0,1),this.localScale=Rt.fromValues(1,1,1)}},{key:"scaleLocal",value:function(Q){return this.setLocalDirty(),Rt.multiply(this.localScale,this.localScale,Q),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(Pn.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Pn.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Pn.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Pn.getScaling(this.scaling,this.worldTransform),this.scaling}}]),R}(T);Vu.DIRTY=1<<0;var ac=M(79309),Tf,oc,If,sc,Zc,Pf,Kc=(Tf=(0,O.b2)(),oc=(0,O.f3)(b.RenderEngine),Tf(If=(sc=(Pf=function(){function _(){(0,z.Z)(this,_),x(this,"engine",Zc,this),this.resourcePool={}}return(0,k.Z)(_,[{key:"getOrCreateResource",value:function(R){if(!this.resourcePool[R.name]){var Y=R.descriptor,Q=Y.width,Et=Y.height,Gt=Y.usage;this.resourcePool[R.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:Q,height:Et,wrapS:Oe.CLAMP_TO_EDGE,wrapT:Oe.CLAMP_TO_EDGE,usage:Gt})})}return this.resourcePool[R.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),_}(),Pf),Zc=E(sc.prototype,"engine",[oc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc))||If);function jl(_){var nt=ks();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function ks(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var $c=function(_){(0,X.Z)(R,_);var nt=jl(R);function R(Y){var Q;return(0,z.Z)(this,R),Q=nt.call(this,Y),Q.name=void 0,Q.name=Y.name||"",Q}return R}(T),ju,Xu,Qc,Yu=(ju=(0,O.b2)(),ju(Xu=(Qc=function(){function _(){(0,z.Z)(this,_),this.config=void 0}return(0,k.Z)(_,[{key:"get",value:function(){return this.config}},{key:"set",value:function(R){this.config=R}}]),_}(),Qc))||Xu),Do,xu,Jc;(function(_){_.PANSTART="PANSTART",_.PANEND="PANEND",_.PANMOVE="PANMOVE",_.PINCH="PINCH",_.KEYDOWN="KEYDOWN",_.KEYUP="KEYUP",_.HOVER="HOVER"})(Jc||(Jc={}));var Xl=(Do=(0,O.b2)(),Do(xu=function(){function _(){(0,z.Z)(this,_)}return(0,k.Z)(_,[{key:"listen",value:function(R){}},{key:"on",value:function(R,Y){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),_}())||xu);function qc(_){var nt=0;switch(_){case"vec2":case"ivec2":nt=2;break;case"vec3":case"ivec3":nt=3;break;case"vec4":case"ivec4":case"mat2":nt=4;break;case"mat3":nt=9;break;case"mat4":nt=16;break;default:}return nt}var Yl=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Of(_){var nt={};return _=_.replace(Yl,function(R,Y,Q){var Et=Q.split(":"),Gt=Et[0].trim(),ee="";switch(Et.length>1&&(ee=Et[1].trim()),Y){case"bool":ee=ee==="true";break;case"float":case"int":ee=Number(ee);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":ee?ee=ee.replace("[","").replace("]","").split(",").reduce(function(ve,Ie){return ve.push(Number(Ie.trim())),ve},[]):ee=new Array(qc(Y)).fill(0);break;default:}return nt[Gt]=ee,"uniform ".concat(Y," ").concat(Gt,`;
`)}),{content:_,uniforms:nt}}function Hl(_){return _.filter(function(nt,R,Y){return Y.indexOf(nt)===R})}var tl,ru,Aa;function Df(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function nu(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Df(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Df(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var Zo=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,el=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,rl=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Zl=/precision\s+(high|low|medium)p\s+float/,Kl=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,$l=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,nl=(tl=(0,O.b2)(),tl(ru=(Aa=function(){function _(){(0,z.Z)(this,_),this.moduleCache={},this.rawContentCache={}}return(0,k.Z)(_,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:el,fs:Zo}),this.registerModule("sdf2d",{vs:"",fs:rl})}},{key:"registerModule",value:function(R,Y){if(!this.rawContentCache[R]){var Q=Y.vs,Et=Q===void 0?"":Q,Gt=Y.fs,ee=Gt===void 0?"":Gt,ve=Y.uniforms,Ie=Of(Et),We=Ie.content,pr=Ie.uniforms,Tr=Of(ee),Br=Tr.content,Ir=Tr.uniforms;this.rawContentCache[R]={fs:Br,uniforms:nu(nu(nu({},pr),Ir),ve),vs:We}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(R){var Y=this;if(this.moduleCache[R])return this.moduleCache[R];var Q=this.rawContentCache[R].vs||"",Et=this.rawContentCache[R].fs||"",Gt=this.processModule(Q,[],"vs"),ee=Gt.content,ve=Gt.includeList,Ie=this.processModule(Et,[],"fs"),We=Ie.content,pr=Ie.includeList,Tr=We,Br=Hl(ve.concat(pr).concat(R)).reduce(function(Ir,Dr){return nu(nu({},Ir),Y.rawContentCache[Dr].uniforms)},{});return Zl.test(We)||(Tr=Kl+We),this.moduleCache[R]={fs:Tr.trim(),uniforms:Br,vs:ee.trim()},this.moduleCache[R]}},{key:"processModule",value:function(R,Y,Q){var Et=this,Gt=R.replace($l,function(ee,ve){var Ie=ve.split(" "),We=Ie[0].replace(/"/g,"");if(Y.indexOf(We)>-1)return"";var pr=Et.rawContentCache[We][Q];Y.push(We);var Tr=Et.processModule(pr||"",Y,Q),Br=Tr.content;return Br});return{content:Gt,includeList:Y}}}]),_}(),Aa))||ru),Ko=new O.W2,il=(0,ac.Z)(Ko,!1),al=function(nt){var R=il.lazyInject(nt);return function(Y,Q,Et){R.call(this,Y,Q),Et&&(Et.initializer=function(){return Y[Q]})}},ol=function(nt){var R=il.lazyMultiInject(nt);return function(Y,Q,Et){R.call(this,Y,Q),Et&&(Et.initializer=function(){return Y[Q]})}};Ko.bind(b.ShaderModuleService).to(nl).inSingletonScope(),Ko.bind(b.NameComponentManager).toConstantValue(new w($c)),Ko.bind(b.HierarchyComponentManager).toConstantValue(new w(_f)),Ko.bind(b.TransformComponentManager).toConstantValue(new w(Vu)),Ko.bind(b.MeshComponentManager).toConstantValue(new w(Ce)),Ko.bind(b.CullableComponentManager).toConstantValue(new w(ye)),Ko.bind(b.GeometryComponentManager).toConstantValue(new w(Bn)),Ko.bind(b.MaterialComponentManager).toConstantValue(new w(ot));function Ql(){var _=new O.W2;return _.parent=Ko,_.bind(b.Systems).to(Eu).inSingletonScope().whenTargetNamed(b.SceneGraphSystem),_.bind(b.Systems).to(re).inSingletonScope().whenTargetNamed(b.FrameGraphSystem),_.bind(b.Systems).to(Ja).inSingletonScope().whenTargetNamed(b.MeshSystem),_.bind(b.Systems).to(Pt).inSingletonScope().whenTargetNamed(b.GeometrySystem),_.bind(b.Systems).to(Fe).inSingletonScope().whenTargetNamed(b.MaterialSystem),_.bind(b.Systems).to(Yc).inSingletonScope().whenTargetNamed(b.RendererSystem),_.bind(b.ResourcePool).to(Kc).inSingletonScope(),_.bind(b.ConfigService).to(Yu).inSingletonScope(),_.bind(b.InteractorService).to(Xl).inSingletonScope(),_.bind(b.RenderPass).to(ya).inSingletonScope().whenTargetNamed(ya.IDENTIFIER),_.bind(b.RenderPass).to(cr).inSingletonScope().whenTargetNamed(cr.IDENTIFIER),_.bind(b.RenderPass).to(aa).inSingletonScope().whenTargetNamed(aa.IDENTIFIER),_.bind(b.RenderPassFactory).toFactory(function(nt){return function(R){return nt.container.getNamed(b.RenderPass,R)}}),_}function sl(_){for(var nt=new Ft,R=Rt.fromValues(_[0],_[1],_[2]),Y=Rt.fromValues(_[0],_[1],_[2]),Q=3;Q<_.length;){var Et=_[Q++],Gt=_[Q++],ee=_[Q++];Et<R[0]&&(R[0]=Et),Gt<R[1]&&(R[1]=Gt),ee<R[2]&&(R[2]=ee),Et>Y[0]&&(Y[0]=Et),Gt>Y[1]&&(Y[1]=Gt),ee>Y[2]&&(Y[2]=ee)}return nt.setMinMax(R,Y),nt}var Ta=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Nh=Rt.create(),bn=null,Nf=Rt.create(),Ei=Rt.create(),ul=Rt.create(),Jl=Rt.create(),Hu=Rt.create(),ql=null,uc=M(85337),Lh=M(10758),th=M(1036),kh=M(87117),ws=M(42622),Rh=M(43295),fc;(function(_){_.Normal="normal",_.PostProcessing="post-processing"})(fc||(fc={}));var ea=M(7193),cc=M(31974),Ss=M(69069),Lf=M(18859),eh=M(72470),Bh=M(70434),iu;(function(_){_.Void="Void",_.Boolean="Boolean",_.Float="Float",_.Uint32="Uint32",_.Int32="Int32",_.Vector="Vector",_.Vector2Float="vec2<f32>",_.Vector3Float="vec3<f32>",_.Vector4Float="vec4<f32>",_.Vector2Boolean="vec2<bool>",_.Vector3Boolean="vec3<bool>",_.Vector4Boolean="vec4<bool>",_.Vector2Uint="vec2<u32>",_.Vector3Uint="vec3<u32>",_.Vector4Uint="vec4<u32>",_.Vector2Int="vec2<i32>",_.Vector3Int="vec3<i32>",_.Vector4Int="vec4<i32>",_.Matrix="Matrix",_.Matrix3x3Float="mat3x3<f32>",_.Matrix4x4Float="mat4x4<i32>",_.Struct="Struct",_.FloatArray="Float[]",_.Vector4FloatArray="vec4<f32>[]"})(iu||(iu={}));var fl;(function(_){_.Program="Program",_.Identifier="Identifier",_.VariableDeclaration="VariableDeclaration",_.BlockStatement="BlockStatement",_.ReturnStatement="ReturnStatement",_.FunctionDeclaration="FunctionDeclaration",_.VariableDeclarator="VariableDeclarator",_.AssignmentExpression="AssignmentExpression",_.LogicalExpression="LogicalExpression",_.BinaryExpression="BinaryExpression",_.ArrayExpression="ArrayExpression",_.UnaryExpression="UnaryExpression",_.UpdateExpression="UpdateExpression",_.FunctionExpression="FunctionExpression",_.MemberExpression="MemberExpression",_.ConditionalExpression="ConditionalExpression",_.ExpressionStatement="ExpressionStatement",_.CallExpression="CallExpression",_.NumThreadStatement="NumThreadStatement",_.StorageStatement="StorageStatement",_.DoWhileStatement="DoWhileStatement",_.WhileStatement="WhileStatement",_.ForStatement="ForStatement",_.BreakStatement="BreakStatement",_.ContinueStatement="ContinueStatement",_.IfStatement="IfStatement",_.ImportedFunctionStatement="ImportedFunctionStatement"})(fl||(fl={}));var is;(function(_){_.Input="Input",_.Output="Output",_.Uniform="Uniform",_.Workgroup="Workgroup",_.UniformConstant="UniformConstant",_.Image="Image",_.StorageBuffer="StorageBuffer",_.Private="Private",_.Function="Function"})(is||(is={}));var Zu;(function(_){_.GLSL100="GLSL100",_.GLSL450="GLSL450",_.WGSL="WGSL"})(Zu||(Zu={}));var lc="__DefineValuePlaceholder__";function hc(_){return typeof _=="number"}function _s(_){return _===void 0?0:_>360||_<-360?_%360:_}function as(_,nt,R){return hc(_)?Rt.fromValues(_,nt,R):_.length===3?Rt.clone(_):Rt.fromValues(_[0],_[1],_[2])}var cl=function(){function _(nt,R){(0,z.Z)(this,_),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=nt,this.matrix=Pn.clone(R.matrix),this.right=Rt.clone(R.right),this.up=Rt.clone(R.up),this.forward=Rt.clone(R.forward),this.position=Rt.clone(R.position),this.focalPoint=Rt.clone(R.focalPoint),this.distanceVector=Rt.clone(R.distanceVector),this.azimuth=R.azimuth,this.elevation=R.elevation,this.roll=R.roll,this.relAzimuth=R.relAzimuth,this.relElevation=R.relElevation,this.relRoll=R.relRoll,this.dollyingStep=R.dollyingStep,this.distance=R.distance}return(0,k.Z)(_,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(R){R.matrix=Pn.copy(R.matrix,this.matrix),R.right=Rt.copy(R.right,this.right),R.up=Rt.copy(R.up,this.up),R.forward=Rt.copy(R.forward,this.forward),R.position=Rt.copy(R.position,this.position),R.focalPoint=Rt.copy(R.focalPoint,this.focalPoint),R.distanceVector=Rt.copy(R.distanceVector,this.distanceVector),R.azimuth=this.azimuth,R.elevation=this.elevation,R.roll=this.roll,R.relAzimuth=this.relAzimuth,R.relElevation=this.relElevation,R.relRoll=this.relRoll,R.dollyingStep=this.dollyingStep,R.distance=this.distance}}]),_}(),So,dc,au,ll,rh,vc,kf,Gi;(function(_){_.ORBITING="ORBITING",_.EXPLORING="EXPLORING",_.TRACKING="TRACKING"})(Gi||(Gi={}));var Rs;(function(_){_.DEFAULT="DEFAULT",_.ROTATIONAL="ROTATIONAL",_.TRANSLATIONAL="TRANSLATIONAL",_.CINEMATIC="CINEMATIC"})(Rs||(Rs={}));var os;(function(_){_.ORTHOGRAPHIC="ORTHOGRAPHIC",_.PERSPECTIVE="PERSPECTIVE"})(os||(os={}));var No=Math.PI/180,Bs=180/Math.PI,wu=(So=(0,O.b2)(),dc=(0,O.f3)(b.InteractorService),So(au=(ll=(kf=vc=function(){function _(){(0,z.Z)(this,_),this.matrix=Pn.create(),this.right=Rt.fromValues(1,0,0),this.up=Rt.fromValues(0,1,0),this.forward=Rt.fromValues(0,0,1),this.position=Rt.fromValues(0,0,1),this.focalPoint=Rt.fromValues(0,0,0),this.distanceVector=Rt.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,x(this,"interactor",rh,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Pn.create(),this.view=void 0,this.following=void 0,this.type=Gi.EXPLORING,this.trackingMode=Rs.DEFAULT,this.projectionMode=os.PERSPECTIVE,this.frustum=new Wr,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,k.Z)(_,[{key:"clone",value:function(){var R=new _;return R.setType(this.type,void 0),R.interactor=this.interactor,R}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(R,Y){return this.type=R,this.type===Gi.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Gi.TRACKING&&Y!==void 0&&this.setTrackingMode(Y),this}},{key:"setProjectionMode",value:function(R){return this.projectionMode=R,this}},{key:"setTrackingMode",value:function(R){if(this.type!==Gi.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=R,this}},{key:"setWorldRotation",value:function(R){this.rotateWorld=R,this._getAngles()}},{key:"getViewTransform",value:function(){return Pn.invert(Pn.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(R){return this.matrix=R,this._update(),this}},{key:"setAspect",value:function(R){return this.setPerspective(this.near,this.far,this.fov,R),this}},{key:"setViewOffset",value:function(R,Y,Q,Et,Gt,ee){return this.aspect=R/Y,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=R,this.view.fullHeight=Y,this.view.offsetX=Q,this.view.offsetY=Et,this.view.width=Gt,this.view.height=ee,this.projectionMode===os.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===os.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(R,Y,Q,Et){return this.projectionMode=os.PERSPECTIVE,this.fov=Q,this.near=R,this.far=Y,this.aspect=Et,Pn.perspective(this.perspective,this.fov*No,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(R,Y,Q,Et,Gt,ee){this.projectionMode=os.ORTHOGRAPHIC,this.rright=Y,this.left=R,this.top=Q,this.bottom=Et,this.near=Gt,this.far=ee;var ve=(this.rright-this.left)/(2*this.zoom),Ie=(this.top-this.bottom)/(2*this.zoom),We=(this.rright+this.left)/2,pr=(this.top+this.bottom)/2,Tr=We-ve,Br=We+ve,Ir=pr+Ie,Dr=pr-Ie;if(this.view!==void 0&&this.view.enabled){var en=(this.rright-this.left)/this.view.fullWidth/this.zoom,Sn=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Tr+=en*this.view.offsetX,Br=Tr+en*this.view.width,Ir-=Sn*this.view.offsetY,Dr=Ir-Sn*this.view.height}return Pn.ortho(this.perspective,Tr,Br,Ir,Dr,Gt,ee),this}},{key:"setPosition",value:function(R,Y,Q){return this._setPosition(R,Y,Q),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(R,Y,Q){var Et=Rt.fromValues(0,1,0);if(this.focalPoint=as(R,Y,Q),this.trackingMode===Rs.CINEMATIC){var Gt=Rt.subtract(Rt.create(),this.focalPoint,this.position);R=Gt[0],Y=Gt[1],Q=Gt[2];var ee=Rt.length(Gt),ve=Math.asin(Y/ee)*Bs,Ie=90+Math.atan2(Q,R)*Bs,We=Pn.create();Pn.rotateY(We,We,Ie*No),Pn.rotateX(We,We,ve*No),Et=Rt.transformMat4(Rt.create(),[0,1,0],We)}return Pn.invert(this.matrix,Pn.lookAt(Pn.create(),this.position,this.focalPoint,Et)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(R){if(!(this.distance===R||R<0)){this.distance=R,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var Y=Rt.create();R=this.distance;var Q=this.forward,Et=this.focalPoint;return Y[0]=R*Q[0]+Et[0],Y[1]=R*Q[1]+Et[1],Y[2]=R*Q[2]+Et[2],this._setPosition(Y),this}}},{key:"setMaxDistance",value:function(R){return this.maxDistance=R,this}},{key:"setMinDistance",value:function(R){return this.minDistance=R,this}},{key:"changeAzimuth",value:function(R){return this.setAzimuth(this.azimuth+R),this}},{key:"changeElevation",value:function(R){return this.setElevation(this.elevation+R),this}},{key:"changeRoll",value:function(R){return this.setRoll(this.roll+R),this}},{key:"setAzimuth",value:function(R){return this.azimuth=_s(R),this.computeMatrix(),this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(R){return this.elevation=_s(R),this.computeMatrix(),this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(R){return this.roll=_s(R),this.computeMatrix(),this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(R,Y,Q){if(this.type===Gi.EXPLORING){R=_s(R),Y=_s(Y),Q=_s(Q);var Et=Xn.setAxisAngle(Xn.create(),[1,0,0],(this.rotateWorld?1:-1)*Y*No),Gt=Xn.setAxisAngle(Xn.create(),[0,1,0],(this.rotateWorld?1:-1)*R*No),ee=Xn.setAxisAngle(Xn.create(),[0,0,1],Q*No),ve=Xn.multiply(Xn.create(),Gt,Et);ve=Xn.multiply(Xn.create(),ve,ee);var Ie=Pn.fromQuat(Pn.create(),ve);Pn.translate(this.matrix,this.matrix,[0,0,-this.distance]),Pn.multiply(this.matrix,this.matrix,Ie),Pn.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+Y)>90)return;this.relElevation=_s(Y),this.relAzimuth=_s(R),this.relRoll=_s(Q),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(R,Y){var Q=as(R,Y,0),Et=Rt.clone(this.position);return Rt.add(Et,Et,Rt.scale(Rt.create(),this.right,Q[0])),Rt.add(Et,Et,Rt.scale(Rt.create(),this.up,Q[1])),this._setPosition(Et),this}},{key:"dolly",value:function(R){var Y=this.forward,Q=Rt.clone(this.position),Et=R*this.dollyingStep,Gt=this.distance+R*this.dollyingStep;return Et=Math.max(Math.min(Gt,this.maxDistance),this.minDistance)-this.distance,Q[0]+=Et*Y[0],Q[1]+=Et*Y[1],Q[2]+=Et*Y[2],this._setPosition(Q),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getDistance():this.type===Gi.TRACKING&&Rt.add(this.focalPoint,Q,this.distanceVector),this}},{key:"createLandmark",value:function(R,Y){var Q=this.clone();Q.setPosition(Y.position),Q.setFocalPoint(Y.focalPoint),Y.roll!==void 0&&Q.setRoll(Y.roll);var Et=new cl(R,Q);return this.landmarks.push(Et),Et}},{key:"setLandmark",value:function(R){var Y=new cl(R,this);return this.landmarks.push(Y),this}},{key:"gotoLandmark",value:function(R){var Y=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,Et=this.landmarks.find(function(pr){return pr.name===R});if(Et){if(Q===0){Et.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Gt=Et.getPosition(),ee=Et.getFocalPoint(),ve=Et.getRoll(),Ie,We=function pr(Tr){Ie===void 0&&(Ie=Tr);var Br=Tr-Ie,Ir=(1-Math.cos(Br/Q*Math.PI))/2,Dr=Rt.create(),en=Rt.create(),Sn=0;Rt.lerp(Dr,Y.focalPoint,ee,Ir),Rt.lerp(en,Y.position,Gt,Ir),Sn=Y.roll*(1-Ir)+ve*Ir,Y.setFocalPoint(Dr),Y.setPosition(en),Y.setRoll(Sn),Y.computeMatrix();var Dn=Rt.dist(Dr,ee)+Rt.dist(en,Gt);if(!(Dn>.01)){Y.setFocalPoint(Dr),Y.setPosition(en),Y.setRoll(Sn),Y.computeMatrix(),Y.interactor.connect();return}Br<Q&&(Y.landmarkAnimationID=window.requestAnimationFrame(pr))};window.requestAnimationFrame(We)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var R,Y,Q=Xn.setAxisAngle(Xn.create(),[0,0,1],this.roll*No);Pn.identity(this.matrix),R=Xn.setAxisAngle(Xn.create(),[1,0,0],(this.rotateWorld&&this.type!==Gi.TRACKING||this.type===Gi.TRACKING?1:-1)*this.elevation*No),Y=Xn.setAxisAngle(Xn.create(),[0,1,0],(this.rotateWorld&&this.type!==Gi.TRACKING||this.type===Gi.TRACKING?1:-1)*this.azimuth*No);var Et=Xn.multiply(Xn.create(),Y,R);Et=Xn.multiply(Xn.create(),Et,Q);var Gt=Pn.fromQuat(Pn.create(),Et);this.type===Gi.ORBITING||this.type===Gi.EXPLORING?(Pn.translate(this.matrix,this.matrix,this.focalPoint),Pn.multiply(this.matrix,this.matrix,Gt),Pn.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Gi.TRACKING&&(Pn.translate(this.matrix,this.matrix,this.position),Pn.multiply(this.matrix,this.matrix,Gt))}},{key:"_setPosition",value:function(R,Y,Q){this.position=as(R,Y,Q);var Et=this.matrix;Et[12]=this.position[0],Et[13]=this.position[1],Et[14]=this.position[2],Et[15]=1}},{key:"_getAxes",value:function(){Rt.copy(this.right,as(Te.transformMat4(Te.create(),[1,0,0,0],this.matrix))),Rt.copy(this.up,as(Te.transformMat4(Te.create(),[0,1,0,0],this.matrix))),Rt.copy(this.forward,as(Te.transformMat4(Te.create(),[0,0,1,0],this.matrix))),Rt.normalize(this.right,this.right),Rt.normalize(this.up,this.up),Rt.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var R=this.distanceVector[0],Y=this.distanceVector[1],Q=this.distanceVector[2],Et=Rt.length(this.distanceVector);if(Et===0){this.elevation=0,this.azimuth=0;return}this.type===Gi.TRACKING?(this.elevation=Math.asin(Y/Et)*Bs,this.azimuth=Math.atan2(-R,-Q)*Bs):this.rotateWorld?(this.elevation=Math.asin(Y/Et)*Bs,this.azimuth=Math.atan2(-R,-Q)*Bs):(this.elevation=-Math.asin(Y/Et)*Bs,this.azimuth=-Math.atan2(-R,-Q)*Bs)}},{key:"_getPosition",value:function(){Rt.copy(this.position,as(Te.transformMat4(Te.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Rt.transformMat3(this.distanceVector,[0,0,-this.distance],nr.fromMat4(nr.create(),this.matrix)),Rt.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Rt.subtract(Rt.create(),this.focalPoint,this.position),this.distance=Rt.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),_}(),vc.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},kf),rh=E(ll.prototype,"interactor",[dc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll))||au),Gs,Rf,ou,Ku,Su,ss,hl,Fs=(Gs=(0,O.b2)(),Rf=(0,O.f3)(b.GeometryComponentManager),Gs(ou=(Ku=(hl=ss=function(){function _(){(0,z.Z)(this,_),this.config=void 0,x(this,"geometry",Su,this),this.entity=void 0,this.component=void 0}return(0,k.Z)(_,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(R){this.config=R}},{key:"setEntity",value:function(R){this.entity=R,this.component=this.geometry.create(R),this.component.entity=R,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),_}(),ss.BOX="box",ss.SPHERE="sphere",ss.PLANE="plane",ss.MERGED="merged",hl),Su=E(Ku.prototype,"geometry",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ku))||ou),an=M(75946);function Bf(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var Gh={}.toString,Gf=function(nt,R){return Gh.call(nt)==="[object "+R+"]"},Fh=Gf,Uh=function(_){return Array.isArray?Array.isArray(_):Fh(_,"Array")},pc=9007199254740991,dl="[object Arguments]",nh="[object Array]",Us="[object Boolean]",_u="[object Date]",Mu="[object Error]",$u="[object Function]",Ms="[object Map]",lo="[object Number]",ih="[object Object]",Qu="[object RegExp]",ah="[object Set]",Ju="[object String]",vl="[object WeakMap]",pl="[object ArrayBuffer]",gl="[object DataView]",gc="[object Float32Array]",yc="[object Float64Array]",mc="[object Int8Array]",yl="[object Int16Array]",qu="[object Int32Array]",ml="[object Uint8Array]",Ff="[object Uint8ClampedArray]",oh="[object Uint16Array]",tf="[object Uint32Array]",gi={};gi[gc]=gi[yc]=gi[mc]=gi[yl]=gi[qu]=gi[ml]=gi[Ff]=gi[oh]=gi[tf]=!0,gi[dl]=gi[nh]=gi[pl]=gi[Us]=gi[gl]=gi[_u]=gi[Mu]=gi[$u]=gi[Ms]=gi[lo]=gi[ih]=gi[Qu]=gi[ah]=gi[Ju]=gi[vl]=!1;function sh(_){return function(nt){return _(nt)}}var bl=Object.prototype,bc=bl.toString;function ef(_){return Ze(_)&&Ec(_.length)&&!!gi[bc.call(_)]}function Ec(_){return typeof _=="number"&&_>-1&&_%1===0&&_<=pc}function Ze(_){return!!_&&(0,Dt.Z)(_)==="object"}var $o=ef,zs,rf,El,xc,Cu,wc,nf,Sc;function _c(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function af(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?_c(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):_c(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var la=(zs=(0,O.b2)(),rf=(0,O.f3)(b.RenderEngine),El=(0,O.f3)(b.ConfigService),zs(xc=(Cu=(Sc=function(){function _(){(0,z.Z)(this,_),x(this,"engine",wc,this),x(this,"configService",nf,this),this.entity=g(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,k.Z)(_,[{key:"init",value:function(){var R=this.configService.get(),Y=R.canvas,Q=R.engineOptions;this.initPromise=this.engine.init(af({canvas:Y||Bf(),swapChainFormat:an.EV.BGRA8Unorm,antialiasing:!1},Q))}},{key:"setBundle",value:function(R){this.compiledBundle=JSON.parse(JSON.stringify(R))}},{key:"setDispatch",value:function(R){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=R),this}},{key:"setMaxIteration",value:function(R){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=R),this}},{key:"setBinding",value:function(R,Y){var Q=this;if(typeof R=="string"){var Et=hc(Y)||$o(Y)||Uh(Y);if(this.compiledBundle&&this.compiledBundle.context){var Gt=this.compiledBundle.context.defines.find(function(ve){return ve.name===R});if(Gt)return Gt.value=Y,this;var ee=this.compiledBundle.context.uniforms.find(function(ve){return ve.name===R});ee&&(Et?(ee.data=Y,ee.isReferer=!1,ee.storageClass===is.Uniform?this.model&&this.model.updateUniform(R,Y):this.model&&this.model.updateBuffer(R,Y)):(ee.isReferer=!0,ee.data=Y))}}else Object.keys(R).forEach(function(ve){Q.setBinding(ve,R[ve])});return this}},{key:"execute",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q=this,Et,Gt,ee=arguments;return m().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(Et=ee.length>0&&ee[0]!==void 0?ee[0]:1,!this.dirty){Ie.next=6;break}return this.compiledBundle.context&&(Et>1?this.compiledBundle.context.maxIteration=Et:this.compiledBundle.context.maxIteration++),Ie.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(We){var pr=We.isReferer;return pr}).forEach(function(We){var pr=We.data,Tr=We.name;Q.model.confirmInput(pr.model,Tr)}),Gt=0;Gt<Et;Gt++)this.model.run();return this.engine.endFrame(),Ie.abrupt("return",this);case 12:case"end":return Ie.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"getOutput",value:function(){var nt=(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.abrupt("return",this.model.readData());case 1:case"end":return Et.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"compile",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q,Et,Gt;return m().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,this.initPromise;case 2:return Q=af({},this.compiledBundle.context),Et=this.engine.supportWebGPU?this.engine.useWGSL?Zu.WGSL:Zu.GLSL450:Zu.GLSL100,Gt=this.compiledBundle.shaders[Et],Q.defines.filter(function(Ie){return Ie.runtime}).forEach(function(Ie){var We="".concat(lc).concat(Ie.name);Gt=Gt.replace(We,"".concat(Ie.value))}),Q.shader=Gt,Q.uniforms.forEach(function(Ie){if(!Ie.data&&Ie.storageClass===is.StorageBuffer){var We=1;Ie.type===iu.FloatArray?We=1:Ie.type===iu.Vector4FloatArray&&(We=4),Ie.data=new Float32Array(Q.output.length*We).fill(0)}}),this.compiledBundle.context=Q,ve.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=ve.sent;case 12:case"end":return ve.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()}]),_}(),Sc),wc=E(Cu.prototype,"engine",[rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=E(Cu.prototype,"configService",[El],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cu))||xc),su,xl,Uf,Lo,uu,fu,Cs,cu=(su=(0,O.b2)(),xl=(0,O.f3)(b.MaterialComponentManager),su(Uf=(Lo=(Cs=fu=function(){function _(){(0,z.Z)(this,_),this.config=void 0,x(this,"material",uu,this),this.entity=void 0,this.component=void 0}return(0,k.Z)(_,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(R){this.config=R}},{key:"setEntity",value:function(R,Y){this.entity=R,this.component=this.material.create(R),this.component.entity=R,this.component.type=Y,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),_}(),fu.BASIC="basic",Cs),uu=E(Lo.prototype,"material",[xl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lo))||Uf),As,lu,Ts,Au,zf,of,Mc,us,Tu,ko,Cc,Ac,Iu,Tc,Qo=(As=(0,O.b2)(),lu=(0,O.f3)(b.MeshComponentManager),Ts=(0,O.f3)(b.CullableComponentManager),Au=(0,O.f3)(b.TransformComponentManager),zf=(0,O.f3)(b.Systems),of=(0,O.t6)(b.SceneGraphSystem),As(Mc=(us=(Tc=Iu=function(){function _(){(0,z.Z)(this,_),this.attributes={},this.config=void 0,x(this,"mesh",Tu,this),x(this,"cullable",ko,this),x(this,"transform",Cc,this),x(this,"sceneGraphSystem",Ac,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,k.Z)(_,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(R){this.config=R}},{key:"setEntity",value:function(R){this.entity=R,this.cullable.create(R),this.meshComponent=this.mesh.create(R),this.transformComponent=this.transform.create(R),this.onEntityCreated()}},{key:"setMaterial",value:function(R){return this.meshComponent.material=R,this}},{key:"setGeometry",value:function(R){return this.meshComponent.geometry=R,this}},{key:"setAttributes",value:function(R){var Y=this;Object.keys(R).forEach(function(Q){R[Q]!==void 0&&R[Q]!==Y.attributes[Q]&&(Y.onAttributeChanged({name:Q,data:R[Q]}),Y.attributes[Q]=R[Q])})}},{key:"setVisible",value:function(R){var Y=this;return this.meshComponent.visible=R,this.meshComponent.children.forEach(function(Q){var Et=Y.mesh.getComponentByEntity(Q);Et&&(Et.visible=R)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(R){return this.sceneGraphSystem.attach(this.entity,R.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(R){var Y=R.name,Q=R.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(Y),Q)}},{key:"convertAttributeName2UniformName",value:function(R){return R}}]),_}(),Iu.POINT="point",Iu.LINE="line",Iu.GRID="grid",Tc),Tu=E(us.prototype,"mesh",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ko=E(us.prototype,"cullable",[Ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=E(us.prototype,"transform",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ac=E(us.prototype,"sceneGraphSystem",[zf,of],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us))||Mc),Ic=M(4085),Pu=M.n(Ic),uh=function(){function _(nt,R){(0,z.Z)(this,_),this.attribute=void 0,this.buffer=void 0;var Y=R.buffer,Q=R.offset,Et=R.stride,Gt=R.normalized,ee=R.size,ve=R.divisor;this.buffer=Y,this.attribute={buffer:Y.get(),offset:Q||0,stride:Et||0,normalized:Gt||!1,divisor:ve||0},ee&&(this.attribute.size=ee)}return(0,k.Z)(_,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(R){this.buffer.subData(R)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),_}(),fs,sf,cs,Ro,Wf,Is,Bo,Pc,ls,Ws,Ua,hs,Go,Ps,Oc=(fs={},(0,Nt.Z)(fs,Oe.POINTS,"points"),(0,Nt.Z)(fs,Oe.LINES,"lines"),(0,Nt.Z)(fs,Oe.LINE_LOOP,"line loop"),(0,Nt.Z)(fs,Oe.LINE_STRIP,"line strip"),(0,Nt.Z)(fs,Oe.TRIANGLES,"triangles"),(0,Nt.Z)(fs,Oe.TRIANGLE_FAN,"triangle fan"),(0,Nt.Z)(fs,Oe.TRIANGLE_STRIP,"triangle strip"),fs),Vf=(sf={},(0,Nt.Z)(sf,Oe.STATIC_DRAW,"static"),(0,Nt.Z)(sf,Oe.DYNAMIC_DRAW,"dynamic"),(0,Nt.Z)(sf,Oe.STREAM_DRAW,"stream"),sf),uf=(cs={},(0,Nt.Z)(cs,Oe.BYTE,"int8"),(0,Nt.Z)(cs,Oe.UNSIGNED_INT,"int16"),(0,Nt.Z)(cs,Oe.INT,"int32"),(0,Nt.Z)(cs,Oe.UNSIGNED_BYTE,"uint8"),(0,Nt.Z)(cs,Oe.UNSIGNED_SHORT,"uint16"),(0,Nt.Z)(cs,Oe.UNSIGNED_INT,"uint32"),(0,Nt.Z)(cs,Oe.FLOAT,"float"),cs),wl=(Ro={},(0,Nt.Z)(Ro,Oe.ALPHA,"alpha"),(0,Nt.Z)(Ro,Oe.LUMINANCE,"luminance"),(0,Nt.Z)(Ro,Oe.LUMINANCE_ALPHA,"luminance alpha"),(0,Nt.Z)(Ro,Oe.RGB,"rgb"),(0,Nt.Z)(Ro,Oe.RGBA,"rgba"),(0,Nt.Z)(Ro,Oe.RGBA4,"rgba4"),(0,Nt.Z)(Ro,Oe.RGB5_A1,"rgb5 a1"),(0,Nt.Z)(Ro,Oe.RGB565,"rgb565"),(0,Nt.Z)(Ro,Oe.DEPTH_COMPONENT,"depth"),(0,Nt.Z)(Ro,Oe.DEPTH_STENCIL,"depth stencil"),Ro),Dc=(Wf={},(0,Nt.Z)(Wf,Oe.DONT_CARE,"dont care"),(0,Nt.Z)(Wf,Oe.NICEST,"nice"),(0,Nt.Z)(Wf,Oe.FASTEST,"fast"),Wf),jf=(Is={},(0,Nt.Z)(Is,Oe.NEAREST,"nearest"),(0,Nt.Z)(Is,Oe.LINEAR,"linear"),(0,Nt.Z)(Is,Oe.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Nt.Z)(Is,Oe.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Nt.Z)(Is,Oe.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Nt.Z)(Is,Oe.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Is),ff=(Bo={},(0,Nt.Z)(Bo,Oe.REPEAT,"repeat"),(0,Nt.Z)(Bo,Oe.CLAMP_TO_EDGE,"clamp"),(0,Nt.Z)(Bo,Oe.MIRRORED_REPEAT,"mirror"),Bo),Sl=(Pc={},(0,Nt.Z)(Pc,Oe.NONE,"none"),(0,Nt.Z)(Pc,Oe.BROWSER_DEFAULT_WEBGL,"browser"),Pc),Ou=(ls={},(0,Nt.Z)(ls,Oe.NEVER,"never"),(0,Nt.Z)(ls,Oe.ALWAYS,"always"),(0,Nt.Z)(ls,Oe.LESS,"less"),(0,Nt.Z)(ls,Oe.LEQUAL,"lequal"),(0,Nt.Z)(ls,Oe.GREATER,"greater"),(0,Nt.Z)(ls,Oe.GEQUAL,"gequal"),(0,Nt.Z)(ls,Oe.EQUAL,"equal"),(0,Nt.Z)(ls,Oe.NOTEQUAL,"notequal"),ls),Xf=(Ws={},(0,Nt.Z)(Ws,Oe.FUNC_ADD,"add"),(0,Nt.Z)(Ws,Oe.MIN_EXT,"min"),(0,Nt.Z)(Ws,Oe.MAX_EXT,"max"),(0,Nt.Z)(Ws,Oe.FUNC_SUBTRACT,"subtract"),(0,Nt.Z)(Ws,Oe.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ws),ds=(Ua={},(0,Nt.Z)(Ua,Oe.ZERO,"zero"),(0,Nt.Z)(Ua,Oe.ONE,"one"),(0,Nt.Z)(Ua,Oe.SRC_COLOR,"src color"),(0,Nt.Z)(Ua,Oe.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Nt.Z)(Ua,Oe.SRC_ALPHA,"src alpha"),(0,Nt.Z)(Ua,Oe.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Nt.Z)(Ua,Oe.DST_COLOR,"dst color"),(0,Nt.Z)(Ua,Oe.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Nt.Z)(Ua,Oe.DST_ALPHA,"dst alpha"),(0,Nt.Z)(Ua,Oe.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Nt.Z)(Ua,Oe.CONSTANT_COLOR,"constant color"),(0,Nt.Z)(Ua,Oe.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Nt.Z)(Ua,Oe.CONSTANT_ALPHA,"constant alpha"),(0,Nt.Z)(Ua,Oe.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Nt.Z)(Ua,Oe.SRC_ALPHA_SATURATE,"src alpha saturate"),Ua),Yf=(hs={},(0,Nt.Z)(hs,Oe.NEVER,"never"),(0,Nt.Z)(hs,Oe.ALWAYS,"always"),(0,Nt.Z)(hs,Oe.LESS,"less"),(0,Nt.Z)(hs,Oe.LEQUAL,"lequal"),(0,Nt.Z)(hs,Oe.GREATER,"greater"),(0,Nt.Z)(hs,Oe.GEQUAL,"gequal"),(0,Nt.Z)(hs,Oe.EQUAL,"equal"),(0,Nt.Z)(hs,Oe.NOTEQUAL,"notequal"),hs),Jo=(Go={},(0,Nt.Z)(Go,Oe.ZERO,"zero"),(0,Nt.Z)(Go,Oe.KEEP,"keep"),(0,Nt.Z)(Go,Oe.REPLACE,"replace"),(0,Nt.Z)(Go,Oe.INVERT,"invert"),(0,Nt.Z)(Go,Oe.INCR,"increment"),(0,Nt.Z)(Go,Oe.DECR,"decrement"),(0,Nt.Z)(Go,Oe.INCR_WRAP,"increment wrap"),(0,Nt.Z)(Go,Oe.DECR_WRAP,"decrement wrap"),Go),cf=(Ps={},(0,Nt.Z)(Ps,Oe.FRONT,"front"),(0,Nt.Z)(Ps,Oe.BACK,"back"),Ps),Hf=function(){function _(nt,R){(0,z.Z)(this,_),this.buffer=void 0;var Y=R.data,Q=R.usage,Et=R.type;this.buffer=nt.buffer({data:Y,usage:Vf[Q||Oe.STATIC_DRAW],type:uf[Et||Oe.UNSIGNED_BYTE]})}return(0,k.Z)(_,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(R){var Y=R.data,Q=R.offset;this.buffer.subdata(Y,Q)}}]),_}(),$i=M(59194),Du=9007199254740991,Nu="[object Arguments]",Vs="[object Array]",fh="[object Boolean]",Zf="[object Date]",zh="[object Error]",ch="[object Function]",Wh="[object Map]",Lu="[object Number]",lh="[object Object]",hh="[object RegExp]",_l="[object Set]",Vh="[object String]",dh="[object WeakMap]",jh="[object ArrayBuffer]",Qa="[object DataView]",vh="[object Float32Array]",ku="[object Float64Array]",hu="[object Int8Array]",Ml="[object Int16Array]",ph="[object Int32Array]",Kf="[object Uint8Array]",gh="[object Uint8ClampedArray]",ho="[object Uint16Array]",du="[object Uint32Array]",ii={};ii[vh]=ii[ku]=ii[hu]=ii[Ml]=ii[ph]=ii[Kf]=ii[gh]=ii[ho]=ii[du]=!0,ii[Nu]=ii[Vs]=ii[jh]=ii[fh]=ii[Qa]=ii[Zf]=ii[zh]=ii[ch]=ii[Wh]=ii[Lu]=ii[lh]=ii[hh]=ii[_l]=ii[Vh]=ii[dh]=!1;function no(_){return function(nt){return _(nt)}}var Nc=Object.prototype,Xh=Nc.toString;function Cl(_){return yh(_)&&Yh(_.length)&&!!ii[Xh.call(_)]}function Yh(_){return typeof _=="number"&&_>-1&&_%1===0&&_<=Du}function yh(_){return!!_&&(0,Dt.Z)(_)==="object"}var Lc=Cl;function Al(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function Tl(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Al(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Al(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var Os=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Il=0,lf=!1,kc=function(){function _(nt,R){var Y=this;(0,z.Z)(this,_),this.reGl=nt,this.context=R,this.entity=g(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Q={};this.context.uniforms.forEach(function(Ie){var We=Ie.name,pr=Ie.type,Tr=Ie.data,Br=Ie.isReferer,Ir=Ie.storageClass;if(Ir===is.StorageBuffer){if(Br)Y.textureCache[We]={data:void 0},Q["".concat(We,"Size")]=function(){return Tr.compiledBundle.context.output.textureSize};else{Y.textureCache[We]=Y.calcDataTexture(We,pr,Tr);var Dr=Y.textureCache[We],en=Dr.textureWidth,Sn=Dr.isOutput;Q["".concat(We,"Size")]=[en,en],Sn&&(Y.outputTextureName=We,Y.context.needPingpong&&(Y.outputTextureName="".concat(We,"Output"),Y.textureCache[Y.outputTextureName]=Y.calcDataTexture(We,pr,Tr)))}Q[We]=function(){return lf&&console.log("[".concat(Y.entity,"]: ").concat(We," ").concat(Y.textureCache[We].id)),Y.textureCache[We].texture}}else if(Ir===is.Uniform){if(Tr&&(Array.isArray(Tr)||Lc(Tr))&&Tr.length>16)throw new Error("invalid data type ".concat(pr));Q[We]=function(){return Ie.data}}});var Et=this.getOuputDataTexture(),Gt=Et.textureWidth,ee=Et.texelCount;Q.u_OutputTextureSize=[Gt,Gt],Q.u_OutputTexelCount=ee,this.context.output.textureSize=[Gt,Gt];var ve={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Q,vert:Os,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(ve)}return(0,k.Z)(_,[{key:"run",value:function(){var R=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){R.computeCommand()}),lf&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q=this,Et,Gt,ee,ve,Ie,We,pr,Tr;return m().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Et=Q.reGl.read()}),!Et){Ir.next=6;break}if(Gt=this.getOuputDataTexture(),ee=Gt.originalDataLength,ve=Gt.elementsPerTexel,Ie=Gt.typedArrayConstructor,We=Ie===void 0?Float32Array:Ie,pr=[],ve!==4)for(Tr=0;Tr<Et.length;Tr+=4)ve===1?pr.push(Et[Tr]):ve===2?pr.push(Et[Tr],Et[Tr+1]):pr.push(Et[Tr],Et[Tr+1],Et[Tr+2]);else pr=Et;return Ir.abrupt("return",new We(pr.slice(0,ee)));case 6:return Ir.abrupt("return",new Float32Array);case 7:case"end":return Ir.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"confirmInput",value:function(R,Y){var Q;this.entity===R.entity?(this.dynamicPingpong=!0,Q=this):Q=R,this.textureCache[Y].id=Q.getOuputDataTexture().id,this.textureCache[Y].texture=Q.getOuputDataTexture().texture,lf&&console.log("[".concat(this.entity,"]: confirm input ").concat(Y," from model ").concat(Q.entity,", ").concat(Q.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(R,Y){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Et=this.context.uniforms.find(function(Ie){var We=Ie.name;return We===R});if(Et){var Gt=this.calcDataTexture(R,Et.type,Y),ee=Gt.texture,ve=Gt.data;this.textureCache[R].data=ve,this.textureCache[R].texture=ee}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var R=this.context.output.name;this.textureCache[R].id=this.getOuputDataTexture().id,this.textureCache[R].texture=this.getOuputDataTexture().texture}var Y=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Y,lf&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var R=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=R}},{key:"cloneDataTexture",value:function(R){var Y=R.data,Q=R.textureWidth;return Tl(Tl({},R),{},{id:Il++,texture:this.reGl.texture({width:Q,height:Q,data:Y,type:"float"})})}},{key:"calcDataTexture",value:function(R,Y,Q){var Et=1;Y===iu.Vector4FloatArray&&(Et=4);for(var Gt=[],ee=0;ee<Q.length;ee+=Et)Et===1?Gt.push(Q[ee],0,0,0):Et===2?Gt.push(Q[ee],Q[ee+1],0,0):Et===3?Gt.push(Q[ee],Q[ee+1],Q[ee+2],0):Et===4&&Gt.push(Q[ee],Q[ee+1],Q[ee+2],Q[ee+3]);var ve=Q.length,Ie=Math.ceil(ve/Et),We=Math.ceil(Math.sqrt(Ie)),pr=We*We;Ie<pr&&Gt.push.apply(Gt,(0,$i.Z)(new Array((pr-Ie)*4).fill(0)));var Tr=this.reGl.texture({width:We,height:We,data:Gt,type:"float"});return{id:Il++,data:Gt,originalDataLength:ve,typedArrayConstructor:Lc(Q)?Q.constructor:void 0,textureWidth:We,texture:Tr,texelCount:Ie,elementsPerTexel:Et,isOutput:R===this.context.output.name}}}]),_}(),Ru=function(){function _(nt,R){(0,z.Z)(this,_),this.elements=void 0;var Y=R.data,Q=R.usage,Et=R.type,Gt=R.count;this.elements=nt.elements({data:Y,usage:Vf[Q||Oe.STATIC_DRAW],type:uf[Et||Oe.UNSIGNED_BYTE],count:Gt})}return(0,k.Z)(_,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(R){var Y=R.data;this.elements.subdata(Y)}},{key:"destroy",value:function(){this.elements.destroy()}}]),_}(),$f=function(){function _(nt,R){(0,z.Z)(this,_),this.framebuffer=void 0;var Y=R.width,Q=R.height,Et=R.color,Gt=R.colors,ee=R.depth,ve=R.stencil,Ie={width:Y,height:Q};Array.isArray(Gt)&&(Ie.colors=Gt.map(function(We){return We.get()})),Et&&typeof Et!="boolean"&&(Ie.color=Et.get()),this.framebuffer=nt.framebuffer(Ie)}return(0,k.Z)(_,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(R){var Y=R.width,Q=R.height;this.framebuffer.resize(Y,Q)}}]),_}();function io(_){var nt=(0,Dt.Z)(_);return _!=null&&(nt==="object"||nt==="function")}function js(_){var nt={};return Object.keys(_).forEach(function(R){Xs(R,_[R],nt,"")}),nt}function Xs(_,nt,R,Y){if(nt===null||typeof nt=="number"||typeof nt=="boolean"||Array.isArray(nt)&&typeof nt[0]=="number"||Lc(nt)||nt===""||nt.resize!==void 0){R["".concat(Y&&Y+".").concat(_)]=nt;return}io(nt)&&Object.keys(nt).forEach(function(Q){Xs(Q,nt[Q],R,"".concat(Y&&Y+".").concat(_))}),Array.isArray(nt)&&nt.forEach(function(Q,Et){Object.keys(Q).forEach(function(Gt){Xs(Gt,Q[Gt],R,"".concat(Y&&Y+".").concat(_,"[").concat(Et,"]"))})})}function Rc(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function Ct(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Rc(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Rc(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var fe=function(){function _(nt,R){(0,z.Z)(this,_),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=nt;var Y=R.vs,Q=R.fs,Et=R.defines,Gt=R.attributes,ee=R.uniforms,ve=R.primitive,Ie=R.count,We=R.elements,pr=R.depth,Tr=R.blend,Br=R.stencil,Ir=R.cull,Dr=R.instances,en=R.scissor,Sn=R.viewport,Dn={};ee&&(this.uniforms=js(ee),Object.keys(ee).forEach(function(xi){Dn[xi]=nt.prop(xi)}));var gn={};Object.keys(Gt).forEach(function(xi){gn[xi]=Gt[xi].get()});var ei=Et&&this.generateDefines(Et)||"",In={attributes:gn,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(ei,`
`).concat(Q),uniforms:Dn,vert:`
`.concat(ei,`
`).concat(Y),primitive:Oc[ve===void 0?Oe.TRIANGLES:ve]};Dr&&(In.instances=Dr),Ie&&(In.count=Ie),We&&(In.elements=We.get()),en&&(In.scissor=en),Sn&&(In.viewport=Sn),this.initDepthDrawParams({depth:pr},In),this.initBlendDrawParams({blend:Tr},In),this.initStencilDrawParams({stencil:Br},In),this.initCullDrawParams({cull:Ir},In),this.drawCommand=nt(In)}return(0,k.Z)(_,[{key:"addUniforms",value:function(R){this.uniforms=Ct(Ct({},this.uniforms),js(R))}},{key:"draw",value:function(R){var Y=Ct(Ct({},this.uniforms),js(R.uniforms||{})),Q={};Object.keys(Y).forEach(function(Et){var Gt=(0,Dt.Z)(Y[Et]);Gt==="boolean"||Gt==="number"||Array.isArray(Y[Et])||Y[Et].BYTES_PER_ELEMENT?Q[Et]=Y[Et]:Gt==="string"||(Q[Et]=Y[Et].get())}),this.drawCommand(Q)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(R,Y){var Q=R.depth;Q&&(Y.depth={enable:Q.enable===void 0?!0:!!Q.enable,mask:Q.mask===void 0?!0:!!Q.mask,func:Ou[Q.func||Oe.LESS],range:Q.range||[0,1]})}},{key:"initBlendDrawParams",value:function(R,Y){var Q=R.blend;if(Q){var Et=Q.enable,Gt=Q.func,ee=Q.equation,ve=Q.color,Ie=ve===void 0?[0,0,0,0]:ve;Y.blend={enable:!!Et,func:{srcRGB:ds[Gt&&Gt.srcRGB||Oe.SRC_ALPHA],srcAlpha:ds[Gt&&Gt.srcAlpha||Oe.SRC_ALPHA],dstRGB:ds[Gt&&Gt.dstRGB||Oe.ONE_MINUS_SRC_ALPHA],dstAlpha:ds[Gt&&Gt.dstAlpha||Oe.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Xf[ee&&ee.rgb||Oe.FUNC_ADD],alpha:Xf[ee&&ee.alpha||Oe.FUNC_ADD]},color:Ie}}}},{key:"initStencilDrawParams",value:function(R,Y){var Q=R.stencil;if(Q){var Et=Q.enable,Gt=Q.mask,ee=Gt===void 0?-1:Gt,ve=Q.func,Ie=ve===void 0?{cmp:Oe.ALWAYS,ref:0,mask:-1}:ve,We=Q.opFront,pr=We===void 0?{fail:Oe.KEEP,zfail:Oe.KEEP,zpass:Oe.KEEP}:We,Tr=Q.opBack,Br=Tr===void 0?{fail:Oe.KEEP,zfail:Oe.KEEP,zpass:Oe.KEEP}:Tr;Y.stencil={enable:!!Et,mask:ee,func:Ct(Ct({},Ie),{},{cmp:Yf[Ie.cmp]}),opFront:{fail:Jo[pr.fail],zfail:Jo[pr.zfail],zpass:Jo[pr.zpass]},opBack:{fail:Jo[Br.fail],zfail:Jo[Br.zfail],zpass:Jo[Br.zpass]}}}}},{key:"initCullDrawParams",value:function(R,Y){var Q=R.cull;if(Q){var Et=Q.enable,Gt=Q.face,ee=Gt===void 0?Oe.BACK:Gt;Y.cull={enable:!!Et,face:cf[ee]}}}},{key:"generateDefines",value:function(R){return Object.keys(R).map(function(Y){return"#define ".concat(Y," ").concat(Number(R[Y]))}).join(`
`)}}]),_}(),ze=function(){function _(nt,R){(0,z.Z)(this,_),this.texture=void 0,this.width=void 0,this.height=void 0;var Y=R.data,Q=R.type,Et=Q===void 0?Oe.UNSIGNED_BYTE:Q,Gt=R.width,ee=R.height,ve=R.flipY,Ie=ve===void 0?!1:ve,We=R.format,pr=We===void 0?Oe.RGBA:We,Tr=R.mipmap,Br=Tr===void 0?!1:Tr,Ir=R.wrapS,Dr=Ir===void 0?Oe.CLAMP_TO_EDGE:Ir,en=R.wrapT,Sn=en===void 0?Oe.CLAMP_TO_EDGE:en,Dn=R.aniso,gn=Dn===void 0?0:Dn,ei=R.alignment,In=ei===void 0?1:ei,xi=R.premultiplyAlpha,ai=xi===void 0?!1:xi,oi=R.mag,va=oi===void 0?Oe.NEAREST:oi,Yi=R.min,Ia=Yi===void 0?Oe.NEAREST:Yi,ra=R.colorSpace,Pa=ra===void 0?Oe.BROWSER_DEFAULT_WEBGL:ra;this.width=Gt,this.height=ee;var Jr={width:Gt,height:ee,type:uf[Et],format:wl[pr],wrapS:ff[Dr],wrapT:ff[Sn],mag:jf[va],min:jf[Ia],alignment:In,flipY:Ie,colorSpace:Sl[Pa],premultiplyAlpha:ai,aniso:gn};Y&&(Jr.data=Y),typeof Br=="number"?Jr.mipmap=Dc[Br]:typeof Br=="boolean"&&(Jr.mipmap=Br),this.texture=nt.texture(Jr)}return(0,k.Z)(_,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(R){var Y=R.width,Q=R.height;this.texture.resize(Y,Q),this.width=Y,this.height=Q}},{key:"destroy",value:function(){this.texture.destroy()}}]),_}(),wr,Rr,br,Ar=(wr=(0,O.b2)(),wr(Rr=(br=function(){function _(){var nt=this;(0,z.Z)(this,_),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var R=(0,y.Z)(m().mark(function Y(Q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!Q.uniforms){Gt.next=3;break}return Gt.next=3,Promise.all(Object.keys(Q.uniforms).map(function(){var ee=(0,y.Z)(m().mark(function ve(Ie){var We;return m().wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(!(Q.uniforms[Ie]&&Q.uniforms[Ie].load!==void 0)){Tr.next=5;break}return Tr.next=3,Q.uniforms[Ie].load();case 3:We=Tr.sent,Q.uniforms[Ie]=We;case 5:case"end":return Tr.stop()}},ve)}));return function(ve){return ee.apply(this,arguments)}}()));case 3:return Gt.abrupt("return",new fe(nt.gl,Q));case 4:case"end":return Gt.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.createAttribute=function(R){return new uh(nt.gl,R)},this.createBuffer=function(R){return new Hf(nt.gl,R)},this.createElements=function(R){return new Ru(nt.gl,R)},this.createTexture2D=function(R){return new ze(nt.gl,R)},this.createFramebuffer=function(R){return new $f(nt.gl,R)},this.useFramebuffer=function(R,Y){nt.gl({framebuffer:R?R.get():null})(Y)},this.createComputeModel=function(){var R=(0,y.Z)(m().mark(function Y(Q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Gt.abrupt("return",new kc(nt.gl,Q));case 1:case"end":return Gt.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.clear=function(R){var Y=R.color,Q=R.depth,Et=R.stencil,Gt=R.framebuffer,ee=Gt===void 0?null:Gt,ve={color:Y,depth:Q,stencil:Et};ve.framebuffer=ee===null?ee:ee.get(),nt.gl.clear(ve)},this.setScissor=function(R){nt.gl&&nt.gl._gl&&(R.enable&&R.box?(nt.gl._gl.enable(Oe.SCISSOR_TEST),nt.gl._gl.scissor(R.box.x,R.box.y,R.box.width,R.box.height)):nt.gl._gl.disable(Oe.SCISSOR_TEST),nt.gl._refresh())},this.viewport=function(R){var Y=R.x,Q=R.y,Et=R.width,Gt=R.height;nt.gl&&nt.gl._gl&&(nt.gl._gl.viewport(Y,Q,Et,Gt),nt.gl._refresh())},this.readPixels=function(R){var Y=R.framebuffer,Q=R.x,Et=R.y,Gt=R.width,ee=R.height,ve={x:Q,y:Et,width:Gt,height:ee};return Y&&(ve.framebuffer=Y.get()),nt.gl.read(ve)},this.getCanvas=function(){return nt.$canvas},this.getGLContext=function(){return nt.gl._gl},this.destroy=function(){nt.gl&&(nt.gl.destroy(),nt.inited=!1)}}return(0,k.Z)(_,[{key:"init",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!this.inited){Gt.next=2;break}return Gt.abrupt("return");case 2:return this.$canvas=Q.canvas,Gt.next=5,new Promise(function(ee,ve){Pu()({canvas:Q.canvas,attributes:{alpha:!0,antialias:Q.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(We,pr){(We||!pr)&&ve(We),ee(pr)}})});case 5:this.gl=Gt.sent,this.inited=!0;case 7:case"end":return Gt.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),_}(),br))||Rr);function jr(){return typeof window!="undefined"}function Hr(_,nt,R,Y){if(jr()){var Q=document.getElementsByTagName("head")[0],Et=document.createElement("script");Et.setAttribute("type","text/javascript"),Et.setAttribute("src",_),Y&&(Et.id=Y),Et.onload=function(){nt&&nt()},Et.onerror=function(Gt){R&&R("Unable to load script '".concat(_,"'"),Gt)},Q.appendChild(Et)}}function Kr(_,nt){return new Promise(function(R,Y){Hr(_,function(){R()},function(Q,Et){Y(Et)})})}var Vr;function Qr(){return d.apply(this,arguments)}function d(){return d=(0,y.Z)(m().mark(function _(){return m().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!Vr){R.next=2;break}return R.abrupt("return",Vr);case 2:return R.next=4,Kr("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Vr=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),R.abrupt("return",Vr);case 6:case"end":return R.stop()}},_)})),d.apply(this,arguments)}var L=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.options=R,this.attribute=void 0,this.buffer=void 0;var Y=R,Q=Y.buffer,Et=Y.offset,Gt=Y.stride,ee=Y.normalized,ve=Y.size,Ie=Y.divisor,We=Y.arrayStride,pr=Y.attributes,Tr=Y.stepMode;this.buffer=Q,this.attribute={buffer:Q.get(),offset:Et||0,stride:Gt||0,normalized:ee||!1,divisor:Ie||0,arrayStride:We||0,attributes:pr,stepMode:Tr||"vertex"},ve&&(this.attribute.size=ve)}return(0,k.Z)(_,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(R){this.buffer.subData(R)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),_}(),j=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.options=R,this.buffer=void 0;var Y=R,Q=Y.data,Et=Y.usage,Gt=Y.type;this.buffer=this.createBuffer(Q instanceof Array?new Float32Array(Q):Q,Et||an.FB.Vertex|an.FB.CopyDst)}return(0,k.Z)(_,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(R){var Y=R.data,Q=R.offset;this.setSubData(this.buffer,Q,Y instanceof Array?new Float32Array(Y):Y)}},{key:"createBuffer",value:function(R,Y){var Q=R.byteLength%4,Et={size:R.byteLength+Q,usage:Y},Gt=this.engine.device.createBuffer(Et);return this.setSubData(Gt,0,R),Gt}},{key:"setSubData",value:function(R,Y,Q){var Et=Ta?this.engine.device.getQueue():this.engine.device.defaultQueue;Et.writeBuffer(R,Y,Q)}}]),_}();function q(_){return typeof _=="number"}var ht=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.context=R,this.entity=g(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,k.Z)(_,[{key:"init",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q=this,Et,Gt,ee,ve,Ie,We,pr;return m().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return Br.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:Et=Br.sent,Gt=Et.computeStage,ee=this.context.uniforms.filter(function(Ir){return Ir.storageClass===is.StorageBuffer}),ve=this.context.uniforms.filter(function(Ir){return Ir.storageClass===is.Uniform}),Ie=ve.length?1:0,this.bindGroupEntries=[],Ie&&(We=0,pr=[],ve.forEach(function(Ir){if(q(Ir.data))Q.uniformGPUBufferLayout.push({name:Ir.name,offset:We}),We+=4,pr.push(Ir.data);else{var Dr,en=((Dr=Ir.data)===null||Dr===void 0?void 0:Dr.length)||1;en===3&&(en=4,Ir.data.push(0));var Sn=We/4%4;if(Sn>0){var Dn=4-Sn;if(en>1&&en<=Dn)en===2&&(Dn===3&&(We+=4,pr.push(0)),pr.push.apply(pr,(0,$i.Z)(Ir.data)),Q.uniformGPUBufferLayout.push({name:Ir.name,offset:We}));else{for(var gn=0;gn<Dn;gn++)We+=4,pr.push(0);pr.push.apply(pr,(0,$i.Z)(Ir.data)),Q.uniformGPUBufferLayout.push({name:Ir.name,offset:We})}}We+=4*en}}),this.uniformBuffer=new j(this.engine,{data:pr instanceof Array?new Float32Array(pr):pr,usage:an.FB.Uniform|an.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),ee.forEach(function(Ir){if(Ir.data!==null&&(Ir.type===iu.Vector4FloatArray||Ir.type===iu.FloatArray)){var Dr;Ir.name===Q.context.output.name?(Dr=new j(Q.engine,{data:isFinite(Number(Ir.data))?[Ir.data]:Ir.data,usage:an.FB.Storage|an.FB.CopyDst|an.FB.CopySrc}),Q.outputBuffer=Dr,Q.context.output={name:Ir.name,length:isFinite(Number(Ir.data))?1:Ir.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Dr.get()}):Ir.isReferer?Ir.data.model&&Ir.data.model.outputBuffer&&(Dr=Ir.data.model.outputBuffer):Dr=new j(Q.engine,{data:isFinite(Number(Ir.data))?[Ir.data]:Ir.data,usage:an.FB.Storage|an.FB.CopyDst|an.FB.CopySrc}),Q.vertexBuffers[Ir.name]=Dr,Q.bindGroupEntries.push({binding:Ie,resource:{name:Ir.name,refer:Dr?void 0:Ir.data,buffer:Dr?Dr.get():void 0}}),Ie++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Gt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Br.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"destroy",value:function(){var R=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Y){return R.vertexBuffers[Y].destroy()})}},{key:"readData",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q,Et,Gt,ee,ve,Ie,We,pr,Tr,Br;return m().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(Q=this.context.output,!Q){Dr.next=16;break}if(Et=Q.length,Gt=Q.typedArrayConstructor,ee=Q.gpuBuffer,!ee){Dr.next=16;break}return ve=Et*Gt.BYTES_PER_ELEMENT,Ie=this.engine.device.createBuffer({size:ve,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),We=this.engine.device.createCommandEncoder(),We.copyBufferToBuffer(ee,0,Ie,0,ve),pr=Ta?this.engine.device.getQueue():this.engine.device.defaultQueue,pr.submit([We.finish()]),Dr.next=12,Ie.mapAsync(an.gc.Read);case 12:return Tr=Ie.getMappedRange(),Br=new Gt(Tr.slice(0)),Ie.unmap(),Dr.abrupt("return",Br);case 16:return Dr.abrupt("return",new Float32Array);case 17:case"end":return Dr.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"run",value:function(){if(this.engine.currentComputePass){var R;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(R=this.engine.currentComputePass).dispatch.apply(R,(0,$i.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(R,Y){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Et=this.vertexBuffers[R];Et&&Et.subData({data:Y,offset:Q})}},{key:"updateUniform",value:function(R,Y){var Q=this.uniformGPUBufferLayout.find(function(Et){return Et.name===R});Q&&this.uniformBuffer.subData({data:Number.isFinite(Y)?new Float32Array([Y]):new Float32Array(Y),offset:Q.offset})}},{key:"confirmInput",value:function(R,Y){var Q=this.vertexBuffers[Y],Et=R.outputBuffer;if(Q&&Et&&Q!==Et){var Gt=this.engine.device.createCommandEncoder(),ee=R.context.output,ve=ee.length,Ie=ee.typedArrayConstructor,We=ve*Ie.BYTES_PER_ELEMENT;Gt.copyBufferToBuffer(Et.get(),0,Q.get(),0,We);var pr=Ta?this.engine.device.getQueue():this.engine.device.defaultQueue;pr.submit([Gt.finish()])}}},{key:"compileShaderToSpirV",value:function(R,Y,Q){return this.compileRawShaderToSpirV(Q+R,Y)}},{key:"compileRawShaderToSpirV",value:function(R,Y){return this.engine.glslang.compileGLSL(R,Y)}},{key:"compileComputePipelineStageDescriptor",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){var Et,Gt;return m().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(Et=Q,Gt=`#version 450
`,this.engine.options.useWGSL){ve.next=6;break}return ve.next=5,this.compileShaderToSpirV(Q,"compute",Gt);case 5:Et=ve.sent;case 6:return ve.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Et,isWHLSL:Ta}),entryPoint:"main"}});case 7:case"end":return ve.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()}]),_}(),gt=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.options=R,this.indexCount=void 0,this.buffer=void 0;var Y=R,Q=Y.data,Et=Y.usage,Gt=Y.type,ee=Y.count;this.indexCount=ee||0,this.buffer=new j(nt,{data:Q instanceof Array?new Uint16Array(Q):Q,usage:an.FB.Index|an.FB.CopyDst})}return(0,k.Z)(_,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(R){this.buffer.subData(R)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),_}(),_t=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.options=R,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var Y=R,Q=Y.width,Et=Y.height,Gt=Y.color,ee=Y.colors,ve=Y.depth,Ie=Y.stencil;Gt&&(this.colorTexture=Gt),ve&&(this.depthTexture=ve)}return(0,k.Z)(_,[{key:"get",value:function(){var R,Y;return{color:(R=this.colorTexture)===null||R===void 0?void 0:R.get(),depth:(Y=this.depthTexture)===null||Y===void 0?void 0:Y.get()}}},{key:"destroy",value:function(){var R,Y;(R=this.colorTexture)===null||R===void 0||R.destroy(),(Y=this.depthTexture)===null||Y===void 0||Y.destroy()}},{key:"resize",value:function(R){var Y=R.width,Q=R.height;if(Y!==this.width||Q!==this.height){var Et,Gt;(Et=this.colorTexture)===null||Et===void 0||Et.resize({width:Y,height:Q}),(Gt=this.depthTexture)===null||Gt===void 0||Gt.resize({width:Y,height:Q})}this.width=Y,this.height=Q}}]),_}(),It,Ut,Jt,ue,ae,Ne,er,Pr=(It={},(0,Nt.Z)(It,Oe.POINTS,an.YV.PointList),(0,Nt.Z)(It,Oe.LINES,an.YV.LineList),(0,Nt.Z)(It,Oe.LINE_LOOP,an.YV.LineList),(0,Nt.Z)(It,Oe.LINE_STRIP,an.YV.LineStrip),(0,Nt.Z)(It,Oe.TRIANGLES,an.YV.TriangleList),(0,Nt.Z)(It,Oe.TRIANGLE_FAN,an.YV.TriangleList),(0,Nt.Z)(It,Oe.TRIANGLE_STRIP,an.YV.TriangleStrip),It),ur=(Ut={},(0,Nt.Z)(Ut,Oe.NEVER,an.wb.Never),(0,Nt.Z)(Ut,Oe.ALWAYS,an.wb.Always),(0,Nt.Z)(Ut,Oe.LESS,an.wb.Less),(0,Nt.Z)(Ut,Oe.LEQUAL,an.wb.LessEqual),(0,Nt.Z)(Ut,Oe.GREATER,an.wb.Greater),(0,Nt.Z)(Ut,Oe.GEQUAL,an.wb.GreaterEqual),(0,Nt.Z)(Ut,Oe.EQUAL,an.wb.Equal),(0,Nt.Z)(Ut,Oe.NOTEQUAL,an.wb.NotEqual),Ut),hr=(Jt={},(0,Nt.Z)(Jt,Oe.FUNC_ADD,an.db.Add),(0,Nt.Z)(Jt,Oe.MIN_EXT,an.db.Min),(0,Nt.Z)(Jt,Oe.MAX_EXT,an.db.Max),(0,Nt.Z)(Jt,Oe.FUNC_SUBTRACT,an.db.Subtract),(0,Nt.Z)(Jt,Oe.FUNC_REVERSE_SUBTRACT,an.db.ReverseSubtract),Jt),fr=(ue={},(0,Nt.Z)(ue,Oe.ZERO,an.zi.Zero),(0,Nt.Z)(ue,Oe.ONE,an.zi.One),(0,Nt.Z)(ue,Oe.SRC_COLOR,an.zi.SrcColor),(0,Nt.Z)(ue,Oe.ONE_MINUS_SRC_COLOR,an.zi.OneMinusSrcColor),(0,Nt.Z)(ue,Oe.SRC_ALPHA,an.zi.SrcAlpha),(0,Nt.Z)(ue,Oe.ONE_MINUS_SRC_ALPHA,an.zi.OneMinusSrcAlpha),(0,Nt.Z)(ue,Oe.DST_COLOR,an.zi.DstColor),(0,Nt.Z)(ue,Oe.ONE_MINUS_DST_COLOR,an.zi.OneMinusDstColor),(0,Nt.Z)(ue,Oe.DST_ALPHA,an.zi.DstAlpha),(0,Nt.Z)(ue,Oe.ONE_MINUS_DST_ALPHA,an.zi.OneMinusDstAlpha),(0,Nt.Z)(ue,Oe.CONSTANT_COLOR,an.zi.BlendColor),(0,Nt.Z)(ue,Oe.ONE_MINUS_CONSTANT_COLOR,an.zi.OneMinusBlendColor),(0,Nt.Z)(ue,Oe.SRC_ALPHA_SATURATE,an.zi.SrcAlphaSaturated),ue),Xr=(ae={},(0,Nt.Z)(ae,Oe.ALPHA,"r8unorm"),(0,Nt.Z)(ae,Oe.RGBA,"rgba8unorm"),(0,Nt.Z)(ae,Oe.DEPTH_COMPONENT,"depth32float"),(0,Nt.Z)(ae,Oe.DEPTH_STENCIL,"depth24plus-stencil8"),ae),fn=(Ne={},(0,Nt.Z)(Ne,Oe.NEAREST,"nearest"),(0,Nt.Z)(Ne,Oe.LINEAR,"linear"),Ne),tn=(er={},(0,Nt.Z)(er,Oe.REPEAT,"repeat"),(0,Nt.Z)(er,Oe.CLAMP_TO_EDGE,"clamp-to-edge"),(0,Nt.Z)(er,Oe.MIRRORED_REPEAT,"mirror-repeat"),er);function Tn(_){var nt=_.cull;if(!nt||!nt.enable)return an.Wf.None;if(nt.face)return nt.face===Oe.FRONT?an.Wf.Front:an.Wf.Back}function wn(_){var nt=_.depth,R=_.stencil,Y={compare:an.wb.Always,depthFailOp:an.xS.Keep,failOp:an.xS.Keep,passOp:an.xS.Keep};return{depthWriteEnabled:nt&&nt.enable,depthCompare:ur[(nt==null?void 0:nt.func)||Oe.ALWAYS],format:an.EV.Depth24PlusStencil8,stencilFront:Y,stencilBack:Y,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Rn(_,nt){var R=_.blend;return[{format:nt,alphaBlend:{srcFactor:fr[R&&R.func&&R.func.srcAlpha||Oe.ONE],dstFactor:fr[R&&R.func&&R.func.dstAlpha||Oe.ZERO],operation:hr[R&&R.equation&&R.equation.alpha||Oe.FUNC_ADD]},colorBlend:{srcFactor:fr[R&&R.func&&R.func.srcRGB||Oe.ONE],dstFactor:fr[R&&R.func&&R.func.dstRGB||Oe.ZERO],operation:hr[R&&R.equation&&R.equation.rgb||Oe.FUNC_ADD]},writeMask:an.Yw.All}]}function Kn(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function Fn(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Kn(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Kn(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}function Vi(_){for(var nt=0,R=arguments.length,Y=new Array(R>1?R-1:0),Q=1;Q<R;Q++)Y[Q-1]=arguments[Q];for(var Et=0,Gt=Y;Et<Gt.length;Et++){var ee=Gt[Et];nt+=ee.length}for(var ve=new _(nt),Ie=0,We=0,pr=Y;We<pr.length;We++){var Tr=pr[We];ve.set(Tr,Ie),Ie+=Tr.length}return ve}var Qn=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.options=R,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,k.Z)(_,[{key:"init",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q=this,Et,Gt,ee,ve,Ie,We,pr,Tr,Br,Ir,Dr,en,Sn,Dn,gn,ei,In,xi;return m().wrap(function(oi){for(;;)switch(oi.prev=oi.next){case 0:return Et=this.options,Gt=Et.vs,ee=Et.fs,ve=Et.attributes,Ie=Et.uniforms,We=Et.primitive,pr=Et.count,Tr=Et.elements,Br=Et.depth,Ir=Et.blend,Dr=Et.stencil,en=Et.cull,Sn=Et.instances,oi.next=3,this.compilePipelineStageDescriptor(Gt,ee,null);case 3:Dn=oi.sent,gn=Dn.vertexStage,ei=Dn.fragmentStage,Ie&&this.buildUniformBindGroup(Ie),Tr&&(this.indexBuffer=Tr.get(),this.indexCount=Tr.indexCount),In={vertexBuffers:Object.keys(ve).map(function(va,Yi){var Ia=ve[va],ra=Ia.get(),Pa=ra.arrayStride,Jr=ra.stepMode,Ys=ra.attributes;return Q.attributeCache[va]=Ia,{arrayStride:Pa,stepMode:Jr,attributes:Ys}})},xi={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Pr[We||Oe.TRIANGLES],rasterizationState:Fn(Fn({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Tn({cull:en})}),depthStencilState:wn({depth:Br,stencil:Dr}),colorStates:Rn({blend:Ir},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:gn,fragmentStage:ei,vertexState:In},this.renderPipeline=this.engine.device.createRenderPipeline(xi);case 11:case"end":return oi.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"addUniforms",value:function(R){this.uniforms=Fn(Fn({},this.uniforms),js(R))}},{key:"draw",value:function(R){var Y=this,Q=this.engine.getCurrentRenderPass(),Et=Fn(Fn({},this.uniforms),js(R.uniforms||{})),Gt=[];Object.keys(Et).forEach(function(ee){var ve=(0,Dt.Z)(Et[ee]);if(ve==="boolean"||ve==="number"||Array.isArray(Et[ee])||Et[ee].BYTES_PER_ELEMENT){var Ie,We=(Ie=Y.uniformGPUBufferLayout.find(function(Sn){var Dn=Sn.name;return Dn===ee}))===null||Ie===void 0?void 0:Ie.offset;We!==null&&Y.uniformBuffer.subData({data:Et[ee],offset:We})}else{var pr,Tr=(pr=Y.uniformGPUBufferLayout.find(function(Sn){var Dn=Sn.name;return Dn===ee}))===null||pr===void 0?void 0:pr.offset;if(Tr!==null){var Br=Et[ee].get(),Ir=Br.color||Br,Dr=Ir.texture,en=Ir.sampler;en&&(Gt.push({binding:Tr,resource:en}),Tr++),Gt.push({binding:Tr,resource:Dr.createView()})}}}),this.uniformBuffer&&(Gt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Gt}),this.renderPipeline&&Q.setPipeline(this.renderPipeline),Q.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&Q.setIndexBuffer(this.indexBuffer.get(),an.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(ee,ve){Q.setVertexBuffer(0+ve,Y.attributeCache[ee].get().buffer,0)}),this.indexBuffer?Q.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):Q.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q,Et,Gt){var ee,ve,Ie;return m().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(ee=`#version 450
`,ve=Q,Ie=Et,this.engine.options.useWGSL){pr.next=10;break}return pr.next=6,this.compileShaderToSpirV(Q,"vertex",ee);case 6:return ve=pr.sent,pr.next=9,this.compileShaderToSpirV(Et,"fragment",ee);case 9:Ie=pr.sent;case 10:return pr.abrupt("return",this.createPipelineStageDescriptor(ve,Ie));case 11:case"end":return pr.stop()}},Y,this)}));function R(Y,Q,Et){return nt.apply(this,arguments)}return R}()},{key:"compileShaderToSpirV",value:function(R,Y,Q){return this.compileRawShaderToSpirV(Q+R,Y)}},{key:"compileRawShaderToSpirV",value:function(R,Y){return this.engine.glslang.compileGLSL(R,Y)}},{key:"createPipelineStageDescriptor",value:function(R,Y){return{vertexStage:{module:this.engine.device.createShaderModule({code:R,isWHLSL:Ta}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:Y,isWHLSL:Ta}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:an.zX.CCW,cullMode:an.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(R){var Y=this,Q=0,Et=Vi.apply(void 0,[Float32Array].concat((0,$i.Z)(Object.keys(R).map(function(ve){return R[ve]?(Y.uniformGPUBufferLayout.push({name:ve,offset:Q}),Q+=(R[ve].length||1)*4,R[ve]):[]})))),Gt=[],ee=!1;Et.length&&(ee=!0,Gt.push({binding:0,visibility:an.$X.Fragment|an.$X.Vertex,type:an.$l.UniformBuffer})),Object.keys(R).filter(function(ve){return R[ve]===null}).forEach(function(ve,Ie){Y.uniformGPUBufferLayout.push({name:ve,offset:Ie*2+(ee?1:0)}),Gt.push({binding:Ie*2+(ee?1:0),visibility:an.$X.Fragment,type:an.$l.Sampler},{binding:Ie*2+(ee?1:0)+1,visibility:an.$X.Fragment,type:an.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Gt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),ee&&(this.uniformBuffer=new j(this.engine,{data:Et instanceof Array?new Float32Array(Et):Et,usage:an.FB.Uniform|an.FB.CopyDst}))}}]),_}(),oa=function(){function _(nt,R){(0,z.Z)(this,_),this.engine=nt,this.options=R,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,k.Z)(_,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(R){var Y=R.width,Q=R.height;(Y!==this.width||Q!==this.height)&&(this.destroy(),this.createTexture()),this.width=Y,this.height=Q}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var R=this.options,Y=R.data,Q=R.type,Et=Q===void 0?Oe.UNSIGNED_BYTE:Q,Gt=R.width,ee=R.height,ve=R.flipY,Ie=ve===void 0?!1:ve,We=R.format,pr=We===void 0?Oe.RGBA:We,Tr=R.mipmap,Br=Tr===void 0?!1:Tr,Ir=R.wrapS,Dr=Ir===void 0?Oe.CLAMP_TO_EDGE:Ir,en=R.wrapT,Sn=en===void 0?Oe.CLAMP_TO_EDGE:en,Dn=R.aniso,gn=Dn===void 0?0:Dn,ei=R.alignment,In=ei===void 0?1:ei,xi=R.premultiplyAlpha,ai=xi===void 0?!1:xi,oi=R.mag,va=oi===void 0?Oe.NEAREST:oi,Yi=R.min,Ia=Yi===void 0?Oe.NEAREST:Yi,ra=R.colorSpace,Pa=ra===void 0?Oe.BROWSER_DEFAULT_WEBGL:ra,Jr=R.usage;this.width=Gt,this.height=ee,this.texture=this.engine.device.createTexture({size:[Gt,ee,1],mipLevelCount:1,sampleCount:1,dimension:an.kd.E2d,format:Xr[pr],usage:Jr||an.v2.Sampled|an.v2.CopyDst}),(!Jr||Jr&an.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:tn[Dr],addressModeV:tn[Sn],addressModeW:tn[Dr],magFilter:fn[va],minFilter:fn[Ia],maxAnisotropy:gn}))}}]),_}(),Di,ui,Qi,sa=(Di=(0,O.b2)(),Di(ui=(Qi=function(){function _(){var nt=this;(0,z.Z)(this,_),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(R){var Y=R.framebuffer,Q=R.color,Et=R.depth,Gt=R.stencil;nt.options.supportCompute&&nt.startComputePass(),nt.currentRenderTarget?(nt.currentRenderPass&&nt.endRenderTargetRenderPass(),nt.startRenderTargetRenderPass(nt.currentRenderTarget,Q||null,!!Et,!!Gt)):(nt.mainColorAttachments[0].loadValue=Q||an.Ws.Load,nt.mainDepthAttachment.depthLoadValue=Et||an.Ws.Load,nt.mainDepthAttachment.stencilLoadValue=Gt?nt.clearStencilValue:an.Ws.Load,nt.mainRenderPass&&nt.endMainRenderPass(),nt.startMainRenderPass())},this.createModel=function(){var R=(0,y.Z)(m().mark(function Y(Q){var Et;return m().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Et=new Qn(nt,Q),ee.next=3,Et.init();case 3:return ee.abrupt("return",Et);case 4:case"end":return ee.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.createAttribute=function(R){return new L(nt,R)},this.createBuffer=function(R){return new j(nt,R)},this.createElements=function(R){return new gt(nt,R)},this.createTexture2D=function(R){return new oa(nt,R)},this.createFramebuffer=function(R){return new _t(nt,R)},this.useFramebuffer=function(R,Y){nt.currentRenderTarget&&nt.unbindFramebuffer(nt.currentRenderTarget),nt.currentRenderTarget=R,nt.currentRenderTargetViewDescriptor={dimension:an.p_.E2d,arrayLayerCount:1,aspect:an.H7.All},nt.currentRenderPass=null,Y()},this.createComputeModel=function(){var R=(0,y.Z)(m().mark(function Y(Q){var Et;return m().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Et=new ht(nt,Q),ee.next=3,Et.init();case 3:return ee.abrupt("return",Et);case 4:case"end":return ee.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.getCanvas=function(){return nt.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(R){var Y=R.x,Q=R.y,Et=R.width,Gt=R.height;if(!nt.currentRenderPass)nt.transientViewport={x:Y,y:Q,width:Et,height:Gt};else if(nt.transientViewport.x!==1/0){var ee=nt.getCurrentRenderPass();ee.setViewport(nt.transientViewport.x,nt.transientViewport.y,nt.transientViewport.width,nt.transientViewport.height,0,1)}else if(Y!==nt.cachedViewport.x||Q!==nt.cachedViewport.y||Et!==nt.cachedViewport.width||Gt!==nt.cachedViewport.height){nt.cachedViewport={x:Y,y:Q,width:Et,height:Gt};var ve=nt.getCurrentRenderPass();ve.setViewport(Y,Q,Et,Gt,0,1)}},this.readPixels=function(R){throw new Error("Method not implemented.")}}return(0,k.Z)(_,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var nt=(0,y.Z)(m().mark(function Y(Q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return this.canvas=Q.canvas,this.options=Q,this.useWGSL=!!Q.useWGSL,this.mainPassSampleCount=Q.antialiasing?this.defaultSampleCount:1,Gt.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return Gt.stop()}},Y,this)}));function R(Y){return nt.apply(this,arguments)}return R}()},{key:"setScissor",value:function(R){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(R){return R.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Ta?this.device.getQueue().submit(this.commandBuffers.filter(function(R){return R})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(R){return R}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q,Et;return m().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,Qr();case 2:return this.glslang=ee.sent,ee.next=5,(Q=navigator)===null||Q===void 0||(Et=Q.gpu)===null||Et===void 0?void 0:Et.requestAdapter();case 5:return this.adapter=ee.sent,ee.next=8,this.adapter.requestDevice();case 8:this.device=ee.sent;case 9:case"end":return ee.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Ta?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:an.v2.OutputAttachment|an.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var R={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:an.kd.E2d,format:an.EV.BGRA8Unorm,usage:an.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(R),this.mainColorAttachments=[{attachment:Ta?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:an.EG.Store}]}else this.mainColorAttachments=[{attachment:Ta?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:an.EG.Store}];var Y={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:an.kd.E2d,format:Ta?"depth32float-stencil8":an.EV.Depth24PlusStencil8,usage:an.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(Y),this.mainDepthAttachment={attachment:Ta?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:an.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:an.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Ta?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Ta?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(R,Y,Q){var Et,Gt,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,ve=(Et=R.get().color)===null||Et===void 0?void 0:Et.texture,Ie;ve&&(Ie=ve.createView(this.currentRenderTargetViewDescriptor));var We=(Gt=R.get().depth)===null||Gt===void 0?void 0:Gt.texture,pr;We&&(pr=We.createView());var Tr=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Ie,loadValue:Y!==null?Y:an.Ws.Load,storeOp:an.EG.Store}],depthStencilAttachment:We&&pr?{attachment:pr,depthLoadValue:Q?this.clearDepthValue:an.Ws.Load,depthStoreOp:an.EG.Store,stencilLoadValue:ee?this.clearStencilValue:an.Ws.Load,stencilStoreOp:an.EG.Store}:void 0});this.currentRenderPass=Tr,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(R){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),_}(),Qi))||ui),Sa,za;function _a(_){var nt=ni();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function ni(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Wa=4/64,Ii=1-Wa*2,Vn=(Sa=(0,O.b2)(),Sa(za=function(_){(0,X.Z)(R,_);var nt=_a(R);function R(){return(0,z.Z)(this,R),nt.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){var Q=this.config,Et=Q.widthSegments,Gt=Et===void 0?1:Et,ee=Q.heightSegments,ve=ee===void 0?1:ee,Ie=Q.depthSegments,We=Ie===void 0?1:Ie,pr=Q.halfExtents,Tr=pr===void 0?Rt.fromValues(.5,.5,.5):pr,Br=Gt,Ir=ve,Dr=We,en=(0,C.Z)(Tr,3),Sn=en[0],Dn=en[1],gn=en[2],ei=[Rt.fromValues(-Sn,-Dn,gn),Rt.fromValues(Sn,-Dn,gn),Rt.fromValues(Sn,Dn,gn),Rt.fromValues(-Sn,Dn,gn),Rt.fromValues(Sn,-Dn,-gn),Rt.fromValues(-Sn,-Dn,-gn),Rt.fromValues(-Sn,Dn,-gn),Rt.fromValues(Sn,Dn,-gn)],In=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],xi=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],ai={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},oi=[],va=[],Yi=[],Ia=[],ra=[],Pa=0,Jr=function(Ji,df,Gu){var Nl,Gc,Sh,_h;for(Sh=0;Sh<=df;Sh++)for(_h=0;_h<=Gu;_h++){var ep=Rt.create(),nv=Rt.create(),iv=Rt.create(),_d=Rt.create();Rt.lerp(ep,ei[In[Ji][0]],ei[In[Ji][1]],Sh/df),Rt.lerp(nv,ei[In[Ji][0]],ei[In[Ji][2]],_h/Gu),Rt.sub(iv,nv,ei[In[Ji][0]]),Rt.add(_d,ep,iv),Nl=Sh/df,Gc=_h/Gu,oi.push(_d[0],_d[1],_d[2]),va.push(xi[Ji][0],xi[Ji][1],xi[Ji][2]),Yi.push(Nl,Gc),Nl/=3,Gc/=3,Nl=Nl*Ii+Wa,Gc=Gc*Ii+Wa,Nl+=Ji%3/3,Gc+=Math.floor(Ji/3)/3,Ia.push(Nl,Gc),Sh<df&&_h<Gu&&(ra.push(Pa+Gu+1,Pa+1,Pa),ra.push(Pa+Gu+1,Pa+Gu+2,Pa+1)),Pa++}};Jr(ai.FRONT,Br,Ir),Jr(ai.BACK,Br,Ir),Jr(ai.TOP,Br,Dr),Jr(ai.BOTTOM,Br,Dr),Jr(ai.RIGHT,Dr,Ir),Jr(ai.LEFT,Dr,Ir);var Ys=sl(oi),tc=this.getComponent();tc.indices=Uint32Array.from(ra),tc.aabb=Ys,tc.vertexCount=Pa,tc.attributes=[{dirty:!0,name:"position",data:Float32Array.from(oi),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(va),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Yi),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),R}(Fs))||za);function ci(_,nt){if(!_&&!nt)throw new Error("Please specify valid arguments for parameters a and b.");if(!nt||nt.length===0)return _;if(!_||_.length===0)return nt;if(Object.prototype.toString.call(_)!==Object.prototype.toString.call(nt))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var R=new _.constructor(_.length+nt.length);return R.set(_),R.set(nt,_.length),R}var yi,ha;function vu(_){var nt=Qf();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Qf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var ke=(yi=(0,O.b2)(),yi(ha=function(_){(0,X.Z)(R,_);var nt=vu(R);function R(){return(0,z.Z)(this,R),nt.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){var Q=this.config.geometries,Et=Q===void 0?[]:Q,Gt=this.getComponent();Gt.aabb=new Ft;var ee=[],ve=[],Ie=0;Et.forEach(function(We){var pr=We.aabb,Tr=We.indices,Br=We.vertexCount,Ir=We.attributes;Gt.aabb.add(pr),Gt.vertexCount+=Br,Tr&&ve.push.apply(ve,(0,$i.Z)(Tr.map(function(Dr){return Dr+Ie}))),Ie+=Br,Ir.forEach(function(Dr,en){ee[en]?Dr.data&&(hc(Dr.data)?ee[en].push(Dr.data):$o(Dr.data)?ee[en].data=ci(ee[en].data,Dr.data):ee[en].data=ee[en].data.concat(Dr.data)):(ee[en]=Dr,ee[en].dirty=!0)})}),Gt.attributes=ee,Gt.indices=Uint32Array.from(ve),Gt.dirty=!0}}]),R}(Fs))||ha),Sr,xr;function En(_){var nt=si();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function si(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Se=(Sr=(0,O.b2)(),Sr(xr=function(_){(0,X.Z)(R,_);var nt=En(R);function R(){return(0,z.Z)(this,R),nt.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){for(var Q=this.config,Et=Q.halfExtents,Gt=Et===void 0?[.5,.5]:Et,ee=Q.widthSegments,ve=ee===void 0?5:ee,Ie=Q.lengthSegments,We=Ie===void 0?5:Ie,pr=[],Tr=[],Br=[],Ir=[],Dr=0,en=0;en<=ve;en++)for(var Sn=0;Sn<=We;Sn++){var Dn=-Gt[0]+2*Gt[0]*en/ve,gn=0,ei=-(-Gt[1]+2*Gt[1]*Sn/We),In=en/ve,xi=Sn/We;pr.push(Dn,gn,ei),Tr.push(0,1,0),Br.push(In,xi),en<ve&&Sn<We&&(Ir.push(Dr+We+1,Dr+1,Dr),Ir.push(Dr+We+1,Dr+We+2,Dr+1)),Dr++}var ai=sl(pr),oi=this.getComponent();oi.indices=Uint32Array.from(Ir),oi.aabb=ai,oi.vertexCount=Dr,oi.attributes=[{dirty:!0,name:"position",data:Float32Array.from(pr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Tr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Br),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),R}(Fs))||xr),oe,Ke;function dr(_){var nt=gr();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function gr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Qe=(oe=(0,O.b2)(),oe(Ke=function(_){(0,X.Z)(R,_);var nt=dr(R);function R(){return(0,z.Z)(this,R),nt.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){for(var Q=this.config,Et=Q.radius,Gt=Et===void 0?.5:Et,ee=Q.latitudeBands,ve=ee===void 0?16:ee,Ie=Q.longitudeBands,We=Ie===void 0?16:Ie,pr=[],Tr=[],Br=[],Ir=[],Dr=0;Dr<=ve;Dr++)for(var en=Dr*Math.PI/ve,Sn=Math.sin(en),Dn=Math.cos(en),gn=0;gn<=We;gn++){var ei=gn*2*Math.PI/We-Math.PI/2,In=Math.sin(ei),xi=Math.cos(ei),ai=xi*Sn,oi=Dn,va=In*Sn,Yi=1-gn/We,Ia=1-Dr/ve;pr.push(ai*Gt,oi*Gt,va*Gt),Tr.push(ai,oi,va),Br.push(Yi,Ia)}for(var ra=0;ra<ve;++ra)for(var Pa=0;Pa<We;++Pa){var Jr=ra*(We+1)+Pa,Ys=Jr+We+1;Ir.push(Jr+1,Ys,Jr),Ir.push(Jr+1,Ys+1,Ys)}var tc=sl(pr),Bc=this.getComponent();Bc.indices=Uint32Array.from(Ir),Bc.aabb=tc,Bc.vertexCount=pr.length/3,Bc.attributes=[{dirty:!0,name:"position",data:Float32Array.from(pr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Tr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Br),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),R}(Fs))||Ke),$e,ir,we,Ye,me,lr,mr,kr;function Ur(_){var nt=Or();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Or(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var qr=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,An=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,qn=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,Mn=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,jn=($e=(0,O.b2)(),ir=(0,O.f3)(b.RenderEngine),we=(0,O.f3)(b.ShaderModuleService),$e(Ye=(me=(kr=function(_){(0,X.Z)(R,_);var nt=Ur(R);function R(){var Y;(0,z.Z)(this,R);for(var Q=arguments.length,Et=new Array(Q),Gt=0;Gt<Q;Gt++)Et[Gt]=arguments[Gt];return Y=nt.call.apply(nt,[this].concat(Et)),x(Y,"engine",lr,(0,be.Z)(Y)),x(Y,"shaderModuleService",mr,(0,be.Z)(Y)),Y}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){var Q=this.getComponent(),Et=this.engine.supportWebGPU?Mn:An,Gt=this.engine.supportWebGPU?qn:qr;this.shaderModuleService.registerModule("material-basic",{vs:Et,fs:Gt});var ee=this.shaderModuleService.getModule("material-basic"),ve=ee.vs,Ie=ee.fs,We=ee.uniforms;Q.vertexShaderGLSL=ve,Q.fragmentShaderGLSL=Ie,Q.setUniform(We),this.config.map&&(Q.setDefines({USE_UV:1,USE_MAP:1}),Q.setUniform({map:this.config.map,uvTransform:nr.create()}))}}]),R}(cu),kr),lr=E(me.prototype,"engine",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=E(me.prototype,"shaderModuleService",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me))||Ye),$n,Ci,da,Fo,Jf,Uo,mh,vo,Hh,Id,Pd,Od;function Pp(_){var nt=Sv();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Sv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Op=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,Ag=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,Dp=($n=(0,O.b2)(),Ci=(0,O.f3)(b.Systems),da=(0,O.t6)(b.MaterialSystem),Fo=(0,O.f3)(b.Systems),Jf=(0,O.t6)(b.GeometrySystem),Uo=(0,O.f3)(b.ShaderModuleService),$n(mh=(vo=(Od=function(_){(0,X.Z)(R,_);var nt=Pp(R);function R(){var Y;(0,z.Z)(this,R);for(var Q=arguments.length,Et=new Array(Q),Gt=0;Gt<Q;Gt++)Et[Gt]=arguments[Gt];return Y=nt.call.apply(nt,[this].concat(Et)),x(Y,"materialSystem",Hh,(0,be.Z)(Y)),x(Y,"geometrySystem",Id,(0,be.Z)(Y)),x(Y,"shaderModuleService",Pd,(0,be.Z)(Y)),Y}return(0,k.Z)(R,[{key:"onAttributeChanged",value:function(Q){var Et=Q.name,Gt=Q.data,ee=this.getMeshComponent();ee&&ee.material&&(Et==="gridColor"?(ee.material.setUniform("u_GridColor",Gt),ee.material.setUniform("u_GridColor2",Gt)):Et==="gridSize"&&(ee.material.setUniform("u_GridSize",Gt),ee.material.setUniform("u_GridSize2",Gt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Ag,fs:Op});var Q=this.shaderModuleService.getModule("grid"),Et=Q.vs,Gt=Q.fs,ee=Q.uniforms,ve=this.materialSystem.createShaderMaterial({vertexShader:Et,fragmentShader:Gt});this.setMaterial(ve);var Ie=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Ie),ve.setCull({enable:!1,face:Oe.BACK}).setDepth({enable:!0,func:Oe.LESS}),ve.setUniform(ee),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Ie.setIndex([0,3,2,2,1,0]),Ie.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),R}(Qo),Od),Hh=E(vo.prototype,"materialSystem",[Ci,da],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id=E(vo.prototype,"geometrySystem",[Fo,Jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pd=E(vo.prototype,"shaderModuleService",[Uo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo))||mh),Pl=M(42850),Ol=M(8639);function fd(_,nt,R,Y,Q){Zh(nt,Y,-Q),Zh(nt,Y,Q),_.push(R),_.push(R)}function Zh(_,nt,R){_.push([[nt[0],nt[1]],R])}function Tg(_,nt,R){var Y=[0,0],Q=[0,0],Et=[0,0],Gt=[0,0],ee=-1,ve=!1,Ie=null,We=(0,Pl.create)(),pr=R||0,Tr=3,Br=[],Ir=[],Dr=[],en=[0,0];nt&&(_=_.slice(),_.push(_[0]));for(var Sn=_.length,Dn=1;Dn<Sn;Dn++){var gn=pr,ei=_[Dn-1],In=_[Dn],xi=Dn<_.length-1?_[Dn+1]:null;if(en.push(Dn/Sn,Dn/Sn),(0,Ol.o7)(Y,In,ei),Ie||(Ie=[0,0],(0,Ol.mJ)(Ie,Y)),ve||(ve=!0,fd(Ir,Br,ei,Ie,1)),Dr.push([gn+0,gn+1,gn+2]),!xi)(0,Ol.mJ)(Ie,Y),fd(Ir,Br,In,Ie,1),Dr.push(ee===1?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),pr+=2;else{(0,Ol.o7)(Q,xi,In);var ai=(0,Ol.x7)(Et,Gt,Y,Q,1),oi=(0,Pl.dot)(Et,Ie)<0?-1:1,va=ai>Tr;if(!isFinite(ai)){(0,Ol.mJ)(Ie,Y),fd(Ir,Br,In,Ie,1),Dr.push(ee===1?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),pr+=2,ee=oi;continue}va?(ai=Tr,en.push(Dn/Sn),Zh(Br,Ie,-oi),Ir.push(In),Zh(Br,Gt,ai*oi),Ir.push(In),Dr.push(ee!==-oi?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),Dr.push([gn+2,gn+3,gn+4]),(0,Ol.mJ)(We,Q),(0,Pl.copy)(Ie,We),Zh(Br,Ie,-oi),Ir.push(In),pr+=3):(fd(Ir,Br,In,Gt,ai),Dr.push(ee===1?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),oi=-1,(0,Pl.copy)(Ie,Gt),pr+=2),ee=oi}}return{normals:Br,attrIndex:Dr,attrPos:Ir,attrCounters:en}}var _v,cd,ld,Mv,Cv,Bu,Dd,Kh,Nd,Av,Tv,hd;function Iv(_){var nt=Np();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function Np(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Lp=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,Pv=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,kp=(_v=(0,O.b2)(),cd=(0,O.f3)(b.Systems),ld=(0,O.t6)(b.MaterialSystem),Mv=(0,O.f3)(b.Systems),Cv=(0,O.t6)(b.GeometrySystem),Bu=(0,O.f3)(b.ShaderModuleService),_v(Dd=(Kh=(hd=function(_){(0,X.Z)(R,_);var nt=Iv(R);function R(){var Y;(0,z.Z)(this,R);for(var Q=arguments.length,Et=new Array(Q),Gt=0;Gt<Q;Gt++)Et[Gt]=arguments[Gt];return Y=nt.call.apply(nt,[this].concat(Et)),x(Y,"materialSystem",Nd,(0,be.Z)(Y)),x(Y,"geometrySystem",Av,(0,be.Z)(Y)),x(Y,"shaderModuleService",Tv,(0,be.Z)(Y)),Y.vertexCount=void 0,Y}return(0,k.Z)(R,[{key:"onAttributeChanged",value:function(Q){var Et=Q.name,Gt=Q.data,ee=this.getMeshComponent();if(ee&&ee.material)switch(Et){case"dashArray":ee.material.setUniform("u_dash_array",Gt);break;case"dashOffset":ee.material.setUniform("u_dash_offset",Gt);break;case"dashRatio":ee.material.setUniform("u_dash_ratio",Gt);break;case"thickness":ee.material.setUniform("u_thickness",Gt);break;case"color":var ve=new Array(this.vertexCount).fill(void 0).map(function(){return Gt}).reduce(function(Ie,We){return[].concat((0,$i.Z)(Ie),(0,$i.Z)(We))},[]);ee.geometry.setAttribute("a_color",Float32Array.from(ve),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var Q=this;this.shaderModuleService.registerModule("line",{vs:Pv,fs:Lp});var Et=this.shaderModuleService.getModule("line"),Gt=Et.vs,ee=Et.fs,ve=Et.uniforms,Ie=this.materialSystem.createShaderMaterial({vertexShader:Gt,fragmentShader:ee}),We=Tg(this.config.points,!1),pr=We.normals,Tr=We.attrIndex,Br=We.attrPos,Ir=We.attrCounters,Dr=Br.length;this.vertexCount=Dr;var en=this.geometrySystem.createBufferGeometry({vertexCount:Dr});this.setMaterial(Ie),this.setGeometry(en),Ie.setCull({enable:!1,face:Oe.BACK}).setUniform(ve),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var Sn=[],Dn=[];pr.forEach(function(ei){var In=ei[0],xi=ei[1];Sn.push([In[0],In[1]]),Dn.push(xi)}),en.setIndex(Tr.reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[])),en.setAttribute("a_pos",Float32Array.from(Br.reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var gn=new Array(Dr).fill(void 0).map(function(){return(0,$i.Z)(Q.config.color)}).reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[]);en.setAttribute("a_color",Float32Array.from(gn),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),en.setAttribute("a_line_miter",Float32Array.from(Dn),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),en.setAttribute("a_line_normal",Float32Array.from(Sn.reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),en.setAttribute("a_counters",Float32Array.from(Ir),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),R}(Qo),hd),Nd=E(Kh.prototype,"materialSystem",[cd,ld],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Av=E(Kh.prototype,"geometrySystem",[Mv,Cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tv=E(Kh.prototype,"shaderModuleService",[Bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh))||Dd);function Ov(_){return[_+1&255,_+1>>8&255,_+1>>8>>8&255]}var Ld,kd,dd,Rd,Dv,vd,$h,Va,pd,gd,Rp,Nv;function Bd(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function yd(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Bd(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Bd(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}function hf(_){var nt=bh();return function(){var Y=(0,U.Z)(_),Q;if(nt){var Et=(0,U.Z)(this).constructor;Q=Reflect.construct(Y,arguments,Et)}else Q=Y.apply(this,arguments);return(0,W.Z)(this,Q)}}function bh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(_){return!1}}var Bp=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,Gp=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,Lv=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],Gd=(Ld=(0,O.b2)(),kd=(0,O.f3)(b.Systems),dd=(0,O.t6)(b.MaterialSystem),Rd=(0,O.f3)(b.Systems),Dv=(0,O.t6)(b.GeometrySystem),vd=(0,O.f3)(b.ShaderModuleService),Ld($h=(Va=(Nv=function(_){(0,X.Z)(R,_);var nt=hf(R);function R(){var Y;(0,z.Z)(this,R);for(var Q=arguments.length,Et=new Array(Q),Gt=0;Gt<Q;Gt++)Et[Gt]=arguments[Gt];return Y=nt.call.apply(nt,[this].concat(Et)),x(Y,"materialSystem",pd,(0,be.Z)(Y)),x(Y,"geometrySystem",gd,(0,be.Z)(Y)),x(Y,"shaderModuleService",Rp,(0,be.Z)(Y)),Y}return(0,k.Z)(R,[{key:"onAttributeChanged",value:function(Q){var Et=Q.name,Gt=Q.data,ee=this.getMeshComponent();ee&&ee.material&&(Et==="strokeWidth"?ee.material.setUniform("u_stroke_width",Gt):Et==="strokeColor"?ee.material.setUniform("u_stroke_color",Gt):Et==="strokeOpacity"?ee.material.setUniform("u_stroke_opacity",Gt):Et==="opacity"?ee.material.setUniform("u_opacity",Gt):Et==="blur"&&ee.material.setUniform("u_blur",Gt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Gp,fs:Bp});var Q=this.shaderModuleService.getModule("grid"),Et=Q.vs,Gt=Q.fs,ee=Q.uniforms,ve=this.materialSystem.createShaderMaterial({vertexShader:Et,fragmentShader:Gt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Oe.SRC_ALPHA,dstRGB:Oe.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});ve.setUniform(yd({u_device_pixel_ratio:window.devicePixelRatio},ee));var Ie=this.buildAttributes(),We=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Ie.instancedOffsets.length/2,vertexCount:6});We.setIndex([0,2,1,0,3,2]),We.setAttribute("position",Float32Array.from(Ie.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),We.setAttribute("offset",Float32Array.from(Ie.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),We.setAttribute("color",Float32Array.from(Ie.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),We.setAttribute("size",Float32Array.from(Ie.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),We.setAttribute("shape",Float32Array.from(Ie.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),We.setAttribute("a_PickingColor",Float32Array.from(Ie.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(ve),this.setGeometry(We)}},{key:"buildAttribute",value:function(Q,Et,Gt){var ee,ve,Ie,We;(ee=Et.instancedPickingColors).push.apply(ee,(0,$i.Z)(Ov(Q.id||Gt))),Et.instancedShapes.push(Lv.indexOf(Q.shape||"circle")),(ve=Et.instancedColors).push.apply(ve,(0,$i.Z)(Q.color||[1,0,0,1])),(Ie=Et.instancedOffsets).push.apply(Ie,(0,$i.Z)(Q.position||[0,0])),(We=Et.instancedSizes).push.apply(We,(0,$i.Z)(Q.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var Q=this,Et={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Gt,ee){Q.buildAttribute(Gt,Et,ee)}):this.buildAttribute(this.config,Et,0),Et}}]),R}(Qo),Nv),pd=E(Va.prototype,"materialSystem",[kd,dd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=E(Va.prototype,"geometrySystem",[Rd,Dv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=E(Va.prototype,"shaderModuleService",[vd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Va))||$h),kv,Rv,md,Fd,Ud,Eh,zd,Bv,Wd,Qh;function Jh(_,nt){var R;if(typeof Symbol=="undefined"||_[Symbol.iterator]==null){if(Array.isArray(_)||(R=Gv(_))||nt&&_&&typeof _.length=="number"){R&&(_=R);var Y=0,Q=function(){};return{s:Q,n:function(){return Y>=_.length?{done:!0}:{done:!1,value:_[Y++]}},e:function(Ie){throw Ie},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=_[Symbol.iterator]()},n:function(){var Ie=R.next();return Et=Ie.done,Ie},e:function(Ie){Gt=!0,ee=Ie},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function Gv(_,nt){if(_){if(typeof _=="string")return xh(_,nt);var R=Object.prototype.toString.call(_).slice(8,-1);if(R==="Object"&&_.constructor&&(R=_.constructor.name),R==="Map"||R==="Set")return Array.from(_);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return xh(_,nt)}}function xh(_,nt){(nt==null||nt>_.length)&&(nt=_.length);for(var R=0,Y=new Array(nt);R<nt;R++)Y[R]=_[R];return Y}var Fp=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,Fv=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,qf=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,Up=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,zp=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,Uv=(kv=(0,O.b2)(),Rv=(0,O.f3)(b.RenderEngine),md=(0,O.f3)(b.ShaderModuleService),Fd=(0,O.f3)(b.ConfigService),kv(Ud=(Eh=(Qh=function(){function _(){(0,z.Z)(this,_),this.container=void 0,x(this,"engine",zd,this),x(this,"shaderModule",Bv,this),x(this,"configService",Wd,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,k.Z)(_,[{key:"init",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q,Et,Gt,ee,ve;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:Up}),this.shaderModule.registerModule("uv.vert.main",{vs:zp}),this.shaderModule.registerModule("uv.frag.declaration",{fs:qf}),this.shaderModule.registerModule("map.frag.declaration",{fs:Fp}),this.shaderModule.registerModule("map.frag.main",{fs:Fv}),Q=this.container.getAll(b.Systems),Et=this.configService.get(),!Et.canvas){We.next=30;break}return We.next=11,this.engine.init({canvas:Et.canvas,swapChainFormat:an.EV.BGRA8Unorm,antialiasing:!1});case 11:Gt=Jh(Q),We.prev=12,Gt.s();case 14:if((ee=Gt.n()).done){We.next=21;break}if(ve=ee.value,!ve.initialize){We.next=19;break}return We.next=19,ve.initialize();case 19:We.next=14;break;case 21:We.next=26;break;case 23:We.prev=23,We.t0=We.catch(12),Gt.e(We.t0);case 26:return We.prev=26,Gt.f(),We.finish(26);case 29:this.inited=!0;case 30:case"end":return We.stop()}},Y,this,[[12,23,26,29]])}));function R(){return nt.apply(this,arguments)}return R}()},{key:"render",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q,Et,Gt,ee,ve,Ie,We,pr=arguments;return m().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:if(!(!this.inited||this.rendering)){Br.next=2;break}return Br.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(Ir){Ir()}),this.rendering=!0,this.engine.beginFrame(),Q=this.container.getAll(b.Systems),Et=pr.length,Gt=new Array(Et),ee=0;ee<Et;ee++)Gt[ee]=pr[ee];ve=Jh(Q),Br.prev=8,ve.s();case 10:if((Ie=ve.n()).done){Br.next=17;break}if(We=Ie.value,!We.execute){Br.next=15;break}return Br.next=15,We.execute(Gt);case 15:Br.next=10;break;case 17:Br.next=22;break;case 19:Br.prev=19,Br.t0=Br.catch(8),ve.e(Br.t0);case 22:return Br.prev=22,ve.f(),Br.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Br.stop()}},Y,this,[[8,19,22,25]])}));function R(){return nt.apply(this,arguments)}return R}()},{key:"clear",value:function(R){var Y=this;return this.inited?this.engine.clear(R):this.pendings.unshift(function(){Y.engine.clear(R),Y.pendings.shift()}),this}},{key:"setSize",value:function(R){var Y=R.width,Q=R.height,Et=this.engine.getCanvas();return this.size={width:Y,height:Q},Et.width=Y,Et.height=Q,this}},{key:"getSize",value:function(){return this.size}}]),_}(),Qh),zd=E(Eh.prototype,"engine",[Rv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bv=E(Eh.prototype,"shaderModule",[md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wd=E(Eh.prototype,"configService",[Fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eh))||Ud),zv,Wv,Vd,qh=(zv=(0,O.b2)(),zv(Wv=(Vd=function(){function _(){(0,z.Z)(this,_),this.entities=[]}return(0,k.Z)(_,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(R){return this.addEntity(R.getEntity()),this}},{key:"removeRenderable",value:function(R){return this.removeEntity(R.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(R){return this.entities.indexOf(R)===-1&&this.entities.push(R),this}},{key:"removeEntity",value:function(R){var Y=this.entities.indexOf(R);return this.entities.splice(Y,1),this}}]),_}(),Vd))||Wv),Vv,bd,Ed,jd=(Vv=(0,O.b2)(),Vv(bd=(Ed=function(){function _(){(0,z.Z)(this,_),this.cache={}}return(0,k.Z)(_,[{key:"get",value:function(R){return this.cache[R]}},{key:"set",value:function(R,Y){this.cache[R]=Y}}]),_}(),Ed))||bd),Xd,Yd,xd,Hd,wd,Zd,Kd,jv;function Xv(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function Yv(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Xv(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Xv(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var Hv=(Xd=(0,O.b2)(),Yd=(0,O.f3)(jd),xd=(0,O.f3)(b.RenderEngine),Xd(Hd=(wd=(jv=function(){function _(){(0,z.Z)(this,_),x(this,"textureCache",Zd,this),x(this,"engine",Kd,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,k.Z)(_,[{key:"setConfig",value:function(R){this.config=R}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q=this;return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!this.config.url){Gt.next=4;break}return Gt.abrupt("return",new Promise(function(ee,ve){var Ie=Q.textureCache.get(Q.config.url);if(Ie)ee(Ie);else{var We=new Image;We.crossOrigin="Anonymous",We.src=Q.config.url,We.onload=function(){var pr=Q.engine.createTexture2D(Yv(Yv({},Q.config),{},{data:We,width:We.width,height:We.height,flipY:!0}));Q.textureCache.set(Q.config.url,pr),Q.texture=pr,Q.loaded=!0,ee(pr)},We.onerror=function(){ve()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),Gt.abrupt("return",this.texture);case 7:case"end":return Gt.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()}]),_}(),jv),Zd=E(wd.prototype,"textureCache",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=E(wd.prototype,"engine",[xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wd))||Hd),$d,Zv,Kv,$v,Qd,Qv,Jd,Jv=($d=(0,O.b2)(),Zv=(0,O.f3)(b.Systems),Kv=(0,O.t6)(b.RendererSystem),$d($v=(Qd=(Jd=function(){function _(){(0,z.Z)(this,_),x(this,"rendererSystem",Qv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,k.Z)(_,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(R){return this.camera=R,this}},{key:"setScene",value:function(R){return this.scene=R,this}},{key:"setViewport",value:function(R){return this.viewport=R,this}},{key:"setClearColor",value:function(R){return this.clearColor=R,this}},{key:"pick",value:function(R){return this.rendererSystem.pick(R,this)}}]),_}(),Jd),Qv=E(Qd.prototype,"rendererSystem",[Zv,Kv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qd))||$v),qd,wh,qv,tv,ev,Sd;function Dl(_,nt){var R=Object.keys(_);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(_);nt&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(_,Q).enumerable})),R.push.apply(R,Y)}return R}function tp(_){for(var nt=1;nt<arguments.length;nt++){var R=arguments[nt]!=null?arguments[nt]:{};nt%2?Dl(Object(R),!0).forEach(function(Y){(0,Nt.Z)(_,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(R)):Dl(Object(R)).forEach(function(Y){Object.defineProperty(_,Y,Object.getOwnPropertyDescriptor(R,Y))})}return _}var rv=(qd=(0,O.b2)(),wh=(0,O.f3)(b.ConfigService),qd(qv=(tv=(Sd=function(){function _(){(0,z.Z)(this,_),x(this,"configService",ev,this),this.container=void 0}return(0,k.Z)(_,[{key:"getEngine",value:function(){var nt=(0,y.Z)(m().mark(function Y(){var Q,Et,Gt,ee;return m().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Q=this.container.get(b.RenderEngine),Et=this.configService.get(),Gt=Et.canvas,ee=Et.engineOptions,Ie.next=4,Q.init(tp({canvas:Gt||Bf(),swapChainFormat:an.EV.BGRA8Unorm,antialiasing:!1},ee));case 4:return Ie.abrupt("return",Q);case 5:case"end":return Ie.stop()}},Y,this)}));function R(){return nt.apply(this,arguments)}return R}()},{key:"getTransformComponent",value:function(R){var Y=this.container.get(b.TransformComponentManager);return Y.getComponentByEntity(R)}},{key:"getMeshComponent",value:function(R){var Y=this.container.get(b.MeshComponentManager);return Y.getComponentByEntity(R)}},{key:"setConfig",value:function(R){this.configService.set(R)}},{key:"setContainer",value:function(R){this.container=R}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return g()}},{key:"createScene",value:function(){return this.container.get(qh)}},{key:"createCamera",value:function(){return this.container.get(wu)}},{key:"createView",value:function(){return this.container.get(Jv)}},{key:"createRenderable",value:function(R,Y){var Q=R?this.container.getNamed(b.Renderable,R):this.container.get(Qo),Et=g();return Q.setConfig(Y||{}),Q.setEntity(Et),Q}},{key:"createGeometry",value:function(R,Y){var Q=this.container.getNamed(b.Geometry,R),Et=g();return Q.setConfig(Y||{}),Q.setEntity(Et),Q.getComponent()}},{key:"createMaterial",value:function(R,Y){var Q=this.container.getNamed(b.Material,R),Et=g();return Q.setConfig(Y||{}),Q.setEntity(Et,R),Q.getComponent()}},{key:"createTexture2D",value:function(R){var Y=this.container.get(Hv);return Y.setConfig(R),Y}},{key:"createBufferGeometry",value:function(R){var Y=this.container.getNamed(b.Systems,b.GeometrySystem);return Y.createBufferGeometry(R)}},{key:"createInstancedBufferGeometry",value:function(R){var Y=this.container.getNamed(b.Systems,b.GeometrySystem);return Y.createInstancedBufferGeometry(R)}},{key:"createShaderMaterial",value:function(R){var Y=this.container.getNamed(b.Systems,b.MaterialSystem);return Y.createShaderMaterial(R)}},{key:"createKernel",value:function(R){var Y=this.container.get(la);return typeof R=="string"?Y.setBundle(JSON.parse(R)):Y.setBundle(R),Y.init(),Y}},{key:"createRenderer",value:function(){var R=this.container.get(Uv);return R.container=this.container,R.init(),R}},{key:"destroy",value:function(){var R=this.container.getAll(b.Systems);R.forEach(function(Et){Et.tearDown&&Et.tearDown()});var Y=this.container.get(b.RenderEngine);Y.destroy();var Q=this.container.get(b.InteractorService);Q.destroy()}}],[{key:"create",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=Ql(),Q=navigator.gpu?sa:Ar;Y.isBound(b.RenderEngine)||Y.bind(b.RenderEngine).to(Q).inSingletonScope(),Y.bind(Uv).toSelf(),Y.bind(la).toSelf(),Y.bind(Qo).toSelf(),Y.bind(Jv).toSelf(),Y.bind(wu).toSelf(),Y.bind(qh).toSelf(),Y.bind(_).toSelf(),Y.bind(jd).toSelf(),Y.bind(Hv).toSelf(),Y.bind(b.Geometry).to(Vn).whenTargetNamed(Fs.BOX),Y.bind(b.Geometry).to(Qe).whenTargetNamed(Fs.SPHERE),Y.bind(b.Geometry).to(Se).whenTargetNamed(Fs.PLANE),Y.bind(b.Geometry).to(ke).whenTargetNamed(Fs.MERGED),Y.bind(b.Material).to(jn).whenTargetNamed(cu.BASIC),Y.bind(b.Renderable).to(Gd).whenTargetNamed(Qo.POINT),Y.bind(b.Renderable).to(kp).whenTargetNamed(Qo.LINE),Y.bind(b.Renderable).to(Dp).whenTargetNamed(Qo.GRID);var Et=Y.get(_);return Et.setContainer(Y),Et.setConfig(R),Et}}]),_}(),Sd),ev=E(tv.prototype,"configService",[wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tv))||qv)},91376:function(le,S,M){"use strict";M.d(S,{ZP:function(){return IS}});var x={};M.r(x),M.d(x,{GADDI:function(){return Pn},Stack:function(){return na},breadthFirstSearch:function(){return Ee},connectedComponent:function(){return wt},cosineSimilarity:function(){return at},default:function(){return Xa},depthFirstSearch:function(){return Ge},detectAllCycles:function(){return ce},detectAllDirectedCycle:function(){return Ve},detectAllUndirectedCycle:function(){return Je},detectCycle:function(){return Le},detectDirectedCycle:function(){return oo},dijkstra:function(){return vr},findAllPath:function(){return yr},findShortestPath:function(){return Ae},floydWarshall:function(){return zr},getAdjMatrix:function(){return qt},getDegree:function(){return tt},getInDegree:function(){return Ot},getNeighbors:function(){return Dt},getOutDegree:function(){return ct},iLouvain:function(){return G},kCore:function(){return ot},kMeans:function(){return Yt},labelPropagation:function(){return un},louvain:function(){return Lt},minimumSpanningTree:function(){return Er},nodesCosineSimilarity:function(){return te},pageRank:function(){return Ft}});var z={};M.r(z),M.d(z,{Line:function(){return Ka},applyMatrix:function(){return Bi},compare:function(){return gs},distance:function(){return ga},floydWarshall:function(){return Qs},fractionToLine:function(){return $a},getAdjMatrix:function(){return ms},getBBoxBoundLine:function(){return Ga},getCircleCenterByPoints:function(){return Po},getCircleIntersectByPoint:function(){return so},getDegree:function(){return Ha},getEllipseIntersectByPoint:function(){return ia},getLineIntersect:function(){return es},getPointsCenter:function(){return wo},getRectIntersectByPoint:function(){return Wn},intersectBBox:function(){return ya},invertMatrix:function(){return rs},isPointInPolygon:function(){return La},isPointsOverlap:function(){return fi},isPolygonsIntersect:function(){return xo},itemIntersectByLine:function(){return ka},lerp:function(){return ba},lerpArray:function(){return Mi},move:function(){return Ai},pointLineDistance:function(){return to},pointLineSquareDist:function(){return Xo},pointRectSquareDist:function(){return ma},rotate:function(){return bs},scale:function(){return Ya},scaleMatrix:function(){return ys},squareDist:function(){return qa},translate:function(){return Eo}});var k={};M.r(k),M.d(k,{cloneBesidesImg:function(){return bu},getAnimateCfgWithCallback:function(){return eu},getBBox:function(){return Wi},getComboBBox:function(){return _f},getLabelPosition:function(){return Fa},getLetterWidth:function(){return mu},getLoopCfgs:function(){return Ra},getTextSize:function(){return ic},plainCombosToTrees:function(){return wf},reconstructTree:function(){return Sf},shouldRefreshEdge:function(){return tu},traverseTree:function(){return wa},traverseTreeUp:function(){return ro},truncateLabelByLength:function(){return Yc}});var E={};M.r(E),M.d(E,{catmullRomToBezier:function(){return Xn},fillPath:function(){return Of},fillPathByDiff:function(){return Aa},formatPath:function(){return Zo},intersection:function(){return Jc},parsePathArray:function(){return sc},parsePathString:function(){return Eu},pathToAbsolute:function(){return Af},pathToCurve:function(){return oc},rectPath:function(){return $c}});var N={};M.r(N),M.d(N,{easeBack:function(){return $i},easeBackIn:function(){return cf},easeBackInOut:function(){return $i},easeBackOut:function(){return Hf},easeBounce:function(){return ds},easeBounceIn:function(){return Xf},easeBounceInOut:function(){return Yf},easeBounceOut:function(){return ds},easeCircle:function(){return Go},easeCircleIn:function(){return Ua},easeCircleInOut:function(){return Go},easeCircleOut:function(){return hs},easeCubic:function(){return Qo},easeCubicIn:function(){return Iu},easeCubicInOut:function(){return Qo},easeCubicOut:function(){return Tc},easeElastic:function(){return Zf},easeElasticIn:function(){return fh},easeElasticInOut:function(){return zh},easeElasticOut:function(){return Zf},easeExp:function(){return Ws},easeExpIn:function(){return Pc},easeExpInOut:function(){return Ws},easeExpOut:function(){return ls},easeLinear:function(){return Tu},easePoly:function(){return fs},easePolyIn:function(){return Pu},easePolyInOut:function(){return fs},easePolyOut:function(){return uh},easeQuad:function(){return Ac},easeQuadIn:function(){return ko},easeQuadInOut:function(){return Ac},easeQuadOut:function(){return Cc},easeSin:function(){return Is},easeSinIn:function(){return Ro},easeSinInOut:function(){return Is},easeSinOut:function(){return Wf}});var I={};M.r(I),M.d(I,{calculationItemsBBox:function(){return Dd},cloneEvent:function(){return Mv},formatPadding:function(){return ld},isNaN:function(){return Bu},isViewportChanged:function(){return Cv},processParallelEdges:function(){return Kh},uniqueId:function(){return cd}});var m={};M.r(m),M.d(m,{getClosedSpline:function(){return Ed},getControlPoint:function(){return qh},getSpline:function(){return Vd},getStarPath:function(){return wd},paddedHull:function(){return Hd},pathToPoints:function(){return bd},pointsToPolygon:function(){return Vv},roundedHull:function(){return xd}});var y={};M.r(y),M.d(y,{defaultSubjectColors:function(){return Sn}});var v={};M.r(v),M.d(v,{isForce:function(){return Dn}});var p={};M.r(p),M.d(p,{Base:function(){return ec},Circle:function(){return nm},Ellipse:function(){return am},Image:function(){return sm},Line:function(){return fm},Marker:function(){return hm},Path:function(){return $p},Polygon:function(){return xm},Polyline:function(){return Sm},Rect:function(){return Am},Text:function(){return Im}});var g={};M.r(g),M.d(g,{Base:function(){return pf},Circle:function(){return Bm},Dom:function(){return Fm},Ellipse:function(){return zm},Image:function(){return Vm},Line:function(){return Xm},Marker:function(){return Hm},Path:function(){return Km},Polygon:function(){return Qm},Polyline:function(){return qm},Rect:function(){return i1},Text:function(){return f1}});var T={};M.r(T),M.d(T,{getColorSetsBySubjectColors:function(){return G1},getColorsWithSubjectColor:function(){return tg},mixColor:function(){return zo}});var w={};M.r(w),M.d(w,{arrayToTextureData:function(){return Q1},attributesToTextureData:function(){return $1},buildTextureData:function(){return H1},buildTextureDataWithOneEdgeAttr:function(){return Z1},buildTextureDataWithTwoEdgeAttr:function(){return K1},proccessToFunc:function(){return Y1},radialLayout:function(){return J1}});var C={};M.r(C),M.d(C,{gpuDetector:function(){return f0}});var O={};M.r(O),M.d(O,{assign:function(){return Th},default:function(){return G0},defaultI18n:function(){return ug},format:function(){return R0},parse:function(){return B0},setGlobalDateI18n:function(){return T0},setGlobalDateMasks:function(){return k0}});var b=M(98725),l=M(76405),K={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,l.each)(r,function(n,i){e.on(i,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,l.each)(t,function(n,i){e.off(i,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},Z=function(){function a(){}return a.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,l.clone)(K);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,l.each)(u,function(c,h){f[h]=(0,l.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,a.types[e]=n},a.hasBehavior=function(e){return!!a.types[e]},a.getBehavior=function(e){return a.types[e]},a.types={},a}(),X=Z,W=X,U=M(39889),et="*",it=function(){function a(){this._events={}}return a.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},a.prototype.once=function(e,t){return this.on(e,t,!0)},a.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=this._events[e]||[],o=this._events[et]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var h=u[c],A=h.callback,P=h.once;P&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),A.apply(t,r)}};s(i),s(o)},a.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,i=0;i<n;i++)r[i].callback===t&&(r.splice(i,1),n--,i--);r.length===0&&delete this._events[e]}return this},a.prototype.getEvents=function(){return this._events},a}(),J=it,rt=M(65316);function mt(a,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromTranslation(r,t),rt.multiply(a,r,e)}function pt(a,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromRotation(r,t),rt.multiply(a,r,e)}function ft(a,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromScaling(r,t),rt.multiply(a,r,e)}function Mt(a,e,t){return rt.multiply(a,t,e)}function zt(a,e){for(var t=a?[].concat(a):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var i=e[r];switch(i[0]){case"t":mt(t,t,[i[1],i[2]]);break;case"s":ft(t,t,[i[1],i[2]]);break;case"r":pt(t,t,i[1]);break;case"m":Mt(t,t,i[1]);break;default:break}}return t}function Vt(a,e){return a[0]*e[1]-e[0]*a[1]}function kt(a,e,t){var r=vec2.angle(a,e),n=Vt(a,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function st(a,e,t){return t?(a[0]=e[1],a[1]=-1*e[0]):(a[0]=-1*e[1],a[1]=e[0]),a}var St=function(e,t){var r=e.nodes,n=e.edges,i=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];i.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],h=o[f];!c&&c!==0||!h&&h!==0||(i[c][h]=1,t||(i[h][c]=1))}),i},qt=St,re=function(e,t){return e===t},Nt=function(){function a(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return a.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},a}(),be=function(){function a(e){e===void 0&&(e=re),this.head=null,this.tail=null,this.compare=e}return a.prototype.prepend=function(e){var t=new Nt(e,this.head);return this.head=t,this.tail||(this.tail=t),this},a.prototype.append=function(e){var t=new Nt(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},a.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},a.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,i=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},a.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},a.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},a.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},a.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},a.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},a.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},a}(),Te=be,nr=function(){function a(){this.linkedList=new Te}return a.prototype.isEmpty=function(){return!this.linkedList.head},a.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},a.prototype.enqueue=function(e){this.linkedList.append(e)},a.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},a.prototype.toString=function(e){return this.linkedList.toString(e)},a}(),Rt=nr,Dt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var i=function(f){return f.source===e};return n.filter(i).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},At=function(e,t){return t.filter(function(r){return r.source===e})},Xt=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},$t=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Tt(a){a===void 0&&(a={});var e=a,t=function(){},r=function(){var n={};return function(i){var o=i.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=a.allowTraversal||r,e.enter=a.enter||t,e.leave=a.leave||t,e}var Kt=function(e,t,r,n){n===void 0&&(n=!0);var i=Tt(r),o=new Rt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var A=o.dequeue();i.enter({current:A,previous:f}),Dt(A,u,n?"target":void 0).forEach(function(P){i.allowTraversal({previous:f,current:A,next:P})&&o.enqueue(P)}),i.leave({current:A,previous:f}),f=A};!o.isEmpty();)c()},Ee=Kt,vt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,i=n===void 0?[]:n,o=[],s={},u=[],f=function P(B){u.push(B),s[B.id]=!0;for(var V=Dt(B.id,i),$=function(dt){var xt=V[dt];if(!s[xt]){var Wt=r.filter(function(Qt){return Qt.id===xt});Wt.length>0&&P(Wt[0])}},ut=0;ut<V.length;++ut)$(ut)},c=0;c<r.length;c++){var h=r[c];if(!s[h.id]){f(h);for(var A=[];u.length>0;)A.push(u.pop());o.push(A)}}return o},bt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,i=n===void 0?[]:n,o=[],s={},u={},f={},c=[],h=0,A=function $(ut){u[ut.id]=h,f[ut.id]=h,h+=1,o.push(ut),s[ut.id]=!0;for(var lt=Dt(ut.id,i,"target").filter(function(Zt){return r.map(function(de){return de.id}).indexOf(Zt)>-1}),dt=function(de){var De=lt[de];if(!u[De]&&u[De]!==0){var xe=r.filter(function(He){return He.id===De});xe.length>0&&$(xe[0]),f[ut.id]=Math.min(f[ut.id],f[De])}else s[De]&&(f[ut.id]=Math.min(f[ut.id],u[De]))},xt=0;xt<lt.length;xt++)dt(xt);if(f[ut.id]===u[ut.id]){for(var Wt=[];o.length>0;){var Qt=o.pop();if(s[Qt.id]=!1,Wt.push(Qt),Qt===ut)break}Wt.length>0&&c.push(Wt)}},P=0,B=r;P<B.length;P++){var V=B[P];!u[V.id]&&u[V.id]!==0&&A(V)}return c};function wt(a,e){return e?bt(a):vt(a)}var D=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,i=e.edges,o=i===void 0?[]:i;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},tt=D,Ot=function(e,t){var r=D(e);return r[t]?D(e)[t].inDegree:0},ct=function(e,t){var r=D(e);return r[t]?D(e)[t].outDegree:0};function ie(a){a===void 0&&(a={});var e=a,t=function(){},r=function(){var n={};return function(i){var o=i.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=a.allowTraversal||r,e.enter=a.enter||t,e.leave=a.leave||t,e}function pe(a,e,t,r){r.enter({current:e,previous:t});var n=a.edges,i=n===void 0?[]:n;Dt(e,i,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&pe(a,o,e,r)}),r.leave({current:e,previous:t})}function Ge(a,e,t){pe(a,e,"",ie(t))}var Re=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,i={},o={},s={},u={};n.forEach(function(h){o[h.id]=h});for(var f={enter:function(A){var P=A.current,B=A.previous;if(s[P]){t={};for(var V=P,$=B;$!==P;)t[V]=$,V=$,$=i[$];t[V]=$}else s[P]=P,delete o[P],i[P]=B},leave:function(A){var P=A.current;u[P]=P,delete s[P]},allowTraversal:function(A){var P=A.next;return t?!1:!u[P]}};Object.keys(o).length;){var c=Object.keys(o)[0];Ge(e,c,f)}return t},Je=function(e,t,r){var n,i;r===void 0&&(r=!0);for(var o=[],s=wt(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var h=c[0],A=h.id,P=[h],B=(n={},n[A]=h,n),V=(i={},i[A]=new Set,i);P.length>0;)for(var $=P.pop(),ut=$.id,lt=Dt(ut,e.edges),dt=function(Qt){var Zt,de=lt[Qt],De=e.nodes.find(function(Zr){return Zr.id===de});if(de===ut)o.push((Zt={},Zt[de]=$,Zt));else if(!(de in V))B[de]=$,P.push(De),V[de]=new Set([$]);else if(!V[ut].has(De)){for(var xe=!0,He=[De,$],ar=B[ut];V[de].size&&!V[de].has(ar)&&(He.push(ar),ar!==B[ar.id]);)ar=B[ar.id];if(He.push(ar),t&&r?(xe=!1,He.findIndex(function(Zr){return t.indexOf(Zr.id)>-1})>-1&&(xe=!0)):t&&!r&&He.findIndex(function(Zr){return t.indexOf(Zr.id)>-1})>-1&&(xe=!1),xe){for(var Fr={},rn=1;rn<He.length;rn+=1)Fr[He[rn-1].id]=He[rn];He.length&&(Fr[He[He.length-1].id]=He[0]),o.push(Fr)}V[de].add($)}},xt=0;xt<lt.length;xt+=1)dt(xt)}return o},Ve=function(e,t,r){r===void 0&&(r=!0);for(var n=[],i=new Set,o=[],s=[],u={},f={},c=function(ar){for(var Fr=[ar];Fr.length>0;){var rn=Fr.pop();i.has(rn)&&(i.delete(rn),o[rn.id].forEach(function(Zr){Fr.push(Zr)}),o[rn.id].clear())}},h=function He(ar,Fr,rn){var Zr=!1;if(t&&r===!1&&t.indexOf(ar.id)>-1)return Zr;n.push(ar),i.add(ar);for(var Nr=rn[ar.id],yn=0;yn<Nr.length;yn+=1){var dn=u[Nr[yn]];if(dn===Fr){for(var Lr={},Yr=1;Yr<n.length;Yr+=1)Lr[n[Yr-1].id]=n[Yr];n.length&&(Lr[n[n.length-1].id]=n[0]),s.push(Lr),Zr=!0}else i.has(dn)||He(dn,Fr,rn)&&(Zr=!0)}if(Zr)c(ar);else for(var yn=0;yn<Nr.length;yn+=1){var dn=u[Nr[yn]];o[dn.id].has(ar)||o[dn.id].add(ar)}return n.pop(),Zr},A=e.nodes,P=A===void 0?[]:A,B=0;B<P.length;B+=1){var V=P[B],$=V.id;f[$]=B,u[B]=V}if(t&&r)for(var ut=function(ar){var Fr=t[ar];f[P[ar].id]=f[Fr],f[Fr]=0,u[0]=P.find(function(rn){return rn.id===Fr}),u[f[P[ar].id]]=P[ar]},B=0;B<t.length;B++)ut(B);for(var lt=function(ar){for(var Fr,rn,Zr=1/0,Nr=0;Nr<ar.length;Nr+=1)for(var yn=ar[Nr],dn=0;dn<yn.length;dn++){var Lr=f[yn[dn].id];Lr<Zr&&(Zr=Lr,rn=Nr)}for(var Yr=ar[rn],on=[],Nr=0;Nr<Yr.length;Nr+=1){var sn=Yr[Nr];on[sn.id]=[];for(var _n=0,Ln=Dt(sn.id,e.edges,"target").filter(function(Hi){return Yr.map(function(ki){return ki.id}).indexOf(Hi)>-1});_n<Ln.length;_n++){var ti=Ln[_n];ti===sn.id&&!(r===!1&&t.indexOf(sn.id)>-1)?s.push((Fr={},Fr[sn.id]=sn,Fr)):on[sn.id].push(f[ti])}}return{component:Yr,adjList:on,minIdx:Zr}},dt=0;dt<P.length;){var xt=P.filter(function(He){return f[He.id]>=dt}),Wt=bt({nodes:xt,edges:e.edges}).filter(function(He){return He.length>1});if(Wt.length===0)break;var Qt=lt(Wt),Zt=Qt.minIdx,de=Qt.adjList,De=Qt.component;if(De.length>1){De.forEach(function(He){o[He.id]=new Set});var xe=u[Zt];if(t&&r&&t.indexOf(xe.id)===-1)return s;h(xe,xe,de),dt=Zt+1}else break}return s},ce=function(e,t,r,n){return n===void 0&&(n=!0),t?Ve(e,r,n):Je(e,r,n)},Le=Re,je=function(e,t,r){for(var n=1/0,i,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],i=t[o])}return i},Be=function(e,t,r,n){var i=e.nodes,o=i===void 0?[]:i,s=e.edges,u=s===void 0?[]:s,f=[],c={},h={},A={};o.forEach(function(dt,xt){var Wt=dt.id;f.push(Wt),h[Wt]=1/0,Wt===t&&(h[Wt]=0)});for(var P=o.length,B=function(xt){var Wt=je(h,o,c),Qt=Wt.id;if(c[Qt]=!0,h[Qt]===1/0)return"continue";var Zt=[];r?Zt=At(Qt,u):Zt=Xt(Qt,u),Zt.forEach(function(de){var De=de.target,xe=de.source,He=De===Qt?xe:De,ar=n&&de[n]?de[n]:1;h[He]>h[Wt.id]+ar?(h[He]=h[Wt.id]+ar,A[He]=[Wt.id]):h[He]===h[Wt.id]+ar&&A[He].push(Wt.id)})},V=0;V<P;V++)B(V);A[t]=[t];var $={};for(var ut in h)h[ut]!==1/0&&or(t,ut,A,$);var lt={};for(var ut in $)lt[ut]=$[ut][0];return{length:h,path:lt,allPath:$}},vr=Be;function or(a,e,t,r){if(a===e)return[a];if(r[e])return r[e];for(var n=[],i=0,o=t[e];i<o.length;i++){var s=o[i],u=or(a,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var h=c[f];(0,l.isArray)(h)?n.push((0,U.__spreadArray)((0,U.__spreadArray)([],h,!0),[e],!1)):n.push([h,e])}}return r[e]=n,r[e]}var Ae=function(e,t,r,n,i){var o=vr(e,t,n,i),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},yr=function(e,t,r,n){var i;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(i={},i[t]=!0,i),c=[],h=[],A=n?Dt(t,s,"target"):Dt(t,s);for(c.push(A);u.length>0&&c.length>0;){var P=c[c.length-1];if(P.length){var B=P.shift();B&&(u.push(B),f[B]=!0,A=n?Dt(B,s,"target"):Dt(B,s),c.push(A.filter(function(ut){return!f[ut]})))}else{var V=u.pop();f[V]=!1,c.pop();continue}if(u[u.length-1]===r){var $=u.map(function(lt){return lt});h.push($);var V=u.pop();f[V]=!1,c.pop()}}return h},Cr=function(e,t){for(var r=qt(e,t),n=[],i=r.length,o=0;o<i;o+=1){n[o]=[];for(var s=0;s<i;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<i;u+=1)for(var o=0;o<i;o+=1)for(var s=0;s<i;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},zr=Cr,Mr=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var i=e.nodes,o=i===void 0?[]:i,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(xt,Wt){var Qt=$t();xt.clusterId=Qt,f[Qt]={id:Qt,nodes:[xt]},c[xt.id]={node:xt,idx:Wt}});var h=qt(e,t),A=[],P={};h.forEach(function(xt,Wt){var Qt=0,Zt=o[Wt].id;P[Zt]={},xt.forEach(function(de,De){if(de){Qt+=de;var xe=o[De].id;P[Zt][xe]=de}}),A.push(Qt)});for(var B=0,V=function(){var Wt=!1;if(o.forEach(function(Qt){var Zt={};Object.keys(P[Qt.id]).forEach(function(Zr){var Nr=P[Qt.id][Zr],yn=c[Zr].node,dn=yn.clusterId;Zt[dn]||(Zt[dn]=0),Zt[dn]+=Nr});var de=-1/0,De=[];if(Object.keys(Zt).forEach(function(Zr){de<Zt[Zr]?(de=Zt[Zr],De=[Zr]):de===Zt[Zr]&&De.push(Zr)}),!(De.length===1&&De[0]===Qt.clusterId)){var xe=De.indexOf(Qt.clusterId);if(xe>=0&&De.splice(xe,1),De&&De.length){Wt=!0;var He=f[Qt.clusterId],ar=He.nodes.indexOf(Qt);He.nodes.splice(ar,1);var Fr=Math.floor(Math.random()*De.length),rn=f[De[Fr]];rn.nodes.push(Qt),Qt.clusterId=rn.id}}}),!Wt)return"break";B++};B<n;){var $=V();if($==="break")break}Object.keys(f).forEach(function(xt){var Wt=f[xt];(!Wt.nodes||!Wt.nodes.length)&&delete f[xt]});var ut=[],lt={};u.forEach(function(xt){var Wt=xt.source,Qt=xt.target,Zt=xt[r]||1,de=c[Wt].node.clusterId,De=c[Qt].node.clusterId,xe="".concat(de,"---").concat(De);if(lt[xe])lt[xe].weight+=Zt,lt[xe].count++;else{var He={source:de,target:De,weight:Zt,count:1};lt[xe]=He,ut.push(He)}});var dt=[];return Object.keys(f).forEach(function(xt){dt.push(f[xt])}),{clusters:dt,clusterEdges:ut}},un=Mr,hn=function(){function a(e){this.arr=e}return a.prototype.getArr=function(){return this.arr||[]},a.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new a(r);if(!(r!=null&&r.length))return new a(this.arr);if(this.arr.length===r.length){var n=[];for(var i in this.arr)n[i]=this.arr[i]+r[i];return new a(n)}},a.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new a(r);if(!(r!=null&&r.length))return new a(this.arr);if(this.arr.length===r.length){var n=[];for(var i in this.arr)n[i]=this.arr[i]-r[i];return new a(n)}},a.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new a(t)},a.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new a(e)},a.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var i in this.arr)n+=Math.pow(this.arr[i]-e.arr[i],2);return n}},a.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var i in this.arr)n+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},a.prototype.normalize=function(){var e=[],t=(0,l.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var i in this.arr)e[i]=(this.arr[i]-n)/(r-n);return new a(e)},a.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},a.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var i in this.arr)n+=this.arr[i]*e.arr[i];return n}else console.error("The two vectors are unequal in length.")},a.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},a}(),Un=hn,nn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,vn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,ln=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(i){i.properties&&Object.keys(i.properties).forEach(function(o){if(o==="id"||!"".concat(i.properties[o]).match(nn)&&!"".concat(i.properties[o]).match(vn)&&isNaN(Number(i.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(i,o){return r[o]-r[i]});return n.length<t?n:n.slice(0,t)},pn=function(e,t){return t.map(function(r){if(e.hasOwnProperty(r)){if(!isNaN(Number(e[r])))return Number(e[r]);if(e[r].match(nn)||e[r].match(vn))return Number(Date.parse(new Date(e[r])))/1e3}return 0})},Bn=function(e){for(var t=ln(e),r=[],n=0;n<e.length;n++)r[n]=pn(e[n].properties,t);return r},Oe=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},Cn={getAllSortProperties:ln,getPropertyWeight:Bn,getAllProperties:Oe},Gn;(function(a){a.EuclideanDistance="euclideanDistance"})(Gn||(Gn={}));var bi=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,l.uniq)(n));var i={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(i[o]=(0,l.uniq)(s))}),i},zn=function(e,t,r){var n=bi(e,t,r),i=[];return Object.keys(n).length&&e.forEach(function(o,s){var u=[];if(Object.keys(n).length===1){var f=Object.keys(n)[0],c=n[f];c.every(function(h){return!isNaN(Number(h))})&&(u=[o[f]])}else Object.keys(n).forEach(function(h){for(var A=o[h],P=n[h],B=P.findIndex(function(ut){return A===ut}),V=[],$=0;$<P.length;$++)$===B?V.push(1):V.push(0);u=u.concat(V)});i[s]=u}),i},Hn=function(e,t,r,n){r===void 0&&(r=Gn.EuclideanDistance);var i=0;switch(r){case Gn.EuclideanDistance:i=new Un(e).euclideanDistance(new Un(t));break;default:break}return i},hi={getAllKeyValueMap:bi,oneHot:zn,getDistance:Hn},_i=function(e,t,r,n){for(var i=t.length,o=2*n,s=0,u=0;u<i;u++)for(var f=e[u].clusterId,c=0;c<i;c++){var h=e[c].clusterId;if(f===h){var A=t[u][c]||0,P=r[u]||0,B=r[c]||0;s+=A-P*B/o}}return s*=1/o,s},pi=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new Un([]),i=0;i<r;i++)n=n.add(new Un(t[i]));var o=n.avg(r);o.normalize();for(var s=0,i=0;i<r;i++){var u=new Un(t[i]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var i=0;i<r;i++){var u=new Un(t[i]);e[i].clusterInertial=0;for(var h=0;h<r;h++){if(i===h){c[i][h]=0;continue}var A=new Un(t[h]);c[i][h]=u.squareEuclideanDistance(A),e[i].clusterInertial+=c[i][h]}}for(var P=0,B=2*r*s,i=0;i<r;i++)for(var V=e[i].clusterId,h=0;h<r;h++){var $=e[h].clusterId;if(!(i===h||V!==$)){var ut=e[i].clusterInertial*e[h].clusterInertial/Math.pow(B,2)-c[i][h]/B;P+=ut}}return Number(P.toFixed(4))},Pt=function(e,t,r,n,i,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),i===void 0&&(i=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,h=c===void 0?[]:c,A=e.edges,P=A===void 0?[]:A,B=[];if(i){h.forEach(function(Lr,Yr){Lr.properties=Lr.properties||{},Lr.originIndex=Yr});var V=[];h.every(function(Lr){return Lr.hasOwnProperty("nodeType")})&&(V=Array.from(new Set(h.map(function(Lr){return Lr.nodeType}))),h.forEach(function(Lr){Lr.properties.nodeType=V.findIndex(function(Yr){return Yr===Lr.nodeType})}));var $=Oe(h,o);B=zn($,s,u)}var ut=1,lt={},dt={};h.forEach(function(Lr,Yr){var on=String(ut++);Lr.clusterId=on,lt[on]={id:on,nodes:[Lr]},dt[Lr.id]={node:Lr,idx:Yr}});var xt=qt(e,t),Wt=[],Qt={},Zt=0;xt.forEach(function(Lr,Yr){var on=0,sn=h[Yr].id;Qt[sn]={},Lr.forEach(function(_n,Ln){if(_n){on+=_n;var ti=h[Ln].id;Qt[sn][ti]=_n,Zt+=_n}}),Wt.push(on)}),Zt/=2;for(var de=1/0,De=1/0,xe=0,He=[],ar={};;){i&&h.every(function(Lr){return Lr.hasOwnProperty("properties")})?de=_i(h,xt,Wt,Zt)+pi(h,B)*f:de=_i(h,xt,Wt,Zt),xe===0&&(De=de,He=h,ar=lt);var Fr=de>0&&de>De&&de-De<n;if(de>De&&(He=h.map(function(Lr){return{node:Lr,clusterId:Lr.clusterId}}),ar=(0,l.clone)(lt),De=de),Fr||xe>100)break;xe++,Object.keys(lt).forEach(function(Lr){var Yr=0;P.forEach(function(on){var sn=on.source,_n=on.target,Ln=dt[sn].node.clusterId,ti=dt[_n].node.clusterId;(Ln===Lr&&ti!==Lr||ti===Lr&&Ln!==Lr)&&(Yr=Yr+(on[r]||1))}),lt[Lr].sumTot=Yr}),h.forEach(function(Lr,Yr){var on=lt[Lr.clusterId],sn=0,_n,Ln=Wt[Yr]/(2*Zt),ti=0,li=on.nodes;li.forEach(function(Co){var Ao=dt[Co.id].idx;ti+=xt[Yr][Ao]||0});var Hi=ti-on.sumTot*Ln,ki=li.filter(function(Co){return Co.id!==Lr.id}),Zi=[];ki.forEach(function(Co,Ao){Zi[Ao]=B[Co.originIndex]});var qi=pi(ki,B)*f,Ca=Qt[Lr.id];if(Object.keys(Ca).forEach(function(Co){var Ao=dt[Co].node,Fu=Ao.clusterId;if(Fu!==Lr.clusterId){var vs=lt[Fu],Hs=vs.nodes;if(!(!Hs||!Hs.length)){var Si=0;Hs.forEach(function(Ti){var Oi=dt[Ti.id].idx;Si+=xt[Yr][Oi]||0});var ji=Si-vs.sumTot*Ln,mi=Hs.concat([Lr]),Xi=[];mi.forEach(function(Ti,Oi){Xi[Oi]=B[Ti.originIndex]});var ua=pi(mi,B)*f,Yn=ji-Hi;i&&(Yn=ji+ua-(Hi+qi)),Yn>sn&&(sn=Yn,_n=vs)}}}),sn>0){_n.nodes.push(Lr);var pa=Lr.clusterId;Lr.clusterId=_n.id;var mf=on.nodes.indexOf(Lr);on.nodes.splice(mf,1);var Mo=0,bf=0;P.forEach(function(Co){var Ao=Co.source,Fu=Co.target,vs=dt[Ao].node.clusterId,Hs=dt[Fu].node.clusterId;(vs===_n.id&&Hs!==_n.id||Hs===_n.id&&vs!==_n.id)&&(Mo=Mo+(Co[r]||1)),(vs===pa&&Hs!==pa||Hs===pa&&vs!==pa)&&(bf=bf+(Co[r]||1))}),_n.sumTot=Mo,on.sumTot=bf}})}var rn={},Zr=0;Object.keys(ar).forEach(function(Lr){var Yr=ar[Lr];if(!Yr.nodes||!Yr.nodes.length){delete ar[Lr];return}var on=String(Zr+1);on!==Lr&&(Yr.id=on,Yr.nodes=Yr.nodes.map(function(sn){return{id:sn.id,clusterId:on}}),ar[on]=Yr,rn[Lr]=on,delete ar[Lr],Zr++)}),He.forEach(function(Lr){var Yr=Lr.node,on=Lr.clusterId;Yr&&(Yr.clusterId=on,Yr.clusterId&&rn[Yr.clusterId]&&(Yr.clusterId=rn[Yr.clusterId]))});var Nr=[],yn={};P.forEach(function(Lr){var Yr=Lr.source,on=Lr.target,sn=Lr[r]||1,_n=dt[Yr].node.clusterId,Ln=dt[on].node.clusterId;if(!(!_n||!Ln)){var ti="".concat(_n,"---").concat(Ln);if(yn[ti])yn[ti].weight+=sn,yn[ti].count++;else{var li={source:_n,target:Ln,weight:sn,count:1};yn[ti]=li,Nr.push(li)}}});var dn=[];return Object.keys(ar).forEach(function(Lr){dn.push(ar[Lr])}),{clusters:dn,clusterEdges:Nr}},Lt=Pt,H=function(e,t,r,n,i,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),i===void 0&&(i=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Lt(e,t,r,n,!0,i,o,s,u)},G=H,F=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,l.clone)(e),i=n.nodes,o=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,f=function(){var A=tt({nodes:o,edges:u}),P=Object.keys(A);P.sort(function($,ut){var lt,dt;return((lt=A[$])===null||lt===void 0?void 0:lt.degree)-((dt=A[ut])===null||dt===void 0?void 0:dt.degree)});var B=P[0];if(!o.length||((r=A[B])===null||r===void 0?void 0:r.degree)>=t)return"break";var V=o.findIndex(function($){return $.id===B});o.splice(V,1),u=u.filter(function($){return!($.source===B||$.target===B)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},ot=F,Bt=function(e,t,r){var n=[];switch(e){case Gn.EuclideanDistance:n=t[r];break;default:n=[];break}return n},Ht=function(e,t,r,n,i,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),i===void 0&&(i=["id"]),o===void 0&&(o=Gn.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,h={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Gn.EuclideanDistance&&!u.every(function(on){return on.hasOwnProperty(r)}))return h;var A=[],P=[];if(o===Gn.EuclideanDistance&&(A=Oe(u,r),P=zn(A,n,i)),!P.length)return h;for(var B=(0,l.uniq)(P.map(function(on){return on.join("")})),V=Math.min(t,u.length,B.length),$=0;$<u.length;$++)u[$].originIndex=$;for(var ut=[],lt=[],dt=[],$=0;$<V;$++)if($===0){var xt=Math.floor(Math.random()*u.length);switch(o){case Gn.EuclideanDistance:ut[$]=P[xt];break;default:ut[$]=[];break}lt.push(xt),dt[$]=[u[xt]],u[xt].clusterId=String($)}else{for(var Wt=-1/0,Qt=0,Zt=function(_n){if(!lt.includes(_n)){for(var Ln=0,ti=0;ti<ut.length;ti++){var li=0;switch(o){case Gn.EuclideanDistance:li=Hn(P[u[_n].originIndex],ut[ti],o);break;default:break}Ln+=li}var Hi=Ln/ut.length;Hi>Wt&&!ut.find(function(ki){return(0,l.isEqual)(ki,Bt(o,P,u[_n].originIndex))})&&(Wt=Hi,Qt=_n)}},de=0;de<u.length;de++)Zt(de);ut[$]=Bt(o,P,Qt),lt.push(Qt),dt[$]=[u[Qt]],u[Qt].clusterId=String($)}for(var De=0;;){for(var $=0;$<u.length;$++){var xe=0,He=1/0;if(!(De===0&&lt.includes($))){for(var ar=0;ar<ut.length;ar++){var Fr=0;switch(o){case Gn.EuclideanDistance:Fr=Hn(P[$],ut[ar],o);break;default:break}Fr<He&&(He=Fr,xe=ar)}if(u[$].clusterId!==void 0)for(var rn=dt[Number(u[$].clusterId)].length-1;rn>=0;rn--)dt[Number(u[$].clusterId)][rn].id===u[$].id&&dt[Number(u[$].clusterId)].splice(rn,1);u[$].clusterId=String(xe),dt[xe].push(u[$])}}for(var Zr=!1,$=0;$<dt.length;$++){for(var Nr=dt[$],yn=new Un([]),ar=0;ar<Nr.length;ar++)yn=yn.add(new Un(P[Nr[ar].originIndex]));var dn=yn.avg(Nr.length);dn.equal(new Un(ut[$]))||(Zr=!0,ut[$]=dn.getArr())}if(De++,u.every(function(on){return on.clusterId!==void 0})&&Zr||De>=1e3)break}var Lr=[],Yr={};return c.forEach(function(on){var sn,_n,Ln=on.source,ti=on.target,li=(sn=u.find(function(qi){return qi.id===Ln}))===null||sn===void 0?void 0:sn.clusterId,Hi=(_n=u.find(function(qi){return qi.id===ti}))===null||_n===void 0?void 0:_n.clusterId,ki="".concat(li,"---").concat(Hi);if(Yr[ki])Yr[ki].count++;else{var Zi={source:li,target:Hi,count:1};Yr[ki]=Zi,Lr.push(Zi)}}),{clusters:dt,clusterEdges:Lr}},Yt=Ht,he=function(e,t){var r=new Un(t),n=r.norm2(),i=new Un(e),o=i.norm2(),s=r.dot(i),u=n*o,f=u?s/u:0;return f},at=he,yt=function(e,t,r,n,i){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),i===void 0&&(i=[]);var o=(0,l.clone)(e.filter(function(A){return A.id!==t.id})),s=e.findIndex(function(A){return A.id===t.id}),u=Oe(e,r),f=zn(u,n,i),c=f[s],h=[];return o.forEach(function(A,P){if(A.id!==t.id){var B=f[P],V=at(B,c);h.push(V),A.cosineSimilarity=V}}),o.sort(function(A,P){return P.cosineSimilarity-A.cosineSimilarity}),{allCosineSimilarity:h,similarNodes:o}},te=yt,Me=function(){function a(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return a.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},a.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},a.prototype.connected=function(e,t){return this.find(e)===this.find(t)},a}(),_e=Me,tr=function(e,t){return e-t},sr=function(){function a(e){e===void 0&&(e=tr),this.compareFn=e,this.list=[]}return a.prototype.getLeft=function(e){return 2*e+1},a.prototype.getRight=function(e){return 2*e+2},a.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},a.prototype.isEmpty=function(){return this.list.length<=0},a.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},a.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},a.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},a.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},a.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),i=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:i!==null&&i<o&&this.compareFn(this.list[r],this.list[i])>0&&(r=i),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},a}(),ge=sr,Fe=function(e,t){var r=[],n=e.nodes,i=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(i.length===0)return r;var u=i[0],f=new Set;f.add(u);var c=function($,ut){return t?$.weight-ut.weight:0},h=new ge(c);for(Xt(u.id,s).forEach(function(V){h.insert(V)});!h.isEmpty();){var A=h.delMin(),P=A.source,B=A.target;f.has(P)&&f.has(B)||(r.push(A),f.has(P)||(f.add(P),Xt(P,s).forEach(function(V){h.insert(V)})),f.has(B)||(f.add(B),Xt(B,s).forEach(function(V){h.insert(V)})))}return r},qe=function(e,t){var r=[],n=e.nodes,i=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(i.length===0)return r;var u=s.map(function(P){return P});t&&u.sort(function(P,B){return P.weight-B.weight});for(var f=new _e(i.map(function(P){return P.id}));u.length>0;){var c=u.shift(),h=c.source,A=c.target;f.connected(h,A)||(r.push(c),f.union(h,A))}return r},_r=function(e,t,r){var n={prim:Fe,kruskal:qe};return r?n[r](e,t):qe(e,t)},Er=_r,ye=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,i=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,h=u.length,A,P={},B={},V=0;V<h;++V){var $=u[V],ut=$.id;P[ut]=1/h,B[ut]=1/h}for(var lt=tt(e);o>0&&n>t;){i=0;for(var V=0;V<h;++V){var $=u[V],ut=$.id;if(A=0,lt[$.id].inDegree===0)P[ut]=0;else{for(var dt=Dt(ut,c,"source"),xt=0;xt<dt.length;++xt){var Wt=dt[xt],Qt=lt[Wt].outDegree;Qt>0&&(A+=B[Wt]/Qt)}P[ut]=r*A,i+=P[ut]}}i=(1-i)/h,n=0;for(var V=0;V<h;++V){var $=u[V],ut=$.id;A=P[ut]+i,n+=Math.abs(A-B[ut]),B[ut]=A}o-=1}return B},Ft=ye,ne=-1,Pe=-1,Ce="-1",Ue="-1",Xe=-1,Wr="-1",$r=function(){function a(e,t,r,n){e===void 0&&(e=ne),t===void 0&&(t=Pe),r===void 0&&(r=Pe),n===void 0&&(n=Ce),this.id=e,this.from=t,this.to=r,this.label=n}return a}(),mn=function(){function a(e,t){e===void 0&&(e=Pe),t===void 0&&(t=Ue),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return a.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},a}(),Nn=function(){function a(e,t,r){e===void 0&&(e=Pe),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return a.prototype.getNodeNum=function(){return this.nodes.length},a.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new mn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},a.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var i=new $r(e,t,r,n);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(i),!this.directed){var o=new $r(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},a}(),kn=function(){function a(e,t,r,n,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Ue,edgeLabel:n||Ce,nodeLabel2:i||Ue}}return a.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},a.prototype.notEqualTo=function(e){return!this.equalTo(e)},a}(),Jn=function(){function a(){this.rmpath=[],this.dfsEdgeList=[]}return a.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},a.prototype.notEqualTo=function(e){return!this.equalTo(e)},a.prototype.pushBack=function(e,t,r,n,i){return this.dfsEdgeList.push(new kn(e,t,r,n,i)),this.dfsEdgeList},a.prototype.toGraph=function(e,t){e===void 0&&(e=Xe),t===void 0&&(t=!1);var r=new Nn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var i=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Ue&&r.addNode(i,u),c!==Ue&&r.addNode(o,c),u!==Ue&&c!==u&&r.addEdge(void 0,i,o,f)}),r},a.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],i=n.fromNode,o=n.toNode;i<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=i)}return this.rmpath},a.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},a}(),ri=function(){function a(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return a.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},a.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},a}(),Ri=function(){function a(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,i=e.minNodeNum,o=i===void 0?1:i,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,h=e.directed,A=h===void 0?!1:h,P=e.verbose,B=P===void 0?!1:P;this.graphs=t,this.dfsCode=new Jn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=A,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=B,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return a.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],i=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=i[o.to].label)&&n.push(o)}),n},a.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var i=e.nodeMap,o=i[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(i[t.from].label<i[r.to].label||i[t.from].label===i[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&i[t.to].label<=i[r.to].label)return c}}return null},a.prototype.findForwardPureEdges=function(e,t,r,n){for(var i=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],h=e.nodeMap[c.to];r<=h.label&&!n.hasNode(h)&&i.push(c)}return i},a.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var i=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,h=0;h<c;h++){var A=f[h],P=o[A.to].label;t.to===A.to||r>P||n.hasNode(o[A.to])||(t.label<A.label||t.label===A.label&&s<=P)&&i.push(A)}return i},a.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},a.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],i=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:i,edgeLabel:o,nodeLabel2:s};return}(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:s})}),t},a.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(Xe,r),i=n.nodeMap,o=new Jn,s={};n.nodes.forEach(function(h){var A=e.findForwardRootEdges(n,h);A.forEach(function(P){var B=i[P.to],V="".concat(h.label,"-").concat(P.label,"-").concat(B.label);s[V]||(s[V]={projected:[],nodeLabel1:h.label,edgeLabel:P.label,nodeLabel2:B.label});var $={graphId:n.id,edge:P,preNode:null};s[V].projected.push($)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new kn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function h(A){for(var P=o.buildRmpath(),B=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,V=o.dfsEdgeList[P[0]].toNode,$={},ut=!1,lt=0,dt=r?-1:0,xt=function(yn){if(ut)return"break";A.forEach(function(dn){var Lr=new ri(dn),Yr=e.findBackwardEdge(n,Lr.edges[P[yn]],Lr.edges[P[0]],Lr);Yr&&($[Yr.label]||($[Yr.label]={projected:[],edgeLabel:Yr.label}),$[Yr.label].projected.push({graphId:n.id,edge:$,preNode:dn}),lt=o.dfsEdgeList[P[yn]].fromNode,ut=!0)})},Wt=P.length-1;Wt>dt;Wt--){var Qt=xt(Wt);if(Qt==="break")break}if(ut){var Zt=e.findMinLabel($);o.dfsEdgeList.push(new kn(V,lt,Ue,Zt.edgeLabel,Ue));var de=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[de]!==o.dfsEdgeList[de]?!1:h($[Zt.edgeLabel].projected)}var De={};ut=!1;var xe=0;A.forEach(function(Nr){var yn=new ri(Nr),dn=e.findForwardPureEdges(n,yn.edges[P[0]],B,yn);dn.length>0&&(ut=!0,xe=V,dn.forEach(function(Lr){var Yr="".concat(Lr.label,"-").concat(i[Lr.to].label);De[Yr]||(De[Yr]={projected:[],edgeLabel:Lr.label,nodeLabel2:i[Lr.to].label}),De[Yr].projected.push({graphId:n.id,edge:Lr,preNode:Nr})}))});for(var He=P.length,ar=function(yn){if(ut)return"break";var dn=P[yn];A.forEach(function(Lr){var Yr=new ri(Lr),on=e.findForwardRmpathEdges(n,Yr.edges[dn],B,Yr);on.length>0&&(ut=!0,xe=o.dfsEdgeList[dn].fromNode,on.forEach(function(sn){var _n="".concat(sn.label,"-").concat(i[sn.to].label);De[_n]||(De[_n]={projected:[],edgeLabel:sn.label,nodeLabel2:i[sn.to].label}),De[_n].projected.push({graphId:n.id,edge:sn,preNode:Lr})}))})},Wt=0;Wt<He;Wt++){var Fr=ar(Wt);if(Fr==="break")break}if(!ut)return!0;var rn=e.findMinLabel(De);o.dfsEdgeList.push(new kn(xe,V+1,Ue,rn.edgeLabel,rn.nodeLabel2));var Zr=o.dfsEdgeList.length-1;return t.dfsEdgeList[Zr]!==o.dfsEdgeList[Zr]?!1:h(De["".concat(rn.edgeLabel,"-").concat(rn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},a.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,l.clone)(e))}},a.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var h=t.graphs[c.graphId],A=h.nodeMap,P=new ri(c),B=i.length-1;B>=0;B--){var V=t.findBackwardEdge(h,P.edges[i[B]],P.edges[i[0]],P);if(V){var $="".concat(t.dfsCode.dfsEdgeList[i[B]].fromNode,"-").concat(V.label);f[$]||(f[$]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[i[B]].fromNode,edgeLabel:V.label}),f[$].projected.push({graphId:c.graphId,edge:V,preNode:c})}}if(!(n>=t.maxNodeNum)){var ut=t.findForwardPureEdges(h,P.edges[i[0]],s,P);ut.forEach(function(dt){var xt="".concat(o,"-").concat(dt.label,"-").concat(A[dt.to].label);u[xt]||(u[xt]={projected:[],fromNodeId:o,edgeLabel:dt.label,nodeLabel2:A[dt.to].label}),u[xt].projected.push({graphId:c.graphId,edge:dt,preNode:c})});for(var lt=function(xt){var Wt=t.findForwardRmpathEdges(h,P.edges[i[xt]],s,P);Wt.forEach(function(Qt){var Zt="".concat(t.dfsCode.dfsEdgeList[i[xt]].fromNode,"-").concat(Qt.label,"-").concat(A[Qt.to].label);u[Zt]||(u[Zt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[i[xt]].fromNode,edgeLabel:Qt.label,nodeLabel2:A[Qt.to].label}),u[Zt].projected.push({graphId:c.graphId,edge:Qt,preNode:c})})},B=0;B<i.length;B++)lt(B)}}),Object.keys(f).forEach(function(c){var h=f[c],A=h.toNodeId,P=h.edgeLabel;t.dfsCode.dfsEdgeList.push(new kn(o,A,"-1",P,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var h=u[c],A=h.fromNodeId,P=h.edgeLabel,B=h.nodeLabel2;t.dfsCode.dfsEdgeList.push(new kn(A,o+1,Ue,P,B)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},a.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,i={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],h=c.nodeMap;c.nodes.forEach(function(A,P){var B=A.label,V="".concat(f,"-").concat(B);if(!s[V]){var $=i[B]||0;$++,i[B]=$}s[V]={graphKey:f,label:B},A.edges.forEach(function(ut){var lt=B,dt=h[ut.to].label;if(!t&&lt>dt){var xt=dt;dt=lt,lt=xt}var Wt=ut.label,Qt="".concat(f,"-").concat(lt,"-").concat(Wt,"-").concat(dt),Zt="".concat(lt,"-").concat(Wt,"-").concat(dt);if(!o[Zt]){var de=o[Zt]||0;de++,o[Zt]=de}u[Qt]={graphId:f,nodeLabel1:lt,edgeLabel:Wt,nodeLabel2:dt}})})}),Object.keys(i).forEach(function(f){var c=i[f];if(!(c<r)){var h={nodes:[],edges:[]};h.nodes.push({id:"0",label:f}),n.push(h)}}),n},a.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(i){var o=t[i],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var h=s[c.to],A="".concat(u.label,"-").concat(c.label,"-").concat(h.label);n[A]||(n[A]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:h.label});var P={graphId:i,edge:c,preNode:null};n[A].projected.push(P)})})}),Object.keys(n).forEach(function(i){var o=n[i],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new kn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},a}(),di=function(e,t,r,n){var i={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Nn(s,!0,t),c={};u.nodes.forEach(function(h,A){f.addNode(A,h[r]),c[h.id]=A}),u.edges.forEach(function(h,A){var P=c[h.source],B=c[h.target];f.addEdge(-1,P,B,h[n])}),f&&f.getNodeNum()&&(i[f.id]=f)}),i},Ki=function(e,t,r){var n=[];return e.forEach(function(i){var o={nodes:[],edges:[]};i.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),i.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},yo="cluster",Ea=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,i=e.nodeLabelProp,o=i===void 0?yo:i,s=e.edgeLabelProp,u=s===void 0?yo:s,f=di(t,n,o,u),c=e.minSupport,h=e.maxNodeNum,A=e.minNodeNum,P=e.verbose,B=e.top,V={graphs:f,minSupport:c,maxNodeNum:h,minNodeNum:A,top:B,verbose:P,directed:n},$=new Ri(V);$.run();var ut=Ki($.frequentSubgraphs,o,u);return ut},ta=Ea,mo=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var i=[],o=e.nodes;return t.forEach(function(s,u){i.push(Na(o,s,u,r,n))}),i},Na=function(e,t,r,n,i){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=i&&r!==c){o.push(c),s.push(e[c]);var h=e[c][n];u[h]?(u[h].count++,u[h].dists.push(f)):u[h]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,h){return c-h})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},To=function(e,t,r,n,i){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var h=0,A=0,P=f.nodeIdxs,B=f.neighborNum-1;h<o;){for(var V=P[1+Math.floor(Math.random()*B)],$=0;(s["".concat(c,"-").concat(V)]||s["".concat(V,"-").concat(c)])&&(V=Math.floor(Math.random()*t),$++,!($>2*t)););if($<2*t&&(s["".concat(c,"-").concat(V)]={start:c,end:V,distance:i[c][V]},h++,u++,u>=r))return s;if(A++,A>2*t)break}if(h<o){var ut=o-h;o=(o+ut)/(t-c-1)}}),s},vi=function(e,t,r,n){var i=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,h=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!h)){var A=new Set(h),P=c.filter(function(lt){return A.has(lt)});if(!(!P||!P.length)){for(var B={},V=P.length,$=0;$<V;$++){var ut=i[P[$]];n[o].nodes.push(ut),B[ut.id]=!0}r.edges.forEach(function(lt){B[lt.source]&&B[lt.target]&&n[o].edges.push(lt)})}}}}),n},xa=function(e,t,r,n){var i,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((i=t==null?void 0:t.edges)===null||i===void 0)&&i.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],h=s[f.target][r],A=t==null?void 0:t.nodes[0][r],P=t==null?void 0:t.nodes[1][r],B=t==null?void 0:t.edges[0][n];f[n]===B&&(c===A&&h===P||c===P&&h===A)&&u++}),u)},Vo=function(e,t,r){for(var n=1/0,i=0,o=function(f){var c=e[f],h=Object.keys(c).sort(function(lt,dt){return c[lt]-c[dt]}),A=10,P=[];h.forEach(function(lt,dt){P[dt%A]||(P[dt%A]={graphs:[],totalCount:0,aveCount:0}),P[dt%A].graphs.push(lt),P[dt%A].totalCount+=c[lt]});var B=0,V=[];P.forEach(function(lt){var dt=lt.totalCount/lt.graphs.length;lt.aveCount=dt,V.push(dt);var xt=0,Wt=lt.length;lt.graphs.forEach(function(Qt,Zt){var de=c[Qt];lt.graphs.forEach(function(De,xe){Zt!==xe&&(xt+=Math.abs(de-c[De]))})}),xt/=Wt*(Wt-1)/2,B+=xt}),B/=P.length;var $=0;V.forEach(function(lt,dt){V.forEach(function(xt,Wt){dt!==Wt&&($+=Math.abs(lt-xt))}),$/=V.length*(V.length-1)/2});var ut=$-B;n<ut&&(n=ut,i=f)},s=0;s<t;s++)o(s);return{structure:r[i],structureCountMap:e[i]}},zi=function(e,t){var r={},n={};return e.forEach(function(i,o){r[i.id]={idx:o,node:i,degree:0,inDegree:0,outDegree:0};var s=i[t];n[s]||(n[s]=[]),n[s].push(i)}),{nodeMap:r,nodeLabelMap:n}},ao=function(e,t,r){var n={},i={};return e.forEach(function(o,s){n["".concat($t)]={idx:s,edge:o};var u=o[t];i[u]||(i[u]=[]),i[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:i}},jo=function(e,t,r){var n=t.length,i={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var h=e[c].id,A=o[c];i["".concat(f,"-").concat(h)]=A,r||(i["".concat(h,"-").concat(f)]=A)}}),i},ps=function(e,t,r,n,i,o,s,u,f,c,h){var A,P="".concat(t.id,"-").concat(r.id);if(c&&c[P])return c[P];var B=h?h[P]:void 0;if(!B){var V=(A={},A[P]={start:n[t.id].idx,end:n[r.id].idx,distance:i},A);h=vi(V,o,e,h),B=h[P]}return xa(B,s,u,f)},Io=function(e,t,r,n){var i,o,s,u=(i=e[t])===null||i===void 0?void 0:i.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(h){var A=r[h.id].degree;u>A&&(u=A);var P=r[h.id].inDegree;f>P&&(f=P);var B=r[h.id].outDegree;c>B&&(c=B)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Ja=function(e,t,r,n,i,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=zr(e,r),h=zr(t,r),A=jo(e.nodes,c,r),P=jo(t.nodes,h,r),B=zi(e.nodes,o),V=B.nodeMap,$=B.nodeLabelMap,ut=zi(t.nodes,o),lt=ut.nodeMap,dt=ut.nodeLabelMap;ao(e.edges,s,V);var xt=ao(t.edges,s,lt).edgeLabelMap,Wt=[];h==null||h.forEach(function(Si){Wt=Wt.concat(Si)}),i||(i=Math.max.apply(Math,(0,U.__spreadArray)((0,U.__spreadArray)([],Wt,!1),[2],!1))),n||(n=i);var Qt=mo(e,c,o,n),Zt=mo(t,h,o,n),de=Math.min(100,f*(f-1)/2),De=To(n,f,de,Qt,c),xe=vi(De,Qt,e),He=10,ar=1,Fr=1,rn=4,Zr={graphs:xe,nodeLabelProp:o,edgeLabelProp:s,minSupport:ar,minNodeNum:Fr,maxNodeNum:rn,directed:r},Nr=ta(Zr).slice(0,He),yn=Nr.length,dn=[];Nr.forEach(function(Si,ji){dn[ji]={},Object.keys(xe).forEach(function(mi){var Xi=xe[mi],ua=xa(Xi,Si,o,s);dn[ji][mi]=ua})});var Lr=Vo(dn,yn,Nr),Yr=Lr.structure,on=Lr.structureCountMap,sn=t.nodes[0],_n=[],Ln=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ti=-1/0;t.nodes.forEach(function(Si){var ji=Si[o],mi=$[ji];(mi==null?void 0:mi.length)>ti&&(ti=mi.length,_n=mi,Ln=ji,sn=Si)});var li={},Hi={},ki={},Zi={},qi={},Ca={};Object.keys(dt).forEach(function(Si,ji){qi[Si]=[],r&&(Ca[Si]=[]);var mi=-1/0,Xi=dt[Si],ua={};Xi.forEach(function(Ni){var Ui=P["".concat(sn.id,"-").concat(Ni.id)];if(Ui&&qi[Si].push(Ui),mi<Ui&&(mi=Ui),ua["".concat(sn.id,"-").concat(Ni.id)]={start:0,end:lt[Ni.id].idx,distance:Ui},r){var Ba=P["".concat(Ni.id,"-").concat(sn.id)];Ba&&Ca[Si].push(Ba)}}),qi[Si]=qi[Si].sort(function(Ni,Ui){return Ni-Ui}),r&&(Ca[Si]=Ca[Si].sort(function(Ni,Ui){return Ni-Ui})),Hi=vi(ua,Zt,t,Hi);var Yn=[];if(Object.keys(ua).forEach(function(Ni){if(ki[Ni]){Yn.push(ki[Ni]);return}var Ui=Hi[Ni];ki[Ni]=xa(Ui,Yr,o,s),Yn.push(ki[Ni])}),Yn=Yn.sort(function(Ni,Ui){return Ui-Ni}),Zi["".concat(sn.id,"-").concat(Si)]=Yn,Si!==Ln)for(var Ti=(_n==null?void 0:_n.length)||0,Oi=function(Ui){var Ba=_n[Ui],Uu=Qt[V[Ba.id].idx],go=Uu.nodeLabelCountMap[Si],sd=dt[Si].length;if(!go||go.count<sd)return _n.splice(Ui,1),"continue";for(var Td=!1,Zs=0;Zs<sd;Zs++)if(go.dists[Zs]>qi[Si][Zs]){Td=!0;break}if(Td)return _n.splice(Ui,1),"continue";var Ef={};Uu.neighbors.forEach(function(Ks){var nc=A["".concat(Ba.id,"-").concat(Ks.id)];Ef["".concat(Ba.id,"-").concat(Ks.id)]={start:V[Ba.id].idx,end:V[Ks.id].idx,distance:nc}}),xe=vi(Ef,Qt,e,xe);var jc=[];Object.keys(Ef).forEach(function(Ks){if(on[Ks]){jc.push(on[Ks]);return}var nc=xe[Ks];on[Ks]=xa(nc,Yr,o,s),jc.push(on[Ks])}),jc=jc.sort(function(Ks,nc){return nc-Ks});for(var Dh=!1,Zs=0;Zs<sd;Zs++)if(jc[Zs]<Yn[Zs]){Dh=!0;break}if(Dh)return _n.splice(Ui,1),"continue"},fa=Ti-1;fa>=0;fa--)Oi(fa)});var pa=[];_n==null||_n.forEach(function(Si){for(var ji=V[Si.id].idx,mi=Na(e.nodes,c[ji],ji,o,i),Xi=mi.neighbors,ua=Xi.length,Yn=!1,Ti=ua-1;Ti>=0;Ti--){if(Xi.length+1<t.nodes.length){Yn=!0;return}var Oi=Xi[Ti],fa=Oi[o];if(!dt[fa]||!dt[fa].length){Xi.splice(Ti,1);continue}if(!qi[fa]||!qi[fa].length){Xi.splice(Ti,1);continue}var Ni="".concat(Si.id,"-").concat(Oi.id),Ui=A[Ni],Ba=qi[fa].length-1,Uu=qi[fa][Ba];if(Ui>Uu){Xi.splice(Ti,1);continue}if(r){var go="".concat(Oi.id,"-").concat(Si.id),sd=A[go];Ba=Ca[fa].length-1;var Td=Ca[fa][Ba];if(sd>Td){Xi.splice(Ti,1);continue}}var Zs=on[Ni]?on[Ni]:ps(e,Si,Oi,V,Ui,Qt,Yr,o,s,on,xe),Ef="".concat(sn.id,"-").concat(fa),jc=Zi[Ef][Zi[Ef].length-1];if(Zs<jc){Xi.splice(Ti,1);continue}var Dh=Io(li,fa,lt,dt),Ks=Dh.minPatternNodeLabelDegree,nc=Dh.minPatternNodeLabelInDegree,Fl=Dh.minPatternNodeLabelOutDegree;if(V[Oi.id].degree<Ks){Xi.splice(Ti,1);continue}}Yn||pa.push({nodes:[Si].concat(Xi)})});var mf=vr(t,sn.id,!1).length,Mo={};r?(Object.keys(mf).forEach(function(Si){var ji=lt[Si].node[o];Mo[ji]?Mo[ji].push(mf[Si]):Mo[ji]=[mf[Si]]}),Object.keys(Mo).forEach(function(Si){Mo[Si].sort(function(ji,mi){return ji-mi})})):Mo=qi;for(var bf=pa.length,Co=function(ji){var mi=pa[ji],Xi=mi.nodes[0],ua={},Yn={};mi.nodes.forEach(function(Da,zu){Yn[Da.id]={idx:zu,node:Da,degree:0,inDegree:0,outDegree:0};var Wo=Da[o];ua[Wo]?ua[Wo]++:ua[Wo]=1});var Ti=[],Oi={};e.edges.forEach(function(Da){Yn[Da.source]&&Yn[Da.target]&&(Ti.push(Da),Oi[Da[s]]?Oi[Da[s]]++:Oi[Da[s]]=1,Yn[Da.source].degree++,Yn[Da.target].degree++,Yn[Da.source].outDegree++,Yn[Da.target].inDegree++)});for(var fa=Object.keys(xt).length,Ni=!1,Ui=0;Ui<fa;Ui++){var Ba=Object.keys(xt)[Ui];if(!Oi[Ba]||Oi[Ba]<xt[Ba].length){Ni=!0;break}}if(Ni)return pa.splice(ji,1),"continue";var Uu=Ti.length;if(Uu<t.edges.length)return pa.splice(ji,1),"break";for(var go=!1,sd=function(zu){var Wo=Ti[zu],Xc=Wo[s],ud=xt[Xc];if(!ud||!ud.length)return Oi[Xc]--,ud&&Oi[Xc]<ud.length?(go=!0,"break"):(Ti.splice(zu,1),Yn[Wo.source].degree--,Yn[Wo.target].degree--,Yn[Wo.source].outDegree--,Yn[Wo.target].inDegree--,"continue");var Uy=Yn[Wo.source].node[o],zy=Yn[Wo.target].node[o],Cg=!1;if(ud.forEach(function(Wy){var Vy=lt[Wy.source].node,jy=lt[Wy.target].node;Vy[o]===Uy&&jy[o]===zy&&(Cg=!0),!r&&Vy[o]===zy&&jy[o]===Uy&&(Cg=!0)}),!Cg)return Oi[Xc]--,ud&&Oi[Xc]<ud.length?(go=!0,"break"):(Ti.splice(zu,1),Yn[Wo.source].degree--,Yn[Wo.target].degree--,Yn[Wo.source].outDegree--,Yn[Wo.target].inDegree--,"continue")},Ui=Uu-1;Ui>=0;Ui--){var Td=sd(Ui);if(Td==="break")break}if(go)return pa.splice(ji,1),"continue";mi.edges=Ti;var Zs=vr(mi,mi.nodes[0].id,!1).length;if(Object.keys(Zs).reverse().forEach(function(Da){if(!(Da===mi.nodes[0].id||go)){if(Zs[Da]===1/0){var zu=Yn[Da].node[o];if(ua[zu]--,ua[zu]<dt[zu].length){go=!0;return}var Wo=mi.nodes.indexOf(Yn[Da].node);mi.nodes.splice(Wo,1),Yn[Da]=void 0;return}var Xc=V[Da].node[o];if(!Mo[Xc]||!Mo[Xc].length||Zs[Da]>Mo[Xc][Mo[Xc].length-1]){var zu=Yn[Da].node[o];if(ua[zu]--,ua[zu]<dt[zu].length){go=!0;return}var Wo=mi.nodes.indexOf(Yn[Da].node);mi.nodes.splice(Wo,1),Yn[Da]=void 0}}}),go)return pa.splice(ji,1),"continue";for(var Ef=!0,jc=0;Ef&&!go;){Ef=!1;var Dh=r?Yn[Xi.id].degree<lt[sn.id].degree||Yn[Xi.id].inDegree<lt[sn.id].inDegree||Yn[Xi.id].outDegree<lt[sn.id].outDegree:Yn[Xi.id].degree<lt[sn.id].degree;if(Dh){go=!0;break}if(ua[Xi[o]]<dt[Xi[o]].length){go=!0;break}for(var Ks=mi.nodes.length,nc=Ks-1;nc>=0;nc--){var Fl=mi.nodes[nc],Gy=Yn[Fl.id].degree,PS=Yn[Fl.id].inDegree,OS=Yn[Fl.id].outDegree,DS=Fl[o],Mg=Io(li,DS,lt,dt),Fy=Mg.minPatternNodeLabelDegree,NS=Mg.minPatternNodeLabelInDegree,LS=Mg.minPatternNodeLabelOutDegree,kS=r?Gy<Fy||PS<NS||OS<LS:Gy<Fy;if(kS){if(ua[Fl[o]]--,ua[Fl[o]]<dt[Fl[o]].length){go=!0;break}mi.nodes.splice(nc,1),Yn[Fl.id]=void 0,Ef=!0}}if(go||!Ef&&jc!==0)break;Uu=Ti.length;for(var Tp=Uu-1;Tp>=0;Tp--){var Ul=Ti[Tp];if(!Yn[Ul.source]||!Yn[Ul.target]){Ti.splice(Tp,1);var Ip=Ul[s];if(Oi[Ip]--,Yn[Ul.source]&&(Yn[Ul.source].degree--,Yn[Ul.source].outDegree--),Yn[Ul.target]&&(Yn[Ul.target].degree--,Yn[Ul.target].inDegree--),xt[Ip]&&Oi[Ip]<xt[Ip].length){go=!0;break}Ef=!0}}jc++}if(go||go||mi.nodes.length<t.nodes.length||Ti.length<t.edges.length)return pa.splice(ji,1),"continue"},Ao=bf-1;Ao>=0;Ao--){var Fu=Co(Ao);if(Fu==="break")break}for(var vs=pa.length,Hs=function(ji){var mi=pa[ji],Xi={};mi.edges.forEach(function(Ti){var Oi="".concat(Ti.source,"-").concat(Ti.target,"-").concat(Ti.label);Xi[Oi]?Xi[Oi]++:Xi[Oi]=1});for(var ua=function(Oi){var fa=pa[Oi],Ni={};fa.edges.forEach(function(Ba){var Uu="".concat(Ba.source,"-").concat(Ba.target,"-").concat(Ba.label);Ni[Uu]?Ni[Uu]++:Ni[Uu]=1});var Ui=!0;Object.keys(Ni).length!==Object.keys(Xi).length?Ui=!1:Object.keys(Xi).forEach(function(Ba){Ni[Ba]!==Xi[Ba]&&(Ui=!1)}),Ui&&pa.splice(Oi,1)},Yn=vs-1;Yn>ji;Yn--)ua(Yn);vs=pa.length},Ao=0;Ao<=vs-1;Ao++)Hs(Ao);return pa}}},Pn=Ja,$s=function(){function a(e){e===void 0&&(e=10),this.linkedList=new Te,this.maxStep=e}return Object.defineProperty(a.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),a.prototype.isEmpty=function(){return!this.linkedList.head},a.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},a.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},a.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},a.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},a.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},a.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},a}(),na=$s,oo=Le,Xa={getAdjMatrix:qt,breadthFirstSearch:Ee,connectedComponent:wt,getDegree:tt,getInDegree:Ot,getOutDegree:ct,detectCycle:Le,detectDirectedCycle:oo,detectAllCycles:ce,detectAllDirectedCycle:Ve,detectAllUndirectedCycle:Je,depthFirstSearch:Ge,dijkstra:vr,findAllPath:yr,findShortestPath:Ae,floydWarshall:zr,labelPropagation:un,louvain:Lt,iLouvain:G,kCore:ot,kMeans:Yt,cosineSimilarity:at,nodesCosineSimilarity:te,minimumSpanningTree:Er,pageRank:Ft,getNeighbors:Dt,Stack:na,GADDI:Pn},qo=M(91606),On=M(20663),bo=zt,gs=function(e){return function(t,r){return t[e]-r[e]}},ts=function(e,t,r){return e>=t&&e<=r},es=function(e,t,r,n){var i=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,h=1/f,A=s.x*s.x+s.y*s.y,P=u.x*u.x+u.y*u.y;if(c>i*A*P){var B=(o.x*u.y-o.y*u.x)*h,V=(o.x*s.y-o.y*s.x)*h;return!ts(B,0,1)||!ts(V,0,1)?null:{x:e.x+B*s.x,y:e.y+B*s.y}}return null},Wn=function(e,t){var r=e.x,n=e.y,i=e.width,o=e.height,s=r+i/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+i,y:n}),f.push({x:r+i,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var h=null,A=1;A<f.length&&(h=es(f[A-1],f[A],c,t),!h);A++);return h},so=function(e,t){var r=e.x,n=e.y,i=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<i*i)return null;var c=Math.atan(f/u);return{x:r+Math.abs(i*Math.cos(c))*Math.sign(u),y:n+Math.abs(i*Math.sin(c))*Math.sign(f)}},ia=function(e,t){var r=e.rx,n=e.ry,i=e.x,o=e.y,s=t.x-i,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:i+r*Math.cos(f),y:o+n*Math.sin(f)}},Bi=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),qo.transformMat3(n,n,t),{x:n[0],y:n[1]}},rs=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=rt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,r];return qo.transformMat3(i,i,n),{x:i[0],y:i[1]}},Po=function(e,t,r){var n=e.x-t.x,i=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=i*o-n*s;return{x:-(s*u-i*f)/c,y:-(n*f-o*u)/c}},ga=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},ys=function(e,t){var r=[];return e.forEach(function(n){var i=[];n.forEach(function(o){i.push(o*t)}),r.push(i)}),r},Qs=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var i=0;i<r;i+=1)n===i?t[n][i]=0:e[n][i]===0||!e[n][i]?t[n][i]=1/0:t[n][i]=e[n][i]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var i=0;i<r;i+=1)t[n][i]>t[n][o]+t[o][i]&&(t[n][i]=t[n][o]+t[o][i]);return t},ms=function(e,t){var r=e.nodes,n=e.edges,i=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];i.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],h=o[f];i[c][h]=1,t||(i[h][c]=1)}),i},Eo=function(e,t){e.translate(t.x,t.y)},Ai=function(e,t,r,n){n===void 0&&(n={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*i[0],c=u*i[4],h=0,A=0,P=0,B=0;e.animate(function($){return P=f*$,B=c*$,i=bo(i,[["t",P-h,B-A]]),h=P,A=B,{matrix:i}},n)}else{var V=bo(i,[["t",s,u]]);e.setMatrix(V)}},Ya=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,l.isArray)(t)||(n=[t,t]),(0,l.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=bo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},bs=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=bo(r,[["r",t]]),e.setMatrix(r)},Ha=function(e,t,r){for(var n=[],i=0;i<e;i++)n[i]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Ns(a,e,t){return(t[0]-a[0])*(e[1]-a[1])===(e[0]-a[0])*(t[1]-a[1])&&Math.min(a[0],e[0])<=t[0]&&t[0]<=Math.max(a[0],e[0])&&Math.min(a[1],e[1])<=t[1]&&t[1]<=Math.max(a[1],e[1])}var La=function(e,t,r){var n=!1,i=e.length,o=1e-6;function s(h){return Math.abs(h)<o?0:h<0?-1:1}if(i<=2)return!1;for(var u=0;u<i;u++){var f=e[u],c=e[(u+1)%i];if(Ns(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},ya=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Za=function(e,t){var r=!1;return(0,l.each)(e,function(n){if(es(n.from,n.to,t.from,t.to))return r=!0,!1}),r},xo=function(e,t){var r=function(A){var P=A.map(function(V){return V[0]}),B=A.map(function(V){return V[1]});return{minX:Math.min.apply(null,P),maxX:Math.max.apply(null,P),minY:Math.min.apply(null,B),maxY:Math.max.apply(null,B)}},n=function(A){for(var P=[],B=A.length,V=0;V<B-1;V++){var $=A[V],ut=A[V+1];P.push({from:{x:$[0],y:$[1]},to:{x:ut[0],y:ut[1]}})}if(P.length>1){var lt=A[0],dt=A[B-1];P.push({from:{x:dt[0],y:dt[1]},to:{x:lt[0],y:lt[1]}})}return P};if(e.length<2||t.length<2)return!1;var i=r(e),o=r(t);if(!ya(i,o))return!1;var s=!1;if((0,l.each)(t,function(h){if(La(e,h[0],h[1]))return s=!0,!1}),s||((0,l.each)(e,function(h){if(La(t,h[0],h[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,l.each)(f,function(h){if(Za(u,h))return c=!0,!1}),c},Ka=function(){function a(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return a.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),i={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return i},a}(),Ga=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Js=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var o=r/i,s=n/i;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ka=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),i=0,o=[],s=0;s<4;s++){var u=Ga(n,r[s]),f=u[0],c=u[1],h=u[2],A=u[3];o[s]=es({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:h,y:A}),o[s]&&(i+=1)}return[o,i]},$a=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Ga(n,r[s]),f=u[0],c=u[1],h=u[2],A=u[3],P=Js(t,new Ka(f,c,h,A));P=Math.abs(P-.5),P>=0&&P<=1&&(o+=1,i=P<i?P:i)}return o===0?-1:i},wo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,i=e;n<i.length;n++){var o=i[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},qa=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},Xo=function(e,t){var r=t.x1,n=t.y1,i=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*i+u*o,c;f<=0?c=0:(s=i-s,u=o-u,f=s*i+u*o,f<=0?c=0:c=f*f/(i*i+o*o));var h=s*s+u*u-c;return h<0&&(h=0),h},fi=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},ma=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,i=e.y>t.y+t.height,o=e.y<t.y,s=r||n||i||o;if(!s)return 0;if(i&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!i&&!o)return Math.pow(t.x-e.x,2);if(n&&!i&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},to=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],s=t.x,u=t.y,f=[i-r,o-n];if(On.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];On.normalize(c,c);var h=[s-r,u-n];return Math.abs(On.dot(h,c))},ba=function(e,t,r){return e+(t-e)*r},Mi=function(e,t,r){for(var n=Math.min(e.length,t.length),i=new Array(n),o=0;o<n;o++)i[o]=ba(e[o],t[o],r);return i},ca="rgb(95, 149, 255)",Es="rgb(255, 255, 255)",aa="rgb(0, 0, 0)",uo="rgb(247, 250, 255)",eo="rgb(239, 244, 255)",fo="rgb(253, 253, 253)",qs="rgb(250, 250, 250)",Yo="rgb(224, 224, 224)",Oo="rgb(234, 234, 234)",ns="rgb(245, 245, 245)",Wu="rgb(191, 213, 255)",yu="#4572d9",xs="rgb(223, 234, 255)",jt={mainStroke:ca,mainFill:eo,activeStroke:ca,activeFill:uo,inactiveStroke:Wu,inactiveFill:uo,selectedStroke:ca,selectedFill:Es,highlightStroke:yu,highlightFill:xs,disableStroke:Yo,disableFill:qs,edgeMainStroke:Yo,edgeActiveStroke:ca,edgeInactiveStroke:Oo,edgeSelectedStroke:ca,edgeHighlightStroke:ca,edgeDisableStroke:ns,comboMainStroke:Yo,comboMainFill:fo,comboActiveStroke:ca,comboActiveFill:uo,comboInactiveStroke:Yo,comboInactiveFill:fo,comboSelectedStroke:ca,comboSelectedFill:fo,comboHighlightStroke:yu,comboHighlightFill:fo,comboDisableStroke:Oo,comboDisableFill:qs},se={version:"0.8.7",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:jt.mainStroke,fill:eo},size:20,color:jt.mainStroke,linkPoints:{size:8,lineWidth:1,fill:jt.activeFill,stroke:jt.activeStroke}},nodeStateStyles:{active:{fill:jt.activeFill,stroke:jt.activeStroke,lineWidth:2,shadowColor:jt.mainStroke,shadowBlur:10},selected:{fill:jt.selectedFill,stroke:jt.selectedStroke,lineWidth:4,shadowColor:jt.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:jt.highlightFill,stroke:jt.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:jt.inactiveFill,stroke:jt.inactiveStroke,lineWidth:1},disable:{fill:jt.disableFill,stroke:jt.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:aa,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:jt.edgeMainStroke,lineAppendWidth:2},color:jt.edgeMainStroke},edgeStateStyles:{active:{stroke:jt.edgeActiveStroke,lineWidth:1},selected:{stroke:jt.edgeSelectedStroke,lineWidth:2,shadowColor:jt.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:jt.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:jt.edgeInactiveStroke,lineWidth:1},disable:{stroke:jt.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:aa,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:jt.comboMainFill,lineWidth:1,stroke:jt.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:jt.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:jt.comboActiveStroke,lineWidth:1,fill:jt.comboActiveFill},selected:{stroke:jt.comboSelectedStroke,lineWidth:2,fill:jt.comboSelectedFill,shadowColor:jt.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:jt.comboHighlightStroke,lineWidth:2,fill:jt.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:jt.comboInactiveStroke,fill:jt.comboInactiveFill,lineWidth:1},disable:{stroke:jt.comboDisableStroke,fill:jt.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},rr={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},cr=Math.PI,Gr=Math.sin,cn=Math.cos,xn=Gr(cr/8),Zn=cn(cr/8),Wi=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},i={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Bi(n,o),i=Bi(i,o)}var s=n.x,u=n.y,f=i.x,c=i.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Ra=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=t.getKeyShape(),o=i.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||se.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],h=[e.startPoint.x,e.startPoint.y],A=[e.endPoint.x,e.endPoint.y],P=o.height/2,B=o.width/2,V=P,$=P,ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,Wt=i.get("type"),Qt=Math.min(P/2,B/2),Zt=Math.min(P,B),de=s!=null&&s.pointPadding?Math.min(Zt,s==null?void 0:s.pointPadding):Qt;if(h[0]===A[0]&&h[1]===A[1]){switch(f){case"top":Wt==="circle"?(h=[c[0]-ut,c[1]-lt],A=[c[0]+dt,c[1]-xt]):(h=[c[0]-de,c[1]-P],A=[c[0]+de,c[1]-P]);break;case"top-right":V=P,$=B,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]+ut,c[1]-lt],A=[c[0]+xt,c[1]-dt]):(h=[c[0]+B-de,c[1]-P],A=[c[0]+B,c[1]-P+de]);break;case"right":V=B,$=B,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]+lt,c[1]-ut],A=[c[0]+xt,c[1]+dt]):(h=[c[0]+B,c[1]-de],A=[c[0]+B,c[1]+de]);break;case"bottom-right":V=B,$=P,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]+lt,c[1]+ut],A=[c[0]+dt,c[1]+xt]):(h=[c[0]+B,c[1]+P-de],A=[c[0]+B-de,c[1]+P]);break;case"bottom":V=P,$=P,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]+ut,c[1]+lt],A=[c[0]-dt,c[1]+xt]):(h=[c[0]-de,c[1]+P],A=[c[0]+de,c[1]+P]);break;case"bottom-left":V=P,$=B,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]-ut,c[1]+lt],A=[c[0]-xt,c[1]+dt]):(h=[c[0]-B,c[1]+P-de],A=[c[0]-B+de,c[1]+P]);break;case"left":V=B,$=B,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]-lt,c[1]+ut],A=[c[0]-xt,c[1]-dt]):(h=[c[0]-B,c[1]-de],A=[c[0]-B,c[1]+de]);break;case"top-left":V=B,$=P,Wt==="circle"?(ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]-lt,c[1]-ut],A=[c[0]-dt,c[1]-xt]):(h=[c[0]-B+de,c[1]-P],A=[c[0]-B,c[1]-P+de]);break;default:V=B,$=B,ut=V*xn,lt=V*Zn,dt=$*xn,xt=$*Zn,h=[c[0]-ut,c[1]-lt],A=[c[0]+dt,c[1]-xt]}if(s.clockwise===!1){var De=[h[0],h[1]];h=[A[0],A[1]],A=[De[0],De[1]]}}var xe=[h[0]-c[0],h[1]-c[1]],He=(V+u)/V,ar=($+u)/$;s.clockwise===!1&&(He=($+u)/$,ar=(V+u)/V);var Fr=On.scale([0,0],xe,He),rn=[c[0]+Fr[0],c[1]+Fr[1]],Zr=[A[0]-c[0],A[1]-c[1]],Nr=On.scale([0,0],Zr,ar),yn=[c[0]+Nr[0],c[1]+Nr[1]];return e.startPoint={x:h[0],y:h[1]},e.endPoint={x:A[0],y:A[1]},e.controlPoints=[{x:rn[0],y:rn[1]},{x:yn[0],y:yn[1]}],e},Fa=function(e,t,r,n,i){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=cr*2),r&&(u.x+=cn(c)*r,u.y+=Gr(c)*r),n){var h=c-cr/2;c>1/2*cr&&c<3*1/2*cr&&(h-=cr),u.x+=cn(h)*n,u.y+=Gr(h)*n}var A={x:u.x,y:u.y,angle:c};return i?(c>.5*cr&&c<1.5*cr&&(c-=cr),(0,U.__assign)({rotate:c},A)):A},Ho=function a(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var i=e.children.length-1;i>=0;i--)if(!a(e.children[i],e,i,n))return!1}return!0},xf=function a(e,t,r,n){if(e&&e.children){for(var i=e.children.length-1;i>=0;i--)if(!a(e.children[i],e,i,n))return}return n(e,t,r)!==!1},wa=function(e,t){typeof t=="function"&&Ho(e,null,-1,t)},ro=function(e,t){typeof t=="function"&&xf(e,null,-1,t)},mu=function(e,t){return t*(rr[e]||1)},ic=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(i){n.test(i)?r+=t:r+=mu(i,t)}),[r,t]},Yc=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},wf=function(e,t){var r=[],n={},i={};e.forEach(function(u){i[u.id]=u}),e.forEach(function(u,f){var c=(0,l.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!i[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var h=n[c.id];if(h){if(c.children=h.children,n[c.id]=c,h=c,!h.parentId){r.push(h);return}var A=n[h.parentId];if(A)A.children?A.children.push(c):A.children=[c];else{var P={id:h.parentId,children:[h]};n[h.parentId]=P,n[c.id]=c}return}if((0,l.isString)(u.parentId)){var B=n[u.parentId];if(B)B.children?B.children.push(c):B.children=[c],n[c.id]=c;else{var V={id:u.parentId,children:[c]};n[V.id]=V,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,wa(u,function(f){var c,h=n[f.id].itemType;h==="node"?c=n[f.comboId]:c=n[f.parentId],c&&h==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var A=o[f.id];return A&&(A.depth=f.depth),!0})}),r},Sf=function(e,t,r){var n,i=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(B){if(!u){if(B.id===t){o=B,B.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}wa(B,function(V){var $;return s[V.id]={children:(V==null?void 0:V.children)||[]},i=($=s[V.parentId||V.comboId||"root"])===null||$===void 0?void 0:$.children,V&&(V.removed||t===V.id)&&i?(f=V.parentId||V.comboId||"root",o=V,V.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),i=(n=s[f])===null||n===void 0?void 0:n.children;var c=i?i.indexOf(o):-1;if(c>-1&&i.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var h=!1;if(r){var A=0;(e||[]).forEach(function(B){h||wa(B,function(V){return r===V.id?(h=!0,V.children?V.children.push(o):V.children=[o],A=V.depth,o.itemType==="node"?o.depth=A+2:o.depth=A+1,!1):!0})})}else(!r||!h)&&o.itemType!=="node"&&e.push(o);var P=o.depth;wa(o,function(B){return B.itemType==="node"?P+=2:P+=1,B.depth=P,!0})}return e},_f=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var i=r==null?void 0:r.getModel(),o=i||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,h=o.fixCollapseSize,A=c?h:f,P=(0,l.isArray)(A)?A:[A,A],B=P[0],V=P[1],$=[B/2,V/2];return{minX:s-$[0],minY:u-$[1],maxX:s+$[0],maxY:u+$[1],x:s,y:u,width:B,height:V}}return e.forEach(function(ut){var lt=t.findById(ut.id);if(!(!lt||!lt.isVisible())){lt.set("bboxCanvasCache",void 0);var dt=lt.getCanvasBBox();dt.x&&n.minX>dt.minX&&(n.minX=dt.minX),dt.y&&n.minY>dt.minY&&(n.minY=dt.minY),dt.x&&n.maxX<dt.maxX&&(n.maxX=dt.maxX),dt.y&&n.maxY<dt.maxY&&(n.maxY=dt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ut){(n[ut]===1/0||n[ut]===-1/0)&&(n[ut]=void 0)}),n},tu=function(e){var t=(0,l.isNumber)(e.x)||(0,l.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,l.isNumber)(e.style.r)||(0,l.isNumber)(e.style.width)||(0,l.isNumber)(e.style.height)||(0,l.isNumber)(e.style.rx)||(0,l.isNumber)(e.style.ry)),t},bu=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,l.isObject)(n)&&!(0,l.isArray)(n)){var i={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,l.isString)(s)||(i[o]=(0,l.clone)(s))}),t[r]=i}else t[r]=(0,l.clone)(n)}),t},eu=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,l.clone)(t),t.callback){var i=t.callback;n.callback=function(){r(),i()}}else n.callback=r;return n},co=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,i=n===void 0?[]:n;if(!t&&!r){var o=!0;return wa(e,function(A){return(0,l.isString)(A.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(A){return!(0,l.isString)(A.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(A){return A.id}),f=i==null?void 0:i.map(function(A){return A.id}),c=(0,U.__spreadArray)((0,U.__spreadArray)([],u,!0),f,!0),h=(r||[]).find(function(A){return!c.includes(A.source)||!c.includes(A.target)});return h?(console.warn("G6 Warning Tips: The source %c".concat(h.source,"%c or the target %c").concat(h.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Hc=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,l.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Mf=function(){function a(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return a.prototype.formatModes=function(){var e=this.modes;(0,l.each)(e,function(t){(0,l.each)(t,function(r,n){(0,l.isString)(r)&&(t[n]={type:r})})})},a.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],i;(0,l.each)(r||[],function(o){var s=X.getBehavior(o.type||o);s&&(i=new s(o),i&&(i.bind(t),n.push(i)))}),this.currentBehaves=n},a.mergeBehaviors=function(e,t){return(0,l.each)(t,function(r){e.indexOf(r)<0&&((0,l.isString)(r)&&(r={type:r}),e.push(r))}),e},a.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var i="";(0,l.isString)(n)?i=n:i=n.type,t.indexOf(i)<0&&r.push(n)}),r},a.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,i=e,o=r[i];o&&(n.emit("beforemodechange",{mode:e}),(0,l.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(i),n.emit("aftermodechange",{mode:e}),this.mode=e)},a.prototype.getMode=function(){return this.mode},a.prototype.manipulateBehaviors=function(e,t,r){var n=this,i;if((0,l.isArray)(e)?i=e:i=[e],(0,l.isArray)(t))return(0,l.each)(t,function(s){n.modes[s]?r?n.modes[s]=a.mergeBehaviors(n.modes[s]||[],i):n.modes[s]=a.filterBehaviors(n.modes[s]||[],i):r&&(n.modes[s]=i)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=i),r?this.modes[o]=a.mergeBehaviors(this.modes[o]||[],i):this.modes[o]=a.filterBehaviors(this.modes[o]||[],i),this.formatModes(),this.setMode(this.mode),this},a.prototype.updateBehavior=function(e,t,r){(0,l.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var i=n.length,o=0;o<i;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},a.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},a}(),zl=Mf,Ls=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Wl=new RegExp("([a-z])["+Ls+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ls+"]*,?["+Ls+"]*)+)","ig"),Vl=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ls+"]*,?["+Ls+"]*","ig"),Eu=function(a){if(!a)return null;if((0,l.isArray)(a))return a;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(a).replace(Wl,function(r,n,i){var o=[],s=n.toLowerCase();if(i.replace(Vl,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return a}),t},Xn=function(a,e){for(var t=[],r=0,n=a.length;n-2*!e>r;r+=2){var i=[{x:+a[r-2],y:+a[r-1]},{x:+a[r],y:+a[r+1]},{x:+a[r+2],y:+a[r+3]},{x:+a[r+4],y:+a[r+5]}];e?r?n-4===r?i[3]={x:+a[0],y:+a[1]}:n-2===r&&(i[2]={x:+a[0],y:+a[1]},i[3]={x:+a[2],y:+a[3]}):i[0]={x:+a[n-2],y:+a[n-1]}:n-4===r?i[3]=i[2]:r||(i[0]={x:+a[r],y:+a[r+1]}),t.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return t},Cf=function(a,e,t,r,n){var i=[];if(n===null&&r===null&&(r=t),a=+a,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=a+t*Math.cos(-r*o),u=a+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);i=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else i=[["M",a,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return i},Af=function(a){if(a=Eu(a),!a||!a.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,i=0,o=0,s,u;a[0][0]==="M"&&(t=+a[0][1],r=+a[0][2],n=t,i=r,o++,e[0]=["M",t,r]);for(var f=a.length===3&&a[0][0]==="M"&&a[1][0].toUpperCase()==="R"&&a[2][0].toUpperCase()==="Z",c=void 0,h=void 0,A=o,P=a.length;A<P;A++){if(e.push(c=[]),h=a[A],s=h[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+t,c[7]=+h[7]+r;break;case"V":c[1]=+h[1]+r;break;case"H":c[1]=+h[1]+t;break;case"R":u=[t,r].concat(h.slice(1));for(var B=2,V=u.length;B<V;B++)u[B]=+u[B]+t,u[++B]=+u[B]+r;e.pop(),e=e.concat(Xn(u,f));break;case"O":e.pop(),u=Cf(t,r,h[1],h[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Cf(t,r,h[1],h[2],h[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+h[1]+t,i=+h[2]+r;break;default:for(var B=1,V=h.length;B<V;B++)c[B]=+h[B]+(B%2?t:r)}else if(s==="R")u=[t,r].concat(h.slice(1)),e.pop(),e=e.concat(Xn(u,f)),c=["R"].concat(h.slice(-2));else if(s==="O")e.pop(),u=Cf(t,r,h[1],h[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Cf(t,r,h[1],h[2],h[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var $=0,ut=h.length;$<ut;$++)c[$]=h[$];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+i;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],i=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Vu=function(a,e,t,r){return[a,e,t,r,t,r]},ac=function(a,e,t,r,n,i){var o=.3333333333333333,s=2/3;return[o*a+s*t,o*e+s*r,o*n+s*t,o*i+s*r,n,i]},Tf=function(a,e,t,r,n,i,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,h=Math.PI/180*(+n||0),A=[],P,B,V,$,ut,lt=function(Hi,ki,Zi){var qi=Hi*Math.cos(Zi)-ki*Math.sin(Zi),Ca=Hi*Math.sin(Zi)+ki*Math.cos(Zi);return{x:qi,y:Ca}};if(f)B=f[0],V=f[1],$=f[2],ut=f[3];else{P=lt(a,e,-h),a=P.x,e=P.y,P=lt(s,u,-h),s=P.x,u=P.y,a===s&&e===u&&(s+=1,u+=1);var dt=(a-s)/2,xt=(e-u)/2,Wt=dt*dt/(t*t)+xt*xt/(r*r);Wt>1&&(Wt=Math.sqrt(Wt),t=Wt*t,r=Wt*r);var Qt=t*t,Zt=r*r,de=(i===o?-1:1)*Math.sqrt(Math.abs((Qt*Zt-Qt*xt*xt-Zt*dt*dt)/(Qt*xt*xt+Zt*dt*dt)));$=de*t*xt/r+(a+s)/2,ut=de*-r*dt/t+(e+u)/2,B=Math.asin(((e-ut)/r).toFixed(9)),V=Math.asin(((u-ut)/r).toFixed(9)),B=a<$?Math.PI-B:B,V=s<$?Math.PI-V:V,B<0&&(B=Math.PI*2+B),V<0&&(V=Math.PI*2+V),o&&B>V&&(B=B-Math.PI*2),!o&&V>B&&(V=V-Math.PI*2)}var De=V-B;if(Math.abs(De)>c){var xe=V,He=s,ar=u;V=B+c*(o&&V>B?1:-1),s=$+t*Math.cos(V),u=ut+r*Math.sin(V),A=Tf(s,u,t,r,n,0,o,He,ar,[V,xe,$,ut])}De=V-B;var Fr=Math.cos(B),rn=Math.sin(B),Zr=Math.cos(V),Nr=Math.sin(V),yn=Math.tan(De/4),dn=4/3*t*yn,Lr=4/3*r*yn,Yr=[a,e],on=[a+dn*rn,e-Lr*Fr],sn=[s+dn*Nr,u-Lr*Zr],_n=[s,u];if(on[0]=2*Yr[0]-on[0],on[1]=2*Yr[1]-on[1],f)return[on,sn,_n].concat(A);A=[on,sn,_n].concat(A).join().split(",");for(var Ln=[],ti=0,li=A.length;ti<li;ti++)Ln[ti]=ti%2?lt(A[ti-1],A[ti],h).y:lt(A[ti],A[ti+1],h).x;return Ln},oc=function(a,e){var t=Af(a),r=e&&Af(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,h=function(dt,xt,Wt){var Qt,Zt;if(!dt)return["C",xt.x,xt.y,xt.x,xt.y,xt.x,xt.y];switch(!(dt[0]in{T:1,Q:1})&&(xt.qx=xt.qy=null),dt[0]){case"M":xt.X=dt[1],xt.Y=dt[2];break;case"A":dt=["C"].concat(Tf.apply(0,[xt.x,xt.y].concat(dt.slice(1))));break;case"S":Wt==="C"||Wt==="S"?(Qt=xt.x*2-xt.bx,Zt=xt.y*2-xt.by):(Qt=xt.x,Zt=xt.y),dt=["C",Qt,Zt].concat(dt.slice(1));break;case"T":Wt==="Q"||Wt==="T"?(xt.qx=xt.x*2-xt.qx,xt.qy=xt.y*2-xt.qy):(xt.qx=xt.x,xt.qy=xt.y),dt=["C"].concat(ac(xt.x,xt.y,xt.qx,xt.qy,dt[1],dt[2]));break;case"Q":xt.qx=dt[1],xt.qy=dt[2],dt=["C"].concat(ac(xt.x,xt.y,dt[1],dt[2],dt[3],dt[4]));break;case"L":dt=["C"].concat(Vu(xt.x,xt.y,dt[1],dt[2]));break;case"H":dt=["C"].concat(Vu(xt.x,xt.y,dt[1],xt.y));break;case"V":dt=["C"].concat(Vu(xt.x,xt.y,xt.x,dt[1]));break;case"Z":dt=["C"].concat(Vu(xt.x,xt.y,xt.X,xt.Y));break;default:break}return dt},A=function(dt,xt){if(dt[xt].length>7){dt[xt].shift();for(var Wt=dt[xt];Wt.length;)o[xt]="A",r&&(s[xt]="A"),dt.splice(xt++,0,["C"].concat(Wt.splice(0,6)));dt.splice(xt,1),c=Math.max(t.length,r&&r.length||0)}},P=function(dt,xt,Wt,Qt,Zt){dt&&xt&&dt[Zt][0]==="M"&&xt[Zt][0]!=="M"&&(xt.splice(Zt,0,["M",Qt.x,Qt.y]),Wt.bx=0,Wt.by=0,Wt.x=dt[Zt][1],Wt.y=dt[Zt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var B=0;B<c;B++){t[B]&&(u=t[B][0]),u!=="C"&&(o[B]=u,B&&(f=o[B-1])),t[B]=h(t[B],n,f),o[B]!=="A"&&u==="C"&&(o[B]="C"),A(t,B),r&&(r[B]&&(u=r[B][0]),u!=="C"&&(s[B]=u,B&&(f=s[B-1])),r[B]=h(r[B],i,f),s[B]!=="A"&&u==="C"&&(s[B]="C"),A(r,B)),P(t,r,n,i,B),P(r,t,i,n,B);var V=t[B],$=r&&r[B],ut=V.length,lt=r&&$.length;n.x=V[ut-2],n.y=V[ut-1],n.bx=parseFloat(V[ut-4])||n.x,n.by=parseFloat(V[ut-3])||n.y,i.bx=r&&(parseFloat($[lt-4])||i.x),i.by=r&&(parseFloat($[lt-3])||i.y),i.x=r&&$[lt-2],i.y=r&&$[lt-1]}return r?[t,r]:t},If=/,?([a-z]),?/gi,sc=function(a){return a.join(",").replace(If,"$1")},Zc=function(a,e,t,r,n){var i=-3*e+9*t-9*r+3*n,o=a*i+6*e-12*t+6*r;return a*o-3*e+3*t},Pf=function(a,e,t,r,n,i,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],A=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,B=0;B<c;B++){var V=f*h[B]+f,$=Zc(V,a,t,n,o),ut=Zc(V,e,r,i,s),lt=$*$+ut*ut;P+=A[B]*Math.sqrt(lt)}return f*P},Kc=function(a,e,t,r,n,i,o,s){for(var u=[],f=[[],[]],c,h,A,P,B=0;B<2;++B){if(B===0?(h=6*a-12*t+6*n,c=-3*a+9*t-9*n+3*o,A=3*t-3*a):(h=6*e-12*r+6*i,c=-3*e+9*r-9*i+3*s,A=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;P=-A/h,P>0&&P<1&&u.push(P);continue}var V=h*h-4*A*c,$=Math.sqrt(V);if(!(V<0)){var ut=(-h+$)/(2*c);ut>0&&ut<1&&u.push(ut);var lt=(-h-$)/(2*c);lt>0&&lt<1&&u.push(lt)}}for(var dt=u.length,xt=dt,Wt;dt--;)P=u[dt],Wt=1-P,f[0][dt]=Wt*Wt*Wt*a+3*Wt*Wt*P*t+3*Wt*P*P*n+P*P*P*o,f[1][dt]=Wt*Wt*Wt*e+3*Wt*Wt*P*r+3*Wt*P*P*i+P*P*P*s;return f[0][xt]=a,f[1][xt]=e,f[0][xt+1]=o,f[1][xt+1]=s,f[0].length=f[1].length=xt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},jl=function(a,e,t,r,n,i,o,s){if(!(Math.max(a,t)<Math.min(n,o)||Math.min(a,t)>Math.max(n,o)||Math.max(e,r)<Math.min(i,s)||Math.min(e,r)>Math.max(i,s))){var u=(a*r-e*t)*(n-o)-(a-t)*(n*s-i*o),f=(a*r-e*t)*(i-s)-(e-r)*(n*s-i*o),c=(a-t)*(i-s)-(e-r)*(n-o);if(c){var h=u/c,A=f/c,P=+h.toFixed(2),B=+A.toFixed(2);if(!(P<+Math.min(a,t).toFixed(2)||P>+Math.max(a,t).toFixed(2)||P<+Math.min(n,o).toFixed(2)||P>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(i,s).toFixed(2)||B>+Math.max(i,s).toFixed(2)))return{x:h,y:A}}}},ks=function(a,e,t){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},$c=function(a,e,t,r,n){if(n)return[["M",+a+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",a,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return i.parsePathArray=sc,i},ju=function(a,e,t,r){return a===null&&(a=e=t=r=0),e===null&&(e=a.y,t=a.width,r=a.height,a=a.x),{x:a,y:e,width:t,w:t,height:r,h:r,x2:a+t,y2:e+r,cx:a+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:$c(a,e,t,r),vb:[a,e,t,r].join(" ")}},Xu=function(a,e){return a=ju(a),e=ju(e),ks(e,a.x,a.y)||ks(e,a.x2,a.y)||ks(e,a.x,a.y2)||ks(e,a.x2,a.y2)||ks(a,e.x,e.y)||ks(a,e.x2,e.y)||ks(a,e.x,e.y2)||ks(a,e.x2,e.y2)||(a.x<e.x2&&a.x>e.x||e.x<a.x2&&e.x>a.x)&&(a.y<e.y2&&a.y>e.y||e.y<a.y2&&e.y>a.y)},Qc=function(a,e,t,r,n,i,o,s){(0,l.isArray)(a)||(a=[a,e,t,r,n,i,o,s]);var u=Kc.apply(null,a);return ju(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Yu=function(a,e,t,r,n,i,o,s,u){var f=1-u,c=Math.pow(f,3),h=Math.pow(f,2),A=u*u,P=A*u,B=c*a+h*3*u*t+f*3*u*u*n+P*o,V=c*e+h*3*u*r+f*3*u*u*i+P*s,$=a+2*u*(t-a)+A*(n-2*t+a),ut=e+2*u*(r-e)+A*(i-2*r+e),lt=t+2*u*(n-t)+A*(o-2*n+t),dt=r+2*u*(i-r)+A*(s-2*i+r),xt=f*a+u*t,Wt=f*e+u*r,Qt=f*n+u*o,Zt=f*i+u*s,de=90-Math.atan2($-lt,ut-dt)*180/Math.PI;return{x:B,y:V,m:{x:$,y:ut},n:{x:lt,y:dt},start:{x:xt,y:Wt},end:{x:Qt,y:Zt},alpha:de}},Do=function(a,e,t){var r=Qc(a),n=Qc(e);if(!Xu(r,n))return t?0:[];for(var i=Pf.apply(0,a),o=Pf.apply(0,e),s=~~(i/8),u=~~(o/8),f=[],c=[],h={},A=t?0:[],P=0;P<s+1;P++){var B=Yu.apply(0,a.concat(P/s));f.push({x:B.x,y:B.y,t:P/s})}for(var P=0;P<u+1;P++){var B=Yu.apply(0,e.concat(P/u));c.push({x:B.x,y:B.y,t:P/u})}for(var P=0;P<s;P++)for(var V=0;V<u;V++){var $=f[P],ut=f[P+1],lt=c[V],dt=c[V+1],xt=Math.abs(ut.x-$.x)<.001?"y":"x",Wt=Math.abs(dt.x-lt.x)<.001?"y":"x",Qt=jl($.x,$.y,ut.x,ut.y,lt.x,lt.y,dt.x,dt.y);if(Qt){if(h[Qt.x.toFixed(4)]===Qt.y.toFixed(4))continue;h[Qt.x.toFixed(4)]=Qt.y.toFixed(4);var Zt=$.t+Math.abs((Qt[xt]-$[xt])/(ut[xt]-$[xt]))*(ut.t-$.t),de=lt.t+Math.abs((Qt[Wt]-lt[Wt])/(dt[Wt]-lt[Wt]))*(dt.t-lt.t);Zt>=0&&Zt<=1&&de>=0&&de<=1&&(t?A+=1:A.push({x:Qt.x,y:Qt.y,t1:Zt,t2:de}))}}return A},xu=function(a,e,t){a=oc(a),e=oc(e);for(var r,n,i,o,s,u,f,c,h,A,P=t?0:[],B=0,V=a.length;B<V;B++){var $=a[B];if($[0]==="M")r=s=$[1],n=u=$[2];else{$[0]==="C"?(h=[r,n].concat($.slice(1)),r=h[6],n=h[7]):(h=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,lt=e.length;ut<lt;ut++){var dt=e[ut];if(dt[0]==="M")i=f=dt[1],o=c=dt[2];else{dt[0]==="C"?(A=[i,o].concat(dt.slice(1)),i=A[6],o=A[7]):(A=[i,o,i,o,f,c,f,c],i=f,o=c);var xt=Do(h,A,t);if(t)P+=xt;else{for(var Wt=0,Qt=xt.length;Wt<Qt;Wt++)xt[Wt].segment1=B,xt[Wt].segment2=ut,xt[Wt].bez1=h,xt[Wt].bez2=A;P=P.concat(xt)}}}}}return P},Jc=function(a,e){return xu(a,e)};function Xl(a,e){var t=[],r=[];function n(i,o){if(i.length===1)t.push(i[0]),r.push(i[0]);else{for(var s=[],u=0;u<i.length-1;u++)u===0&&t.push(i[0]),u===i.length-2&&r.push(i[u+1]),s[u]=[(1-o)*i[u][0]+o*i[u+1][0],(1-o)*i[u][1]+o*i[u+1][1]];n(s,o)}}return a.length&&n(a,e),{left:t,right:r.reverse()}}function qc(a,e,t){var r=[[a[1],a[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var i=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Xl(i,u);n.push(f.left),i=f.right}n.push(i);var c=n.map(function(h){var A=[];return h.length===4&&(A.push("C"),A=A.concat(h[2])),h.length>=3&&(h.length===3&&A.push("Q"),A=A.concat(h[1])),h.length===2&&A.push("L"),A=A.concat(h[h.length-1]),A});return c}var Yl=function(a,e,t){if(t===1)return[[].concat(a)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(qc(a,e,t));else{var n=[].concat(a);n[0]==="M"&&(n[0]="L");for(var i=0;i<=t-1;i++)r.push(n)}return r},Of=function(a,e){if(a.length===1)return a;var t=a.length-1,r=e.length-1,n=t/r,i=[];if(a.length===1&&a[0][0]==="M"){for(var o=0;o<r-t;o++)a.push(a[0]);return a}for(var o=0;o<r;o++){var s=Math.floor(n*o);i[s]=(i[s]||0)+1}var u=i.reduce(function(f,c,h){return h===t?f.concat(a[t]):f.concat(Yl(a[h],a[h+1],c))},[]);return u.unshift(a[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Hl=function(a,e){if(a.length!==e.length)return!1;var t=!0;return(0,l.each)(a,function(r,n){if(r!==e[n])return t=!1,!1}),t};function tl(a,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),a<n&&(n=a,r="del"),{type:r,min:n}}var ru=function(a,e){var t=a.length,r=e.length,n,i,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=a[u-1];for(var f=1;f<=r;f++){i=e[f-1],Hl(n,i)?o=0:o=1;var c=s[u-1][f].min+1,h=s[u][f-1].min+1,A=s[u-1][f-1].min+o;s[u][f]=tl(c,h,A)}}return s},Aa=function(a,e){var t=ru(a,e),r=a.length,n=e.length,i=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&i.push({index:u-1,type:t[u][o].type})}for(var u=i.length-1;u>=0;u--)o=i[u].index,i[u].type==="add"?a.splice(o,0,[].concat(a[o])):a.splice(o,1)}r=a.length;var h=n-r;if(r<n)for(var u=0;u<h;u++)a[r-1][0]==="z"||a[r-1][0]==="Z"?a.splice(r-2,0,a[r-2]):a.push(a[r-1]),r+=1;return a};function Df(a,e,t){for(var r=[].concat(a),n,i=1/(t+1),o=nu(e)[0],s=1;s<=t;s++)i*=s,n=Math.floor(a.length*i),n===0?r.unshift([o[0]*i+a[n][0]*(1-i),o[1]*i+a[n][1]*(1-i)]):r.splice(n,0,[o[0]*i+a[n][0]*(1-i),o[1]*i+a[n][1]*(1-i)]);return r}function nu(a){var e=[];switch(a[0]){case"M":e.push([a[1],a[2]]);break;case"L":e.push([a[1],a[2]]);break;case"A":e.push([a[6],a[7]]);break;case"Q":e.push([a[3],a[4]]),e.push([a[1],a[2]]);break;case"T":e.push([a[1],a[2]]);break;case"C":e.push([a[5],a[6]]),e.push([a[1],a[2]]),e.push([a[3],a[4]]);break;case"S":e.push([a[3],a[4]]),e.push([a[1],a[2]]);break;case"H":e.push([a[1],a[1]]);break;case"V":e.push([a[1],a[1]]);break;default:}return e}var Zo=function(a,e){if(a.length<=1)return a;for(var t,r=0;r<e.length;r++)if(a[r][0]!==e[r][0])switch(t=nu(a[r]),e[r][0]){case"M":a[r]=["M"].concat(t[0]);break;case"L":a[r]=["L"].concat(t[0]);break;case"A":a[r]=[].concat(e[r]),a[r][6]=t[0][0],a[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Df(t,a[r-1],1);else{a[r]=e[r];break}a[r]=["Q"].concat(t.reduce(function(n,i){return n.concat(i)},[]));break;case"T":a[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Df(t,a[r-1],2);else{a[r]=e[r];break}a[r]=["C"].concat(t.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(t.length<2)if(r>0)t=Df(t,a[r-1],1);else{a[r]=e[r];break}a[r]=["S"].concat(t.reduce(function(n,i){return n.concat(i)},[]));break;default:a[r]=e[r]}return a},el=function(){function a(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return a.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},a.prototype.save=function(){},a.prototype.restore=function(){},a}(),rl=el;function Zl(a,e){var t=a.indexOf(e);t!==-1&&a.splice(t,1)}var Kl=typeof window!="undefined"&&typeof window.document!="undefined";function $l(a,e){if(a.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===a){r=!0;break}t=t.getParent()}return r}function nl(a){return a.cfg.visible&&a.cfg.capture}var Ko=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,l.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(J),il=Ko,al=M(44675),ol=function(a,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return a.concat(i||Array.prototype.slice.call(e))},Ql=function(){function a(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return a}(),sl=function(){function a(e){this.version=e,this.type="node",this.name="node",this.os=al.platform}return a}(),Ta=function(){function a(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return a}(),Nh=function(){function a(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return a}(),bn=function(){function a(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return a}(),Nf=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ei=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ul=3,Jl=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Nf]],Hu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ql(a){return a?th(a):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new bn:typeof navigator!="undefined"?th(navigator.userAgent):ws()}function uc(a){return a!==""&&Jl.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var i=n.exec(a);return!!i&&[r,i]},!1)}function Lh(a){var e=uc(a);return e?e[0]:null}function th(a){var e=uc(a);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Nh;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<ul&&(n=ol(ol([],n,!0),Rh(ul-n.length),!0)):n=[];var i=n.join("."),o=kh(a),s=Ei.exec(a);return s&&s[1]?new Ta(t,i,o,s[1]):new Ql(t,i,o)}function kh(a){for(var e=0,t=Hu.length;e<t;e++){var r=Hu[e],n=r[0],i=r[1],o=i.exec(a);if(o)return n}return null}function ws(){var a=typeof al!="undefined"&&al.version;return a?new sl(al.version.slice(1)):null}function Rh(a){for(var e=[],t=0;t<a;t++)e.push("0");return e}function fc(a,e){var t=[],r=a[0],n=a[1],i=a[2],o=a[3],s=a[4],u=a[5],f=a[6],c=a[7],h=a[8],A=e[0],P=e[1],B=e[2],V=e[3],$=e[4],ut=e[5],lt=e[6],dt=e[7],xt=e[8];return t[0]=A*r+P*o+B*f,t[1]=A*n+P*s+B*c,t[2]=A*i+P*u+B*h,t[3]=V*r+$*o+ut*f,t[4]=V*n+$*s+ut*c,t[5]=V*i+$*u+ut*h,t[6]=lt*r+dt*o+xt*f,t[7]=lt*n+dt*s+xt*c,t[8]=lt*i+dt*u+xt*h,t}function ea(a,e){var t=[],r=e[0],n=e[1];return t[0]=a[0]*r+a[3]*n+a[6],t[1]=a[1]*r+a[4]*n+a[7],t}function cc(a){var e=[],t=a[0],r=a[1],n=a[2],i=a[3],o=a[4],s=a[5],u=a[6],f=a[7],c=a[8],h=c*o-s*f,A=-c*i+s*u,P=f*i-o*u,B=t*h+r*A+n*P;return B?(B=1/B,e[0]=h*B,e[1]=(-c*r+n*f)*B,e[2]=(s*r-n*o)*B,e[3]=A*B,e[4]=(c*t-n*u)*B,e[5]=(-s*t+n*i)*B,e[6]=P*B,e[7]=(-f*t+r*u)*B,e[8]=(o*t-r*i)*B,e):null}var Ss=zt,Lf="matrix",eh=["zIndex","capture","visible","type"],Bh=["repeat"],iu=":",fl="*";function is(a){for(var e=[],t=0;t<a.length;t++)(0,l.isArray)(a[t])?e.push([].concat(a[t])):e.push(a[t]);return e}function Zu(a,e){var t={},r=e.attrs;for(var n in a)t[n]=r[n];return t}function lc(a,e){var t={},r=e.attr();return(0,l.each)(a,function(n,i){Bh.indexOf(i)===-1&&!(0,l.isEqual)(r[i],n)&&(t[i]=n)}),t}function hc(a,e){if(e.onFrame)return a;var t=e.startTime,r=e.delay,n=e.duration,i=Object.prototype.hasOwnProperty;return(0,l.each)(a,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,l.each)(e.toAttrs,function(s,u){i.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),a}var _s=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,l.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],o=r[1];if(!i)return this.attrs;if((0,l.isObject)(i)){for(var s in i)this.setAttr(s,i[s]);return this.afterAttrsChange(i),this}return r.length===2?(this.setAttr(i,o),this.afterAttrsChange((t={},t[i]=o,t)),this):this.attrs[i]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),i=r.indexOf(this);r.splice(i,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),i=r.indexOf(this);r.splice(i,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(Zl(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Lf,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Lf)},e.prototype.setMatrix=function(t){this.attr(Lf,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=fc(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=fc(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?ea(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=cc(r);if(n)return ea(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var i=this.getShapeBase(),o=(0,l.upperFirst)(t.type),s=i[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,l.each)(r,function(s,u){(0,l.isArray)(r[u])?n[u]=is(r[u]):n[u]=r[u]});var i=this.constructor,o=new i({attrs:n});return(0,l.each)(eh,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},a.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var i=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],h=c===void 0?l.noop:c,A=t[4],P=A===void 0?0:A,B,V,$,ut,lt;(0,l.isFunction)(o)?(B=o,o={}):(0,l.isObject)(o)&&o.onFrame&&(B=o.onFrame,V=o.repeat),(0,l.isObject)(s)?(lt=s,s=lt.duration,f=lt.easing||"easeLinear",P=lt.delay||0,V=lt.repeat||V||!1,h=lt.callback||l.noop,$=lt.pauseCallback||l.noop,ut=lt.resumeCallback||l.noop):((0,l.isNumber)(h)&&(P=h,h=null),(0,l.isFunction)(f)?(h=f,f="easeLinear"):f=f||"easeLinear");var dt=lc(o,this),xt={fromAttrs:Zu(dt,this),toAttrs:dt,duration:s,easing:f,repeat:V,callback:h,pauseCallback:$,resumeCallback:ut,delay:P,startTime:n.getTime(),id:(0,l.uniqueId)(),onFrame:B,pathFormatted:!1};i.length>0?i=hc(i,xt):n.addAnimator(this),i.push(xt),this.set("animations",i),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,l.each)(n,function(i){t&&(i.onFrame?r.attr(i.onFrame(1)):r.attr(i.toAttrs)),i.callback&&i.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,l.each)(r,function(i){i._paused=!0,i._pauseTime=n,i.pauseCallback&&i.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),i=this.get("_pause").pauseTime;return(0,l.each)(n,function(o){o.startTime=o.startTime+(r-i),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,i=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(A){var P=i[A],B=P.get("name");if(B){if((P.isGroup()||P.isCanvas&&P.isCanvas())&&s&&$l(P,s))return"break";(0,l.isArray)(B)?(0,l.each)(B,function(V){n.emitDelegateEvent(P,V,r)}):f.emitDelegateEvent(P,B,r)}},f=this,c=0;c<i.length;c++){var h=u(c);if(h==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var i=this.getEvents(),o=r+iu+n.type;(i[o]||i[fl])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),i=Ss(n,[["t",t,r]]);return this.setMatrix(i),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,i=this.attr("y")||0;return this.translate(t-n,r-i),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),i=Ss(n,[["s",t,r||t]]);return this.setMatrix(i),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Ss(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,i=r.y,o=this.getMatrix(),s=Ss(o,[["t",-n,-i],["r",t],["t",n,i]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var i=this.getMatrix(),o=Ss(i,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(il),as=_s,cl={},So="_INDEX";function dc(a,e){if(a.set("canvas",e),a.isGroup()){var t=a.get("children");t.length&&t.forEach(function(r){dc(r,e)})}}function au(a,e){if(a.set("timeline",e),a.isGroup()){var t=a.get("children");t.length&&t.forEach(function(r){au(r,e)})}}function ll(a,e){var t=a.getChildren();return t.indexOf(e)>=0}function rh(a,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),Zl(a.getChildren(),e)}function vc(a){return function(e,t){var r=a(e,t);return r===0?e[So]-t[So]:r}}var kf=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,i=-1/0,o=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});u.length>0?((0,l.each)(u,function(c){var h=c.getBBox();o.push(h.minX,h.maxX),s.push(h.minY,h.maxY)}),t=(0,l.min)(o),r=(0,l.max)(o),n=(0,l.min)(s),i=(0,l.max)(s)):(t=0,r=0,n=0,i=0);var f={x:t,y:n,minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n};return f},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,i=-1/0,o=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});u.length>0?((0,l.each)(u,function(c){var h=c.getCanvasBBox();o.push(h.minX,h.maxX),s.push(h.minY,h.maxY)}),t=(0,l.min)(o),r=(0,l.max)(o),n=(0,l.min)(s),i=(0,l.max)(s)):(t=0,r=0,n=0,i=0);var f={x:t,y:n,minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n};return f},e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(a.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();a.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,l.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=t[1];(0,l.isObject)(n)?i=n:i.type=n;var o=cl[i.type];o||(o=(0,l.upperFirst)(i.type),cl[i.type]=o);var s=this.getShapeBase(),u=new s[o](i);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=t[1],o;if((0,l.isFunction)(n))i?o=new n(i):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!nl(this))return null;var i=this.getChildren(),o;if(this.isCanvas())o=this._findShape(i,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(i,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,i){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(nl(u)&&(u.isGroup()?o=u.getShape(r,n,i):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),i=this.get("timeline"),o=t.getParent();o&&rh(o,t,!1),t.set("parent",this),r&&dc(t,r),i&&au(t,i),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,l.each)(t,function(r,n){return r[So]=n,r}),t.sort(vc(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),a.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,l.each)(n,function(i){t(i)&&r.push(i),i.isGroup()&&(r=r.concat(i.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,l.each)(n,function(i){if(t(i)?r=i:i.isGroup()&&(r=i.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(as),Gi=kf,Rs=0,os=0,No=0,Bs=1e3,wu,Gs,Rf=0,ou=0,Ku=0,Su=typeof performance=="object"&&performance.now?performance:Date,ss=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function hl(){return ou||(ss(Fs),ou=Su.now()+Ku)}function Fs(){ou=0}function an(){this._call=this._time=this._next=null}an.prototype=Bf.prototype={constructor:an,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?hl():+t)+(e==null?0:+e),!this._next&&Gs!==this&&(Gs?Gs._next=this:wu=this,Gs=this),this._call=a,this._time=t,pc()},stop:function(){this._call&&(this._call=null,this._time=1/0,pc())}};function Bf(a,e,t){var r=new an;return r.restart(a,e,t),r}function Gh(){hl(),++Rs;for(var a=wu,e;a;)(e=ou-a._time)>=0&&a._call.call(null,e),a=a._next;--Rs}function Gf(){ou=(Rf=Su.now())+Ku,Rs=os=0;try{Gh()}finally{Rs=0,Uh(),ou=0}}function Fh(){var a=Su.now(),e=a-Rf;e>Bs&&(Ku-=e,Rf=a)}function Uh(){for(var a,e=wu,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:wu=t);Gs=a,pc(r)}function pc(a){if(!Rs){os&&(os=clearTimeout(os));var e=a-ou;e>24?(a<1/0&&(os=setTimeout(Gf,a-Su.now()-Ku)),No&&(No=clearInterval(No))):(No||(Rf=Su.now(),No=setInterval(Fh,Bs)),Rs=1,ss(Gf))}}function dl(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function nh(a,e){var t=Object.create(a.prototype);for(var r in e)t[r]=e[r];return t}function Us(){}var _u=.7,Mu=1/_u,$u="\\s*([+-]?\\d+)\\s*",Ms="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",lo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ih=/^#([0-9a-f]{3,8})$/,Qu=new RegExp("^rgb\\("+[$u,$u,$u]+"\\)$"),ah=new RegExp("^rgb\\("+[lo,lo,lo]+"\\)$"),Ju=new RegExp("^rgba\\("+[$u,$u,$u,Ms]+"\\)$"),vl=new RegExp("^rgba\\("+[lo,lo,lo,Ms]+"\\)$"),pl=new RegExp("^hsl\\("+[Ms,lo,lo]+"\\)$"),gl=new RegExp("^hsla\\("+[Ms,lo,lo,Ms]+"\\)$"),gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dl(Us,qu,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:yc,formatHex:yc,formatHsl:mc,formatRgb:yl,toString:yl});function yc(){return this.rgb().formatHex()}function mc(){return Ec(this).formatHsl()}function yl(){return this.rgb().formatRgb()}function qu(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=ih.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?ml(e):t===3?new gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ff(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ff(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qu.exec(a))?new gi(e[1],e[2],e[3],1):(e=ah.exec(a))?new gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ju.exec(a))?Ff(e[1],e[2],e[3],e[4]):(e=vl.exec(a))?Ff(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pl.exec(a))?ef(e[1],e[2]/100,e[3]/100,1):(e=gl.exec(a))?ef(e[1],e[2]/100,e[3]/100,e[4]):gc.hasOwnProperty(a)?ml(gc[a]):a==="transparent"?new gi(NaN,NaN,NaN,0):null}function ml(a){return new gi(a>>16&255,a>>8&255,a&255,1)}function Ff(a,e,t,r){return r<=0&&(a=e=t=NaN),new gi(a,e,t,r)}function oh(a){return a instanceof Us||(a=qu(a)),a?(a=a.rgb(),new gi(a.r,a.g,a.b,a.opacity)):new gi}function tf(a,e,t,r){return arguments.length===1?oh(a):new gi(a,e,t,r==null?1:r)}function gi(a,e,t,r){this.r=+a,this.g=+e,this.b=+t,this.opacity=+r}dl(gi,tf,nh(Us,{brighter:function(a){return a=a==null?Mu:Math.pow(Mu,a),new gi(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=a==null?_u:Math.pow(_u,a),new gi(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sh,formatHex:sh,formatRgb:bl,toString:bl}));function sh(){return"#"+bc(this.r)+bc(this.g)+bc(this.b)}function bl(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}function bc(a){return a=Math.max(0,Math.min(255,Math.round(a)||0)),(a<16?"0":"")+a.toString(16)}function ef(a,e,t,r){return r<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new $o(a,e,t,r)}function Ec(a){if(a instanceof $o)return new $o(a.h,a.s,a.l,a.opacity);if(a instanceof Us||(a=qu(a)),!a)return new $o;if(a instanceof $o)return a;a=a.rgb();var e=a.r/255,t=a.g/255,r=a.b/255,n=Math.min(e,t,r),i=Math.max(e,t,r),o=NaN,s=i-n,u=(i+n)/2;return s?(e===i?o=(t-r)/s+(t<r)*6:t===i?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?i+n:2-i-n,o*=60):s=u>0&&u<1?0:o,new $o(o,s,u,a.opacity)}function Ze(a,e,t,r){return arguments.length===1?Ec(a):new $o(a,e,t,r==null?1:r)}function $o(a,e,t,r){this.h=+a,this.s=+e,this.l=+t,this.opacity=+r}dl($o,Ze,nh(Us,{brighter:function(a){return a=a==null?Mu:Math.pow(Mu,a),new $o(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=a==null?_u:Math.pow(_u,a),new $o(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,n=2*t-r;return new gi(zs(a>=240?a-240:a+120,n,r),zs(a,n,r),zs(a<120?a+240:a-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(a===1?")":", "+a+")")}}));function zs(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}function rf(a,e,t,r,n){var i=a*a,o=i*a;return((1-3*a+3*i-o)*e+(4-6*i+3*o)*t+(1+3*a+3*i-3*o)*r+o*n)/6}function El(a){var e=a.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=a[r],i=a[r+1],o=r>0?a[r-1]:2*n-i,s=r<e-1?a[r+2]:2*i-n;return rf((t-r/e)*e,o,n,i,s)}}function xc(a){var e=a.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=a[(r+e-1)%e],i=a[r%e],o=a[(r+1)%e],s=a[(r+2)%e];return rf((t-r/e)*e,n,i,o,s)}}function Cu(a){return function(){return a}}function wc(a,e){return function(t){return a+t*e}}function nf(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(r){return Math.pow(a+r*e,t)}}function Sc(a,e){var t=e-a;return t?wc(a,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(a)?e:a)}function _c(a){return(a=+a)==1?af:function(e,t){return t-e?nf(e,t,a):Cu(isNaN(e)?t:e)}}function af(a,e){var t=e-a;return t?wc(a,t):Cu(isNaN(a)?e:a)}var la=function a(e){var t=_c(e);function r(n,i){var o=t((n=tf(n)).r,(i=tf(i)).r),s=t(n.g,i.g),u=t(n.b,i.b),f=af(n.opacity,i.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=a,r}(1);function su(a){return function(e){var t=e.length,r=new Array(t),n=new Array(t),i=new Array(t),o,s;for(o=0;o<t;++o)s=tf(e[o]),r[o]=s.r||0,n[o]=s.g||0,i[o]=s.b||0;return r=a(r),n=a(n),i=a(i),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=i(u),s+""}}}var xl=su(El),Uf=su(xc);function Lo(a,e){e||(e=[]);var t=a?Math.min(e.length,a.length):0,r=e.slice(),n;return function(i){for(n=0;n<t;++n)r[n]=a[n]*(1-i)+e[n]*i;return r}}function uu(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function fu(a,e){return(uu(e)?Lo:Cs)(a,e)}function Cs(a,e){var t=e?e.length:0,r=a?Math.min(t,a.length):0,n=new Array(r),i=new Array(t),o;for(o=0;o<r;++o)n[o]=us(a[o],e[o]);for(;o<t;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=n[o](s);return i}}function cu(a,e){var t=new Date;return a=+a,e=+e,function(r){return t.setTime(a*(1-r)+e*r),t}}function As(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}function lu(a,e){var t={},r={},n;(a===null||typeof a!="object")&&(a={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in a?t[n]=us(a[n],e[n]):r[n]=e[n];return function(i){for(n in t)r[n]=t[n](i);return r}}var Ts=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Au=new RegExp(Ts.source,"g");function zf(a){return function(){return a}}function of(a){return function(e){return a(e)+""}}function Mc(a,e){var t=Ts.lastIndex=Au.lastIndex=0,r,n,i,o=-1,s=[],u=[];for(a=a+"",e=e+"";(r=Ts.exec(a))&&(n=Au.exec(e));)(i=n.index)>t&&(i=e.slice(t,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:As(r,n)})),t=Au.lastIndex;return t<e.length&&(i=e.slice(t),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?of(u[0].x):zf(e):(e=u.length,function(f){for(var c=0,h;c<e;++c)s[(h=u[c]).i]=h.x(f);return s.join("")})}function us(a,e){var t=typeof e,r;return e==null||t==="boolean"?Cu(e):(t==="number"?As:t==="string"?(r=qu(e))?(e=r,la):Mc:e instanceof qu?la:e instanceof Date?cu:uu(e)?Lo:Array.isArray(e)?Cs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lu:As)(a,e)}function Tu(a){return+a}function ko(a){return a*a}function Cc(a){return a*(2-a)}function Ac(a){return((a*=2)<=1?a*a:--a*(2-a)+1)/2}function Iu(a){return a*a*a}function Tc(a){return--a*a*a+1}function Qo(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var Ic=3,Pu=function a(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=a,t}(Ic),uh=function a(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=a,t}(Ic),fs=function a(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=a,t}(Ic),sf=Math.PI,cs=sf/2;function Ro(a){return+a==1?1:1-Math.cos(a*cs)}function Wf(a){return Math.sin(a*cs)}function Is(a){return(1-Math.cos(sf*a))/2}function Bo(a){return(Math.pow(2,-10*a)-.0009765625)*1.0009775171065494}function Pc(a){return Bo(1-+a)}function ls(a){return 1-Bo(a)}function Ws(a){return((a*=2)<=1?Bo(1-a):2-Bo(a-1))/2}function Ua(a){return 1-Math.sqrt(1-a*a)}function hs(a){return Math.sqrt(1- --a*a)}function Go(a){return((a*=2)<=1?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}var Ps=4/11,Oc=6/11,Vf=8/11,uf=3/4,wl=9/11,Dc=10/11,jf=15/16,ff=21/22,Sl=63/64,Ou=1/Ps/Ps;function Xf(a){return 1-ds(1-a)}function ds(a){return(a=+a)<Ps?Ou*a*a:a<Vf?Ou*(a-=Oc)*a+uf:a<Dc?Ou*(a-=wl)*a+jf:Ou*(a-=ff)*a+Sl}function Yf(a){return((a*=2)<=1?1-ds(1-a):ds(a-1)+1)/2}var Jo=1.70158,cf=function a(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=a,t}(Jo),Hf=function a(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=a,t}(Jo),$i=function a(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=a,t}(Jo),Du=2*Math.PI,Nu=1,Vs=.3,fh=function a(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Du);function n(i){return e*Bo(- --i)*Math.sin((r-i)/t)}return n.amplitude=function(i){return a(i,t*Du)},n.period=function(i){return a(e,i)},n}(Nu,Vs),Zf=function a(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Du);function n(i){return 1-e*Bo(i=+i)*Math.sin((i+r)/t)}return n.amplitude=function(i){return a(i,t*Du)},n.period=function(i){return a(e,i)},n}(Nu,Vs),zh=function a(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Du);function n(i){return((i=i*2-1)<0?e*Bo(-i)*Math.sin((r-i)/t):2-e*Bo(i)*Math.sin((r+i)/t))/2}return n.amplitude=function(i){return a(i,t*Du)},n.period=function(i){return a(e,i)},n}(Nu,Vs),ch={};function Wh(a){return ch[a.toLowerCase()]||N[a]}function Lu(a,e){ch[a.toLowerCase()]=e}var lh=function(a){return["fill","stroke","fillStyle","strokeStyle"].includes(a)},hh=function(a){return/^[r,R,L,l]{1}[\s]*\(/.test(a)},_l=[1,0,0,0,1,0,0,0,1];function Vh(a,e,t){var r={},n=e.fromAttrs,i=e.toAttrs;if(!a.destroyed){var o;for(var s in i)if(!(0,l.isEqual)(n[s],i[s]))if(s==="path"){var u=i[s],f=n[s];u.length>f.length?(u=Eu(i[s]),f=Eu(n[s]),f=Aa(f,u),f=Zo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=Eu(i[s]),f=Eu(n[s]),f=Zo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var h=u[c],A=f[c],P=[],B=0;B<h.length;B++)(0,l.isNumber)(h[B])&&A&&(0,l.isNumber)(A[B])?(o=us(A[B],h[B]),P.push(o(t))):P.push(h[B]);r[s].push(P)}}else if(s==="matrix"){var V=fu(n[s]||_l,i[s]||_l),$=V(t);r[s]=$}else lh(s)&&hh(i[s])?r[s]=i[s]:(0,l.isFunction)(i[s])||(o=us(n[s],i[s]),r[s]=o(t));a.attr(r)}}function dh(a,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var i,o=e.duration,s=e.easing,u=Wh(s);if(t=t-r-e.delay,e.repeat)i=t%o/o,i=u(i);else if(i=t/o,i<1)i=u(i);else return e.onFrame?a.attr(e.onFrame(1)):a.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(i);a.attr(f)}else Vh(a,e,i);return!1}var jh=function(){function a(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return a.prototype.initTimer=function(){var e=this,t=!1,r,n,i;this.timer=Bf(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)i=n[u],t=dh(r,i,o),t&&(n.splice(u,1),t=!1,i.callback&&i.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},a.prototype.addAnimator=function(e){this.animators.push(e)},a.prototype.removeAnimator=function(e){this.animators.splice(e,1)},a.prototype.isAnimating=function(){return!!this.animators.length},a.prototype.stop=function(){this.timer&&this.timer.stop()},a.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},a.prototype.getTime=function(){return this.current},a}(),Qa=jh,vh=40,ku=0,hu=":",Ml=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function ph(a,e){for(var t in a)if(a.hasOwnProperty(t)&&t.indexOf(hu+e)>=0)return!0;return!1}function Kf(a,e,t){t.name=e,t.target=a,t.currentTarget=a,t.delegateTarget=a,a.emit(e,t)}function gh(a,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),a.isCanvas()&&n)return;if(r&&$l(a,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=a,t.delegateTarget=a,a.emit(e,t)}}var ho=function(){function a(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,i=n.get("el");if(i!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,i=n.get("el");if(i!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return a.prototype.init=function(){this._bindEvents()},a.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,l.each)(Ml,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},a.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,l.each)(Ml,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},a.prototype._getEventObj=function(e,t,r,n,i,o){var s=new rl(e,t);return s.fromShape=i,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},a.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},a.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},a.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),i=this["_on"+e],o=!1;if(i)i.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},a.prototype._onmousedown=function(e,t,r){r.button===ku&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},a.prototype._emitMouseoverEvents=function(e,t,r,n){var i=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(i.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},a.prototype._emitDragoverEvents=function(e,t,r,n,i){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),i||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),i&&this._emitEvent("dragover",e,t,n)},a.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},a.prototype._onmouseup=function(e,t,r){if(r.button===ku){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},a.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},a.prototype._onmousemove=function(e,t,r){var n=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,i,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,h=s.clientX-e.clientX,A=s.clientY-e.clientY,P=h*h+A*A;c>120||P>vh?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,i,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,i,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,i,t),this._emitEvent("mousemove",r,e,t)}},a.prototype._emitEvent=function(e,t,r,n,i,o){var s=this._getEventObj(e,t,r,n,i,o);if(n){s.shape=n,Kf(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||gh(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;Kf(f,e,s)}},a.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},a}(),du=ho,ii="px",no=ql(),Nc=no&&no.name==="firefox",Xh=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,l.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new du({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Qa(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");Kl&&(n.style.width=t+ii,n.style.height=r+ii)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");Kl&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Nc&&!(0,l.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,l.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),i=n.x,o=n.y;return this.getPointByClient(i,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),i=n.getBoundingClientRect();return{x:t-i.left,y:r-i.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),i=n.getBoundingClientRect();return{x:t+i.left,y:r+i.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),a.prototype.destroy.call(this))},e}(Gi),Cl=Xh,Yh=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=a.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var i=r[n];t.add(i.clone())}return t},e}(Gi),yh=Yh,Lc=function(a){(0,U.__extends)(e,a);function e(t){return a.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){a.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,i=t.minY,o=t.maxX,s=t.maxY;if(r){var u=ea(r,[t.minX,t.minY]),f=ea(r,[t.maxX,t.minY]),c=ea(r,[t.minX,t.maxY]),h=ea(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],h[0]),o=Math.max(u[0],f[0],c[0],h[0]),i=Math.min(u[1],f[1],c[1],h[1]),s=Math.max(u[1],f[1],c[1],h[1])}var A=this.attrs;if(A.shadowColor){var P=A.shadowBlur,B=P===void 0?0:P,V=A.shadowOffsetX,$=V===void 0?0:V,ut=A.shadowOffsetY,lt=ut===void 0?0:ut,dt=n-B+$,xt=o+B+$,Wt=i-B+lt,Qt=s+B+lt;n=Math.min(n,dt),o=Math.max(o,xt),i=Math.min(i,Wt),s=Math.max(s,Qt)}return{x:n,y:i,minX:n,minY:i,maxX:o,maxY:s,width:o-n,height:s-i}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),i=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||i&&i.isHit(s,u)))},e}(as),Al=Lc,Tl=new Map;function Os(a,e){Tl.set(a,e)}function Il(a){return Tl.get(a)}function lf(a){var e=a.attr(),t=e.x,r=e.y,n=e.width,i=e.height;return{x:t,y:r,width:n,height:i}}function kc(a){var e=a.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Ru(a){return Math.min.apply(null,a)}function $f(a){return Math.max.apply(null,a)}function io(a,e,t,r){var n=a-t,i=e-r;return Math.sqrt(n*n+i*i)}function js(a,e){return Math.abs(a-e)<.001}function Xs(a,e){var t=Ru(a),r=Ru(e),n=$f(a),i=$f(e);return{x:t,y:r,width:n-t,height:i-r}}function Rc(a,e,t,r){return{minX:Ru([a,t]),maxX:$f([a,t]),minY:Ru([e,r]),maxY:$f([e,r])}}function Ct(a){return(a+Math.PI*2)%(Math.PI*2)}var fe={box:function(a,e,t,r){return Xs([a,t],[e,r])},length:function(a,e,t,r){return io(a,e,t,r)},pointAt:function(a,e,t,r,n){return{x:(1-n)*a+n*t,y:(1-n)*e+n*r}},pointDistance:function(a,e,t,r,n,i){var o=(t-a)*(n-a)+(r-e)*(i-e);if(o<0)return io(a,e,n,i);var s=(t-a)*(t-a)+(r-e)*(r-e);return o>s?io(t,r,n,i):this.pointToLine(a,e,t,r,n,i)},pointToLine:function(a,e,t,r,n,i){var o=[t-a,r-e];if(On.exactEquals(o,[0,0]))return Math.sqrt((n-a)*(n-a)+(i-e)*(i-e));var s=[-o[1],o[0]];On.normalize(s,s);var u=[n-a,i-e];return Math.abs(On.dot(u,s))},tangentAngle:function(a,e,t,r){return Math.atan2(r-e,t-a)}},ze=1e-4;function wr(a,e,t,r,n,i){var o,s=1/0,u=[t,r],f=20;i&&i>200&&(f=i/10);for(var c=1/f,h=c/10,A=0;A<=f;A++){var P=A*c,B=[n.apply(null,a.concat([P])),n.apply(null,e.concat([P]))],V=io(u[0],u[1],B[0],B[1]);V<s&&(o=P,s=V)}if(o===0)return{x:a[0],y:e[0]};if(o===1){var $=a.length;return{x:a[$-1],y:e[$-1]}}s=1/0;for(var A=0;A<32&&!(h<ze);A++){var ut=o-h,lt=o+h,B=[n.apply(null,a.concat([ut])),n.apply(null,e.concat([ut]))],V=io(u[0],u[1],B[0],B[1]);if(ut>=0&&V<s)o=ut,s=V;else{var dt=[n.apply(null,a.concat([lt])),n.apply(null,e.concat([lt]))],xt=io(u[0],u[1],dt[0],dt[1]);lt<=1&&xt<s?(o=lt,s=xt):h*=.5}}return{x:n.apply(null,a.concat([o])),y:n.apply(null,e.concat([o]))}}function Rr(a,e){for(var t=0,r=a.length,n=0;n<r;n++){var i=a[n],o=e[n],s=a[(n+1)%r],u=e[(n+1)%r];t+=io(i,o,s,u)}return t/2}function br(a,e,t,r){var n=1-r;return n*n*a+2*r*n*e+r*r*t}function Ar(a,e,t){var r=a+t-2*e;if(js(r,0))return[.5];var n=(a-e)/r;return n<=1&&n>=0?[n]:[]}function jr(a,e,t,r){return 2*(1-r)*(e-a)+2*r*(t-e)}function Hr(a,e,t,r,n,i,o){var s=br(a,t,n,o),u=br(e,r,i,o),f=fe.pointAt(a,e,t,r,o),c=fe.pointAt(t,r,n,i,o);return[[a,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,i]]}function Kr(a,e,t,r,n,i,o){if(o===0)return(io(a,e,t,r)+io(t,r,n,i)+io(a,e,n,i))/2;var s=Hr(a,e,t,r,n,i,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),Kr.apply(null,u)+Kr.apply(null,f)}var Vr={box:function(a,e,t,r,n,i){var o=Ar(a,t,n)[0],s=Ar(e,r,i)[0],u=[a,n],f=[e,i];return o!==void 0&&u.push(br(a,t,n,o)),s!==void 0&&f.push(br(e,r,i,s)),Xs(u,f)},length:function(a,e,t,r,n,i){return Kr(a,e,t,r,n,i,3)},nearestPoint:function(a,e,t,r,n,i,o,s){return wr([a,t,n],[e,r,i],o,s,br)},pointDistance:function(a,e,t,r,n,i,o,s){var u=this.nearestPoint(a,e,t,r,n,i,o,s);return io(u.x,u.y,o,s)},interpolationAt:br,pointAt:function(a,e,t,r,n,i,o){return{x:br(a,t,n,o),y:br(e,r,i,o)}},divide:function(a,e,t,r,n,i,o){return Hr(a,e,t,r,n,i,o)},tangentAngle:function(a,e,t,r,n,i,o){var s=jr(a,t,n,o),u=jr(e,r,i,o),f=Math.atan2(u,s);return Ct(f)}};function Qr(a,e,t,r,n){var i=1-n;return i*i*i*a+3*e*n*i*i+3*t*n*n*i+r*n*n*n}function d(a,e,t,r,n){var i=1-n;return 3*(i*i*(e-a)+2*i*n*(t-e)+n*n*(r-t))}function L(a,e,t,r){var n=-3*a+9*e-9*t+3*r,i=6*a-12*e+6*t,o=3*e-3*a,s=[],u,f,c;if(js(n,0))js(i,0)||(u=-o/i,u>=0&&u<=1&&s.push(u));else{var h=i*i-4*n*o;js(h,0)?s.push(-i/(2*n)):h>0&&(c=Math.sqrt(h),u=(-i+c)/(2*n),f=(-i-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function j(a,e,t,r,n,i,o,s,u){var f=Qr(a,t,n,o,u),c=Qr(e,r,i,s,u),h=fe.pointAt(a,e,t,r,u),A=fe.pointAt(t,r,n,i,u),P=fe.pointAt(n,i,o,s,u),B=fe.pointAt(h.x,h.y,A.x,A.y,u),V=fe.pointAt(A.x,A.y,P.x,P.y,u);return[[a,e,h.x,h.y,B.x,B.y,f,c],[f,c,V.x,V.y,P.x,P.y,o,s]]}function q(a,e,t,r,n,i,o,s,u){if(u===0)return Rr([a,t,n,o],[e,r,i,s]);var f=j(a,e,t,r,n,i,o,s,.5),c=f[0],h=f[1];return c.push(u-1),h.push(u-1),q.apply(null,c)+q.apply(null,h)}var ht={extrema:L,box:function(a,e,t,r,n,i,o,s){for(var u=[a,o],f=[e,s],c=L(a,t,n,o),h=L(e,r,i,s),A=0;A<c.length;A++)u.push(Qr(a,t,n,o,c[A]));for(var A=0;A<h.length;A++)f.push(Qr(e,r,i,s,h[A]));return Xs(u,f)},length:function(a,e,t,r,n,i,o,s){return q(a,e,t,r,n,i,o,s,3)},nearestPoint:function(a,e,t,r,n,i,o,s,u,f,c){return wr([a,t,n,o],[e,r,i,s],u,f,Qr,c)},pointDistance:function(a,e,t,r,n,i,o,s,u,f,c){var h=this.nearestPoint(a,e,t,r,n,i,o,s,u,f,c);return io(h.x,h.y,u,f)},interpolationAt:Qr,pointAt:function(a,e,t,r,n,i,o,s,u){return{x:Qr(a,t,n,o,u),y:Qr(e,r,i,s,u)}},divide:function(a,e,t,r,n,i,o,s,u){return j(a,e,t,r,n,i,o,s,u)},tangentAngle:function(a,e,t,r,n,i,o,s,u){var f=d(a,t,n,o,u),c=d(e,r,i,s,u);return Ct(Math.atan2(c,f))}};function gt(a,e){var t=Math.abs(a);return e>0?t:t*-1}var _t={box:function(a,e,t,r){return{x:a-t,y:e-r,width:t*2,height:r*2}},length:function(a,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(a,e,t,r,n,i){var o=t,s=r;if(o===0||s===0)return{x:a,y:e};for(var u=n-a,f=i-e,c=Math.abs(u),h=Math.abs(f),A=o*o,P=s*s,B=Math.PI/4,V,$,ut=0;ut<4;ut++){V=o*Math.cos(B),$=s*Math.sin(B);var lt=(A-P)*Math.pow(Math.cos(B),3)/o,dt=(P-A)*Math.pow(Math.sin(B),3)/s,xt=V-lt,Wt=$-dt,Qt=c-lt,Zt=h-dt,de=Math.hypot(Wt,xt),De=Math.hypot(Zt,Qt),xe=de*Math.asin((xt*Zt-Wt*Qt)/(de*De)),He=xe/Math.sqrt(A+P-V*V-$*$);B+=He,B=Math.min(Math.PI/2,Math.max(0,B))}return{x:a+gt(V,u),y:e+gt($,f)}},pointDistance:function(a,e,t,r,n,i){var o=this.nearestPoint(a,e,t,r,n,i);return io(o.x,o.y,n,i)},pointAt:function(a,e,t,r,n){var i=2*Math.PI*n;return{x:a+t*Math.cos(i),y:e+r*Math.sin(i)}},tangentAngle:function(a,e,t,r,n){var i=2*Math.PI*n,o=Math.atan2(r*Math.cos(i),-t*Math.sin(i));return Ct(o)}};function It(a,e,t,r,n,i,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function Ut(a,e,t,r,n,i,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Jt(a,e,t){return Math.atan(-e/a*Math.tan(t))}function ue(a,e,t){return Math.atan(e/(a*Math.tan(t)))}function ae(a,e,t,r,n,i){return t*Math.cos(n)*Math.cos(i)-r*Math.sin(n)*Math.sin(i)+a}function Ne(a,e,t,r,n,i){return t*Math.sin(n)*Math.cos(i)+r*Math.cos(n)*Math.sin(i)+e}function er(a,e,t,r){var n=Math.atan2(r*a,t*e);return(n+Math.PI*2)%(Math.PI*2)}function Pr(a,e,t){return{x:a*Math.cos(t),y:e*Math.sin(t)}}function ur(a,e,t){var r=Math.cos(t),n=Math.sin(t);return[a*r-e*n,a*n+e*r]}var hr={box:function(a,e,t,r,n,i,o){for(var s=Jt(t,r,n),u=1/0,f=-1/0,c=[i,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var A=s+h;i<o?i<A&&A<o&&c.push(A):o<A&&A<i&&c.push(A)}for(var h=0;h<c.length;h++){var P=ae(a,e,t,r,n,c[h]);P<u&&(u=P),P>f&&(f=P)}for(var B=ue(t,r,n),V=1/0,$=-1/0,ut=[i,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var lt=B+h;i<o?i<lt&&lt<o&&ut.push(lt):o<lt&&lt<i&&ut.push(lt)}for(var h=0;h<ut.length;h++){var dt=Ne(a,e,t,r,n,ut[h]);dt<V&&(V=dt),dt>$&&($=dt)}return{x:u,y:V,width:f-u,height:$-V}},length:function(a,e,t,r,n,i,o){},nearestPoint:function(a,e,t,r,n,i,o,s,u){var f=ur(s-a,u-e,-n),c=f[0],h=f[1],A=_t.nearestPoint(0,0,t,r,c,h),P=er(t,r,A.x,A.y);P<i?A=Pr(t,r,i):P>o&&(A=Pr(t,r,o));var B=ur(A.x,A.y,n);return{x:B[0]+a,y:B[1]+e}},pointDistance:function(a,e,t,r,n,i,o,s,u){var f=this.nearestPoint(a,e,t,r,s,u);return io(f.x,f.y,s,u)},pointAt:function(a,e,t,r,n,i,o,s){var u=(o-i)*s+i;return{x:ae(a,e,t,r,n,u),y:Ne(a,e,t,r,n,u)}},tangentAngle:function(a,e,t,r,n,i,o,s){var u=(o-i)*s+i,f=It(a,e,t,r,n,i,o,u),c=Ut(a,e,t,r,n,i,o,u);return Ct(Math.atan2(c,f))}};function fr(a){for(var e=0,t=[],r=0;r<a.length-1;r++){var n=a[r],i=a[r+1],o=io(n[0],n[1],i[0],i[1]),s={from:n,to:i,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Xr(a){if(a.length<2)return 0;for(var e=0,t=0;t<a.length-1;t++){var r=a[t],n=a[t+1];e+=io(r[0],r[1],n[0],n[1])}return e}function fn(a,e){if(e>1||e<0||a.length<2)return null;var t=fr(a),r=t.segments,n=t.totalLength;if(n===0)return{x:a[0][0],y:a[0][1]};for(var i=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,h=u.length/n;if(e>=i&&e<=i+h){var A=(e-i)/h;o=fe.pointAt(f[0],f[1],c[0],c[1],A);break}i+=h}return o}function tn(a,e){if(e>1||e<0||a.length<2)return 0;for(var t=fr(a),r=t.segments,n=t.totalLength,i=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,h=u.length/n;if(e>=i&&e<=i+h){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}i+=h}return o}function Tn(a,e,t){for(var r=1/0,n=0;n<a.length-1;n++){var i=a[n],o=a[n+1],s=fe.pointDistance(i[0],i[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var wn={box:function(a){for(var e=[],t=[],r=0;r<a.length;r++){var n=a[r];e.push(n[0]),t.push(n[1])}return Xs(e,t)},length:function(a){return Xr(a)},pointAt:function(a,e){return fn(a,e)},pointDistance:function(a,e,t){return Tn(a,e,t)},tangentAngle:function(a,e){return tn(a,e)}};function Rn(a){var e=a.slice(0);return a.length&&e.push(a[0]),e}var Kn={box:function(a){return wn.box(a)},length:function(a){return Xr(Rn(a))},pointAt:function(a,e){return fn(Rn(a),e)},pointDistance:function(a,e,t){return Tn(Rn(a),e,t)},tangentAngle:function(a,e){return tn(Rn(a),e)}};function Fn(a,e){return!a||!e?a||e:{minX:Math.min(a.minX,e.minX),minY:Math.min(a.minY,e.minY),maxX:Math.max(a.maxX,e.maxX),maxY:Math.max(a.maxY,e.maxY)}}function Vi(a,e){var t=a.get("startArrowShape"),r=a.get("endArrowShape"),n=null,i=null;return t&&(n=t.getCanvasBBox(),e=Fn(e,n)),r&&(i=r.getCanvasBBox(),e=Fn(e,i)),e}function Qn(a){for(var e=a.attr(),t=e.points,r=[],n=[],i=0;i<t.length;i++){var o=t[i];r.push(o[0]),n.push(o[1])}var s=Xs(r,n),u=s.x,f=s.y,c=s.width,h=s.height,A={minX:u,minY:f,maxX:u+c,maxY:f+h};return A=Vi(a,A),{x:A.minX,y:A.minY,width:A.maxX-A.minX,height:A.maxY-A.minY}}function oa(a){for(var e=a.attr(),t=e.points,r=[],n=[],i=0;i<t.length;i++){var o=t[i];r.push(o[0]),n.push(o[1])}return Xs(r,n)}var Di=null;function ui(){if(!Di){var a=document.createElement("canvas");a.width=1,a.height=1,Di=a.getContext("2d")}return Di}function Qi(a,e,t){var r=1;if((0,l.isString)(a)&&(r=a.split(`
`).length),r>1){var n=sa(e,t);return e*r+n*(r-1)}return e}function sa(a,e){return e?e-a:a*.14}function Sa(a,e){var t=ui(),r=0;if((0,l.isNil)(a)||a==="")return r;if(t.save(),t.font=e,(0,l.isString)(a)&&a.includes(`
`)){var n=a.split(`
`);(0,l.each)(n,function(i){var o=t.measureText(i).width;r<o&&(r=o)})}else r=t.measureText(a).width;return t.restore(),r}function za(a){var e=a.fontSize,t=a.fontFamily,r=a.fontWeight,n=a.fontStyle,i=a.fontVariant;return[n,i,r,e+"px",t].join(" ").trim()}function _a(a){var e=a.attr(),t=e.x,r=e.y,n=e.text,i=e.fontSize,o=e.lineHeight,s=e.font;s||(s=za(e));var u=Sa(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,h=e.textBaseline,A=Qi(n,i,o),P={x:t,y:r-A};c&&(c==="end"||c==="right"?P.x-=u:c==="center"&&(P.x-=u/2)),h&&(h==="top"?P.y+=A:h==="middle"&&(P.y+=A/2)),f={x:P.x,y:P.y,width:u,height:A}}return f}var ni=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Wa=/[^\s\,]+/ig;function Ii(a){var e=a||[];if((0,l.isArray)(e))return e;if((0,l.isString)(e))return e=e.match(ni),(0,l.each)(e,function(t,r){if(t=t.match(Wa),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,l.each)(t,function(i,o){isNaN(i)||(t[o]=+i)}),e[r]=t}),e}var Vn=Ii;function ci(a,e,t,r){var n=[],i=!!r,o,s,u,f,c,h,A;if(i){u=r[0],f=r[1];for(var P=0,B=a.length;P<B;P+=1){var V=a[P];u=On.min([0,0],u,V),f=On.max([0,0],f,V)}}for(var P=0,$=a.length;P<$;P+=1){var V=a[P];if(P===0&&!t)A=V;else if(P===$-1&&!t)h=V,n.push(A),n.push(h);else{var ut=[P?P-1:$-1,P-1][t?0:1];o=a[ut],s=a[t?(P+1)%$:P+1];var lt=[0,0];lt=On.sub(lt,s,o),lt=On.scale(lt,lt,e);var dt=On.distance(V,o),xt=On.distance(V,s),Wt=dt+xt;Wt!==0&&(dt/=Wt,xt/=Wt);var Qt=On.scale([0,0],lt,-dt),Zt=On.scale([0,0],lt,xt);h=On.add([0,0],V,Qt),c=On.add([0,0],V,Zt),c=On.min([0,0],c,On.max([0,0],s,V)),c=On.max([0,0],c,On.min([0,0],s,V)),Qt=On.sub([0,0],c,V),Qt=On.scale([0,0],Qt,-dt/xt),h=On.add([0,0],V,Qt),h=On.min([0,0],h,On.max([0,0],o,V)),h=On.max([0,0],h,On.min([0,0],o,V)),Zt=On.sub([0,0],V,h),Zt=On.scale([0,0],Zt,xt/dt),c=On.add([0,0],V,Zt),i&&(h=On.max([0,0],h,u),h=On.min([0,0],h,f),c=On.max([0,0],c,u),c=On.min([0,0],c,f)),n.push(A),n.push(h),A=c}}return t&&n.push(n.shift()),n}function yi(a,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],i=0,o=a.length;i<o;i+=2)n.push([a[i],a[i+1]]);for(var s=ci(n,.4,r,t),u=n.length,f=[],c,h,A,i=0;i<u-1;i+=1)c=s[i*2],h=s[i*2+1],A=n[i+1],f.push(["C",c[0],c[1],h[0],h[1],A[0],A[1]]);return r&&(c=s[u],h=s[u+1],A=n[0],f.push(["C",c[0],c[1],h[0],h[1],A[0],A[1]])),f}var ha=yi;function vu(a,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),a<n&&(n=a,r="del"),{type:r,min:n}}var Qf=function(a,e){var t=a.length,r=e.length,n,i,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=a[u-1];for(var f=1;f<=r;f++){i=e[f-1],isEqual(n,i)?o=0:o=1;var c=s[u-1][f].min+1,h=s[u][f-1].min+1,A=s[u-1][f-1].min+o;s[u][f]=vu(c,h,A)}}return s};function ke(a,e){var t=Qf(a,e),r=a.length,n=e.length,i=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&i.push({index:u-1,type:t[u][o].type})}for(var u=i.length-1;u>=0;u--)o=i[u].index,i[u].type==="add"?a.splice(o,0,[].concat(a[o])):a.splice(o,1)}if(r=a.length,r<n)for(var u=0;u<n-r;u++)a[r-1][0]==="z"||a[r-1][0]==="Z"?a.splice(r-2,0,a[r-2]):a.push(a[r-1]);return a}var Sr=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,xr=new RegExp("([a-z])["+Sr+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Sr+"]*,?["+Sr+"]*)+)","ig"),En=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Sr+"]*,?["+Sr+"]*","ig");function si(a){if(!a)return null;if((0,l.isArray)(a))return a;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(a).replace(xr,function(r,n,i){var o=[],s=n.toLowerCase();if(i.replace(En,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Se=/[a-z]/;function oe(a,e){return[e[0]+(e[0]-a[0]),e[1]+(e[1]-a[1])]}function Ke(a){var e=si(a);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Se.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var i=[],o=0,s=0,u=0,f=0,c=0,h,A,P=e[0];(P[0]==="M"||P[0]==="m")&&(o=+P[1],s=+P[2],u=o,f=s,c++,i[0]=["M",o,s]);for(var r=c,B=e.length;r<B;r++){var V=e[r],$=i[r-1],ut=[],n=V[0],lt=n.toUpperCase();if(n!==lt)switch(ut[0]=lt,lt){case"A":ut[1]=V[1],ut[2]=V[2],ut[3]=V[3],ut[4]=V[4],ut[5]=V[5],ut[6]=+V[6]+o,ut[7]=+V[7]+s;break;case"V":ut[1]=+V[1]+s;break;case"H":ut[1]=+V[1]+o;break;case"M":u=+V[1]+o,f=+V[2]+s,ut[1]=u,ut[2]=f;break;default:for(var dt=1,xt=V.length;dt<xt;dt++)ut[dt]=+V[dt]+(dt%2?o:s)}else ut=e[r];switch(lt){case"Z":o=+u,s=+f;break;case"H":o=ut[1],ut=["L",o,s];break;case"V":s=ut[1],ut=["L",o,s];break;case"T":o=ut[1],s=ut[2];var Wt=oe([$[1],$[2]],[$[3],$[4]]);ut=["Q",Wt[0],Wt[1],o,s];break;case"S":o=ut[ut.length-2],s=ut[ut.length-1];var Qt=$.length,Zt=oe([$[Qt-4],$[Qt-3]],[$[Qt-2],$[Qt-1]]);ut=["C",Zt[0],Zt[1],ut[1],ut[2],o,s];break;case"M":u=ut[ut.length-2],f=ut[ut.length-1];break;default:o=ut[ut.length-2],s=ut[ut.length-1]}i.push(ut)}return i}var dr=Math.PI*2,gr=function(a,e,t,r,n,i,o){var s=a.x,u=a.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+i,y:c+o}},Qe=function(a,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(a),n=Math.sin(a),i=Math.cos(a+e),o=Math.sin(a+e);return[{x:r-n*t,y:n+r*t},{x:i+o*t,y:o-i*t},{x:i,y:o}]},$e=function(a,e,t,r){var n=a*r-e*t<0?-1:1,i=a*t+e*r;return i>1&&(i=1),i<-1&&(i=-1),n*Math.acos(i)},ir=function(a,e,t,r,n,i,o,s,u,f,c,h){var A=Math.pow(n,2),P=Math.pow(i,2),B=Math.pow(c,2),V=Math.pow(h,2),$=A*P-A*V-P*B;$<0&&($=0),$/=A*V+P*B,$=Math.sqrt($)*(o===s?-1:1);var ut=$*n/i*h,lt=$*-i/n*c,dt=f*ut-u*lt+(a+t)/2,xt=u*ut+f*lt+(e+r)/2,Wt=(c-ut)/n,Qt=(h-lt)/i,Zt=(-c-ut)/n,de=(-h-lt)/i,De=$e(1,0,Wt,Qt),xe=$e(Wt,Qt,Zt,de);return s===0&&xe>0&&(xe-=dr),s===1&&xe<0&&(xe+=dr),[dt,xt,De,xe]},we=function(a){var e=a.px,t=a.py,r=a.cx,n=a.cy,i=a.rx,o=a.ry,s=a.xAxisRotation,u=s===void 0?0:s,f=a.largeArcFlag,c=f===void 0?0:f,h=a.sweepFlag,A=h===void 0?0:h,P=[];if(i===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var B=Math.sin(u*dr/360),V=Math.cos(u*dr/360),$=V*(e-r)/2+B*(t-n)/2,ut=-B*(e-r)/2+V*(t-n)/2;if($===0&&ut===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];i=Math.abs(i),o=Math.abs(o);var lt=Math.pow($,2)/Math.pow(i,2)+Math.pow(ut,2)/Math.pow(o,2);lt>1&&(i*=Math.sqrt(lt),o*=Math.sqrt(lt));var dt=ir(e,t,r,n,i,o,c,A,B,V,$,ut),xt=dt[0],Wt=dt[1],Qt=dt[2],Zt=dt[3],de=Math.abs(Zt)/(dr/4);Math.abs(1-de)<1e-7&&(de=1);var De=Math.max(Math.ceil(de),1);Zt/=De;for(var xe=0;xe<De;xe++)P.push(Qe(Qt,Zt)),Qt+=Zt;return P.map(function(He){var ar=gr(He[0],i,o,V,B,xt,Wt),Fr=ar.x,rn=ar.y,Zr=gr(He[1],i,o,V,B,xt,Wt),Nr=Zr.x,yn=Zr.y,dn=gr(He[2],i,o,V,B,xt,Wt),Lr=dn.x,Yr=dn.y;return{x1:Fr,y1:rn,x2:Nr,y2:yn,x:Lr,y:Yr}})};function Ye(a,e,t,r,n,i,o,s,u){var f=we({px:a,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:i,sweepFlag:o});return f.reduce(function(c,h){var A=h.x1,P=h.y1,B=h.x2,V=h.y2,$=h.x,ut=h.y;return c.push(A,P,B,V,$,ut),c},[])}function me(a,e){"TQ".indexOf(a[0])<0&&(e.qx=null,e.qy=null);var t=a.slice(1),r=t[0],n=t[1];switch(a[0]){case"M":return e.x=r,e.y=n,a;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(a.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(a.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,a[1],a[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,a[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,a[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return a}function lr(a,e){e===void 0&&(e=!1);for(var t=path2Absolute(a),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],i="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(i=t[c][0]),n[c]=i,t[c]=segmentToCubic(t[c],r),mr(t,n,c),o=t.length,i==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function mr(a,e,t){if(a[t].length>7){a[t].shift();for(var r=a[t],n=t;r.length;)e[t]="A",a.splice(n+=1,0,["C"].concat(r.splice(0,6)));a.splice(t,1)}}var kr=function(a,e,t,r,n){var i=-3*e+9*t-9*r+3*n,o=a*i+6*e-12*t+6*r;return a*o-3*e+3*t},Ur=function(a,e,t,r,n,i,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],A=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,B=0;B<c;B++){var V=f*h[B]+f,$=kr(V,a,t,n,o),ut=kr(V,e,r,i,s),lt=$*$+ut*ut;P+=A[B]*Math.sqrt(lt)}return f*P},Or=function(a,e,t,r,n,i,o,s){for(var u=[],f=[[],[]],c,h,A,P,B=0;B<2;++B){if(B===0?(h=6*a-12*t+6*n,c=-3*a+9*t-9*n+3*o,A=3*t-3*a):(h=6*e-12*r+6*i,c=-3*e+9*r-9*i+3*s,A=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;P=-A/h,P>0&&P<1&&u.push(P);continue}var V=h*h-4*A*c,$=Math.sqrt(V);if(!(V<0)){var ut=(-h+$)/(2*c);ut>0&&ut<1&&u.push(ut);var lt=(-h-$)/(2*c);lt>0&&lt<1&&u.push(lt)}}for(var dt=u.length,xt=dt,Wt;dt--;)P=u[dt],Wt=1-P,f[0][dt]=Wt*Wt*Wt*a+3*Wt*Wt*P*t+3*Wt*P*P*n+P*P*P*o,f[1][dt]=Wt*Wt*Wt*e+3*Wt*Wt*P*r+3*Wt*P*P*i+P*P*P*s;return f[0][xt]=a,f[1][xt]=e,f[0][xt+1]=o,f[1][xt+1]=s,f[0].length=f[1].length=xt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},qr=function(a,e,t,r,n,i,o,s){if(!(Math.max(a,t)<Math.min(n,o)||Math.min(a,t)>Math.max(n,o)||Math.max(e,r)<Math.min(i,s)||Math.min(e,r)>Math.max(i,s))){var u=(a*r-e*t)*(n-o)-(a-t)*(n*s-i*o),f=(a*r-e*t)*(i-s)-(e-r)*(n*s-i*o),c=(a-t)*(i-s)-(e-r)*(n-o);if(c){var h=u/c,A=f/c,P=+h.toFixed(2),B=+A.toFixed(2);if(!(P<+Math.min(a,t).toFixed(2)||P>+Math.max(a,t).toFixed(2)||P<+Math.min(n,o).toFixed(2)||P>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(i,s).toFixed(2)||B>+Math.max(i,s).toFixed(2)))return{x:h,y:A}}}},An=function(a,e,t){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},qn=function(a,e,t,r){return a===null&&(a=e=t=r=0),e===null&&(e=a.y,t=a.width,r=a.height,a=a.x),{x:a,y:e,width:t,w:t,height:r,h:r,x2:a+t,y2:e+r,cx:a+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(a,e,t,r),vb:[a,e,t,r].join(" ")}},Mn=function(a,e){return a=qn(a),e=qn(e),An(e,a.x,a.y)||An(e,a.x2,a.y)||An(e,a.x,a.y2)||An(e,a.x2,a.y2)||An(a,e.x,e.y)||An(a,e.x2,e.y)||An(a,e.x,e.y2)||An(a,e.x2,e.y2)||(a.x<e.x2&&a.x>e.x||e.x<a.x2&&e.x>a.x)&&(a.y<e.y2&&a.y>e.y||e.y<a.y2&&e.y>a.y)},jn=function(a,e,t,r,n,i,o,s){isArray(a)||(a=[a,e,t,r,n,i,o,s]);var u=Or.apply(null,a);return qn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},$n=function(a,e,t,r,n,i,o,s,u){var f=1-u,c=Math.pow(f,3),h=Math.pow(f,2),A=u*u,P=A*u,B=c*a+h*3*u*t+f*3*u*u*n+P*o,V=c*e+h*3*u*r+f*3*u*u*i+P*s,$=a+2*u*(t-a)+A*(n-2*t+a),ut=e+2*u*(r-e)+A*(i-2*r+e),lt=t+2*u*(n-t)+A*(o-2*n+t),dt=r+2*u*(i-r)+A*(s-2*i+r),xt=f*a+u*t,Wt=f*e+u*r,Qt=f*n+u*o,Zt=f*i+u*s,de=90-Math.atan2($-lt,ut-dt)*180/Math.PI;return{x:B,y:V,m:{x:$,y:ut},n:{x:lt,y:dt},start:{x:xt,y:Wt},end:{x:Qt,y:Zt},alpha:de}},Ci=function(a,e,t){var r=jn(a),n=jn(e);if(!Mn(r,n))return t?0:[];for(var i=Ur.apply(0,a),o=Ur.apply(0,e),s=~~(i/8),u=~~(o/8),f=[],c=[],h={},A=t?0:[],P=0;P<s+1;P++){var B=$n.apply(0,a.concat(P/s));f.push({x:B.x,y:B.y,t:P/s})}for(var P=0;P<u+1;P++){var B=$n.apply(0,e.concat(P/u));c.push({x:B.x,y:B.y,t:P/u})}for(var P=0;P<s;P++)for(var V=0;V<u;V++){var $=f[P],ut=f[P+1],lt=c[V],dt=c[V+1],xt=Math.abs(ut.x-$.x)<.001?"y":"x",Wt=Math.abs(dt.x-lt.x)<.001?"y":"x",Qt=qr($.x,$.y,ut.x,ut.y,lt.x,lt.y,dt.x,dt.y);if(Qt){if(h[Qt.x.toFixed(4)]===Qt.y.toFixed(4))continue;h[Qt.x.toFixed(4)]=Qt.y.toFixed(4);var Zt=$.t+Math.abs((Qt[xt]-$[xt])/(ut[xt]-$[xt]))*(ut.t-$.t),de=lt.t+Math.abs((Qt[Wt]-lt[Wt])/(dt[Wt]-lt[Wt]))*(dt.t-lt.t);Zt>=0&&Zt<=1&&de>=0&&de<=1&&(t?A++:A.push({x:Qt.x,y:Qt.y,t1:Zt,t2:de}))}}return A},da=function(a,e,t){a=path2Curve(a),e=path2Curve(e);for(var r,n,i,o,s,u,f,c,h,A,P=t?0:[],B=0,V=a.length;B<V;B++){var $=a[B];if($[0]==="M")r=s=$[1],n=u=$[2];else{$[0]==="C"?(h=[r,n].concat($.slice(1)),r=h[6],n=h[7]):(h=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,lt=e.length;ut<lt;ut++){var dt=e[ut];if(dt[0]==="M")i=f=dt[1],o=c=dt[2];else{dt[0]==="C"?(A=[i,o].concat(dt.slice(1)),i=A[6],o=A[7]):(A=[i,o,i,o,f,c,f,c],i=f,o=c);var xt=Ci(h,A,t);if(t)P+=xt;else{for(var Wt=0,Qt=xt.length;Wt<Qt;Wt++)xt[Wt].segment1=B,xt[Wt].segment2=ut,xt[Wt].bez1=h,xt[Wt].bez2=A;P=P.concat(xt)}}}}}return P};function Fo(a,e){return da(a,e)}function Jf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Uo(a,e){return Jf(a)*Jf(e)?(a[0]*e[0]+a[1]*e[1])/(Jf(a)*Jf(e)):1}function mh(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(Uo(a,e))}function vo(a,e){return a[0]===e[0]&&a[1]===e[1]}function Hh(a,e){var t=e[1],r=e[2],n=(0,l.mod)((0,l.toRadian)(e[3]),Math.PI*2),i=e[4],o=e[5],s=a[0],u=a[1],f=e[6],c=e[7],h=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,A=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,P=h*h/(t*t)+A*A/(r*r);P>1&&(t*=Math.sqrt(P),r*=Math.sqrt(P));var B=t*t*(A*A)+r*r*(h*h),V=B?Math.sqrt((t*t*(r*r)-B)/B):1;i===o&&(V*=-1),isNaN(V)&&(V=0);var $=r?V*t*A/r:0,ut=t?V*-r*h/t:0,lt=(s+f)/2+Math.cos(n)*$-Math.sin(n)*ut,dt=(u+c)/2+Math.sin(n)*$+Math.cos(n)*ut,xt=[(h-$)/t,(A-ut)/r],Wt=[(-1*h-$)/t,(-1*A-ut)/r],Qt=mh([1,0],xt),Zt=mh(xt,Wt);return Uo(xt,Wt)<=-1&&(Zt=Math.PI),Uo(xt,Wt)>=1&&(Zt=0),o===0&&Zt>0&&(Zt=Zt-2*Math.PI),o===1&&Zt<0&&(Zt=Zt+2*Math.PI),{cx:lt,cy:dt,rx:vo(a,[f,c])?0:t,ry:vo(a,[f,c])?0:r,startAngle:Qt,endAngle:Qt+Zt,xRotation:n,arcFlag:i,sweepFlag:o}}function Id(a,e){return[e[0]+(e[0]-a[0]),e[1]+(e[1]-a[1])]}function Pd(a){a=Vn(a);for(var e=[],t=null,r=null,n=null,i=0,o=a.length,s=0;s<o;s++){var u=a[s];r=a[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],i=s;break;case"A":var h=Hh(t,u);c.arcParams=h;break;default:break}if(f==="Z")t=n,r=a[i+1];else{var A=u.length;t=[u[A-2],u[A-1]]}r&&r[0]==="Z"&&(r=a[i],e[i]&&(e[i].prePoint=t)),c.currentPoint=t,e[i]&&vo(t,e[i].currentPoint)&&(e[i].prePoint=c.prePoint);var P=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=P;var B=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]];else if(f==="Q"){var V=[u[1],u[2]];c.startTangent=[B[0]-V[0],B[1]-V[1]],c.endTangent=[t[0]-V[0],t[1]-V[1]]}else if(f==="T"){var $=e[s-1],V=Id($.currentPoint,B);$.command==="Q"?(c.command="Q",c.startTangent=[B[0]-V[0],B[1]-V[1]],c.endTangent=[t[0]-V[0],t[1]-V[1]]):(c.command="TL",c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]])}else if(f==="C"){var ut=[u[1],u[2]],lt=[u[3],u[4]];c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-lt[0],t[1]-lt[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[ut[0]-lt[0],ut[1]-lt[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[lt[0]-ut[0],lt[1]-ut[1]])}else if(f==="S"){var $=e[s-1],ut=Id($.currentPoint,B),lt=[u[1],u[2]];$.command==="C"?(c.command="C",c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-lt[0],t[1]-lt[1]]):(c.command="SQ",c.startTangent=[B[0]-lt[0],B[1]-lt[1]],c.endTangent=[t[0]-lt[0],t[1]-lt[1]])}else if(f==="A"){var dt=.001,xt=c.arcParams||{},Wt=xt.cx,Qt=Wt===void 0?0:Wt,Zt=xt.cy,de=Zt===void 0?0:Zt,De=xt.rx,xe=De===void 0?0:De,He=xt.ry,ar=He===void 0?0:He,Fr=xt.sweepFlag,rn=Fr===void 0?0:Fr,Zr=xt.startAngle,Nr=Zr===void 0?0:Zr,yn=xt.endAngle,dn=yn===void 0?0:yn;rn===0&&(dt*=-1);var Lr=xe*Math.cos(Nr-dt)+Qt,Yr=ar*Math.sin(Nr-dt)+de;c.startTangent=[Lr-n[0],Yr-n[1]];var on=xe*Math.cos(Nr+dn+dt)+Qt,sn=ar*Math.sin(Nr+dn-dt)+de;c.endTangent=[B[0]-on,B[1]-sn]}e.push(c)}return e}function Od(a){for(var e=[],t=a.length,r=0;r<t-1;r++){var n=a[r],i=a[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:i[0],y:i[1]}})}if(e.length>1){var o=a[0],s=a[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Pp(a,e){var t=!1;return each(a,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Sv(a){var e=a.map(function(r){return r[0]}),t=a.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Op(a,e){return!(e.minX>a.maxX||e.maxX<a.minX||e.minY>a.maxY||e.maxY<a.minY)}function Ag(a,e){if(a.length<2||e.length<2)return!1;var t=Sv(a),r=Sv(e);if(!Op(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(a,u[0],u[1]))return n=!0,!1}),n||(each(a,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var i=Od(a),o=Od(e),s=!1;return each(o,function(u){if(Pp(i,u))return s=!0,!1}),s}function Dp(a,e){for(var t=[],r=[],n=[],i=0;i<a.length;i++){var o=a[i],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=Vr.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=ht.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var h=o.arcParams;c=hr.box(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0}),r=r.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0});var A=(0,l.min)(t),P=(0,l.min)(r),B=(0,l.max)(t),V=(0,l.max)(r);if(n.length===0)return{x:A,y:P,width:B-A,height:V-P};for(var i=0;i<n.length;i++){var o=n[i],s=o.currentPoint,$=void 0;s[0]===A?($=Pl(o,e),A=A-$.xExtra):s[0]===B&&($=Pl(o,e),B=B+$.xExtra),s[1]===P?($=Pl(o,e),P=P-$.yExtra):s[1]===V&&($=Pl(o,e),V=V+$.yExtra)}return{x:A,y:P,width:B-A,height:V-P}}function Pl(a,e){var t=a.prePoint,r=a.currentPoint,n=a.nextPoint,i=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((i+o-s)/(2*Math.sqrt(i)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,l.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var h={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return h}function Ol(a){var e=a.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,i=a.get("segments")||Pd(t),o=Dp(i,n),s=o.x,u=o.y,f=o.width,c=o.height,h={minX:s,minY:u,maxX:s+f,maxY:u+c};return h=Vi(a,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function fd(a){var e=a.attr(),t=e.x1,r=e.y1,n=e.x2,i=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,i),f=Math.max(r,i),c={minX:o,maxX:s,minY:u,maxY:f};return c=Vi(a,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Zh(a){var e=a.attr(),t=e.x,r=e.y,n=e.rx,i=e.ry;return{x:t-n,y:r-i,width:n*2,height:i*2}}Os("rect",lf),Os("image",lf),Os("circle",kc),Os("marker",kc),Os("polyline",Qn),Os("polygon",oa),Os("text",_a),Os("path",Ol),Os("line",fd),Os("ellipse",Zh);var Tg="0.5.11",_v=function(a){(0,U.__extends)(e,a);function e(t,r){var n=a.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(rl),cd=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},ld=function(e){if((0,l.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,l.isNumber)(e))return[e,e,e,e];if((0,l.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},Mv=function(e){var t=new _v(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Cv=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Bu=function(e){return Number.isNaN(Number(e))},Dd=function(e){for(var t=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,h=u.maxX,A=u.maxY;f<t&&(t=f),c<n&&(n=c),h>r&&(r=h),A>i&&(i=A)}var P=Math.floor(t),B=Math.floor(n),V=Math.ceil(r)-Math.floor(t),$=Math.ceil(i)-Math.floor(n);return{x:P,y:B,width:V,height:$,minX:t,minY:n,maxX:r,maxY:i}},Kh=function(e,t,r,n,i){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),i===void 0&&(i=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],h={},A=0;A<o;A++){var P=e[A],B=P.source,V=P.target,$="".concat(B,"-").concat(V);if(!c[A]){f[$]||(f[$]=[]),c[A]=!0,f[$].push(P);for(var ut=0;ut<o;ut++)if(A!==ut){var lt=e[ut],dt=lt.source,xt=lt.target;c[ut]||(B===xt&&V===dt?(f[$].push(lt),c[ut]=!0,h["".concat(dt,"|").concat(xt,"|").concat(f[$].length-1)]=!0):B===dt&&V===xt&&(f[$].push(lt),c[ut]=!0))}}}for(var Wt in f)for(var Qt=f[Wt],Zt=Qt.length,de=0;de<Zt;de++){var De=Qt[de];if(De.source===De.target){i&&(De.type=i),De.loopCfg={position:u[de%8],dist:Math.floor(de/8)*20+50};continue}if(Zt===1&&n&&De.source!==De.target){De.type=n;continue}De.type=r;var xe=(de%2===0?1:-1)*(h["".concat(De.source,"|").concat(De.target,"|").concat(de)]?-1:1);Zt%2===1?De.curveOffset=xe*Math.ceil(de/2)*s:De.curveOffset=xe*(Math.floor(de/2)*s+t)}return e},Nd=M(89431),Av=function(){function a(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return a.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},a.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),i,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(xt){var Wt=xt.getModel(),Qt=Wt.x,Zt=Wt.y;s>Qt&&(s=Qt),u>Zt&&(u=Zt),f<Qt&&(f=Qt),c<Zt&&(c=Zt)});var h=n.getMatrix()||[1,0,0,0,1,0,0,0,1],A=Bi({x:s,y:u},h),P=A.x,B=A.y,V=Bi({x:f,y:c},h),$=V.x,ut=V.y;i={minX:P,maxX:$,minY:B,maxY:ut,width:$-P,height:ut-B,x:P,y:B}}else i=n.getCanvasBBox();if(!(i.width===0||i.height===0)){var lt=this.getViewCenter(),dt={x:i.x+i.width/2,y:i.y+i.height/2};r.translate(lt.x-dt.x,lt.y-dt.y,e,t)}},a.prototype.animatedFitView=function(e,t,r,n,i,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],h=n.x+i.x-o.x-n.minX,A=n.y+i.y-o.y-n.minY;if(!(Bu(h)||Bu(A))){var P=(0,Nd.vs)(c,[["t",h,A]]);if(!u){var B=eu({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:P})}});e.animate(function(xt){return{matrix:Mi(t,P,xt)}},B);return}var V=f.get("minZoom"),$=f.get("maxZoom"),ut=s;V&&s<V?(ut=V,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):$&&s>$&&(ut=$,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var lt=(0,Nd.vs)(P,[["t",-i.x,-i.y],["s",ut,ut],["t",i.x,i.y]]),dt=eu({animateCfg:r,callback:function(){e.setMatrix(lt),f.emit("viewportchange",{action:"translate",matrix:P}),f.emit("viewportchange",{action:"zoom",matrix:lt})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(xt){return{matrix:Mi(t,lt,xt)}},dt)}},a.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),i=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var h=1/0,A=1/0,P=-1/0,B=-1/0;c.forEach(function(Qt){var Zt=Qt.getModel(),de=Zt.x,De=Zt.y;h>de&&(h=de),A>De&&(A=De),P<de&&(P=de),B<De&&(B=De)}),f={minX:h,maxX:P,minY:A,maxY:B,width:P-h,height:B-A,x:h,y:A}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var V=this.getViewCenter(),$={x:f.x+f.width/2,y:f.y+f.height/2},ut=(i-n[1]-n[3])/f.width,lt=(o-n[0]-n[2])/f.height,dt=ut;if(ut>lt&&(dt=lt),e)this.animatedFitView(s,u,t,f,V,$,dt,!0);else{var xt=V.x-$.x,Wt=V.y-$.y;if(Bu(xt)||Bu(Wt))return;r.translate(xt,Wt),r.zoom(dt,V)||console.warn("zoom failed, ratio out of range, ratio: %f",dt)}}},a.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,i=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,h=this.getFormatPadding(),A=c.get("width"),P=c.get("height"),B=c.get("group"),V=B.getMatrix()||[1,0,0,0,1,0,0,0,1];B.resetMatrix();var $,ut=c.getNodes();if(ut.length>c.get("optimizeThreshold")){var lt=1/0,dt=1/0,xt=-1/0,Wt=-1/0;ut.forEach(function(rn){var Zr=rn.getModel(),Nr=Zr.x,yn=Zr.y;lt>Nr&&(lt=Nr),dt>yn&&(dt=yn),xt<Nr&&(xt=Nr),Wt<yn&&(Wt=yn)}),$={minX:lt,maxX:xt,minY:dt,maxY:Wt,width:xt-lt,height:Wt-dt,x:lt,y:dt}}else $=B.getCanvasBBox();if(!($.width===0||$.height===0)){var Qt=this.getViewCenter(),Zt={x:$.x+$.width/2,y:$.y+$.height/2},de=(A-h[1]-h[3])/$.width,De=(P-h[0]-h[2])/$.height,xe;if(s==="x"?xe=de:s==="y"?xe=De:xe=f==="max"?Math.max(de,De):Math.min(de,De),i&&(xe=xe<1?xe:1),t)this.animatedFitView(B,V,r,$,Qt,Zt,xe,!0);else{var He=c.getZoom(),ar=He*xe,Fr=c.get("minZoom");ar<Fr&&(ar=Fr,console.warn("fitview failed, ratio out of range, ratio: %f",xe,"graph minzoom has been used instead")),c.translate(Qt.x-Zt.x,Qt.y-Zt.y),c.zoomTo(ar,Qt)}}},a.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return ld(e)},a.prototype.focusPoint=function(e,t,r){var n=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,h=0,A=0,P=0;this.graph.get("canvas").animate(function(B){A=u*B,P=f*B,n.graph.translate(A-c,P-h),c=A,h=P},(0,U.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},a.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=rs({x:e,y:t},r);return n},a.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},a.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),i=r.getClientByPoint(n.x,n.y);return{x:i.x,y:i.y}},a.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Bi({x:e,y:t},r)},a.prototype.focus=function(e,t,r){if((0,l.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,i=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,i=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],i=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],i=f[7]}this.focusPoint({x:n,y:i},t,r)}},a.prototype.focusItems=function(e,t,r,n){if(e.length){var i=this.graph,o=this.getFormatPadding(),s=i.get("width"),u=i.get("height"),f=i.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var h={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},A=0,P=e;A<P.length;A++){var B=P[A],V=B.getBBox();V.minX<h.minX&&(h.minX=V.minX),V.minY<h.minY&&(h.minY=V.minY),V.maxX>h.maxX&&(h.maxX=V.maxX),V.maxY>h.maxY&&(h.maxY=V.maxY)}if(h.x=h.minX,h.y=h.minY,h.width=h.maxX-h.minX,h.height=h.maxY-h.minY,!(h.width===0||h.height===0)){var $=this.getViewCenter(),ut={x:h.x+h.width/2,y:h.y+h.height/2},lt=(s-o[1]-o[3])/h.width,dt=(u-o[0]-o[2])/h.height,xt=lt;lt>dt&&(xt=dt),r?this.animatedFitView(f,c,n,h,$,ut,xt,t):(i.translate($.x-ut.x,$.y-ut.y),t&&!i.zoom(xt,$)&&console.warn("zoom failed, ratio out of range, ratio: %f",xt))}}},a.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,l.isNumber)(e)||!(0,l.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var i=r.get("plugins");i.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},a.prototype.destroy=function(){this.graph=null,this.destroyed=!1},a}(),Tv=Av;function hd(a){return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(a)}function Iv(a){if(typeof a!="string")return a;var e=function(Zt){if(typeof Zt!="string")return Zt;try{return JSON.parse(Zt.trim())}catch(de){return Zt.trim()}},t=e(a);if(typeof t!="string")return t;for(var r=function(Zt){return Zt[Zt.length-1]},n=a.trim(),i=[],o=[],s=function(){for(var Zt=[],de=0;de<arguments.length;de++)Zt[de]=arguments[de];return Zt.some(function(De){return r(o)===De})},u=function(){return r(i)},f=null,c=0,h="";c<n.length;){var A=n[c],P=s('"',"'");if(!P&&!A.trim()){c+=1;continue}var B=n[c-1]==="\\",V=s("}"),$=s("]"),ut=s(","),lt=u();if(P)if(r(o)===A&&!B){o.pop();var dt=e(h);lt.push(dt),f=dt,h=""}else h+=A;else if($&&A===",")h&&(lt.push(e(h)),h="");else if(V&&A===":")o.push(","),h&&(lt.push(h),h="");else if(ut&&A===",")h&&(lt.push(e(h)),h=""),o.pop();else if(A==="}"&&(V||ut)){h&&(lt.push(e(h)),h=""),ut&&o.pop();for(var xt={},Wt=1;Wt<lt.length;Wt+=2)xt[lt[Wt-1]]=lt[Wt];i.pop(),i.length&&r(i).push(xt),o.pop(),f=xt}else A==="]"&&$?(h&&(lt.push(e(h)),h=""),i.pop(),i.length&&r(i).push(lt),o.pop(),f=lt):A==="{"?(i.push([]),o.push("}")):A==="["?(i.push([]),o.push("]")):A==='"'?o.push('"'):A==="'"?o.push("'"):h+=A;c+=1}return f||h}var Np=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},Lp=function(e){return function(t){for(var r=e.length,n=[],i=0,o="";i<r;)if(e[i]==="{"&&e[i+1]==="{")n.push(o),o="",i+=2;else if(e[i]==="}"&&e[i+1]==="}"){if(n.length){var s=n.pop();o=(0,l.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}i+=2,o=""}else o+=e[i],i+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Pv(a,e){var t={},r=a.getAttributeNames&&a.getAttributeNames()||[],n=a.children&&Array.from(a.children).map(function(s){return Pv(s,e)}),i={},o=a.tagName?a.tagName.toLowerCase():"group";return o==="text"&&(t.text=a.innerText),i.type=o,o==="img"&&(i.type="image"),Array.from(r).forEach(function(s){var u=Np(s),f=a.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Iv(f);t=(0,U.__assign)((0,U.__assign)({},t),c)}else i[u]=Iv(f)}catch(h){if(u==="style")throw h;i[u]=f}}),i.attrs=t,e&&e.style&&i.name&&hd(e.style[i.name])==="object"&&(i.attrs=(0,U.__assign)((0,U.__assign)({},i.attrs),e.style[i.name])),e&&e.style&&i.keyshape&&(i.attrs=(0,U.__assign)((0,U.__assign)({},i.attrs),e.style)),n.length&&(i.children=n),i}function kp(a,e,t){var r=a.attrs,n=r===void 0?{}:r,i={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(a.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=ic(n.text,n.fontSize||12)[0],o=16,i.y+=o,i.height=o,i.width=s,a.attrs=(0,U.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(i.height=o),s>=0&&(i.width=s),n.marginTop&&(i.y+=n.marginTop),n.marginLeft&&(i.x+=n.marginLeft),i}function Ov(a,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,U.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=a.children)===null||t===void 0)&&t.length){var n=a.attrs,i=n===void 0?{}:n,o=i.marginTop,s=(0,U.__assign)({},e);o&&(s.y+=o);for(var u=0;u<a.children.length;u++){a.children[u].attrs.key="".concat(i.key||"root"," -").concat(u," ");var f=Ov(a.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return a.bbox=kp(a,e,r),a.attrs=(0,U.__assign)((0,U.__assign)({},a.attrs),a.bbox),a}function Ld(a,e){var t,r,n,i,o=(a||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&a&&(a.attrs.key=s),!a&&e)return{action:"delete",val:e,type:o,key:s};if(a&&!e)return{action:"add",val:a,type:o};if(!a&&!e)return{action:"same",type:o};var u=[];if(((t=a.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=a.children)===null||n===void 0?void 0:n.length,(i=e.children)===null||i===void 0?void 0:i.length),c=e.children||[],h=a.children||[],A=0;A<f;A+=1)u.push(Ld(h[A],c[A]));var P=Object.keys(e.attrs),B=Object.keys(a.attrs);return e.type!==a.type?{action:"restructure",nowTarget:a,formerTarget:e,key:s,children:u}:P.filter(function(V){return V!=="children"}).some(function(V){return a.attrs[V]!==e.attrs[V]||!B.includes(V)})?{action:"change",val:a,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function kd(a){var e={},t=function(n){var i=typeof a=="function"?a(n):a,o=Lp(i)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Ov(Pv(u,n));return s.remove(),f};return{draw:function(n,i){var o=t(n),s=i,u=function f(c){var h=c.attrs,A=h===void 0?{}:h,P=c.bbox,B=c.type,V=c.children,$=(0,U.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var ut=i.addShape(c.type,(0,U.__assign)({attrs:A,origin:{bbox:P,type:B,children:V}},$));c.keyshape&&(s=ut)}c.children&&c.children.forEach(function(lt){return f(lt)})};return u(o),e[n.id]=[o],s},update:function(n,i){e[n.id]||(e[n.id]=[]);var o=i.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Ld(u,f),h=function B(V){var $;V.type!=="group"&&o.addShape(V.type,{attrs:V.attrs}),!(($=V.children)===null||$===void 0)&&$.length&&V.children.map(function(ut){return B(ut)})},A=function B(V){var $,ut=s.find(function(lt){return lt.attrs.key===V.attrs.key});ut&&o.removeChild(ut),!(($=V.children)===null||$===void 0)&&$.length&&V.children.map(function(lt){return B(lt)})},P=function B(V){var $=V.key;if(V.type!=="group"){var ut=s.find(function(dt){return dt.attrs.key===$});switch(V.action){case"change":if(ut){var lt=V.val.keyshape?i.getOriginStyle():{};ut.attr((0,U.__assign)((0,U.__assign)({},lt),V.val.attrs))}break;case"add":h(V.val);break;case"delete":A(V.val);break;case"restructure":A(V.formerTarget),h(V.nowTarget);break;default:break}}V.children&&V.children.forEach(function(dt){return B(dt)})};P(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var dd={};function Rd(a){return dd[a]||(dd[a]=(0,l.upperFirst)(a)),dd[a]}var Dv={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var i=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,i),i},baseUpdate:function(e,t,r,n){var i,o,s=this.getShape(e);s.update&&(s.mergeStyle=(i=s.getOptions)===null||i===void 0?void 0:i.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var i=this.getShape(e);i.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},vd={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},$h=function(){function a(){}return a.registerFactory=function(e,t){var r=Rd(e),n=Dv,i=(0,U.__assign)((0,U.__assign)({},n),t);return a[r]=i,i.className=r,i},a.getFactory=function(e){var t=Rd(e);return a[t]},a.registerNode=function(e,t,r){var n=a.Node,i;if(typeof t=="string"||typeof t=="function"){var o=kd(t);i=(0,U.__assign)((0,U.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=kd(s);i=(0,U.__assign)((0,U.__assign)((0,U.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):vd;i=(0,U.__assign)((0,U.__assign)({},u),t)}return i.type=e,i.itemType="node",n[e]=i,i},a.registerEdge=function(e,t,r){var n=a.Edge,i=r?n.getShape(r):vd,o=(0,U.__assign)((0,U.__assign)({},i),t);return o.type=e,o.itemType="edge",n[e]=o,o},a.registerCombo=function(e,t,r){var n=a.Combo,i=r?n.getShape(r):vd,o=(0,U.__assign)((0,U.__assign)({},i),t);return o.type=e,o.itemType="combo",n[e]=o,o},a}(),Va=$h;$h.registerFactory("node",{defaultShapeType:"circle"}),$h.registerFactory("edge",{defaultShapeType:"line"}),$h.registerFactory("combo",{defaultShapeType:"circle"});var pd="bboxCache",gd="bboxCanvasCache",Rp=null,Nv=function(){function a(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,i=this.get("type");typeof n=="undefined"?n=cd(i):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(i==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,l.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return a.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Wi(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},a.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Wi(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},a.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var i=n.visible;if(i!==void 0&&!i&&e.changeVisibility(i),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},a.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,i=r.get("name");if(this.get("originStyle")){var P=this.get("originStyle");i&&!P[i]&&(P[i]={});for(var B=this.getCurrentStatesStyle(),V=function(ut){var lt=t[ut],dt=lt.get("name"),xt=lt.attr();if(dt&&dt!==i){var Wt=B[dt];P[dt]||(P[dt]={}),Wt?Object.keys(xt).forEach(function(de){var De=xt[de];De!==Wt[de]&&(P[dt][de]=De)}):P[dt]=lt.get("type")!=="image"?(0,l.clone)(xt):n.getShapeStyleByName(dt)}else{var Qt=lt.attr(),Zt={};Object.keys(B).forEach(function(de){var De=B[de];(de===i||!(0,l.isPlainObject)(De))&&(Zt[de]=De)}),Object.keys(Qt).forEach(function(de){var De=Qt[de];Zt[de]!==De&&(i?P[i][de]=De:P[de]=De)})}},s=0;s<t.length;s++)V(s);delete P.path,delete P.matrix,delete P.x,delete P.y,P[i]&&(delete P[i].x,delete P[i].y,delete P[i].matrix,delete P[i].path),n.set("originStyle",P)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==i)o[c]=f!=="image"?(0,l.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var h=n.getShapeStyleByName();if(delete h.path,delete h.matrix,!i)Object.assign(o,h);else if(c)o[i]=h;else{var A=cd("shape");u.set("name",A),e.shapeMap[A]=u,o[A]=f!=="image"?(0,l.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},a.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,l.each)(n,function(i){e.setState(t,i,!0,r)})},a.prototype.init=function(){var e=Va.getFactory(this.get("type"));this.set("shapeFactory",e)},a.prototype.get=function(e){return this._cfg[e]},a.prototype.set=function(e,t){(0,l.isPlainObject)(e)?this._cfg=(0,U.__assign)((0,U.__assign)({},this._cfg),e):this._cfg[e]=t},a.prototype.getDefaultCfg=function(){return{}},a.prototype.clearCache=function(){this.set(pd,null),this.set(gd,null)},a.prototype.beforeDraw=function(){},a.prototype.afterDraw=function(){},a.prototype.afterUpdate=function(){},a.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},a.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,l.each)(r.attr(),function(i,o){(o!=="img"||(0,l.isString)(i))&&(n[o]=i)}),n}return{}},a.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,U.__assign)((0,U.__assign)({},r),e.style),n}return e},a.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},a.prototype.getOriginStyle=function(){return this.get("originStyle")},a.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,l.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},a.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),i=e,o=e;(0,l.isString)(t)&&(i="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,l.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(i)}else u>-1&&r.splice(u,1)}else if((0,l.isString)(t)){var f=r.filter(function(A){return A.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(A){return!A.includes(o)}),s.push(i),this.set("states",s)}if(n){var c=this.get("model"),h=c.type;n.setState(h,e,t,this)}},a.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),i=t.get("model"),o=i.type;e||(e=r),(0,l.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},a.prototype.setOptimize=function(e){this.optimize=e},a.prototype.getContainer=function(){return this.get("group")},a.prototype.getKeyShape=function(){return this.get("keyShape")},a.prototype.getModel=function(){return this.get("model")},a.prototype.getType=function(){return this.get("type")},a.prototype.getID=function(){return this.get("id")},a.prototype.isItem=function(){return!0},a.prototype.getStates=function(){return this.get("states")},a.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},a.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},a.prototype.getUpdateType=function(e){},a.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,i=e.visible;n!==i&&i!==void 0&&this.changeVisibility(i);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,l.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},a.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var i=this.getShapeCfg(r,e);t.baseUpdate(n,i,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},a.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,i=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=i.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(i.resetMatrix(),Eo(i,{x:r,y:n}),this.clearCache(),!0)},a.prototype.getBBox=function(){var e=this.get(pd);return e||(e=this.calculateBBox(),this.set(pd,e)),e},a.prototype.getCanvasBBox=function(){var e=this.get(gd);return e||(e=this.calculateCanvasBBox(),this.set(gd,e)),e},a.prototype.toFront=function(){var e=this.get("group");e.toFront()},a.prototype.toBack=function(){var e=this.get("group");e.toBack()},a.prototype.show=function(){this.changeVisibility(!0)},a.prototype.hide=function(){this.changeVisibility(!1)},a.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},a.prototype.isVisible=function(){return this.get("visible")},a.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},a.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},a}(),Bd=Nv,yd={source:"start",target:"end"},hf="Node",bh="Point",Bp="Anchor",Gp=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=yd[t]+bh,i=t+hf,o=this.get(i);o&&!o.destroyed&&o.removeEdge(this),(0,l.isPlainObject)(r)?(this.set(n,r),this.set(i,null)):r&&(r.addEdge(this),this.set(i,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var i=yd[t]+bh,o=t+hf,s=this.get(i);if(!s){var u=this.get(o),f=t+Bp,c=this.getPrePoint(t,n),h=r[f];(0,l.isNil)(h)||(s=u.getLinkPointByAnchor(h)),s=s||u.getLinkPoint(c),(0,l.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var i=t==="source"?"target":"source";return this.getEndPoint(i)},e.prototype.getEndPoint=function(t){var r=t+hf,n=yd[t]+bh,i=this.get(r);return i&&!i.destroyed?i.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),i=this.get("shapeFactory"),o=t.type;return i.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+hf,n=yd[t]+bh,i=this.get(r);if(i){var o=i.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){a.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,i=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:a.prototype.getShapeCfg.call(this,t);if(i)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(hf)),n=this.get("target".concat(hf));return r?delete t["source".concat(hf)]:t.source=this.get("start".concat(bh)),n?delete t["target".concat(hf)]:t.target=this.get("end".concat(bh)),!(0,l.isString)(t.source)&&!(0,l.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,l.isString)(t.target)&&!(0,l.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),i=n.visible,o=t.visible;i!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,l.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(hf)),r=this.get("target".concat(hf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),a.prototype.destroy.call(this)},e}(Bd),Lv=Gp,Gd="anchorPointsCache",kv="bboxCache",Rv=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,i=t[0],o=ga(t[0],r),s=0;s<t.length;s++){var u=t[s],f=ga(u,r);f<o&&(i=u,o=f,n=s)}return i.anchorIndex=n,i},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var i=function(f){return f.getSource()===r};return n.filter(i).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),i=this.get("type"),o,s,u=this.getBBox();i==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=so({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=ia({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Wn(u,t)}var h=c;return f.length&&(h||(h=t),h=this.getNearestPoint(f,h)),h||(h={x:o,y:s}),h},e.prototype.getAnchorPoints=function(){var t=this.get(Gd);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),i=this.get("model"),o=this.getShapeCfg(i),s=i.type,u=r.getAnchorPoints(s,o)||[];(0,l.each)(u,function(f,c){var h={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(h)}),this.set(Gd,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(kv,null),this.set(Gd,null)},e.prototype.getUpdateType=function(t){var r,n,i,o,s;if(t){var u=!(0,l.isNil)(t.x),f=!(0,l.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,l.isNumber)(t.x)||(0,l.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var h=c.includes("label")||c.includes("labelCfg");return h?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){a.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return a.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){a.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return a.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),i={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(i[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==i[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Bd),md=Rv,Fd="bboxCache",Ud="bboxCanvasCache",Eh="sizeCache",zd="anchorPointsCache",Bv=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var i=t,o=(0,l.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,l.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||se.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};i.style=(0,U.__assign)((0,U.__assign)((0,U.__assign)({},r),t.style),f);var c=t.padding||se.defaultCombo.padding;return(0,l.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Eh,f),i}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=Wi(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var i=this.get(Fd)||{},o=i.x,s=i.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(zd,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Ud,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Fd,null),this.set(Ud,null),this.set(zd,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Eh,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(md),Wd=Bv,Qh="node",Jh="edge",Gv="vedge",xh="combo",Fp="default",Fv="Mapper",qf="stateStyles",Up=function(){function a(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,l.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var i=t.edgeToBeUpdateMap;if(i){var o=Object.values(i);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return a.prototype.addItem=function(e,t){var r=this.graph,n=e===Gv?Jh:e,i=r.get("".concat(n,"Group"))||r.get("group"),o=(0,l.upperFirst)(n),s=null,u=r.get(n+(0,l.upperFirst)(qf))||{},f=r.get(Fp+o);t[qf]&&(u=t[qf]),f&&(0,l.each)(f,function(Qt,Zt){(0,l.isObject)(Qt)&&!(0,l.isArray)(Qt)?t[Zt]=(0,l.deepMix)({},Qt,t[Zt]):(0,l.isArray)(Qt)?t[Zt]=t[Zt]||(0,l.clone)(f[Zt]):t[Zt]=t[Zt]||f[Zt]});var c=r.get(n+Fv);if(c){var h=c(t);h[qf]&&(u=h[qf],delete h[qf]),(0,l.each)(h,function(Qt,Zt){(0,l.isObject)(Qt)&&!(0,l.isArray)(Qt)?t[Zt]=(0,l.deepMix)({},t[Zt],Qt):t[Zt]=h[Zt]||t[Zt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Jh||e===Gv){var A=void 0,P=void 0;if(A=t.source,P=t.target,A&&(0,l.isString)(A)&&(A=r.findById(A)),P&&(0,l.isString)(P)&&(P=r.findById(P)),!A||!P){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}A.getType&&A.getType()==="combo"&&(t.isComboEdge=!0),P.getType&&P.getType()==="combo"&&(t.isComboEdge=!0),s=new Lv({model:t,source:A,target:P,styles:u,linkCenter:r.get("linkCenter"),group:i.addGroup()})}else if(e===Qh)s=new md({model:t,styles:u,group:i.addGroup()});else if(e===xh){var B=t.children,V=_f(B,r),$=void 0,ut=void 0;if(isNaN(V.x)?isNaN(t.x)&&($=Math.random()*100):$=V.x,isNaN(V.y)?isNaN(t.y)&&(ut=Math.random()*100):ut=V.y,isNaN(t.x)||isNaN(t.y))t.x=$,t.y=ut;else{var lt=t.x-$,dt=t.y-ut;this.updateComboSucceeds(t.id,lt,dt,B)}var xt=i.addGroup();xt.setZIndex(t.depth),s=new Wd({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?_f([],r):V,group:xt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(V.width=Math.hypot(V.height,V.width),V.height=V.width,s.set("bbox",V),s.refresh());var Wt=s.getModel();(B||[]).forEach(function(Qt){var Zt=r.findById(Qt.id);s.addChild(Zt),Qt.depth=Wt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},a.prototype.updateItem=function(e,t){var r=this,n,i,o=this.graph;if((0,l.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Fv),f=e.getModel(),c=f.x,h=f.y,A=e.getUpdateType(t);if(u){var P=(0,l.deepMix)({},f,t),B=u(P),V=(0,l.deepMix)({},f,B,t);B[qf]&&(e.set("styles",V[qf]),delete V[qf]),(0,l.each)(V,function(xe,He){t[He]=xe})}else(0,l.each)(t,function(xe,He){f[He]&&(0,l.isObject)(xe)&&!(0,l.isArray)(xe)&&(t[He]=(0,U.__assign)((0,U.__assign)({},f[He]),t[He]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Jh){if(t.source){var $=t.source;(0,l.isString)($)&&($=o.findById($)),e.setSource($)}if(t.target){var ut=t.target;(0,l.isString)(ut)&&(ut=o.findById(ut)),e.setTarget(ut)}e.update(t)}else if(s===Qh){e.update(t,A);var lt=e.getEdges();A==="move"?(0,l.each)(lt,function(xe){r.edgeToBeUpdateMap[xe.getID()]={edge:xe,updateType:A},r.throttleRefresh()}):A!=null&&A.includes("bbox")&&(0,l.each)(lt,function(xe){xe.refresh(A)})}else if(s===xh){if(e.update(t,A),!isNaN(t.x)||!isNaN(t.y)){var dt=t.x-c||0,xt=t.y-h||0;this.updateComboSucceeds(f.id,dt,xt)}var Wt=e.getEdges(),Qt=(A==null?void 0:A.includes("bbox"))||A==="move";if(Qt&&s===xh){var Zt=e.get("shapeFactory"),de=f.type||"circle",De=f.animate===void 0||t.animate===void 0?(i=(n=Zt[de])===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.animate:f.animate||t.animate;De?setTimeout(function(){if(!(!e||e.destroyed)){var xe=e.getKeyShape();!xe||xe.destroyed||(0,l.each)(Wt,function(He){He&&!He.destroyed&&He.refresh()})}},201):(0,l.each)(Wt,function(xe){xe.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},a.prototype.updateCombo=function(e,t,r){var n=this,i,o,s=this.graph;if((0,l.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=_f(t,s,e),c=f.x,h=f.y;e.set("bbox",f);var A=c,P=h;r?(A=isNaN(u.x)?c:u.x,P=isNaN(u.y)?h:u.y):(A=isNaN(c)?u.x:c,P=isNaN(h)?u.y:h),e.update({x:A,y:P});var B=e.get("shapeFactory"),V=u.type||"circle",$=u.animate===void 0?(o=(i=B[V])===null||i===void 0?void 0:i.options)===null||o===void 0?void 0:o.animate:u.animate;$?setTimeout(function(){if(!(!e||e.destroyed)){var ut=e.getKeyShape();!ut||ut.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},a.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],i=0;i<n.length;i++){var o=n[i];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},a.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(i){r.hideItem(i,t)}),n.combos.forEach(function(i){r.hideItem(i,t)})},a.prototype.updateComboSucceeds=function(e,t,r,n){var i=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){wa(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var h=c.getModel();i.updateItem(f.id,{x:(h.x||0)+t,y:(h.y||0)+r})}})}},a.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),i=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return i.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return i.add(s)})}),i.forEach(function(o){return o.refresh()})},a.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,l.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,l.clone)(e.getModel()),i="";e.getType&&(i=e.getType()),r.emit("beforeremoveitem",{item:n,type:i});var o=r.get("".concat(i,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),i===Jh){var u=r.get("v".concat(i,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),h=r.get("itemMap");delete h[c];var A=r.get("comboTrees"),P=e.get("id");if(i===Qh){var B=e.getModel().comboId;if(A&&B){var V=A,$=!1;A.forEach(function(Qt){$||wa(Qt,function(Zt){if(Zt.id===P&&V){var de=V.indexOf(Zt);return V.splice(de,1),$=!0,!1}return V=Zt.children,!0})})}for(var ut=e.getEdges(),lt=ut.length-1;lt>=0;lt--)r.removeItem(ut[lt],!1);B&&r.updateCombo(B)}else if(i===xh){var dt=e.getModel().parentId,xt,Wt=!1;(A||[]).forEach(function(Zt){Wt||wa(Zt,function(de){return de.id===P?(xt=de,Wt=!0,!1):!0})}),xt.removed=!0,xt&&xt.children&&xt.children.forEach(function(Zt){t.removeItem(Zt.id)});for(var ut=e.getEdges(),lt=ut.length;lt>=0;lt--)r.removeItem(ut[lt],!1);dt&&r.updateCombo(dt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:i})}},a.prototype.setItemState=function(e,t,r){var n=this.graph,i=t;(0,l.isString)(r)&&(i="".concat(t,":").concat(r)),!(e.hasState(i)===r&&r||(0,l.isString)(r)&&e.hasState(i))&&(n.emit("beforeitemstatechange",{item:e,state:i,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:i,enabled:r}))},a.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,l.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},a.prototype.clearItemStates=function(e,t){var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},a.prototype.refreshItem=function(e){var t=this.graph;(0,l.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},a.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){ro(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var i=n.get("comboGroup");i&&i.sort()},a.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,l.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Qh){var i=e.getEdges();(0,l.each)(i,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===xh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(h){f||!h.children||h.children.length===0||wa(h,function(A){return A.id===s?(u=A.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(h){var A=n.findById(h.id);r.changeItemVisibility(A,t)});var i=e.getEdges();(0,l.each)(i,function(h){t&&!(h.get("source").isVisible()&&h.get("target").isVisible())||r.changeItemVisibility(h,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},a.prototype.destroy=function(){this.graph=null,this.destroyed=!0},a}(),zp=Up,Uv=function(){function a(e){this.graph=e,this.destroyed=!1}return a.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),i=t;(0,l.isString)(r)&&(i="".concat(t,":").concat(r)),n[i]||(n[i]=[]),r?n[i].push(e):n[i]=n[i].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},a.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),i=(0,l.isString)(t)?[t]:t;i.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,l.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},a.prototype.destroy=function(){this.graph=null,this.destroyed=!0},a}(),zv=Uv,Wv=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var i=t[n];return i===0&&(i="0"),i||""})},Vd=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var i=n[r],o=i.x,s=i.y;t.push(o),t.push(s)}var u=ha(t);return u.unshift(["M",e[0].x,e[0].y]),u},qh=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];On.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return i.x+=s[0],i.y+=s[1],i},Vv=function(e,t){var r=e.length;if(!r)return"";for(var n="",i="",o=0;o<r;o++){var s=e[o];o===0?i="M{x} {y}":i="L{x} {y}",n+=Wv(i,s)}return t&&(n+="Z"),n},bd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var i=1;i<r.length;i=i+2)t.push([r[i],r[i+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Ed=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],i=e[e.length-2];e.unshift(n),e.unshift(i),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,h=e[s].y,A=e[s+1].x,P=e[s+1].y,B=s!==e.length-2?e[s+2].x:A,V=s!==e.length-2?e[s+2].y:P,$=c+(A-u)/6,ut=h+(P-f)/6,lt=A-(B-c)/6,dt=P-(V-h)/6;o.push(["C",$,ut,lt,dt,A,P])}return o.unshift(["M",n.x,n.y]),o},jd=function(e,t){return On.scale([0,0],On.normalize([0,0],e),t)},Xd=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},Yd=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function xd(a,e){var t=function(h){var A=[h[0][0],h[0][1]-e],P=[h[0][0],h[0][1]+e];return"M ".concat(A," A ").concat(e,",").concat(e,",0,0,0,").concat(P," A ").concat(e,",").concat(e,",0,0,0,").concat(A)},r=function(h){var A=On.scale([0,0],Xd(h[0],h[1]),e),P=On.scale([0,0],A,-1),B=On.add([0,0],h[0],A),V=On.add([0,0],h[1],A),$=On.add([0,0],h[1],P),ut=On.add([0,0],h[0],P);return"M ".concat(B," L ").concat(V," A ").concat([e,e,"0,0,0",$].join(",")," L ").concat(ut," A ").concat([e,e,"0,0,0",B].join(","))};if(!a||a.length<1)return"";if(a.length===1)return t(a);if(a.length===2)return r(a);for(var n=new Array(a.length),i=0;i<n.length;++i){var o=i===0?a[a.length-1]:a[i-1],s=a[i],u=On.scale([0,0],Xd(o,s),e);n[i]=[On.add([0,0],o,u),On.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,h){var A="";return h===0&&(A="M ".concat(n[n.length-1][1]," ")),A+="".concat(f+c[0]," L ").concat(c[1]),A}),n.join(" ")}function Hd(a,e){var t=a.length,r=function(c){var h=[c[0][0],c[0][1]-e],A=[c[0][0],c[0][1]+e];return"M ".concat(h," A ").concat([e,e,"0,0,0",A].join(",")," A ").concat([e,e,"0,0,0",h].join(","))},n=function(c){var h=Yd(c[0],c[1]),A=jd(h,e),P=On.add([0,0],c[0],On.scale([0,0],A,-1)),B=On.add([0,0],c[1],A),V=1.2*e,$=jd(On.normalize([0,0],h),V),ut=On.scale([0,0],$,-1),lt=On.add([0,0],P,ut),dt=On.add([0,0],B,ut),xt=On.add([0,0],P,$);return"M ".concat(P," C ").concat([lt,dt,B].join(",")," S ").concat([xt,P].join(",")," Z")};if(!a||t<1)return"";if(t===1)return r(a);if(t===2)return n(a);for(var i=a.map(function(f,c){var h=a[(c+1)%t];return{p:f,v:On.normalize([0,0],Yd(f,h))}}),o=0;o<i.length;++o){var s=o>0?o-1:t-1,u=On.normalize([0,0],On.add([0,0],i[s].v,On.scale([0,0],i[o].v,-1)));i[o].p=On.add([0,0],i[o].p,On.scale([0,0],u,e))}return i.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var wd=function(e,t){for(var r=[],n=0;n<5;n++){var i=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",i,-o]):r.push(["L",i,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},Zd=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},Kd=function(e){var t=e.map(function(h){return{x:h.getModel().x,y:h.getModel().y}});t.sort(function(h,A){return h.x===A.x?h.y-A.y:h.x-A.x});for(var r={},n=t.length-1;n>=0;n--){var i=t[n],o=i.x,s=i.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&Zd(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&Zd(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},jv={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Xv(a,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},i=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,h=f,A,P,B=0;B<e.width*e.height;B++){if(A=c,P=h,a.findIndex(function($){return $.x===c&&$.y===h})>-1){if(!(a[0].x!==c||a[0].y!==h))return!0}else a.push({x:c,y:h});var V=i(c,h);switch(V){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:A===0&&(P===-1?c-=1:c+=1);break;case 1:case 13:case 5:h--;break;case 9:A===1&&(P===0?h-=1:h+=1);break;case 10:case 8:case 11:h++;break;default:return console.warn("Marching squares invalid state: ".concat(V)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&i(s,u)!==15&&(r=o(s,u));return r}}var Yv=function(e,t,r){var n=Math.ceil(e/r),i=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*i)).fill(0);return{cells:o,width:n,height:i}},Hv=function(e,t,r){var n=null,i=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=qa(s,u),c=new Ka(s.x,s.y,u.x,u.y),h=r.reduce(function(A,P){return $a(P,c)>0?A+1:A},0);f*Math.pow(h+1,2)<i&&(n=o,i=f*Math.pow(h+1,2))}),n},$d=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(i){var o=$a(i,t);o>=0&&o<r&&(n=i,r=o)}),n},Zv=function(e,t,r,n){var i=[],o=[];o.push(e);for(var s=!0,u=0,f=function(P,B){var V=!1;return B.forEach(function($){V||(fi(P,{x:$.x1,y:$.y1})||fi(P,{x:$.x2,y:$.y2}))&&(V=!0)}),V},c=function(P,B){for(var V=0,$=B;V<$.length;V++){var ut=$[V],lt=ut.getBBox(),dt=[[lt.x,lt.y],[lt.x+lt.width,lt.y],[lt.x,lt.y+lt.height],[lt.x+lt.width,lt.y+lt.height]];if(La(dt,P.x,P.y))return!0}return!1};s&&u<r;){s=!1;for(var h=function(){var P=o.pop(),B=$d(t,P);if(B){var V=ka(B,P),$=V[0],ut=V[1];if(ut===2){var lt=function(xt){for(var Wt=n,Qt=Jd(B,Wt,$,xt),Zt=f(Qt,o)||f(Qt,i),de=c(Qt,t);!Zt&&de&&Wt>=1;)Wt/=1.5,Qt=Jd(B,Wt,$,xt),Zt=f(Qt,o)||f(Qt,i),de=c(Qt,t);Qt&&!Zt&&(!xt||!de)&&(o.push(new Ka(P.x1,P.y1,Qt.x,Qt.y)),o.push(new Ka(Qt.x,Qt.y,P.x2,P.y2)),s=!0)};lt(!0),s||lt(!1)}}s||i.push(P),u+=1};!s&&o.length;)h()}for(;o.length;)i.push(o.pop());return i};function Kv(a,e,t,r,n){var i=Hv(a,t,e);if(i===null)return[];var o=function(h){for(var A=[];h.length>0;){var P=h.pop();if(h.length===0){A.push(P);break}var B=h.pop(),V=new Ka(P.x1,P.y1,B.x2,B.y2),$=$d(e,V);$?(A.push(P),h.push(B)):h.push(V)}return A},s=new Ka(a.getModel().x,a.getModel().y,i.getModel().x,i.getModel().y),u=Zv(s,e,r,n),f=o(u);return f}var $v=function(e,t,r){var n=Object.assign(jv,r),i=wo(e.map(function(lt){return{x:lt.getModel().x,y:lt.getModel().y}}));e=e.sort(function(lt,dt){return qa({x:lt.getModel().x,y:lt.getModel().y},i)-qa({x:dt.getModel().x,y:dt.getModel().y},i)});var o=[],s=[];e.forEach(function(lt){var dt=Kv(lt,t,o,n.maxRoutingIterations,n.morphBuffer);dt.forEach(function(xt){s.push(xt)}),o.push(lt)});for(var u=Qd(e,s,n.nodeR0),f=Yv(u.width,u.height,n.pixelGroupSize),c=[],h=[],A=0;A<n.maxMarchingIterations;A++)if(Qv(e,t,s,u,f,n),c=[],h=[],!!new Xv(c,f,n.threshold).march()){var P=c.map(function(lt){return{x:Math.round(lt.x*n.pixelGroupSize+u.minX),y:Math.round(lt.y*n.pixelGroupSize+u.minY)}});if(P){var B=P.length;if(n.skip>1)for(B=Math.floor(P.length/n.skip);B<3&&n.skip>1;)n.skip-=1,B=Math.floor(P.length/n.skip);for(var V=0,$=0;$<B;$+=1,V+=n.skip)h.push({x:P[V].x,y:P[V].y})}var ut=function(){for(var dt=0,xt=e;dt<xt.length;dt++){var Wt=xt[dt],Qt=h.map(function(Zt){return[Zt.x,Zt.y]});if(!La(Qt,Wt.getBBox().centerX,Wt.getBBox().centerY))return!1}return!0};if(h&&ut())return h;if(n.threshold*=.9,A<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return h};function Qd(a,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];a.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var i=0,o=n;i<o.length;i++){var s=o[i];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Qv(a,e,t,r,n,i){function o(P,B){var V=Math.floor((P-B)/i.pixelGroupSize);return V<0?0:V}function s(P,B){return P*i.pixelGroupSize+B}var u=(i.nodeR0-i.nodeR1)*(i.nodeR0-i.nodeR1),f=(i.edgeR0-i.edgeR1)*(i.edgeR0-i.edgeR1),c=function(B,V){var $=Math.min(o(B.minX,V+r.minX),n.width),ut=Math.min(o(B.minY,V+r.minY),n.height),lt=Math.min(o(B.maxX,-V+r.minX),n.width),dt=Math.min(o(B.maxY,-V+r.minY),n.height);return[$,ut,lt,dt]},h=function(B,V){for(var $=B.getBBox(),ut=c($,i.nodeR1),lt=ut[0],dt=ut[1],xt=ut[2],Wt=ut[3],Qt=dt;Qt<Wt;Qt+=1)for(var Zt=lt;Zt<xt;Zt+=1)if(!(V<0&&n[Zt+Qt*n.width]<=0)){var de=s(Zt,r.minX),De=s(Qt,r.minY),xe=ma({x:de,y:De},{x:$.minX,y:$.minY,width:$.width,height:$.height});if(xe<Math.pow(i.nodeR1,2)){var He=Math.sqrt(xe)-i.nodeR1;n.cells[Zt+Qt*n.width]+=V*He*He}}},A=function(B,V){for(var $=B.getBBox(),ut=c($,i.edgeR1),lt=ut[0],dt=ut[1],xt=ut[2],Wt=ut[3],Qt=dt;Qt<Wt;Qt+=1)for(var Zt=lt;Zt<xt;Zt+=1)if(!(V<0&&n.cells[Zt+Qt*n.width]<=0)){var de=s(Zt,r.minX),De=s(Qt,r.minY),xe=Xo({x:de,y:De},B);if(xe<Math.pow(i.edgeR1,2)){var He=Math.sqrt(xe)-i.edgeR1;n.cells[Zt+Qt*n.width]+=V*He*He}}};i.nodeInfluenceFactor&&a.forEach(function(P){h(P,i.nodeInfluenceFactor/u)}),i.edgeInfluenceFactor&&t.forEach(function(P){A(P,i.edgeInfluenceFactor/f)}),i.negativeNodeInfluenceFactor&&e.forEach(function(P){h(P,i.negativeNodeInfluenceFactor/u)})}function Jd(a,e,t,r){var n=a.getBBox(),i=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function h(B,V){return n.width*((B.y-n.minY+(V.y-n.minY))*.5)}if(o){if(i)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var A=h(o,u);return A<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(i)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var P=h(i,s);return P<c*.5?i.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:i.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Jv=function(){function a(e,t){this.cfg=(0,l.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,l.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,l.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return a.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},a.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},a.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},a.prototype.calcPath=function(e,t){var r,n,i;switch(this.type){case"round-convex":r=Kd(e),i=xd(r.map(function(o){return[o.x,o.y]}),this.padding),n=si(i);break;case"smooth-convex":r=Kd(e),r.length===2?(i=xd(r.map(function(o){return[o.x,o.y]}),this.padding),n=si(i)):r.length>2&&(i=Hd(r.map(function(o){return[o.x,o.y]}),this.padding),n=Ed(i));break;case"bubble":r=$v(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Ed(r);break;default:}return n},a.prototype.render=function(){this.group.addShape("path",{attrs:(0,U.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},a.prototype.addMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},a.prototype.addNonMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},a.prototype.removeMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},a.prototype.removeNonMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},a.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,l.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,l.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},a.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,U.__assign)({},e))},a.prototype.updateCfg=function(e){var t=this;this.cfg=(0,l.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,l.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,l.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},a.prototype.contain=function(e){var t=this,r;(0,l.isString)(e)?r=this.graph.findById(e):r=e;var n,i=r.getKeyShape();if(r.get("type")==="path")n=bd(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),xo(n,bd(this.path))},a.prototype.destroy=function(){this.group.remove(),this.cfg=null},a}(),qd=Jv,wh=zt,qv="node",tv=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this)||this;return r.sortCombos=(0,l.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var i=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){wa(f,function(c){return i[c.depth]?i[c.depth].push(c.id):i[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),h=o[c.source]||0,A=o[c.target]||0,P=Math.max(h,A);i[P]?i[P].push(c.id):i[P]=[c.id]}),i.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var h=r.findById(f[c]);h&&h.toFront()}})}},500,!1),r.cfg=(0,l.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new na(r.cfg.maxStep),r.redoStack=new na(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new Tv(this),r=new zl(this),n=new zp(this),i=new zv(this);this.set({viewController:t,modeController:r,itemController:n,stateController:i}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,i=n===void 0?"g6":n,o=t.addGroup({id:"".concat(i,"-root"),className:se.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(i,"-edge"),className:se.edgeContainerClassName}),u=o.addGroup({id:"".concat(i,"-node"),className:se.nodeContainerClassName}),f=o.addGroup({id:"".concat(i,"-combo"),className:se.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(i,"-delegate"),className:se.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,l.isPlainObject)(t)?this.cfg=(0,U.__assign)((0,U.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new na(this.cfg.maxStep),this.redoStack=new na(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,l.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var i=this.get("stateController");i.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,i=this.get("".concat(t,"s"));return(0,l.each)(i,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,l.each)(this.get("".concat(t,"s")),function(i,o){r(i,o)&&n.push(i)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(i){return i.hasState(r)&&n(i)}):this.findAll(t,function(i){return i.hasState(r)})},e.prototype.translate=function(t,r,n,i){var o=this,s=this.get("group"),u=(0,l.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=eu({animateCfg:i,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Ai(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=wh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,i){var o=this.get("group");Ai(o,{x:t,y:r},n,i||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,i){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,i):o.fitView(n,i),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var i=this.get("modeController");return i.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,i){var o=this,s=this.get("group"),u=(0,l.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),h=this.getZoom()||1,A=h*t,P=t,B=!1;if(f&&A<f?(P=f/h,B=!0):c&&A>c&&(P=c/h,B=!0),r?u=wh(u,[["t",-r.x,-r.y],["s",P,P],["t",r.x,r.y]]):u=wh(u,[["s",P,P]]),n){var V=(0,l.clone)(s.getMatrix());V||(V=[1,0,0,0,1,0,0,0,1]);var $=V[0],ut=$*P,lt=eu({animateCfg:i,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(dt){if(dt===1)V=u;else{var xt=ba($,ut,dt)/V[0];r?V=wh(V,[["t",-r.x,-r.y],["s",xt,xt],["t",r.x,r.y]]):V=wh(V,[["s",xt,xt]])}return{matrix:V}},lt)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!B},e.prototype.zoomTo=function(t,r,n,i){var o=t/this.getZoom();return this.zoom(o,r,n,i)},e.prototype.focusItem=function(t,r,n){var i=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),i.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,i){var o=this.get("viewController");o.focusItems(t,r,n,i)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),i=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=i.getID(),s=i.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),i=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=i.getID(),s=i.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,l.isString)(t)&&(n=this.findById(t)),!n&&(0,l.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var i="";if(n.getType&&(i=n.getType()),r&&this.get("enabledStack")){var o=(0,U.__assign)((0,U.__assign)({},n.getModel()),{itemType:i}),s={};switch(i){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,U.__assign)((0,U.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(i==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var h=this.get("itemController");if(h.removeItem(n),i==="combo"){var A=Sf(this.get("comboTrees"));this.set("comboTrees",A)}}},e.prototype.innerAddItem=function(t,r,n){if(!Hc(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var i,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(B){u||ro(B,function(V){if(r.parentId===V.id){u=!0;var $=(0,U.__assign)({id:r.id,depth:V.depth+2},r);V.children?V.children.push($):V.children=[$],r.depth=$.depth,i=n.addItem(t,r)}var ut=s[V.id];return u&&ut&&ut.getType&&ut.getType()==="combo"&&n.updateCombo(ut,V.children),!0})}),!u){var f=(0,U.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),i=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(i,!1),this.updateCombo(i))}else if(t==="node"&&(0,l.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),i=n.addItem(t,r);var h=this.get("itemMap"),A=!1,P=!1;o.forEach(function(B){P||A||ro(B,function(V){if(V.id===r.id)return P=!0,!1;if(r.comboId===V.id&&!P){A=!0;var $=(0,l.clone)(r);$.itemType="node",V.children?V.children.push($):V.children=[$],$.depth=V.depth+1}return A&&h[V.id].getType&&h[V.id].getType()==="combo"&&n.updateCombo(h[V.id],V.children),!0})})}else i=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(i)}return i},e.prototype.addItem=function(t,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!i);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,U.__assign)((0,U.__assign)({},u.getModel()),{itemType:t}),h={};switch(t){case"node":h.nodes=[c];break;case"edge":h.edges=[c];break;case"combo":h.combos=[c];break;default:break}this.pushStack("add",{before:{},after:h})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var h={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var A=t[u].type,P=s[u];if(P&&P!==!0){var B=(0,U.__assign)((0,U.__assign)({},P.getModel()),{itemType:A});switch(A){case"node":h.nodes.push(B);break;case"edge":h.edges.push(B);break;case"combo":h.combos.push(B);break;default:break}}}this.pushStack("addItems",{before:{},after:h})}return s},e.prototype.add=function(t,r,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!0),this.addItem(t,r,n,i)},e.prototype.updateItem=function(t,r,n){var i=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,l.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,l.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var h=(0,U.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,l.each)(h,function(V){return i.setItemState(s,V,!1)}),o.updateItem(s,r),c==="combo"&&(0,l.each)(h,function(V){return i.setItemState(s,V,!0)}),u){var A={nodes:[],edges:[],combos:[]},P={nodes:[],edges:[],combos:[]},B=(0,U.__assign)({id:f.id},r);switch(c){case"node":A.nodes.push(f),P.nodes.push(B);break;case"edge":A.edges.push(f),P.edges.push(B);break;case"combo":A.combos.push(f),P.combos.push(B);break;default:break}this.pushStack("update",{before:A,after:P})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,l.isString)(t)&&(t=this.findById(t));var i=this.get("itemController");i.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){co(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,i=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(i.map(function($){return{type:"node",model:$}}),!1,!1),(f==null?void 0:f.length)!==0){var c=wf(f,i);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function($){return{type:"edge",model:$}}),!1,!1);var h=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var A=t.get("layoutController");if(A){if(A.layout(P),this.destroyed)return}else P();function P(){(t.get("comboTrees")||[]).forEach(function($){ro($,function(ut){var lt=t.findById(ut.id);return lt.getType()==="combo"&&ut.collapsed&&(t.collapseCombo(ut.id,!1),t.updateCombo(lt)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",h),setTimeout(function(){var $;($=t.getCombos())===null||$===void 0||$.forEach(function(ut){ut.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var B=this.getNodes();B.forEach(function($){$.toFront()})}else{var V=this.getEdges();V.forEach(function($){$.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var i=this,o,s=this.get("itemMap");(0,l.each)(n,function(u){if(o=s[u.id],o){if(i.get("animate")&&t===qv){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}i.updateItem(o,u,!1)}else o=i.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,i;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!co(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(lt){return o.clearItemStates(lt)}),this.getEdges().map(function(lt){return o.clearItemStates(lt)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),h={nodes:[],edges:[]},A=s.combos;if(A){var P=wf(A,s.nodes);this.set("comboTrees",P)}else this.set("comboTrees",[]);this.diffItems("node",h,s.nodes),(0,l.each)(c,function(lt,dt){c[dt].getModel().depth=0,!(lt.getType&&lt.getType()==="edge")&&(lt.getType&&lt.getType()==="combo"?(delete c[dt],lt.destroy()):h.nodes.indexOf(lt)<0&&(delete c[dt],o.remove(lt,!1)))});for(var B=this.getCombos(),V=B.length,$=V-1;$>=0;$--)B[$].destroyed&&B.splice($,1);A&&(o.addCombos(A),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",h,s.edges),(0,l.each)(c,function(lt,dt){lt.getType&&(lt.getType()==="node"||lt.getType()==="combo")||h.edges.indexOf(lt)<0&&(delete c[dt],o.remove(lt,!1))}),(this.get("comboTrees")||[]).forEach(function(lt){ro(lt,function(dt){var xt=n.findById(dt.id);return xt.getType()==="combo"&&dt.collapsed&&n.collapseCombo(dt.id,!1),!0})}),this.set({nodes:h.nodes,edges:h.edges});var ut=this.get("layoutController");return ut&&(ut.changeData(function(){setTimeout(function(){var lt;(lt=o.getCombos())===null||lt===void 0||lt.forEach(function(dt){dt.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(i=o.getCombos())===null||i===void 0||i.forEach(function(lt){return lt.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),i=this.get("itemController");i.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var i=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,l.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function($){var ut=i.findById($),lt=ut.getType();if(!(lt!=="node"&&lt!=="combo")){var dt=ut.getModel();c["".concat(lt,"s")].push({id:$,parentId:lt==="node"?dt.comboId:dt.parentId})}});var h=this.get("comboTrees"),A=new Set(r),P=new Map;h&&(h.forEach(function($){ro($,function(ut,lt,dt){if(A.has(ut.id)){if(lt){var xt=i.findById(lt.id),Wt=i.findById(ut.id);lt.children.splice(dt,1),xt.removeChild(Wt),o.updateCombo(xt,lt.children)}ut.itemType==="combo"&&P.set(ut.id,ut)}return!0})}),h=h.filter(function($){return!A.has($.id)}),this.set("comboTrees",h));var B={nodes:[],combos:[]},V=r.map(function($){var ut=i.findById($),lt=ut.getModel(),dt="";ut.getType&&(dt=ut.getType());var xt=P.get($)||{id:ut.getID(),itemType:dt};return dt==="combo"?(xt.parentId=s,lt.parentId=s):dt==="node"&&(xt.comboId=s,lt.comboId=s),f&&B["".concat(dt,"s")].push({id:lt.id,parentId:s}),xt});u.children=V,this.addItem("combo",u,!1),this.set("comboSorted",!1),h&&(h.forEach(function($){wa($,function(ut){return ut.id===s?(ut.itemType="combo",ut.children=V,!1):!0})}),this.sortCombos()),f&&(B.combos.push(u),this.pushStack("createCombo",{before:c,after:B}))}},e.prototype.uncombo=function(t,r){var n=this,i,o;r===void 0&&(r=!0);var s=this,u=t;if((0,l.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,h=s.get("comboTrees");h||(h=[]);var A=this.get("itemMap"),P=u.get("id"),B,V=[],$=this.get("combos"),ut=this.findById(c),lt=r&&this.get("enabledStack"),dt={};if(lt&&(dt=(0,l.clone)(f),dt.children=[]),h.forEach(function(Zt){B||ro(Zt,function(de){var De;if(de.id===P){B=de;var xe=u.getEdges().map(function(Fr){return Fr.getID()});xe.forEach(function(Fr){n.removeItem(Fr,!1)});var He=$.indexOf(u);$.splice(He,1),delete A[P];var ar=(0,l.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:ar,type:"combo"})}if(c&&B&&de.id===c){ut.removeCombo(u),V=de.children;var He=V.indexOf(B);return He!==-1&&V.splice(He,1),(De=B.children)===null||De===void 0||De.forEach(function(rn){var Zr=n.findById(rn.id),Nr=Zr.getModel();Zr.getType&&Zr.getType()==="combo"?(rn.parentId=c,delete rn.comboId,Nr.parentId=c,delete Nr.comboId):Zr.getType&&Zr.getType()==="node"&&(rn.comboId=c,Nr.comboId=c),ut.addChild(Zr),V.push(rn)}),n.updateCombo(ut),!1}return!0})}),!c&&B){var xt=h.indexOf(B);h.splice(xt,1),(i=B.children)===null||i===void 0||i.forEach(function(Zt){Zt.parentId=void 0;var de=n.findById(Zt.id).getModel();delete de.parentId,delete de.comboId,Zt.itemType!=="node"&&h.push(Zt)})}if(lt){var Wt={nodes:[],combos:[]},Qt={nodes:[],combos:[]};(o=B.children)===null||o===void 0||o.forEach(function(Zt){var de=n.findById(Zt.id),De=de.getType();De!=="node"&&De!=="combo"||(Wt["".concat(De,"s")].push({id:Zt.id,parentId:P}),Qt["".concat(De,"s")].push({id:Zt.id,parentId:c}))}),Wt.combos.push(dt),this.pushStack("uncombo",{before:Wt,after:Qt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,i=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(i||[]).forEach(function(u){ro(u,function(f){var c;if(!f)return!0;var h=s[f.id];if(((c=h==null?void 0:h.getType)===null||c===void 0?void 0:c.call(h))==="combo"){var A=(0,U.__spreadArray)([],h.getStates(),!0);(0,l.each)(A,function(P){return r.setItemState(h,P,!1)}),o.updateCombo(h,f.children,t),(0,l.each)(A,function(P){return r.setItemState(h,P,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,i=t,o;if((0,l.isString)(t)&&(i=this.findById(t)),!i||i.getType&&i.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=i.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){ro(c,function(h){if(!h)return!0;var A=f[h.id];if(o===h.id&&A&&A.getType&&A.getType()==="combo"){var P=(0,U.__spreadArray)([],A.getStates(),!0);(0,l.each)(P,function(B){A.getStateStyle(B)&&r.setItemState(A,B,!1)}),u.updateCombo(A,h.children),(0,l.each)(P,function(B){A.getStateStyle(B)&&r.setItemState(A,B,!0)}),o&&(o=h.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var i=this;this.set("comboSorted",!1);var o;(0,l.isString)(t)?o=i.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),h=!0,A;if((c||[]).forEach(function(lt){A||wa(lt,function(dt){if(!A)return dt.id===o.getID()&&(A=dt),!0})}),wa(A,function(lt){return lt.id===r?(h=!1,!1):!0}),!h){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var P={},B={};f==="combo"?(P.combos=[{id:s.id,parentId:s.parentId}],B.combos=[{id:s.id,parentId:r}]):f==="node"&&(P.nodes=[{id:s.id,parentId:s.comboId}],B.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:P,after:B})}if(s.parentId||s.comboId){var V=this.findById(s.parentId||s.comboId);V&&V.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var $=this.findById(r);$&&$.addChild(o)}if(u){var $=this.findById(u);$&&$.removeChild(o)}var ut=Sf(this.get("comboTrees"),s.id,r);this.set("comboTrees",ut),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,l.each)(this.get("nodes"),function(i){t.push(i.getModel())}),(0,l.each)(this.get("edges"),function(i){r.push(i.getModel())}),(0,l.each)(this.get("combos"),function(i){n.push(i.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),i=t.get("edges");(0,l.each)(r,function(o){o.refresh()}),(0,l.each)(n,function(o){o.refresh()}),(0,l.each)(i,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,l.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),i=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,u.animate(function(f){(0,l.each)(s,function(c){var h=r.findById(c.id);if(!(!h||h.destroyed)){var A=h.get("originAttrs"),P=h.get("model"),B=h.getContainer().getMatrix();if(A==null&&(B&&(A={x:B[6],y:B[7]}),h.set("originAttrs",A||0)),i){var V=i(h,f,c,A||{x:0,y:0});h.set("model",Object.assign(P,V))}else A?(P.x=A.x+(c.x-A.x)*f,P.y=A.y+(c.y-A.y)*f):(P.x=c.x,P.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,l.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),i=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(A){(0,l.each)(A,function(P){u=P.getModel();var B=P.get("originAttrs");if(!(B&&u.x===B.x&&u.y===B.y)){var V=P.updatePosition({x:u.x,y:u.y});f[u.id]=V,u.comboId&&(f[u.comboId]=f[u.comboId]||V),u.parentId&&(f[u.parentId]=f[u.parentId]||V)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,l.each)(i,function(h){var A=h.getSource().getModel(),P=h.getTarget();if(!(0,l.isPlainObject)(P)){var B=P.getModel();(f[A.id]||f[B.id]||h.getModel().isComboEdge)&&h.refresh()}}),(0,l.each)(o,function(h){h.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,i){var o=this;t===void 0&&(t={}),i===void 0&&(i=!0);var s=this.get("layoutController");if((0,l.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(A){var P=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*P[0]+P[6],u.y=u.y*P[0]+P[7];var B=o.getGroup().getCanvasBBox(),V=B.minX,$=B.maxX,ut=B.minY,lt=B.maxY,dt={x:(V+$)/2,y:(ut+lt)/2};r==="begin"&&(dt.x=V,dt.y=ut),o.translate(u.x-dt.x,u.y-dt.y)})}var c=(0,U.__assign)({},this.get("layout")),h={};Object.assign(h,c,t),t.pipes&&!t.type?delete h.type:!t.pipes&&h.type&&delete h.pipes,this.set("layout",h),s&&(s.isLayoutTypeSame(h)&&h.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(h):s.changeLayout(h),i&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:h}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,l.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),i.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(A){c||wa(A,function(P){if(c&&P.depth<=i.depth)return!1;if(i.id===P.id&&(c=!0),c){var B=n.findById(P.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var h={};s.forEach(function(A){var P=A.getModel(),B=P.isVEdge,V=P.size,$=V===void 0?1:V;if(!(A.isVisible()&&!B)){var ut=A.getSource(),lt=A.getTarget(),dt=null,xt;if(ut.getModel().id===i.id||u.includes(ut)&&!u.includes(lt)?(dt=lt,xt=!1):(lt.getModel().id===i.id||!u.includes(ut)&&u.includes(lt))&&(dt=ut,xt=!0),dt){if(B){n.removeItem(A,!1);return}for(var Wt=dt.getModel();!dt.isVisible();){var Qt=Wt.parentId,Zt=Wt.comboId,de=Qt||Zt;if(dt=n.findById(de),!dt||!de)return;Wt=dt.getModel()}var De=Wt.id,xe=xt?{source:De,target:i.id,size:$,isVEdge:!0}:{source:i.id,target:De,size:$,isVEdge:!0},He="".concat(xe.source,"-").concat(xe.target);if(h[He]){h[He].size+=$;return}h[He]=xe}}}),this.addItems(Object.values(h).map(function(A){return{type:"vedge",model:A}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,l.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),i.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(A){c||wa(A,function(P){if(c&&P.depth<=i.depth)return!1;if(i.id===P.id&&(c=!0),c){var B=n.findById(P.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var h={};s.forEach(function(A){if(!(A.isVisible()&&!A.getModel().isVEdge)){var P=A.getSource(),B=A.getTarget(),V=P.get("id"),$=B.get("id"),ut=null,lt;if(V===i.id||u.includes(P)&&!u.includes(B)?(ut=B,lt=!1):$===i.id||!u.includes(P)&&u.includes(B)?(ut=P,lt=!0):u.includes(P)&&u.includes(B)&&P.isVisible()&&B.isVisible()&&A.show(),ut){var dt=A.getModel(),xt=dt.isVEdge,Wt=dt.size,Qt=Wt===void 0?1:Wt;if(xt){n.removeItem(A,!1);return}for(var Zt=ut.getModel();!ut.isVisible();){var de=Zt.parentId,De=Zt.comboId,xe=de||De;if(ut=n.findById(xe),!ut||!xe)return;Zt=ut.getModel()}for(var He=Zt.id,ar=lt?B:P,Fr=ar.getModel();!ar.isVisible();){var rn=Fr.parentId,Zr=Fr.comboId,Nr=rn||Zr;if(ar=n.findById(Nr),!ar||!Nr)return;if(Fr.comboId===i.id||Fr.parentId===i.id)break;Fr=ar.getModel()}var yn=Fr.id;if(He){var dn=lt?{source:He,target:yn,isVEdge:!0,size:Qt}:{source:yn,target:He,isVEdge:!0,size:Qt},Lr="".concat(dn.source,"-").concat(dn.target);if(h[Lr]){h[Lr].size+=Qt;return}h[Lr]=dn}}}}),this.addItems(Object.values(h).map(function(A){return{type:"vedge",model:A}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,l.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),i=this.findById(n.parentId);i;){var o=i.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,l.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var i=t;(0,l.isString)(t)&&(i=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=tt(this.save()),this.set("degrees",o));var s=o[i.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var i=r?(0,l.clone)(r):{before:{},after:(0,l.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:i}):this.undoStack.push({action:t,data:i}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=qt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),i=this.get("shortestPathMatrix");return(!n||!t)&&(n=qt(this.save(),r),this.set("adjMatrix",n)),(!i||!t)&&(i=zr(this.save(),r),this.set("shortestPathMatrix",i)),i},e.prototype.on=function(t,r,n){return a.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,i,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(i=this.get("stateController"))===null||i===void 0||i.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var i=r.addGroup({id:"".concat(t.id,"-container")}),o=new qd(this,(0,U.__assign)((0,U.__assign)({},t),{group:i})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,l.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(J),ev=tv;function Sd(a){return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(a)}var Dl=zt,tp="-shape",rv="-label",_=["startArrow","endArrow"],nt={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},R={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Y={edge:R,node:nt,combo:nt},Q="-label-bg",Et={options:{labelCfg:{style:{fontFamily:se.windowFontFamily}},descriptionCfg:{style:{fontFamily:se.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,l.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+tp),t.shapeMap[this.itemType+tp]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+rv),t.shapeMap[this.itemType+rv]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},i=this.getLabelStyle(e,n,t),o=i.rotate;delete i.rotate;var s=t.addShape("text",{attrs:i,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(i.rotateCenter)switch(i.rotateCenter){case"center":f=Dl(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=Dl(f,[["t",-i.x,-i.y],["r",o],["t",i.x,i.y]]);break;case"leftcenter":f=Dl(f,[["t",-i.x,-i.y-u.height/2],["r",o],["t",i.x,i.y+u.height/2]]);break;default:f=Dl(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=Dl(f,[["t",-i.x,-i.y-u.height/2],["r",o],["t",i.x,i.y+u.height/2]]);s.setMatrix(f)}if(i.background){var c=this.drawLabelBg(e,t,s),h=this.itemType+Q;c.set("classname",h),t.shapeMap[h]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,i=(0,l.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,i),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),i="".concat(this.itemType,"Label"),o=se[i]?se[i].style:null;return(0,U.__assign)((0,U.__assign)((0,U.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,i=t.getContainer(),o=t.getKeyShape(),s=(0,l.mix)({},o.attr(),e.style),u=function(h){var A,P=s[h];if((0,l.isPlainObject)(P)){var B=((n=i.shapeMap)===null||n===void 0?void 0:n[h])||i.find(function(V){return V.get("name")===h});B==null||B.attr(P)}else o.attr((A={},A[h]=P,A))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,i;if(e.label||e.label===""){var o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+rv,c=o.shapeMap[f]||o.find(function(xt){return xt.get("className")===f}),h=this.itemType+Q,A=o.shapeMap[h]||o.find(function(xt){return xt.get("className")===h});if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,l.deepMix)(u,e.labelCfg));var B=this.getLabelStyleByPosition(e,u,o),V=(n=e.labelCfg)===null||n===void 0?void 0:n.style,$=(0,U.__assign)((0,U.__assign)({},B),V),ut=$.rotate;if(delete $.rotate,!isNaN(ut)&&ut!==""){var lt=[1,0,0,0,1,0,0,0,1];lt=Dl(lt,[["t",-$.x,-$.y],["r",ut],["t",$.x,$.y]]),$.matrix=lt,c.attr($)}else((i=c.getMatrix())===null||i===void 0?void 0:i[4])!==1&&c.resetMatrix(),c.attr($);if(!A)$.background&&(A=this.drawLabelBg(e,o,c),A.set("classname",h),o.shapeMap[h]=A,c.toFront());else if($.background){var dt=this.getLabelBgStyleByPosition(c,u);A.attr(dt)}else o.removeChild(A)}else{var P=this.drawLabel(e,o);P.set("className",f),o.shapeMap[f]=P}}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,i,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,l.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),h=r.getStateStyle(f);if(!(!h&&!c)){var A=(0,l.mix)({},h||c),P=r.getContainer(),B={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(B.r=1,B.width=1,B.height=1),t){var V=function(Nr){var yn,dn=A[Nr];if((0,l.isPlainObject)(dn)&&!_.includes(Nr)){var Lr=((o=P.shapeMap)===null||o===void 0?void 0:o[Nr])||P.find(function(Yr){return Yr.get("name")===Nr});Lr==null||Lr.attr(dn)}else s.attr((yn={},yn[Nr]=dn,yn))};for(var $ in A)V($)}else{var ut=bu(r.getCurrentStatesStyle()),lt=r.getModel(),dt=(0,l.mix)({},lt.style,bu(r.getOriginStyle())),xt=s.get("name"),Wt=s.attr(),Qt={};Object.keys(Wt).forEach(function(Zr){if(Zr!=="img"){var Nr=Wt[Zr];Nr&&Sd(Nr)==="object"?Qt[Zr]=(0,l.clone)(Nr):Qt[Zr]=Nr}});var Zt={},de=function(Nr){var yn=A[Nr];if((0,l.isPlainObject)(yn)&&!_.includes(Nr)){var dn=P.shapeMap[Nr]||P.find(function(on){return on.get("name")===Nr});if(dn){var Lr=bu(dn.attr());(0,l.each)(yn,function(on,sn){if(Nr===xt&&Qt[sn]&&!B[sn]){delete Qt[sn];var _n=dt[Nr][sn]||Y[u][sn];s.attr(sn,_n)}else if(Lr[sn]||Lr[sn]===0){delete Lr[sn];var Ln=dt[Nr][sn]||Y[u][sn];dn.attr(sn,Ln)}}),Zt[Nr]=Lr}}else if(Qt[Nr]&&!B[Nr]){delete Qt[Nr];var Yr=dt[Nr]||(dt[xt]?dt[xt][Nr]:void 0)||Y[u][Nr];s.attr(Nr,Yr)}};for(var De in A)de(De);xt?Zt[xt]=Qt:(0,l.mix)(Zt,Qt);for(var $ in ut)if(!B[$]){var xe=ut[$];(!(0,l.isPlainObject)(xe)||_.includes($))&&(xt?((0,l.mix)(dt[xt],(i={},i[$]=xe,i)),delete dt[$]):(0,l.mix)(dt,(n={},n[$]=xe,n)),delete ut[$])}var He={};(0,l.deepMix)(He,dt,Zt,ut);var ar=!1,Fr=function(Nr){var yn,dn,Lr=He[Nr];if((0,l.isPlainObject)(Lr)&&!_.includes(Nr)){var Yr=P.shapeMap[Nr]||P.find(function(sn){return sn.get("name")===Nr});Yr&&((Yr.get("type")==="text"||Yr.get("labelRelated"))&&(delete Lr.x,delete Lr.y,delete Lr.matrix),Nr===xt&&(u==="combo"&&(delete Lr.r,delete Lr.width,delete Lr.height),ar=!0),Yr.attr(Lr))}else if(!ar){var on=Lr||Y[u][Nr];u==="combo"?xt||s.attr((yn={},yn[Nr]=on,yn)):s.attr((dn={},dn[Nr]=on,dn))}};for(var rn in He)Fr(rn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),i=this.getOptions(r),o=i.stateStyles,s=i.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,l.clone)(f):(0,l.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},Gt={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:se.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||se.defaultNode.size;return(0,l.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,l.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=Yc(n,r));var i=t.position||this.labelPosition;if(i==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,l.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(i){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var i=e.getBBox(),o=ld(n.padding),s=i.width+o[1]+o[3],u=i.height+o[0]+o[2];return(0,U.__assign)((0,U.__assign)({x:i.minX-o[3],y:i.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),i=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=i,i},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(He){return He.get("className")==="link-point-left"}),i=t.shapeMap["link-point-right"]||t.find(function(He){return He.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(He){return He.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(He){return He.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),i&&!u&&(u=i.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,l.mix)({},u,e.linkPoints),c=f.fill,h=f.stroke,A=f.lineWidth,P=f.size/2;P||(P=f.r);var B=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},V=B.left,$=B.right,ut=B.top,lt=B.bottom,dt=this.getSize(e),xt=dt[0],Wt=dt[1],Qt={r:P,fill:c,stroke:h,lineWidth:A};if(n)!V&&V!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,U.__assign)((0,U.__assign)({},Qt),{x:-xt/2,y:0}));else if(V){var Zt="link-point-left";t.shapeMap[Zt]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Qt),{x:-xt/2,y:0}),className:Zt,name:Zt,isAnchorPoint:!0})}if(i)!$&&$!==void 0&&(i.remove(),delete t.shapeMap["link-point-right"]),i.attr((0,U.__assign)((0,U.__assign)({},Qt),{x:xt/2,y:0}));else if($){var de="link-point-right";t.shapeMap[de]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Qt),{x:xt/2,y:0}),className:de,name:de,isAnchorPoint:!0})}if(o)!ut&&ut!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,U.__assign)((0,U.__assign)({},Qt),{x:0,y:-Wt/2}));else if(ut){var De="link-point-top";t.shapeMap[De]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Qt),{x:0,y:-Wt/2}),className:De,name:De,isAnchorPoint:!0})}if(s)!lt&&lt!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,U.__assign)((0,U.__assign)({},Qt),{x:0,y:Wt/2}));else if(lt){var xe="link-point-bottom";t.shapeMap[xe]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Qt),{x:0,y:Wt/2}),className:xe,name:xe,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,i){var o=t.get("keyShape");o.attr((0,U.__assign)({},r)),this.updateLabel(e,t,i),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),i=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ut){return ut.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,l.mix)({},f.attr(),i),h=c.width,A=h===void 0?20:h,P=c.height,B=P===void 0?20:P;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(A=0,B=0),f.attr((0,U.__assign)((0,U.__assign)({},c),{x:-A/2,y:-B/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var V="".concat(this.type,"-icon");if(u)n.shapeMap[V]=n.addShape("text",{attrs:(0,U.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:V,name:V});else{var A=i.width,B=i.height;n.shapeMap[V]=n.addShape("image",{attrs:(0,U.__assign)((0,U.__assign)({},i),{x:-A/2,y:-B/2}),className:V,name:V})}var $=n.shapeMap["node-label"]||n.find(function(ut){return ut.get("name")==="node-label"});$&&$.toFront()}}},ee=(0,U.__assign)((0,U.__assign)({},Et),Gt);Va.registerNode("single-node",ee);var ve="edge-shape";function Ie(a){var e=a;return a==="start"?e="end":a==="end"&&(e="start"),e}var We={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:se.defaultEdge.size,style:{x:0,y:0,stroke:se.defaultEdge.style.stroke,lineAppendWidth:se.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:se.edgeLabel.style.fill,fontSize:se.edgeLabel.style.fontSize,fontFamily:se.windowFontFamily}},stateStyles:(0,U.__assign)({},se.edgeStateStyles)},getPath:function(e){var t=[];return(0,l.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,l.mix)({},t,r,e.style),i=e.size||se.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),h=(0,l.mix)({},se.defaultEdge.style,{stroke:se.defaultEdge.color,lineWidth:i,path:c},n);return h},updateShapeStyle:function(e,t,r){var n,i=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||i.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),h=[u];c&&(h=h.concat(c)),h.push(f);var A=o.attr(),P=e.style||{};P.stroke===void 0&&(P.stroke=e.color);var B=e.sourceNode,V=e.targetNode,$={radius:P.radius};c||($={source:B,target:V,offset:P.offset,radius:P.radius});var ut=this.getPath(h,$),lt={};r==="move"?lt={path:ut}:(A.endArrow&&P.endArrow===!1&&(e.style.endArrow={path:""}),A.startArrow&&P.startArrow===!1&&(e.style.startArrow={path:""}),lt=(0,U.__assign)({},e.style),lt.lineWidth===void 0&&(lt.lineWdith=((0,l.isNumber)(s)?s:s==null?void 0:s[0])||A.lineWidth),lt.path===void 0&&(lt.path=ut),lt.stroke===void 0&&(lt.stroke=A.stroke||e.color)),o&&o.attr(lt)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,i={},o=r==null?void 0:r.shapeMap[ve],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return i.x=e.startPoint.x+u,i.y=e.startPoint.y+f,i.text=e.label,i;var c;(0,l.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var h=Fa(o,s,u,f,c);return i.x=h.x,i.y=h.y,i.rotate=h.rotate,i.textAlign=this._getTextAlign(n,h.angle),i.text=e.label,i},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var i=n.padding,o=r.width+i[1]+i[3],s=r.height+i[0]+i[2],u=(0,U.__assign)((0,U.__assign)({},n),{width:o,height:s,x:r.minX-i[3],y:r.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,l.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Ie(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:ve,name:ve,attrs:r});return t.shapeMap[ve]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,l.deepMix)({},r,e.labelCfg),i=this.getLabelStyle(e,n,t),o=i.rotate;delete i.rotate;var s=t.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),i.background){var u=this.drawLabelBg(e,t,s,i,o),f=this.itemType+Q;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,i){var o=this.options.labelCfg,s=(0,l.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},pr=(0,U.__assign)((0,U.__assign)({},Et),We);Va.registerEdge("single-edge",pr),Va.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Va.registerEdge("spline",{getPath:function(e){var t=Vd(e);return t}},"single-edge"),Va.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},i,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],i=Po(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=i.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=i.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=i.y<o.y?0:1:this.clockwise=i.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,l.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},i=Po(t,o,r)}var f=ga(t,i),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Va.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,l.isArray)(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,l.isArray)(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var i=qh(r,n,e.curvePosition,e.curveOffset);t=[i]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Va.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,i=qh(r,n,e.curvePosition[0],e.curveOffset[0]),o=qh(r,n,e.curvePosition[1],e.curveOffset[1]);t=[i,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Va.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,i=[0,0];e.curveOffset?i=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+i[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+i[1]};return[o,s]}},"cubic"),Va.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,i=[0,0];e.curveOffset?i=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+i[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+i[1],y:r.y},u=[o,s];return u}},"cubic"),Va.registerEdge("loop",{getPathPoints:function(e){return Ra(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Tr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:se.comboLabel.refX,refY:se.comboLabel.refY,options:{style:{stroke:se.defaultCombo.style.stroke,fill:se.defaultCombo.style.fill,lineWidth:se.defaultCombo.style.lineWidth},labelCfg:{style:{fill:se.comboLabel.style.fill,fontSize:se.comboLabel.style.fontSize,fontFamily:se.windowFontFamily}},stateStyles:(0,U.__assign)({},se.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,l.clone)(e.size||this.options.size||se.defaultCombo.size);return(0,l.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,l.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,i=e.padding||this.options.padding;(0,l.isArray)(i)&&(i=Math.max.apply(Math,i));var o=t.refX,s=t.refY;(0,l.isNil)(o)&&(o=this.refX),(0,l.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+i,h;switch(r){case"top":h={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":h={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":h={x:-c+o,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;default:h={x:c+o,y:0,textAlign:"right"};break}return h.text=e.label,h},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),i=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return i},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,i=e.collapsedSubstituteIcon,o=i===void 0?{}:i,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,h=s.height,A=t.getContainer(),P=A.find(function(ut){return ut.get("name")==="combo-collapsed-substitute-icon"}),B=P&&!P.destroyed,V=t.get("keyShape");if(n&&u){if(B)P.show();else{var $={width:c||r.r*2||r.width,height:h||r.r*2||r.height};P=A.addShape("image",{attrs:(0,U.__assign)({img:f,x:-$.width/2,y:-$.height/2},$),name:"combo-collapsed-substitute-icon",draggable:!0})}V.hide()}else B&&(P.hide(),V.show())},updateShape:function(e,t,r){var n=this,i=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),i.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(i.attr((0,U.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Br=(0,U.__assign)((0,U.__assign)({},Et),Tr);Va.registerCombo("single-combo",Br),Va.registerCombo("circle",{options:{size:[se.defaultCombo.size[0],se.defaultCombo.size[0]],padding:Math.max.apply(Math,se.defaultCombo.padding),animate:!0,style:{stroke:se.defaultCombo.style.stroke,fill:se.defaultCombo.style.fill,lineWidth:se.defaultCombo.style.lineWidth},labelCfg:{style:{fill:se.comboLabel.style.fill,fontSize:se.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,U.__assign)({},se.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,l.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},i=(0,l.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,l.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,l.isNumber)(i.r)||isNaN(i.r)?s=u[0]/2||se.defaultCombo.style.r:s=Math.max(i.r,u[0]/2)||u[0]/2}i.r=s+r;var f=(0,U.__assign)({x:0,y:0},i);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,l.isArray)(n)&&(n=Math.max.apply(Math,n));var i=(0,l.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,l.isNumber)(o)?o/2:o[0]/2:s=Math.max(i.r,r[0]/2)||r[0]/2,i.r=s+n;var u=t.get("sizeCache");u&&(u.r=i.r);var f={stroke:e.color},c=t.get("keyShape"),h=(0,l.mix)({},c.attr(),f,i);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,h,!0)}},"single-combo"),Va.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:se.defaultCombo.style.stroke,fill:se.defaultCombo.style.fill,lineWidth:se.defaultCombo.style.lineWidth},labelCfg:{style:{fill:se.comboLabel.style.fill,fontSize:se.comboLabel.style.fontSize,fontFamily:se.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,U.__assign)({},se.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,i=e.padding||this.options.padding;(0,l.isNumber)(i)&&(i=[i,i,i,i]);var o=t.refX,s=t.refY;(0,l.isNil)(o)&&(o=this.refX),(0,l.isNil)(s)&&(s=this.refY);var u=-n.width/2-i[3],f=n.width/2+i[1],c=-n.height/2-i[0],h=n.height/2+i[2],A;switch(r){case"top":A={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":A={x:0,y:h+s,textBaseline:"top",textAlign:"center"};break;case"left":A={x:u+s,y:0,textAlign:"left"};break;case"center":A={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":A={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:A={x:f+o,y:0,textAlign:"right"};break}return A.text=e.label,A},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,l.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},i=(0,l.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,l.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,l.isNumber)(i.width)||isNaN(i.width)?s=o[0]||se.defaultCombo.style.width:s=Math.max(i.width,o[0])||o[0],!(0,l.isNumber)(i.height)||isNaN(i.height)?u=o[1]||se.defaultCombo.style.height:u=Math.max(i.height,o[1])||o[1]);var c=-s/2-r[3],h=-u/2-r[0];i.width=s+r[1]+r[3],i.height=u+r[0]+r[2];var A=(0,U.__assign)({x:c,y:h},i);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},A},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,l.isNumber)(n)&&(n=[n,n,n,n]);var i=(0,l.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,l.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(i.width,r[0])||r[0],s=Math.max(i.height,r[1])||r[1]),i.width=o+n[1]+n[3],i.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=i.width,f.height=i.height),i.x=-o/2-n[3],i.y=-s/2-n[0];var c={stroke:e.color},h=t.get("keyShape"),A=(0,l.mix)({},h.attr(),c,i);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,A,!1)}},"single-combo"),Va.registerNode("simple-circle",{options:{size:se.defaultNode.size,style:{x:0,y:0,stroke:se.defaultNode.style.stroke,fill:se.defaultNode.style.fill,lineWidth:se.defaultNode.style.lineWidth},labelCfg:{style:{fill:se.nodeLabel.style.fill,fontSize:se.nodeLabel.style.fontSize,fontFamily:se.windowFontFamily}},stateStyles:(0,U.__assign)({},se.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),i=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=i,i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.deepMix)({},t,r),i=this.getSize(e),o=i[0]/2,s=(0,U.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),i={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,l.deepMix)({},o.attr(),i,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Va.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:se.defaultNode.style.stroke,fill:se.defaultNode.style.fill,lineWidth:se.defaultNode.style.lineWidth},labelCfg:{style:{fill:se.nodeLabel.style.fill,fontSize:se.nodeLabel.style.fontSize,fontFamily:se.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,U.__assign)({},se.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=n.width||i[0],s=n.height||i[1],u=(0,U.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),i=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||i.width,o[1]=s.attr("height")||i.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,l.mix)({},i,s.attr(),u);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Va.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:se.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var i=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,i=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,U.__assign)({r:u,x:i,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,h=i-f/2,A=o-c/2;t.setClip({type:"rect",attrs:(0,U.__assign)({x:h,y:A,width:f,height:c},s)})}else if(n==="ellipse"){var P=r.rx,B=r.ry;t.setClip({type:"ellipse",attrs:(0,U.__assign)({x:i,y:o,rx:P,ry:B},s)})}else if(n==="polygon"){var V=r.points;t.setClip({type:"polygon",attrs:(0,U.__assign)({points:V},s)})}else if(n==="path"){var $=r.path;t.setClip({type:"path",attrs:(0,U.__assign)({path:$},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,i=this.getSize(e),o=i[0],s=i[1];r&&(o=r.width||i[0],s=r.height||i[1]);var u=(0,U.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),i=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);i&&!i.destroyed&&i.attr(o)}},"single-node");var Ir={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return i},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return i},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return i},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return i},triangleRect:function(e,t,r,n,i,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),i===void 0&&(i=5),o===void 0&&(o=0);var s=o*2,u=s+t+i,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},Dr={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),i=r*Math.sin(Math.PI/6);return[["M",e-n,t+i],["L",e+n,t+i],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),i=r*Math.sin(Math.PI/6);return[["M",e-n,t-i],["L",e+n,t-i],["L",e,t+r],["Z"]]}},en=Va,Sn=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Dn=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},gn=zt,ei=(0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)({},I),k),m),z),y),v),{transform:gn,mat3:rt}),In=ei,xi=function(){function a(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return a.prototype.initLayout=function(){},a.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},a.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},a.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(i,o){return i===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},a.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,i=n===void 0?{}:n;if(t){var o=i.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Dn(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},a.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,U.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},a.prototype.changeData=function(e){this.layout(e)},a.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,i=(n=r.getType)===null||n===void 0?void 0:n.call(r);i&&t.push(i),r.destroy()}),this.layoutMethods=[],t},a.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},a.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],i=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),h=this.graph.getCombos(),A=f.length,P=0;P<A;P++){var B=f[P];if(!(!B||B.destroyed)){var V=B.getModel();if(!B.isVisible()){r.push(V);continue}t.push(V)}}for(var $=c.length,P=0;P<$;P++){var ut=c[P];if(!(!ut||ut.destroyed)){var V=ut.getModel();if(!ut.isVisible()){i.push(V);continue}V.isComboEdge?o.push(V):n.push(V)}}for(var lt=h.length,P=0;P<lt;P++){var dt=h[P];if(!dt.destroyed){var V=dt.getModel();if(!dt.isVisible()){u.push(V);continue}s.push(V)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:i,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(xt){return xt.getModel()})}},a.prototype.relayout=function(e){var t=this,r=this,n=r.graph,i=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){if(e){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}n.emit("beforelayout");var u=Promise.resolve();i==null||i.forEach(function(f,c){var h=o[c]||o;u=u.then(function(){var A,P=t.execLayoutMethod(h,c);return c===i.length-1&&((A=o.onAllLayoutEnd)===null||A===void 0||A.call(o)),P})})}},a.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,i=(0,U.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,l.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,l.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,h){return c[h.id]=!0,c},{});s=function(h){return f[h.source]&&f[h.target]}}return(0,U.__assign)({nodes:u,edges:n.filter(s)},i)},a.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,l.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Dd(o);return s.size=[s.width,s.height],s}),i=Object.values((0,l.groupBy)(e,"layoutOrder"));return{groupNodes:i,layoutNodes:n}},a.prototype.layoutAnimate=function(){},a.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Bu(r[0].x))){for(var n=[0,0],i=r.length,o=0;o<i;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<i;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},a.prototype.initPositions=function(e,t){var r,n=this.graph;if(!t)return!1;var i=t.filter(function(dt){return Bu(dt.x)||Bu(dt.y)}),o=i?i.length:0;if(o){var s=(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this);if(s)return!1;var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),h=Math.ceil(o/c),A=u/(c-1),P=f/(h-1);(!isFinite(A)||!A)&&(A=0),(!isFinite(P)||!A)&&(P=0);for(var B=e[0]-u/2,V=e[1]-f/2,$=!0,ut=0;ut<o;ut++){var lt=i[ut];Bu(+lt.x)&&($=!1,lt.x=ut%c*A+B),Bu(+lt.y)&&($=!1,lt.y=Math.floor(ut/c)*P+V)}return $}},a.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},a}(),ai=xi,oi=function(){function a(e){this.graph=e,this.destroyed=!1,this.initEvents()}return a}(),va=oi,Yi=en.registerNode,Ia=en.registerEdge,ra=en.registerCombo,Pa=W.registerBehavior,Jr=se,Ys={version:se.version,AbstractGraph:ev,BaseGlobal:Jr,Util:In,Shape:en,Node:md,Edge:Lv,Combo:Wd,Hull:qd,registerNode:en.registerNode,registerEdge:en.registerEdge,registerCombo:en.registerCombo,registerBehavior:W.registerBehavior,Arrow:Ir,Marker:Dr,AbstractLayout:ai,AbstractEvent:va},tc=M(33101);function Bc(){return window?window.devicePixelRatio:1}function Ji(a,e,t,r){var n=a-t,i=e-r;return Math.sqrt(n*n+i*i)}function df(a,e,t,r,n,i){return n>=a&&n<=a+t&&i>=e&&i<=e+r}function Gu(a,e){return!(e.minX>a.maxX||e.maxX<a.minX||e.minY>a.maxY||e.maxY<a.minY)}function Nl(a,e){return!a||!e?a||e:{minX:Math.min(a.minX,e.minX),minY:Math.min(a.minY,e.minY),maxX:Math.max(a.maxX,e.maxX),maxY:Math.max(a.maxY,e.maxY)}}function Gc(a,e){return a[0]===e[0]&&a[1]===e[1]}var Sh=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,_h=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ep=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,nv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function iv(a,e){var t=a.match(nv);(0,l.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function _d(a,e,t){var r=Sh.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),i=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,h=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,A=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,P=a.createLinearGradient(s.x,s.y,h,A);return iv(i,P),P}function Xy(a,e,t){var r=_h.exec(t),n=parseFloat(r[1]),i=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(nv);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,h=f.maxY-f.minY,A=Math.sqrt(c*c+h*h)/2,P=a.createRadialGradient(f.minX+c*n,f.minY+h*i,0,f.minX+c/2,f.minY+h/2,o*A);return iv(s,P),P}function Yy(a,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,i=ep.exec(t),o=i[1],s=i[2];function u(){r=a.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function Hy(a,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,l.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return _d(a,e,t);if(t[0]==="r")return Xy(a,e,t);if(t[0]==="p")return Yy(a,e,t)}return t}if(t instanceof CanvasPattern)return t}function Zy(a){var e=0,t=0,r=0,n=0;return(0,l.isArray)(a)?a.length===1?e=t=r=n=a[0]:a.length===2?(e=r=a[0],t=n=a[1]):a.length===3?(e=a[0],t=n=a[1],r=a[2]):(e=a[0],t=a[1],r=a[2],n=a[3]):e=t=r=n=a,[e,t,r,n]}function rp(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Wp(a,e){return rp(a)*rp(e)?(a[0]*e[0]+a[1]*e[1])/(rp(a)*rp(e)):1}function Ig(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(Wp(a,e))}function Pg(a,e){var t=e[1],r=e[2],n=(0,l.mod)((0,l.toRadian)(e[3]),Math.PI*2),i=e[4],o=e[5],s=a[0],u=a[1],f=e[6],c=e[7],h=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,A=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,P=h*h/(t*t)+A*A/(r*r);P>1&&(t*=Math.sqrt(P),r*=Math.sqrt(P));var B=t*t*(A*A)+r*r*(h*h),V=B?Math.sqrt((t*t*(r*r)-B)/B):1;i===o&&(V*=-1),isNaN(V)&&(V=0);var $=r?V*t*A/r:0,ut=t?V*-r*h/t:0,lt=(s+f)/2+Math.cos(n)*$-Math.sin(n)*ut,dt=(u+c)/2+Math.sin(n)*$+Math.cos(n)*ut,xt=[(h-$)/t,(A-ut)/r],Wt=[(-1*h-$)/t,(-1*A-ut)/r],Qt=Ig([1,0],xt),Zt=Ig(xt,Wt);return Wp(xt,Wt)<=-1&&(Zt=Math.PI),Wp(xt,Wt)>=1&&(Zt=0),o===0&&Zt>0&&(Zt=Zt-2*Math.PI),o===1&&Zt<0&&(Zt=Zt+2*Math.PI),{cx:lt,cy:dt,rx:Gc(a,[f,c])?0:t,ry:Gc(a,[f,c])?0:r,startAngle:Qt,endAngle:Qt+Zt,xRotation:n,arcFlag:i,sweepFlag:o}}var np=Math.sin,ip=Math.cos,Vp=Math.atan2,ap=Math.PI;function Og(a,e,t,r,n,i,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-i,h=Vp(c,f),A=new $p({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ip(ap/6)+","+10*np(ap/6)+" L0,0 L"+10*ip(ap/6)+",-"+10*np(ap/6),stroke:s,lineWidth:u}});A.translate(n,i),A.rotateAtPoint(n,i,h),a.set(o?"startArrowShape":"endArrowShape",A)}function Dg(a,e,t,r,n,i,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,h=o?s:u,A=h.d,P=h.fill,B=h.stroke,V=h.lineWidth,$=(0,U.__rest)(h,["d","fill","stroke","lineWidth"]),ut=t-n,lt=r-i,dt=Vp(lt,ut);A&&(n=n-ip(dt)*A,i=i-np(dt)*A);var xt=new $p({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:(0,U.__assign)((0,U.__assign)({},$),{stroke:B||f,lineWidth:V||c,fill:P})});xt.translate(n,i),xt.rotateAtPoint(n,i,dt),a.set(o?"startArrowShape":"endArrowShape",xt)}function td(a,e,t,r,n){var i=Vp(r-e,t-a);return{dx:ip(i)*n,dy:np(i)*n}}function jp(a,e,t,r,n,i){typeof e.startArrow=="object"?Dg(a,e,t,r,n,i,!0):e.startArrow?Og(a,e,t,r,n,i,!0):a.set("startArrowShape",null)}function Xp(a,e,t,r,n,i){typeof e.endArrow=="object"?Dg(a,e,t,r,n,i,!1):e.endArrow?Og(a,e,t,r,n,i,!1):a.set("startArrowShape",null)}var Ng={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Md(a,e){var t=e.attr();for(var r in t){var n=t[r],i=Ng[r]?Ng[r]:r;i==="matrix"&&n?a.transform(n[0],n[1],n[3],n[4],n[6],n[7]):i==="lineDash"&&a.setLineDash?(0,l.isArray)(n)&&a.setLineDash(n):(i==="strokeStyle"||i==="fillStyle"?n=Hy(a,e,n):i==="globalAlpha"&&(n=n*a.globalAlpha),a[i]=n)}}function Yp(a,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(a,t):n.skipDraw()}}function Ky(a,e,t){var r=a.get("refreshElements");(0,l.each)(r,function(n){if(n!==a)for(var i=n.cfg.parent;i&&i!==a&&!i.cfg.refresh;)i.cfg.refresh=!0,i=i.cfg.parent}),r[0]===a?Zp(e,t):Hp(e,t)}function Hp(a,e){for(var t=0;t<a.length;t++){var r=a[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Zp(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Hp(r.cfg.children,e);else{var n=$y(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Hp(r.cfg.children,e)}}}function Lg(a){for(var e=0;e<a.length;e++){var t=a[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Lg(t.cfg.children)}}function Zp(a,e){for(var t=0;t<a.length;t++){var r=a[t];r.cfg.refresh=!0,r.isGroup()&&Zp(r.get("children"),e)}}function $y(a,e){var t=a.cfg.cacheCanvasBBox,r=a.cfg.isInView&&t&&Gu(t,e);return r}function kg(a,e,t,r){var n=t.path,i=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var h=n[c],A=h[0];if(c===0&&i&&i.d){var P=a.getStartTangent();f=td(P[0][0],P[0][1],P[1][0],P[1][1],i.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var B=n[c+1];if(B[0]==="Z"){var P=a.getEndTangent();f=td(P[0][0],P[0][1],P[1][0],P[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var P=a.getEndTangent();f=td(P[0][0],P[0][1],P[1][0],P[1][1],o.d)}var V=f.dx,$=f.dy;switch(A){case"M":e.moveTo(h[1]-V,h[2]-$),u=[h[1],h[2]];break;case"L":e.lineTo(h[1]-V,h[2]-$);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-V,h[4]-$);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-V,h[6]-$);break;case"A":{var ut=void 0;r?(ut=r[c],ut||(ut=Pg(s,h),r[c]=ut)):ut=Pg(s,h);var lt=ut.cx,dt=ut.cy,xt=ut.rx,Wt=ut.ry,Qt=ut.startAngle,Zt=ut.endAngle,de=ut.xRotation,De=ut.sweepFlag;if(e.ellipse)e.ellipse(lt,dt,xt,Wt,de,Qt,Zt,1-De);else{var xe=xt>Wt?xt:Wt,He=xt>Wt?1:xt/Wt,ar=xt>Wt?Wt/xt:1;e.translate(lt,dt),e.rotate(de),e.scale(He,ar),e.arc(0,0,xe,Qt,Zt,1-De),e.scale(1/He,1/ar),e.rotate(-de),e.translate(-lt,-dt)}break}case"Z":e.closePath();break;default:break}if(A==="Z")s=u;else{var Fr=h.length;s=[h[Fr-2],h[Fr-1]]}}}}function Rg(a,e){var t=a.get("canvas");t&&(e==="remove"&&(a._cacheCanvasBBox=a.get("cacheCanvasBBox")),a.get("hasChanged")||(a.set("hasChanged",!0),a.cfg.parent&&a.cfg.parent.get("hasChanged")||(t.refreshElement(a,e,t),t.get("autoDraw")&&t.draw())))}function Qy(a){var e;if(a.destroyed)e=a._cacheCanvasBBox;else{var t=a.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=a.getCanvasBBox(),i=n&&!!(n.width&&n.height);r&&i?e=Nl(t,n):r?e=t:i&&(e=n)}return e}function Jy(a){if(!a.length)return null;var e=[],t=[],r=[],n=[];return(0,l.each)(a,function(i){var o=Qy(i);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,l.min)(e),minY:(0,l.min)(t),maxX:(0,l.max)(r),maxY:(0,l.max)(n)}}function qy(a,e){return!a||!e||!Gu(a,e)?null:{minX:Math.max(a.minX,e.minX),minY:Math.max(a.minY,e.minY),maxX:Math.min(a.maxX,e.maxX),maxY:Math.min(a.maxY,e.maxY)}}var tm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Rg(this,t)},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),Md(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,l.each)(t,function(A){var P=A.cfg.cacheCanvasBBox;P&&A.cfg.isInView&&(r.push(P.minX,P.maxX),n.push(P.minY,P.maxY))});var i=null;if(r.length){var o=(0,l.min)(r),s=(0,l.max)(r),u=(0,l.min)(n),f=(0,l.max)(n);i={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var h=c.getViewRange();this.set("isInView",Gu(i,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",i)},e.prototype.draw=function(t,r){var n=this.cfg.children,i=r?this.cfg.refresh:!0;n.length&&i&&(t.save(),Md(t,this),this._applyClip(t,this.getClip()),Yp(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(yh),Bg=tm,em=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return Bg},e.prototype.onCanvasChange=function(t){Rg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Il(t),i=n(this),o=r/2,s=i.x-o,u=i.y-o,f=i.x+i.width+o,c=i.y+i.height+o;return{x:s,minX:s,y:u,minY:u,width:i.width+r,height:i.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),Md(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var i=this.getCanvasBBox();if(!Gu(r,i)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Md(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Gu(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,i=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,l.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=i):this.fill(t)),this.isStroke()&&n>0&&(!(0,l.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),i=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,i,o)},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Al),ec=em,rm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,h=o/2,A=Ji(u,f,t,r);return i&&n?A<=c+h:i?A<=c:n?A>=c-h&&A<=c+h:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,i=r.y,o=r.r;t.beginPath(),t.arc(n,i,o,0,Math.PI*2,!1),t.closePath()},e}(ec),nm=rm;function op(a,e,t,r){return a/(t*t)+e/(r*r)}var im=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,h=s.rx,A=s.ry,P=(t-f)*(t-f),B=(r-c)*(r-c);return i&&n?op(P,B,h+u,A+u)<=1:i?op(P,B,h,A)<=1:n?op(P,B,h-u,A-u)>=1&&op(P,B,h+u,A+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,i=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,i,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,i),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(ec),am=im;function Gg(a){return a instanceof HTMLElement&&(0,l.isString)(a.nodeName)&&a.nodeName.toUpperCase()==="CANVAS"}var om=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,l.isString)(t)){var i=new Image;i.onload=function(){if(r.destroyed)return!1;r.attr("img",i),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},i.crossOrigin="Anonymous",i.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Gg(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,i=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,h=r.sheight,A=r.img;(A instanceof Image||Gg(A))&&(!(0,l.isNil)(u)&&!(0,l.isNil)(f)&&!(0,l.isNil)(c)&&!(0,l.isNil)(h)?t.drawImage(A,u,f,c,h,n,i,o,s):t.drawImage(A,n,i,o,s))},e}(ec),sm=om;function Mh(a,e,t,r,n,i,o){var s=Math.min(a,t),u=Math.max(a,t),f=Math.min(e,r),c=Math.max(e,r),h=n/2;return i>=s-h&&i<=u+h&&o>=f-h&&o<=c+h?fe.pointToLine(a,e,t,r,i,o)<=n/2:!1}var um=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&jp(this,t,i,o,r,n),u&&Xp(this,t,r,n,i,o)},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,h=s.y2;return Mh(u,f,c,h,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,i=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},h={dx:0,dy:0};u&&u.d&&(c=td(n,i,o,s,r.startArrow.d)),f&&f.d&&(h=td(n,i,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,i+c.dy),t.lineTo(o-h.dx,s-h.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,o=t.y2;return fe.length(r,n,i,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,i=r.y1,o=r.x2,s=r.y2;return fe.pointAt(n,i,o,s,t)},e}(ec),fm=um,cm={circle:function(a,e,t){return[["M",a-t,e],["A",t,t,0,1,0,a+t,e],["A",t,t,0,1,0,a-t,e]]},square:function(a,e,t){return[["M",a-t,e-t],["L",a+t,e-t],["L",a+t,e+t],["L",a-t,e+t],["Z"]]},diamond:function(a,e,t){return[["M",a-t,e],["L",a,e-t],["L",a+t,e],["L",a,e+t],["Z"]]},triangle:function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e+r],["L",a,e-r],["L",a+t,e+r],["Z"]]},"triangle-down":function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e-r],["L",a+t,e-r],["L",a,e+r],["Z"]]}},lm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,l.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,i=t.symbol||"circle",o=this._getR(t),s,u;if((0,l.isFunction)(i))s=i,u=s(r,n,o),u=Ke(u);else{if(s=e.Symbols[i],!s)return console.warn(i+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");kg(this,t,{path:r},n)},e.Symbols=cm,e}(ec),hm=lm;function Fg(a,e,t){var r=ui();return a.createPath(r),r.isPointInPath(e,t)}var dm=1e-6;function Kp(a){return Math.abs(a)<dm?0:a<0?-1:1}function vm(a,e,t){return(t[0]-a[0])*(e[1]-a[1])===(e[0]-a[0])*(t[1]-a[1])&&Math.min(a[0],e[0])<=t[0]&&t[0]<=Math.max(a[0],e[0])&&Math.min(a[1],e[1])<=t[1]&&t[1]<=Math.max(a[1],e[1])}function Ug(a,e,t){var r=!1,n=a.length;if(n<=2)return!1;for(var i=0;i<n;i++){var o=a[i],s=a[(i+1)%n];if(vm(o,s,[e,t]))return!0;Kp(o[1]-t)>0!=Kp(s[1]-t)>0&&Kp(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function av(a,e,t,r,n,i,o,s){var u=(Math.atan2(s-e,o-a)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:a+t*Math.cos(u),y:e+t*Math.sin(u)};return Ji(f.x,f.y,o,s)<=i/2}var pm=zt;function gm(a){for(var e=!1,t=a.length,r=0;r<t;r++){var n=a[r],i=n[0];if(i==="C"||i==="A"||i==="Q"){e=!0;break}}return e}function ym(a,e,t,r,n){for(var i=!1,o=e/2,s=0;s<a.length;s++){var u=a[s],f=u.currentPoint,c=u.params,h=u.prePoint,A=u.box;if(!(A&&!df(A.x-o,A.y-o,A.width+e,A.height+e,t,r))){switch(u.command){case"L":case"Z":i=Mh(h[0],h[1],f[0],f[1],e,t,r);break;case"Q":var P=Vr.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],t,r);i=P<=e/2;break;case"C":var B=ht.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);i=B<=e/2;break;case"A":var V=u.arcParams,$=V.cx,ut=V.cy,lt=V.rx,dt=V.ry,xt=V.startAngle,Wt=V.endAngle,Qt=V.xRotation,Zt=[t,r,1],de=lt>dt?lt:dt,De=lt>dt?1:lt/dt,xe=lt>dt?dt/lt:1,He=pm(null,[["t",-$,-ut],["r",-Qt],["s",1/De,1/xe]]);qo.transformMat3(Zt,Zt,He),i=av(0,0,de,xt,Wt,e,Zt[0],Zt[1]);break;default:break}if(i)break}}return i}function mm(a){for(var e=a.length,t=[],r=[],n=[],i=0;i<e;i++){var o=a[i],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var sp=(0,U.__assign)({hasArc:gm,extractPolygons:mm,isPointInStroke:ym},E);function zg(a,e,t){for(var r=!1,n=0;n<a.length;n++){var i=a[n];if(r=Ug(i,e,t),r)break}return r}var bm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ke(t);var r=sp.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Pd(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var i=this.getStartTangent();jp(this,t,i[0][0],i[0][1],i[1][0],i[1][1])}if(n){var i=this.getEndTangent();Xp(this,t,i[0][0],i[0][1],i[1][0],i[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=sp.isPointInStroke(s,o,t,r,c)}if(!f&&i)if(u)f=Fg(this,t,r);else{var h=this.attr("path"),A=sp.extractPolygons(h);f=zg(A.polygons,t,r)||zg(A.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");kg(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,l.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,i,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,l.each)(r,function(c,h){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),i=h)});var s=o[i];if((0,l.isNil)(s)||(0,l.isNil)(i))return null;var u=s.length,f=o[i+1];return ht.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",sp.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],i,o,s,u,f=this.get("curve");if(f){if((0,l.each)(f,function(c,h){s=f[h+1],u=c.length,s&&(t+=ht.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,l.each)(f,function(c,h){s=f[h+1],u=c.length,s&&(i=[],i[0]=r/t,o=ht.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,i[1]=r/t,n.push(i))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,i=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([i[0],i[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var i=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([i[0],i[1]]),n.push([o[0],o[1]]))}return n},e}(ec),$p=bm;function Wg(a,e,t,r,n){var i=a.length;if(i<2)return!1;for(var o=0;o<i-1;o++){var s=a[o][0],u=a[o][1],f=a[o+1][0],c=a[o+1][1];if(Mh(s,u,f,c,e,t,r))return!0}if(n){var h=a[0],A=a[i-1];if(Mh(h[0],h[1],A[0],A[1],e,t,r))return!0}return!1}var Em=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr().points,u=!1;return n&&(u=Wg(s,o,t,r,!0)),!u&&i&&(u=Ug(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var i=0;i<n.length;i++){var o=n[i];i===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(ec),xm=Em,wm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,i=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],h=n[s-1][1];i&&jp(this,t,n[1][0],n[1][1],u,f),o&&Xp(this,t,n[s-2][0],n[s-2][1],c,h)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){if(!n||!o)return!1;var s=this.attr().points;return Wg(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,i=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],h=n[s-1][1];if(i&&i.d){var A=td(u,f,n[1][0],n[1][1],i.d);u+=A.dx,f+=A.dy}if(o&&o.d){var A=td(n[s-2][0],n[s-2][1],c,h,o.d);c-=A.dx,h-=A.dy}t.beginPath(),t.moveTo(u,f);for(var P=0;P<s-1;P++){var B=n[P];t.lineTo(B[0],B[1])}t.lineTo(c,h)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,l.isNil)(r)?(this.set("totalLength",wn.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var i,o;return(0,l.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(i=(t-s[0])/(s[1]-s[0]),o=u)}),fe.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,i=[],o,s;(0,l.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=fe.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,i.push(o))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(ec),Sm=wm;function _m(a,e,t,r,n,i,o){var s=n/2;return df(a-s,e-s,t,n,i,o)||df(a+t-s,e-s,n,r,i,o)||df(a+s,e+r-s,t,n,i,o)||df(a-s,e+s,n,r,i,o)}function Mm(a,e,t,r,n,i,o,s){var u=i/2;return Mh(a+n,e,a+t-n,e,i,o,s)||Mh(a+t,e+n,a+t,e+r-n,i,o,s)||Mh(a+t-n,e+r,a+n,e+r,i,o,s)||Mh(a,e+r-n,a,e+n,i,o,s)||av(a+t-n,e+n,n,1.5*Math.PI,2*Math.PI,i,o,s)||av(a+t-n,e+r-n,n,0,.5*Math.PI,i,o,s)||av(a+n,e+r-n,n,.5*Math.PI,Math.PI,i,o,s)||av(a+n,e+n,n,Math.PI,1.5*Math.PI,i,o,s)}var Cm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,h=s.height,A=s.radius;if(A){var B=!1;return n&&(B=Mm(u,f,c,h,A,o,t,r)),!B&&i&&(B=Fg(this,t,r)),B}else{var P=o/2;if(i&&n)return df(u-P,f-P,c+P,h+P,t,r);if(i)return df(u,f,c,h,t,r);if(n)return _m(u,f,c,h,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,i=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,i,o,s);else{var f=Zy(u),c=f[0],h=f[1],A=f[2],P=f[3];t.moveTo(n+c,i),t.lineTo(n+o-h,i),h!==0&&t.arc(n+o-h,i+h,h,-Math.PI/2,0),t.lineTo(n+o,i+s-A),A!==0&&t.arc(n+o-A,i+s-A,A,0,Math.PI/2),t.lineTo(n+P,i+s),P!==0&&t.arc(n+P,i+s-P,P,Math.PI/2,Math.PI),t.lineTo(n,i+c),c!==0&&t.arc(n+c,i+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(ec),Am=Cm,Tm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=za(t)},e.prototype._setText=function(t){var r=null;(0,l.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var i=this.attrs,o=i.textBaseline,s=i.x,u=i.y,f=i.fontSize*1,c=this._getSpaceingY(),h=Qi(i.text,i.fontSize,i.lineHeight),A;(0,l.each)(r,function(P,B){A=u+B*(c+f)-h+f,o==="middle"&&(A+=h-f-(h-f)/2),o==="top"&&(A+=h-f),(0,l.isNil)(P)||(n?t.fillText(P,s,A):t.strokeText(P,s,A))})},e.prototype._drawText=function(t,r){var n=this.attr(),i=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,l.isNil)(u)||(r?t.fillText(u,i,o):t.strokeText(u,i,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,i=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,l.isNil)(o)&&o!==1&&(t.globalAlpha=i),this.stroke(t)),this.isFill()&&(!(0,l.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=i):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(ec),Im=Tm;function Pm(a,e){if(e){var t=cc(e);return ea(t,a)}return a}function Vg(a,e,t){var r=a.getTotalMatrix();if(r){var n=Pm([e,t,1],r),i=n[0],o=n[1];return[i,o]}return[e,t]}function jg(a,e,t){if(a.isCanvas&&a.isCanvas())return!0;if(!nl(a)||a.cfg.isInView===!1)return!1;if(a.cfg.clipShape){var r=Vg(a,e,t),n=r[0],i=r[1];if(a.isClipped(n,i))return!1}var o=a.cfg.cacheCanvasBBox||a.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Xg(a,e,t){if(!jg(a,e,t))return null;for(var r=null,n=a.getChildren(),i=n.length,o=i-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Xg(s,e,t);else if(jg(s,e,t)){var u=s,f=Vg(s,e,t),c=f[0],h=f[1];u.isInShape(c,h)&&(r=s)}if(r)break}return r}var Om=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return Bg},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Bc();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){a.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){a.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Xg(this,t,r):n=a.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=Jy(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var i=this.get("clipView");i&&(n=qy(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,l.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),Md(t,this),Yp(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),i=this._getRefreshRegion();i?(t.clearRect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.save(),t.beginPath(),t.rect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.clip(),Md(t,this),Ky(this,n,i),Yp(t,n,i),t.restore()):r.length&&Lg(r),(0,l.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,l.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Cl),Ll=Om,RS="0.5.12",Qp={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Fi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},BS=null;function vf(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Yg(a){var e=Qp[a.type],t=a.getParent();if(!e)throw new Error("the type "+a.type+" is not supported by svg");var r=vf(e);if(a.get("id")&&(r.id=a.get("id")),a.set("el",r),a.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Hg(a,e){var t=a.get("el"),r=(0,l.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(i){n.appendChild(i)}),t.appendChild(n)}function Dm(a,e){var t=a.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],i=r.indexOf(a);if(n){if(i>e)t.insertBefore(a,n);else if(i<e){var o=r[e+1];o?t.insertBefore(a,o):t.appendChild(a)}}else t.appendChild(a)}function Nm(a,e){var t=a.cfg.el,r=a.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var i=e.find("filter",n);i||(i=e.addShadow(n)),t.setAttribute("filter","url(#"+i+")")}}function ov(a){var e=a.attr().matrix;if(e){for(var t=a.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function sv(a,e){var t=a.getClip(),r=a.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Yg(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Zg(a,e){e.forEach(function(t){t.draw(a)})}function Kg(a,e){var t=a.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=a.getParent(),i=n?n.getChildren():[t],o=a.get("el");if(e==="remove"){var s=a.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Dm(o,i.indexOf(a));else if(e==="sort"){var c=a.get("children");c&&c.length&&Hg(a,function(h,A){return c.indexOf(h)-c.indexOf(A)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?ov(a):e==="clip"?sv(a,r):e==="attr"||e==="add"&&a.draw(r)}}var Lm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=vf("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Kg(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),sv(this,t),this.createPath(t),r.length&&Zg(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){Fi[s]&&i.setAttribute(Fi[s],o)}),ov(this)},e}(yh),$g=Lm,km=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return $g},e.prototype.onCanvasChange=function(t){Kg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Il(this.get("type"));n&&(r=n(this))}if(r){var i=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,h=i-c,A=o-c,P=i+s+c,B=o+u+c;return{x:h,y:A,minX:h,minY:A,maxX:P,maxY:B,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Yg(this),sv(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),i=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,h=n.lineWidth,A=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",i):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",i||o),f&&A.setAttribute(Fi.fillOpacity,f)),this.canStroke&&h>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&A.setAttribute(Fi.strokeOpacity,c),h&&A.setAttribute(Fi.lineWidth,h))},e.prototype._setColor=function(t,r,n){var i=this.get("el");if(!n){i.setAttribute(Fi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),i.setAttribute(Fi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),i.setAttribute(Fi[r],"url(#"+o+")")}else i.setAttribute(Fi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),i=r||n,o=i.shadowOffsetX,s=i.shadowOffsetY,u=i.shadowBlur,f=i.shadowColor;(o||s||u||f)&&Nm(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&ov(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),i=this.get("canvas"),o=i.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Al),pf=km,Rm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="x"||s==="y"?i.setAttribute("c"+s,o):Fi[s]&&i.setAttribute(Fi[s],o)})},e}(pf),Bm=Rm,Gm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");if((0,l.each)(r||n,function(f,c){Fi[c]&&i.setAttribute(Fi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=i.childNodes,u=s.length-1;u>=0;u--)i.removeChild(s[u]);i.appendChild(o)}else i.innerHTML=o}else i.innerHTML=n.html},e}(pf),Fm=Gm,Um=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="x"||s==="y"?i.setAttribute("c"+s,o):Fi[s]&&i.setAttribute(Fi[s],o)})},e}(pf),zm=Um,Wm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el");(0,l.each)(r||i,function(s,u){u==="img"?n._setImage(i.img):Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,l.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,l.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var i=document.createElement("canvas");i.setAttribute("width",""+t.width),i.setAttribute("height",""+t.height),i.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",i.toDataURL())}},e}(pf),Vm=Wm,jm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,l.isObject)(o)?t.addArrow(n,Fi[s]):t.getDefaultArrow(n,Fi[s]);i.setAttribute(Fi[s],"url(#"+u+")")}else i.removeAttribute(Fi[s]);else Fi[s]&&i.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,o=t.y2;return fe.length(r,n,i,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,i=r.y1,o=r.x2,s=r.y2;return fe.pointAt(n,i,o,s,t)},e}(pf),Xm=jm,up={circle:function(a,e,t){return[["M",a,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(a,e,t){return[["M",a-t,e-t],["L",a+t,e-t],["L",a+t,e+t],["L",a-t,e+t],["Z"]]},diamond:function(a,e,t){return[["M",a-t,e],["L",a,e-t],["L",a+t,e],["L",a,e+t],["Z"]]},triangle:function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e+r],["L",a,e-r],["L",a+t,e+r],["z"]]},triangleDown:function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e-r],["L",a+t,e-r],["L",a,e+r],["Z"]]}},Qg={get:function(a){return up[a]},register:function(a,e){up[a]=e},remove:function(a){delete up[a]},getAll:function(){return up}},Ym=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,l.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,i=t.r||t.radius,o=t.symbol||"circle",s;return(0,l.isFunction)(o)?s=o:s=Qg.get(o),s?s(r,n,i):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Qg,e}(pf),Hm=Ym,Zm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el");(0,l.each)(r||i,function(s,u){if(u==="path"&&(0,l.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,l.isObject)(s)?t.addArrow(i,Fi[u]):t.getDefaultArrow(i,Fi[u]);o.setAttribute(Fi[u],"url(#"+f+")")}else o.removeAttribute(Fi[u]);else Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var i=r?r.getPointAtLength(t*n):null;return i?{x:i.x,y:i.y}:null},e}(pf),Km=Zm,$m=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="points"&&(0,l.isArray)(o)&&o.length>=2?i.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&i.setAttribute(Fi[s],o)})},e}(pf),Qm=$m,Jm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="points"&&(0,l.isArray)(o)&&o.length>=2?i.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&i.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,l.isNil)(r)?(this.set("totalLength",wn.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var i,o;return(0,l.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(i=(t-s[0])/(s[1]-s[0]),o=u)}),fe.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,i=[],o,s;(0,l.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=fe.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,i.push(o))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(pf),qm=Jm,t1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,e1=/[^\s,]+/gi;function r1(a){var e=0,t=0,r=0,n=0;return(0,l.isArray)(a)?a.length===1?e=t=r=n=a[0]:a.length===2?(e=r=a[0],t=n=a[1]):a.length===3?(e=a[0],t=n=a[1],r=a[2]):(e=a[0],t=a[1],r=a[2],n=a[3]):e=t=r=n=a,{r1:e,r2:t,r3:r,r4:n}}function GS(a){if(a=a||[],isArray(a))return a;if(isString(a))return a=a.match(t1),each(a,function(e,t){if(e=e.match(e1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,i){isNaN(n)||(e[i]=+n)}),a[t]=e}),a}var n1=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,l.each)(r||i,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(i)),s=!0):u.indexOf(c)===-1&&Fi[c]&&o.setAttribute(Fi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,i=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+i+",0 l 0,"+o+" l"+-i+" 0 z";var u=r1(s);(0,l.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(i-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-i)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(pf),i1=n1,Jg=.3,a1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},s1={left:"left",start:"left",center:"middle",right:"end",end:"end"},u1=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el");this._setFont(),(0,l.each)(r||i,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?ov(n):Fi[u]&&o.setAttribute(Fi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,i=r.textAlign,o=ql();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",o1[n]||"alphabetic"):t.setAttribute("alignment-baseline",a1[n]||"baseline"),t.setAttribute("text-anchor",s1[i]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),i=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,l.each)(u,function(h,A){A===0?s==="alphabetic"?c+='<tspan x="'+i+'" dy="'+-f+'em">'+h+"</tspan>":s==="top"?c+='<tspan x="'+i+'" dy="0.9em">'+h+"</tspan>":s==="middle"?c+='<tspan x="'+i+'" dy="'+-(f-1)/2+'em">'+h+"</tspan>":s==="bottom"?c+='<tspan x="'+i+'" dy="-'+(f+Jg)+'em">'+h+"</tspan>":s==="hanging"&&(c+='<tspan x="'+i+'" dy="'+(-(f-1)-Jg)+'em">'+h+"</tspan>"):c+='<tspan x="'+i+'" dy="1em">'+h+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(pf),f1=u1,c1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,l1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function qg(a){var e=a.match(h1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,l.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function d1(a,e){var t=c1.exec(a),r=(0,l.mod)((0,l.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],i,o;r>=0&&r<.5*Math.PI?(i={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(i={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(i={x:1,y:1},o={x:0,y:0}):(i={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-i.x+s*(o.y-i.y))/(u+1)+i.x,c=s*(o.x-i.x+s*(o.y-i.y))/(u+1)+i.y;e.setAttribute("x1",i.x),e.setAttribute("y1",i.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=qg(n)}function v1(a,e){var t=l1.exec(a),r=parseFloat(t[1]),n=parseFloat(t[2]),i=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",i),e.innerHTML=qg(o)}var p1=function(){function a(e){this.cfg={};var t=null,r=(0,l.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=vf("linearGradient"),d1(e,t)):(t=vf("radialGradient"),v1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return a.prototype.match=function(e,t){return this.cfg===t},a}(),g1=p1,y1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},m1={x:"-40%",y:"-40%",width:"200%",height:"200%"},b1=function(){function a(e){this.type="filter",this.cfg={},this.type="filter";var t=vf("filter");return(0,l.each)(m1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,l.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return a.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,l.each)(Object.keys(n),function(i){if(n[i]!==t[i])return r=!1,!1}),r},a.prototype.update=function(e,t){var r=this.cfg;return r[y1[e]]=t,this._parseShadow(r,this.el),this},a.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},a}(),E1=b1,x1=function(){function a(e,t){this.cfg={};var r=vf("marker"),n=(0,l.uniqueId)("marker_");r.setAttribute("id",n);var i=vf("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),r.appendChild(i),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=i,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,i):(this.cfg=o,this._setMarker(e.lineWidth,i)),this}return a.prototype.match=function(){return!1},a.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY",""+5)},a.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,i=this.cfg.d;(0,l.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),i&&r.setAttribute("refX",""+i/e)},a.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},a}(),t0=x1,w1=function(){function a(e){this.type="clip",this.cfg={};var t=vf("clipPath");this.el=t,this.id=(0,l.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return a.prototype.match=function(){return!1},a.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},a}(),S1=w1,_1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,M1=function(){function a(e){this.cfg={};var t=vf("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=vf("image");t.appendChild(r);var n=(0,l.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var i=_1.exec(e),o=i[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return a.prototype.match=function(e,t){return this.cfg===t},a}(),C1=M1,A1=function(){function a(e){var t=vf("defs"),r=(0,l.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return a.prototype.find=function(e,t){for(var r=this.children,n=null,i=0;i<r.length;i++)if(r[i].match(e,t)){n=r[i].id;break}return n},a.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},a.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},a.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new t0(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},a.prototype.addGradient=function(e){var t=new g1(e);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addArrow=function(e,t){var r=new t0(e,t);return this.el.appendChild(r.el),this.add(r),r.id},a.prototype.addShadow=function(e){var t=new E1(e);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addPattern=function(e){var t=new C1(e);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addClip=function(e){var t=new S1(e);return this.el.appendChild(t.el),this.add(t),t.id},a}(),T1=A1,I1=function(a){(0,U.__extends)(e,a);function e(t){return a.call(this,(0,U.__assign)((0,U.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return $g},e.prototype.getShape=function(t,r,n){var i=n.target||n.srcElement;if(!Qp[i.tagName]){for(var o=i.parentNode;o&&!Qp[o.tagName];)o=o.parentNode;i=o}return this.find(function(s){return s.get("el")===i})},e.prototype.createDom=function(){var t=vf("svg"),r=new T1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var i=this.get("children");i&&i.length&&Hg(this,function(s,u){return i.indexOf(s)-i.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?ov(this):t==="clip"?sv(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();sv(this,t),r.length&&Zg(t,r)},e}(Cl),uv=I1,FS="0.5.6",P1=M(90094),fv=M.n(P1),O1=M(79590),fp=M.n(O1),cp=2,e0=.16,D1=.05,N1=.05,L1=.15,r0=5,n0=4,k1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function i0(a,e,t){var r;return Math.round(a.h)>=60&&Math.round(a.h)<=240?r=t?Math.round(a.h)-cp*e:Math.round(a.h)+cp*e:r=t?Math.round(a.h)+cp*e:Math.round(a.h)-cp*e,r<0?r+=360:r>=360&&(r-=360),r}function a0(a,e,t){if(a.h===0&&a.s===0)return a.s;var r;return t?r=a.s-e0*e:e===n0?r=a.s+e0:r=a.s+D1*e,r>1&&(r=1),t&&e===r0&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function o0(a,e,t){var r;return t?r=a.v+N1*e:r=a.v-L1*e,r>1&&(r=1),Number(r.toFixed(2))}function lp(a){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=fp()(a),n=r0;n>0;n-=1){var i=r.toHsv(),o=fp()({h:i0(i,n,!0),s:a0(i,n,!0),v:o0(i,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=n0;s+=1){var u=r.toHsv(),f=fp()({h:i0(u,s),s:a0(u,s),v:o0(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?k1.map(function(c){var h=c.index,A=c.opacity,P=fp().mix(e.backgroundColor||"#141414",t[h],A*100).toHexString();return P}):t}var Jp={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ds={},qp={};Object.keys(Jp).forEach(function(a){Ds[a]=lp(Jp[a]),Ds[a].primary=Ds[a][5],qp[a]=lp(Jp[a],{theme:"dark",backgroundColor:"#141414"}),qp[a].primary=qp[a][5]});var US=Ds.red,zS=Ds.volcano,WS=Ds.gold,VS=Ds.orange,jS=Ds.yellow,XS=Ds.lime,YS=Ds.green,HS=Ds.cyan,ZS=Ds.blue,KS=Ds.geekblue,$S=Ds.purple,QS=Ds.magenta,JS=Ds.grey,zo=function(e,t,r){var n=fv()(e),i=fv()(t);return fv()([(1-r)*n.red()+r*i.red(),(1-r)*n.green()+r*i.green(),(1-r)*n.blue()+r*i.blue()]).rgb()},R1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=zo(t,e,.05).rgb().toString(),i=zo(t,e,.1).rgb().toString(),o=zo(t,e,.2).rgb().toString(),s=zo(t,e,.4).rgb().toString(),u=zo(t,r,.02).rgb().toString(),f=zo(t,r,.05).rgb().toString(),c=zo(t,r,.1).rgb().toString(),h=zo(t,r,.2).rgb().toString(),A=zo(t,r,.3).rgb().toString(),P=lp(e,{theme:"default",backgroundColor:t}),B=fv()(e).hex().toLowerCase(),V=P.indexOf(B),$=e;return V!==-1&&($=P[V+1]),{mainStroke:e,mainFill:i,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:$,highlightFill:o,disableStroke:A,disableFill:f,edgeMainStroke:A,edgeActiveStroke:e,edgeInactiveStroke:h,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:A,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:A,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:$,comboHighlightFill:u,comboDisableStroke:h,comboDisableFill:f}},B1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=zo(t,e,.2).rgb().toString(),i=zo(t,e,.3).rgb().toString(),o=zo(t,e,.6).rgb().toString(),s=zo(t,e,.8).rgb().toString(),u=zo(t,r,.2).rgb().toString(),f=zo(t,r,.25).rgb().toString(),c=zo(t,r,.3).rgb().toString(),h=zo(t,r,.4).rgb().toString(),A=zo(t,r,.5).rgb().toString(),P=lp(e,{theme:"dark",backgroundColor:t}),B=fv()(e).hex().toLowerCase(),V=P.indexOf(B),$=e;return V!==-1&&($=P[V+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:A,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:h,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:$,comboHighlightFill:f,comboDisableStroke:h,comboDisableFill:u}},tg=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?R1(e,t,"rgb(150, 150, 150)"):B1(e,t,"#777")},G1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var i=[];return e.forEach(function(o){i.push(tg(o,t,r,n))}),i},F1="rgb(95, 149, 255)",U1="rgb(255, 255, 255)",s0="rgb(0, 0, 0)",Li=tg(F1,U1),ed={version:"0.8.7",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Li.mainStroke,fill:Li.mainFill},size:20,color:Li.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Li.activeFill,stroke:Li.activeStroke}},nodeStateStyles:{active:{fill:Li.activeFill,stroke:Li.activeStroke,lineWidth:2,shadowColor:Li.mainStroke,shadowBlur:10},selected:{fill:Li.selectedFill,stroke:Li.selectedStroke,lineWidth:4,shadowColor:Li.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Li.highlightFill,stroke:Li.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Li.inactiveFill,stroke:Li.inactiveStroke,lineWidth:1},disable:{fill:Li.disableFill,stroke:Li.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:s0,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Li.edgeMainStroke,lineAppendWidth:2},color:Li.edgeMainStroke},edgeStateStyles:{active:{stroke:Li.edgeActiveStroke,lineWidth:1},selected:{stroke:Li.edgeSelectedStroke,lineWidth:2,shadowColor:Li.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Li.edgeInactiveStroke,lineWidth:1},disable:{stroke:Li.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:s0,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Li.comboMainFill,lineWidth:1,stroke:Li.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Li.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Li.comboActiveStroke,lineWidth:1,fill:Li.comboActiveFill},selected:{stroke:Li.comboSelectedStroke,lineWidth:2,fill:Li.comboSelectedFill,shadowColor:Li.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.comboHighlightStroke,lineWidth:2,fill:Li.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Li.comboInactiveStroke,fill:Li.comboInactiveFill,lineWidth:1},disable:{stroke:Li.comboDisableStroke,fill:Li.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function hp(a,e,t){if(a){if(typeof a.addEventListener=="function")return a.addEventListener(e,t,!1),{remove:function(){a.removeEventListener(e,t,!1)}};if(typeof a.attachEvent=="function")return a.attachEvent("on"+e,t),{remove:function(){a.detachEvent("on"+e,t)}}}}var z1=In.cloneEvent,W1=In.isViewportChanged,V1=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,i=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,l.wrapBehavior)(this,"onCanvasEvents"),f=(0,l.wrapBehavior)(this,"onExtendEvents"),c=(0,l.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,i.push(hp(s,"wheel",c)),typeof window!="undefined"&&(i.push(hp(window,"keydown",f)),i.push(hp(window,"keyup",f)),i.push(hp(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,l.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,i=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),W1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===i){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var h=e.getItemRoot(o);if(!h){n.emit(s,t);return}var A=h.get("item");if(!A.destroyed){var P=A.getType();if(t.target=o,t.item=A,t.canvasX===t.x&&t.canvasY===t.y){var B=n.getCanvasByPoint(t.x,t.y);t.canvasX=B.x,t.canvasY=B.y}t.name&&!t.name.includes(":")?(n.emit("".concat(P,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,P)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,l.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,i=n.graph,o=n.preItem,s=i.get("canvas"),u=t.target===s?null:t.item;t=z1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,i=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,l.each)(i,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(va),j1=V1,Pi=M(79472),X1=M(13389),dp=M.n(X1),u0=In.traverseTree,Y1=function(e,t){var r;return e?(0,l.isNumber)(e)?r=function(i){return e}:r=e:r=function(i){return t||1},r},H1=function(e,t){var r=[],n=[],i={},o=0;for(o=0;o<e.length;o++){var s=e[o];i[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[i[u.source]].push(i[u.target]),n[i[u.target]].push(i[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,h=n[o],A=h.length;r[o*4+2]=c,r[o*4+3]=h.length,f=Math.max(f,h.length);for(var P=0;P<A;++P){var B=h[P];r.push(+B)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},Z1=function(e,t,r){var n=[],i=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),i.push([])}for(s=0;s<t.length;s++){var f=t[s];i[o[f.source]].push(o[f.target]),i[o[f.source]].push(r(f)),i[o[f.target]].push(o[f.source]),i[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var h=n.length,A=i[s],P=A.length;n[s*4+2]=h,n[s*4+3]=P/2,c=Math.max(c,P/2);for(var B=0;B<P;++B){var V=A[B];n.push(+V)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},K1=function(e,t,r,n){var i=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,i.push(f.x),i.push(f.y),i.push(0),i.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var h=0;for(u=0;u<e.length;u++){var A=i.length,P=o[u],B=P.length;i[u*4+2]=A+1048576*B/4,i[u*4+3]=0,h=Math.max(h,B/4);for(var V=0;V<B;++V){var $=P[V];i.push(+$)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:h}},$1=function(e,t){var r=[],n=e.length,i={};return t.forEach(function(o){e.forEach(function(s,u){if(i[o[s]]===void 0&&(i[o[s]]=Object.keys(i).length),r.push(i[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}},Q1=function(e){for(var t=[],r=e.length,n=e[0].length,i=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)i(o);return new Float32Array(t)},J1=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},i={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;u0(e,function(h){return u++,h.x>i.x&&(i.x=h.x),h.x<n.x&&(n.x=h.x),h.y>i.y&&(i.y=h.y),h.y<n.y&&(n.y=h.y),!0});var f=Math.PI*2/u,c=i[s]-n[s];return c===0||u0(e,function(h){var A=(h[s]-n[s])/c*(Math.PI*2-f)+f,P=Math.abs(o==="x"?h.x-e.x:h.y-e.y);return h.x=P*Math.cos(A),h.y=P*Math.sin(A),!0}),e},f0=function a(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",i=a().getWebGLErrorMessage();i.id=n,r.appendChild(i)}}},q1=(0,b.pi)((0,b.pi)((0,b.pi)((0,b.pi)({},In),T),w),C),kl=q1,tb=kl.radialLayout,eb=function(){function a(e){this.type=e.type,this.radial=e.radial,this.config=e}return a.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=dp()[t.type](r,t.config);return tb(n),n};return}this.layoutMethod=function(r){return dp()[t.type](r,t.config)}},a.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},a.prototype.layout=function(e){return this.init(e),this.execute()},a}(),rb=eb;(0,Pi.registerLayout)("grid",Pi.GridLayout),(0,Pi.registerLayout)("random",Pi.RandomLayout),(0,Pi.registerLayout)("force",Pi.ForceLayout),(0,Pi.registerLayout)("circular",Pi.CircularLayout),(0,Pi.registerLayout)("dagre",Pi.DagreLayout),(0,Pi.registerLayout)("dagreCompound",Pi.DagreCompoundLayout),(0,Pi.registerLayout)("radial",Pi.RadialLayout),(0,Pi.registerLayout)("concentric",Pi.ConcentricLayout),(0,Pi.registerLayout)("mds",Pi.MDSLayout),(0,Pi.registerLayout)("fruchterman",Pi.FruchtermanLayout),(0,Pi.registerLayout)("fruchterman-gpu",Pi.FruchtermanGPULayout),(0,Pi.registerLayout)("gForce",Pi.GForceLayout),(0,Pi.registerLayout)("force2",Pi.Force2Layout),(0,Pi.registerLayout)("gForce-gpu",Pi.GForceGPULayout),(0,Pi.registerLayout)("comboForce",Pi.ComboForceLayout),(0,Pi.registerLayout)("comboCombined",Pi.ComboCombinedLayout),(0,Pi.registerLayout)("forceAtlas2",Pi.ForceAtlas2Layout);var nb=function(e,t){t.isCustomLayout=!0,Pi.Layouts[e]=(0,Pi.registerLayout)(e,t)},ib=function(){function a(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return a}(),ab=ib,ob=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function i(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,h=c.nodes,A=c.edges,P=c.layoutCfg,B=P===void 0?{}:P,V=B.type,$=layout.getLayoutByName(V);if(!$){this.postMessage({type:n.ERROR,message:"layout ".concat(V," not found")});break}var ut;B.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:h}),ut==null||ut.destroy()},ut=new $(B),ut.init({nodes:h,edges:A}),ut.execute();break}case n.GPURUN:{var lt=s.data,dt=lt.nodes,A=lt.edges,xt=lt.layoutCfg,B=xt===void 0?{}:xt,Wt=lt.canvas,V=B.type,$=layout.getLayoutByName(V);if(!$){this.postMessage({type:n.ERROR,message:"layout ".concat(V," not found")});break}if(V.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(V," does not support GPU")});break}var Qt=new $(B);Qt.init({nodes:dt,edges:A}),Qt.executeWithWorker(Wt,this);break}default:break}}onmessage=function(u){i(u)&&o(u)}}var r=new ab(t,e);return r},Cd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function eg(a){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(a)}var c0=function(e){return setTimeout(e,16)},l0=function(e){return clearTimeout(e)},vp={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||c0;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||l0;return t(e)}},sb=["fruchterman","gForce"],ub=["force","grid","circular"],fb=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=ob(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(vp.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(vp.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(i,o){return(0,b.mG)(n,void 0,void 0,function(){var s,u,f,c,h,V,A,P,B,V,$;return(0,b.Jh)(this,function(ut){switch(ut.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),i()},u&&this.isGPU&&(this.hasGPUVersion(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),In.isForce(u)?(f=t.onTick,c=t.animate,h=c===void 0&&(u==="force"||u==="force2"),V=function(){f&&f(),(c||h)&&s.refreshPositions()},t.tick=V):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),A=!1;try{P=new Pi.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=P}catch(lt){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return A=P.enableTick,A&&(B=t.onTick,V=function(){B&&B(),s.refreshPositions()},P.tick=V),$=this.filterLayoutData(this.data,t),db($,r),P.init($),s.emit("beforesublayout",{type:u}),[4,P.execute()];case 1:return ut.sent(),P.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(i,o){return(0,b.mG)(n,void 0,void 0,function(){var s,u,f;return(0,b.Jh)(this,function(c){switch(c.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),i()},f=this.filterLayoutData(this.data,r),t.init(f),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,i=this.graph;if(!(!i||i.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=i.get("width"),c=i.get("height"),h={};Object.assign(h,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=h;var A=h.type,P=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Wt){var Qt;return P=!!(!((Qt=Wt.nodes)===null||Qt===void 0)&&Qt.length)||P});var B=this.destoryLayoutMethods();i.emit("beforelayout"),P&&A&&(B==null?void 0:B.length)===1&&B[0]===A?this.tweakInit():this.initPositions(h.center,s),this.initPositions(h.center,u),A&&A.split("-")[1]==="gpu"&&(A=A.split("-")[0],h.gpuEnabled=!0);var V=!1;h.gpuEnabled&&(V=!0,f0().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),V=!1)),V&&!this.hasGPUVersion(A)&&(console.warn("The '".concat(A,"' layout does not support GPU calculation for now, it will run in CPU.")),V=!1),this.isGPU=V;var $=h.onLayoutEnd,ut=h.layoutEndFormatted,lt=h.adjust;if(ut||(h.layoutEndFormatted=!0,h.onAllLayoutEnd=function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(Wt){switch(Wt.label){case 0:return $&&$(s),this.refreshLayout(),lt&&h.pipes?[4,this.adjustPipesBox(this.data,lt)]:[3,2];case 1:Wt.sent(),this.refreshLayout(),Wt.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),h.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var dt=Promise.resolve(),xt=!1;return h.type?(xt=!0,dt=dt.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(Wt){switch(Wt.label){case 0:return[4,this.execLayoutMethod(h,0)];case 1:return[2,Wt.sent()]}})})})):h.pipes&&(xt=!0,h.pipes.forEach(function(Wt,Qt){dt=dt.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(Zt){switch(Zt.label){case 0:return[4,this.execLayoutMethod(Wt,Qt)];case 1:return[2,Zt.sent()]}})})})})),xt?dt.then(function(){h.onAllLayoutEnd&&h.onAllLayoutEnd(),t&&t()}).catch(function(Wt){console.warn("graph layout failed,",Wt)}):(i.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,i=r.nodes,o=r.edges;if(i!=null&&i.length){var s={};i.forEach(function(c){var h=c.x,A=c.y;!isNaN(h)&&!isNaN(A)&&(s[c.id]={x:h,y:A},c.mass=c.mass||2)}),o.forEach(function(c){var h=c.source,A=c.target,P=s[h],B=s[A];!P&&B?s[h]={x:B.x+(Math.random()-.5)*80,y:B.y+(Math.random()-.5)*80}:!B&&P&&(s[A]={x:P.x+(Math.random()-.5)*80,y:P.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");i.forEach(function(c){var h=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=h.x,c.y=h.y})}},e.prototype.initWithPreset=function(){var t=this,r=t.layoutCfg,n=t.data,i=r.preset;if(!(i!=null&&i.type)||!Pi.Layouts[i==null?void 0:i.type])return!1;var o=new Pi.Layouts[i==null?void 0:i.type](i);return o.layout(n),delete r.preset,!0},e.prototype.layoutWithWorker=function(t,r){var n=this,i=this,o=i.layoutCfg,s=i.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),h=!1;if(o.type)h=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){h=!0;for(var A=function(ut){c=c.then(function(){return n.runWebworker(u,t,ut)})},P=0,B=o.pipes;P<B.length;P++){var V=B[P];A(V)}}return h&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function($){console.error("layout failed",$)}),!0},e.prototype.runWebworker=function(t,r,n){var i=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),h=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,A=lb(n,function(B){return typeof B!="function"});if(!h)t.postMessage({type:Cd.RUN,nodes:u,edges:f,layoutCfg:A});else{var P=c.transferControlToOffscreen();A.type="".concat(A.type,"-gpu"),t.postMessage({type:Cd.GPURUN,nodes:u,edges:f,layoutCfg:A,canvas:P},[P])}return new Promise(function(B,V){t.onmessage=function($){i.handleWorkerMessage(B,V,$,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,i,o){var s=this,u=s.graph,f=s.workerData,c=n.data,h=c.type,A=function(){o.onTick&&o.onTick()};switch(h){case Cd.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=vp.requestAnimationFrame(function(){rg(i,c),u.refreshPositions(),A(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=vp.requestAnimationFrame(function(){rg(i,f.currentTickData),u.refreshPositions(),f.requestId2=null,A(),t()})),f.requestId=null}));break;case Cd.END:f.currentTick==null&&(rg(i,c),t());break;case Cd.GPUEND:f.currentTick==null&&(hb(i,c),t());break;case Cd.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,i=n.graph,o=n.layoutMethods;if(!(!i||i.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,b._T)(t,["disableTriggerLayout"]),f=(0,l.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){i.emit("beforelayout");var c=Promise.resolve(),h=!1;(o==null?void 0:o.length)===1?(h=!0,c=c.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(A){switch(A.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,A.sent()]}})})})):o!=null&&o.length&&(h=!0,o.forEach(function(A,P){var B=f.pipes[P];c=c.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(V){switch(V.label){case 0:return[4,this.updateLayoutMethod(A,B)];case 1:return[2,V.sent()]}})})})})),h&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(A){console.warn("layout failed",A)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(i){var o=t.nodes;o!=null&&o.length||i(),ub.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),i());var s={center:n.layoutCfg.center,nodeSize:function(B){return Math.max(B.height,B.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,h=(0,l.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(P,B){var V,$,ut,lt=P.x-((V=h[B])===null||V===void 0?void 0:V.x),dt=P.y-(($=h[B])===null||$===void 0?void 0:$.y);(ut=f[B])===null||ut===void 0||ut.forEach(function(xt){xt.x+=lt,xt.y+=dt})}),i()};var A=new Pi.Layouts[r](s);A.layout({nodes:c})})},e.prototype.hasGPUVersion=function(t){return sb.includes(t)},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(ai),cb=fb;function rg(a,e){for(var t=a.nodes,r=e.nodes,n=t.length,i=0;i<n;i++){var o=t[i];o.x=r[i].x,o.y=r[i].y}}function lb(a,e){var t={};return a&&eg(a)==="object"?(Object.keys(a).forEach(function(r){a.hasOwnProperty(r)&&e(a[r])&&(t[r]=a[r])}),t):a}function hb(a,e){for(var t=a.nodes,r=e.vertexEdgeData,n=t.length,i=0;i<n;i++){var o=t[i],s=r[4*i],u=r[4*i+1];o.x=s,o.y=u}}function db(a,e){var t;if(!((t=a==null?void 0:a.nodes)===null||t===void 0)&&t.length){var r=a.nodes;r.forEach(function(n){n.layoutOrder=e})}}var cv,ng,h0,ig;function vb(){cv=document.createElement("table"),ng=document.createElement("tr"),h0=/^\s*<(\w+|!)[^>]*>/,ig={tr:document.createElement("tbody"),tbody:cv,thead:cv,tfoot:cv,td:ng,th:ng,"*":document.createElement("div")}}function Oa(a){cv||vb();var e=h0.test(a)&&RegExp.$1;(!e||!(e in ig))&&(e="*");var t=ig[e];a=typeof a=="string"?a.replace(/(^\s*)|(\s*$)/g,""):a,t.innerHTML=""+a;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var pb=function(e){var t=e.clone();return gb(e,t),t},gb=function a(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];a(s,f)}));var n=e.get("type"),i=t.get("type");if(!(n!=="image"||i!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},d0=zt,yb="svg",mb=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new cb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new j1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,i=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===yb)u=new uv({container:t,width:i,height:o});else{var f={container:t,width:i,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new Ll(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,l.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,i){return(0,b.mG)(this,void 0,void 0,function(){var o,s,u;return(0,b.Jh)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var h=r.createPattern(u,"repeat");r.rect(0,0,n,i),r.fillStyle=h,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,i,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),h=c.getRenderer(),A=s||c.get("el"),P="";t||(t="image/png"),setTimeout(function(){return(0,b.mG)(u,void 0,void 0,function(){var B,V,$,ut,lt,dt,xt,Wt,Qt,Zt;return(0,b.Jh)(this,function(de){switch(de.label){case 0:return h!=="svg"?[3,1]:(B=A.cloneNode(!0),V=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),$=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",V),$.replaceChild(B,$.documentElement),ut=new XMLSerializer().serializeToString($),P="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ut)),[3,4]);case 1:return lt=void 0,dt=A.getContext("2d"),xt=i||this.get("width"),Wt=o||this.get("height"),Qt=void 0,f?[4,this.downloadImageWatermark(f,dt,xt,Wt)]:[3,3];case 2:de.sent(),de.label=3;case 3:if(r){Zt=typeof window!="undefined"?window.devicePixelRatio:1;try{lt=dt.getImageData(0,0,xt*Zt,Wt*Zt),Qt=dt.globalCompositeOperation,dt.globalCompositeOperation="destination-over",dt.fillStyle=r,dt.fillRect(0,0,xt,Wt)}catch(De){console.error("Download image failed. Out of memory at ImageData creation")}}P=A.toDataURL(t),r&&(dt.clearRect(0,0,xt,Wt),dt.putImageData(lt,0,0),dt.globalCompositeOperation=Qt),de.label=4;case 4:return n&&n(P),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),i=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(i==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var h=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(h))}else{var A=void 0,P=o.getContext("2d"),B=Math.max(this.get("width"),500),V=Math.max(this.get("height"),500),$=void 0;if(r){var ut=typeof window!="undefined"&&window.devicePixelRatio||1;try{A=P.getImageData(0,0,B*ut,V*ut),$=P.globalCompositeOperation,P.globalCompositeOperation="destination-over",P.fillStyle=r,P.fillRect(0,0,B,V)}catch(lt){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(P.clearRect(0,0,B,V),P.putImageData(A,0,0),P.globalCompositeOperation=$)}return s},e.prototype.toFullDataURL=function(t,r,n){var i=this.get("group").getCanvasBBox(),o=i.height,s=i.width,u=this.get("renderer"),f=Oa('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,h=n?n.padding:void 0;h?(0,l.isNumber)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var A=o+h[0]+h[2],P=s+h[1]+h[3],B={container:f,height:A,width:P,quickHit:!0},V=u==="svg"?new uv(B):new Ll(B),$=this.get("group"),ut=$.clone(),lt=(0,l.clone)(ut.getMatrix());lt||(lt=[1,0,0,0,1,0,0,0,1]);var dt=(i.maxX+i.minX)/2,xt=(i.maxY+i.minY)/2;lt=d0(lt,[["t",-dt,-xt],["t",s/2+h[3],o/2+h[0]]]),ut.resetMatrix(),ut.setMatrix(lt),V.add(ut);var Wt=V.get("el"),Qt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Zt=Wt.cloneNode(!0),de=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),De=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",de);De.replaceChild(Zt,De.documentElement);var xe=new XMLSerializer().serializeToString(De);Qt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(xe))}else{var He=void 0,ar=Wt.getContext("2d"),Fr=void 0;if(c){var rn=typeof window!="undefined"?window.devicePixelRatio:1;try{He=ar.getImageData(0,0,P*rn,A*rn),Fr=ar.globalCompositeOperation,ar.globalCompositeOperation="destination-over",ar.fillStyle=c,ar.fillRect(0,0,P,A)}catch(Zr){console.error("Download image failed. Out of memory at ImageData creation")}}Qt=Wt.toDataURL(r),c&&(ar.clearRect(0,0,P,A),ar.putImageData(He,0,0),ar.globalCompositeOperation=Fr)}t&&t(Qt)},16)},e.prototype.downloadFullImage=function(t,r,n){var i=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=Oa('<div id="virtual-image"></div>'),h=document.querySelector(".g6-graph-watermarker"),A=n?n.backgroundColor:void 0,P=n?n.padding:void 0;P?(0,l.isNumber)(P)&&(P=[P,P,P,P]):P=[0,0,0,0];var B=s+P[0]+P[2],V=u+P[1]+P[3];if(h){var $=this.get("graphWaterMarker").cfg||{},ut=$.width,lt=$.height;B=Math.ceil(B/lt)*lt,V=Math.ceil(V/ut)*ut}var dt={container:c,height:B,width:V},xt=f==="svg"?new uv(dt):new Ll(dt),Wt=this.get("group"),Qt=pb(Wt),Zt=(0,l.clone)(Qt.getMatrix());Zt||(Zt=[1,0,0,0,1,0,0,0,1]);var de=(o.maxX+o.minX)/2,De=(o.maxY+o.minY)/2;Zt=d0(Zt,[["t",-de,-De],["t",u/2+P[3],s/2+P[0]]]),Qt.resetMatrix(),Qt.setMatrix(Zt),xt.add(Qt);var xe=xt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,A,function(He){var ar=document.createElement("a"),Fr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));i.dataURLToImage(He,f,ar,Fr);var rn=document.createEvent("MouseEvents");rn.initEvent("click",!1,!1),ar.dispatchEvent(rn)},V,B,xe)},e.prototype.downloadImage=function(t,r,n){var i=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(h){i.dataURLToImage(h,u,c,f);var A=document.createEvent("MouseEvents");A.initEvent("click",!1,!1),c.dispatchEvent(A)})},e.prototype.dataURLToImage=function(t,r,n,i){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,h=new Uint8Array(c);c--;)h[c]=f.charCodeAt(c);var A=new Blob([h],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(A,i):n.addEventListener("click",function(){n.download=i,n.href=window.URL.createObjectURL(A)})}else n.addEventListener("click",function(){n.download=i,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=ed.waterMarkerImage);var n=this.get("container");(0,l.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var i=this.get("graphWaterMarker"),o=(0,l.deepMix)({},ed.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var h=f?n:document.querySelector(".g6-graph-watermarker");h&&(h.style.cssText=void 0),i&&i.clear();return}if(i)i.clear();else{var A={container:n,width:s,height:u,capture:!1},P=this.get("pixelRatio");P&&(A.pixelRatio=P,window.devicePixelRatio=P),i=new Ll(A),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var B=i.get("context"),V=c.rotate,$=c.x,ut=c.y;B.rotate(-V*Math.PI/180);var lt=new Image;lt.crossOrigin="anonymous",lt.src=t,lt.onload=function(){if(B.drawImage(lt,$,ut,c.width,c.height),B.rotate(V*Math.PI/180),f)n.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var dt=document.querySelector(".g6-graph-watermarker");dt||(dt=document.createElement("div"),dt.className="g6-graph-watermarker"),dt.className="g6-graph-watermarker",i.destroyed||(dt.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(dt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,l.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var i=this.get("graphWaterMarker"),o=(0,l.deepMix)({},ed.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var h=f?n:document.querySelector(".g6-graph-watermarker");h&&(h.style.cssText=void 0),i&&i.clear();return}if(i)i.clear();else{var A={container:n,width:s,height:u,capture:!1},P=this.get("pixelRatio");P&&(A.pixelRatio=P,window.devicePixelRatio=P),i=new Ll(A),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var B=i.get("context"),V=c.rotate,$=c.fill,ut=c.fontFamily,lt=c.fontSize,dt=c.baseline,xt=c.x,Wt=c.y,Qt=c.lineHeight;B.rotate(-V*Math.PI/180),B.font="".concat(lt,"px ").concat(ut),B.fillStyle=$,B.textBaseline=dt;for(var Zt=(0,l.isString)(t)?[t]:t,de=Zt.length-1;de>=0;de--)B.fillText(Zt[de],xt,Wt+de*Qt);if(B.rotate(V*Math.PI/180),f)n.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var De=document.querySelector(".g6-graph-watermarker");De||(De=document.createElement("div"),De.className="g6-graph-watermarker"),De.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(De)}},e.prototype.destroy=function(){var t,r,n,i;(0,l.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(i=document.querySelector(".g6-graph-watermarker"))===null||i===void 0||i.remove(),a.prototype.destroy.call(this)},e}(ev),v0=mb,bb=kl.radialLayout,Eb=kl.traverseTree,xb=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=dp()[t.type](r,t);return bb(n),n}:function(r){return dp()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,l.each)(t,function(i,o){if(r===i.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var i=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=i.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),i.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,l.each)(t.children||[],function(h){i.innerAddChild(h,s,n)}),i.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var i=this,o=i.findById(t.id);if(!o){i.innerAddChild(t,r,n);return}(0,l.each)(t.children||[],function(B){i.innerUpdateChild(B,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(i.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var h,A;o.get("originAttrs")&&(h=o.get("originAttrs").x,A=o.get("originAttrs").y);var P=o.getModel();n&&o.set("originAttrs",{x:P.x,y:P.y}),o.set("model",Object.assign(P,t.data)),(h!==t.x||A!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var i=this,o=i.findById(t);if(o)if((0,l.each)(o.get("children"),function(u){i.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),i.get("removeList").push(o)}else i.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(i){return n.clearItemStates(i)}),this.getEdges().map(function(i){return n.clearItemStates(i)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r){r===void 0&&(r=!0);var n=this;if(!t){console.warn("layout cannot be null");return}r&&this.get("enabledStack")&&this.pushStack("layout",{before:n.get("layout"),after:t}),n.set("layout",t),n.set("layoutMethod",n.getLayout()),n.layout()},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=r.get("data"),i=r.get("layoutMethod"),o=i?i(n,r.get("layout")):n,s=r.get("animate");if(r.emit("beforerefreshlayout",{data:n,layoutData:o}),r.emit("beforelayout"),r.innerUpdateChild(o,void 0,s),t){var u=r.get("viewController");u.fitView()}s?r.layoutAnimate(o):(r.refresh(),r.paint()),r.emit("afterrefreshlayout",{data:n,layoutData:o}),r.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var i=this;i.emit("beforeaddchild",{model:t,parent:r}),(0,l.isString)(r)||(r=r.get("id"));var o=i.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=i.findById(r);s.refresh(),i.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var i=this,o=i.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=i.findDataById(r);s.children=t,o.refresh(),i.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var i=this;if(!r||!i.findById(r)){i.changeData(t,n);return}var o=i.findDataById(r),s=i.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=i.findById(r);f==null||f.refresh(),i.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,i=n.findById(t),o;if(i?o=i==null?void 0:i.get("parent"):o=n.getNodes().find(function(h){var A=h.getModel().children||[];return!!A.find(function(P){return P.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var i=null;return(0,l.each)(r.children||[],function(o){if(o.id===t)return i=o,!1;if(i=n.findDataById(t,o),i)return!1}),i},e.prototype.layoutAnimate=function(t,r){var n=this,i=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Eb(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var h=r(u,o,f,t);u.set("model",Object.assign(c,h))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,l.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:i.duration,easing:i.ease,callback:function(){(0,l.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,l.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),i.callback&&i.callback(),n.emit("afteranimate",{data:t})},delay:i.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,l.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){a.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(v0),wb=xb;function wi(a,e){if(a)for(var t in e)e.hasOwnProperty(t)&&(a.style[t]=e[t]);return a}var Sb=function(){function a(e){this._cfgs=(0,l.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return a.prototype.getDefaultCfgs=function(){return{}},a.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,l.each)(r,function(i,o){var s=(0,l.wrapBehavior)(t,i);n[o]=s,e.on(o,s)}),this._events=n,this.init()},a.prototype.getEvents=function(){return{}},a.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},a.prototype.set=function(e,t){this._cfgs[e]=t},a.prototype.destroy=function(){},a.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,l.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},a}(),pu=Sb,_b=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),p0="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Mb=function(a){_b(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:p0,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),i=this.get("img")||p0;i.includes("url(")||(i='url("'.concat(i,'")'));var o=Oa(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Oa(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(i,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),i=t.get("height");wi(this.get("container"),{width:"".concat(n,"px"),height:"".concat(i,"px")});var o=n*80/r,s=i*80/r;wi(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var i=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(i?n[6]:"0",", ").concat(i?n[7]:"0",")");wi(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(pu),Cb=Mb,Ab=M(20956),pp=M.n(Ab),Tb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&pp()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Ib=function(a){Tb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Oa("<div class=".concat(t||"g6-component-contextmenu","></div>"));wi(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,l.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var i=this.get("shouldBegin");if(i(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,l.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var h=function(de){c(de.target,t.item,u)};this.set("handleMenuClickWrapper",h),o.addEventListener("click",h)}var A=u.get("width"),P=u.get("height"),B=o.getBoundingClientRect(),V=this.get("offsetX")||0,$=this.get("offsetY")||0,ut=u.getContainer().offsetTop,lt=u.getContainer().offsetLeft,dt=t.canvasX+lt+V,xt=t.canvasY+ut+$;dt+B.width>A&&(dt=t.canvasX-B.width-V+lt),xt+B.height>P&&(xt=t.canvasY-B.height-$+ut),wi(o,{top:"".concat(xt,"px"),left:"".concat(dt,"px"),visibility:"visible"});var Wt=this.get("trigger")==="click",Qt=function(de){if(Wt){Wt=!1;return}r.onMenuHide()};document.body.addEventListener("click",Qt),this.set("handler",Qt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&wi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(pu),Pb=Ib,Ob=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ag=function(){return ag=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},ag.apply(this,arguments)},g0=Math.max,Db=zt,Nb="default",Lb="keyShape",kb="delegate",y0="svg",Rb=function(a){Ob(e,a);function e(t){var r=a.call(this,t)||this;return r.handleUpdateCanvas=(0,l.debounce)(function(n){var i=r;i.destroyed||i.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,i=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Oa(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),h=0,A=0,P=!1,B=0,V=0,$=0,ut=0,lt=0,dt=0,xt=f||u?"mousedown":"dragstart";c.addEventListener(xt,function(de){var De,xe;if(de.dataTransfer){var He=new Image;He.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(xe=(De=de.dataTransfer).setDragImage)===null||xe===void 0||xe.call(De,He,0,0);try{de.dataTransfer.setData("text/html","view-port-minimap")}catch(Fr){de.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,de.target===c){var ar=c.style;B=parseInt(ar.left,10),V=parseInt(ar.top,10),$=parseInt(ar.width,10),ut=parseInt(ar.height,10),!($>n[0]||ut>n[1])&&(dt=i.getZoom(),lt=t.get("ratio"),P=!0,h=de.clientX,A=de.clientY)}},!1);var Wt=function(De){if(!(!P||(0,l.isNil)(De.clientX)||(0,l.isNil)(De.clientY))){var xe=h-De.clientX,He=A-De.clientY;(B-xe<0||B-xe+$>=n[0])&&(xe=0),(V-He<0||V-He+ut>=n[1])&&(He=0),B-=xe,V-=He,wi(c,{left:"".concat(B,"px"),top:"".concat(V,"px")}),i.translate(xe*dt/lt,He*dt/lt),h=De.clientX,A=De.clientY}};!f&&!u&&c.addEventListener("drag",Wt,!1);var Qt=function(){P=!1,r.refresh=!0},Zt=f||u?"mouseup":"dragend";c.addEventListener(Zt,Qt,!1),s.addEventListener("mouseleave",Qt),s.addEventListener("mouseup",Qt),(f||u)&&s.addEventListener("mousemove",Wt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),i=this.get("graph"),o=this.get("size"),s=i.get("canvas").get("el"),u=i.get("width")||s.scrollWidth||500,f=i.get("height")||s.scrollHeight||500,c=i.getPointByCanvas(0,0),h=i.getPointByCanvas(u,f),A=this.get("viewport");A||this.initViewport();var P=(h.x-c.x)*t,B=(h.y-c.y)*t,V=c.x*t+r,$=c.y*t+n,ut=V+P,lt=$+B;V<0&&(P+=V,V=0),ut>o[0]&&(P=P-(ut-o[0])),$<0&&(B+=$,$=0),lt>o[1]&&(B=B-(lt-o[1])),this.set("ratio",t);var dt="".concat(V,"px"),xt="".concat($,"px");wi(A,{left:dt,top:xt,width:"".concat(P,"px"),height:"".concat(B,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var i;this.get("hideEdge")?(i=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||i.add(s.clone())})):(i=n.clone(),i.resetMatrix(),r.add(i));var o=t.get("renderer");o===y0&&this.updateVisible(i)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(i){i.get("visible")||i.hide(),r.updateVisible(i)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),i=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,l.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,i)}),(0,l.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,i)});var o=r.getCombos();if(o&&o.length){var s=i.find(function(u){return u.get("name")==="comboGroup"})||i.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,l.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},i=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};i?f=Object.assign(u,f):(i=s,r.add(i));var c=i.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),i.attr(f),t.isVisible()?i.show():i.hide(),i.exist=!0;var h=t.getModel().depth;isNaN(h)||i.set("zIndex",h),n[t.get("id")]=i,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},i=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};i?(f=Object.assign(u,f),i.toFront()):(i=s,r.add(i));var c=i.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),i.attr(f),t.isVisible()?i.show():i.hide(),i.exist=!0;var h=t.getModel().depth;isNaN(h)||i.set("zIndex",h),n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),i=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,l.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,i)}),(0,l.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,i)});var o=r.getCombos();if(o&&o.length){var s=i.find(function(u){return u.get("name")==="comboGroup"})||i.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,l.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var i=t[r[n]],o=i.exist;i.exist=!1,o||(i.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},i=n[t.get("id")];if(i){var o=t.get("keyShape").attr("path");i.attr("path",o)}else i=t.get("keyShape").clone(),r.add(i);t.isVisible()?i.show():i.hide(),i.exist=!0,n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),i=this.get("itemMap")||{},o=i[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:ag({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),i=t.get("className"),o=t.get("container"),s=Oa("<div class='".concat(i,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,l.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Oa('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(h){h.preventDefault()}),u.addEventListener("dragover",function(h){h.preventDefault()});var f,c=r.get("renderer");c===y0?f=new uv({container:u,width:n[0],height:n[1]}):f=new Ll({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),i=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!i.destroyed){switch(o){case Nb:this.updateGraphShapes();break;case Lb:this.updateKeyShapes();break;case kb:this.updateDelegateShapes();break;default:break}var u=i.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),h=r.getZoom()||1,A=c.width/h,P=c.height/h;Number.isFinite(f.width)&&(A=g0(f.width,A),P=g0(f.height,P)),A+=2*s,P+=2*s;var B=Math.min(n[0]/A,n[1]/P),V=[1,0,0,0,1,0,0,0,1],$=0,ut=0;Number.isFinite(f.minX)&&($=-f.minX),Number.isFinite(f.minY)&&(ut=-f.minY);var lt=(n[0]-(A-2*s)*B)/2,dt=(n[1]-(P-2*s)*B)/2;V=Db(V,[["t",$,ut],["s",B,B],["t",lt,dt]]),u.setMatrix(V),this.set("ratio",B),this.set("totaldx",lt+$*B),this.set("totaldy",dt+ut*B),this.set("dx",lt),this.set("dy",dt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(pu),Bb=Rb,Gb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Fc(a,e,t){var r=a.x-e.x,n=a.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Fb(a,e){return a.x*e.x+a.y*e.y}function m0(a,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(a.y-e.source.y)+a.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Ub=function(a){Gb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],i=t.nodes||[],o={},s=!1;if(i.forEach(function(xt){(xt.x===null||!xt.y===null||xt.x===void 0||!xt.y===void 0)&&(s=!0),o[xt.id]=xt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var h=r.getEdgeBundles();r.set("edgeBundles",h);for(var A=r.get("cycles"),P=r.get("iterations"),B=r.get("iterRate"),V=r.get("lambda"),$=0;$<A;$++){for(var ut=function(Wt){var Qt=[];n.forEach(function(Zt,de){if(Zt.source!==Zt.target){var De=o[Zt.source],xe=o[Zt.target];Qt[de]=r.getEdgeForces({source:De,target:xe},de,u,V);for(var He=0;He<u+1;He++)c[de][He].x+=Qt[de][He].x,c[de][He].y+=Qt[de][He].y}})},lt=0;lt<P;lt++)ut(lt);V=V/2,u*=f,P*=B,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(xt,Wt){xt.source!==xt.target&&(xt.type="polyline",xt.controlPoints=c[Wt].slice(1,c[Wt].length-1))});var dt=r.get("graph");dt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var i=this.get("graph");r.set("tick",function(){t.onTick(),i.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,i=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=i[s.source],h=i[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+h.x),y:.5*(c.y+h.y)}),o[u].push({x:h.x,y:h.y});else{var A=0;!((f=o[u])===null||f===void 0)&&f.length?A=r.getEdgeLength(o[u]):A=Fc({x:c.x,y:c.y},{x:h.x,y:h.y});var P=A/(t+1),B=P,V=[{x:c.x,y:c.y}];o[u].forEach(function($,ut){if(ut!==0){for(var lt=Fc($,o[u][ut-1]);lt>B;){var dt=B/lt,xt={x:o[u][ut-1].x,y:o[u][ut-1].y};xt.x+=dt*($.x-o[u][ut-1].x),xt.y+=dt*($.y-o[u][ut-1].y),V.push(xt),lt-=B,B=P}B-=lt}}),V.push({x:h.x,y:h.y}),o[u]=V}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,i){i!==0&&(r+=Fc(n,t[i-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],i=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],h=o[u.target];n.forEach(function(A,P){if(!(P<=f)){var B=o[A.source],V=o[A.target],$=t.getBundleScore({source:c,target:h},{source:B,target:V});$>=i&&(s[f].push(P),s[P].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Fc({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Fc({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var i=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return i*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Fb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,i=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return i},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,i={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Fc(i,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),i=this.getEdgeVisibility(r,t);return n<i?n:i},e.prototype.getEdgeVisibility=function(t,r){var n=m0(r.source,t),i=m0(r.target,t),o={x:(n.x+i.x)/2,y:(n.y+i.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Fc(o,s)/Fc(n,i))},e.prototype.getEdgeForces=function(t,r,n,i){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Fc(t.source,t.target)*(n+1)),c=[{x:0,y:0}],h=1;h<n;h++){var A={x:0,y:0},P=o.getSpringForce({pre:s[r][h-1],cur:s[r][h],next:s[r][h+1]},f),B=o.getElectrostaticForce(h,r);A.x=i*(P.x+B.x),A.y=i*(P.y+B.y),c.push(A)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,i=t.pre.y+t.next.y-2*t.cur.y;return n*=r,i*=r,{x:n,y:i}},e.prototype.getElectrostaticForce=function(t,r){var n=this,i=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var h={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(h.x)>i||Math.abs(h.y)>i){var A=Fc(s[c][t],s[r][t]),P=1/A;f.x+=h.x*P,f.y+=h.y*P}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),a.prototype.destroy.call(this)},e}(pu),zb=Ub,Wb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),og=function(){return og=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},og.apply(this,arguments)},gp=.05,b0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Vb=function(a){Wb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,l.clone)(b0),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.magnify(t),i=n.get("delegate"),i.on("dragstart",function(o){n.set("delegateCenterDiff",{x:i.attr("x")-o.x,y:i.attr("y")-o.y})}),i.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&i.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),i,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?i=1-gp:i=1/(1-gp);var f=r.get("maxR"),c=r.get("minR"),h=r.get("r");(h>(f||n.get("height"))&&i>1||h<(c||n.get("height")*.05)&&i<1)&&(i=1),h*=i,r.set("r",h),r.set("r2",h*h);var A=r.get("d");r.set("molecularParam",(A+1)*h),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),i=r.get("graph"),o,s=i.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-gp:o=1/(1-gp);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||i.get("height"))&&o>1||c<(f||i.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var h=r.get("d");r.set("molecularParam",(h+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var i=r.get("d"),o=i+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),h=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,h)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),i=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+i,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var i=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),h=n.get("d"),A=n.get("molecularParam"),P=i.getNodes(),B=P.length,V=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(V=n.get("cacheCenter"));var $=n.get("delegateCenterDiff");$&&(V.x+=$.x,V.y+=$.y),n.updateDelegate(V,f);for(var ut=0;ut<B;ut++){var lt=P[ut].getModel(),dt=lt.x,xt=lt.y;if(!(isNaN(dt)||isNaN(xt))){var Wt=(dt-V.x)*(dt-V.x)+(xt-V.y)*(xt-V.y);if(!isNaN(Wt)&&Wt<c&&Wt!==0){var Qt=Math.sqrt(Wt),Zt=A*Qt/(h*Qt+f),de=(dt-V.x)/Qt,De=(xt-V.y)/Qt;if(lt.x=de*Zt+V.x,lt.y=De*Zt+V.y,s[lt.id]||(s[lt.id]={x:dt,y:xt,texts:[]}),o.push(lt),u&&2*Qt<f)for(var xe=P[ut],He=xe.getContainer(),ar=He.getChildren(),Fr=ar.length,rn=0;rn<Fr;rn++){var Zr=ar[rn];Zr.get("type")==="text"&&(s[lt.id].texts.push({visible:Zr.get("visible"),shape:Zr}),Zr.set("visible",!0))}}}}i.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),i=r.length,o=0;o<i;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,h=0;h<c;h++){var A=f.texts[h];A.shape.set("visible",A.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,i=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,h=t.scaleDBy,A=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(i)||r.set("d",i),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var P=r.get("d"),B=r.get("r");if(r.set("molecularParam",(P+1)*B),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),h==="drag"||h==="wheel"||h==="unset"){r.set("scaleDBy",h),r.get("delegate").remove(),r.get("delegate").destroy();var V=r.get("dPercentText");V&&(V.remove(),V.destroy())}if(A==="drag"||A==="wheel"||A==="unset"){r.set("scaleRBy",A),r.get("delegate").remove(),r.get("delegate").destroy();var V=r.get("dPercentText");V&&(V.remove(),V.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,i=this,o=i.get("graph"),s=i.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=i.get("delegateStyle")||b0;s=u.addShape("circle",{attrs:og({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(B){i.scaleRByWheel(B)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(B){i.set("dragging",!0),i.set("cacheCenter",{x:B.x,y:B.y}),i.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){i.scaleRByDrag(B)}),s.on("dragend",function(B){i.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(B){n.scaleDByWheel(B)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(B){i.set("dragging",!0),i.set("cacheCenter",{x:B.x,y:B.y}),i.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){n.scaleDByDrag(B)}),s.on("dragend",function(B){i.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(i.get("showDPercent")){var c=Math.round((i.get("d")-i.get("minD"))/(i.get("maxD")-i.get("minD"))*100),h=i.get("dPercentText"),A=t.y+r/1.5+16;if(!h||h.destroyed){var P=o.get("group");h=P.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:A,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),i.set("dPercentText",h)}else h.attr({text:"".concat(c,"%"),x:t.x,y:A})}i.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(pu),jb=Vb,Xb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E0=.05;typeof document!="undefined"&&pp()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Yb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Hb=function(a){Xb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),i=n(r),o=i;(0,l.isString)(i)&&(o=Oa(i));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,l.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(h){var A=Yb(h).filter(function(B){return B.nodeName==="LI"});if(A.length!==0){var P=A[0].getAttribute("code");P&&(f?f(P,r):t.handleDefaultOperator(P))}});var c=this.get("position");c&&wi(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),i=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!i||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),i.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,h=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),h===0?(i.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(i.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var i=n.action;t.pushStack(i,(0,l.clone)(n.data),"redo");var o=n.data.before;if(i==="add"&&(o=n.data.after),!o)return;switch(i){case"visible":{Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){var B=t.findById(P.id);P.visible?t.showItem(B,!1):t.hideItem(B,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){var B=t.findById(P.id);delete P.id,t.updateItem(B,P,!1),B.getType()==="combo"&&t.updateCombo(B)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){var B=P.itemType;delete P.itemType,t.addItem(B,P,!1)})});break}case"add":Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){t.removeItem(P.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){t.updateComboTree(P.id,P.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){t.updateComboTree(P.id,P.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(h){return h.id}).filter(function(h){return h!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var i=n.action,o=n.data.after;if(t.pushStack(i,(0,l.clone)(n.data)),i==="delete"&&(o=n.data.before),!o)return;switch(i){case"visible":{Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){var P=t.findById(A.id);A.visible?t.showItem(P,!1):t.hideItem(P,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){var P=t.findById(A.id);delete A.id,t.updateItem(P,A,!1),P.getType()==="combo"&&t.updateCombo(P)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){var P=A.itemType;delete A.itemType,t.addItem(P,A,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){t.updateComboTree(A.id,A.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-E0*this.get("zoomSensitivity")),i=this.get("maxZoom")||t.get("maxZoom");n*r>i||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-E0*this.get("zoomSensitivity"),i=this.get("minZoom")||t.get("minZoom");n*r<i||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(pu),Zb=Hb,Kb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&pp()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var $b=function(a){Kb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Oa("<div class='".concat(r,"'></div>")),i=t.get("container");i||(i=t.get("graph").get("container")),(0,l.isString)(i)&&(i=document.getElementById(i)),wi(n,{position:"absolute",visibility:"hidden",display:"none"}),i.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){wi(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,i=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),i.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,i=this.get("graph");this.currentTarget=n,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),i=this.get("getContent"),o=i(t);(0,l.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&wi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){wi(n,{visibility:"hidden",display:"none"});return}var i=this.get("graph"),o=i.get("width"),s=i.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=i.getPointByClient(t.clientX,t.clientY),h=this.get("fixToNode"),A=t.item;if(A.getType&&A.getType()==="node"&&h&&(0,l.isArray)(h)&&h.length>=2){var P=A.getBBox();c={x:P.minX+P.width*h[0],y:P.minY+P.height*h[1]}}var B=i.getCanvasByPoint(c.x,c.y),V=B.x,$=B.y,ut=i.getContainer(),lt={x:V+ut.offsetLeft+u,y:$+ut.offsetTop+f};wi(n,{visibility:"visible",display:"unset"});var dt=n.getBoundingClientRect();V+dt.width+u>o&&(lt.x-=dt.width+u),$+dt.height+f>s&&(lt.y-=dt.height+f),wi(n,{left:"".concat(lt.x,"px"),top:"".concat(lt.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(pu),Qb=$b,x0={};function Jb(a){return x0[a]}function Uc(a,e){x0[a]=e}var qb=function(){function a(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return a.prototype.translate=function(e){return e},a.prototype.change=function(e){(0,l.assign)(this.__cfg__,e),this.init()},a.prototype.clone=function(){return this.constructor(this.__cfg__)},a.prototype.getTicks=function(){var e=this;return(0,l.map)(this.ticks,function(t,r){return(0,l.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},a.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,l.isNil)(n)||!(0,l.isFunction)(n.toString)?"":n.toString()},a.prototype.getConfig=function(e){return this.__cfg__[e]},a.prototype.init=function(){(0,l.assign)(this,this.__cfg__),this.setDomain(),(0,l.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},a.prototype.initCfg=function(){},a.prototype.setDomain=function(){},a.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,l.isString)(e)){var r=Jb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,l.isFunction)(e)&&(t=e(this));return t},a.prototype.rangeMin=function(){return this.range[0]},a.prototype.rangeMax=function(){return this.range[1]},a.prototype.calcPercent=function(e,t,r){return(0,l.isNumber)(e)?(e-t)/(r-t):NaN},a.prototype.calcValue=function(e,t,r){return t+e*(r-t)},a}(),sg=qb,tE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,l.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),i=Math.round(r*n)+this.min;return i<this.min||i>this.max?NaN:this.values[i]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=t;return(0,l.isNumber)(t)&&!this.values.includes(t)&&(i=this.values[i]),a.prototype.getText.apply(this,(0,U.__spreadArrays)([i],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,l.isNil)(this.getConfig("min"))&&(this.min=0),(0,l.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(sg),lv=tE,w0=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ch="\\d\\d?",Ah="\\d\\d",eE="\\d{3}",rE="\\d{4}",hv="[^\\s]+",S0=/\[([^]*?)\]/gm;function _0(a,e){for(var t=[],r=0,n=a.length;r<n;r++)t.push(a[r].substr(0,e));return t}var M0=function(a){return function(e,t){var r=t[a].map(function(i){return i.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Th(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var i=n[r];for(var o in i)a[o]=i[o]}return a}var C0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A0=["January","February","March","April","May","June","July","August","September","October","November","December"],nE=_0(A0,3),iE=_0(C0,3),ug={dayNamesShort:iE,dayNames:C0,monthNamesShort:nE,monthNames:A0,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][a%10>3?0:(a-a%10!==10?1:0)*a%10]}},yp=Th({},ug),T0=function(a){return yp=Th(yp,a)},I0=function(a){return a.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},gu=function(a,e){for(e===void 0&&(e=2),a=String(a);a.length<e;)a="0"+a;return a},aE={D:function(a){return String(a.getDate())},DD:function(a){return gu(a.getDate())},Do:function(a,e){return e.DoFn(a.getDate())},d:function(a){return String(a.getDay())},dd:function(a){return gu(a.getDay())},ddd:function(a,e){return e.dayNamesShort[a.getDay()]},dddd:function(a,e){return e.dayNames[a.getDay()]},M:function(a){return String(a.getMonth()+1)},MM:function(a){return gu(a.getMonth()+1)},MMM:function(a,e){return e.monthNamesShort[a.getMonth()]},MMMM:function(a,e){return e.monthNames[a.getMonth()]},YY:function(a){return gu(String(a.getFullYear()),4).substr(2)},YYYY:function(a){return gu(a.getFullYear(),4)},h:function(a){return String(a.getHours()%12||12)},hh:function(a){return gu(a.getHours()%12||12)},H:function(a){return String(a.getHours())},HH:function(a){return gu(a.getHours())},m:function(a){return String(a.getMinutes())},mm:function(a){return gu(a.getMinutes())},s:function(a){return String(a.getSeconds())},ss:function(a){return gu(a.getSeconds())},S:function(a){return String(Math.round(a.getMilliseconds()/100))},SS:function(a){return gu(Math.round(a.getMilliseconds()/10),2)},SSS:function(a){return gu(a.getMilliseconds(),3)},a:function(a,e){return a.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(a,e){return a.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(a){var e=a.getTimezoneOffset();return(e>0?"-":"+")+gu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(a){var e=a.getTimezoneOffset();return(e>0?"-":"+")+gu(Math.floor(Math.abs(e)/60),2)+":"+gu(Math.abs(e)%60,2)}},P0=function(a){return+a-1},O0=[null,Ch],D0=[null,hv],N0=["isPm",hv,function(a,e){var t=a.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],L0=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(a){var e=(a+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],oE={D:["day",Ch],DD:["day",Ah],Do:["day",Ch+hv,function(a){return parseInt(a,10)}],M:["month",Ch,P0],MM:["month",Ah,P0],YY:["year",Ah,function(a){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+a>68?t-1:t)+a)}],h:["hour",Ch,void 0,"isPm"],hh:["hour",Ah,void 0,"isPm"],H:["hour",Ch],HH:["hour",Ah],m:["minute",Ch],mm:["minute",Ah],s:["second",Ch],ss:["second",Ah],YYYY:["year",rE],S:["millisecond","\\d",function(a){return+a*100}],SS:["millisecond",Ah,function(a){return+a*10}],SSS:["millisecond",eE],d:O0,dd:O0,ddd:D0,dddd:D0,MMM:["month",hv,M0("monthNamesShort")],MMMM:["month",hv,M0("monthNames")],a:N0,A:N0,ZZ:L0,Z:L0},mp={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},k0=function(a){return Th(mp,a)},R0=function(a,e,t){if(e===void 0&&(e=mp.default),t===void 0&&(t={}),typeof a=="number"&&(a=new Date(a)),Object.prototype.toString.call(a)!=="[object Date]"||isNaN(a.getTime()))throw new Error("Invalid Date pass to format");e=mp[e]||e;var r=[];e=e.replace(S0,function(i,o){return r.push(o),"@@@"});var n=Th(Th({},yp),t);return e=e.replace(w0,function(i){return aE[i](a,n)}),e.replace(/@@@/g,function(){return r.shift()})};function B0(a,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=mp[e]||e,a.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],s=e.replace(S0,function(xt,Wt){return o.push(I0(Wt)),"@@@"}),u={},f={};s=I0(s).replace(w0,function(xt){var Wt=oE[xt],Qt=Wt[0],Zt=Wt[1],de=Wt[3];if(u[Qt])throw new Error("Invalid format. "+Qt+" specified twice in format");return u[Qt]=!0,de&&(f[de]=!0),i.push(Wt),"("+Zt+")"}),Object.keys(f).forEach(function(xt){if(!u[xt])throw new Error("Invalid format. "+xt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=a.match(new RegExp(s,"i"));if(!c)return null;for(var h=Th(Th({},yp),t),A=1;A<c.length;A++){var P=i[A-1],B=P[0],V=P[2],$=V?V(c[A],h):+c[A];if($==null)return null;n[B]=$}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var ut;if(n.timezoneOffset==null){ut=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var lt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],A=0,dt=lt.length;A<dt;A++)if(u[lt[A][0]]&&n[lt[A][0]]!==ut[lt[A][1]]())return null}else if(ut=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return ut}var sE={format:R0,parse:B0,defaultI18n:ug,setGlobalDateI18n:T0,setGlobalDateMasks:k0},G0=sE;function uE(a){return function(e,t,r,n){for(var i=(0,l.isNil)(r)?0:r,o=(0,l.isNil)(n)?e.length:n;i<o;){var s=i+o>>>1;a(e[s])>t?o=s:i=s+1}return i}}var F0="format";function U0(a,e){var t=O[F0]||G0[F0];return t(a,e)}function bp(a){return(0,l.isString)(a)&&(a.indexOf("T")>0?a=new Date(a).getTime():a=new Date(a.replace(/-/gi,"/")).getTime()),(0,l.isDate)(a)&&(a=a.getTime()),a}var rc=1e3,rd=60*rc,nd=60*rd,Rl=24*nd,dv=Rl*31,z0=Rl*365,vv=[["HH:mm:ss",rc],["HH:mm:ss",rc*10],["HH:mm:ss",rc*30],["HH:mm",rd],["HH:mm",rd*10],["HH:mm",rd*30],["HH",nd],["HH",nd*6],["HH",nd*12],["YYYY-MM-DD",Rl],["YYYY-MM-DD",Rl*4],["YYYY-WW",Rl*7],["YYYY-MM",dv],["YYYY-MM",dv*4],["YYYY-MM",dv*6],["YYYY",Rl*380]];function fE(a,e,t){var r=(e-a)/t,n=uE(function(o){return o[1]})(vv,r)-1,i=vv[n];return n<0?i=vv[0]:n>=vv.length&&(i=(0,l.last)(vv)),i}var cE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=bp(t);var r=this.values.indexOf(t);return r===-1&&((0,l.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var i=this.values[n],o=this.formatter;return i=o?o(i,r):U0(i,this.mask),i}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,l.each)(t,function(r,n){t[n]=bp(r)}),t.sort(function(r,n){return r-n}),a.prototype.setDomain.call(this)},e}(lv),lE=cE,hE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,l.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),i=this.max,o=this.min;if(i===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){a.prototype.init.call(this);var t=this.ticks,r=(0,l.head)(t),n=(0,l.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,l.isNil)(this.minLimit)||(this.min=r),(0,l.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,l.getRange)(this.values),r=t.min,n=t.max;(0,l.isNil)(this.min)&&(this.min=r),(0,l.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=a.prototype.calculateTicks.call(this);return this.nice||(r=(0,l.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(sg),Ep=hE,dE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Ep),pv=dE;function Ih(a,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/a):r=Math.pow(t,Math.log(-e)/a)*-1,r}function gf(a,e){return a===1?1:Math.log(e)/Math.log(a)}function W0(a,e,t){(0,l.isNil)(t)&&(t=Math.max.apply(null,a));var r=t;return(0,l.each)(a,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function V0(a){var e=a.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function qS(a,e){var t=V0(a),r=V0(e),n=Math.pow(10,Math.max(t,r));return(a*n+e*n)/n}var vE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=gf(r,this.max),i=this.rangeMin(),o=this.rangeMax()-i,s,u=this.positiveMin;if(u){if(t===0)return 0;s=gf(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=gf(r,this.min);var c=(t-i)/o,h=c*(n-s)+s;return Math.pow(r,h)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){a.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=W0(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var i=this.base,o=this.positiveMin;o&&(n=o*1/i);var s;return t<o?s=t/o/(gf(i,r)-gf(i,n)):s=(gf(i,t)-gf(i,n))/(gf(i,r)-gf(i,n)),s},e}(Ep),pE=vE,gE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,i=Ih(n,this.max),o=Ih(n,this.min),s=r*(i-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var i=this.exponent,o=(Ih(i,t)-Ih(i,n))/(Ih(i,r)-Ih(i,n));return o},e}(Ep),yE=gE,mE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),i=this.formatter;return i?i(n,r):U0(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,l.isString)(r)||(0,l.isDate)(r))&&(r=this.translate(r)),a.prototype.scale.call(this,r)},e.prototype.translate=function(t){return bp(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,l.isNil)(r)||!(0,l.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,l.isNil)(n)||!(0,l.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var i=[],o=1/0,s=o,u=0;(0,l.each)(t,function(f){var c=bp(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),i.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,l.isNil)(r)&&(this.min=o),(0,l.isNil)(n)&&(this.max=u)}},e}(pv),bE=mE,EE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,i=this.getInvertPercent(t),o=Math.floor(i*(n-1));if(o>=n-1)return(0,l.last)(r);if(o<0)return(0,l.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(i-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=a.prototype.calculateTicks.call(this);return this.nice||((0,l.last)(t)!==this.max&&t.push(this.max),(0,l.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,l.head)(r))return 0;if(t>(0,l.last)(r))return 1;var n=0;return(0,l.each)(r,function(i,o){if(t>=i)n=o;else return!1}),n/(r.length-1)},e}(Ep),j0=EE,xE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(j0),wE=xE,X0={};function SE(a){return X0[a]}function zc(a,e){if(SE(a))throw new Error("type '"+a+"' existed.");X0[a]=e}var _E=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,l.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(sg),ME=_E;function Y0(a){var e=a.values,t=a.tickInterval,r=a.tickCount,n=a.showLast;if((0,l.isNumber)(t)){var i=(0,l.filter)(e,function(B,V){return V%t===0}),o=(0,l.last)(e);return n&&(0,l.last)(i)!==o&&i.push(o),i}var s=e.length,u=a.min,f=a.max;if((0,l.isNil)(u)&&(u=0),(0,l.isNil)(f)&&(f=e.length-1),!(0,l.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),h=[],A=u,P=0;P<r&&!(A>=f);P++)A=Math.min(u+P*c,f),P===r-1&&n?h.push(e[f]):h.push(e[A]);return h}function CE(a){var e=a.min,t=a.max,r=a.nice,n=a.tickCount,i=new AE;return i.domain([e,t]),r&&i.nice(n),i.ticks(n)}var fg=5,H0=Math.sqrt(50),Z0=Math.sqrt(10),K0=Math.sqrt(2),AE=function(){function a(){this._domain=[0,1]}return a.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},a.prototype.nice=function(e){var t,r;e===void 0&&(e=fg);var n=this._domain.slice(),i=0,o=this._domain.length-1,s=this._domain[i],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,i],i=r[0],o=r[1]),f=xp(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=xp(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=xp(s,u,e)),f>0?(n[i]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[i]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},a.prototype.ticks=function(e){return e===void 0&&(e=fg),TE(this._domain[0],this._domain[this._domain.length-1],e||fg)},a}();function TE(a,e,t){var r,n=-1,i,o,s;if(e=+e,a=+a,t=+t,a===e&&t>0)return[a];if((r=e<a)&&(i=a,a=e,e=i),(s=xp(a,e,t))===0||!isFinite(s))return[];if(s>0)for(a=Math.ceil(a/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-a+1));++n<i;)o[n]=(a+n)*s;else for(a=Math.floor(a*s),e=Math.ceil(e*s),o=new Array(i=Math.ceil(a-e+1));++n<i;)o[n]=(a-n)/s;return r&&o.reverse(),o}function xp(a,e,t){var r=(e-a)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,n);return n>=0?(i>=H0?10:i>=Z0?5:i>=K0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(i>=H0?10:i>=Z0?5:i>=K0?2:1)}function $0(a,e,t){var r;return t==="ceil"?r=Math.ceil(a/e):t==="floor"?r=Math.floor(a/e):r=Math.round(a/e),r*e}function cg(a,e,t){var r=$0(a,t,"floor"),n=$0(e,t,"ceil");r=(0,l.fixedBase)(r,t),n=(0,l.fixedBase)(n,t);for(var i=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,l.fixedBase)(s,o);i.push(u)}return{min:r,max:n,ticks:i}}function lg(a,e,t){var r,n=a.minLimit,i=a.maxLimit,o=a.min,s=a.max,u=a.tickCount,f=u===void 0?5:u,c=(0,l.isNil)(n)?(0,l.isNil)(e)?o:e:n,h=(0,l.isNil)(i)?(0,l.isNil)(t)?s:t:i;if(c>h&&(r=[c,h],h=r[0],c=r[1]),f<=2)return[c,h];for(var A=(h-c)/(f-1),P=[],B=0;B<f;B++)P.push(c+A*B);return P}function IE(a){var e=a.min,t=a.max,r=a.tickInterval,n=a.minLimit,i=a.maxLimit,o=CE(a);return!(0,l.isNil)(n)||!(0,l.isNil)(i)?lg(a,(0,l.head)(o),(0,l.last)(o)):r?cg(e,t,r).ticks:o}function id(a){return Math.abs(a)<1e-15?a:parseFloat(a.toFixed(15))}var PE=[1,5,2,2.5,4,3],t2=null,Q0=Number.EPSILON*100;function OE(a,e){return(a%e+e)%e}function DE(a){return Math.round(a*1e12)/1e12}function NE(a,e,t,r,n,i){var o=(0,l.size)(e),s=(0,l.indexOf)(e,a),u=0,f=OE(r,i);return(f<Q0||i-f<Q0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function LE(a,e,t){var r=(0,l.size)(e),n=(0,l.indexOf)(e,a),i=1;return 1-n/(r-1)-t+i}function kE(a,e,t,r,n,i){var o=(a-1)/(i-n),s=(e-1)/(Math.max(i,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function RE(a,e){return a>=e?2-(a-1)/(e-1):1}function BE(a,e,t,r){var n=e-a;return 1-.5*(Math.pow(e-r,2)+Math.pow(a-t,2))/Math.pow(.1*n,2)}function GE(a,e,t){var r=e-a;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function FE(){return 1}function UE(a,e,t,r,n,i){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=PE),i===void 0&&(i=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(a)||Number.isNaN(e)||typeof a!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-a<1e-15||o===1)return{min:a,max:e,ticks:[a]};if(e-a>1e148){var s=t||5,u=(e-a)/s;return{min:a,max:e,ticks:Array(s).fill(null).map(function(on,sn){return id(a+u*sn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var h=0;h<n.length;h+=1){var A=n[h],P=LE(A,n,c);if(i[0]*P+i[1]+i[2]+i[3]<f.score){c=1/0;break}for(var B=2;B<1/0;){var V=RE(B,o);if(i[0]*P+i[1]+i[2]*V+i[3]<f.score)break;for(var $=(e-a)/(B+1)/c/A,ut=Math.ceil(Math.log10($));ut<1/0;){var lt=c*A*Math.pow(10,ut),dt=GE(a,e,lt*(B-1));if(i[0]*P+i[1]*dt+i[2]*V+i[3]<f.score)break;var xt=Math.floor(e/lt)*c-(B-1)*c,Wt=Math.ceil(a/lt)*c;if(xt<=Wt)for(var s=Wt-xt,Qt=0;Qt<=s;Qt+=1){var Zt=xt+Qt,de=Zt*(lt/c),De=de+lt*(B-1),xe=lt,He=NE(A,n,c,de,De,xe),ar=BE(a,e,de,De),Fr=kE(B,o,a,e,de,De),rn=FE(),Zr=i[0]*He+i[1]*ar+i[2]*Fr+i[3]*rn;Zr>f.score&&(!r||de<=a&&De>=e)&&(f.lmin=de,f.lmax=De,f.lstep=xe,f.score=Zr)}ut+=1}B+=1}}c+=1}var Nr=id(f.lmax),yn=id(f.lmin),dn=id(f.lstep),Lr=Math.floor(DE((Nr-yn)/dn))+1,Yr=new Array(Lr);Yr[0]=id(yn);for(var h=1;h<Lr;h++)Yr[h]=id(Yr[h-1]+dn);return{min:Math.min(a,(0,l.head)(Yr)),max:Math.max(e,(0,l.last)(Yr)),ticks:Yr}}function zE(a){var e=a.min,t=a.max,r=a.tickCount,n=a.nice,i=a.tickInterval,o=a.minLimit,s=a.maxLimit,u=UE(e,t,r,n).ticks;return!(0,l.isNil)(o)||!(0,l.isNil)(s)?lg(a,(0,l.head)(u),(0,l.last)(u)):i?cg(e,t,i).ticks:u}function WE(a){var e=a.base,t=a.tickCount,r=a.min,n=a.max,i=a.values,o,s=gf(e,n);if(r>0)o=Math.floor(gf(e,r));else{var u=W0(i,e,n);o=Math.floor(gf(e,u))}for(var f=s-o,c=Math.ceil(f/t),h=[],A=o;A<s+c;A=A+c)h.push(Math.pow(e,A));return r<=0&&h.unshift(0),h}function J0(a,e,t){if(t===void 0&&(t=5),a===e)return{max:e,min:a,ticks:[a]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:a,ticks:[]};var n=1.5,i=.5+1.5*n,o=e-a,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<i*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),h=Math.floor(a/f),A=Math.max(c*f,e),P=Math.min(h*f,a),B=Math.floor((A-P)/f)+1,V=new Array(B),$=0;$<B;$++)V[$]=id(P+$*f);return{min:P,max:A,ticks:V}}function VE(a){var e=a.exponent,t=a.tickCount,r=Math.ceil(Ih(e,a.max)),n=Math.floor(Ih(e,a.min)),i=J0(n,r,t).ticks;return i.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function jE(a,e){var t=a.length*e;return e===1?a[a.length-1]:e===0?a[0]:t%1!==0?a[Math.ceil(t)-1]:a.length%2===0?(a[t-1]+a[t])/2:a[t]}function XE(a){var e=a.tickCount,t=a.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],i=0;i<e;i++){var o=i/(e-1);n.push(jE(r,o))}return n}function YE(a){var e=a.min,t=a.max,r=a.tickCount,n=a.tickInterval,i=a.minLimit,o=a.maxLimit,s=J0(e,t,r).ticks;return!(0,l.isNil)(i)||!(0,l.isNil)(o)?lg(a,(0,l.head)(s),(0,l.last)(s)):n?cg(e,t,n).ticks:s}function HE(a){var e=a.min,t=a.max,r=a.minTickInterval,n=a.tickInterval,i=a.tickCount;if(n)i=Math.ceil((t-e)/n);else{n=fE(e,t,i)[1];var o=(t-e)/n,s=o/i;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function ZE(a){var e=Y0((0,U.__assign)({showLast:!0},a));return e}function wp(a){return new Date(a).getFullYear()}function KE(a){return new Date(a,0,1).getTime()}function hg(a){return new Date(a).getMonth()}function $E(a,e){var t=wp(a),r=wp(e),n=hg(a),i=hg(e);return(r-t)*12+(i-n)%12}function QE(a,e){return new Date(a,e,1).getTime()}function JE(a,e){return Math.ceil((e-a)/Rl)}function qE(a,e){return Math.ceil((e-a)/nd)}function tx(a,e){return Math.ceil((e-a)/(60*1e3))}function ex(a){var e=a.min,t=a.max,r=a.minTickInterval,n=a.tickCount,i=a.tickInterval,o=[];i||(i=(t-e)/n,r&&i<r&&(i=r)),i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);var s=wp(e);if(i>z0)for(var u=wp(t),f=Math.ceil(i/z0),c=s;c<=u+f;c=c+f)o.push(KE(c));else if(i>dv)for(var h=Math.ceil(i/dv),A=hg(e),P=$E(e,t),c=0;c<=P+h;c=c+h)o.push(QE(s,c+A));else if(i>Rl)for(var B=new Date(e),V=B.getFullYear(),$=B.getMonth(),ut=B.getDate(),lt=Math.ceil(i/Rl),dt=JE(e,t),c=0;c<dt+lt;c=c+lt)o.push(new Date(V,$,ut+c).getTime());else if(i>nd)for(var B=new Date(e),V=B.getFullYear(),$=B.getMonth(),lt=B.getDate(),xt=B.getHours(),Wt=Math.ceil(i/nd),Qt=qE(e,t),c=0;c<=Qt+Wt;c=c+Wt)o.push(new Date(V,$,lt,xt+c).getTime());else if(i>rd)for(var Zt=tx(e,t),de=Math.ceil(i/rd),c=0;c<=Zt+de;c=c+de)o.push(e+c*rd);else{var De=i;De<rc&&(De=rc);for(var xe=Math.floor(e/rc)*rc,He=Math.ceil((t-e)/rc),ar=Math.ceil(De/rc),c=0;c<He+ar;c=c+ar)o.push(xe+c*rc)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+i+") is too small, increase the value to solve the problem!"),o}Uc("cat",Y0),Uc("time-cat",ZE),Uc("wilkinson-extended",zE),Uc("r-pretty",YE),Uc("time",HE),Uc("time-pretty",ex),Uc("log",WE),Uc("pow",VE),Uc("quantile",XE),Uc("d3-linear",IE),zc("cat",lv),zc("category",lv),zc("identity",ME),zc("linear",pv),zc("log",pE),zc("pow",yE),zc("time",bE),zc("timeCat",lE),zc("quantize",j0),zc("quantile",wE);var rx=function(a,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return a.concat(i||Array.prototype.slice.call(e))};function nx(a){return(0,l.map)(a,function(e,t){var r=t===0?"M":"L",n=e[0],i=e[1];return[r,n,i]})}function q0(a){return nx(a)}function ix(a){if(a.length<=2)return q0(a);var e=[];(0,l.each)(a,function(o){(0,l.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=ha(e,!1),r=(0,l.head)(a),n=r[0],i=r[1];return t.unshift(["M",n,i]),t}function ax(a,e,t,r){r===void 0&&(r=!0);var n=new pv({values:a}),i=new lv({values:(0,l.map)(a,function(s,u){return u})}),o=(0,l.map)(a,function(s,u){return[i.scale(u)*e,t-n.scale(s)*t]});return r?ix(o):q0(o)}function ox(a,e,t,r){r===void 0&&(r=5);for(var n=new pv({values:a}),i=new lv({values:(0,l.map)(a,function(A,P){return P})}),o=(0,l.map)(a,function(A,P){return[i.scale(P)*e,t-n.scale(A)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},h=fx(c);s.push.apply(s,h)}return cx(s)}function sx(a,e){var t=new pv({values:a}),r=Math.max(0,t.min);return e-t.scale(r)*e}function ux(a,e,t,r){var n=rx([],a,!0),i=sx(r,t);return n.push(["L",e,i]),n.push(["L",0,i]),n.push(["Z"]),n}function fx(a){var e=a.x,t=a.y,r=a.y0,n=a.size,i,o;(0,l.isArray)(t)?(i=t[0],o=t[1]):(i=r,o=t);var s,u;(0,l.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:i},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:i}),f}function cx(a,e){e===void 0&&(e=!0);var t=[],r=a[0];t.push(["M",r.x,r.y]);for(var n=1,i=a.length;n<i;n++)t.push(["L",a[n].x,a[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var gv=function(){return gv=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},gv.apply(this,arguments)},lx={stroke:"#C5C5C5",strokeOpacity:.85},hx={fill:"#CACED4",opacity:.85},dx=function(){function a(e){var t=e.x,r=t===void 0?0:t,n=e.y,i=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,h=c===void 0?!0:c,A=e.isArea,P=A===void 0?!1:A,B=e.data,V=B===void 0?[]:B,$=e.lineStyle,ut=e.areaStyle,lt=e.group,dt=e.interval,xt=dt===void 0?null:dt;this.group=lt,this.x=r,this.y=i,this.width=s,this.height=f,this.data=V,this.smooth=h,this.isArea=P,this.lineStyle=Object.assign({},lx,$),this.areaStyle=Object.assign({},hx,ut),this.intervalConfig=xt,this.renderLine()}return a.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,i=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,h=e.areaStyle,A=this.group.addGroup({name:"trend-group"});if(s){var P=ax(s,n,i,u);if(A.addShape("path",{attrs:gv({path:P},c),name:"trend-line"}),f){var B=ux(P,n,i,s);A.addShape("path",{attrs:gv({path:B},h),name:"trend-area"})}}this.intervalConfig&&A.addShape("path",{attrs:gv({path:ox(this.intervalConfig.data,n,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),A.move(t,r)},a.prototype.destory=function(){this.group.destroy()},a}(),vx=dx,Ad=function(){return Ad=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ad.apply(this,arguments)},px={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},gx={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},yx=function(){function a(e){var t=e.group,r=e.name,n=e.type,i=e.x,o=i===void 0?0:i,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,h=e.height,A=h===void 0?24:h,P=e.style,B=P===void 0?{}:P;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=A,n==="trend"?this.style=Ad(Ad({},px),B):n==="simple"&&(this.style=Ad(Ad({},gx),B)),this.renderHandle()}return a.prototype.setX=function(e){this.setXY(e,void 0)},a.prototype.setY=function(e){this.setXY(void 0,e)},a.prototype.setXY=function(e,t){(0,l.isNumber)(e)&&(this.x=e),(0,l.isNumber)(t)&&(this.y=t),this.updateXY()},a.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,i=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(i,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},a.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},a.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},a.prototype.show=function(){this.handleGroup.show()},a.prototype.hide=function(){this.handleGroup.hide()},a.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},a}(),ty=yx,ey="timebarstartplay",ry="timebarendplay",Wc="valuechange",ad="timebarConfigChanged",Ph="playPauseBtn",yv="nextStepBtn",mv="preStepBtn",dg=function(){return dg=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},dg.apply(this,arguments)},mx=function(){function a(e){this.config=(0,l.deepMix)({},e),this.init()}return a.prototype.update=function(e){this.config=(0,l.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},a.prototype.init=function(){this.initElement(),this.renderMarker()},a.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,i=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,h=this.config.y+f,A=t.addGroup({name:Ph});this.startMarkerGroup=A.addGroup({name:Ph}),this.circle=t.addShape("circle",{attrs:dg({x:c,y:h,r:this.config.r*i},r),name:Ph}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,h,i),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=A.addGroup({name:Ph});var P=.25*this.config.r*i,B=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*i,y:h-B/2,width:P,height:B,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*i,y:h-B/2,width:P,height:B,fill:r.stroke||"#aaa",lineWidth:0}})},a.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,i=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+i,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,h=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-h/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",h),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-h/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",h)},a.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},a.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},a}(),bx=mx,po=function(){return po=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},po.apply(this,arguments)},bv=zt,Ex="#aaa",xx="green",wx={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Sx={fill:"#fff"},_x={fill:"green"},ny={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},iy={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Mx={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:ny,timeTypeControllerStyle:iy},vg=110,Oh=50,Vc={SINGLE:"single",RANGE:"range"},Cx=function(){function a(e){this.controllerCfg=(0,l.deepMix)({},Mx,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Vc.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return a.prototype.init=function(){this.renderPlayButton()},a.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},a.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},a.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,i=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Ex:s,f=e.stroke,c=f===void 0?xx:f,h=e.containerStyle,A=h===void 0?{}:h,P=po(po({},wx),e.playBtnStyle||{}),B=po(po({},Sx),e.preBtnStyle||{}),V=po(po({},_x),e.nextBtnStyle||{}),$=r/2-5,ut=i+10,lt=this.controllerGroup.addShape("rect",{attrs:po({x:n,y:ut,width:t,height:r,stroke:c,fill:u},A),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:ut,r:$}):this.playButton=new bx({group:this.controllerGroup,x:t/2,y:ut+$+5,r:$,isPlay:this.isPlay,style:P});var dt=B.offsetX||0,xt=B.offsetY||0,Wt=(B.scale||1)*$;this.controllerGroup.addShape("path",{attrs:po({path:this.getPreMarkerPath(t/2-5*$+dt,ut+$+5+xt,Wt*.5)},B),name:mv});var Qt=V.offsetX||0,Zt=V.offsetY||0,de=(V.scale||1)*$;this.controllerGroup.addShape("path",{attrs:po({path:this.getNextMarkerPath(t/2+5*$+Qt,ut+$+5+Zt,de*.5)},V),name:yv}),lt.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var De=this.controllerCfg.scale,xe=De===void 0?1:De,He=this.controllerGroup.getCanvasBBox(),ar=(He.maxX+He.minX)/2,Fr=(He.maxY+He.minY)/2,rn=bv([1,0,0,0,1,0,0,0,1],[["t",-ar,-Fr],["s",xe,xe],["t",ar,Fr]]);this.controllerGroup.setMatrix(rn)},a.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,i=po(po({},ny),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,s=o===void 0?{}:o,u=i.text,f=u===void 0?{}:u,c=i.pointer,h=c===void 0?{}:c,A=i.scale,P=A===void 0?1:A,B=i.offsetX,V=B===void 0?0:B,$=i.offsetY,ut=$===void 0?0:$,lt=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=lt;var dt=[],xt=5;this.speedAxisY=[19,22,26,32,39];for(var Wt=0;Wt<5;Wt++){var Qt=t+this.speedAxisY[Wt],Zt=r-(n?Oh:vg);lt.addShape("line",{attrs:po({x1:Zt,x2:Zt+15,y1:Qt,y2:Qt},s),speed:xt,name:"speed-rect"}),this.speedAxisY[Wt]=Qt,dt.push(xt),xt=xt-1}this.speedText=lt.addShape("text",{attrs:po({x:r-(n?Oh:vg)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=lt.addShape("path",{attrs:po({path:this.getPointerPath(r-(n?Oh:vg),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},h),name:"speed-pointer"});var de=this.speedGroup.getCanvasBBox(),De=(de.maxX+de.minX)/2,xe=(de.maxY+de.minY)/2,He=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];He=bv(He,[["t",-De,-xe],["s",P,P],["t",De+V*P,xe+ut*P]]),this.speedGroup.setMatrix(He)},a.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},a.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,i=r.defaultTimeType,o=po(po({},iy),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,h=o.offsetY,A=h===void 0?0:h,P=o.box,B=P===void 0?{}:P,V=o.check,$=V===void 0?{}:V,ut=o.text,lt=ut===void 0?{}:ut;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var dt=i===Vc.SINGLE;this.toggleGroup.addShape("rect",{attrs:po({x:n-Oh,y:this.speedAxisY[0]+3.5},B),isChecked:dt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:po({path:[["M",n-Oh+3,this.speedAxisY[1]+6],["L",n-Oh+7,this.speedAxisY[1]+10],["L",n-Oh+12,this.speedAxisY[1]+4]]},$),capture:!1,name:"check-icon"}),dt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:po({text:dt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Oh+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},lt),name:"checked-text"});var xt=this.toggleGroup.getCanvasBBox(),Wt=(xt.maxX+xt.minX)/2,Qt=(xt.maxY+xt.minY)/2,Zt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Zt=bv(Zt,[["t",-Wt,-Qt],["s",u,u],["t",Wt+c*u,Qt+A*u]]),this.toggleGroup.setMatrix(Zt)},a.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),i=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[i];n=bv(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(ad,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],i=e.speedAxisY.indexOf(n);if(i===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,i=f)})}t.originalEvent.deltaY>0?i=Math.max(0,i-1):i=Math.min(e.speedAxisY.length-1,i+1);var s=e.speedAxisY[i]-n;r=bv(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-i,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(ad,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,i=t.target.get("isChecked");i?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Vc.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Vc.SINGLE),t.target.set("isChecked",!i),e.group.emit(ad,{type:e.currentType,speed:e.currentSpeed})})},a.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},a}(),ay=Cx,Ma=function(){return Ma=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ma.apply(this,arguments)},Ax=zt,Tx={fill:"#416180",opacity:.05},Ix={fill:"#416180",opacity:.15,radius:5},Px={fill:"#5B8FF9",opacity:.3,cursor:"grab"},pg=2,Ox={width:pg,height:24},Dx={textBaseline:"middle",fill:"#000",opacity:.45},Nx={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Lx={lineWidth:1,stroke:"#ccc"},kx=function(){function a(e){var t=this;this.prevX=0,this.onMouseDown=function(on){return function(sn){t.currentHandler=on;var _n=sn.originalEvent;_n.stopPropagation(),_n.preventDefault(),t.prevX=(0,l.get)(_n,"touches.0.pageX",_n.pageX);var Ln=t.canvas.get("container");Ln.addEventListener("mousemove",t.onMouseMove),Ln.addEventListener("mouseup",t.onMouseUp),Ln.addEventListener("mouseleave",t.onMouseUp),Ln.addEventListener("touchmove",t.onMouseMove),Ln.addEventListener("touchend",t.onMouseUp),Ln.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(on){on.stopPropagation(),on.preventDefault();var sn=(0,l.get)(on,"touches.0.pageX",on.pageX),_n=sn-t.prevX,Ln=t.adjustOffsetRange(_n/t.width);t.updateStartEnd(Ln),t.updateUI(),t.prevX=sn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var on=t.canvas.get("container");on&&(on.removeEventListener("mousemove",t.onMouseMove),on.removeEventListener("mouseup",t.onMouseUp),on.removeEventListener("mouseleave",t.onMouseUp),on.removeEventListener("touchmove",t.onMouseMove),on.removeEventListener("touchend",t.onMouseUp),on.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,h=c===void 0?10:c,A=e.trendCfg,P=e.controllerCfg,B=P===void 0?{speed:1}:P,V=e.backgroundStyle,$=V===void 0?{}:V,ut=e.foregroundStyle,lt=ut===void 0?{}:ut,dt=e.handlerStyle,xt=dt===void 0?{}:dt,Wt=e.textStyle,Qt=Wt===void 0?{}:Wt,Zt=e.start,de=Zt===void 0?0:Zt,De=e.end,xe=De===void 0?1:De,He=e.minText,ar=He===void 0?"":He,Fr=e.maxText,rn=Fr===void 0?"":Fr,Zr=e.group,Nr=e.graph,yn=e.canvas,dn=e.tick,Lr=dn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(sn){return sn},ticks:[]}:dn,Yr=e.type;this.graph=Nr,this.canvas=yn,this.group=Zr,this.timeBarType=Yr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=h,this.ticks=Lr.ticks,this.trendCfg=A,this.controllerCfg=B,this.currentSpeed=B.speed||1,this.tickLabelFormatter=Lr.tickLabelFormatter,Yr==="trend"?this.backgroundStyle=Ma(Ma({},Tx),$):Yr==="simple"&&(this.backgroundStyle=Ma(Ma({},Ix),$)),this.foregroundStyle=Ma(Ma({},Px),lt),this.handlerStyle=Ma(Ma({},Ox),xt),this.textStyle=Ma(Ma({},Dx),Qt),this.tickLabelStyle=Ma(Ma({},Nx),Lr.tickLabelStyle),this.tickLineStyle=Ma(Ma({},Lx),Lr.tickLineStyle),this.currentMode=B.defaultTimeType||Vc.RANGE,this.start=de,this.end=xe,this.minText=ar,this.maxText=rn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return a.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,l.assign)(this,{x:t,y:r,width:n,height:i,minText:o,maxText:s}),this.updateUI()},a.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},a.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,i=t.timeBarType;if(i==="trend"&&(0,l.size)((0,l.get)(this.trendCfg,"data"))){var o=new vx(Ma(Ma({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Ma({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();i==="trend"?(this.minTextShape=u.addShape("text",{attrs:Ma({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Ma({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Ma({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Ma({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Ma({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ut){ut.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ut){ut.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,l.get)(this.handlerStyle,"width",2),c=(0,l.get)(this.handlerStyle,"height",24),h=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new ty({name:"minHandlerShape",group:h,type:i,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var A=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new ty({name:"maxHandlerShape",group:A,type:i,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var P=this.ticks,B=r/(P.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ut){ut.destroy()});var V=-1/0,$=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=P.map(function(ut,lt){e.tickPosList.push(e.x+lt*B);var dt;e.tickLabelFormatter?(dt=e.tickLabelFormatter(ut),!(0,l.isString)(dt)&&dt&&(dt=ut.date)):dt=ut.date;var xt=e.x+lt*B,Wt=e.y+n+5,Qt=e.group.addShape("text",{attrs:Ma({x:xt,y:Wt,text:dt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,l.isNumber)($)&&lt!==P.length-1){var Zt=Ax([1,0,0,0,1,0,0,0,1],[["t",-xt,-Wt],["r",$],["t",xt-5,Wt+2]]);Qt.attr({textAlign:"left",matrix:Zt})}lt===0?Qt.attr({textAlign:"left"}):lt!==P.length-1&&Qt.attr({textAlign:"right"});var de=e.group.addShape("line",{attrs:Ma({x1:e.x+lt*B,y1:e.y+n+2,x2:e.x+lt*B,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});de.toBack();var De=Qt.getBBox();return De.minX>V?(Qt.show(),de.show(),V=De.minX+De.width+10):(Qt.hide(),de.hide()),Qt}),this.controllerBtnGroup=new ay(Ma({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Vc.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},a.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Ph,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(yv,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(mv,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(ad,function(n){var i=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=i,i===Vc.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):i===Vc.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},a.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},a.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},a.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},a.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,l.get)(this.handlerStyle,"width",pg);this.setText(this.minText,this.maxText);var i=this.dodgeText([t,r]),o=i[0],s=i[1];this.minHandlerShape.setX(t-n/2),(0,l.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,l.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Vc.RANGE?this.graph.emit(Wc,{value:[this.start,this.end].sort()}):this.currentMode===Vc.SINGLE&&this.graph.emit(Wc,{value:[this.end,this.end]})},a.prototype.dodgeText=function(e){var t,r,n=2,i=(0,l.get)(this.handlerStyle,"width",pg),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var h=o.getBBox(),A=s.getBBox(),P=null,B=null;return this.timeBarType==="trend"?(P=u-h.width<this.x+n?{x:u+i/2+n,textAlign:"left"}:{x:u-i/2-n,textAlign:"right"},B=f+A.width>this.x+this.width?{x:f-i/2-n,textAlign:"right"}:{x:f+i/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(P=o.attr("x")>h.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},B=s.attr("x")>this.width-A.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[B,P]:[P,B]},a.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,i=e.currentSpeed,o=n/r.length,s=o/((10-i)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},a.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(ey,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(ry,null))},a.prototype.destory=function(){this.graph.off(Wc,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Ph,":click")),e.off("".concat(yv,":click")),e.off("".concat(mv,":click")),e.off(ad),e.destroy(),this.trendComponent&&this.trendComponent.destory()},a}(),Rx=kx,e2={opacity:.5,fill:"#000"},r2={opacity:.5,fill:"#000",r:5},n2={fill:"#fff",fontSize:12},Bx=function(){function a(e){var t=e.x,r=t===void 0?0:t,n=e.y,i=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,h=c===void 0?"g6-component-timebar-tooltip":c,A=e.backgroundColor,P=A===void 0?"#000":A,B=e.textColor,V=B===void 0?"#fff":B,$=e.opacity,ut=$===void 0?.8:$,lt=e.fontSize,dt=lt===void 0?12:lt;this.container=o,this.className=h,this.backgroundColor=P,this.textColor=V,this.x=r,this.y=i,this.text=s,this.padding=f,this.opacity=ut,this.fontSize=dt,this.render()}return a.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,i=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,h=e.container,A=Oa("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,l.isString)(h)&&(h=document.getElementById(h)),h.appendChild(A),e.parentHeight=h.offsetHeight,e.parentWidth=h.offsetWidth,wi(A,{visibility:"hidden",top:0,left:0});var P=Oa(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(i,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));P.innerHTML=s,A.appendChild(P),e.backgroundDOM=P;var B=Oa("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(i,"'></div>"));A.appendChild(B),e.arrowDOM=B,e.container=A},a.prototype.show=function(e){var t=this,r=e.text,n=e.x,i=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,h=t.arrowDOM.offsetHeight;wi(t.container,{top:"".concat(-f-h,"px"),left:"".concat(n,"px"),visibility:"visible"}),wi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),wi(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var A=n-u/2,P=n+u/2;A<0?wi(t.backgroundDOM,{marginLeft:"".concat(-u/2-A,"px")}):P>t.parentWidth&&wi(t.backgroundDOM,{marginLeft:"".concat(-u/2-P+t.parentWidth+12,"px")})},a.prototype.hide=function(){wi(this.container,{top:0,left:0,visibility:"hidden"})},a}(),Gx=Bx,Ev=function(){return Ev=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ev.apply(this,arguments)},Fx=zt,Ux={fill:"#5B8FF9"},zx={fill:"#e6e8e9"},Wx=function(){function a(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,i=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,h=e.x,A=h===void 0?0:h,P=e.y,B=P===void 0?0:P,V=e.tickLabelFormatter,$=e.selectedTickStyle,ut=$===void 0?Ux:$,lt=e.unselectedTickStyle,dt=lt===void 0?zx:lt,xt=e.tooltipBackgroundColor,Wt=e.tooltipFomatter,Qt=e.tickLabelStyle,Zt=e.controllerCfg,de=Zt===void 0?{speed:1}:Zt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=i,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=V,this.tickLabelStyle=Qt||{},this.selectedTickStyle=ut,this.unselectedTickStyle=dt,this.controllerCfg=de,this.currentSpeed=de.speed||1,this.x=A,this.y=B,this.tooltipBackgroundColor=xt,this.tooltipFomatter=Wt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return a.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,i=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,h=t.unselectedTickStyle,A=t.tickLabelStyle,P=r-2*i,B=10,V=4,$=3*i+V+B,ut=n-$-2*i,lt=2,dt=o.length,xt=(P-lt*(dt-1))/dt;this.tickWidth=xt;var Wt=this.sliceGroup,Qt=[],Zt=[],de=Math.round(dt*s),De=Math.round(dt*u);this.startTickRectId=de,this.endTickRectId=De;var xe=A.rotate;delete A.rotate,o.forEach(function(ar,Fr){var rn=Fr>=de&&Fr<=De,Zr=rn?c:h,Nr=Wt.addShape("rect",{attrs:Ev({x:i+Fr*(xt+lt),y:i,width:xt,height:ut},Zr),draggable:!0,name:"tick-rect-".concat(Fr)}),yn=Wt.addShape("rect",{attrs:{x:i+Fr*xt+lt*(2*Fr-1)/2,y:i,width:Fr===0||Fr===dt-1?xt+lt/2:xt+lt,height:ut,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Fr)});yn.toFront();var dn=Nr.getBBox(),Lr=(dn.minX+dn.maxX)/2;Qt.push({rect:Nr,pickRect:yn,value:ar.date,x:Lr,y:dn.minY});var Yr;if(f?(Yr=f(ar),!(0,l.isString)(Yr)&&Yr&&(Yr=ar.date)):Fr%Math.round(dt/10)===0&&(Yr=ar.date),Yr){Zt.push(Yr);var on=dn.maxY+i*2;Wt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Lr,y1:on,x2:Lr,y2:on+V},name:"tick-line"});var sn=on+V+i,_n=Wt.addShape("text",{attrs:Ev({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Lr,y:sn,textAlign:"center",text:Yr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},A),capture:!1,name:"tick-label"}),Ln=_n.getBBox();if(Ln.maxX>r?_n.attr("textAlign","right"):Ln.minX<0&&_n.attr("textAlign","left"),(0,l.isNumber)(xe)&&Zt.length!==10){var ti=Fx([1,0,0,0,1,0,0,0,1],[["t",-Lr,-sn],["r",xe],["t",Lr-5,sn+2]]);_n.attr({textAlign:"left",matrix:ti})}Zt.length===1?_n.attr({textAlign:"left"}):Zt.length===10&&_n.attr({textAlign:"right"})}}),this.tickRects=Qt;var He=this.group;this.currentSpeed=1,this.controllerBtnGroup=new ay(Ev({group:He,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},a.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var h=c.target;if(!(h.get("type")!=="rect"||!h.get("name"))){var A=parseInt(h.get("name").split("-")[2],10);if(!isNaN(A)){var P=e.tickRects,B=e.unselectedTickStyle;P.forEach(function(lt){lt.rect.attr(B)});var V=e.selectedTickStyle;P[A].rect.attr(V),e.startTickRectId=A,e.endTickRectId=A;var $=P.length,ut=A/$;e.graph.emit(Wc,{value:[ut,ut]})}}}),t.on("dragstart",function(c){var h=e.tickRects,A=e.unselectedTickStyle;h.forEach(function(lt){lt.rect.attr(A)});var P=c.target,B=parseInt(P.get("name").split("-")[2],10),V=e.selectedTickStyle;h[B].rect.attr(V),e.startTickRectId=B;var $=h.length,ut=B/$;e.graph.emit(Wc,{value:[ut,ut]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var h=parseInt(c.target.get("name").split("-")[2],10),A=e.startTickRectId,P=e.tickRects,B=e.selectedTickStyle,V=e.unselectedTickStyle,$=0;$<P.length;$++){var ut=$>=A&&$<=h?B:V;P[$].rect.attr(ut)}var lt=P.length;e.endTickRectId=h;var dt=A/lt,xt=h/lt;e.graph.emit(Wc,{value:[dt,xt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var h=e.startTickRectId,A=parseInt(c.target.get("name").split("-")[2],10);if(!(A<h)){var P=e.selectedTickStyle,B=e.tickRects;B[A].rect.attr(P),e.endTickRectId=A;var V=B.length,$=h/V,ut=A/V;e.graph.emit(Wc,{value:[$,ut]})}}});var r=this,n=r.tooltipBackgroundColor,i=r.tooltipFomatter,o=r.canvas,s=new Gx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var h=c.pickRect;h.on("mouseenter",function(A){var P=A.target;if(P.get("type")==="rect"){var B=parseInt(P.get("name").split("-")[2],10),V=o.getClientByPoint(u[B].x,u[B].y);s.show({x:u[B].x,y:u[B].y,clientX:V.x,clientY:V.y,text:i?i(u[B].value):u[B].value})}}),h.on("mouseleave",function(A){s.hide()})});var f=this.group;f.on("".concat(Ph,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(yv,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(mv,":click"),function(){e.updateStartEnd(-1)}),f.on(ad,function(c){var h=c.type,A=c.speed;e.currentSpeed=A})},a.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(ey,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(ry,null))},a.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},a.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(i),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(i);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Wc,{value:[f,c]})}},a.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Ph,":click")),e.off("".concat(yv,":click")),e.off("".concat(mv,":click")),e.off(ad),this.sliceGroup.destroy()},a}(),Vx=Wx,jx=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bl=function(){return Bl=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Bl.apply(this,arguments)},Xx=function(a,e){var t={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(t[r[n]]=a[r[n]]);return t},Yx=4,Hx=26,Zx=function(a){jx(e,a);function e(t){var r=a.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,l.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var i=r.get("graph");r.cacheGraphData=i.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,i=r.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container"),f;s?((0,l.isString)(s)&&(s=document.getElementById(s)),f=s):(f=Oa("<div class='".concat(o,"'></div>")),wi(f,{position:"relative"})),u.appendChild(f),this.set("timeBarContainer",f);var c,h=t.get("renderer");h==="SVG"?c=new uv({container:f,width:n,height:i}):c=new Ll({container:f,width:n,height:i}),this.get("containerCSS")&&wi(f,this.get("containerCSS")),this.set("canvas",c)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,i=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,h=r.controllerCfg,A=r.textStyle,P=r.tick,B=r.backgroundStyle,V=r.foregroundStyle,$=f.data,ut=Xx(f,["data"]),lt=n-2*s,dt=u==="trend"?Hx:Yx,xt=this.get("graph"),Wt=this.get("timeBarGroup"),Qt=this.get("canvas"),Zt=null;if(u==="trend"||u==="simple"){var de=this.get("getValue");Zt=new Rx(Bl(Bl({graph:xt,canvas:Qt,group:Wt,type:u,x:i+s,y:u==="trend"?o+s:o+s+15,width:lt,height:dt,padding:s,backgroundStyle:B,foregroundStyle:V,trendCfg:Bl(Bl({},ut),{data:$.map(function(xe){return(de==null?void 0:de(xe))||xe.value})})},c),{tick:{ticks:$,tickLabelFormatter:P.tickLabelFormatter,tickLabelStyle:P.tickLabelStyle,tickLineStyle:P.tickLineStyle},handlerStyle:Bl(Bl({},c.handlerStyle),{height:c.height||dt}),controllerCfg:h,textStyle:A}))}else u==="tick"&&(Zt=new Vx(Bl({graph:xt,canvas:Qt,group:Wt,x:i+s,y:o+s,width:n,height:42,padding:2,controllerCfg:h},P)));var De=function xe(){var He=t.get("timebar");He.draggingHandler=!1,He.isPlay&&(He.isPlay=!1,He.currentHandler=He.maxHandlerShape,He.changePlayStatus()),document.removeEventListener("mouseup",xe)};Qt.on("mousedown",function(xe){(xe.target.get("name")==="maxHandlerShape-handler"||xe.target.get("name")==="minHandlerShape-handler"||xe.target===Zt.foregroundShape)&&document.addEventListener("mouseup",De)}),this.set("timebar",Zt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var i=this._cfgs.type;!i||i==="trend"||i==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):i==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),h=Math.round(o.length*n[1]);h=h>=o.length?o.length-1:h,c=c>=o.length?o.length-1:c;var A=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,P=A?A(o[c]):o[c].date,B=A?A(o[h]):o[h].date;if(s!=="tick"){var V=this.get("timebar");V.setText(P,B)}if(u)u(f,P,B);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var $=this.get("filterItemTypes"),ut=this.get("changeData"),lt=this.get("getDate"),dt=this.get("shouldIgnore"),xt=o[c].date,Wt=o[h].date;if(ut||ut===void 0){var Qt=this.cacheGraphData.nodes,Zt=this.cacheGraphData.edges,de={},De={};f.getNodes().forEach(function(xe){return de[xe.getID()]=!0}),f.getEdges().forEach(function(xe){return De[xe.getID()]=!0}),$.includes("node")&&(Qt.forEach(function(xe){var He=+((lt==null?void 0:lt(xe))||xe.date),ar=He>=xt&&He<=Wt||(dt==null?void 0:dt("node",xe,{min:xt,max:Wt})),Fr=de[xe.id];Fr&&!ar?(f.removeItem(xe.id),de[xe.id]=!1):!Fr&&ar&&(f.addItem("node",xe),de[xe.id]=!0)}),Zt==null||Zt.forEach(function(xe){var He=de[xe.source]&&de[xe.target]||(dt==null?void 0:dt("edge",xe,{min:xt,max:Wt})),ar=!!f.findById(xe.id);ar&&!He?(f.removeItem(xe.id),De[xe.id]=!1):!ar&&He?(f.addItem("edge",xe),De[xe.id]=!0):ar||(De[xe.id]=!1)})),(this.get("filterEdge")||$.includes("edge"))&&(Zt==null||Zt.filter(function(xe){var He=+((lt==null?void 0:lt(xe))||xe.date),ar=He>=xt&&He<=Wt||(dt==null?void 0:dt("edge",xe,{min:xt,max:Wt})),Fr=de[xe.source]&&de[xe.target],rn=ar&&Fr,Zr=De[xe.id];Zr&&!rn?(De[xe.id]=!1,f.removeItem(xe.id)):!Zr&&rn&&(De[xe.id]=!0,f.addItem("edge",xe))}))}else $.includes("node")&&f.getNodes().forEach(function(xe){var He=xe.getModel();if(!(dt!=null&&dt("node",He,{min:xt,max:Wt}))){var ar=+((lt==null?void 0:lt(He))||He.date);ar<xt||ar>Wt?f.hideItem(xe):f.showItem(xe)}}),(this.get("filterEdge")||$.includes("edge"))&&f.getEdges().forEach(function(xe){var He=xe.getModel();if(!(dt!=null&&dt("edge",He,{min:o[c].date,max:o[h].date}))){var ar=+((lt==null?void 0:lt(He))||He.date);if(ar<o[c].date||ar>o[h].date)f.hideItem(xe);else{var Fr=xe.getSource().isVisible(),rn=xe.getTarget().isVisible();Fr&&rn&&f.showItem(xe)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Wc,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Wc,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),a.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var i=this.get("container");i||(i=this.get("graph").get("container")),(0,l.isString)(i)&&(i=document.getElementById(i)),i.removeChild(n)}},e}(pu),Kx=Zx,$x=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qx=In.applyMatrix;function Jx(a,e){var t,r;if(a.naturalWidth)t=a.naturalWidth,r=a.naturalHeight;else{var n=new Image;n.src=a.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var qx=function(a){$x(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var i=this.get("container");(0,l.isString)(i)&&(i=document.getElementById(i));var o=Oa("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,h=0,A=0,P=0,B=0,V=0;i.addEventListener("mousedown",function($){if(r.refresh=!1,$.target===o){var ut=o.style;A=parseInt(ut.width,10),P=parseInt(ut.height,10);var lt=t.get("width"),dt=t.get("height");A>lt||P>dt||(V=n.getZoom(),B=t.get("ratio"),f=!0,s=$.clientX,u=$.clientY)}},!1),i.addEventListener("mousemove",function($){if(!(!f||(0,l.isNil)($.clientX)||(0,l.isNil)($.clientY))){var ut=t.get("width"),lt=t.get("height"),dt=o.style;c=parseInt(dt.left,10),h=parseInt(dt.top,10),A=parseInt(dt.width,10),P=parseInt(dt.height,10);var xt=s-$.clientX,Wt=u-$.clientY;c-xt<0?xt=c:c-xt+A>=ut&&(xt=0),h-Wt<0?Wt=h:h-Wt+P>=lt&&(Wt=0),c-=xt,h-=Wt,wi(o,{left:"".concat(c,"px"),top:"".concat(h,"px")}),n.translate(xt*V/B,Wt*V/B),s=$.clientX,u=$.clientY}},!1),i.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),i.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),i.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),i=this.get("graph"),o=i.get("width"),s=i.get("height"),u=o/s,f=i.getGroup(),c=f.getCanvasBBox(),h=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],A=[c.maxX-c.minX,c.maxY-c.minY],P={centerX:h[0],centerY:h[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(P.width=A[0],P.height=P.width/u):(P.height=A[1],P.width=P.height*u),P.minX=h[0]-P.width/2,P.minY=h[1]-P.height/2;var B=f.getMatrix();B||(B=[1,0,0,0,1,0,0,0,1]);var V=rt.invert([1,0,0,0,1,0,0,0,1],B),$=Qx({x:P.minX,y:P.minY},V),ut=i.getCanvasByPoint($.x,$.y),lt=this.get("viewport");lt||this.initViewport();var dt=o/P.width,xt=dt*r,Wt=dt*n,Qt=r*-ut.x/P.width,Zt=n*-ut.y/P.height,de=Qt+xt,De=Zt+Wt;Qt<0&&(xt+=Qt,Qt=0),de>r&&(xt=xt-(de-r)),Zt<0&&(Wt+=Zt,Zt=0),De>n&&(Wt=Wt-(De-n)),this.set("ratio",t);var xe="".concat(Qt,"px"),He="".concat(Zt,"px");wi(lt,{left:xe,top:He,width:"".concat(xt,"px"),height:"".concat(Wt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),i=r.get("height"),o=i/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var h=Oa("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,l.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(h):r.get("container").appendChild(h),t.set("container",h);var A=Oa('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');h.appendChild(A);var P=Oa('<span style="display: table-cell; vertical-align: middle; "></span>');A.appendChild(P),t.set("containerDOM",A),t.set("containerSpan",P);var B=Oa('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",B),t.updateImgSize(),P.appendChild(B),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),i=t.get("height");r.onload=function(){var o=Jx(r);o[0]>o[1]?r.width=n:r.height=i}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),i=r.get("canvas").getCanvasBBox(),o=i.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var i=Oa('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",i),i.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(i),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(pu),tw=qx,ew=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gg=function(){return gg=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},gg.apply(this,arguments)},rw=In.distance,oy=.05,sy={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},nw=function(a){ew(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,l.clone)(sy),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",i=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",i);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(i){}),n.on("drag",function(i){r.filter(i)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(i){r.scaleRByWheel(i)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),i,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?i=1-oy:i=1/(1-oy);var f=r.get("maxR"),c=r.get("minR"),h=r.get("r");(h>(f||n.get("height"))&&i>1||h<(c||n.get("height")*.05)&&i<1)&&(i=1),h*=i,r.set("r",h),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),i=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),h=r.get("vShapes");h&&h.forEach(function(ut){ut.remove(),ut.destroy()}),h=[],i.forEach(function(ut){var lt=ut.getModel(),dt=lt.x,xt=lt.y;rw({x:dt,y:xt},f)<s&&(o[lt.id]=ut)});var A=n.getEdges(),P=[];A.forEach(function(ut){var lt=ut.getModel(),dt=lt.source,xt=lt.target;c(lt)&&(u==="only-source"||u==="one"?o[dt]&&!o[xt]&&P.push(ut):u==="only-target"||u==="one"?o[xt]&&!o[dt]&&P.push(ut):u==="both"&&o[dt]&&o[xt]&&P.push(ut))});var B=r.get("showNodeLabel"),V=r.get("showEdgelabel"),$=n.get("group");P.forEach(function(ut){var lt=ut.get("group").get("children");lt.forEach(function(dt){var xt=dt.get("type"),Wt=$.addShape(xt,{attrs:dt.attr()});h.push(Wt),B&&xt==="text"&&Wt.set("visible",!0)})}),Object.keys(o).forEach(function(ut){var lt=o[ut],dt=lt.get("group").clone();if($.add(dt),h.push(dt),V)for(var xt=dt.get("children"),Wt=0;Wt<xt.length;Wt++){var Qt=xt[Wt];Qt.get("type")==="text"&&Qt.set("visible",!0)}}),r.set("vShapes",h)},e.prototype.updateParams=function(t){var r=this,n=t.r,i=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(i==="mousemove"||i==="click")&&r.set("trigger",i),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var h=r.get("dPercentText");h&&(h.remove(),h.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,i=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=i.get("group"),u=n.get("delegateStyle")||sy;o=s.addShape("circle",{attrs:gg({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(i){i.remove(),i.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(pu),iw=nw,aw=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ow=In.pointLineDistance,sw={stroke:"#FA8C16",lineWidth:1},uw=function(a){aw(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:sw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,i=n.getBBox(),o=r.getModel(),s=o.x-i.x,u=o.y-i.y;this.show({x:i.minX+s,y:i.minY+u},{width:i.width,height:i.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,i=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");i===!0||i==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):i==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),i===!0||i==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):i==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,l.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var i=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},h={x:n.x+r.width/2,y:n.y+r.height/2},A={x:n.x+r.width/2,y:n.y+r.height},P={x:n.x,y:n.y+r.height/2},B={x:n.x+r.width,y:n.y+r.height/2},V=[],$=[],ut=null;if(this.clearAlignLine(),(0,l.each)(s,function(dt){dt[4].isVisible&&(V.push(i.getLineDisObject(dt,c)),V.push(i.getLineDisObject(dt,h)),V.push(i.getLineDisObject(dt,A)))}),(0,l.each)(u,function(dt){dt[4].isVisible&&($.push(i.getLineDisObject(dt,P)),$.push(i.getLineDisObject(dt,h)),$.push(i.getLineDisObject(dt,B)))}),V.sort(function(dt,xt){return dt.dis-xt.dis}),$.sort(function(dt,xt){return dt.dis-xt.dis}),V.length!==0&&V[0].dis<f){t.y=V[0].line[1]-V[0].point.y+n.y,ut={type:"item",horizontals:[V[0]]};for(var lt=1;lt<3;lt++)V[0].dis===V[lt].dis&&ut.horizontals.push(V[lt])}if($.length!==0&&$[0].dis<f){t.x=$[0].line[0]-$[0].point.x+n.x,ut?ut.verticals=[$[0]]:ut={type:"item",verticals:[$[0]]};for(var lt=1;lt<3;lt++)$[0].dis===$[lt].dis&&ut.verticals.push($[lt])}ut&&(ut.bbox=r,this.addAlignLine(ut))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,i=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),h=c.get("group");n==="item"&&(i&&(0,l.each)(i,function(A){var P=A.line,B=A.point,V=(P[0]+P[2])/2,$,ut;B.x<V?($=B.x-r.width/2,ut=Math.max(P[0],P[2])):($=B.x+r.width/2,ut=Math.min(P[0],P[2]));var lt=(0,l.mix)({x1:$,y1:P[1],x2:ut,y2:P[1]},u),dt=h.addShape("line",{attrs:lt,capture:!1});f.push(dt)}),o&&(0,l.each)(o,function(A){var P=A.line,B=A.point,V=(P[1]+P[3])/2,$,ut;B.y<V?($=B.y-r.height/2,ut=Math.max(P[1],P[3])):($=B.y+r.height/2,ut=Math.min(P[1],P[3]));var lt=(0,l.mix)({x1:P[0],y1:$,x2:P[0],y2:ut},u),dt=h.addShape("line",{attrs:lt,capture:!1});f.push(dt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:ow(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,l.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,i=this.get("graph"),o=i.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(pu),fw=uw,cw=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ja=function(){return ja=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},ja.apply(this,arguments)},lw=["click","mouseenter"],hw=function(a){cw(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var i=this.get("position").split("-");i.includes("left")&&(n="left"),i.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Oa(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();wi(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),i=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,h=0,A={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+h};return u.forEach(function(P){var B=s[f[P]],V=P;switch(P){case"top":B+=h;break;case"left":B+=c;break;case"bottom":B=n.getHeight()-t[1]-B+h,V="top";break;default:B=n.getWidth()-t[0]-B+c,V="left";break}A[V]=B}),A.top+=o+n.getContainer().offsetTop,A.left+=i+n.getContainer().offsetLeft,Object.keys(A).forEach(function(P){A[P]="".concat(A[P],"px")}),A},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";lw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var i=t.get("legendCanvas");n==="mouseenter"?(i.on("node-container:mouseenter",function(o){return t.filterData(o)}),i.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(i.on("node-container:click",function(o){return t.filterData(o)}),i.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();wi(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var i=t.get("parent");i.get("active")?(i.set("active",!1),this.findLegendItemsByState("active").length&&i.set("inactive",!0)):(i.set("inactive",!1),i.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(h){h.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(h){var A=h.get("children"),P=A[0],B=A[1];P.attr(ja(ja({},P.get("oriAttrs")),s)),B.attr(ja(ja({},B.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(h){var A=h.get("children"),P=A[0],B=A[1];P.attr(ja(ja({},P.get("oriAttrs")),f)),B.attr(ja(ja({},B.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var i=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=i.find(function(u){return u.get("name")==="node-group"}),s=i.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(i){return i.get("name")==="root"}),n=[r.find(function(i){return i.get("name")==="node-group"}),r.find(function(i){return i.get("name")==="edge-group"})];n.forEach(function(i){i.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var i=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=i.find(function(ut){return ut.get("name")==="root"}),h=c.find(function(ut){return ut.get("name")==="node-group"}),A=c.find(function(ut){return ut.get("name")==="edge-group"}),P=h.get("children").filter(function(ut){return ut.get("active")}),B=A.get("children").filter(function(ut){return ut.get("active")}),V=0,$=["getNodes","getEdges"];$.forEach(function(ut){o[ut]().forEach(function(lt){var dt=!1,xt=ut==="getNodes"?P:B;xt.forEach(function(Wt){var Qt=n[Wt.get("id")];dt=dt||Qt(lt.getModel())}),dt?(o.setItemState(lt,u,!1),o.setItemState(lt,s,!0),V++):(o.setItemState(lt,s,!1),o.setItemState(lt,u,!0))})}),V||$.forEach(function(ut){o[ut]().forEach(function(lt){o.clearItemStates(lt,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",i=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,i])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,i])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new Ll({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),i=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[i,o];u.forEach(function(Nr,yn){s[Nr].forEach(function(dn){var Lr,Yr=f[yn].addGroup({id:dn.id,name:"node-container"}),on,sn=dn.type,_n=t.getShapeSize(dn),Ln=_n.width,ti=_n.height,li=_n.r,Hi=t.getStyle(Nr.substr(0,4),dn);switch(dn.type){case"circle":on={r:li,x:0,y:0};break;case"rect":on={width:Ln,height:ti,x:-Ln/2,y:-ti/2};break;case"ellipse":on={rx:Ln,ry:ti,x:0,y:0},sn="ellipse";break;case"line":on={x1:-Ln/2,y1:0,x2:Ln/2,y2:0},sn="line";break;case"quadratic":on={path:[["M",-Ln/2,0],["Q",0,Ln/2,Ln/2,0]]},sn="path";break;case"cubic":on={path:[["M",-Ln/2,0],["C",-Ln/6,Ln/2,Ln/6,-Ln/2,Ln/2,0]]},sn="path";break;case"diamond":on={path:[["M",0,-ti],["L",Ln,0],["L",0,ti],["L",-Ln,0],["Z"]]},sn="path";break;case"triangle":on={path:[["M",-Ln,ti],["L",0,-ti],["L",Ln,ti],["Z"]]},sn="path";break;case"star":on={path:In.getStarPath(li*3,li*1.2)},sn="path";break;default:on={r:li,x:0,y:0};break}var ki=Yr.addShape(sn,{attrs:ja(ja({},on),Hi),name:"".concat(dn.type,"-node-keyShape"),oriAttrs:ja({opacity:1},Hi)});if(dn.label){var Zi=ki.getBBox(),qi=((Lr=dn.labelCfg)===null||Lr===void 0?void 0:Lr.style)||{},Ca=ja({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},qi);Yr.addShape("text",{attrs:ja({x:Zi.maxX+4,y:0,text:dn.label},Ca),className:"legend-label",name:"".concat(dn.type,"-node-text"),oriAttrs:Ca})}})});var c=this.get("padding"),h,A=n.find(function(Nr){return Nr.get("name")==="title-container"}),P={height:0,maxY:0,width:0};if(this.get("title")){A||(A=n.addGroup({name:"title-container"}));var B={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},V=this.get("titleConfig")||{},$=Object.assign(B,V.style||{});h=A.addShape("text",{attrs:ja({text:this.get("title")},$)}),P=A.getCanvasBBox(),A.setMatrix([1,0,0,0,1,0,V.offsetX,V.offsetY,1])}this.layoutItems();var ut=n.getCanvasBBox(),lt=i.getCanvasBBox(),dt=lt.minX<0?Math.abs(lt.minX)+c[3]:c[3],xt=P.maxY<lt.minY?Math.abs(P.maxY-lt.minY)+c[0]:P.maxY+c[0],Wt=[1,0,0,0,1,0,dt,xt,1];i.setMatrix(Wt),ut=n.getCanvasBBox();var Qt=[ut.minX+ut.width+c[1],ut.minY+ut.height+c[2]];if(h){var V=ja({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));P=A.getCanvasBBox();var Zt=A.getMatrix()||[1,0,0,0,1,0,0,0,1];V.position==="center"?Zt[6]=Qt[0]/2+V.offsetX:V.position==="right"?(Zt[6]=Qt[0]-c[3]+V.offsetX,h.attr({textAlign:"right"})):(Zt[6]=c[3]+V.offsetX,h.attr({textAlign:"left"})),A.setMatrix(Zt),P=A.getCanvasBBox(),dt=lt.minX<0?Math.abs(lt.minX)+c[3]:c[3],xt=lt.minY<P.maxY?Math.abs(P.maxY-lt.minY)+c[0]:P.maxY+c[0],Wt=[1,0,0,0,1,0,dt,xt,1],i.setMatrix(Wt);var de=[1,0,0,0,1,0,dt,xt,1];this.get("layout")==="vertical"?de[6]+=lt.maxX+this.get("horiSep"):de[7]+=lt.maxY+this.get("vertiSep"),o.setMatrix(de)}else{lt=i.getCanvasBBox();var De=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?De[6]+=Wt[6]+lt.maxX+this.get("horiSep"):De[7]+=Wt[7]+lt.maxY+this.get("vertiSep"),o.setMatrix(De)}ut=n.getCanvasBBox(),lt=i.getCanvasBBox(),Wt=i.getMatrix()||[1,0,0,0,1,0,0,0,1];var xe=o.getMatrix()||[1,0,0,0,1,0,0,0,1],He=o.getCanvasBBox();Qt=[Math.max(lt.width+Wt[6],He.width+xe[6])+c[1],Math.max(lt.height+Wt[7],He.height+xe[7])+c[2]],r.changeSize(Qt[0],Qt[1]);var ar=this.get("containerStyle"),Fr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],rn=In.invertMatrix({x:0,y:0},Fr),Zr=n.addShape("rect",{attrs:ja({x:rn.x+(ar.lineWidth||1),y:rn.y+(ar.lineWidth||1),width:Qt[0]-2*(ar.lineWidth||1),height:Qt[1]-2*(ar.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},ar),name:"legend-back-rect",capture:!1});return Zr.toBack(),Qt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),i=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(xt){return xt.get("name")==="root"}),f=u.find(function(xt){return xt.get("name")==="node-group"}),c=u.find(function(xt){return xt.get("name")==="edge-group"}),h={min:0,max:-1/0},A=-1/0;f.get("children").forEach(function(xt,Wt){Wt===0&&(h.min=s[0]);var Qt=xt.get("children")[0],Zt=xt.getCanvasBBox(),de=Qt.getBBox(),De=de.width,xe=de.height,He=0,ar=0,Fr=0;i==="vertical"?(ar=s[1],Fr=s[0]+De/2,s[0]=Fr+Zt.height+n,He=Zt.maxX+ar+De/2):(ar=s[0]+De/2,Fr=s[1],s[0]=ar+Zt.width+r,He=Zt.maxY+Fr+xe/2),s[0]>h.max&&(h.max=s[0]),He>A&&(A=He),xt.setMatrix([1,0,0,0,1,0,ar,Fr,1])});var P=h.max-h.min,B={min:0,max:-1/0},V=f.getCanvasBBox();s[0]=0,s[1]=i==="vertical"?V.maxX+r:V.maxY+n,c.get("children").forEach(function(xt,Wt){Wt===0&&(B.min=s[0]);var Qt=xt.get("children")[0],Zt=xt.getCanvasBBox(),de=Qt.getBBox(),De=de.width,xe=de.height,He=0,ar=0;i==="vertical"?(He=s[1],ar=s[0],s[0]=ar+Zt.height+n,xt.setMatrix([1,0,0,0,1,0,0,ar+xe/2,1])):(He=s[0],ar=s[1],s[0]=He+Zt.width+r,xt.setMatrix([1,0,0,0,1,0,He+De/2,0,1])),s[0]>B.max&&(B.max=s[0])});var $=B.max-B.min;if(o&&o!==""&&o!=="left"){var ut=P-$,lt=o==="center"?Math.abs(ut)/2:Math.abs(ut),dt=ut<0?f:c;dt.get("children").forEach(function(xt){var Wt=xt.getMatrix()||[1,0,0,0,1,0,0,0,1];i==="vertical"?Wt[7]+=lt:Wt[6]+=lt,xt.setMatrix(Wt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,i){return n.order-i.order}),t.nodes.forEach(function(n){var i,o,s,u,f,c=n.size||[((i=n.style)===null||i===void 0?void 0:i.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],h=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,l.uniqueId)(),type:n.type||"circle",style:ja({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:ja({fontFamily:"Arial"},h)}})})),t.edges&&(t.edges.sort(function(n,i){return n.order-i.order}),t.edges.forEach(function(n){var i,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((i=n.labelCfg)===null||i===void 0?void 0:i.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,l.uniqueId)(),type:s,size:f,style:ja({lineWidth:(0,l.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:ja({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,l.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,l.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,i;return t.size&&((0,l.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],i=t.size[0]/2):(0,l.isNumber)(t.size)&&(r=t.size,n=t.size,i=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(i=t.style.r)),i||(i=5),r||(r=i),n||(n=i),{width:r,height:n,r:i}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return ja(ja({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),i=this.get("container");n.removeChild(i)},e}(pu),dw=hw,vw=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yf=function(){return yf=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},yf.apply(this,arguments)},uy=function(a,e){var t={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(t[r[n]]=a[r[n]]);return t};typeof document!="undefined"&&pp()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var fy="canvas-annotation",pw=function(a){vw(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=yf(yf({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,i=t.title,o=i===void 0?"":i,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,h=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",A=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),P="<p class='g6-annotation-close'>x</p>",B=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(B,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(h,`
          `).concat(P,`
        </div>
        `).concat(A,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),i=t.get("container"),o=this.get("containerCfg");o?(i=this.createContainer(),n.appendChild(i)):i=n,this.set("container",i);var s=n.getBoundingClientRect(),u=new Ll({container:n,width:s.right-s.left,height:s.bottom-s.top});wi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,l.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(h){var A,P=((A=h==null?void 0:h.getModel)===null||A===void 0?void 0:A.call(h))||{},B=P.label,V=P.id;return B||V||"-"}),t.get("getContent")||t.set("getContent",function(h){var A,P;if(!h)return"-";var B=((A=h.getModel)===null||A===void 0?void 0:A.call(h))||{},V=B.label,$=B.id,ut=(P=h.getType)===null||P===void 0?void 0:P.call(h),lt=ut?"".concat(ut,": "):"";return"".concat(lt).concat(V||$||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),i=n.getContainer(),o=i.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,h=c-f,A=u-s,P=r.position,B=P===void 0?"top":P,V=r.offsetX,$=V===void 0?0:V,ut=r.offsetY,lt=ut===void 0?0:ut,dt=uy(r,["position","offsetX","offsetY"]),xt=r.height,Wt=xt===void 0?"fit-content":xt,Qt=r.width,Zt=Qt===void 0?n.getWidth():Qt;Wt==="100%"&&(Wt=h),Zt==="100%"&&(Zt=A);var de="unset",De="unset",xe={};switch(B){case"right":de="".concat(h,"px"),xe={top:0,right:0},xe.right+=s+$,xe.top+=f+lt;break;case"bottom":De="".concat(A,"px"),xe={bottom:0,left:0},xe.left+=s+$,xe.bottom+=f+lt;break;case"top":De="".concat(A,"px");case"left":de="".concat(h,"px");default:xe={top:0,left:0},xe.left+=s+$,xe.top+=f+lt;break}Object.keys(xe).forEach(function(ar){xe[ar]="".concat(xe[ar],"px")});var He=Oa("<div class='".concat(r.className," g6-annotation-container'></div>"));return wi(He,yf(yf({position:"absolute",display:B==="top"||B==="bottom"?"inline-flex":"unset",width:(0,l.isNumber)(Zt)?"".concat(Zt,"px"):Zt,height:(0,l.isNumber)(Wt)?"".concat(Wt,"px"):Wt,maxHeight:de,maxWidth:De,overflow:"scroll"},xe),dt)),i.appendChild(He),He.addEventListener("scroll",function(ar){t.updateLinks()}),He}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,i=r.bottom-r.top;t.get("canvas").changeSize(n,i),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},i=r.get("graph"),o=i.getPointByCanvas(0,0),s=i.getPointByCanvas(i.getWidth(),i.getHeight()),u=i.getClientByPoint(o.x,o.y),f=u.x,c=u.y,h=i.getClientByPoint(s.x,s.y),A=h.x,P=h.y;Object.values(n).forEach(function(B){var V=B.card;if(V){var $=V.style,ut=od($.left),lt=od($.top),dt=V.getBoundingClientRect(),xt=dt.width,Wt=dt.height,Qt=ut,Zt=lt;ut+xt>A-f&&(Qt=A-f-xt),ut<0&&(Qt=0),lt+Wt>P-c&&(Zt=P-c-Wt),lt<0&&(Zt=0),wi(V,{left:"".concat(Qt,"px"),top:"".concat(Zt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,i;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),h=Object.assign({},o.get("cardCfg")||{},r),A=h.minHeight,P=h.minWidth,B=h.width,V=h.height,$=h.collapsed,ut=$===void 0?!1:$,lt=h.x,dt=h.y,xt=h.title,Wt=h.content,Qt=h.maxTitleLength,Zt=h.defaultBegin,de=uy(h,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),De=o.get("linkGroup"),xe=this.get("rows")||[[]],He=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),ar=He?fy:t.getID(),Fr=s[ar]||{},rn=Fr.card,Zr=Fr.link,Nr=Fr.x,yn=Fr.y,dn=Fr.title,Lr=Fr.content,Yr=this.get("getTitle"),on=this.get("getContent"),sn=this.get("getContentPlaceholder")||function(){return""},_n=this.get("getTitlePlaceHolder")||function(){return""},Ln=sn(t),ti=_n(t),li=Oa(this.getDOMContent(yf({itemId:ar,collapsed:ut,title:((i=dn||xt||(Yr==null?void 0:Yr(t)))===null||i===void 0?void 0:i.substr(0,Qt))||ti,content:Lr||Wt||(on==null?void 0:on(t))||Ln},de))),Hi=(0,l.isNumber)(A)?"".concat(A,"px"):A;wi(li,{minHeight:ut?"unset":Hi,minWidth:(0,l.isNumber)(P)?"".concat(P,"px"):P,height:V,width:B});var ki=!!rn;ki?(Zr==null||Zr.remove(!0),f.replaceChild(li,rn)):f.appendChild(li);var Zi;if(!c){if(Zi=f.getBoundingClientRect()||{},lt!==void 0&&dt!==void 0)Nr=lt,yn=dt;else if(!ki&&!He){var qi=Zi.top,Ca=Zt||{},pa=Ca.left,mf=Ca.right,Mo=mf===void 0?16:mf,bf=Ca.top,Co=bf===void 0?8:bf,Ao=Ca.bottom,Fu=Mo,vs=Co;isNaN(pa)||(Fu=f.scrollWidth-pa),isNaN(Ao)||(vs=f.scrollHeight-Ao);var Hs=(0,l.isNumber)(P)?P:100;Nr=f.scrollWidth-li.scrollWidth-(xe.length-1)*Hs-Fu;var Si=xe[xe.length-1],ji=(Si[Si.length-1]||{}).bbox;yn=(ji==null?void 0:ji.bottom)-qi||vs}wi(li,{position:"absolute",left:"".concat(Nr,"px"),top:"".concat(yn,"px"),cusor:c?"unset":"move"})}this.bindListener(li,ar);var mi=li.getBoundingClientRect();if(!He){var Xi=yg(t,mi,u,this.get("canvas")),ua=this.get("linkStyle");Zr=De.addShape("path",{attrs:yf({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Xi},ua)})}if(s[ar]=yf(yf({},s[ar]||{}),{id:ar,collapsed:ut,card:li,link:Zr,x:Nr,y:yn,cardBBox:mi,content:Lr||Wt,title:dn||xt,contentPlaceholder:Ln,titlePlaceholder:ti,isCanvas:He}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Yn=!isNaN(lt)&&!isNaN(dt);if(!ki&&!He&&!Yn){var Ti=Zi.bottom,Oi=Ti===void 0?0:Ti,qi=Zi.top;xe[xe.length-1].push({id:ar,bbox:mi}),mi.top>Oi-qi-mi.height-16&&xe.push([]),this.set("rows",xe)}}this.updateCardSize(ar);var fa=this.get("onAnnotationChange");fa==null||fa(s[ar],ki?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,i=r.getBoundingClientRect().width,o=getComputedStyle(r),s=od(o.paddingLeft)+od(o.paddingRight);i-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":wi(f,{marginLeft:i?"".concat(i-c,"px"):"0px"});break;case"top":case"bottom":wi(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var i=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!i?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!i}),n[t]=yf(yf({},n[t]),{collapsed:!i})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],i=n.card,o=n.link;wi(i,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],i=n.card,o=n.link,s=this.get("container");s.removeChild(i),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,h=c===void 0?function(){}:c;h(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,h=c===void 0?function(){}:c;h(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),h=c.findById(r);if(h){var A=n.get("itemHighlightState");c.setItemState(h,A,!0)}var P=f[r].link;if(P){var B=n.get("linkHighlightStyle")||{};P.attr(B)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),h=c.findById(r);if(h){var A=n.get("itemHighlightState");c.setItemState(h,A,!1)}var P=f[r].link;if(P){var B=n.get("linkHighlightStyle")||{};Object.keys(B).forEach(function($){P.attr($,void 0),P.attr($,void 0)});var V=n.get("linkStyle");P.attr(V)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var h=n.get("cardCfg").closeType;h==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var i=this.get("editable");i&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,h=c===void 0?20:c;if(f){var A=u.target,P=A.className;if(!(P!=="g6-annotation-title"&&P!=="g6-annotation-content")){var B=P==="g6-annotation-title"?A.getBoundingClientRect():A.parentNode.getBoundingClientRect(),V=B.width,$=B.height,ut=getComputedStyle(A),lt=P==="g6-annotation-title"?"input":"textarea",dt=Oa("<".concat(lt,' class="').concat(P,'-input" type="textarea" style="width:').concat(V,"px; height: ").concat($,'px; min-width: 16px;"/>')),xt=Oa('<div class="'.concat(P,'-input-wrapper" style="width: ').concat(V,"px; height: ").concat($,"px; min-width: 16px; margin-right: ").concat(ut.marginRight,'" />'));xt.appendChild(dt),A.parentNode.replaceChild(xt,A);var Wt=f[r],Qt=Wt.contentPlaceholder,Zt=Wt.titlePlaceholder,de=Wt.content,De=Wt.title,xe=de;P==="g6-annotation-title"?(dt.name="title",dt.maxLength=h,xe=De):dt.name="content",xe?(dt.innerHTML=A.innerHTML,dt.value=A.innerHTML):dt.placeholder=P==="g6-annotation-title"?Zt:Qt,dt.focus(),dt.addEventListener("blur",function(He){dt.value&&(A.innerHTML=dt.value,Wt[dt.name||"title"]=dt.value),xt.parentNode.replaceChild(A,xt),n.updateCardSize(r);var ar=n.get("onAnnotationChange");ar==null||ar(Wt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:od(c.left),top:od(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,h=u.clientY,A=n.get("dragging");if(!(isNaN(c)||isNaN(h)||!A)){var P=A.x,B=A.y,V=A.left,$=A.top,ut=A.card,lt=c-P,dt=h-B;V+=lt,$+=dt;var xt=n.get("graph"),Wt=xt.getPointByCanvas(0,0),Qt=xt.getPointByCanvas(xt.getWidth(),xt.getHeight()),Zt=xt.getClientByPoint(Wt.x,Wt.y),de=Zt.x,De=Zt.y,xe=xt.getClientByPoint(Qt.x,Qt.y),He=xe.x,ar=xe.y,Fr=ut.getBoundingClientRect(),rn=Fr.right-Fr.left,Zr=Fr.bottom-Fr.top;(V>He-de-rn&&lt>0||V<0&&lt<0)&&(V-=lt),($>ar-De-Zr&&dt>0||$<0&&dt<0)&&($-=dt),wi(ut,{left:"".concat(V,"px"),top:"".concat($,"px"),visibility:"hidden"}),P=c,B=h;var Nr=(f[r]||{}).link;if(Nr){var yn=xt.findById(r);Nr.attr("path",yg(yn,Fr,xt,n.get("canvas")))}n.set("dragging",{x:P,y:B,left:V,top:$,card:ut})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var h=n.get("dragging");if(h){var A=h.left,P=h.top,B=h.card;c[r].x=A,c[r].y=P,wi(B,{visibility:"visible"}),n.set("dragging",!1);var V=n.get("rows");V==null||V.forEach(function(ut){for(var lt=ut.length-1;lt>=0;lt--)ut[lt].id===r&&ut.splice(lt,1)});var $=n.get("onAnnotationChange");$==null||$(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,i=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=od(s.marginLeft),f=o.getBoundingClientRect().width;wi(o,{marginRight:"".concat(i-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var i=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var h=yg(r,c.getBoundingClientRect(),o,i);f.attr("path",h)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(i){var o=i.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(i){var o=i.id,s=i.card,u=i.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var i=this.get("cardInfoMap");if(i){var o=r.getID();i[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),i=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,h=u.x,A=u.y,P=u.id,B=u.collapsed,V=u.card;if(!(V&&V.style.display==="none"&&!t)){var $=n.findById(P)||n.get("canvas");s.push({id:P,x:h,y:A,collapsed:B,title:f||(i==null?void 0:i($)),content:c||(o==null?void 0:o($)),visible:V&&V.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(i){var o=i.id,s=i.x,u=i.y,f=i.title,c=i.content,h=i.collapsed,A=i.visible,P=n.findById(o);if(!P&&o===fy&&(P=n.get("canvas")),!P){var B=r.get("cardInfoMap")||{};B[o]=i,r.set("cardInfoMap",B);return}r.toggleAnnotation(P,{x:s,y:u,title:f,content:c,collapsed:h}),A||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var i=n.card,o=n.link;r.removeChild(i),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(pu),gw=pw,yw=function(e,t){var r,n,i,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(h){var A=t[h],P=c.x-A.x,B=c.y-A.y,V=P*P+B*B;o>V&&(o=V,r=c,n=A,i=[f,h])})});var s=20,u=In.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},yg=function(e,t,r,n){var i,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(i=e.getKeyShape)===null||i===void 0?void 0:i.call(e).getBBox(),f=u.minX,c=u.minY,h=u.maxX,A=u.maxY,P=e.getModel(),B=P.x,V=P.y;f+=B,c+=V,h+=B,A+=V,o={left:{x:f,y:(c+A)/2},right:{x:h,y:(c+A)/2},top:{x:(f+h)/2,y:c},bottom:{x:(f+h)/2,y:A}}}Object.keys(o).forEach(function(De){var xe=o[De],He=xe.x,ar=xe.y,Fr=r.getClientByPoint(He,ar);o[De]=n.getPointByClient(Fr.x,Fr.y)});var $=t.top,ut=$===void 0?0:$,lt=t.left,dt=lt===void 0?0:lt,xt=t.right,Wt=xt===void 0?0:xt,Qt=t.bottom,Zt=Qt===void 0?0:Qt,de={left:n.getPointByClient(dt,(ut+Zt)/2),right:n.getPointByClient(Wt,(ut+Zt)/2),top:n.getPointByClient((dt+Wt)/2,ut),bottom:n.getPointByClient((dt+Wt)/2,Zt)};return yw(o,de)},od=function(e){return Number(e.replace(/\s+|px/gi,""))||0},mw={PluginBase:pu,Menu:Pb,Grid:Cb,Minimap:Bb,Bundling:zb,ToolBar:Zb,Tooltip:Qb,Fisheye:jb,TimeBar:Kx,ImageMinimap:tw,EdgeFilterLens:iw,SnapLine:fw,Legend:dw,Annotation:gw},bw=mw,_o=bw;Yi("circle",{options:{size:Jr.defaultNode.size,style:{x:0,y:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=(0,l.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:i,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,h=o.show,A=o.text;if(h){var P="".concat(this.type,"-icon");A?t.shapeMap[P]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:P,name:P,draggable:!0}):t.shapeMap[P]=t.addShape("image",{attrs:(0,b.pi)({x:-f/2,y:-c/2},o),className:P,name:P,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0]/2;if(o){var B="link-point-left";t.shapeMap[B]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P,y:0,r:f/2||c||5}),className:B,name:B,isAnchorPoint:!0})}if(s){var V="link-point-right";t.shapeMap[V]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P,y:0,r:f/2||c||5}),className:V,name:V,isAnchorPoint:!0})}if(i){var $="link-point-top";t.shapeMap[$]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-P,r:f/2||c||5}),className:$,name:$,isAnchorPoint:!0})}if(u){var ut="link-point-bottom";t.shapeMap[ut]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:P,r:f/2||c||5}),className:ut,name:ut,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.deepMix)({},t,r),i=this.getSize(e),o=i[0]/2,s=(0,b.pi)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),i=this.getSize(e),o=(0,b.pi)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(i[0])&&(o.r=i[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("rect",{options:{size:[100,30],style:{radius:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0],B=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=n.width||i[0],s=n.height||i[1],u=(0,b.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||i.width,o[1]=s.attr("height")||i.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,l.mix)({},i,s.attr(),u);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0]/2,B=A[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=i[0]/2,s=i[1]/2,u=(0,b.pi)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("diamond",{options:{size:[80,80],style:{stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0],B=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],i=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getPath(e),o=(0,b.pi)({path:i},n);return o},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("triangle",{options:{size:40,direction:"up",style:{stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,i=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=i.width,h=i.height,A=i.show,P=i.offset,B=i.text;if(A)if(B)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var V=-c/2,$=-h/2;(u==="up"||u==="down")&&($+=P),(u==="left"||u==="right")&&(V+=P),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:V,y:$},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,i=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=i.top,f=i.left,c=i.right,h=i.bottom,A=i.size,P=i.r,B=(0,b._T)(i,["top","left","right","bottom","size","r"]),V=this.getSize(e),$=V[0];if(f){var ut=null,lt=$*Math.sin(1/3*Math.PI),dt=$*Math.sin(1/3*Math.PI);s==="up"?ut=[-dt,lt]:s==="down"?ut=[-dt,-lt]:s==="left"&&(ut=[-dt,dt-lt]),ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:ut[0],y:ut[1],r:A/2||P||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var xt=null,lt=$*Math.sin(1/3*Math.PI),dt=$*Math.sin(1/3*Math.PI);s==="up"?xt=[dt,lt]:s==="down"?xt=[dt,-lt]:s==="right"&&(xt=[dt,dt-lt]),xt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:xt[0],y:xt[1],r:A/2||P||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Wt=null,lt=$*Math.sin(1/3*Math.PI),dt=$*Math.sin(1/3*Math.PI);s==="up"?Wt=[dt-lt,-lt]:s==="left"?Wt=[dt,-lt]:s==="right"&&(Wt=[-dt,-lt]),Wt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:Wt[0],y:Wt[1],r:A/2||P||5}),className:"link-point-top",name:"link-point-top"}))}if(h){var Qt=null,lt=$*Math.sin(1/3*Math.PI),dt=$*Math.sin(1/3*Math.PI);s==="down"?Qt=[-dt+lt,lt]:s==="left"?Qt=[dt,lt]:s==="right"&&(Qt=[-dt,lt]),Qt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:Qt[0],y:Qt[1],r:A/2||P||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),i=n[0],o=i*Math.sin(1/3*Math.PI),s=i*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getPath(e),o=(0,b.pi)({path:i},n);return o},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,i=r.direction,o=e.direction||i,s=t.shapeMap["link-point-left"]||t.find(function(Nr){return Nr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Nr){return Nr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Nr){return Nr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Nr){return Nr.get("className")==="link-point-bottom"}),h=n,A=s||u||f||c;A&&(h=A.attr());var P=(0,l.mix)({},h,e.linkPoints),B=P.fill,V=P.stroke,$=P.lineWidth,ut=P.size/2;ut||(ut=P.r);var lt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},dt=lt.left,xt=lt.right,Wt=lt.top,Qt=lt.bottom,Zt=this.getSize(e),de=Zt[0],De={r:ut,fill:B,stroke:V,lineWidth:$},xe=null,He=de*Math.sin(1/3*Math.PI),ar=de*Math.sin(1/3*Math.PI);o==="up"?xe=[-ar,He]:o==="down"?xe=[-ar,-He]:o==="left"&&(xe=[-ar,ar-He]),xe&&(s?!dt&&dt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,b.pi)((0,b.pi)({},De),{x:xe[0],y:xe[1]})):dt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},De),{x:xe[0],y:xe[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Fr=null;o==="up"?Fr=[ar,He]:o==="down"?Fr=[ar,-He]:o==="right"&&(Fr=[ar,ar-He]),Fr&&(u?!xt&&xt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,b.pi)((0,b.pi)({},De),{x:Fr[0],y:Fr[1]})):xt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},De),{x:Fr[0],y:Fr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var rn=null;o==="up"?rn=[ar-He,-He]:o==="left"?rn=[ar,-He]:o==="right"&&(rn=[-ar,-He]),rn&&(f?!Wt&&Wt!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,b.pi)((0,b.pi)({},De),{x:rn[0],y:rn[1]})):Wt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},De),{x:rn[0],y:rn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Zr=null;o==="down"?Zr=[-ar+He,He]:o==="left"?Zr=[ar,He]:o==="right"&&(Zr=[-ar,He]),Zr&&(c?!Qt&&Qt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,b.pi)((0,b.pi)({},De),{x:Zr[0],y:Zr[1]})):Qt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},De),{x:Zr[0],y:Zr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Yi("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Jr.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Jr.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Jr.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,h=(0,b._T)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,b.pi)({x:-s/2,y:-u/2,height:u},h),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,i=this.getSize(e),o=i[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,h=n.offset,A=n.text,P=(0,b._T)(n,["width","height","x","y","offset","text"]);A?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},P),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,b.pi)((0,b.pi)({},P),{x:f||-o/2+s+h,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,i=this.getSize(e),o=i[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,h=n.offset,A=n.text,P=(0,b._T)(n,["width","height","x","y","offset","text"]);A?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},P),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,b.pi)((0,b.pi)({},P),{x:f||o/2-s+h,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0],B=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,i=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),h=c[0],A=null,P=s.show,B=s.width,V=-h/2+i.offset;P&&(V=-h/2+B+i.offset);var $=i.style,ut=f.style,lt=f.paddingTop;return(0,l.isString)(e.description)?(A=t.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},$),{x:V,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=A,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},ut),{x:V,y:17+(lt||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(A=t.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},$),{x:V,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=A),A},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=n.width||i[0],s=n.height||i[1],u=(0,b.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,i=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),h=c[0],A=c[1],P=t.get("keyShape");P.attr((0,b.pi)((0,b.pi)({},i),{x:-h/2,y:-A/2,width:h,height:A}));var B=t.getContainer(),V=B.shapeMap["rect-logo-icon"]||B.find(function(li){return li.get("className")==="rect-logo-icon"}),$=V?V.attr():{},ut=(0,l.mix)({},$,e.logoIcon),lt=ut.width;lt===void 0&&(lt=this.options.logoIcon.width);var dt=e.logoIcon?e.logoIcon.show:void 0,xt=s.offset,Wt=-h/2+lt+xt;!dt&&dt!==void 0&&(Wt=-h/2+xt);var Qt=B.shapeMap["node-label"]||B.find(function(li){return li.get("className")==="node-label"}),Zt=B.shapeMap["rect-description"]||B.find(function(li){return li.get("className")==="rect-description"});if(e.label)if(!Qt)B.shapeMap["node-label"]=B.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},s.style),{x:Wt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var de=e.labelCfg?e.labelCfg.style:{},De=(0,l.mix)({},Qt.attr(),de);e.label&&(De.text=e.label),De.x=Wt,(0,l.isString)(e.description)&&(De.y=-5),Zt&&(Zt.resetMatrix(),Zt.attr({x:Wt})),Qt.resetMatrix(),Qt.attr(De)}if((0,l.isString)(e.description)){var xe=f.paddingTop;if(!Zt)B.shapeMap["rect-description"]=B.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},f.style),{x:Wt,y:17+(xe||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var de=e.descriptionCfg?e.descriptionCfg.style:{},He=(0,l.mix)({},Zt.attr(),de);(0,l.isString)(e.description)&&(He.text=e.description),He.x=Wt,Zt.resetMatrix(),Zt.attr((0,b.pi)((0,b.pi)({},He),{y:17+(xe||0)}))}}var ar=B.shapeMap["pre-rect"]||B.find(function(li){return li.get("className")==="pre-rect"});if(ar&&!ar.destroyed){var Fr=(0,l.mix)({},ar.attr(),e.preRect);ar.attr((0,b.pi)((0,b.pi)({},Fr),{x:-h/2,y:-A/2,height:A}))}if(V&&!V.destroyed)if(!dt&&dt!==void 0)V.remove(),delete B.shapeMap["pre-rect"];else{var rn=ut.width,Zr=ut.height,Nr=ut.x,yn=ut.y,dn=ut.offset,Lr=(0,b._T)(ut,["width","height","x","y","offset"]);V.attr((0,b.pi)((0,b.pi)({},Lr),{x:Nr||-h/2+rn+dn,y:yn||-Zr/2,width:rn,height:Zr}))}else dt&&this.drawLogoIcon(e,B);var Yr=B.shapeMap["rect-state-icon"]||B.find(function(li){return li.get("className")==="rect-state-icon"}),on=Yr?Yr.attr():{},sn=(0,l.mix)({},on,e.stateIcon);if(Yr){!sn.show&&sn.show!==void 0&&(Yr.remove(),delete B.shapeMap["rect-state-icon"]);var _n=sn.width,Zr=sn.height,Nr=sn.x,yn=sn.y,Ln=sn.offset,ti=(0,b._T)(sn,["width","height","x","y","offset"]);Yr.attr((0,b.pi)((0,b.pi)({},ti),{x:Nr||h/2-_n+Ln,y:yn||-Zr/2,width:_n,height:Zr}))}else sn.show&&this.drawStateIcon(e,B);this.updateLinkPoints(e,B)},getOptions:function(e,t){return t==="move"?e:(0,l.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),Yi("star",{options:{size:60,style:{stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,h=n.r,A=(0,b._T)(n,["top","left","right","leftBottom","rightBottom","size","r"]),P=this.getSize(e),B=P[0];if(s){var V=Math.cos(.1*Math.PI)*B,$=Math.sin((18+72*0)/180*Math.PI)*B;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(i){var V=Math.cos(.5*Math.PI)*B,$=Math.sin((18+72*1)/180*Math.PI)*B;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(o){var V=Math.cos(.9*Math.PI)*B,$=Math.sin((18+72*2)/180*Math.PI)*B;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(u){var V=Math.cos(1.3*Math.PI)*B,$=Math.sin((18+72*3)/180*Math.PI)*B;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var V=Math.cos(1.7*Math.PI)*B,$=Math.sin((18+72*4)/180*Math.PI)*B;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,i=e.innerR||n;return In.getStarPath(r,i)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getPath(e),o=(0,b.pi)({path:i},n);return o},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(He){return He.get("className")==="link-point-left"}),i=t.shapeMap["link-point-right"]||t.find(function(He){return He.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(He){return He.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(He){return He.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(He){return He.get("className")==="link-point-right-bottom"}),f=r,c=n||i||o||s||u;c&&(f=c.attr());var h=(0,l.mix)({},f,e.linkPoints),A=h.fill,P=h.stroke,B=h.lineWidth,V=h.size/2;V||(V=h.r);var $=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ut=$.left,lt=$.right,dt=$.top,xt=$.leftBottom,Wt=$.rightBottom,Qt=this.getSize(e),Zt=Qt[0],de={r:V,fill:A,stroke:P,lineWidth:B},De=Math.cos((18+72*0)/180*Math.PI)*Zt,xe=Math.sin((18+72*0)/180*Math.PI)*Zt;i?!lt&&lt!==void 0?(i.remove(),delete t.shapeMap["link-point-right"]):i.attr((0,b.pi)((0,b.pi)({},de),{x:De,y:-xe})):lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},de),{x:De,y:-xe}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),De=Math.cos((18+72*1)/180*Math.PI)*Zt,xe=Math.sin((18+72*1)/180*Math.PI)*Zt,o?!dt&&dt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,b.pi)((0,b.pi)({},de),{x:De,y:-xe})):dt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},de),{x:De,y:-xe}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),De=Math.cos((18+72*2)/180*Math.PI)*Zt,xe=Math.sin((18+72*2)/180*Math.PI)*Zt,n?!ut&&ut!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,b.pi)((0,b.pi)({},de),{x:De,y:-xe})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},de),{x:De,y:-xe}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),De=Math.cos((18+72*3)/180*Math.PI)*Zt,xe=Math.sin((18+72*3)/180*Math.PI)*Zt,s?!xt&&xt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,b.pi)((0,b.pi)({},de),{x:De,y:-xe})):xt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},de),{x:De,y:-xe}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),De=Math.cos((18+72*4)/180*Math.PI)*Zt,xe=Math.sin((18+72*4)/180*Math.PI)*Zt,u?!Wt&&Wt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,b.pi)((0,b.pi)({},de),{x:De,y:-xe})):Wt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},de),{x:De,y:-xe}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var cy=In.defaultSubjectColors,xv="fan-shape-";Yi("donut",{options:{size:Jr.defaultNode.size,style:{x:0,y:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=(0,l.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,h=o.text;return c&&(h?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Ew(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,i){var o=t.get("keyShape");o.attr((0,b.pi)({},r)),xw(e,t,o),this.updateLabel(e,t,i),n&&this.updateIcon(e,t)}},"circle");var Ew=function(e,t,r){var n=e.donutAttrs,i=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(i).length;if(i&&u>1){var f=ly(i,s),c=f.configs,h=f.totalValue;if(h){var A=hy(r),P=A.lineWidth,B=A.arcR,V=[B,0],$=0;if(u===1){mg(t,{arcR:B,arcBegin:V,beginAngle:$,config:c[0],fanIndex:0,lineWidth:P,totalValue:h,drawWhole:!0});return}for(var ut=0;ut<c.length;ut++){var lt=mg(t,{arcR:B,arcBegin:V,beginAngle:$,config:c[ut],fanIndex:ut,lineWidth:P,totalValue:h});if(lt.shouldEnd)return;V=lt.arcBegin,$=lt.beginAngle}}}},mg=function(e,t){var r=t.arcR,n=t.arcBegin,i=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,h=c===void 0?!1:c,A=t.updateShape,P=A===void 0?void 0:A,B=o.value/f;if(B<.001)return{beginAngle:i,arcBegin:n,shape:void 0,shouldEnd:!1};var V,$,ut;if(h||B>.999)V=[r,1e-4],ut=!0;else{var lt=B*Math.PI*2;$=i+lt,V=[r*Math.cos($),-r*Math.sin($)],ut=lt>Math.PI?1:0}var dt={path:[["M",n[0],n[1]],["A",r,r,0,ut,0,V[0],V[1]],["L",V[0],V[1]]],stroke:o.color||(P==null?void 0:P.attr("stroke"))||cy[s%cy.length],lineWidth:u};return P?P.attr(dt):e.shapeMap["".concat(xv).concat(s)]=e.addShape("path",{attrs:dt,name:"".concat(xv).concat(s),draggable:!0}),{beginAngle:$,arcBegin:V,shape:e.shapeMap["".concat(xv).concat(s)],shouldEnd:h||B>.999}},xw=function(e,t,r){var n=e.donutAttrs,i=e.donutColorMap,o=i===void 0?{}:i,s={},u=t.getContainer();if(n){var f=ly(n,o),c=f.configs,h=f.totalValue;if(h)for(var A=hy(r),P=A.lineWidth,B=A.arcR,V=[B,0],$=0,ut=0;ut<c.length;ut++){var lt="".concat(xv).concat(ut),dt=mg(u,{arcR:B,arcBegin:V,beginAngle:$,config:c[ut],fanIndex:ut,lineWidth:P,totalValue:h,drawWhole:c.length===1,updateShape:u.shapeMap[lt]});if(dt.shape&&(s[lt]=!0),dt.shouldEnd)break;V=dt.arcBegin,$=dt.beginAngle}}var xt=Object.keys(u.shapeMap).filter(function(Wt){return Wt.includes(xv)});xt.forEach(function(Wt){s[Wt]||(u.shapeMap[Wt].remove(!0),delete u.shapeMap[Wt])})},ly=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(i){var o=+e[i];isNaN(o)||(n.push({key:i,value:o,color:t[i]}),r+=o)}),{totalValue:r,configs:n}},hy=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,i=t-r;return{lineWidth:i,arcR:n}},Sp=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},ww=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+i)/2,centerY:(o+s)/2,maxX:i,maxY:s,minX:n,minY:o,height:s-o,width:i-n}},i2=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},bg=function(e){for(var t=[],r={},n=e.length,i=n-1;i>=0;i--){var o=e[i];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},dy=function(e){return bg(e)},a2=function(e,t){return[e,{x:e.x,y:t.y},t]},_p=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},Sw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Eg=function(e,t,r){var n=Sw(t,e);if(n===0){var i=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?i=e.maxX:r.x<t.x?i=e.minX:r.x===t.x&&(o=e.maxY),{x:i,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},vy=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+i)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:i,maxY:o,height:o-n,width:i-r}},xg=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Mp=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},_w=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},Mw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},Cw=function(e,t){return _w(e,t.x).concat(Mw(e,t.y))},wv=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Aw=function(e,t){var r=-2,n=0;return t.forEach(function(i){i&&(e.x===i.x&&(n+=r),e.y===i.y&&(n+=r))}),n},py=function(e,t,r,n,i){return wv(e,t)+wv(e,r)+Aw(e,[t,r,n,i])},Tw=function a(e,t,r,n,i){i===void 0&&(i=0),e.unshift(t[n]),r[n]&&r[n]!==n&&i<=100&&a(e,t,r,r[n],i+1)},o2=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Cp=function(e,t,r,n){var i=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,h=n.x-t.x,A=n.y-t.y,P=i*u-o*s,B=f*A-c*h,V=i*c-o*f,$=s*A-u*h;return P*B<=0&&V*$<=0},wg=function(e,t,r){if(r.width||r.height){var n=xg(r),i=n[0],o=n[1],s=n[2],u=n[3];return Cp(e,t,i,o)||Cp(e,t,i,u)||Cp(e,t,o,s)||Cp(e,t,s,u)}return!1},Iw=function(e,t,r,n){var i=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(wg(o,t,r)||wg(o,t,n))return;i.push(o)}}),bg(i)},Pw=function(e,t,r,n,i,o,s){var u,f=[],c=(u={},u[t.id]=t,u),h={},A={},P={};A[t.id]=0,P[t.id]=py(t,r,t);var B=new my;B.add({id:t.id,value:P[t.id]});var V={};e.forEach(function(Wt){V[Wt.id]=Wt});for(var $;Object.keys(c).length;){var ut=B.minId(!1);if(ut)$=c[ut];else break;if($===r){var lt=[];return Tw(lt,V,h,r.id),lt}delete c[$.id],B.remove($.id),f.push($);var dt=Iw(e,$,n,i),xt=function(Qt){Qt.forEach(function(Zt){if(f.indexOf(Zt)===-1){var de=Zt.id;c[de]||(c[de]=Zt);var De=P[$.id]+wv($,Zt);if(A[de]&&De>=A[de]){B.add({id:de,value:P[de]});return}h[de]=$.id,A[de]=De,P[de]=A[de]+py(Zt,r,t,o,s),B.add({id:de,value:P[de]})}})};xt(dt)}return[t,r]},Ow=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Dw=function(e,t,r,n){var i=wv(e,t),o=wv(r,t);i<n&&(n=i),o<n&&(n=o);var s={x:t.x-n/i*(t.x-e.x),y:t.y-n/i*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},gy=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(i,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Ow(i,s,u)){var f=Dw(i,s,u,t),c=f[0],h=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(h.x," ").concat(h.y)),r.push("L".concat(h.x," ").concat(h.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},yy=function(e,t,r,n,i){var o,s;if(!r||!r.getType())o=Sp(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,h=f.y;o={x:c,y:h,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+h,maxY:u.maxY+h},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Sp(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=Sp(t);else if(n.getType()==="combo"){var A=n.getKeyShape().getBBox();if(A){var P=n.getModel(),B=P.x,V=P.y;s={x:B,y:V,width:A.width,height:A.height,minX:A.minX+B,maxX:A.maxX+B,minY:A.minY+V,maxY:A.maxY+V},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Sp(t)}else s=n&&n.getBBox();var $=_p(o,i),ut=_p(s,i),lt=Eg($,e,t),dt=Eg(ut,t,e),xt=ww([lt,dt]),Wt=vy($,xt),Qt=vy(ut,xt),Zt=[];Zt=Zt.concat(xg(Wt)).concat(xg(Qt));var de={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[xt,Wt,Qt].forEach(function(xe){Zt=Zt.concat(Cw(xe,de).filter(function(He){return Mp(He,$)&&Mp(He,ut)}))}),[{x:lt.x,y:dt.y},{x:dt.x,y:lt.y}].forEach(function(xe){Mp(xe,$)&&Mp(xe,ut)&&Zt.push(xe)}),Zt.unshift(lt),Zt.push(dt),Zt=bg(Zt);var De=Pw(Zt,lt,dt,o,s,e,t);return De.unshift(e),De.push(t),dy(De)},Nw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],i=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?i.push(s):(i=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(i.length>2){var u=e.indexOf(i[1]);u>-1&&e.splice(u,1)}}return e},my=function(){function a(){this.arr=[],this.map={},this.arr=[],this.map={}}return a.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},a.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},a.prototype.remove=function(e){this.map[e]&&delete this.map[e]},a.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},a.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},a.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},a}(),Lw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},kw=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Rw=function(e,t){return[e,t]},Bw=function(e,t,r,n,i){return dy(yy(e,t,r,n,i.offset))},Gw={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Lw,fallbackRoute:Bw},s2={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:kw,fallbackRoute:Rw},Gl=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},Fw=function(e,t,r){var n={};return e.forEach(function(i){if(i)for(var o=_p(i.getBBox(),r),s=Gl(o.minX,t);s<=Gl(o.maxX,t);s+=1)for(var u=Gl(o.minY,t);u<=Gl(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Sg=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},by=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},Ey=function(e,t,r){for(var n=1/0,i=0,o=t.length;i<o;i++){var s=r(e,t[i]);s<n&&(n=s)}return n},xy=function(e,t,r,n,i){var o=[];if(!r)return[e];var s=i.directions,u=i.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,h=_p(f,u);for(var A in h)h[A]=Gl(h[A],i.gridSize);if(c){for(var P=0,B=s;P<B.length;P++)for(var V=B[P],$=[[{x:h.minX,y:h.minY},{x:h.maxX,y:h.minY}],[{x:h.minX,y:h.minY},{x:h.minX,y:h.maxY}],[{x:h.maxX,y:h.minY},{x:h.maxX,y:h.maxY}],[{x:h.minX,y:h.maxY},{x:h.maxX,y:h.maxY}]],A=0;A<4;A++){var ut=$[A],lt=In.getLineIntersect(e,{x:e.x+V.stepX*h.width,y:e.y+V.stepY*h.height},ut[0],ut[1]);lt&&!wg(e,lt,f)&&(lt.id="".concat(lt.x,"|||").concat(lt.y),o.push(lt))}return o}var dt=Eg(h,e,n);return dt.id="".concat(dt.x,"|||").concat(dt.y),[dt]},_g=function(e,t,r,n){var i=Sg(e,t),o=r[e.id];if(!o){var s=Sg(n,e);return by(s,i)}var u=Sg({x:o.x,y:o.y},e);return by(u,i)},Uw=function(e,t,r,n,i,o,s){var u=[n],f=n,c=e.id,h=e.x,A=e.y,P={x:h,y:A,id:c};_g(P,o,t,r)&&(f={x:o.x===n.x?n.x:P.x*s,y:o.y===n.y?n.y:P.y*s},u.unshift(f));for(var B=t[c];B&&B.id!==c;){var V={x:h,y:A,id:c},$={x:B.x,y:B.y,id:B.id},ut=_g($,V,t,r);ut&&(f={x:$.x===V.x?f.x:$.x*s,y:$.y===V.y?f.y:$.y*s},u.unshift(f)),c=$.id,h=$.x,A=$.y,B=t[c]}return u[0].x=h===r.x?i.x:f.x,u[0].y=A===r.y?i.y:f.y,u.unshift(i),u},zw=function(e,t,r,n,i){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,l.deepMix)(Gw,i);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=Fw(o.obstacles.concat([r,n]),u,o.offset),c={x:Gl(e.x,u),y:Gl(e.y,u)},h={x:Gl(t.x,u),y:Gl(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(h.x,"|||").concat(h.y);var A=xy(c,e,r,h,o),P=xy(h,t,n,c,o);A.forEach(function(Lr){delete f[Lr.id]}),P.forEach(function(Lr){delete f[Lr.id]});for(var B={},V={},$={},ut={},lt={},dt=new my,xt=0;xt<A.length;xt++){var Wt=A[xt];B[Wt.id]=Wt,ut[Wt.id]=0,lt[Wt.id]=Ey(Wt,P,o.distFunc),dt.add({id:Wt.id,value:lt[Wt.id]})}var Qt=o.maximumLoops,Zt,de,De,xe,He,ar,Fr=1/0,rn={};for(P.forEach(function(Lr){rn["".concat(Lr.x,"|||").concat(Lr.y)]=!0}),Object.keys(B).forEach(function(Lr){var Yr=B[Lr].id;lt[Yr]<=Fr&&(Fr=lt[Yr],Zt=B[Yr])});Object.keys(B).length>0&&Qt>0;){var Zr=dt.minId((Qt+1)%30===0);if(Zr)Zt=B[Zr];else break;if(rn["".concat(Zt.x,"|||").concat(Zt.y)])return Uw(Zt,$,c,t,e,h,u);delete B[Zt.id],dt.remove(Zt.id),V[Zt.id]=!0;for(var xt=0;xt<o.directions.length;xt++){de=o.directions[xt];var Nr="".concat(Math.round(Zt.x)+de.stepX,"|||").concat(Math.round(Zt.y)+de.stepY);if(De={x:Zt.x+de.stepX,y:Zt.y+de.stepY,id:Nr},!V[Nr]&&(ar=_g(Zt,De,$,c),!(ar>o.maxAllowedDirectionChange)&&!f[Nr])){B[Nr]||(B[Nr]=De);var yn=s[ar];xe=o.distFunc(Zt,De)+(isNaN(yn)?u:yn),He=ut[Zt.id]+xe;var dn=ut[Nr];dn&&He>=dn||($[Nr]=Zt,ut[Nr]=He,lt[Nr]=He+Ey(De,P,o.distFunc),dt.add({id:Nr,value:lt[Nr]}))}}Qt-=1}return o.fallbackRoute(e,t,r,n,o)};Ia("polyline",{options:{color:Jr.defaultEdge.color,size:Jr.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Jr.defaultEdge.style.stroke,lineAppendWidth:Jr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Jr.edgeLabel.style.fill,fontSize:Jr.edgeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,b.pi)({},Jr.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,l.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var i=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[i];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,h=n.radius,A=this.options.routeCfg,P=(0,l.mix)({},A,e.routeCfg);P.offset=n.offset;var B=this.getPath(u,f,c,h,P,!Boolean(s));((0,l.isArray)(B)&&B.length<=1||(0,l.isString)(B)&&B.indexOf("L")===-1)&&(B="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(B="M0 0, L0 0");var V=(0,l.mix)({},Jr.defaultEdge.style,n,{lineWidth:e.size,path:B});return V},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},i=r.shapeMap["edge-shape"]||r.find(function(xt){return xt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var h=i.attr(),A=(0,l.mix)({},n,h,e.style),P=e.sourceNode,B=e.targetNode,V=A.radius,$=this.options.routeCfg,ut=(0,l.mix)({},$,e.routeCfg);ut.offset=A.offset;var lt=this.getPath(c,P,B,V,ut,!Boolean(f));((0,l.isArray)(lt)&&lt.length<=1||(0,l.isString)(lt)&&lt.indexOf("L")===-1)&&(lt="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(lt="M0 0, L0 0"),h.endArrow&&A.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&A.startArrow===!1&&(e.style.startArrow={path:""});var dt=(0,l.mix)(n,i.attr(),{lineWidth:o,path:lt},e.style);i&&i.attr(dt)}},getPath:function(e,t,r,n,i,o){var s=i.offset,u=i.obstacles,f=i.simple;if(!s||e.length>2||o===!1){if(n)return gy(e,n);var c=[];return(0,l.each)(e,function(B,V){V===0?c.push(["M",B.x,B.y]):c.push(["L",B.x,B.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var h=f?yy(e[e.length-1],e[0],r,t,s):zw(e[0],e[e.length-1],t,r,i);if(!h||!h.length)return"M0 0, L0 0";if(n){var A=gy(h,n);return A}h=Nw(h);var P=In.pointsToPolygon(h);return P}},"single-edge");var wy=kl.cloneEvent,Sy=kl.isNaN,_y=Math.abs,Ww=10,Vw=["shift","ctrl","alt","control"],jw={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(Sy(r)||Sy(n))){var i=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(i=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,h=this.scalableRange;c<1&&c>-1&&(c=s*c,h=u*h),(f.minX<=s+c&&f.minX+i>s+c||f.maxX+c>=0&&f.maxX+c+i<0)&&(i=0),(f.minY<=u+h&&f.minY+o>u+h||f.maxY+h>=0&&f.maxY+h+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],i=r[1];n&&i||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,i=n.getEdges(),o=0,s=i.length;o<s;o++){var u=i[o].get("group").get("children");u&&u.forEach(function(dt){dt.set("ori-visibility",dt.get("ori-visibility")||dt.get("visible")),dt.hide()})}for(var f=n.getNodes(),c=0,h=f.length;c<h;c++)for(var A=f[c].getContainer(),P=A.get("children"),B=0,V=P;B<V.length;B++){var $=V[B],ut=$.get("isKeyShape");ut||($.set("ori-visibility",$.get("ori-visibility")||$.get("visible")),$.hide())}}if(typeof window!="undefined"){var lt=this;this.handleDOMContextMenu=function(dt){return lt.onMouseUp(dt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=wy(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(_y(this.origin.x-e.clientX)+_y(this.origin.y-e.clientY)<Ww)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var i=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Zt){return Zt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,h=f.length;c<h;c++){var A=f[c].get("group").get("children");A&&A.forEach(function(Zt){var de=Zt.get("ori-visibility");Zt.set("ori-visibility",void 0),de&&Zt.show()})}if(i>u)for(var P=n.getNodes(),B=0,V=P.length;B<V;B++)for(var $=P[B].getContainer(),ut=$.get("children"),lt=0,dt=ut;lt<dt.length;lt++){var xt=dt[lt],Wt=xt.get("isKeyShape");if(!Wt){var Qt=xt.get("ori-visibility");xt.set("ori-visibility",void 0),Qt&&xt.show()}}}if(!this.dragging){this.origin=null;return}e=wy(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(Vw.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,i=n&&n.isCanvas&&n.isCanvas();if((0,l.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,l.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},Xw={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,b.pi)((0,b.pi)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,b.pi)((0,b.pi)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,i=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),i){var s=i.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),h=f.filter(function(P){var B=P.get("id");return c===B});if(h.length===0?this.targets.push(n):f.length>1?f.forEach(function(P){var B=P.hasLocked();B||t.targets.push(P)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var A=[];this.targets.forEach(function(P){var B=P.getModel(),V=B.x,$=B.y,ut=B.id;A.push({x:V,y:$,id:ut})}),this.set("beforeDragNodes",A)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(P){var B=P.getEdges();B.forEach(function(V){V.isVisible()&&(t.hidenEdge[V.getID()]=!0,V.hide())})}),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var i=n.getModel().comboId;i&&(r[i]=t.graph.findById(i))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){i.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;i.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,l.clone)(i))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(i){var o=i.getModel();o.comboId!==n.id&&r.updateComboTree(i,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,i=r.getModel().comboId,o=i?n.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var s=n.findById(i);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();i!==f.comboId&&n.updateComboTree(u,i)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,i=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,l.debounce)(function(a){var e=a.targets,t=a.graph,r=a.point,n=a.origin,i=a.evt,o=a.updateEdge,s=a.onlyChangeComboSize,u=a.updateParentCombos;e.map(function(f){var c=f.get("model"),h=f.get("id");r[h]||(r[h]={x:c.x||0,y:c.y||0});var A=i.x-n.x+r[h].x,P=i.y-n.y+r[h].y,B={x:A,y:P};o?t.updateItem(f,B,!1):f.updatePosition(B)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var A=e.x-this.origin.x+this.originPoint.minX,P=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:A,y:P})}else{var r=t.get("group"),n=(0,l.deepMix)({},ed.delegateStyle,this.delegateStyle),i=this.calculationGroupPosition(e),o=i.x,s=i.y,u=i.width,f=i.height,c=i.minX,h=i.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:h},this.delegateRect=r.addShape("rect",{attrs:(0,b.pi)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,i=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,h=f.minY,A=f.maxX,P=f.maxY;c<r&&(r=c),h<i&&(i=h),A>n&&(n=A),P>o&&(o=P)}var B=Math.floor(r),V=Math.floor(i),$=Math.ceil(n)-Math.floor(r),ut=Math.ceil(o)-Math.floor(i);return{x:B,y:V,width:$,height:ut,minX:r,minY:i}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,i={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(i[s]=r.findById(s))}),Object.values(i).forEach(function(o){o&&r.updateCombo(o)})}},Yw={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,l.throttle)(function(a,e){var t=a.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(a.item,{event:a,action:"activate"},e))){for(var n=e.activeState,i=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,h=s.length,A=u.length,P=f.length,B=e.inactiveItems||{},V=e.activeItems||{},$=0;$<c;$++){var ut=o[$],lt=ut.getID(),dt=ut.hasState("selected");e.resetSelected&&dt&&r.setItemState(ut,"selected",!1),V[lt]&&(r.setItemState(ut,n,!1),delete V[lt]),i&&!B[lt]&&(r.setItemState(ut,i,!0),B[lt]=ut)}for(var $=0;$<h;$++){var xt=s[$],Wt=xt.getID(),dt=xt.hasState("selected");e.resetSelected&&dt&&r.setItemState(xt,"selected",!1),V[Wt]&&(r.setItemState(xt,n,!1),delete V[Wt]),i&&!B[Wt]&&(r.setItemState(xt,i,!0),B[Wt]=xt)}for(var $=0;$<A;$++){var Qt=u[$],Zt=Qt.getID();V[Zt]&&(r.setItemState(Qt,n,!1),delete V[Zt]),i&&!B[Zt]&&(r.setItemState(Qt,i,!0),B[Zt]=Qt)}for(var $=0;$<P;$++){var de=f[$],De=de.getID();V[De]&&(r.setItemState(de,n,!1),delete V[De]),i&&!B[De]&&(r.setItemState(de,i,!0),B[De]=de)}if(t&&!t.destroyed){i&&(r.setItemState(t,i,!1),delete B[t.getID()]),V[t.getID()]||(r.setItemState(t,n,!0),V[t.getID()]=t);for(var xe=t.getEdges(),He=xe.length,$=0;$<He;$++){var Qt=xe[$],Zt=Qt.getID(),ar=void 0;Qt.getSource()===t?ar=Qt.getTarget():ar=Qt.getSource();var Fr=ar.getID();i&&B[Fr]&&(r.setItemState(ar,i,!1),delete B[Fr]),V[Fr]||(r.setItemState(ar,n,!0),V[Fr]=ar),B[Zt]&&(r.setItemState(Qt,i,!1),delete B[Zt]),V[Zt]||(r.setItemState(Qt,n,!0),V[Zt]=Qt),Qt.toFront()}}e.activeItems=V,e.inactiveItems=B,r.emit("afteractivaterelations",{item:a.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,l.throttle)(function(a,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(a.item,{event:a,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,i=e.activeItems||{},o=e.inactiveItems||{};Object.values(i).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:a.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Ap=Math.min,My=Math.max,Cy=Math.abs,Ay="shift",Hw=["drag","shift","ctrl","alt","control"],Zw={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Ay,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Hw.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ay,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),i=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),i.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,i){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=i},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,i=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(i.x,i.y),h=Ap(f.x,c.x),A=My(f.x,c.x),P=Ap(f.y,c.y),B=My(f.y,c.y),V=[],$=[];n.getNodes().forEach(function(dt){if(dt.isVisible()&&s(dt,h,A,P,B)&&o(dt,"select",t)){V.push(dt);var xt=dt.getModel();$.push(xt.id),n.setItemState(dt,u,!0)}});var ut=[];this.includeEdges&&V.forEach(function(dt){var xt=dt.getOutEdges();xt.forEach(function(Wt){if(Wt.isVisible()){var Qt=Wt.getModel(),Zt=Qt.source,de=Qt.target;$.includes(Zt)&&$.includes(de)&&o(Wt,"select",t)&&(ut.push(Wt),n.setItemState(Wt,t.selectedState,!0))}})});var lt=[];this.includeCombos&&n.getCombos().forEach(function(dt){if(dt.isVisible()&&s(dt,h,A,P,B)&&o(dt,"select",t)){lt.push(dt);var xt=dt.getModel();$.push(xt.id),n.setItemState(dt,u,!0)}}),this.selectedEdges=ut,this.selectedNodes=V,this.selectedCombos=lt,this.onSelect&&this.onSelect(V,ut,lt),n.emit("nodeselectchange",{selectedItems:{nodes:V,edges:ut,combos:lt},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:Cy(e.canvasX-t.x),height:Cy(e.canvasY-t.y),x:Ap(e.canvasX,t.x),y:Ap(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Ty="shift",Kw=["shift","ctrl","alt","control"],$w={getDefaultCfg:function(){return{multiple:!0,trigger:Ty,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Kw.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Ty,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),i=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=i.findAllByState("node",t.selectedState).concat(i.findAllByState("edge",t.selectedState)).concat(i.findAllByState("combo",t.selectedState));(0,l.each)(c,function(V){V!==r&&i.setItemState(V,t.selectedState,!1)})}var h=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!h){var A=i.findAllByState("node",t.selectedState),P=i.findAllByState("edge",t.selectedState),B=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:A,edges:P,combos:B},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&i.setItemState(r,t.selectedState,!1);var A=i.findAllByState("node",t.selectedState),P=i.findAllByState("edge",t.selectedState),B=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:r,selectedItems:{nodes:A,edges:P,combos:B},select:!1})}else{u(e,t)&&i.setItemState(r,t.selectedState,!0);var A=i.findAllByState("node",t.selectedState),P=i.findAllByState("edge",t.selectedState),B=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:r,selectedItems:{nodes:A,edges:P,combos:B},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,i=r.shouldBegin;if(i(e,this)){var o=n.findAllByState("node",this.selectedState);(0,l.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,l.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,l.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},Qw=zt,Iy=.05,Jw={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var i=function(V,$){return Math.hypot($.x-V.x,$.y-V.y)},o=i({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),h=this.get("animateCfg"),A=this.graph.get("canvas"),P=A.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:P.x,y:P.y},c,h),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,i=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,h=f;e.wheelDelta<0?c=1-Iy*u:c=1/(1-Iy*u),h=f*c;var A=this.get("minZoom")||n.get("minZoom"),P=this.get("maxZoom")||n.get("maxZoom");h>P?h=P:h<A&&(h=A);var B=this.get("enableOptimize");if(B){var V=this.get("optimizeZoom"),$=this.get("optimized"),ut=n.getNodes(),lt=n.getEdges(),dt=ut.length,xt=lt.length;if(!$){for(var Wt=0;Wt<dt;Wt++){var Qt=ut[Wt];if(!Qt.destroyed)for(var Zt=Qt.get("group").get("children"),de=Zt.length,De=0;De<de;De++){var xe=Zt[De];!xe.destoryed&&!xe.get("isKeyShape")&&(xe.set("ori-visibility",xe.get("ori-visibility")||xe.get("visible")),xe.hide())}}for(var He=0;He<xt;He++)for(var ar=lt[He],Zt=ar.get("group").get("children"),de=Zt.length,De=0;De<de;De++){var xe=Zt[De];xe.set("ori-visibility",xe.get("ori-visibility")||xe.get("visible")),xe.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Fr=setTimeout(function(){var Si=n.getZoom(),ji=t.get("optimized");if(ji){t.set("optimized",!1);for(var mi=0;mi<dt;mi++){var Xi=ut[mi],ua=Xi.get("group").get("children"),Yn=ua.length;if(Si<V){var Ti=Xi.getKeyShape(),Oi=Ti.get("ori-visibility");Ti.set("ori-visibility",void 0),Oi&&Ti.show()}else for(var fa=0;fa<Yn;fa++){var Ni=ua[fa],Oi=Ni.get("ori-visibility");Ni.set("ori-visibility",void 0),!Ni.get("visible")&&Oi&&Oi&&Ni.show()}}for(var Ui=0;Ui<xt;Ui++){var Ba=lt[Ui],ua=Ba.get("group").get("children"),Yn=ua.length;if(Si<V){var Ti=Ba.getKeyShape(),Oi=Ti.get("ori-visibility");Ti.set("ori-visibility",void 0),Oi&&Ti.show()}else for(var fa=0;fa<Yn;fa++){var Ni=ua[fa];if(!Ni.get("visible")){var Oi=Ni.get("ori-visibility");Ni.set("ori-visibility",void 0),Oi&&Ni.show()}}}}},100);this.set("timeout",Fr)}if(f<=1){var rn=void 0,Zr=void 0;if(i.fixAll||i.fixLineWidth||i.fixLabel){rn=n.findAllByState("node",i.fixState),Zr=n.findAllByState("edge",i.fixState);for(var Nr=f/h,yn=rn.length,dn=0;dn<yn;dn++){var Qt=rn[dn],Lr=Qt.getContainer(),Yr=Qt.getModel(),on=Qt.getOriginStyle(),sn=Qt.getStateStyle(i.fixState),_n=Qt.get("shapeFactory").getShape(Yr.type).getStateStyle(i.fixState,Qt)[i.fixState];if(i.fixAll){if(h<=1){var Ln=(0,l.clone)(Lr.getMatrix());Ln||(Ln=[1,0,0,0,1,0,0,0,1]);var ti=Qt.getModel(),li=ti.x,Hi=ti.y;Ln=Qw(Ln,[["t",-li,-Hi],["s",Nr,Nr],["t",li,Hi]]),Lr.setMatrix(Ln)}}else for(var Zt=Lr.get("children"),de=Zt.length,De=0;De<de;De++){var xe=Zt[De],ki=void 0,Zi=void 0;if(i.fixLabel){var qi=xe.get("type");if(qi==="text"){ki=xe.attr("fontSize")||12;var Ca=sn[xe.get("name")],pa=_n[xe.get("name")],mf=Ca?Ca.fontSize:12,Mo=pa?pa.fontSize:12,bf=mf||Mo||12;if(h<=1&&xe.attr("fontSize",bf/h),Zi)break}}if(i.fixLineWidth&&xe.get("isKeyShape")){Zi=xe.attr("lineWidth")||0;var Co=sn.lineWidth||_n.lineWidth||on.lineWidth||0;if(h<=1&&xe.attr("lineWidth",Co/h),ki)break}}}for(var Ao=Zr.length,Fu=0;Fu<Ao;Fu++)for(var ar=Zr[Fu],Lr=ar.getContainer(),Zt=Lr.get("children"),Yr=ar.getModel(),sn=ar.getStateStyle(i.fixState),_n=ar.get("shapeFactory").getShape(Yr.type).getStateStyle(i.fixState,ar)[i.fixState],de=Zt.length,De=0;De<de;De++){var xe=Zt[De],ki=void 0,Zi=void 0;if(i.fixLabel||i.fixAll){var qi=xe.get("type");if(qi==="text"){ki=xe.attr("fontSize")||12;var Ca=sn[xe.get("name")],pa=_n[xe.get("name")],mf=Ca?Ca.fontSize:12,Mo=pa?pa.fontSize:12,bf=mf||Mo||12;if(h<=1&&xe.attr("fontSize",bf/h),Zi)break}}if((i.fixLineWidth||i.fixAll)&&xe.get("isKeyShape")){Zi=xe.attr("lineWidth")||0;var Co=sn.lineWidth||_n.lineWidth||1;if(h<=1&&xe.attr("lineWidth",Co/h),ki)break}}}}var vs=this.get("animate"),Hs=this.get("animateCfg");n.zoomTo(h,{x:s.x,y:s.y},vs,Hs),n.emit("wheelzoom",e)}}},Py={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,wi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){wi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,i=r.height,o=r.container,s=r.graph;if(!t(e,this)){wi(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,h=f.y,A=o.getBoundingClientRect();c>n/2?c-=A.width:c+=this.offset,h>i/2?h-=A.height:h+=this.offset;var P="".concat(c,"px"),B="".concat(h,"px");wi(this.container,{left:P,top:B,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Oa('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),wi(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},qw=(0,b.pi)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Py),tS=(0,b.pi)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Py),Oy="click",eS=["click","dblclick"],rS={getDefaultCfg:function(){return{trigger:Oy,onChange:function(){}}},getEvents:function(){var e,t;return eS.includes(this.trigger)?t=this.trigger:(t=Oy,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var i=!r.collapsed;this.shouldBegin(e,i,this)&&(r.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:e.item,collapsed:i}),this.shouldUpdate(e,i,this)&&(this.onChange(t,i,this),this.graph.layout()))}}}}},nS=kl.calculationItemsBBox,iS=function a(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,l.each)(r,function(n){a(n,t)})}},aS={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var i=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=i.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=i;var u=[];this.targets.forEach(function(f){var c=f.getModel(),h=c.x,A=c.y,P=c.id;u.push({x:h,y:A,id:P})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var h=r.findById(c.parentId);h&&r.setItemState(h,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],iS(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,i=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,h=o.filter(function(A){var P=A.getModel();return i.parentId,P.id!==i.id&&!t.currentItemChildCombos.includes(P.id)});h.map(function(A){var P=A.getBBox(),B=P.centerX,V=P.centerY,$=P.width,ut=u-B,lt=f-V,dt=2*Math.sqrt(ut*ut+lt*lt);c+$-dt>.8*c?r.setItemState(A,t.activeState,!0):r.setItemState(A,t.activeState,!1)})}(0,l.each)(this.targets,function(A){t.updateCombo(A,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,l.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,i=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==i.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,i.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(i){if(this.activeState){var u=r.findById(i);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):i!==f.getID()&&(s=r.findById(i),i!==f.getModel().parentId&&r.updateComboTree(f,i,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var i=n.get("delegateGroup");i.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,h=f.y,A=f.id;s.after.combos.push({x:c,y:h,id:A}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var i=e.get("combos");(0,l.each)(i,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,l.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(i,o){return i.destroyed?!1:(i.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(i){return i.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,i=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),i.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var A=e.x-this.origin.x+this.originPoint.minX,P=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:A,y:P})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=nS(this.targets):n=this.targets[0].getBBox();var i=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:i,y:o,width:s,height:u,minX:f,minY:c};var h=(0,b.pi)((0,b.pi)({},ed.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,b.pi)({width:n.width,height:n.height,x:n.x,y:n.y},h),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(i){var o=i.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(i){i&&t.updateCombo(i)})}},Dy="dblclick",oS=["click","dblclick"],sS={getDefaultCfg:function(){return{trigger:Dy,relayout:!0}},getEvents:function(){var e,t;return oS.includes(this.trigger)?t=this.trigger:(t=Dy,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,i=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),i&&n.get("layout")?n.layout():n.refreshPositions())}}},uS=kl.isPolygonsIntersect,fS=kl.pathToPoints,Ny="shift",cS=["drag","shift","ctrl","alt","control"],lS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=fS(n.attr("path"));else{var i=n.getCanvasBBox();r=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return uS(t,r)},hS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:Ny,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return cS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ny,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,i=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!i||i({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,i=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&lS(c,i)&&n(c,"select",e)){s.push(c);var h=c.getModel();u.push(h.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var h=c.getOutEdges();h.forEach(function(A){if(A.isVisible()){var P=A.getModel(),B=P.source,V=P.target;u.includes(B)&&u.includes(V)&&n(A,"select",e)&&(f.push(A),r.setItemState(A,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,b.pi)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Ly="click",dS=["click","drag"],ky=void 0,vS=["shift","ctrl","control","alt","meta",void 0],pS={getDefaultCfg:function(){return{trigger:Ly,key:ky,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;dS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Ly,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&vS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=ky,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,i=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,l.isFunction)(o)?s=o({source:t.source,target:i.id},t):s=t.edgeConfig;var u=(0,b.pi)({target:i.id},s);if(t.source===i.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,b.pi)((0,b.pi)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,l.isFunction)(o)?s=o({source:i.id,target:i.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,b.pi)({source:i.id,target:i.id},s),!1),t.source=i.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var i=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&i.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},Ry="ctrl",gS=["shift","ctrl","alt","control"],yS="1",mS={getDefaultCfg:function(){return{trigger:Ry,combinedKey:yS,functionName:"fitView",functionParams:[]}},getEvents:function(){return gS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ry,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},bS=["shift","ctrl","alt","control","meta"],ES={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||bS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var i=n.some(function(Yr){return e["".concat(Yr,"Key")]});if(i){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var h=this.graph.get("width"),A=this.graph.get("height"),P=this.graph.get("canvas").getCanvasBBox(),B=this.scalableRange,V=this.scalableRange;B<1&&B>-1&&(B=h*B,V=A*V);var $=P.minX,ut=P.maxX,lt=P.minY,dt=P.maxY;f>0?ut<-B?f=0:ut-f<-B&&(f=ut+B):f<0&&($>h+B?f=0:$-f>h+B&&(f=$-(h+B))),c>0?dt<-V?c=0:dt-c<-V&&(c=dt+V):c<0&&(lt>A+V?c=0:lt-c>A+V&&(c=lt-(A+V))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var xt=this.get("enableOptimize");if(xt){var Wt=this.get("optimizeZoom"),Qt=this.get("optimized"),Zt=r.getNodes(),de=r.getEdges(),De=Zt.length,xe=de.length;if(!Qt){for(var He=0;He<De;He++){var ar=Zt[He];if(!ar.destroyed)for(var Fr=ar.get("group").get("children"),rn=Fr.length,Zr=0;Zr<rn;Zr++){var Nr=Fr[Zr];!Nr.destoryed&&!Nr.get("isKeyShape")&&(Nr.set("ori-visibility",Nr.get("ori-visibility")||Nr.get("visible")),Nr.hide())}}for(var yn=0;yn<xe;yn++)for(var dn=de[yn],Fr=dn.get("group").get("children"),rn=Fr.length,Zr=0;Zr<rn;Zr++){var Nr=Fr[Zr];Nr.set("ori-visibility",Nr.get("ori-visibility")||Nr.get("visible")),Nr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Lr=setTimeout(function(){var Yr=r.getZoom(),on=t.get("optimized");if(on){t.set("optimized",!1);for(var sn=0;sn<De;sn++){var _n=Zt[sn],Ln=_n.get("group").get("children"),ti=Ln.length;if(Yr<Wt){var li=_n.getKeyShape(),Hi=li.get("ori-visibility");Hi&&li.show()}else for(var ki=0;ki<ti;ki++){var Zi=Ln[ki],Hi=Zi.get("ori-visibility");!Zi.get("visible")&&Hi&&Hi&&Zi.show()}}for(var qi=0;qi<xe;qi++){var Ca=de[qi],Ln=Ca.get("group").get("children"),ti=Ln.length;if(Yr<Wt){var li=Ca.getKeyShape(),Hi=li.get("ori-visibility");Hi&&li.show()}else for(var ki=0;ki<ti;ki++){var Zi=Ln[ki];if(!Zi.get("visible")){var Hi=Zi.get("ori-visibility");Hi&&Zi.show()}}}}},100);this.set("timeout",Lr)}}},allowDrag:function(e){var t,r,n=e.target,i=n&&n.isCanvas&&n.isCanvas();if((0,l.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,l.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},xS={"drag-canvas":jw,"zoom-canvas":Jw,"drag-node":Xw,"activate-relations":Yw,"brush-select":Zw,"click-select":$w,"lasso-select":hS,tooltip:qw,"edge-tooltip":tS,"collapse-expand":rS,"drag-combo":aS,"collapse-expand-combo":sS,"create-edge":pS,"shortcuts-call":mS,"scroll-canvas":ES};(0,l.each)(xS,function(a,e){Pa(e,a)});var wS=(0,b.pi)((0,b.pi)({},x),tc),u2=_o.Grid,f2=_o.Minimap,c2=_o.Bundling,l2=_o.Menu,SS=_o.Fisheye,h2=_o.ToolBar,d2=_o.Tooltip,_S=_o.TimeBar,MS=_o.ImageMinimap,CS=_o.EdgeFilterLens,AS=_o.SnapLine,v2=_o.Legend,TS=_o.Annotation,By={version:ed.version,Graph:v0,TreeGraph:wb,Util:kl,Layout:Pi.Layouts,TreeLayout:rb,registerLayout:nb,Global:ed,registerBehavior:Pa,registerCombo:ra,registerEdge:Ia,registerNode:Yi,Minimap:_o.Minimap,Grid:_o.Grid,Bundling:_o.Bundling,Menu:_o.Menu,ToolBar:_o.ToolBar,Tooltip:_o.Tooltip,Legend:_o.Legend,TimeBar:_S,SnapLine:AS,Fisheye:SS,ImageMinimap:MS,EdgeFilterLens:CS,Annotation:TS,Algorithm:wS,Arrow:Ir,Marker:Dr,Shape:en};By.version="4.8.7";var IS=By,p2="4.8.7"},20156:function(le,S,M){"use strict";M.r(S),M.d(S,{Graph:function(){return et},GraphWithEvent:function(){return re},algorithm:function(){return x},comparision:function(){return k},essence:function(){return z},generate:function(){return E}});var x={};M.r(x),M.d(x,{components:function(){return Xt},dfs:function(){return Kt},dijkstra:function(){return pe},dijkstraAll:function(){return Re},findCycles:function(){return Le},floydWarshall:function(){return Pt},isAcyclic:function(){return Cn},postorder:function(){return bi},preorder:function(){return Hn},prim:function(){return Dt},tarjan:function(){return Ve},topsort:function(){return Bn}});var z={};M.r(z),M.d(z,{hasSelfLoop:function(){return qe},isGraph:function(){return sr},isNullGraph:function(){return Fe},isSimpleGraph:function(){return ge}});var k={};M.r(k),M.d(k,{containAllSameEdges:function(){return Ht},containAllSameNodes:function(){return Bt},containSameEdges:function(){return H},containSameNodes:function(){return Lt},getSameEdges:function(){return F},getSameNodes:function(){return G},isGraphComplement:function(){return _r},isGraphContainsAnother:function(){return he},isGraphOptionSame:function(){return ot},isGraphSame:function(){return Yt}});var E={};M.r(E),M.d(E,{getGraphComplement:function(){return Er}});var N;(function(ye){ye.DEFAULT_EDGE_NAME="\0",ye.GRAPH_NODE="\0",ye.EDGE_KEY_DELIM=""})(N||(N={}));function I(ye,Ft){var ne=ye.get(Ft)||0;ye.set(Ft,ne+1)}function m(ye,Ft){var ne=ye.get(Ft);ne!==void 0&&(ne=ne-1,ne>0?ye.set(Ft,ne):ye.delete(Ft))}function y(ye,Ft,ne,Pe){var Ce=String(Ft),Ue=String(ne);if(!ye&&Ce>Ue){var Xe=Ce;Ce=Ue,Ue=Xe}return Ce+N.EDGE_KEY_DELIM+Ue+N.EDGE_KEY_DELIM+(Pe===void 0?N.DEFAULT_EDGE_NAME:Pe)}function v(ye,Ft,ne,Pe){var Ce=String(Ft),Ue=String(ne),Xe={v:Ft,w:ne};if(!ye&&Ce>Ue){var Wr=Xe.v;Xe.v=Xe.w,Xe.w=Wr}return Pe!==void 0&&(Xe.name=Pe),Xe}function p(ye,Ft){return y(ye,Ft.v,Ft.w,Ft.name)}function g(ye){return typeof ye=="function"}var T=function(Ft){return Ft.nodes().map(function(ne){var Pe=Ft.node(ne),Ce=Ft.parent(ne),Ue={id:ne,value:Pe,parent:Ce};return Ue.value===void 0&&delete Ue.value,Ue.parent===void 0&&delete Ue.parent,Ue})},w=function(Ft){return Ft.edges().map(function(ne){var Pe=Ft.edge(ne),Ce={v:ne.v,w:ne.w,value:Pe,name:ne.name};return Ce.name===void 0&&delete Ce.name,Ce.value===void 0&&delete Ce.value,Ce})},C=function(Ft){var ne={options:{directed:Ft.isDirected(),multigraph:Ft.isMultigraph(),compound:Ft.isCompound()},nodes:T(Ft),edges:w(Ft),value:Ft.graph()};return ne.value===void 0&&delete ne.value,ne},O=function(Ft){var ne=new et(Ft.options);return Ft.value!==void 0&&ne.setGraph(Ft.value),Ft.nodes.forEach(function(Pe){ne.setNode(Pe.id,Pe.value),Pe.parent&&ne.setParent(Pe.id,Pe.parent)}),Ft.edges.forEach(function(Pe){ne.setEdge(Pe.v,Pe.w,Pe.value,Pe.name)}),ne};function b(ye,Ft){var ne=Object.keys(ye);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(ye);Ft&&(Pe=Pe.filter(function(Ce){return Object.getOwnPropertyDescriptor(ye,Ce).enumerable})),ne.push.apply(ne,Pe)}return ne}function l(ye){for(var Ft=1;Ft<arguments.length;Ft++){var ne=arguments[Ft]!=null?arguments[Ft]:{};Ft%2?b(Object(ne),!0).forEach(function(Pe){K(ye,Pe,ne[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(ne)):b(Object(ne)).forEach(function(Pe){Object.defineProperty(ye,Pe,Object.getOwnPropertyDescriptor(ne,Pe))})}return ye}function K(ye,Ft,ne){return Ft in ye?Object.defineProperty(ye,Ft,{value:ne,enumerable:!0,configurable:!0,writable:!0}):ye[Ft]=ne,ye}function Z(ye,Ft){if(!(ye instanceof Ft))throw new TypeError("Cannot call a class as a function")}function X(ye,Ft){for(var ne=0;ne<Ft.length;ne++){var Pe=Ft[ne];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ye,Pe.key,Pe)}}function W(ye,Ft,ne){return Ft&&X(ye.prototype,Ft),ne&&X(ye,ne),Object.defineProperty(ye,"prototype",{writable:!1}),ye}var U={compound:!1,multigraph:!1,directed:!0},et=function(){function ye(){var Ft=this,ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Z(this,ye),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=N.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Ft.directed},this.isMultigraph=function(){return Ft.multigraph},this.isCompound=function(){return Ft.compound},this.setGraph=function(Ce){return Ft.label=Ce,Ft},this.graph=function(){return Ft.label},this.setDefaultNodeLabel=function(Ce){return g(Ce)?Ft.defaultNodeLabelFn=Ce:Ft.defaultNodeLabelFn=function(){return Ce},Ft},this.nodeCount=function(){return Ft.nodeCountNum},this.node=function(Ce){return Ft.nodesLabelMap.get(Ce)},this.nodes=function(){return Array.from(Ft.nodesLabelMap.keys())},this.sources=function(){return Ft.nodes().filter(function(Ce){var Ue;return!(!((Ue=Ft.inEdgesMap.get(Ce))===null||Ue===void 0)&&Ue.size)})},this.sinks=function(){return Ft.nodes().filter(function(Ce){var Ue;return!(!((Ue=Ft.outEdgesMap.get(Ce))===null||Ue===void 0)&&Ue.size)})},this.setNodes=function(Ce,Ue){return Ce.map(function(Xe){return Ft.setNode(Xe,Ue)}),Ft},this.hasNode=function(Ce){return Ft.nodesLabelMap.has(Ce)},this.checkCompound=function(){if(!Ft.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(Ce){if(Ft.isCompound()){var Ue,Xe=(Ue=Ft.parentMap)===null||Ue===void 0?void 0:Ue.get(Ce);if(Xe!==Ft.GRAPH_NODE)return Xe}},this.removeFromParentsChildList=function(Ce){var Ue=Ft.parentMap.get(Ce);Ft.childrenMap.get(Ue).delete(Ce)},this.setParent=function(Ce,Ue){var Xe,Wr;Ft.checkCompound();for(var $r=Ue===void 0?Ft.GRAPH_NODE:Ue,mn=Ft.parent($r);mn;){if(Ce===mn)throw new Error("Setting "+Ue+" as parent of "+Ce+" would create a cycle");mn=Ft.parent(mn)}Ue&&Ft.setNode(Ue),Ft.setNode(Ce),Ft.removeFromParentsChildList(Ce),(Xe=Ft.parentMap)===null||Xe===void 0||Xe.set(Ce,$r);var Nn=Ft.childrenMap.get($r);return Nn.set(Ce,!0),(Wr=Ft.childrenMap)===null||Wr===void 0||Wr.set($r,Nn),Ft},this.children=function(Ce){var Ue=Ce===void 0?Ft.GRAPH_NODE:Ce;if(Ft.isCompound()){var Xe,Wr=(Xe=Ft.childrenMap)===null||Xe===void 0?void 0:Xe.get(Ue);return Wr?Array.from(Wr.keys()):void 0}if(Ue===Ft.GRAPH_NODE)return Ft.nodes();if(Ce&&Ft.hasNode(Ce))return[]},this.predecessors=function(Ce){var Ue=Ft.predecessorsMap.get(Ce);return Ue?Array.from(Ue.keys()):void 0},this.successors=function(Ce){var Ue=Ft.successorsMap.get(Ce);return Ue?Array.from(Ue.keys()):void 0},this.neighbors=function(Ce){var Ue;if(Ft.hasNode(Ce))return Array.from(new Set((Ue=Ft.predecessors(Ce))===null||Ue===void 0?void 0:Ue.concat(Ft.successors(Ce))))},this.isLeaf=function(Ce){var Ue;if(Ft.isDirected()){var Xe;return!(!((Xe=Ft.successors(Ce))===null||Xe===void 0)&&Xe.length)}return!(!((Ue=Ft.neighbors(Ce))===null||Ue===void 0)&&Ue.length)},this.filterNodes=function(Ce){var Ue=Ft.directed,Xe=Ft.multigraph,Wr=Ft.compound,$r=new ye({directed:Ue,multigraph:Xe,compound:Wr});if($r.setGraph(Ft.graph()),Ft.nodes().forEach(function(Nn){Ce(Nn)&&$r.setNode(Nn,Ft.node(Nn))}),Ft.edges().forEach(function(Nn){$r.hasNode(Nn.v)&&$r.hasNode(Nn.w)&&$r.setEdgeObj(Nn,Ft.edge(Nn))}),Wr){var mn=function(kn){for(var Jn=Ft.parent(kn);Jn!==void 0&&!$r.hasNode(Jn);)Jn=Ft.parent(Jn);return Jn};$r.nodes().forEach(function(Nn){$r.setParent(Nn,mn(Nn))})}return $r},this.setDefaultEdgeLabel=function(Ce){return g(Ce)?Ft.defaultEdgeLabelFn=Ce:Ft.defaultEdgeLabelFn=function(){return Ce},Ft},this.edgeCount=function(){return Ft.edgeCountNum},this.setEdgeObj=function(Ce,Ue){return Ft.setEdge(Ce.v,Ce.w,Ue,Ce.name)},this.setPath=function(Ce,Ue){return Ce.reduce(function(Xe,Wr){return Ft.setEdge(Xe,Wr,Ue),Wr}),Ft},this.edgeFromArgs=function(Ce,Ue,Xe){return Ft.edge({v:Ce,w:Ue,name:Xe})},this.edge=function(Ce){return Ft.edgesLabelsMap.get(p(Ft.isDirected(),Ce))},this.hasEdge=function(Ce,Ue,Xe){return Ft.edgesLabelsMap.has(p(Ft.isDirected(),{v:Ce,w:Ue,name:Xe}))},this.removeEdgeObj=function(Ce){var Ue=Ce.v,Xe=Ce.w,Wr=Ce.name;return Ft.removeEdge(Ue,Xe,Wr)},this.edges=function(){return Array.from(Ft.edgesMap.values())},this.inEdges=function(Ce,Ue){var Xe=Ft.inEdgesMap.get(Ce);if(Xe)return Array.from(Xe.values()).filter(function(Wr){return!Ue||Wr.v===Ue})},this.outEdges=function(Ce,Ue){var Xe=Ft.outEdgesMap.get(Ce);if(Xe)return Array.from(Xe.values()).filter(function(Wr){return!Ue||Wr.w===Ue})},this.nodeEdges=function(Ce,Ue){var Xe;if(Ft.hasNode(Ce))return(Xe=Ft.inEdges(Ce,Ue))===null||Xe===void 0?void 0:Xe.concat(Ft.outEdges(Ce,Ue))},this.toJSON=function(){return C(Ft)},this.nodeInDegree=function(Ce){var Ue=Ft.inEdgesMap.get(Ce);return Ue?Ue.size:0},this.nodeOutDegree=function(Ce){var Ue=Ft.outEdgesMap.get(Ce);return Ue?Ue.size:0},this.nodeDegree=function(Ce){return Ft.nodeInDegree(Ce)+Ft.nodeOutDegree(Ce)},this.source=function(Ce){return Ce.v},this.target=function(Ce){return Ce.w};var Pe=l(l({},U),ne);this.compound=Pe.compound,this.directed=Pe.directed,this.multigraph=Pe.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return W(ye,[{key:"setNode",value:function(ne,Pe){var Ce=this.nodesLabelMap,Ue=this.defaultNodeLabelFn,Xe=this.isCompound,Wr=this.parentMap,$r=this.childrenMap,mn=this.inEdgesMap,Nn=this.outEdgesMap,kn=this.predecessorsMap,Jn=this.successorsMap;if(Ce.has(ne))return Pe!==void 0&&Ce.set(ne,Pe),this;if(Ce.set(ne,Pe||Ue(ne)),Xe()){var ri;Wr==null||Wr.set(ne,this.GRAPH_NODE),$r==null||$r.set(ne,new Map),$r!=null&&$r.has(this.GRAPH_NODE)||$r==null||$r.set(this.GRAPH_NODE,new Map),$r==null||(ri=$r.get(this.GRAPH_NODE))===null||ri===void 0||ri.set(ne,!0)}return[mn,Nn,kn,Jn].forEach(function(Ri){return Ri.set(ne,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ne){var Pe=this;if(this.hasNode(ne)){var Ce=function(Ki){Pe.removeEdge(Ki.v,Ki.w,Ki.name)},Ue=this.inEdgesMap,Xe=this.outEdgesMap,Wr=this.predecessorsMap,$r=this.successorsMap,mn=this.nodesLabelMap;if(this.isCompound()){var Nn,kn,Jn;this.removeFromParentsChildList(ne),(Nn=this.parentMap)===null||Nn===void 0||Nn.delete(ne),(kn=this.children(ne))===null||kn===void 0||kn.forEach(function(di){return Pe.setParent(di)}),(Jn=this.childrenMap)===null||Jn===void 0||Jn.delete(ne)}var ri=Ue.get(ne),Ri=Xe.get(ne);Array.from(ri.values()).forEach(function(di){return Ce(di)}),Array.from(Ri.values()).forEach(function(di){return Ce(di)}),mn.delete(ne),Ue.delete(ne),Xe.delete(ne),Wr.delete(ne),$r.delete(ne),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ne,Pe,Ce,Ue){var Xe,Wr,$r=v(this.isDirected(),ne,Pe,Ue),mn=p(this.isDirected(),$r),Nn=$r.v,kn=$r.w;if(this.edgesLabelsMap.has(mn))return this.edgesLabelsMap.set(mn,Ce),this;if(Ue!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Nn),this.setNode(kn),this.edgesLabelsMap.set(mn,Ce||this.defaultEdgeLabelFn(Nn,kn,Ue)),Object.freeze($r),this.edgesMap.set(mn,$r);var Jn=this.predecessorsMap.get(kn),ri=this.successorsMap.get(Nn);return I(Jn,Nn),I(ri,kn),(Xe=this.inEdgesMap.get(kn))===null||Xe===void 0||Xe.set(mn,$r),(Wr=this.outEdgesMap.get(Nn))===null||Wr===void 0||Wr.set(mn,$r),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ne,Pe,Ce){var Ue=y(this.isDirected(),ne,Pe,Ce),Xe=this.edgesMap.get(Ue);if(Xe){var Wr=v(this.isDirected(),ne,Pe,Ce),$r=Wr.v,mn=Wr.w;this.edgesLabelsMap.delete(Ue),this.edgesMap.delete(Ue);var Nn=this.predecessorsMap.get(mn),kn=this.successorsMap.get($r);m(Nn,$r),m(kn,mn),this.inEdgesMap.get(mn).delete(Ue),this.outEdgesMap.get($r).delete(Ue),this.edgeCountNum-=1}return this}}]),ye}();et.fromJSON=O;function it(ye){return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ft){return typeof Ft}:function(Ft){return Ft&&typeof Symbol=="function"&&Ft.constructor===Symbol&&Ft!==Symbol.prototype?"symbol":typeof Ft},it(ye)}function J(ye,Ft){if(!(ye instanceof Ft))throw new TypeError("Cannot call a class as a function")}function rt(ye,Ft){for(var ne=0;ne<Ft.length;ne++){var Pe=Ft[ne];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ye,Pe.key,Pe)}}function mt(ye,Ft,ne){return Ft&&rt(ye.prototype,Ft),ne&&rt(ye,ne),Object.defineProperty(ye,"prototype",{writable:!1}),ye}function pt(){return typeof Reflect!="undefined"&&Reflect.get?pt=Reflect.get:pt=function(Ft,ne,Pe){var Ce=ft(Ft,ne);if(Ce){var Ue=Object.getOwnPropertyDescriptor(Ce,ne);return Ue.get?Ue.get.call(arguments.length<3?Ft:Pe):Ue.value}},pt.apply(this,arguments)}function ft(ye,Ft){for(;!Object.prototype.hasOwnProperty.call(ye,Ft)&&(ye=qt(ye),ye!==null););return ye}function Mt(ye,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),Object.defineProperty(ye,"prototype",{writable:!1}),Ft&&zt(ye,Ft)}function zt(ye,Ft){return zt=Object.setPrototypeOf||function(Pe,Ce){return Pe.__proto__=Ce,Pe},zt(ye,Ft)}function Vt(ye){var Ft=St();return function(){var Pe=qt(ye),Ce;if(Ft){var Ue=qt(this).constructor;Ce=Reflect.construct(Pe,arguments,Ue)}else Ce=Pe.apply(this,arguments);return kt(this,Ce)}}function kt(ye,Ft){if(Ft&&(it(Ft)==="object"||typeof Ft=="function"))return Ft;if(Ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return st(ye)}function st(ye){if(ye===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}function St(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ye){return!1}}function qt(ye){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},qt(ye)}var re=function(ye){Mt(ne,ye);var Ft=Vt(ne);function ne(){var Pe;J(this,ne);for(var Ce=arguments.length,Ue=new Array(Ce),Xe=0;Xe<Ce;Xe++)Ue[Xe]=arguments[Xe];return Pe=Ft.call.apply(Ft,[this].concat(Ue)),Pe.eventPool={},Pe}return mt(ne,[{key:"appendEvent",value:function(Ce,Ue){this.eventPool[Ce]||(this.eventPool[Ce]=[]),this.eventPool[Ce].push(Ue)}},{key:"removeEvent",value:function(Ce,Ue){if(this.eventPool[Ce]){var Xe=this.eventPool[Ce].indexOf(Ue);Xe>-1&&this.eventPool[Ce].splice(Xe,1)}}},{key:"emitEvent",value:function(Ce){for(var Ue=arguments.length,Xe=new Array(Ue>1?Ue-1:0),Wr=1;Wr<Ue;Wr++)Xe[Wr-1]=arguments[Wr];this.eventPool[Ce]&&this.eventPool[Ce].forEach(function($r){$r.apply(void 0,Xe)})}},{key:"setNode",value:function(Ce,Ue){return pt(qt(ne.prototype),"setNode",this).call(this,Ce,Ue),this.emitEvent("nodeAdd",Ce,Ue),this}},{key:"removeNode",value:function(Ce){return pt(qt(ne.prototype),"removeNode",this).call(this,Ce),this.emitEvent("nodeRemove",Ce),this}},{key:"setEdge",value:function(Ce,Ue,Xe,Wr){return pt(qt(ne.prototype),"setEdge",this).call(this,Ce,Ue,Xe,Wr),this.emitEvent("edgeAdd",Ce,Ue,Xe,Wr),this}},{key:"removeEdge",value:function(Ce,Ue,Xe){return pt(qt(ne.prototype),"removeEdge",this).call(this,Ce,Ue,Xe),this.emitEvent("edgeRemove",Ce,Ue,Xe),this}}]),ne}(et);function Nt(ye,Ft){for(var ne=0;ne<Ft.length;ne++){var Pe=Ft[ne];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ye,Pe.key,Pe)}}function be(ye,Ft,ne){return Ft&&Nt(ye.prototype,Ft),ne&&Nt(ye,ne),Object.defineProperty(ye,"prototype",{writable:!1}),ye}function Te(ye,Ft){if(!(ye instanceof Ft))throw new TypeError("Cannot call a class as a function")}var nr=be(function ye(){var Ft=this;Te(this,ye),this.arr=[],this.keyIndice=new Map,this.size=function(){return Ft.arr.length},this.keys=function(){return Ft.arr.map(function(ne){return ne.key})},this.has=function(ne){return Ft.keyIndice.has(ne)},this.priority=function(ne){var Pe=Ft.keyIndice.get(ne);if(Pe!==void 0)return Ft.arr[Pe].priority},this.swap=function(ne,Pe){var Ce=Ft.arr,Ue=Ft.keyIndice,Xe=[Ce[ne],Ce[Pe]],Wr=Xe[0],$r=Xe[1];Ce[ne]=$r,Ce[Pe]=Wr,Ue.set(Wr.key,Pe),Ue.set($r.key,ne)},this.innerDecrease=function(ne){for(var Pe=Ft.arr,Ce=Pe[ne].priority,Ue,Xe=ne;Xe!==0;){var Wr;if(Ue=Xe>>1,((Wr=Pe[Ue])===null||Wr===void 0?void 0:Wr.priority)<Ce)break;Ft.swap(Xe,Ue),Xe=Ue}},this.heapify=function(ne){var Pe=Ft.arr,Ce=ne<<1,Ue=Ce+1,Xe=ne;Ce<Pe.length&&(Xe=Pe[Ce].priority<Pe[Xe].priority?Ce:Xe,Ue<Pe.length&&(Xe=Pe[Ue].priority<Pe[Xe].priority?Ue:Xe),Xe!==ne&&(Ft.swap(ne,Xe),Ft.heapify(Xe)))},this.min=function(){if(Ft.size()===0)throw new Error("Queue underflow");return Ft.arr[0].key},this.add=function(ne,Pe){var Ce=Ft.keyIndice,Ue=Ft.arr;if(!Ce.has(ne)){var Xe=Ue.length;return Ce.set(ne,Xe),Ue.push({key:ne,priority:Pe}),Ft.innerDecrease(Xe),!0}return!1},this.removeMin=function(){Ft.swap(0,Ft.arr.length-1);var ne=Ft.arr.pop();return Ft.keyIndice.delete(ne.key),Ft.heapify(0),ne.key},this.decrease=function(ne,Pe){if(!Ft.has(ne))throw new Error("There's no key named ".concat(ne));var Ce=Ft.keyIndice.get(ne);if(Pe>Ft.arr[Ce].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ne," Old: + ").concat(Ft.arr[Ce].priority," New: ").concat(Pe));Ft.arr[Ce].priority=Pe,Ft.innerDecrease(Ce)}}),Rt=function(Ft,ne){var Pe=new et,Ce=new Map,Ue=new nr,Xe;function Wr(Nn){var kn=Nn.v===Xe?Nn.w:Nn.v,Jn=Ue.priority(kn);if(Jn!==void 0){var ri=ne(Nn);ri<Jn&&(Ce.set(kn,Xe),Ue.decrease(kn,ri))}}if(Ft.nodeCount()===0)return Pe;Ft.nodes().forEach(function(Nn){Ue.add(Nn,Number.POSITIVE_INFINITY),Pe.setNode(Nn)}),Ue.decrease(Ft.nodes()[0],0);for(var $r=!1;Ue.size()>0;){var mn;if(Xe=Ue.removeMin(),Ce.has(Xe))Pe.setEdge(Xe,Ce.get(Xe));else{if($r)throw new Error("Input graph is not connected: "+Ft.graph());$r=!0}(mn=Ft.nodeEdges(Xe))===null||mn===void 0||mn.forEach(Wr)}return Pe},Dt=Rt,At=function(Ft){var ne=new Set,Pe=[],Ce=Ft.nodes();return Ce.forEach(function(Ue){for(var Xe=[],Wr=[Ue];Wr.length>0;){var $r=Wr.pop();if(!ne.has($r)){var mn,Nn;ne.add($r),Xe.push($r),(mn=Ft.successors($r))===null||mn===void 0||mn.forEach(function(kn){return Wr.push(kn)}),(Nn=Ft.predecessors($r))===null||Nn===void 0||Nn.forEach(function(kn){return Wr.push(kn)})}}Xe.length&&Pe.push(Xe)}),Pe},Xt=At,$t=function ye(Ft,ne,Pe,Ce,Ue,Xe){Ce.includes(ne)||(Ce.push(ne),Pe||Xe.push(ne),Ue(ne).forEach(function(Wr){return ye(Ft,Wr,Pe,Ce,Ue,Xe)}),Pe&&Xe.push(ne))},Tt=function(Ft,ne,Pe){var Ce=Array.isArray(ne)?ne:[ne],Ue=function(mn){return Ft.isDirected()?Ft.successors(mn):Ft.neighbors(mn)},Xe=[],Wr=[];return Ce.forEach(function($r){if(Ft.hasNode($r))$t(Ft,$r,Pe==="post",Wr,Ue,Xe);else throw new Error("Graph does not have node: "+$r)}),Xe},Kt=Tt;function Ee(ye,Ft){return tt(ye)||D(ye,Ft)||bt(ye,Ft)||vt()}function vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(ye,Ft){if(ye){if(typeof ye=="string")return wt(ye,Ft);var ne=Object.prototype.toString.call(ye).slice(8,-1);if(ne==="Object"&&ye.constructor&&(ne=ye.constructor.name),ne==="Map"||ne==="Set")return Array.from(ye);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return wt(ye,Ft)}}function wt(ye,Ft){(Ft==null||Ft>ye.length)&&(Ft=ye.length);for(var ne=0,Pe=new Array(Ft);ne<Ft;ne++)Pe[ne]=ye[ne];return Pe}function D(ye,Ft){var ne=ye==null?null:typeof Symbol!="undefined"&&ye[Symbol.iterator]||ye["@@iterator"];if(ne!=null){var Pe=[],Ce=!0,Ue=!1,Xe,Wr;try{for(ne=ne.call(ye);!(Ce=(Xe=ne.next()).done)&&(Pe.push(Xe.value),!(Ft&&Pe.length===Ft));Ce=!0);}catch($r){Ue=!0,Wr=$r}finally{try{!Ce&&ne.return!=null&&ne.return()}finally{if(Ue)throw Wr}}return Pe}}function tt(ye){if(Array.isArray(ye))return ye}var Ot=function(){return 1},ct=function(Ft,ne,Pe,Ce){return ie(Ft,ne,Pe||Ot,Ce||function(Ue){return Ft.outEdges(Ue)})},ie=function(Ft,ne,Pe,Ce){var Ue=new Map,Xe=new nr,Wr,$r,mn=function(Jn){var ri=Jn.v!==Wr?Jn.v:Jn.w,Ri=Ue.get(ri),di=Pe(Jn),Ki=$r.distance+di;if(di<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Jn+" Weight: "+di);Ki<Ri.distance&&(Ri.distance=Ki,Ri.predecessor=Wr,Xe.decrease(ri,Ki))};for(Ft.nodes().forEach(function(kn){var Jn=kn===ne?0:Number.POSITIVE_INFINITY;Ue.set(kn,{distance:Jn}),Xe.add(kn,Jn)});Xe.size()>0&&(Wr=Xe.removeMin(),$r=Ue.get(Wr),!($r&&$r.distance===Number.POSITIVE_INFINITY));)Ce(Wr).forEach(mn);var Nn={};return Array.from(Ue.entries()).forEach(function(kn){var Jn=Ee(kn,2),ri=Jn[0],Ri=Jn[1];return Nn[String(ri)]=Ri,Nn}),Nn},pe=ct,Ge=function(Ft,ne,Pe){var Ce={};return Ft.nodes().forEach(function(Ue){return Ce[String(Ue)]=pe(Ft,Ue,ne,Pe),Ce}),Ce},Re=Ge,Je=function(Ft){var ne=0,Pe=[],Ce=new Map,Ue=[];function Xe(Wr){var $r,mn={onStack:!0,lowlink:ne,index:ne};if(Ce.set(Wr,mn),ne+=1,Pe.push(Wr),($r=Ft.successors(Wr))===null||$r===void 0||$r.forEach(function(ri){var Ri;if(Ce.has(ri)){if(!((Ri=Ce.get(ri))===null||Ri===void 0)&&Ri.onStack){var Ki=Ce.get(ri);mn.lowlink=Math.min(mn.lowlink,Ki.index)}}else{Xe(ri);var di=Ce.get(ri);mn.lowlink=Math.min(mn.lowlink,di.lowlink)}}),mn.lowlink===mn.index){var Nn=[],kn;do{kn=Pe.pop();var Jn=Ce.get(kn);Jn.onStack=!1,Nn.push(kn)}while(Wr!==kn);Ue.push(Nn)}}return Ft.nodes().forEach(function(Wr){Ce.has(Wr)||Xe(Wr)}),Ue},Ve=Je,ce=function(Ft){return Ve(Ft).filter(function(ne){return ne.length>1||ne.length===1&&Ft.hasEdge(ne[0],ne[0])})},Le=ce;function je(ye){return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ft){return typeof Ft}:function(Ft){return Ft&&typeof Symbol=="function"&&Ft.constructor===Symbol&&Ft!==Symbol.prototype?"symbol":typeof Ft},je(ye)}function Be(ye,Ft){for(var ne=0;ne<Ft.length;ne++){var Pe=Ft[ne];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ye,Pe.key,Pe)}}function vr(ye,Ft,ne){return Ft&&Be(ye.prototype,Ft),ne&&Be(ye,ne),Object.defineProperty(ye,"prototype",{writable:!1}),ye}function or(ye,Ft){if(!(ye instanceof Ft))throw new TypeError("Cannot call a class as a function")}function Ae(ye,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),Object.defineProperty(ye,"prototype",{writable:!1}),Ft&&nn(ye,Ft)}function yr(ye){var Ft=hn();return function(){var Pe=vn(ye),Ce;if(Ft){var Ue=vn(this).constructor;Ce=Reflect.construct(Pe,arguments,Ue)}else Ce=Pe.apply(this,arguments);return Cr(this,Ce)}}function Cr(ye,Ft){if(Ft&&(je(Ft)==="object"||typeof Ft=="function"))return Ft;if(Ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zr(ye)}function zr(ye){if(ye===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}function Mr(ye){var Ft=typeof Map=="function"?new Map:void 0;return Mr=function(Pe){if(Pe===null||!Un(Pe))return Pe;if(typeof Pe!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ft!="undefined"){if(Ft.has(Pe))return Ft.get(Pe);Ft.set(Pe,Ce)}function Ce(){return un(Pe,arguments,vn(this).constructor)}return Ce.prototype=Object.create(Pe.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),nn(Ce,Pe)},Mr(ye)}function un(ye,Ft,ne){return hn()?un=Reflect.construct:un=function(Ce,Ue,Xe){var Wr=[null];Wr.push.apply(Wr,Ue);var $r=Function.bind.apply(Ce,Wr),mn=new $r;return Xe&&nn(mn,Xe.prototype),mn},un.apply(null,arguments)}function hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ye){return!1}}function Un(ye){return Function.toString.call(ye).indexOf("[native code]")!==-1}function nn(ye,Ft){return nn=Object.setPrototypeOf||function(Pe,Ce){return Pe.__proto__=Ce,Pe},nn(ye,Ft)}function vn(ye){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},vn(ye)}var ln=function(ye){Ae(ne,ye);var Ft=yr(ne);function ne(){return or(this,ne),Ft.apply(this,arguments)}return vr(ne)}(Mr(Error));function pn(ye){var Ft=new Set,ne=new Set,Pe=[];function Ce(Ue){if(ne.has(Ue))throw new ln;if(!Ft.has(Ue)){var Xe;ne.add(Ue),Ft.add(Ue),(Xe=ye.predecessors(Ue))===null||Xe===void 0||Xe.forEach(Ce),ne.delete(Ue),Pe.push(Ue)}}if(ye.sinks().forEach(Ce),Ft.size!==ye.nodeCount())throw new ln;return Pe}var Bn=pn,Oe=function(Ft){try{Bn(Ft)}catch(ne){if(ne instanceof ln)return!1;throw ne}return!0},Cn=Oe,Gn=function(Ft,ne){return Kt(Ft,ne,"post")},bi=Gn,zn=function(Ft,ne){return Kt(Ft,ne,"pre")},Hn=zn,hi=function(){return 1};function _i(ye,Ft,ne){return pi(ye,Ft||hi,ne||function(Pe){return ye.outEdges(Pe)})}function pi(ye,Ft,ne){var Pe={},Ce=ye.nodes();return Ce.forEach(function(Ue){var Xe=String(Ue);Pe[Xe]={},Pe[Xe][Xe]={distance:0},Ce.forEach(function(Wr){Ue!==Wr&&(Pe[Xe][String(Wr)]={distance:Number.POSITIVE_INFINITY})}),ne(Ue).forEach(function(Wr){var $r=Wr.v===Ue?Wr.w:Wr.v,mn=Ft(Wr);Pe[Xe][String($r)]={distance:mn,predecessor:Ue}})}),Ce.forEach(function(Ue){var Xe=String(Ue),Wr=Pe[Xe];Ce.forEach(function($r){var mn=String($r),Nn=Pe[mn];Ce.forEach(function(kn){var Jn=String(kn),ri=Nn[Xe],Ri=Wr[Jn],di=Nn[Jn],Ki=ri.distance+Ri.distance;Ki<di.distance&&(di.distance=Ki,di.predecessor=Ri.predecessor)})})}),Pe}var Pt=_i,Lt=function(Ft,ne){for(var Pe=Ft.nodes(),Ce=0;Ce<Pe.length;Ce++){var Ue=Pe[Ce];if(ne.hasNode(Ue))return!0}return!1},H=function(Ft,ne){for(var Pe=Ft.edges(),Ce=0;Ce<Pe.length;Ce++){var Ue=Pe[Ce];if(ne.hasEdge(Ue.v,Ue.w,Ue.name))return!0}return!1},G=function(Ft,ne){var Pe=Ft.nodes(),Ce=Pe.filter(function(Ue){return ne.hasNode(Ue)});return Ce},F=function(Ft,ne){var Pe=Ft.edges(),Ce=Pe.filter(function(Ue){return ne.hasEdge(Ue.v,Ue.w,Ue.name)});return Ce},ot=function(Ft,ne){return Ft.isCompound()===ne.isCompound()&&Ft.isDirected()===ne.isDirected()&&Ft.isMultigraph()===ne.isMultigraph()},Bt=function(Ft,ne){var Pe=G(Ft,ne);return Pe.length===Ft.nodes().length},Ht=function(Ft,ne){var Pe=F(Ft,ne);return Pe.length===Ft.edges().length},Yt=function(Ft,ne){return ot(Ft,ne)&&Ft.nodeCount()===ne.nodeCount()&&Bt(Ft,ne)&&Ft.edgeCount()===ne.edgeCount()&&Ht(Ft,ne)},he=function(Ft,ne){return Bt(Ft,ne)&&Ht(Ft,ne)};function at(ye,Ft){return tr(ye)||_e(ye,Ft)||te(ye,Ft)||yt()}function yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(ye,Ft){if(ye){if(typeof ye=="string")return Me(ye,Ft);var ne=Object.prototype.toString.call(ye).slice(8,-1);if(ne==="Object"&&ye.constructor&&(ne=ye.constructor.name),ne==="Map"||ne==="Set")return Array.from(ye);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return Me(ye,Ft)}}function Me(ye,Ft){(Ft==null||Ft>ye.length)&&(Ft=ye.length);for(var ne=0,Pe=new Array(Ft);ne<Ft;ne++)Pe[ne]=ye[ne];return Pe}function _e(ye,Ft){var ne=ye==null?null:typeof Symbol!="undefined"&&ye[Symbol.iterator]||ye["@@iterator"];if(ne!=null){var Pe=[],Ce=!0,Ue=!1,Xe,Wr;try{for(ne=ne.call(ye);!(Ce=(Xe=ne.next()).done)&&(Pe.push(Xe.value),!(Ft&&Pe.length===Ft));Ce=!0);}catch($r){Ue=!0,Wr=$r}finally{try{!Ce&&ne.return!=null&&ne.return()}finally{if(Ue)throw Wr}}return Pe}}function tr(ye){if(Array.isArray(ye))return ye}function sr(ye){return ye instanceof et}function ge(ye){if(ye.isMultigraph())return!1;for(var Ft=ye.edges(),ne=new Map,Pe=0;Pe<Ft.length;Pe++){var Ce=Ft[Pe];if(Ce.v===Ce.w)return!1;var Ue=[Ce.v,Ce.w].sort(),Xe=at(Ue,2),Wr=Xe[0],$r=Xe[1],mn="".concat(Wr,"-").concat($r);if(ne.has(mn))return!1;ne.set(mn,!0)}return!0}function Fe(ye){return ye.nodes().length===0}function qe(ye){for(var Ft=ye.edges(),ne=0;ne<Ft.length;ne++){var Pe=Ft[ne];if(Pe.v===Pe.w)return!0}return!1}var _r=function(Ft,ne){if(!ge(Ft)||!ge(ne)||!Bt(Ft,ne)||H(Ft,ne))return!1;var Pe=Ft.nodeCount();return Ft.edgeCount()+ne.edgeCount()===Pe*(Pe-1)/2},Er=function(Ft){if(!ge(Ft))return null;for(var ne=Ft.nodeCount(),Pe=new et({compound:Ft.isCompound(),directed:Ft.isDirected(),multigraph:Ft.isMultigraph()}),Ce=Ft.nodes(),Ue=0;Ue<ne;Ue++){var Xe=Ce[Ue];Pe.setNode(Xe,Ft.node(Xe));for(var Wr=Ue+1;Wr<ne;Wr++){var $r=Ce[Wr];Ft.hasEdge(Xe,$r)||Pe.setEdge(Xe,$r)}}return Pe}},13389:function(le){(function(M,x){le.exports=x()})(typeof self!="undefined"?self:this,function(){return function(S){var M={};function x(z){if(M[z])return M[z].exports;var k=M[z]={i:z,l:!1,exports:{}};return S[z].call(k.exports,k,k.exports,x),k.l=!0,k.exports}return x.m=S,x.c=M,x.d=function(z,k,E){x.o(z,k)||Object.defineProperty(z,k,{configurable:!1,enumerable:!0,get:E})},x.n=function(z){var k=z&&z.__esModule?function(){return z.default}:function(){return z};return x.d(k,"a",k),k},x.o=function(z,k){return Object.prototype.hasOwnProperty.call(z,k)},x.p="",x(x.s=36)}([function(S,M,x){"use strict";var z=x(3);M.a=function(k){return Array.isArray?Array.isArray(k):Object(z.a)(k,"Array")}},function(S,M,x){"use strict";var z=function(k){return k!==null&&typeof k!="function"&&isFinite(k.length)};M.a=z},function(S,M,x){"use strict";var z=x(3);M.a=function(k){return Object(z.a)(k,"Function")}},function(S,M,x){"use strict";var z={}.toString,k=function(E,N){return z.call(E)==="[object "+N+"]"};M.a=k},function(S,M,x){"use strict";var z=x(3);M.a=function(k){return Object(z.a)(k,"String")}},function(S,M,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Number")};M.a=k},function(S,M,x){var z=x(38),k=z.mix;function E(N,I,m,y){return y===void 0&&(y="height"),m==="center"?(N[y]+I[y])/2:N.height}S.exports={assign:k,getHeight:E}},function(S,M,x){"use strict";var z=function(k){return k==null};M.a=z},function(S,M,x){"use strict";var z=x(0),k=x(12);function E(N,I){if(N){var m;if(Object(z.a)(N))for(var y=0,v=N.length;y<v&&(m=I(N[y],y),m!==!1);y++);else if(Object(k.a)(N)){for(var p in N)if(N.hasOwnProperty(p)&&(m=I(N[p],p),m===!1))break}}}M.a=E},function(S,M,x){"use strict";var z=x(7);M.a=function(k){return Object(z.a)(k)?"":k.toString()}},function(S,M,x){"use strict";var z=x(14),k=x(3),E=function(N){if(!Object(z.a)(N)||!Object(k.a)(N,"Object"))return!1;if(Object.getPrototypeOf(N)===null)return!0;for(var I=N;Object.getPrototypeOf(I)!==null;)I=Object.getPrototypeOf(I);return Object.getPrototypeOf(N)===I};M.a=E},function(S,M,x){var z=x(18),k=function(){function E(I,m){m===void 0&&(m={});var y=this;y.options=m,y.rootNode=z(I,m)}var N=E.prototype;return N.execute=function(){throw new Error("please override this method")},E}();S.exports=k},function(S,M,x){"use strict";M.a=function(z){var k=typeof z;return z!==null&&k==="object"||k==="function"}},function(S,M,x){"use strict";var z=x(1),k=function(E,N){return Object(z.a)(E)?E.indexOf(N)>-1:!1};M.a=k},function(S,M,x){"use strict";var z=function(k){return typeof k=="object"&&k!==null};M.a=z},function(S,M,x){"use strict";var z=x(8),k=x(2),E=Object.values?function(N){return Object.values(N)}:function(N){var I=[];return Object(z.a)(N,function(m,y){Object(k.a)(N)&&y==="prototype"||I.push(m)}),I};M.a=E},function(S,M,x){"use strict";M.a=k;function z(E,N){for(var I in N)N.hasOwnProperty(I)&&I!=="constructor"&&N[I]!==void 0&&(E[I]=N[I])}function k(E,N,I,m){return N&&z(E,N),I&&z(E,I),m&&z(E,m),E}},function(S,M,x){var z=x(35),k=["LR","RL","TB","BT","H","V"],E=["LR","RL","H"],N=function(y){return E.indexOf(y)>-1},I=k[0];S.exports=function(m,y,v){var p=y.direction||I;if(y.isHorizontal=N(p),p&&k.indexOf(p)===-1)throw new TypeError("Invalid direction: "+p);if(p===k[0])v(m,y);else if(p===k[1])v(m,y),m.right2left();else if(p===k[2])v(m,y);else if(p===k[3])v(m,y),m.bottom2top();else if(p===k[4]||p===k[5]){var g=z(m,y),T=g.left,w=g.right;v(T,y),v(w,y),y.isHorizontal?T.right2left():T.bottom2top(),w.translate(T.x-w.x,T.y-w.y),m.x=T.x,m.y=w.y;var C=m.getBoundingBox();y.isHorizontal?C.top<0&&m.translate(0,-C.top):C.left<0&&m.translate(-C.left,0)}var O=y.fixedRoot;return O===void 0&&(O=!0),O&&m.translate(-(m.x+m.width/2+m.hgap),-(m.y+m.height/2+m.vgap)),m}},function(S,M,x){var z=x(6),k=18,E=k*2,N=k,I={getId:function(p){return p.id||p.name},getPreH:function(p){return p.preH||0},getPreV:function(p){return p.preV||0},getHGap:function(p){return p.hgap||N},getVGap:function(p){return p.vgap||N},getChildren:function(p){return p.children},getHeight:function(p){return p.height||E},getWidth:function(p){var g=p.label||" ";return p.width||g.split("").length*k}};function m(v,p){var g=this;if(g.vgap=g.hgap=0,v instanceof m)return v;g.data=v;var T=p.getHGap(v),w=p.getVGap(v);return g.preH=p.getPreH(v),g.preV=p.getPreV(v),g.width=p.getWidth(v),g.height=p.getHeight(v),g.width+=g.preH,g.height+=g.preV,g.id=p.getId(v),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(T,w),g}z.assign(m.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(p,g){var T=this;T.hgap+=p,T.vgap+=g,T.width+=2*p,T.height+=2*g},eachNode:function(p){for(var g=this,T=[g],w;w=T.shift();)p(w),T=w.children.concat(T)},DFTraverse:function(p){this.eachNode(p)},BFTraverse:function(p){for(var g=this,T=[g],w;w=T.shift();)p(w),T=T.concat(w.children)},getBoundingBox:function(){var p={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){p.left=Math.min(p.left,g.x),p.top=Math.min(p.top,g.y),p.width=Math.max(p.width,g.x+g.width),p.height=Math.max(p.height,g.y+g.height)}),p},translate:function(p,g){p===void 0&&(p=0),g===void 0&&(g=0),this.eachNode(function(T){T.x+=p,T.y+=g,T.x+=T.preH,T.y+=T.preV})},right2left:function(){var p=this,g=p.getBoundingBox();p.eachNode(function(T){T.x=T.x-(T.x-g.left)*2-T.width}),p.translate(g.width,0)},bottom2top:function(){var p=this,g=p.getBoundingBox();p.eachNode(function(T){T.y=T.y-(T.y-g.top)*2-T.height}),p.translate(0,g.height)}});function y(v,p,g){p===void 0&&(p={}),p=z.assign({},I,p);var T=new m(v,p),w=[T],C;if(!g&&!v.collapsed){for(;C=w.shift();)if(!C.data.collapsed){var O=p.getChildren(C.data),b=O?O.length:0;if(C.children=new Array(b),O&&b)for(var l=0;l<b;l++){var K=new m(O[l],p);C.children[l]=K,w.push(K),K.parent=C,K.depth=C.depth+1}}}return T}S.exports=y},function(S,M,x){"use strict";var z=x(1),k=function(E,N){if(!Object(z.a)(E))return E;for(var I=[],m=0;m<E.length;m++){var y=E[m];N(y,m)&&I.push(y)}return I};M.a=k},function(S,M,x){"use strict";var z=x(7),k=x(21);function E(N,I){var m=Object(k.a)(I),y=m.length;if(Object(z.a)(N))return!y;for(var v=0;v<y;v+=1){var p=m[v];if(I[p]!==N[p]||!(p in N))return!1}return!0}M.a=E},function(S,M,x){"use strict";var z=x(8),k=x(2),E=Object.keys?function(N){return Object.keys(N)}:function(N){var I=[];return Object(z.a)(N,function(m,y){Object(k.a)(N)&&y==="prototype"||I.push(y)}),I};M.a=E},function(S,M,x){"use strict";var z=x(0);M.a=function(k){if(Object(z.a)(k))return k.reduce(function(E,N){return Math.max(E,N)},k[0])}},function(S,M,x){"use strict";var z=x(0);M.a=function(k){if(Object(z.a)(k))return k.reduce(function(E,N){return Math.min(E,N)},k[0])}},function(S,M,x){"use strict";var z=x(1),k=Array.prototype.splice,E=function(I,m){if(!Object(z.a)(I))return[];for(var y=I?m.length:0,v=y-1;y--;){var p=void 0,g=m[y];(y===v||g!==p)&&(p=g,k.call(I,g,1))}return I};M.a=E},function(S,M,x){"use strict";var z=x(8),k=x(0),E=x(10),N=function(I,m,y){if(!Object(k.a)(I)&&!Object(E.a)(I))return I;var v=y;return Object(z.a)(I,function(p,g){v=m(v,p,g)}),v};M.a=N},function(S,M,x){"use strict";M.a=z;function z(k,E){E===void 0&&(E=new Map);var N=[];if(Array.isArray(k))for(var I=0,m=k.length;I<m;I++){var y=k[I];E.has(y)||(N.push(y),E.set(y,!0))}return N}},function(S,M,x){"use strict";M.a=N;var z=x(0),k=x(2),E=x(28);function N(I,m){if(!m)return{0:I};if(!Object(k.a)(m)){var y=Object(z.a)(m)?m:m.replace(/\s+/g,"").split("*");m=function(v){for(var p="_",g=0,T=y.length;g<T;g++)p+=v[y[g]]&&v[y[g]].toString();return p}}return Object(E.a)(I,m)}},function(S,M,x){"use strict";var z=x(0),k=x(2),E=Object.prototype.hasOwnProperty;function N(I,m){if(!m||!Object(z.a)(I))return{};for(var y={},v=Object(k.a)(m)?m:function(w){return w[m]},p,g=0;g<I.length;g++){var T=I[g];p=v(T),E.call(y,p)?y[p].push(T):y[p]=[T]}return y}M.a=N},function(S,M,x){"use strict";M.a=function(z,k){return z.hasOwnProperty(k)}},function(S,M,x){"use strict";var z={}.toString,k=function(E){return z.call(E).replace(/^\[object /,"").replace(/]$/,"")};M.a=k},function(S,M,x){"use strict";var z=Object.prototype,k=function(E){var N=E&&E.constructor,I=typeof N=="function"&&N.prototype||z;return E===I};M.a=k},function(S,M,x){"use strict";var z=x(2);M.a=function(k,E){if(!Object(z.a)(k))throw new TypeError("Expected a function");var N=function(){for(var I=[],m=0;m<arguments.length;m++)I[m]=arguments[m];var y=E?E.apply(this,I):I[0],v=N.cache;if(v.has(y))return v.get(y);var p=k.apply(this,I);return v.set(y,p),p};return N.cache=new Map,N}},function(S,M,x){"use strict";var z=x(14),k=x(1),E=x(4),N=function(I,m){if(I===m)return!0;if(!I||!m||Object(E.a)(I)||Object(E.a)(m))return!1;if(Object(k.a)(I)||Object(k.a)(m)){if(I.length!==m.length)return!1;for(var y=!0,v=0;v<I.length&&(y=N(I[v],m[v]),!!y);v++);return y}if(Object(z.a)(I)||Object(z.a)(m)){var p=Object.keys(I),g=Object.keys(m);if(p.length!==g.length)return!1;for(var y=!0,v=0;v<p.length&&(y=N(I[p[v]],m[p[v]]),!!y);v++);return y}return!1};M.a=N},function(S,M,x){"use strict";var z=x(116),k=x(15),E=x(32),N=x(4),I;M.a=Object(E.a)(function(m,y){y===void 0&&(y={});var v=y.fontSize,p=y.fontFamily,g=y.fontWeight,T=y.fontStyle,w=y.fontVariant;return I||(I=document.createElement("canvas").getContext("2d")),I.font=[T,w,g,v+"px",p].join(" "),I.measureText(Object(N.a)(m)?m:"").width},function(m,y){return y===void 0&&(y={}),Object(z.a)([m],Object(k.a)(y)).join("")})},function(S,M,x){var z=x(18);S.exports=function(k,E){for(var N=z(k.data,E,!0),I=z(k.data,E,!0),m=k.children.length,y=Math.round(m/2),v=E.getSide||function(w,C){return C<y?"right":"left"},p=0;p<m;p++){var g=k.children[p],T=v(g,p);T==="right"?I.children.push(g):N.children.push(g)}return N.eachNode(function(w){w.isRoot()||(w.side="left")}),I.eachNode(function(w){w.isRoot()||(w.side="right")}),{left:N,right:I}}},function(S,M,x){var z={compactBox:x(37),dendrogram:x(120),indented:x(122),mindmap:x(124)};S.exports=z},function(S,M,x){function z(g,T){g.prototype=Object.create(T.prototype),g.prototype.constructor=g,k(g,T)}function k(g,T){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,O){return C.__proto__=O,C},k(g,T)}var E=x(11),N=x(119),I=x(17),m=x(6),y=function(g){z(T,g);function T(){return g.apply(this,arguments)||this}var w=T.prototype;return w.execute=function(){var O=this;return I(O.rootNode,O.options,N)},T}(E),v={};function p(g,T){return T=m.assign({},v,T),new y(g,T).execute()}S.exports=p},function(S,M,x){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var z=x(13);x.d(M,"contains",function(){return z.a}),x.d(M,"includes",function(){return z.a});var k=x(39);x.d(M,"difference",function(){return k.a});var E=x(40);x.d(M,"find",function(){return E.a});var N=x(41);x.d(M,"findIndex",function(){return N.a});var I=x(42);x.d(M,"firstValue",function(){return I.a});var m=x(43);x.d(M,"flatten",function(){return m.a});var y=x(44);x.d(M,"flattenDeep",function(){return y.a});var v=x(45);x.d(M,"getRange",function(){return v.a});var p=x(46);x.d(M,"pull",function(){return p.a});var g=x(24);x.d(M,"pullAt",function(){return g.a});var T=x(25);x.d(M,"reduce",function(){return T.a});var w=x(47);x.d(M,"remove",function(){return w.a});var C=x(48);x.d(M,"sortBy",function(){return C.a});var O=x(49);x.d(M,"union",function(){return O.a});var b=x(26);x.d(M,"uniq",function(){return b.a});var l=x(50);x.d(M,"valuesOfKey",function(){return l.a});var K=x(51);x.d(M,"head",function(){return K.a});var Z=x(52);x.d(M,"last",function(){return Z.a});var X=x(53);x.d(M,"startsWith",function(){return X.a});var W=x(54);x.d(M,"endsWith",function(){return W.a});var U=x(19);x.d(M,"filter",function(){return U.a});var et=x(55);x.d(M,"every",function(){return et.a});var it=x(56);x.d(M,"some",function(){return it.a});var J=x(57);x.d(M,"group",function(){return J.a});var rt=x(28);x.d(M,"groupBy",function(){return rt.a});var mt=x(27);x.d(M,"groupToMap",function(){return mt.a});var pt=x(58);x.d(M,"getWrapBehavior",function(){return pt.a});var ft=x(59);x.d(M,"wrapBehavior",function(){return ft.a});var Mt=x(60);x.d(M,"number2color",function(){return Mt.a});var zt=x(61);x.d(M,"parseRadius",function(){return zt.a});var Vt=x(62);x.d(M,"clamp",function(){return Vt.a});var kt=x(63);x.d(M,"fixedBase",function(){return kt.a});var st=x(64);x.d(M,"isDecimal",function(){return st.a});var St=x(65);x.d(M,"isEven",function(){return St.a});var qt=x(66);x.d(M,"isInteger",function(){return qt.a});var re=x(67);x.d(M,"isNegative",function(){return re.a});var Nt=x(68);x.d(M,"isNumberEqual",function(){return Nt.a});var be=x(69);x.d(M,"isOdd",function(){return be.a});var Te=x(70);x.d(M,"isPositive",function(){return Te.a});var nr=x(22);x.d(M,"max",function(){return nr.a});var Rt=x(71);x.d(M,"maxBy",function(){return Rt.a});var Dt=x(23);x.d(M,"min",function(){return Dt.a});var At=x(72);x.d(M,"minBy",function(){return At.a});var Xt=x(73);x.d(M,"mod",function(){return Xt.a});var $t=x(74);x.d(M,"toDegree",function(){return $t.a});var Tt=x(75);x.d(M,"toInteger",function(){return Tt.a});var Kt=x(76);x.d(M,"toRadian",function(){return Kt.a});var Ee=x(77);x.d(M,"forIn",function(){return Ee.a});var vt=x(29);x.d(M,"has",function(){return vt.a});var bt=x(78);x.d(M,"hasKey",function(){return bt.a});var wt=x(79);x.d(M,"hasValue",function(){return wt.a});var D=x(21);x.d(M,"keys",function(){return D.a});var tt=x(20);x.d(M,"isMatch",function(){return tt.a});var Ot=x(15);x.d(M,"values",function(){return Ot.a});var ct=x(80);x.d(M,"lowerCase",function(){return ct.a});var ie=x(81);x.d(M,"lowerFirst",function(){return ie.a});var pe=x(82);x.d(M,"substitute",function(){return pe.a});var Ge=x(83);x.d(M,"upperCase",function(){return Ge.a});var Re=x(84);x.d(M,"upperFirst",function(){return Re.a});var Je=x(30);x.d(M,"getType",function(){return Je.a});var Ve=x(85);x.d(M,"isArguments",function(){return Ve.a});var ce=x(0);x.d(M,"isArray",function(){return ce.a});var Le=x(1);x.d(M,"isArrayLike",function(){return Le.a});var je=x(86);x.d(M,"isBoolean",function(){return je.a});var Be=x(87);x.d(M,"isDate",function(){return Be.a});var vr=x(88);x.d(M,"isError",function(){return vr.a});var or=x(2);x.d(M,"isFunction",function(){return or.a});var Ae=x(89);x.d(M,"isFinite",function(){return Ae.a});var yr=x(7);x.d(M,"isNil",function(){return yr.a});var Cr=x(90);x.d(M,"isNull",function(){return Cr.a});var zr=x(5);x.d(M,"isNumber",function(){return zr.a});var Mr=x(12);x.d(M,"isObject",function(){return Mr.a});var un=x(14);x.d(M,"isObjectLike",function(){return un.a});var hn=x(10);x.d(M,"isPlainObject",function(){return hn.a});var Un=x(31);x.d(M,"isPrototype",function(){return Un.a});var nn=x(91);x.d(M,"isRegExp",function(){return nn.a});var vn=x(4);x.d(M,"isString",function(){return vn.a});var ln=x(3);x.d(M,"isType",function(){return ln.a});var pn=x(92);x.d(M,"isUndefined",function(){return pn.a});var Bn=x(93);x.d(M,"isElement",function(){return Bn.a});var Oe=x(94);x.d(M,"requestAnimationFrame",function(){return Oe.a});var Cn=x(95);x.d(M,"clearAnimationFrame",function(){return Cn.a});var Gn=x(96);x.d(M,"augment",function(){return Gn.a});var bi=x(97);x.d(M,"clone",function(){return bi.a});var zn=x(98);x.d(M,"debounce",function(){return zn.a});var Hn=x(32);x.d(M,"memoize",function(){return Hn.a});var hi=x(99);x.d(M,"deepMix",function(){return hi.a});var _i=x(8);x.d(M,"each",function(){return _i.a});var pi=x(100);x.d(M,"extend",function(){return pi.a});var Pt=x(101);x.d(M,"indexOf",function(){return Pt.a});var Lt=x(102);x.d(M,"isEmpty",function(){return Lt.a});var H=x(33);x.d(M,"isEqual",function(){return H.a});var G=x(103);x.d(M,"isEqualWith",function(){return G.a});var F=x(104);x.d(M,"map",function(){return F.a});var ot=x(105);x.d(M,"mapValues",function(){return ot.a});var Bt=x(16);x.d(M,"mix",function(){return Bt.a}),x.d(M,"assign",function(){return Bt.a});var Ht=x(106);x.d(M,"get",function(){return Ht.a});var Yt=x(107);x.d(M,"set",function(){return Yt.a});var he=x(108);x.d(M,"pick",function(){return he.a});var at=x(109);x.d(M,"omit",function(){return at.a});var yt=x(110);x.d(M,"throttle",function(){return yt.a});var te=x(111);x.d(M,"toArray",function(){return te.a});var Me=x(9);x.d(M,"toString",function(){return Me.a});var _e=x(112);x.d(M,"uniqueId",function(){return _e.a});var tr=x(113);x.d(M,"noop",function(){return tr.a});var sr=x(114);x.d(M,"identity",function(){return sr.a});var ge=x(115);x.d(M,"size",function(){return ge.a});var Fe=x(34);x.d(M,"measureTextWidth",function(){return Fe.a});var qe=x(117);x.d(M,"getEllipsisText",function(){return qe.a});var _r=x(118);x.d(M,"Cache",function(){return _r.a})},function(S,M,x){"use strict";var z=x(19),k=x(13),E=function(N,I){return I===void 0&&(I=[]),Object(z.a)(N,function(m){return!Object(k.a)(I,m)})};M.a=E},function(S,M,x){"use strict";var z=x(2),k=x(20),E=x(0),N=x(10);function I(m,y){if(!Object(E.a)(m))return null;var v;if(Object(z.a)(y)&&(v=y),Object(N.a)(y)&&(v=function(g){return Object(k.a)(g,y)}),v){for(var p=0;p<m.length;p+=1)if(v(m[p]))return m[p]}return null}M.a=I},function(S,M,x){"use strict";function z(k,E,N){N===void 0&&(N=0);for(var I=N;I<k.length;I++)if(E(k[I],I))return I;return-1}M.a=z},function(S,M,x){"use strict";var z=x(7),k=x(0),E=function(N,I){for(var m=null,y=0;y<N.length;y++){var v=N[y],p=v[I];if(!Object(z.a)(p)){Object(k.a)(p)?m=p[0]:m=p;break}}return m};M.a=E},function(S,M,x){"use strict";var z=x(0),k=function(E){if(!Object(z.a)(E))return[];for(var N=[],I=0;I<E.length;I++)N=N.concat(E[I]);return N};M.a=k},function(S,M,x){"use strict";var z=x(0),k=function(E,N){if(N===void 0&&(N=[]),!Object(z.a)(E))N.push(E);else for(var I=0;I<E.length;I+=1)k(E[I],N);return N};M.a=k},function(S,M,x){"use strict";var z=x(0),k=x(22),E=x(23),N=function(I){var m=I.filter(function(T){return!isNaN(T)});if(!m.length)return{min:0,max:0};if(Object(z.a)(I[0])){for(var y=[],v=0;v<I.length;v++)y=y.concat(I[v]);m=y}var p=Object(k.a)(m),g=Object(E.a)(m);return{min:g,max:p}};M.a=N},function(S,M,x){"use strict";var z=Array.prototype,k=z.splice,E=z.indexOf,N=function(I){for(var m=[],y=1;y<arguments.length;y++)m[y-1]=arguments[y];for(var v=0;v<m.length;v++)for(var p=m[v],g=-1;(g=E.call(I,p))>-1;)k.call(I,g,1);return I};M.a=N},function(S,M,x){"use strict";var z=x(1),k=x(24),E=function(N,I){var m=[];if(!Object(z.a)(N))return m;for(var y=-1,v=[],p=N.length;++y<p;){var g=N[y];I(g,y,N)&&(m.push(g),v.push(y))}return Object(k.a)(N,v),m};M.a=E},function(S,M,x){"use strict";var z=x(0),k=x(4),E=x(2);function N(I,m){var y;if(Object(E.a)(m))y=function(p,g){return m(p)-m(g)};else{var v=[];Object(k.a)(m)?v.push(m):Object(z.a)(m)&&(v=m),y=function(p,g){for(var T=0;T<v.length;T+=1){var w=v[T];if(p[w]>g[w])return 1;if(p[w]<g[w])return-1}return 0}}return I.sort(y),I}M.a=N},function(S,M,x){"use strict";var z=x(26),k=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return Object(z.a)([].concat.apply([],E))};M.a=k},function(S,M,x){"use strict";var z=x(0),k=x(7);M.a=function(E,N){for(var I=[],m={},y=0;y<E.length;y++){var v=E[y],p=v[N];if(!Object(k.a)(p)){Object(z.a)(p)||(p=[p]);for(var g=0;g<p.length;g++){var T=p[g];m[T]||(I.push(T),m[T]=!0)}}}return I}},function(S,M,x){"use strict";M.a=k;var z=x(1);function k(E){if(Object(z.a)(E))return E[0]}},function(S,M,x){"use strict";M.a=k;var z=x(1);function k(E){if(Object(z.a)(E)){var N=E;return N[N.length-1]}}},function(S,M,x){"use strict";var z=x(0),k=x(4);function E(N,I){return Object(z.a)(N)||Object(k.a)(N)?N[0]===I:!1}M.a=E},function(S,M,x){"use strict";var z=x(0),k=x(4);function E(N,I){return Object(z.a)(N)||Object(k.a)(N)?N[N.length-1]===I:!1}M.a=E},function(S,M,x){"use strict";var z=function(k,E){for(var N=0;N<k.length;N++)if(!E(k[N],N))return!1;return!0};M.a=z},function(S,M,x){"use strict";var z=function(k,E){for(var N=0;N<k.length;N++)if(E(k[N],N))return!0;return!1};M.a=z},function(S,M,x){"use strict";var z=x(27);M.a=function(k,E){if(!E)return[k];var N=Object(z.a)(k,E),I=[];for(var m in N)I.push(N[m]);return I}},function(S,M,x){"use strict";function z(k,E){return k["_wrap_"+E]}M.a=z},function(S,M,x){"use strict";function z(k,E){if(k["_wrap_"+E])return k["_wrap_"+E];var N=function(I){k[E](I)};return k["_wrap_"+E]=N,N}M.a=z},function(S,M,x){"use strict";var z={};function k(E){var N=z[E];if(!N){for(var I=E.toString(16),m=I.length;m<6;m++)I="0"+I;N="#"+I,z[E]=N}return N}M.a=k},function(S,M,x){"use strict";var z=x(0);function k(E){var N=0,I=0,m=0,y=0;return Object(z.a)(E)?E.length===1?N=I=m=y=E[0]:E.length===2?(N=m=E[0],I=y=E[1]):E.length===3?(N=E[0],I=y=E[1],m=E[2]):(N=E[0],I=E[1],m=E[2],y=E[3]):N=I=m=y=E,{r1:N,r2:I,r3:m,r4:y}}M.a=k},function(S,M,x){"use strict";var z=function(k,E,N){return k<E?E:k>N?N:k};M.a=z},function(S,M,x){"use strict";var z=function(k,E){var N=E.toString(),I=N.indexOf(".");if(I===-1)return Math.round(k);var m=N.substr(I+1).length;return m>20&&(m=20),parseFloat(k.toFixed(m))};M.a=z},function(S,M,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E%1!==0};M.a=k},function(S,M,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E%2===0};M.a=k},function(S,M,x){"use strict";var z=x(5),k=Number.isInteger?Number.isInteger:function(E){return Object(z.a)(E)&&E%1===0};M.a=k},function(S,M,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E<0};M.a=k},function(S,M,x){"use strict";M.a=k;var z=1e-5;function k(E,N,I){return I===void 0&&(I=z),Math.abs(E-N)<I}},function(S,M,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E%2!==0};M.a=k},function(S,M,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E>0};M.a=k},function(S,M,x){"use strict";var z=x(0),k=x(2);M.a=function(E,N){if(Object(z.a)(E)){for(var I,m=-1/0,y=0;y<E.length;y++){var v=E[y],p=Object(k.a)(N)?N(v):v[N];p>m&&(I=v,m=p)}return I}}},function(S,M,x){"use strict";var z=x(0),k=x(2);M.a=function(E,N){if(Object(z.a)(E)){for(var I,m=1/0,y=0;y<E.length;y++){var v=E[y],p=Object(k.a)(N)?N(v):v[N];p<m&&(I=v,m=p)}return I}}},function(S,M,x){"use strict";var z=function(k,E){return(k%E+E)%E};M.a=z},function(S,M,x){"use strict";var z=180/Math.PI,k=function(E){return z*E};M.a=k},function(S,M,x){"use strict";M.a=parseInt},function(S,M,x){"use strict";var z=Math.PI/180,k=function(E){return z*E};M.a=k},function(S,M,x){"use strict";var z=x(8);M.a=z.a},function(S,M,x){"use strict";var z=x(29);M.a=z.a},function(S,M,x){"use strict";var z=x(13),k=x(15);M.a=function(E,N){return Object(z.a)(Object(k.a)(E),N)}},function(S,M,x){"use strict";var z=x(9),k=function(E){return Object(z.a)(E).toLowerCase()};M.a=k},function(S,M,x){"use strict";var z=x(9),k=function(E){var N=Object(z.a)(E);return N.charAt(0).toLowerCase()+N.substring(1)};M.a=k},function(S,M,x){"use strict";function z(k,E){return!k||!E?k:k.replace(/\\?\{([^{}]+)\}/g,function(N,I){return N.charAt(0)==="\\"?N.slice(1):E[I]===void 0?"":E[I]})}M.a=z},function(S,M,x){"use strict";var z=x(9),k=function(E){return Object(z.a)(E).toUpperCase()};M.a=k},function(S,M,x){"use strict";var z=x(9),k=function(E){var N=Object(z.a)(E);return N.charAt(0).toUpperCase()+N.substring(1)};M.a=k},function(S,M,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Arguments")};M.a=k},function(S,M,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Boolean")};M.a=k},function(S,M,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Date")};M.a=k},function(S,M,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Error")};M.a=k},function(S,M,x){"use strict";var z=x(5);M.a=function(k){return Object(z.a)(k)&&isFinite(k)}},function(S,M,x){"use strict";var z=function(k){return k===null};M.a=z},function(S,M,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"RegExp")};M.a=k},function(S,M,x){"use strict";var z=function(k){return k===void 0};M.a=z},function(S,M,x){"use strict";var z=function(k){return k instanceof Element||k instanceof HTMLDocument};M.a=z},function(S,M,x){"use strict";M.a=z;function z(k){var E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(N){return setTimeout(N,16)};return E(k)}},function(S,M,x){"use strict";M.a=z;function z(k){var E=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;E(k)}},function(S,M,x){"use strict";var z=x(16),k=x(2),E=function(){for(var N=[],I=0;I<arguments.length;I++)N[I]=arguments[I];for(var m=N[0],y=1;y<N.length;y++){var v=N[y];Object(k.a)(v)&&(v=v.prototype),Object(z.a)(m.prototype,v)}};M.a=E},function(S,M,x){"use strict";var z=x(0),k=function(E){if(typeof E!="object"||E===null)return E;var N;if(Object(z.a)(E)){N=[];for(var I=0,m=E.length;I<m;I++)typeof E[I]=="object"&&E[I]!=null?N[I]=k(E[I]):N[I]=E[I]}else{N={};for(var y in E)typeof E[y]=="object"&&E[y]!=null?N[y]=k(E[y]):N[y]=E[y]}return N};M.a=k},function(S,M,x){"use strict";function z(k,E,N){var I;return function(){var m=this,y=arguments,v=function(){I=null,N||k.apply(m,y)},p=N&&!I;clearTimeout(I),I=setTimeout(v,E),p&&k.apply(m,y)}}M.a=z},function(S,M,x){"use strict";var z=x(0),k=x(10),E=5;function N(m,y,v,p){v=v||0,p=p||E;for(var g in y)if(y.hasOwnProperty(g)){var T=y[g];T!==null&&Object(k.a)(T)?(Object(k.a)(m[g])||(m[g]={}),v<p?N(m[g],T,v+1,p):m[g]=y[g]):Object(z.a)(T)?(m[g]=[],m[g]=m[g].concat(T)):T!==void 0&&(m[g]=T)}}var I=function(m){for(var y=[],v=1;v<arguments.length;v++)y[v-1]=arguments[v];for(var p=0;p<y.length;p+=1)N(m,y[p]);return m};M.a=I},function(S,M,x){"use strict";var z=x(16),k=x(2),E=function(N,I,m,y){Object(k.a)(I)||(m=I,I=N,N=function(){});var v=Object.create?function(g,T){return Object.create(g,{constructor:{value:T}})}:function(g,T){function w(){}w.prototype=g;var C=new w;return C.constructor=T,C},p=v(I.prototype,N);return N.prototype=Object(z.a)(p,N.prototype),N.superclass=v(I.prototype,I),Object(z.a)(p,m),Object(z.a)(N,y),N};M.a=E},function(S,M,x){"use strict";var z=x(1),k=function(E,N){if(!Object(z.a)(E))return-1;var I=Array.prototype.indexOf;if(I)return I.call(E,N);for(var m=-1,y=0;y<E.length;y++)if(E[y]===N){m=y;break}return m};M.a=k},function(S,M,x){"use strict";var z=x(7),k=x(1),E=x(30),N=x(31),I=Object.prototype.hasOwnProperty;function m(y){if(Object(z.a)(y))return!0;if(Object(k.a)(y))return!y.length;var v=Object(E.a)(y);if(v==="Map"||v==="Set")return!y.size;if(Object(N.a)(y))return!Object.keys(y).length;for(var p in y)if(I.call(y,p))return!1;return!0}M.a=m},function(S,M,x){"use strict";var z=x(2),k=x(33);M.a=function(E,N,I){return Object(z.a)(I)?!!I(E,N):Object(k.a)(E,N)}},function(S,M,x){"use strict";var z=x(1),k=function(E,N){if(!Object(z.a)(E))return E;for(var I=[],m=0;m<E.length;m++){var y=E[m];I.push(N(y,m))}return I};M.a=k},function(S,M,x){"use strict";var z=x(7),k=x(12),E=function(N){return N};M.a=function(N,I){I===void 0&&(I=E);var m={};return Object(k.a)(N)&&!Object(z.a)(N)&&Object.keys(N).forEach(function(y){m[y]=I(N[y],y)}),m}},function(S,M,x){"use strict";var z=x(4);M.a=function(k,E,N){for(var I=0,m=Object(z.a)(E)?E.split("."):E;k&&I<m.length;)k=k[m[I++]];return k===void 0||I<m.length?N:k}},function(S,M,x){"use strict";var z=x(12),k=x(4),E=x(5);M.a=function(N,I,m){var y=N,v=Object(k.a)(I)?I.split("."):I;return v.forEach(function(p,g){g<v.length-1?(Object(z.a)(y[p])||(y[p]=Object(E.a)(v[g+1])?[]:{}),y=y[p]):y[p]=m}),N}},function(S,M,x){"use strict";var z=x(8),k=x(10),E=Object.prototype.hasOwnProperty;M.a=function(N,I){if(N===null||!Object(k.a)(N))return{};var m={};return Object(z.a)(I,function(y){E.call(N,y)&&(m[y]=N[y])}),m}},function(S,M,x){"use strict";var z=x(25);M.a=function(k,E){return Object(z.a)(k,function(N,I,m){return E.includes(m)||(N[m]=I),N},{})}},function(S,M,x){"use strict";M.a=function(z,k,E){var N,I,m,y,v=0;E||(E={});var p=function(){v=E.leading===!1?0:Date.now(),N=null,y=z.apply(I,m),N||(I=m=null)},g=function(){var T=Date.now();!v&&E.leading===!1&&(v=T);var w=k-(T-v);return I=this,m=arguments,w<=0||w>k?(N&&(clearTimeout(N),N=null),v=T,y=z.apply(I,m),N||(I=m=null)):!N&&E.trailing!==!1&&(N=setTimeout(p,w)),y};return g.cancel=function(){clearTimeout(N),v=0,N=I=m=null},g}},function(S,M,x){"use strict";var z=x(1);M.a=function(k){return Object(z.a)(k)?Array.prototype.slice.call(k):[]}},function(S,M,x){"use strict";var z={};M.a=function(k){return k=k||"g",z[k]?z[k]+=1:z[k]=1,k+z[k]}},function(S,M,x){"use strict";M.a=function(){}},function(S,M,x){"use strict";M.a=function(z){return z}},function(S,M,x){"use strict";M.a=E;var z=x(7),k=x(1);function E(N){return Object(z.a)(N)?0:Object(k.a)(N)?N.length:Object.keys(N).length}},function(S,M,x){"use strict";M.a=X;var z=function(kt,st){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,qt){St.__proto__=qt}||function(St,qt){for(var re in qt)Object.prototype.hasOwnProperty.call(qt,re)&&(St[re]=qt[re])},z(kt,st)};function k(kt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");z(kt,st);function St(){this.constructor=kt}kt.prototype=st===null?Object.create(st):(St.prototype=st.prototype,new St)}var E=function(){return E=Object.assign||function(st){for(var St,qt=1,re=arguments.length;qt<re;qt++){St=arguments[qt];for(var Nt in St)Object.prototype.hasOwnProperty.call(St,Nt)&&(st[Nt]=St[Nt])}return st},E.apply(this,arguments)};function N(kt,st){var St={};for(var qt in kt)Object.prototype.hasOwnProperty.call(kt,qt)&&st.indexOf(qt)<0&&(St[qt]=kt[qt]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,qt=Object.getOwnPropertySymbols(kt);re<qt.length;re++)st.indexOf(qt[re])<0&&Object.prototype.propertyIsEnumerable.call(kt,qt[re])&&(St[qt[re]]=kt[qt[re]]);return St}function I(kt,st,St,qt){var re=arguments.length,Nt=re<3?st:qt===null?qt=Object.getOwnPropertyDescriptor(st,St):qt,be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Nt=Reflect.decorate(kt,st,St,qt);else for(var Te=kt.length-1;Te>=0;Te--)(be=kt[Te])&&(Nt=(re<3?be(Nt):re>3?be(st,St,Nt):be(st,St))||Nt);return re>3&&Nt&&Object.defineProperty(st,St,Nt),Nt}function m(kt,st){return function(St,qt){st(St,qt,kt)}}function y(kt,st,St,qt,re,Nt){function be(vt){if(vt!==void 0&&typeof vt!="function")throw new TypeError("Function expected");return vt}for(var Te=qt.kind,nr=Te==="getter"?"get":Te==="setter"?"set":"value",Rt=!st&&kt?qt.static?kt:kt.prototype:null,Dt=st||(Rt?Object.getOwnPropertyDescriptor(Rt,qt.name):{}),At,Xt=!1,$t=St.length-1;$t>=0;$t--){var Tt={};for(var Kt in qt)Tt[Kt]=Kt==="access"?{}:qt[Kt];for(var Kt in qt.access)Tt.access[Kt]=qt.access[Kt];Tt.addInitializer=function(vt){if(Xt)throw new TypeError("Cannot add initializers after decoration has completed");Nt.push(be(vt||null))};var Ee=(0,St[$t])(Te==="accessor"?{get:Dt.get,set:Dt.set}:Dt[nr],Tt);if(Te==="accessor"){if(Ee===void 0)continue;if(Ee===null||typeof Ee!="object")throw new TypeError("Object expected");(At=be(Ee.get))&&(Dt.get=At),(At=be(Ee.set))&&(Dt.set=At),(At=be(Ee.init))&&re.push(At)}else(At=be(Ee))&&(Te==="field"?re.push(At):Dt[nr]=At)}Rt&&Object.defineProperty(Rt,qt.name,Dt),Xt=!0}function v(kt,st,St){for(var qt=arguments.length>2,re=0;re<st.length;re++)St=qt?st[re].call(kt,St):st[re].call(kt);return qt?St:void 0}function p(kt){return typeof kt=="symbol"?kt:"".concat(kt)}function g(kt,st,St){return typeof st=="symbol"&&(st=st.description?"[".concat(st.description,"]"):""),Object.defineProperty(kt,"name",{configurable:!0,value:St?"".concat(St," ",st):st})}function T(kt,st){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(kt,st)}function w(kt,st,St,qt){function re(Nt){return Nt instanceof St?Nt:new St(function(be){be(Nt)})}return new(St||(St=Promise))(function(Nt,be){function Te(Dt){try{Rt(qt.next(Dt))}catch(At){be(At)}}function nr(Dt){try{Rt(qt.throw(Dt))}catch(At){be(At)}}function Rt(Dt){Dt.done?Nt(Dt.value):re(Dt.value).then(Te,nr)}Rt((qt=qt.apply(kt,st||[])).next())})}function C(kt,st){var St={label:0,sent:function(){if(Nt[0]&1)throw Nt[1];return Nt[1]},trys:[],ops:[]},qt,re,Nt,be;return be={next:Te(0),throw:Te(1),return:Te(2)},typeof Symbol=="function"&&(be[Symbol.iterator]=function(){return this}),be;function Te(Rt){return function(Dt){return nr([Rt,Dt])}}function nr(Rt){if(qt)throw new TypeError("Generator is already executing.");for(;be&&(be=0,Rt[0]&&(St=0)),St;)try{if(qt=1,re&&(Nt=Rt[0]&2?re.return:Rt[0]?re.throw||((Nt=re.return)&&Nt.call(re),0):re.next)&&!(Nt=Nt.call(re,Rt[1])).done)return Nt;switch(re=0,Nt&&(Rt=[Rt[0]&2,Nt.value]),Rt[0]){case 0:case 1:Nt=Rt;break;case 4:return St.label++,{value:Rt[1],done:!1};case 5:St.label++,re=Rt[1],Rt=[0];continue;case 7:Rt=St.ops.pop(),St.trys.pop();continue;default:if(Nt=St.trys,!(Nt=Nt.length>0&&Nt[Nt.length-1])&&(Rt[0]===6||Rt[0]===2)){St=0;continue}if(Rt[0]===3&&(!Nt||Rt[1]>Nt[0]&&Rt[1]<Nt[3])){St.label=Rt[1];break}if(Rt[0]===6&&St.label<Nt[1]){St.label=Nt[1],Nt=Rt;break}if(Nt&&St.label<Nt[2]){St.label=Nt[2],St.ops.push(Rt);break}Nt[2]&&St.ops.pop(),St.trys.pop();continue}Rt=st.call(kt,St)}catch(Dt){Rt=[6,Dt],re=0}finally{qt=Nt=0}if(Rt[0]&5)throw Rt[1];return{value:Rt[0]?Rt[1]:void 0,done:!0}}}var O=Object.create?function(kt,st,St,qt){qt===void 0&&(qt=St);var re=Object.getOwnPropertyDescriptor(st,St);(!re||("get"in re?!st.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return st[St]}}),Object.defineProperty(kt,qt,re)}:function(kt,st,St,qt){qt===void 0&&(qt=St),kt[qt]=st[St]};function b(kt,st){for(var St in kt)St!=="default"&&!Object.prototype.hasOwnProperty.call(st,St)&&O(st,kt,St)}function l(kt){var st=typeof Symbol=="function"&&Symbol.iterator,St=st&&kt[st],qt=0;if(St)return St.call(kt);if(kt&&typeof kt.length=="number")return{next:function(){return kt&&qt>=kt.length&&(kt=void 0),{value:kt&&kt[qt++],done:!kt}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(kt,st){var St=typeof Symbol=="function"&&kt[Symbol.iterator];if(!St)return kt;var qt=St.call(kt),re,Nt=[],be;try{for(;(st===void 0||st-- >0)&&!(re=qt.next()).done;)Nt.push(re.value)}catch(Te){be={error:Te}}finally{try{re&&!re.done&&(St=qt.return)&&St.call(qt)}finally{if(be)throw be.error}}return Nt}function Z(){for(var kt=[],st=0;st<arguments.length;st++)kt=kt.concat(K(arguments[st]));return kt}function X(){for(var kt=0,st=0,St=arguments.length;st<St;st++)kt+=arguments[st].length;for(var qt=Array(kt),re=0,st=0;st<St;st++)for(var Nt=arguments[st],be=0,Te=Nt.length;be<Te;be++,re++)qt[re]=Nt[be];return qt}function W(kt,st,St){if(St||arguments.length===2)for(var qt=0,re=st.length,Nt;qt<re;qt++)(Nt||!(qt in st))&&(Nt||(Nt=Array.prototype.slice.call(st,0,qt)),Nt[qt]=st[qt]);return kt.concat(Nt||Array.prototype.slice.call(st))}function U(kt){return this instanceof U?(this.v=kt,this):new U(kt)}function et(kt,st,St){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qt=St.apply(kt,st||[]),re,Nt=[];return re={},be("next"),be("throw"),be("return"),re[Symbol.asyncIterator]=function(){return this},re;function be(Xt){qt[Xt]&&(re[Xt]=function($t){return new Promise(function(Tt,Kt){Nt.push([Xt,$t,Tt,Kt])>1||Te(Xt,$t)})})}function Te(Xt,$t){try{nr(qt[Xt]($t))}catch(Tt){At(Nt[0][3],Tt)}}function nr(Xt){Xt.value instanceof U?Promise.resolve(Xt.value.v).then(Rt,Dt):At(Nt[0][2],Xt)}function Rt(Xt){Te("next",Xt)}function Dt(Xt){Te("throw",Xt)}function At(Xt,$t){Xt($t),Nt.shift(),Nt.length&&Te(Nt[0][0],Nt[0][1])}}function it(kt){var st,St;return st={},qt("next"),qt("throw",function(re){throw re}),qt("return"),st[Symbol.iterator]=function(){return this},st;function qt(re,Nt){st[re]=kt[re]?function(be){return(St=!St)?{value:U(kt[re](be)),done:!1}:Nt?Nt(be):be}:Nt}}function J(kt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=kt[Symbol.asyncIterator],St;return st?st.call(kt):(kt=typeof l=="function"?l(kt):kt[Symbol.iterator](),St={},qt("next"),qt("throw"),qt("return"),St[Symbol.asyncIterator]=function(){return this},St);function qt(Nt){St[Nt]=kt[Nt]&&function(be){return new Promise(function(Te,nr){be=kt[Nt](be),re(Te,nr,be.done,be.value)})}}function re(Nt,be,Te,nr){Promise.resolve(nr).then(function(Rt){Nt({value:Rt,done:Te})},be)}}function rt(kt,st){return Object.defineProperty?Object.defineProperty(kt,"raw",{value:st}):kt.raw=st,kt}var mt=Object.create?function(kt,st){Object.defineProperty(kt,"default",{enumerable:!0,value:st})}:function(kt,st){kt.default=st};function pt(kt){if(kt&&kt.__esModule)return kt;var st={};if(kt!=null)for(var St in kt)St!=="default"&&Object.prototype.hasOwnProperty.call(kt,St)&&O(st,kt,St);return mt(st,kt),st}function ft(kt){return kt&&kt.__esModule?kt:{default:kt}}function Mt(kt,st,St,qt){if(St==="a"&&!qt)throw new TypeError("Private accessor was defined without a getter");if(typeof st=="function"?kt!==st||!qt:!st.has(kt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return St==="m"?qt:St==="a"?qt.call(kt):qt?qt.value:st.get(kt)}function zt(kt,st,St,qt,re){if(qt==="m")throw new TypeError("Private method is not writable");if(qt==="a"&&!re)throw new TypeError("Private accessor was defined without a setter");if(typeof st=="function"?kt!==st||!re:!st.has(kt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return qt==="a"?re.call(kt,St):re?re.value=St:st.set(kt,St),St}function Vt(kt,st){if(st===null||typeof st!="object"&&typeof st!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof kt=="function"?st===kt:kt.has(st)}},function(S,M,x){"use strict";var z=x(4),k=x(9),E=x(34);M.a=function(N,I,m,y){y===void 0&&(y="...");var v=16,p=Object(E.a)(y,m),g=Object(z.a)(N)?N:Object(k.a)(N),T=I,w=[],C,O;if(Object(E.a)(N,m)<=I)return N;for(;C=g.substr(0,v),O=Object(E.a)(C,m),!(O+p>T&&O>T);)if(w.push(C),T-=O,g=g.substr(v),!g)return w.join("");for(;C=g.substr(0,1),O=Object(E.a)(C,m),!(O+p>T);)if(w.push(C),T-=O,g=g.substr(1),!g)return w.join("");return""+w.join("")+y}},function(S,M,x){"use strict";var z=function(){function k(){this.map={}}return k.prototype.has=function(E){return this.map[E]!==void 0},k.prototype.get=function(E,N){var I=this.map[E];return I===void 0?N:I},k.prototype.set=function(E,N){this.map[E]=N},k.prototype.clear=function(){this.map={}},k.prototype.delete=function(E){delete this.map[E]},k.prototype.size=function(){return Object.keys(this.map).length},k}();M.a=z},function(S,M){function x(m,y,v,p){p===void 0&&(p=[]);var g=this;g.w=m||0,g.h=y||0,g.y=v||0,g.x=0,g.c=p||[],g.cs=p.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}x.fromNode=function(m,y){if(!m)return null;var v=[];return m.children.forEach(function(p){v.push(x.fromNode(p,y))}),y?new x(m.height,m.width,m.x,v):new x(m.width,m.height,m.y,v)};function z(m,y,v){v?m.y+=y:m.x+=y,m.children.forEach(function(p){z(p,y,v)})}function k(m,y){var v=y?m.y:m.x;return m.children.forEach(function(p){v=Math.min(k(p,y),v)}),v}function E(m,y){var v=k(m,y);z(m,-v,y)}function N(m,y,v){v?y.y=m.x:y.x=m.x,m.c.forEach(function(p,g){N(p,y.children[g],v)})}function I(m,y,v){v===void 0&&(v=0),y?(m.x=v,v+=m.width):(m.y=v,v+=m.height),m.children.forEach(function(p){I(p,y,v)})}S.exports=function(m,y){y===void 0&&(y={});var v=y.isHorizontal;function p(J){if(J.cs===0){g(J);return}p(J.c[0]);for(var rt=et(b(J.c[0].el),0,null),mt=1;mt<J.cs;++mt){p(J.c[mt]);var pt=b(J.c[mt].er);T(J,mt,rt),rt=et(pt,mt,rt)}Z(J),g(J)}function g(J){J.cs===0?(J.el=J,J.er=J,J.msel=J.mser=0):(J.el=J.c[0].el,J.msel=J.c[0].msel,J.er=J.c[J.cs-1].er,J.mser=J.c[J.cs-1].mser)}function T(J,rt,mt){for(var pt=J.c[rt-1],ft=pt.mod,Mt=J.c[rt],zt=Mt.mod;pt!==null&&Mt!==null;){b(pt)>mt.low&&(mt=mt.nxt);var Vt=ft+pt.prelim+pt.w-(zt+Mt.prelim);Vt>0&&(zt+=Vt,w(J,rt,mt.index,Vt));var kt=b(pt),st=b(Mt);kt<=st&&(pt=O(pt),pt!==null&&(ft+=pt.mod)),kt>=st&&(Mt=C(Mt),Mt!==null&&(zt+=Mt.mod))}!pt&&Mt?l(J,rt,Mt,zt):pt&&!Mt&&K(J,rt,pt,ft)}function w(J,rt,mt,pt){J.c[rt].mod+=pt,J.c[rt].msel+=pt,J.c[rt].mser+=pt,W(J,rt,mt,pt)}function C(J){return J.cs===0?J.tl:J.c[0]}function O(J){return J.cs===0?J.tr:J.c[J.cs-1]}function b(J){return J.y+J.h}function l(J,rt,mt,pt){var ft=J.c[0].el;ft.tl=mt;var Mt=pt-mt.mod-J.c[0].msel;ft.mod+=Mt,ft.prelim-=Mt,J.c[0].el=J.c[rt].el,J.c[0].msel=J.c[rt].msel}function K(J,rt,mt,pt){var ft=J.c[rt].er;ft.tr=mt;var Mt=pt-mt.mod-J.c[rt].mser;ft.mod+=Mt,ft.prelim-=Mt,J.c[rt].er=J.c[rt-1].er,J.c[rt].mser=J.c[rt-1].mser}function Z(J){J.prelim=(J.c[0].prelim+J.c[0].mod+J.c[J.cs-1].mod+J.c[J.cs-1].prelim+J.c[J.cs-1].w)/2-J.w/2}function X(J,rt){rt+=J.mod,J.x=J.prelim+rt,U(J);for(var mt=0;mt<J.cs;mt++)X(J.c[mt],rt)}function W(J,rt,mt,pt){if(mt!==rt-1){var ft=rt-mt;J.c[mt+1].shift+=pt/ft,J.c[rt].shift-=pt/ft,J.c[rt].change-=pt-pt/ft}}function U(J){for(var rt=0,mt=0,pt=0;pt<J.cs;pt++)rt+=J.c[pt].shift,mt+=rt+J.c[pt].change,J.c[pt].mod+=mt}function et(J,rt,mt){for(;mt!==null&&J>=mt.low;)mt=mt.nxt;return{low:J,index:rt,nxt:mt}}I(m,v);var it=x.fromNode(m,v);return p(it),X(it,0),N(it,m,v),E(m,v),m}},function(S,M,x){function z(g,T){g.prototype=Object.create(T.prototype),g.prototype.constructor=g,k(g,T)}function k(g,T){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,O){return C.__proto__=O,C},k(g,T)}var E=x(11),N=x(121),I=x(17),m=x(6),y=function(g){z(T,g);function T(){return g.apply(this,arguments)||this}var w=T.prototype;return w.execute=function(){var O=this;return O.rootNode.width=0,I(O.rootNode,O.options,N)},T}(E),v={};function p(g,T){return T=m.assign({},v,T),new y(g,T).execute()}S.exports=p},function(S,M,x){var z=x(6);function k(I,m){I===void 0&&(I=0),m===void 0&&(m=[]);var y=this;y.x=y.y=0,y.leftChild=y.rightChild=null,y.height=0,y.children=m}var E={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function N(I,m,y){y?(m.x=I.x,m.y=I.y):(m.x=I.y,m.y=I.x),I.children.forEach(function(v,p){N(v,m.children[p],y)})}S.exports=function(I,m){m===void 0&&(m={}),m=z.assign({},E,m);var y=0;function v(C){if(!C)return null;C.width=0,C.depth&&C.depth>y&&(y=C.depth);var O=C.children,b=O.length,l=new k(C.height,[]);return O.forEach(function(K,Z){var X=v(K);l.children.push(X),Z===0&&(l.leftChild=X),Z===b-1&&(l.rightChild=X)}),l.originNode=C,l.isLeaf=C.isLeaf(),l}function p(C){if(C.isLeaf||C.children.length===0)C.drawingDepth=y;else{var O=C.children.map(function(l){return p(l)}),b=Math.min.apply(null,O);C.drawingDepth=b-1}return C.drawingDepth}var g;function T(C){C.x=C.drawingDepth*m.rankSep,C.isLeaf?(C.y=0,g&&(C.y=g.y+g.height+m.nodeSep,C.originNode.parent!==g.originNode.parent&&(C.y+=m.subTreeSep)),g=C):(C.children.forEach(function(O){T(O)}),C.y=(C.leftChild.y+C.rightChild.y)/2)}var w=v(I);return p(w),T(w),N(w,I,m.isHorizontal),I}},function(S,M,x){function z(w,C){w.prototype=Object.create(C.prototype),w.prototype.constructor=w,k(w,C)}function k(w,C){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,l){return b.__proto__=l,b},k(w,C)}var E=x(11),N=x(123),I=x(35),m=x(6),y=["LR","RL","H"],v=y[0],p=function(w){z(C,w);function C(){return w.apply(this,arguments)||this}var O=C.prototype;return O.execute=function(){var l=this,K=l.options,Z=l.rootNode;K.isHorizontal=!0;var X=K.indent,W=X===void 0?20:X,U=K.dropCap,et=U===void 0?!0:U,it=K.direction,J=it===void 0?v:it,rt=K.align;if(J&&y.indexOf(J)===-1)throw new TypeError("Invalid direction: "+J);if(J===y[0])N(Z,W,et,rt);else if(J===y[1])N(Z,W,et,rt),Z.right2left();else if(J===y[2]){var mt=I(Z,K),pt=mt.left,ft=mt.right;N(pt,W,et,rt),pt.right2left(),N(ft,W,et,rt);var Mt=pt.getBoundingBox();ft.translate(Mt.width,0),Z.x=ft.x-Z.width/2}return Z},C}(E),g={};function T(w,C){return C=m.assign({},g,C),new p(w,C).execute()}S.exports=T},function(S,M,x){var z=x(6);function k(E,N,I,m,y){var v=typeof I=="function"?I(E):I*E.depth;if(!m)try{if(E.id===E.parent.children[0].id){E.x+=v,E.y=N?N.y:0;return}}catch(T){}if(E.x+=v,N){if(E.y=N.y+z.getHeight(N,E,y),N.parent&&E.parent.id!==N.parent.id){var p=N.parent,g=p.y+z.getHeight(p,E,y);E.y=g>E.y?g:E.y}}else E.y=0}S.exports=function(E,N,I,m){var y=null;E.eachNode(function(v){k(v,y,N,I,m),y=v})}},function(S,M,x){function z(g,T){g.prototype=Object.create(T.prototype),g.prototype.constructor=g,k(g,T)}function k(g,T){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,O){return C.__proto__=O,C},k(g,T)}var E=x(11),N=x(125),I=x(17),m=x(6),y=function(g){z(T,g);function T(){return g.apply(this,arguments)||this}var w=T.prototype;return w.execute=function(){var O=this;return I(O.rootNode,O.options,N)},T}(E),v={};function p(g,T){return T=m.assign({},v,T),new y(g,T).execute()}S.exports=p},function(S,M,x){var z=x(6);function k(I,m){var y=0;return I.children.length?I.children.forEach(function(v){y+=k(v,m)}):y=I.height,I._subTreeSep=m.getSubTreeSep(I.data),I.totalHeight=Math.max(I.height,y)+2*I._subTreeSep,I.totalHeight}function E(I){var m=I.children,y=m.length;if(y){m.forEach(function(C){E(C)});var v=m[0],p=m[y-1],g=p.y-v.y+p.height,T=0;if(m.forEach(function(C){T+=C.totalHeight}),g>I.height)I.y=v.y+g/2-I.height/2;else if(m.length!==1||I.height>T){var w=I.y+(I.height-g)/2-v.y;m.forEach(function(C){C.translate(0,w)})}else I.y=(v.y+v.height/2+p.y+p.height/2)/2-I.height/2}}var N={getSubTreeSep:function(){return 0}};S.exports=function(I,m){m===void 0&&(m={}),m=z.assign({},N,m),I.parent={x:0,width:0,height:0,y:0},I.BFTraverse(function(y){y.x=y.parent.x+y.parent.width}),I.parent=null,k(I,m),I.startY=0,I.y=I.totalHeight/2-I.height/2,I.eachNode(function(y){var v=y.children,p=v.length;if(p){var g=v[0];if(g.startY=y.startY+y._subTreeSep,p===1)g.y=y.y+y.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var T=1;T<p;T++){var w=v[T];w.startY=v[T-1].startY+v[T-1].totalHeight,w.y=w.startY+w.totalHeight/2-w.height/2}}}}),E(I)}}])})},79472:function(le,S,M){"use strict";var x=this&&this.__createBinding||(Object.create?function(E,N,I,m){m===void 0&&(m=I);var y=Object.getOwnPropertyDescriptor(N,I);(!y||("get"in y?!N.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return N[I]}}),Object.defineProperty(E,m,y)}:function(E,N,I,m){m===void 0&&(m=I),E[m]=N[I]}),z=this&&this.__exportStar||function(E,N){for(var I in E)I!=="default"&&!Object.prototype.hasOwnProperty.call(N,I)&&x(N,E,I)};Object.defineProperty(S,"__esModule",{value:!0}),S.getLayoutByName=S.unRegisterLayout=S.registerLayout=void 0;var k=M(45610);Object.defineProperty(S,"registerLayout",{enumerable:!0,get:function(){return k.registerLayout}}),Object.defineProperty(S,"unRegisterLayout",{enumerable:!0,get:function(){return k.unRegisterLayout}}),Object.defineProperty(S,"getLayoutByName",{enumerable:!0,get:function(){return k.getLayoutByName}}),z(M(51709),S)},94416:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Base=void 0;var M=function(){function x(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return x.prototype.layout=function(z){return this.init(z),this.execute(!0)},x.prototype.init=function(z){this.nodes=z.nodes||[],this.edges=z.edges||[],this.combos=z.combos||[],this.comboEdges=z.comboEdges||[],this.hiddenNodes=z.hiddenNodes||[],this.hiddenEdges=z.hiddenEdges||[],this.hiddenCombos=z.hiddenCombos||[]},x.prototype.execute=function(z){},x.prototype.executeWithWorker=function(){},x.prototype.getDefaultCfg=function(){return{}},x.prototype.updateCfg=function(z){z&&Object.assign(this,z)},x.prototype.getType=function(){return"base"},x.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},x}();S.Base=M},28672:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(g[w]=T[w])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.CircularLayout=void 0;var z=M(94416),k=M(78302);function E(y,v,p,g){y.forEach(function(T,w){y[w].children=[],y[w].parent=[]}),g?v.forEach(function(T){var w=(0,k.getEdgeTerminal)(T,"source"),C=(0,k.getEdgeTerminal)(T,"target"),O=0;w&&(O=p[w]);var b=0;C&&(b=p[C]);var l=y[O].children,K=y[b].parent;l.push(y[b].id),K.push(y[O].id)}):v.forEach(function(T){var w=(0,k.getEdgeTerminal)(T,"source"),C=(0,k.getEdgeTerminal)(T,"target"),O=0;w&&(O=p[w]);var b=0;C&&(b=p[C]);var l=y[O].children,K=y[b].children;l.push(y[b].id),K.push(y[O].id)})}function N(y,v,p){for(var g=p.length,T=0;T<g;T++){var w=(0,k.getEdgeTerminal)(p[T],"source"),C=(0,k.getEdgeTerminal)(p[T],"target");if(y.id===w&&v.id===C||v.id===w&&y.id===C)return!0}return!1}function I(y,v){var p=y.degree,g=v.degree;return p<g?-1:p>g?1:0}var m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},v.prototype.execute=function(){var p,g=this,T=g.nodes,w=g.edges,C=T.length;if(C===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var O=g.center;if(C===1){T[0].x=O[0],T[0].y=O[1],g.onLayoutEnd&&g.onLayoutEnd();return}var b=g.radius,l=g.startRadius,K=g.endRadius,Z=g.divisions,X=g.startAngle,W=g.endAngle,U=g.angleRatio,et=g.ordering,it=g.clockwise,J=g.nodeSpacing,rt=g.nodeSize,mt=(W-X)/C,pt={};T.forEach(function(Te,nr){pt[Te.id]=nr}),g.nodeMap=pt;var ft=(0,k.getDegree)(T.length,pt,w);if(g.degrees=ft,J){var Mt=(0,k.getFuncByUnknownType)(10,J),zt=(0,k.getFuncByUnknownType)(10,rt),Vt=-1/0;T.forEach(function(Te){var nr=zt(Te);Vt<nr&&(Vt=nr)});var kt=0;T.forEach(function(Te,nr){nr===0?kt+=Vt||10:kt+=(Mt(Te)||0)+(Vt||10)}),b=kt/(2*Math.PI)}else!b&&!l&&!K?b=g.height>g.width?g.width/2:g.height/2:!l&&K?l=K:l&&!K&&(K=l);var st=mt*U,St=[];et==="topology"?St=g.topologyOrdering():et==="topology-directed"?St=g.topologyOrdering(!0):et==="degree"?St=g.degreeOrdering():St=T;for(var qt=Math.ceil(C/Z),re=0;re<C;++re){var Nt=b;!Nt&&l!==null&&K!==null&&(Nt=l+re*(K-l)/(C-1)),Nt||(Nt=10+re*100/(C-1));var be=X+re%qt*st+2*Math.PI/Z*Math.floor(re/qt);it||(be=W-re%qt*st-2*Math.PI/Z*Math.floor(re/qt)),St[re].x=O[0]+Math.cos(be)*Nt,St[re].y=O[1]+Math.sin(be)*Nt,St[re].weight=ft[re].all}return(p=g.onLayoutEnd)===null||p===void 0||p.call(g),{nodes:St,edges:this.edges}},v.prototype.topologyOrdering=function(p){p===void 0&&(p=!1);var g=this,T=g.degrees,w=g.edges,C=g.nodes,O=(0,k.clone)(C),b=g.nodeMap,l=[O[0]],K=[C[0]],Z=[],X=C.length;Z[0]=!0,E(O,w,b,p);var W=0;return O.forEach(function(U,et){if(et!==0)if((et===X-1||T[et].all!==T[et+1].all||N(l[W],U,w))&&!Z[et])l.push(U),K.push(C[b[U.id]]),Z[et]=!0,W++;else{for(var it=l[W].children,J=!1,rt=0;rt<it.length;rt++){var mt=b[it[rt]];if(T[mt].all===T[et].all&&!Z[mt]){l.push(O[mt]),K.push(C[b[O[mt].id]]),Z[mt]=!0,J=!0;break}}for(var pt=0;!J&&(Z[pt]||(l.push(O[pt]),K.push(C[b[O[pt].id]]),Z[pt]=!0,J=!0),pt++,pt!==X););}}),K},v.prototype.degreeOrdering=function(){var p=this,g=p.nodes,T=[],w=p.degrees;return g.forEach(function(C,O){C.degree=w[O].all,T.push(C)}),T.sort(I),T},v.prototype.getType=function(){return"circular"},v}(z.Base);S.CircularLayout=m},50023:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(g[w]=T[w])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(y){for(var v,p=1,g=arguments.length;p<g;p++){v=arguments[p];for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&(y[T]=v[T])}return y},z.apply(this,arguments)};Object.defineProperty(S,"__esModule",{value:!0}),S.ComboCombinedLayout=void 0;var k=M(17219),E=M(94416),N=M(78302),I=M(51709),m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{}},v.prototype.execute=function(){var p=this,g=p.nodes,T=p.center;if(!g||g.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(g.length===1){g[0].x=T[0],g[0].y=T[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},v.prototype.run=function(){var p,g=this,T=g.nodes,w=g.edges,C=g.combos,O=g.comboEdges,b=g.center,l={};T.forEach(function(Vt){l[Vt.id]=Vt});var K={};C.forEach(function(Vt){K[Vt.id]=Vt});var Z=g.getInnerGraphs(l),X=[],W=[],U={},et=!0;this.comboTrees.forEach(function(Vt){var kt=Z[Vt.id],st=z(z({},Vt),{x:kt.x||K[Vt.id].x,y:kt.y||K[Vt.id].y,fx:kt.fx||K[Vt.id].fx,fy:kt.fy||K[Vt.id].fy,mass:kt.mass||K[Vt.id].mass,size:kt.size});W.push(st),!isNaN(st.x)&&st.x!==0&&!isNaN(st.y)&&st.y!==0?et=!1:(st.x=Math.random()*100,st.y=Math.random()*100),X.push(Vt.id),(0,N.traverseTreeUp)(Vt,function(St){return St.id!==Vt.id&&(U[St.id]=Vt.id),!0})}),T.forEach(function(Vt){if(!(Vt.comboId&&K[Vt.comboId])){var kt=z({},Vt);W.push(kt),!isNaN(kt.x)&&kt.x!==0&&!isNaN(kt.y)&&kt.y!==0?et=!1:(kt.x=Math.random()*100,kt.y=Math.random()*100),X.push(Vt.id)}});var it=[];if(w.concat(O).forEach(function(Vt){var kt=U[Vt.source]||Vt.source,st=U[Vt.target]||Vt.target;kt!==st&&X.includes(kt)&&X.includes(st)&&it.push({source:kt,target:st})}),W!=null&&W.length){if(W.length===1)W[0].x=b[0],W[0].y=b[1];else{var J={nodes:W,edges:it},rt=this.outerLayout||new I.GForceLayout({gravity:1,factor:2,linkDistance:function(Vt,kt,st){var St,qt,re=((((St=kt.size)===null||St===void 0?void 0:St[0])||30)+(((qt=st.size)===null||qt===void 0?void 0:qt[0])||30))/2;return Math.min(re*1.5,700)}}),mt=(p=rt.getType)===null||p===void 0?void 0:p.call(rt);if(rt.updateCfg({center:b,kg:5,preventOverlap:!0,animate:!1}),et&&k.FORCE_LAYOUT_TYPE_MAP[mt]){var pt=W.length<100?new I.MDSLayout:new I.GridLayout;pt.layout(J)}rt.layout(J)}W.forEach(function(Vt){var kt=Z[Vt.id];if(!kt){var st=l[Vt.id];st&&(st.x=Vt.x,st.y=Vt.y);return}kt.visited=!0,kt.x=Vt.x,kt.y=Vt.y,kt.nodes.forEach(function(St){St.x+=Vt.x,St.y+=Vt.y})})}for(var ft=Object.keys(Z),Mt=function(Vt){var kt=ft[Vt],st=Z[kt];if(!st)return"continue";st.nodes.forEach(function(St){st.visited||(St.x+=st.x||0,St.y+=st.y||0),l[St.id]&&(l[St.id].x=St.x,l[St.id].y=St.y)}),K[kt]&&(K[kt].x=st.x,K[kt].y=st.y)},zt=ft.length-1;zt>=0;zt--)Mt(zt);return{nodes:T,edges:w,combos:C,comboEdges:O}},v.prototype.getInnerGraphs=function(p){var g=this,T=g.comboTrees,w=g.nodeSize,C=g.edges,O=g.comboPadding,b=g.spacing,l={},K=this.innerLayout||new I.ConcentricLayout({sortBy:"id"});return K.center=[0,0],K.preventOverlap=!0,K.nodeSpacing=b,(T||[]).forEach(function(Z){(0,N.traverseTreeUp)(Z,function(X){var W,U=(O==null?void 0:O(X))||10;if((0,N.isArray)(U)&&(U=Math.max.apply(Math,U)),!((W=X.children)===null||W===void 0)&&W.length){var it=X.children.map(function(st){if(st.itemType==="combo")return l[st.id];var St=p[st.id]||{};return z(z({},St),st)}),J=it.map(function(st){return st.id}),rt={nodes:it,edges:C.filter(function(st){return J.includes(st.source)&&J.includes(st.target)})},mt=1/0;it.forEach(function(st){var St;st.size||(st.size=((St=l[st.id])===null||St===void 0?void 0:St.size)||(w==null?void 0:w(st))||[30,30]),(0,N.isNumber)(st.size)&&(st.size=[st.size,st.size]),mt>st.size[0]&&(mt=st.size[0]),mt>st.size[1]&&(mt=st.size[1])}),K.layout(rt);var pt=(0,N.findMinMaxNodeXY)(it),ft=pt.minX,Mt=pt.minY,zt=pt.maxX,Vt=pt.maxY,kt=Math.max(zt-ft,Vt-Mt,mt)+U*2;l[X.id]={id:X.id,nodes:it,size:[kt,kt]}}else if(X.itemType==="combo"){var et=U?[U*2,U*2]:[30,30];l[X.id]={id:X.id,nodes:[],size:et}}return!0})}),l},v.prototype.initVals=function(){var p=this,g=p.nodeSize,T=p.spacing,w,C;if((0,N.isNumber)(T)?C=function(){return T}:(0,N.isFunction)(T)?C=T:C=function(){return 0},this.spacing=C,!g)w=function(X){var W=C(X);if(X.size){if((0,N.isArray)(X.size)){var U=X.size[0]>X.size[1]?X.size[0]:X.size[1];return(U+W)/2}if((0,N.isObject)(X.size)){var U=X.size.width>X.size.height?X.size.width:X.size.height;return(U+W)/2}return(X.size+W)/2}return 10+W/2};else if((0,N.isFunction)(g))w=function(X){var W=g(X),U=C(X);if((0,N.isArray)(X.size)){var et=X.size[0]>X.size[1]?X.size[0]:X.size[1];return(et+U)/2}return((W||10)+U)/2};else if((0,N.isArray)(g)){var O=g[0]>g[1]?g[0]:g[1],b=O/2;w=function(X){return b+C(X)/2}}else{var l=g/2;w=function(X){return l+C(X)/2}}this.nodeSize=w;var K=p.comboPadding,Z;(0,N.isNumber)(K)?Z=function(){return K}:(0,N.isArray)(K)?Z=function(){return Math.max.apply(null,K)}:(0,N.isFunction)(K)?Z=K:Z=function(){return 0},this.comboPadding=Z},v.prototype.getType=function(){return"comboCombined"},v}(E.Base);S.ComboCombinedLayout=m},5506:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var N=function(I,m){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(y[p]=v[p])},N(I,m)};return function(I,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");N(I,m);function y(){this.constructor=I}I.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.ComboForceLayout=void 0;var z=M(94416),k=M(78302),E=function(N){x(I,N);function I(m){var y=N.call(this)||this;return y.center=[0,0],y.maxIteration=100,y.gravity=10,y.comboGravity=10,y.linkDistance=10,y.alpha=1,y.alphaMin=.001,y.alphaDecay=1-Math.pow(y.alphaMin,1/300),y.alphaTarget=0,y.velocityDecay=.6,y.edgeStrength=.6,y.nodeStrength=30,y.preventOverlap=!1,y.preventNodeOverlap=!1,y.preventComboOverlap=!1,y.collideStrength=void 0,y.nodeCollideStrength=.5,y.comboCollideStrength=.5,y.comboSpacing=20,y.comboPadding=10,y.optimizeRangeFactor=1,y.onTick=function(){},y.onLayoutEnd=function(){},y.depthAttractiveForceScale=1,y.depthRepulsiveForceScale=2,y.nodes=[],y.edges=[],y.combos=[],y.comboTrees=[],y.width=300,y.height=300,y.bias=[],y.nodeMap={},y.oriComboMap={},y.indexMap={},y.comboMap={},y.previousLayouted=!1,y.updateCfg(m),y}return I.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},I.prototype.execute=function(){var m=this,y=m.nodes,v=m.center;if(m.comboTree={id:"comboTreeRoot",depth:-1,children:m.comboTrees},!y||y.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(y.length===1){y[0].x=v[0],y[0].y=v[1],m.onLayoutEnd&&m.onLayoutEnd();return}m.initVals(),m.run(),m.onLayoutEnd&&m.onLayoutEnd()},I.prototype.run=function(){var m=this,y=m.nodes,v=m.previousLayouted?m.maxIteration/5:m.maxIteration;!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight);var p=m.center,g=m.velocityDecay,T=m.comboMap;m.previousLayouted||m.initPos(T);for(var w=function(l){var K=[];y.forEach(function(Z,X){K[X]={x:0,y:0}}),m.applyCalculate(K),m.applyComboCenterForce(K),y.forEach(function(Z,X){!(0,k.isNumber)(Z.x)||!(0,k.isNumber)(Z.y)||(Z.x+=K[X].x*g,Z.y+=K[X].y*g)}),m.alpha+=(m.alphaTarget-m.alpha)*m.alphaDecay,m.onTick()},C=0;C<v;C++)w(C);var O=[0,0];y.forEach(function(l){!(0,k.isNumber)(l.x)||!(0,k.isNumber)(l.y)||(O[0]+=l.x,O[1]+=l.y)}),O[0]/=y.length,O[1]/=y.length;var b=[p[0]-O[0],p[1]-O[1]];y.forEach(function(l,K){!(0,k.isNumber)(l.x)||!(0,k.isNumber)(l.y)||(l.x+=b[0],l.y+=b[1])}),m.combos.forEach(function(l){var K=T[l.id];K&&K.empty&&(l.x=K.cx||l.x,l.y=K.cy||l.y)}),m.previousLayouted=!0},I.prototype.initVals=function(){var m=this,y=m.edges,v=m.nodes,p=m.combos,g={},T={},w={};v.forEach(function(Nt,be){T[Nt.id]=Nt,w[Nt.id]=be}),m.nodeMap=T,m.indexMap=w;var C={};p.forEach(function(Nt){C[Nt.id]=Nt}),m.oriComboMap=C,m.comboMap=m.getComboMap();var O=m.preventOverlap;m.preventComboOverlap=m.preventComboOverlap||O,m.preventNodeOverlap=m.preventNodeOverlap||O;var b=m.collideStrength;b&&(m.comboCollideStrength=b,m.nodeCollideStrength=b),m.comboCollideStrength=m.comboCollideStrength?m.comboCollideStrength:0,m.nodeCollideStrength=m.nodeCollideStrength?m.nodeCollideStrength:0;for(var l=0;l<y.length;++l){var K=(0,k.getEdgeTerminal)(y[l],"source"),Z=(0,k.getEdgeTerminal)(y[l],"target");g[K]?g[K]++:g[K]=1,g[Z]?g[Z]++:g[Z]=1}for(var X=[],l=0;l<y.length;++l){var K=(0,k.getEdgeTerminal)(y[l],"source"),Z=(0,k.getEdgeTerminal)(y[l],"target");X[l]=g[K]/(g[K]+g[Z])}this.bias=X;var W=m.nodeSize,U=m.nodeSpacing,et,it;if((0,k.isNumber)(U)?it=function(){return U}:(0,k.isFunction)(U)?it=U:it=function(){return 0},this.nodeSpacing=it,!W)et=function(Nt){if(Nt.size){if((0,k.isArray)(Nt.size)){var be=Nt.size[0]>Nt.size[1]?Nt.size[0]:Nt.size[1];return be/2}if((0,k.isObject)(Nt.size)){var be=Nt.size.width>Nt.size.height?Nt.size.width:Nt.size.height;return be/2}return Nt.size/2}return 10};else if((0,k.isFunction)(W))et=function(Nt){return W(Nt)};else if((0,k.isArray)(W)){var J=W[0]>W[1]?W[0]:W[1],rt=J/2;et=function(Nt){return rt}}else{var mt=W/2;et=function(Nt){return mt}}this.nodeSize=et;var pt=m.comboSpacing,ft;(0,k.isNumber)(pt)?ft=function(){return pt}:(0,k.isFunction)(pt)?ft=pt:ft=function(){return 0},this.comboSpacing=ft;var Mt=m.comboPadding,zt;(0,k.isNumber)(Mt)?zt=function(){return Mt}:(0,k.isArray)(Mt)?zt=function(){return Math.max.apply(null,Mt)}:(0,k.isFunction)(Mt)?zt=Mt:zt=function(){return 0},this.comboPadding=zt;var Vt=this.linkDistance,kt;Vt||(Vt=10),(0,k.isNumber)(Vt)?kt=function(Nt){return Vt}:kt=Vt,this.linkDistance=kt;var st=this.edgeStrength,St;st||(st=1),(0,k.isNumber)(st)?St=function(Nt){return st}:St=st,this.edgeStrength=St;var qt=this.nodeStrength,re;qt||(qt=30),(0,k.isNumber)(qt)?re=function(Nt){return qt}:re=qt,this.nodeStrength=re},I.prototype.initPos=function(m){var y=this,v=y.nodes;v.forEach(function(p,g){var T=p.comboId,w=m[T];T&&w?(p.x=w.cx+100/(g+1),p.y=w.cy+100/(g+1)):(p.x=100/(g+1),p.y=100/(g+1))})},I.prototype.getComboMap=function(){var m=this,y=m.nodeMap,v=m.comboTrees,p=m.oriComboMap,g={};return(v||[]).forEach(function(T){var w=[];(0,k.traverseTreeUp)(T,function(C){if(C.itemType==="node"||!p[C.id])return!0;if(g[C.id]===void 0){var O={id:C.id,name:C.id,cx:0,cy:0,count:0,depth:m.oriComboMap[C.id].depth||0,children:[]};g[C.id]=O}var b=C.children;b&&b.forEach(function(Z){if(!g[Z.id]&&!y[Z.id])return!0;w.push(Z)});var l=g[C.id];if(l.cx=0,l.cy=0,w.length===0){l.empty=!0;var K=p[C.id];l.cx=K.x,l.cy=K.y}return w.forEach(function(Z){if(l.count++,Z.itemType!=="node"){var X=g[Z.id];(0,k.isNumber)(X.cx)&&(l.cx+=X.cx),(0,k.isNumber)(X.cy)&&(l.cy+=X.cy);return}var W=y[Z.id];W&&((0,k.isNumber)(W.x)&&(l.cx+=W.x),(0,k.isNumber)(W.y)&&(l.cy+=W.y))}),l.cx/=l.count||1,l.cy/=l.count||1,l.children=w,!0})}),g},I.prototype.applyComboCenterForce=function(m){var y=this,v=y.gravity,p=y.comboGravity||v,g=this.alpha,T=y.comboTrees,w=y.indexMap,C=y.nodeMap,O=y.comboMap;(T||[]).forEach(function(b){(0,k.traverseTreeUp)(b,function(l){if(l.itemType==="node")return!0;var K=O[l.id];if(!K)return!0;var Z=O[l.id],X=(Z.depth+1)/10*.5,W=Z.cx,U=Z.cy;return Z.cx=0,Z.cy=0,Z.children.forEach(function(et){if(et.itemType!=="node"){var it=O[et.id];it&&(0,k.isNumber)(it.cx)&&(Z.cx+=it.cx),it&&(0,k.isNumber)(it.cy)&&(Z.cy+=it.cy);return}var J=C[et.id],rt=J.x-W||.005,mt=J.y-U||.005,pt=Math.sqrt(rt*rt+mt*mt),ft=w[J.id],Mt=p*g/pt*X;m[ft].x-=rt*Mt,m[ft].y-=mt*Mt,(0,k.isNumber)(J.x)&&(Z.cx+=J.x),(0,k.isNumber)(J.y)&&(Z.cy+=J.y)}),Z.cx/=Z.count||1,Z.cy/=Z.count||1,!0})})},I.prototype.applyCalculate=function(m){var y=this,v=y.comboMap,p=y.nodes,g={};p.forEach(function(w,C){p.forEach(function(O,b){if(!(C<b)){var l=w.x-O.x||.005,K=w.y-O.y||.005,Z=l*l+K*K,X=Math.sqrt(Z);Z<1&&(Z=X),g["".concat(w.id,"-").concat(O.id)]={vx:l,vy:K,vl2:Z,vl:X},g["".concat(O.id,"-").concat(w.id)]={vl2:Z,vl:X,vx:-l,vy:-K}}})}),y.updateComboSizes(v),y.calRepulsive(m,g),y.calAttractive(m,g);var T=y.preventComboOverlap;T&&y.comboNonOverlapping(m,v)},I.prototype.updateComboSizes=function(m){var y=this,v=y.comboTrees,p=y.nodeMap,g=y.nodeSize,T=y.comboSpacing,w=y.comboPadding;(v||[]).forEach(function(C){var O=[];(0,k.traverseTreeUp)(C,function(b){if(b.itemType==="node")return!0;var l=m[b.id];if(!l)return!1;var K=b.children;K&&K.forEach(function(W){!m[W.id]&&!p[W.id]||O.push(W)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,O.forEach(function(W){if(W.itemType!=="node")return!0;var U=p[W.id];if(!U)return!0;var et=g(U),it=U.x-et,J=U.y-et,rt=U.x+et,mt=U.y+et;l.minX>it&&(l.minX=it),l.minY>J&&(l.minY=J),l.maxX<rt&&(l.maxX=rt),l.maxY<mt&&(l.maxY=mt)});var Z=y.oriComboMap[b.id].size||10;(0,k.isArray)(Z)&&(Z=Z[0]);var X=Math.max(l.maxX-l.minX,l.maxY-l.minY,Z);return l.r=X/2+T(l)/2+w(l),!0})})},I.prototype.comboNonOverlapping=function(m,y){var v=this,p=v.comboTree,g=v.comboCollideStrength,T=v.indexMap,w=v.nodeMap;(0,k.traverseTreeUp)(p,function(C){if(!y[C.id]&&!w[C.id]&&C.id!=="comboTreeRoot")return!1;var O=C.children;return O&&O.length>1&&O.forEach(function(b,l){if(b.itemType==="node")return!1;var K=y[b.id];K&&O.forEach(function(Z,X){if(l<=X||Z.itemType==="node")return!1;var W=y[Z.id];if(!W)return!1;var U=K.cx-W.cx||.005,et=K.cy-W.cy||.005,it=U*U+et*et,J=K.r||1,rt=W.r||1,mt=J+rt,pt=rt*rt,ft=J*J;if(it<mt*mt){var Mt=b.children;if(!Mt||Mt.length===0)return!1;var zt=Z.children;if(!zt||zt.length===0)return!1;var Vt=Math.sqrt(it),kt=(mt-Vt)/Vt*g,st=U*kt,St=et*kt,qt=pt/(ft+pt),re=1-qt;Mt.forEach(function(Nt){if(Nt.itemType!=="node")return!1;if(w[Nt.id]){var be=T[Nt.id];zt.forEach(function(Te){if(Te.itemType!=="node"||!w[Te.id])return!1;var nr=T[Te.id];m[be].x+=st*qt,m[be].y+=St*qt,m[nr].x-=st*re,m[nr].y-=St*re})}})}})}),!0})},I.prototype.calRepulsive=function(m,y){var v=this,p=v.nodes,g=v.width*v.optimizeRangeFactor,T=v.nodeStrength,w=v.alpha,C=v.nodeCollideStrength,O=v.preventNodeOverlap,b=v.nodeSize,l=v.nodeSpacing,K=v.depthRepulsiveForceScale,Z=v.center;p.forEach(function(X,W){if(!(!X.x||!X.y)){if(Z){var U=v.gravity,et=X.x-Z[0]||.005,it=X.y-Z[1]||.005,J=Math.sqrt(et*et+it*it);m[W].x-=et*U*w/J,m[W].y-=it*U*w/J}p.forEach(function(rt,mt){if(W!==mt&&!(!rt.x||!rt.y)){var pt=y["".concat(X.id,"-").concat(rt.id)],ft=pt.vl2,Mt=pt.vl;if(!(Mt>g)){var zt=y["".concat(X.id,"-").concat(rt.id)],Vt=zt.vx,kt=zt.vy,st=Math.log(Math.abs(rt.depth-X.depth)/10)+1||1;st=st<1?1:st,rt.comboId!==X.comboId&&(st+=1);var St=st?Math.pow(K,st):1,qt=T(rt)*w/ft*St;if(m[W].x+=Vt*qt,m[W].y+=kt*qt,W<mt&&O){var re=b(X)+l(X)||1,Nt=b(rt)+l(rt)||1,be=re+Nt;if(ft<be*be){var Te=(be-Mt)/Mt*C,nr=Nt*Nt,Rt=nr/(re*re+nr),Dt=Vt*Te,At=kt*Te;m[W].x+=Dt*Rt,m[W].y+=At*Rt,Rt=1-Rt,m[mt].x-=Dt*Rt,m[mt].y-=At*Rt}}}}})}})},I.prototype.calAttractive=function(m,y){var v=this,p=v.edges,g=v.linkDistance,T=v.alpha,w=v.edgeStrength,C=v.bias,O=v.depthAttractiveForceScale;p.forEach(function(b,l){var K=(0,k.getEdgeTerminal)(b,"source"),Z=(0,k.getEdgeTerminal)(b,"target");if(!(!K||!Z||K===Z)){var X=v.indexMap[K],W=v.indexMap[Z],U=v.nodeMap[K],et=v.nodeMap[Z];if(!(!U||!et)){var it=U.depth===et.depth?0:Math.log(Math.abs(U.depth-et.depth)/10);U.comboId===et.comboId&&(it=it/2);var J=it?Math.pow(O,it):1;if(U.comboId!==et.comboId&&J===1?J=O/2:U.comboId===et.comboId&&(J=2),!(!(0,k.isNumber)(et.x)||!(0,k.isNumber)(U.x)||!(0,k.isNumber)(et.y)||!(0,k.isNumber)(U.y))){var rt=y["".concat(Z,"-").concat(K)],mt=rt.vl,pt=rt.vx,ft=rt.vy,Mt=(mt-g(b))/mt*T*w(b)*J,zt=pt*Mt,Vt=ft*Mt,kt=C[l];m[W].x-=zt*kt,m[W].y-=Vt*kt,m[X].x+=zt*(1-kt),m[X].y+=Vt*(1-kt)}}}})},I.prototype.getType=function(){return"comboForce"},I}(z.Base);S.ComboForceLayout=E},90127:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var N=function(I,m){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(y[p]=v[p])},N(I,m)};return function(I,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");N(I,m);function y(){this.constructor=I}I.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.ConcentricLayout=void 0;var z=M(78302),k=M(94416),E=function(N){x(I,N);function I(m){var y=N.call(this)||this;return y.nodeSize=30,y.minNodeSpacing=10,y.nodeSpacing=10,y.preventOverlap=!1,y.equidistant=!1,y.startAngle=3/2*Math.PI,y.clockwise=!0,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.onLayoutEnd=function(){},y.updateCfg(m),y}return I.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},I.prototype.execute=function(){var m,y,v=this,p=v.nodes,g=v.edges,T=p.length;if(T===0){(m=v.onLayoutEnd)===null||m===void 0||m.call(v);return}!v.width&&typeof window!="undefined"&&(v.width=window.innerWidth),!v.height&&typeof window!="undefined"&&(v.height=window.innerHeight),v.center||(v.center=[v.width/2,v.height/2]);var w=v.center;if(T===1){p[0].x=w[0],p[0].y=w[1],(y=v.onLayoutEnd)===null||y===void 0||y.call(v);return}var C=v.nodeSize,O=v.nodeSpacing,b=[],l,K=0;(0,z.isArray)(C)?l=Math.max(C[0],C[1]):l=C,(0,z.isArray)(O)?K=Math.max(O[0],O[1]):(0,z.isNumber)(O)&&(K=O),p.forEach(function(st){b.push(st);var St=l;(0,z.isArray)(st.size)?St=Math.max(st.size[0],st.size[1]):(0,z.isNumber)(st.size)?St=st.size:(0,z.isObject)(st.size)&&(St=Math.max(st.size.width,st.size.height)),l=Math.max(l,St),(0,z.isFunction)(O)&&(K=Math.max(O(st),K))}),v.clockwise=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise;var Z={},X={};if(b.forEach(function(st,St){Z[st.id]=st,X[st.id]=St}),(v.sortBy==="degree"||!(0,z.isString)(v.sortBy)||b[0][v.sortBy]===void 0)&&(v.sortBy="degree",!(0,z.isNumber)(p[0].degree))){var W=(0,z.getDegree)(p.length,X,g);b.forEach(function(st,St){st.degree=W[St].all})}b.sort(function(st,St){return St[v.sortBy]-st[v.sortBy]}),v.maxValueNode=b[0],v.maxLevelDiff=v.maxLevelDiff||v.maxValueNode[v.sortBy]/4;var U=[[]],et=U[0];b.forEach(function(st){if(et.length>0){var St=Math.abs(et[0][v.sortBy]-st[v.sortBy]);v.maxLevelDiff&&St>=v.maxLevelDiff&&(et=[],U.push(et))}et.push(st)});var it=l+(K||v.minNodeSpacing);if(!v.preventOverlap){var J=U.length>0&&U[0].length>1,rt=Math.min(v.width,v.height)/2-it,mt=rt/(U.length+(J?1:0));it=Math.min(it,mt)}var pt=0;if(U.forEach(function(st){var St=v.sweep;St===void 0&&(St=2*Math.PI-2*Math.PI/st.length);var qt=st.dTheta=St/Math.max(1,st.length-1);if(st.length>1&&v.preventOverlap){var re=Math.cos(qt)-Math.cos(0),Nt=Math.sin(qt)-Math.sin(0),be=Math.sqrt(it*it/(re*re+Nt*Nt));pt=Math.max(be,pt)}st.r=pt,pt+=it}),v.equidistant){for(var ft=0,Mt=0,zt=0;zt<U.length;zt++){var Vt=U[zt],kt=Vt.r-Mt;ft=Math.max(ft,kt)}Mt=0,U.forEach(function(st,St){St===0&&(Mt=st.r),st.r=Mt,Mt+=ft})}return U.forEach(function(st){var St=st.dTheta,qt=st.r;st.forEach(function(re,Nt){var be=v.startAngle+(v.clockwise?1:-1)*St*Nt;re.x=w[0]+qt*Math.cos(be),re.y=w[1]+qt*Math.sin(be)})}),v.onLayoutEnd&&v.onLayoutEnd(),{nodes:p,edges:g}},I.prototype.getType=function(){return"concentric"},I}(k.Base);S.ConcentricLayout=E},17219:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.FORCE_LAYOUT_TYPE_MAP=S.LAYOUT_MESSAGE=void 0,S.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},S.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},98989:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(g[w]=T[w])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(S,"__esModule",{value:!0}),S.DagreLayout=void 0;var k=z(M(99585)),E=M(78302),N=M(94416),I=M(31892),m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.ranksep=50,g.controlPoints=!1,g.sortByCombo=!1,g.edgeLabelSpace=!0,g.radial=!1,g.nodes=[],g.edges=[],g.onLayoutEnd=function(){},g.layoutNode=function(T){var w=g,C=w.nodes,O=C.find(function(l){return l.id===T});if(O){var b=O.layout!==!1;return b}return!0},g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},v.prototype.execute=function(){var p=this,g,T,w=this,C=w.nodes,O=w.nodeSize,b=w.rankdir,l=w.combos,K=w.begin,Z=w.radial;if(C){var X=w.edges||[],W=new I.Graph({multigraph:!0,compound:!0}),U;O?(0,E.isArray)(O)?U=function(){return O}:U=function(){return[O,O]}:U=function(bt){return bt.size?(0,E.isArray)(bt.size)?bt.size:(0,E.isObject)(bt.size)?[bt.size.width||40,bt.size.height||40]:[bt.size,bt.size]:[40,40]};var et=(0,E.getFunc)(w.ranksep,50,w.ranksepFunc),it=(0,E.getFunc)(w.nodesep,50,w.nodesepFunc),J=it,rt=et;(b==="LR"||b==="RL")&&(J=et,rt=it),W.setDefaultEdgeLabel(function(){return{}}),W.setGraph(w);var mt={};this.sortByCombo&&l&&l.forEach(function(bt){bt.parentId&&(mt[bt.parentId]||(mt[bt.parentId]=!0,W.setNode(bt.parentId,{})),W.setParent(bt.id,bt.parentId))}),C.filter(function(bt){return bt.layout!==!1}).forEach(function(bt){var wt=U(bt),D=rt(bt),tt=J(bt),Ot=wt[0]+2*tt,ct=wt[1]+2*D,ie=bt.layer;(0,E.isNumber)(ie)?W.setNode(bt.id,{width:Ot,height:ct,layer:ie}):W.setNode(bt.id,{width:Ot,height:ct}),p.sortByCombo&&bt.comboId&&(mt[bt.comboId]||(mt[bt.comboId]=!0,W.setNode(bt.comboId,{})),W.setParent(bt.id,bt.comboId))}),X.forEach(function(bt){var wt=(0,E.getEdgeTerminal)(bt,"source"),D=(0,E.getEdgeTerminal)(bt,"target");p.layoutNode(wt)&&p.layoutNode(D)&&W.setEdge(wt,D,{weight:bt.weight||1})});var pt=void 0;!((g=w.preset)===null||g===void 0)&&g.nodes&&(pt=new I.Graph({multigraph:!0,compound:!0}),w.preset.nodes.forEach(function(bt){pt==null||pt.setNode(bt.id,bt)})),k.default.layout(W,{prevGraph:pt,edgeLabelSpace:w.edgeLabelSpace,keepNodeOrder:Boolean(!!w.nodeOrder),nodeOrder:w.nodeOrder});var ft=[0,0];if(K){var Mt=1/0,zt=1/0;W.nodes().forEach(function(bt){var wt=W.node(bt);Mt>wt.x&&(Mt=wt.x),zt>wt.y&&(zt=wt.y)}),W.edges().forEach(function(bt){var wt,D=W.edge(bt);(wt=D.points)===null||wt===void 0||wt.forEach(function(tt){Mt>tt.x&&(Mt=tt.x),zt>tt.y&&(zt=tt.y)})}),ft[0]=K[0]-Mt,ft[1]=K[1]-zt}if(Z){var Vt=this,kt=Vt.focusNode,st=Vt.ranksep,St=Vt.getRadialPos,qt=(0,E.isString)(kt)?kt:kt==null?void 0:kt.id,re=qt?(T=W.node(qt))===null||T===void 0?void 0:T._rank:0,Nt=[],be=b==="LR"||b==="RL",Te=be?"y":"x",nr=be?"height":"width",Rt=1/0,Dt=-1/0;W.nodes().forEach(function(bt){var wt=W.node(bt),D=C.findIndex(function(Ge){return Ge.id===bt});if(C[D]){var tt=it(C[D]);if(re===0)Nt[wt._rank]||(Nt[wt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Nt[wt._rank].nodes.push(bt),Nt[wt._rank].totalWidth+=tt*2+wt[nr],Nt[wt._rank].maxSize<Math.max(wt.width,wt.height)&&(Nt[wt._rank].maxSize=Math.max(wt.width,wt.height));else{var Ot=wt._rank-re;if(Ot===0)Nt[Ot]||(Nt[Ot]={nodes:[],totalWidth:0,maxSize:-1/0}),Nt[Ot].nodes.push(bt),Nt[Ot].totalWidth+=tt*2+wt[nr],Nt[Ot].maxSize<Math.max(wt.width,wt.height)&&(Nt[Ot].maxSize=Math.max(wt.width,wt.height));else{var ct=Math.abs(Ot);Nt[ct]||(Nt[ct]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Nt[ct].totalWidth+=tt*2+wt[nr],Nt[ct].maxSize<Math.max(wt.width,wt.height)&&(Nt[ct].maxSize=Math.max(wt.width,wt.height)),Ot<0?Nt[ct].left.push(bt):Nt[ct].right.push(bt)}}var ie=wt[Te]-wt[nr]/2-tt,pe=wt[Te]+wt[nr]/2+tt;ie<Rt&&(Rt=ie),pe>Dt&&(Dt=pe)}});var At=st||50,Xt={},$t=(Dt-Rt)/.9,Tt=[(Rt+Dt-$t)*.5,(Rt+Dt+$t)*.5],Kt=function(bt,wt,D,tt){D===void 0&&(D=-1/0),tt===void 0&&(tt=[0,1]);var Ot=D;return bt.forEach(function(ct){var ie=W.node(ct);Xt[ct]=wt;var pe=St(ie[Te],Tt,$t,wt,tt),Ge=pe.x,Re=pe.y,Je=C.findIndex(function(ce){return ce.id===ct});if(C[Je]){C[Je].x=Ge+ft[0],C[Je].y=Re+ft[1],C[Je]._order=ie._order;var Ve=et(C[Je]);Ot<Ve&&(Ot=Ve)}}),Ot},Ee=!0,vt=0;Nt.forEach(function(bt){var wt,D,tt,Ot,ct,ie,pe;if(!(!(!((wt=bt==null?void 0:bt.nodes)===null||wt===void 0)&&wt.length)&&!(!((D=bt==null?void 0:bt.left)===null||D===void 0)&&D.length)&&!(!((tt=bt==null?void 0:bt.right)===null||tt===void 0)&&tt.length))){if(Ee&&bt.nodes.length===1){var Ge=C.findIndex(function(Ve){return Ve.id===bt.nodes[0]});C[Ge].x=ft[0],C[Ge].y=ft[1],Xt[bt.nodes[0]]=0,At=et(C[Ge]),Ee=!1;return}At=Math.max(At,bt.totalWidth/(2*Math.PI));var Re=-1/0;if(re===0||!((Ot=bt.nodes)===null||Ot===void 0)&&Ot.length)Re=Kt(bt.nodes,At,Re,[0,1]);else{var Je=((ct=bt.left)===null||ct===void 0?void 0:ct.length)/(((ie=bt.left)===null||ie===void 0?void 0:ie.length)+((pe=bt.right)===null||pe===void 0?void 0:pe.length));Re=Kt(bt.left,At,Re,[0,Je]),Re=Kt(bt.right,At,Re,[Je+.05,1])}At+=Re,Ee=!1,vt-bt.maxSize}}),W.edges().forEach(function(bt){var wt,D,tt,Ot=W.edge(bt),ct=X.findIndex(function(Le){var je=(0,E.getEdgeTerminal)(Le,"source"),Be=(0,E.getEdgeTerminal)(Le,"target");return je===bt.v&&Be===bt.w});if(w.edgeLabelSpace&&w.controlPoints&&X[ct].type!=="loop"){var ie=Te==="x"?"y":"x",pe=(wt=Ot==null?void 0:Ot.points)===null||wt===void 0?void 0:wt.slice(1,Ot.points.length-1),Ge=[],Re=(D=W.node(bt.v))===null||D===void 0?void 0:D[ie],Je=Re-((tt=W.node(bt.w))===null||tt===void 0?void 0:tt[ie]),Ve=Xt[bt.v],ce=Ve-Xt[bt.w];pe==null||pe.forEach(function(Le){var je=(Le[ie]-Re)/Je*ce+Ve,Be=St(Le[Te],Tt,$t,je);Ge.push({x:Be.x+ft[0],y:Be.y+ft[1]})}),X[ct].controlPoints=Ge}})}else W.nodes().forEach(function(bt){var wt=W.node(bt),D=C.findIndex(function(tt){return tt.id===bt});C[D]&&(C[D].x=wt.x+ft[0],C[D].y=wt.y+ft[1],C[D]._order=wt._order)}),W.edges().forEach(function(bt){var wt,D=W.edge(bt),tt=X.findIndex(function(Ot){var ct=(0,E.getEdgeTerminal)(Ot,"source"),ie=(0,E.getEdgeTerminal)(Ot,"target");return ct===bt.v&&ie===bt.w});w.edgeLabelSpace&&w.controlPoints&&X[tt].type!=="loop"&&(X[tt].controlPoints=(wt=D==null?void 0:D.points)===null||wt===void 0?void 0:wt.slice(1,D.points.length-1),X[tt].controlPoints.forEach(function(Ot){Ot.x+=ft[0],Ot.y+=ft[1]}))});return w.onLayoutEnd&&w.onLayoutEnd(),{nodes:C,edges:X}}},v.prototype.getRadialPos=function(p,g,T,w,C){C===void 0&&(C=[0,1]);var O=(p-g[0])/T;O=O*(C[1]-C[0])+C[0];var b=O*2*Math.PI;return{x:Math.cos(b)*w,y:Math.sin(b)*w}},v.prototype.getType=function(){return"dagre"},v}(N.Base);S.DagreLayout=m},31892:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var E=function(N,I){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(m[v]=y[v])},E(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");E(N,I);function m(){this.constructor=N}N.prototype=I===null?Object.create(I):(m.prototype=I.prototype,new m)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.Graph=void 0;var z=M(20156),k=function(E){x(N,E);function N(){return E!==null&&E.apply(this,arguments)||this}return N}(z.Graph);S.Graph=k},99585:function(le,S,M){"use strict";var x=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(S,"__esModule",{value:!0});var z=x(M(14354)),k=M(55998);S.default={layout:z.default,util:{time:k.time,notime:k.notime}}},9187:function(le,S,M){"use strict";var x=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(S,"__esModule",{value:!0});var z=x(M(74668)),k=function(I){var m=function(v){return function(p){var g;return((g=v.edge(p))===null||g===void 0?void 0:g.weight)||1}},y=I.graph().acyclicer==="greedy"?(0,z.default)(I,m(I)):E(I);y==null||y.forEach(function(v){var p=I.edge(v);I.removeEdgeObj(v),p.forwardName=v.name,p.reversed=!0,I.setEdge(v.w,v.v,p,"rev-".concat(Math.random()))})},E=function(I){var m=[],y={},v={},p=function(g){var T;v[g]||(v[g]=!0,y[g]=!0,(T=I.outEdges(g))===null||T===void 0||T.forEach(function(w){y[w.w]?m.push(w):p(w.w)}),delete y[g])};return I.nodes().forEach(p),m},N=function(I){I.edges().forEach(function(m){var y=I.edge(m);if(y.reversed){I.removeEdgeObj(m);var v=y.forwardName;delete y.reversed,delete y.forwardName,I.setEdge(m.w,m.v,y,v)}})};S.default={run:k,undo:N}},41054:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(55998),z=function(E){var N,I=function(m){var y=E.children(m),v=E.node(m);if(y!=null&&y.length&&y.forEach(function(T){return I(T)}),v.hasOwnProperty("minRank")){v.borderLeft=[],v.borderRight=[];for(var p=v.minRank,g=v.maxRank+1;p<g;p+=1)k(E,"borderLeft","_bl",m,v,p),k(E,"borderRight","_br",m,v,p)}};(N=E.children())===null||N===void 0||N.forEach(function(m){return I(m)})},k=function(E,N,I,m,y,v){var p={rank:v,borderType:N,width:0,height:0},g=y[N][v-1],T=(0,x.addDummyNode)(E,"border",p,I);y[N][v]=T,E.setParent(T,m),g&&E.setEdge(g,T,{weight:1})};S.default=z},16641:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(y){var v,p=(v=y.graph().rankdir)===null||v===void 0?void 0:v.toLowerCase();(p==="lr"||p==="rl")&&z(y)},x=function(y){var v,p=(v=y.graph().rankdir)===null||v===void 0?void 0:v.toLowerCase();(p==="bt"||p==="rl")&&E(y),(p==="lr"||p==="rl")&&(I(y),z(y))},z=function(y){y.nodes().forEach(function(v){k(y.node(v))}),y.edges().forEach(function(v){k(y.edge(v))})},k=function(y){var v=y.width;y.width=y.height,y.height=v},E=function(y){y.nodes().forEach(function(v){N(y.node(v))}),y.edges().forEach(function(v){var p,g=y.edge(v);(p=g.points)===null||p===void 0||p.forEach(function(T){return N(T)}),g.hasOwnProperty("y")&&N(g)})},N=function(y){y!=null&&y.y&&(y.y=-y.y)},I=function(y){y.nodes().forEach(function(v){m(y.node(v))}),y.edges().forEach(function(v){var p,g=y.edge(v);(p=g.points)===null||p===void 0||p.forEach(function(T){return m(T)}),g.hasOwnProperty("x")&&m(g)})},m=function(y){var v=y.x;y.x=y.y,y.y=v};S.default={adjust:M,undo:x}},90679:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(k,E){if(k!=="next"&&k!=="prev")return E},x=function(k){k.prev.next=k.next,k.next.prev=k.prev,delete k.next,delete k.prev},z=function(){function k(){var E={};E.prev=E,E.next=E.prev,this.shortcut=E}return k.prototype.dequeue=function(){var E=this.shortcut,N=E.prev;if(N&&N!==E)return x(N),N},k.prototype.enqueue=function(E){var N=this.shortcut;E.prev&&E.next&&x(E),E.next=N.next,N.next.prev=E,N.next=E,E.prev=N},k.prototype.toString=function(){for(var E=[],N=this.shortcut,I=N.prev;I!==N;)E.push(JSON.stringify(I,M)),I=I==null?void 0:I.prev;return"[".concat(E.join(", "),"]")},k}();S.default=z},74668:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var w=function(C,O){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,l){b.__proto__=l}||function(b,l){for(var K in l)Object.prototype.hasOwnProperty.call(l,K)&&(b[K]=l[K])},w(C,O)};return function(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");w(C,O);function b(){this.constructor=C}C.prototype=O===null?Object.create(O):(b.prototype=O.prototype,new b)}}(),z=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(S,"__esModule",{value:!0});var k=z(M(90679)),E=M(20156),N=function(w){x(C,w);function C(){return w!==null&&w.apply(this,arguments)||this}return C}(k.default),I=function(w){x(C,w);function C(){return w!==null&&w.apply(this,arguments)||this}return C}(E.Graph),m=function(){return 1},y=function(w,C){var O;if(w.nodeCount()<=1)return[];var b=g(w,C||m),l=v(b.graph,b.buckets,b.zeroIdx);return(O=l.map(function(K){return w.outEdges(K.v,K.w)}))===null||O===void 0?void 0:O.flat()},v=function(w,C,O){for(var b=[],l=C[C.length-1],K=C[0],Z;w.nodeCount();){for(;Z=K.dequeue();)p(w,C,O,Z);for(;Z=l.dequeue();)p(w,C,O,Z);if(w.nodeCount()){for(var X=C.length-2;X>0;--X)if(Z=C[X].dequeue(),Z){b=b.concat(p(w,C,O,Z,!0));break}}}return b},p=function(w,C,O,b,l){var K,Z,X=[];return(K=w.inEdges(b.v))===null||K===void 0||K.forEach(function(W){var U=w.edge(W),et=w.node(W.v);l&&X.push({v:W.v,w:W.w,in:0,out:0}),et.out===void 0&&(et.out=0),et.out-=U,T(C,O,et)}),(Z=w.outEdges(b.v))===null||Z===void 0||Z.forEach(function(W){var U=w.edge(W),et=W.w,it=w.node(et);it.in===void 0&&(it.in=0),it.in-=U,T(C,O,it)}),w.removeNode(b.v),l?X:void 0},g=function(w,C){var O=new I,b=0,l=0;w.nodes().forEach(function(U){O.setNode(U,{v:U,in:0,out:0})}),w.edges().forEach(function(U){var et=O.edge(U)||0,it=(C==null?void 0:C(U))||1,J=et+it;O.setEdge(U.v,U.w,J),l=Math.max(l,O.node(U.v).out+=it),b=Math.max(b,O.node(U.w).in+=it)});for(var K=[],Z=l+b+3,X=0;X<Z;X++)K.push(new N);var W=b+1;return O.nodes().forEach(function(U){T(K,W,O.node(U))}),{buckets:K,zeroIdx:W,graph:O}},T=function(w,C,O){O.out?O.in?w[O.out-O.in+C].enqueue(O):w[w.length-1].enqueue(O):w[0].enqueue(O)};S.default=y},14354:function(le,S,M){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(Rt){for(var Dt,At=1,Xt=arguments.length;At<Xt;At++){Dt=arguments[At];for(var $t in Dt)Object.prototype.hasOwnProperty.call(Dt,$t)&&(Rt[$t]=Dt[$t])}return Rt},x.apply(this,arguments)},z=this&&this.__importDefault||function(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}};Object.defineProperty(S,"__esModule",{value:!0});var k=z(M(9187)),E=z(M(97910)),N=z(M(68750)),I=M(55998),m=z(M(53134)),y=z(M(85059)),v=z(M(41054)),p=z(M(16641)),g=z(M(61795)),T=z(M(11977)),w=z(M(1745)),C=M(31892),O=function(Rt,Dt){var At=Dt&&Dt.debugTiming?I.time:I.notime;At("layout",function(){Dt&&!Dt.keepNodeOrder&&Dt.prevGraph&&At("  inheritOrder",function(){l(Rt,Dt.prevGraph)});var Xt=At("  buildLayoutGraph",function(){return mt(Rt)});Dt&&Dt.edgeLabelSpace===!1||At("  makeSpaceForEdgeLabels",function(){pt(Xt)});try{At("  runLayout",function(){b(Xt,At,Dt)})}catch($t){if($t.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,$t);return}throw $t}At("  updateInputGraph",function(){K(Rt,Xt)})})},b=function(Rt,Dt,At){Dt("    removeSelfEdges",function(){re(Rt)}),Dt("    acyclic",function(){k.default.run(Rt)}),Dt("    nestingGraph.run",function(){y.default.run(Rt)}),Dt("    rank",function(){(0,N.default)((0,I.asNonCompoundGraph)(Rt))}),Dt("    injectEdgeLabelProxies",function(){ft(Rt)}),Dt("    removeEmptyRanks",function(){(0,I.removeEmptyRanks)(Rt)}),Dt("    nestingGraph.cleanup",function(){y.default.cleanup(Rt)}),Dt("    normalizeRanks",function(){(0,I.normalizeRanks)(Rt)}),Dt("    assignRankMinMax",function(){Mt(Rt)}),Dt("    removeEdgeLabelProxies",function(){zt(Rt)}),Dt("    normalize.run",function(){E.default.run(Rt)}),Dt("    parentDummyChains",function(){(0,m.default)(Rt)}),Dt("    addBorderSegments",function(){(0,v.default)(Rt)}),At&&At.keepNodeOrder&&Dt("    initDataOrder",function(){(0,w.default)(Rt,At.nodeOrder)}),Dt("    order",function(){(0,g.default)(Rt)}),Dt("    insertSelfEdges",function(){Nt(Rt)}),Dt("    adjustCoordinateSystem",function(){p.default.adjust(Rt)}),Dt("    position",function(){(0,T.default)(Rt)}),Dt("    positionSelfEdges",function(){be(Rt)}),Dt("    removeBorderNodes",function(){qt(Rt)}),Dt("    normalize.undo",function(){E.default.undo(Rt)}),Dt("    fixupEdgeLabelCoords",function(){st(Rt)}),Dt("    undoCoordinateSystem",function(){p.default.undo(Rt)}),Dt("    translateGraph",function(){Vt(Rt)}),Dt("    assignNodeIntersects",function(){kt(Rt)}),Dt("    reversePoints",function(){St(Rt)}),Dt("    acyclic.undo",function(){k.default.undo(Rt)})},l=function(Rt,Dt){Rt.nodes().forEach(function(At){var Xt=Rt.node(At),$t=Dt.node(At);$t!==void 0?(Xt.fixorder=$t._order,delete $t._order):delete Xt.fixorder})},K=function(Rt,Dt){Rt.nodes().forEach(function(At){var Xt,$t=Rt.node(At);if($t){var Tt=Dt.node(At);$t.x=Tt.x,$t.y=Tt.y,$t._order=Tt.order,$t._rank=Tt.rank,!((Xt=Dt.children(At))===null||Xt===void 0)&&Xt.length&&($t.width=Tt.width,$t.height=Tt.height)}}),Rt.edges().forEach(function(At){var Xt=Rt.edge(At),$t=Dt.edge(At);Xt.points=$t.points,$t.hasOwnProperty("x")&&(Xt.x=$t.x,Xt.y=$t.y)}),Rt.graph().width=Dt.graph().width,Rt.graph().height=Dt.graph().height},Z=["nodesep","edgesep","ranksep","marginx","marginy"],X={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W=["acyclicer","ranker","rankdir","align"],U=["width","height","layer","fixorder"],et={width:0,height:0},it=["minlen","weight","width","height","labeloffset"],J={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},rt=["labelpos"],mt=function(Rt){var Dt=new C.Graph({multigraph:!0,compound:!0}),At=nr(Rt.graph()),Xt={};return W==null||W.forEach(function($t){At[$t]!==void 0&&(Xt[$t]=At[$t])}),Dt.setGraph(Object.assign({},X,Te(At,Z),Xt)),Rt.nodes().forEach(function($t){var Tt=nr(Rt.node($t)),Kt=x(x({},et),Tt),Ee=Te(Kt,U);Dt.setNode($t,Ee),Dt.setParent($t,Rt.parent($t))}),Rt.edges().forEach(function($t){var Tt=nr(Rt.edge($t)),Kt={};rt==null||rt.forEach(function(Ee){Tt[Ee]!==void 0&&(Kt[Ee]=Tt[Ee])}),Dt.setEdgeObj($t,Object.assign({},J,Te(Tt,it),Kt))}),Dt},pt=function(Rt){var Dt=Rt.graph();Dt.ranksep||(Dt.ranksep=0),Dt.ranksep/=2,Rt.nodes().forEach(function(At){var Xt=Rt.node(At);isNaN(Xt.layer)||Xt.layer||(Xt.layer=0)}),Rt.edges().forEach(function(At){var Xt,$t=Rt.edge(At);$t.minlen*=2,((Xt=$t.labelpos)===null||Xt===void 0?void 0:Xt.toLowerCase())!=="c"&&(Dt.rankdir==="TB"||Dt.rankdir==="BT"?$t.width+=$t.labeloffset:$t.height+=$t.labeloffset)})},ft=function(Rt){Rt.edges().forEach(function(Dt){var At=Rt.edge(Dt);if(At.width&&At.height){var Xt=Rt.node(Dt.v),$t=Rt.node(Dt.w),Tt={e:Dt,rank:($t.rank-Xt.rank)/2+Xt.rank};(0,I.addDummyNode)(Rt,"edge-proxy",Tt,"_ep")}})},Mt=function(Rt){var Dt=0;Rt.nodes().forEach(function(At){var Xt,$t,Tt=Rt.node(At);Tt.borderTop&&(Tt.minRank=(Xt=Rt.node(Tt.borderTop))===null||Xt===void 0?void 0:Xt.rank,Tt.maxRank=($t=Rt.node(Tt.borderBottom))===null||$t===void 0?void 0:$t.rank,Dt=Math.max(Dt,Tt.maxRank||-1/0))}),Rt.graph().maxRank=Dt},zt=function(Rt){Rt.nodes().forEach(function(Dt){var At=Rt.node(Dt);At.dummy==="edge-proxy"&&(Rt.edge(At.e).labelRank=At.rank,Rt.removeNode(Dt))})},Vt=function(Rt){var Dt,At=0,Xt,$t=0,Tt=Rt.graph(),Kt=Tt.marginx||0,Ee=Tt.marginy||0,vt=function(bt){if(bt){var wt=bt.x,D=bt.y,tt=bt.width,Ot=bt.height;!isNaN(wt)&&!isNaN(tt)&&(Dt===void 0&&(Dt=wt-tt/2),Dt=Math.min(Dt,wt-tt/2),At=Math.max(At,wt+tt/2)),!isNaN(D)&&!isNaN(Ot)&&(Xt===void 0&&(Xt=D-Ot/2),Xt=Math.min(Xt,D-Ot/2),$t=Math.max($t,D+Ot/2))}};Rt.nodes().forEach(function(bt){vt(Rt.node(bt))}),Rt.edges().forEach(function(bt){var wt=Rt.edge(bt);wt!=null&&wt.hasOwnProperty("x")&&vt(wt)}),Dt-=Kt,Xt-=Ee,Rt.nodes().forEach(function(bt){var wt=Rt.node(bt);wt&&(wt.x-=Dt,wt.y-=Xt)}),Rt.edges().forEach(function(bt){var wt,D=Rt.edge(bt);(wt=D.points)===null||wt===void 0||wt.forEach(function(tt){tt.x-=Dt,tt.y-=Xt}),D.hasOwnProperty("x")&&(D.x-=Dt),D.hasOwnProperty("y")&&(D.y-=Xt)}),Tt.width=At-Dt+Kt,Tt.height=$t-Xt+Ee},kt=function(Rt){Rt.edges().forEach(function(Dt){var At=Rt.edge(Dt),Xt=Rt.node(Dt.v),$t=Rt.node(Dt.w),Tt,Kt;At.points?(Tt=At.points[0],Kt=At.points[At.points.length-1]):(At.points=[],Tt=$t,Kt=Xt),At.points.unshift((0,I.intersectRect)(Xt,Tt)),At.points.push((0,I.intersectRect)($t,Kt))})},st=function(Rt){Rt.edges().forEach(function(Dt){var At=Rt.edge(Dt);if(At!=null&&At.hasOwnProperty("x"))switch((At.labelpos==="l"||At.labelpos==="r")&&(At.width-=At.labeloffset),At.labelpos){case"l":At.x-=At.width/2+At.labeloffset;break;case"r":At.x+=At.width/2+At.labeloffset;break}})},St=function(Rt){Rt.edges().forEach(function(Dt){var At,Xt=Rt.edge(Dt);Xt.reversed&&((At=Xt.points)===null||At===void 0||At.reverse())})},qt=function(Rt){Rt.nodes().forEach(function(Dt){var At,Xt,$t;if(!((At=Rt.children(Dt))===null||At===void 0)&&At.length){var Tt=Rt.node(Dt),Kt=Rt.node(Tt.borderTop),Ee=Rt.node(Tt.borderBottom),vt=Rt.node(Tt.borderLeft[((Xt=Tt.borderLeft)===null||Xt===void 0?void 0:Xt.length)-1]),bt=Rt.node(Tt.borderRight[(($t=Tt.borderRight)===null||$t===void 0?void 0:$t.length)-1]);Tt.width=Math.abs((bt==null?void 0:bt.x)-(vt==null?void 0:vt.x))||10,Tt.height=Math.abs((Ee==null?void 0:Ee.y)-(Kt==null?void 0:Kt.y))||10,Tt.x=((vt==null?void 0:vt.x)||0)+Tt.width/2,Tt.y=((Kt==null?void 0:Kt.y)||0)+Tt.height/2}}),Rt.nodes().forEach(function(Dt){var At;((At=Rt.node(Dt))===null||At===void 0?void 0:At.dummy)==="border"&&Rt.removeNode(Dt)})},re=function(Rt){Rt.edges().forEach(function(Dt){if(Dt.v===Dt.w){var At=Rt.node(Dt.v);At.selfEdges||(At.selfEdges=[]),At.selfEdges.push({e:Dt,label:Rt.edge(Dt)}),Rt.removeEdgeObj(Dt)}})},Nt=function(Rt){var Dt=(0,I.buildLayerMatrix)(Rt);Dt==null||Dt.forEach(function(At){var Xt=0;At==null||At.forEach(function($t,Tt){var Kt,Ee=Rt.node($t);Ee.order=Tt+Xt,(Kt=Ee.selfEdges)===null||Kt===void 0||Kt.forEach(function(vt){(0,I.addDummyNode)(Rt,"selfedge",{width:vt.label.width,height:vt.label.height,rank:Ee.rank,order:Tt+ ++Xt,e:vt.e,label:vt.label},"_se")}),delete Ee.selfEdges})})},be=function(Rt){Rt.nodes().forEach(function(Dt){var At=Rt.node(Dt);if(At.dummy==="selfedge"){var Xt=Rt.node(At.e.v),$t=Xt.x+Xt.width/2,Tt=Xt.y,Kt=At.x-$t,Ee=Xt.height/2;Rt.setEdgeObj(At.e,At.label),Rt.removeNode(Dt),At.label.points=[{x:$t+2*Kt/3,y:Tt-Ee},{x:$t+5*Kt/6,y:Tt-Ee},{y:Tt,x:$t+Kt},{x:$t+5*Kt/6,y:Tt+Ee},{x:$t+2*Kt/3,y:Tt+Ee}],At.label.x=At.x,At.label.y=At.y}})},Te=function(Rt,Dt){var At={};return Dt==null||Dt.forEach(function(Xt){Rt[Xt]!==void 0&&(At[Xt]=+Rt[Xt])}),At},nr=function(Rt){Rt===void 0&&(Rt={});var Dt={};return Object.keys(Rt).forEach(function(At){Dt[At.toLowerCase()]=Rt[At]}),Dt};S.default=O},85059:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(55998),z=function(m){var y,v=(0,x.addDummyNode)(m,"root",{},"_root"),p=E(m),g=Math.max.apply(Math,Object.values(p));Math.abs(g)===1/0&&(g=1);var T=g-1,w=2*T+1;m.graph().nestingRoot=v,m.edges().forEach(function(O){m.edge(O).minlen*=w});var C=N(m)+1;(y=m.children())===null||y===void 0||y.forEach(function(O){k(m,v,w,C,T,p,O)}),m.graph().nodeRankFactor=w},k=function(m,y,v,p,g,T,w){var C=m.children(w);if(!(C!=null&&C.length)){w!==y&&m.setEdge(y,w,{weight:0,minlen:v});return}var O=(0,x.addBorderNode)(m,"_bt"),b=(0,x.addBorderNode)(m,"_bb"),l=m.node(w);m.setParent(O,w),l.borderTop=O,m.setParent(b,w),l.borderBottom=b,C==null||C.forEach(function(K){k(m,y,v,p,g,T,K);var Z=m.node(K),X=Z.borderTop?Z.borderTop:K,W=Z.borderBottom?Z.borderBottom:K,U=Z.borderTop?p:2*p,et=X!==W?1:g-T[w]+1;m.setEdge(O,X,{minlen:et,weight:U,nestingEdge:!0}),m.setEdge(W,b,{minlen:et,weight:U,nestingEdge:!0})}),m.parent(w)||m.setEdge(y,O,{weight:0,minlen:g+T[w]})},E=function(m){var y,v={},p=function(g,T){var w=m.children(g);w==null||w.forEach(function(C){return p(C,T+1)}),v[g]=T};return(y=m.children())===null||y===void 0||y.forEach(function(g){return p(g,1)}),v},N=function(m){var y=0;return m.edges().forEach(function(v){y+=m.edge(v).weight}),y},I=function(m){var y=m.graph();y.nestingRoot&&m.removeNode(y.nestingRoot),delete y.nestingRoot,m.edges().forEach(function(v){var p=m.edge(v);p.nestingEdge&&m.removeEdgeObj(v)})};S.default={run:z,cleanup:I}},97910:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(55998),z=function(N){N.graph().dummyChains=[],N.edges().forEach(function(I){return k(N,I)})},k=function(N,I){var m=I.v,y=N.node(m).rank,v=I.w,p=N.node(v).rank,g=I.name,T=N.edge(I),w=T.labelRank;if(p!==y+1){N.removeEdgeObj(I);var C=N.graph(),O,b,l;for(l=0,++y;y<p;++l,++y)T.points=[],b={edgeLabel:T,width:0,height:0,edgeObj:I,rank:y},O=(0,x.addDummyNode)(N,"edge",b,"_d"),y===w&&(b.width=T.width,b.height=T.height,b.dummy="edge-label",b.labelpos=T.labelpos),N.setEdge(m,O,{weight:T.weight},g),l===0&&(C.dummyChains||(C.dummyChains=[]),C.dummyChains.push(O)),m=O;N.setEdge(m,v,{weight:T.weight},g)}},E=function(N){var I;(I=N.graph().dummyChains)===null||I===void 0||I.forEach(function(m){var y=N.node(m),v=y.edgeLabel,p;y.edgeObj&&N.setEdgeObj(y.edgeObj,v);for(var g=m;y.dummy;)p=N.successors(g)[0],N.removeNode(g),v.points.push({x:y.x,y:y.y}),y.dummy==="edge-label"&&(v.x=y.x,v.y=y.y,v.width=y.width,v.height=y.height),g=p,y=N.node(g)})};S.default={run:z,undo:E}},49323:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(x,z,k){var E={},N;k==null||k.forEach(function(I){for(var m=x.parent(I),y,v;m;){if(y=x.parent(m),y?(v=E[y],E[y]=m):(v=N,N=m),v&&v!==m){z.setEdge(v,m);return}m=y}})};S.default=M},36989:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(x,z){return z.map(function(k){var E=x.inEdges(k);if(!(E!=null&&E.length))return{v:k};{var N={sum:0,weight:0};return E==null||E.forEach(function(I){var m=x.edge(I),y=x.node(I.v);N.sum+=m.weight*y.order,N.weight+=m.weight}),{v:k,barycenter:N.sum/N.weight,weight:N.weight}}})};S.default=M},54564:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(31892),z=function(E,N,I){var m=k(E),y=new x.Graph({compound:!0}).setGraph({root:m}).setDefaultNodeLabel(function(v){return E.node(v)});return E.nodes().forEach(function(v){var p,g=E.node(v),T=E.parent(v);(g.rank===N||g.minRank<=N&&N<=g.maxRank)&&(y.setNode(v),y.setParent(v,T||m),(p=E[I](v))===null||p===void 0||p.forEach(function(w){var C=w.v===v?w.w:w.v,O=y.edgeFromArgs(C,v),b=O!==void 0?O.weight:0;y.setEdge(C,v,{weight:E.edge(w).weight+b})}),g.hasOwnProperty("minRank")&&y.setNode(v,{borderLeft:g.borderLeft[N],borderRight:g.borderRight[N]}))}),y},k=function(E){for(var N;E.hasNode(N="_root".concat(Math.random())););return N};S.default=z},76462:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(55998),z=function(E,N,I){for(var m=(0,x.zipObject)(I,I.map(function(C,O){return O})),y=N.map(function(C){var O,b=(O=E.outEdges(C))===null||O===void 0?void 0:O.map(function(l){return{pos:m[l.w]||0,weight:E.edge(l).weight}});return b==null?void 0:b.sort(function(l,K){return l.pos-K.pos})}),v=y.flat().filter(function(C){return C!==void 0}),p=1;p<I.length;)p<<=1;var g=2*p-1;p-=1;var T=Array(g).fill(0,0,g),w=0;return v==null||v.forEach(function(C){if(C){var O=C.pos+p;T[O]+=C.weight;for(var b=0;O>0;)O%2&&(b+=T[O+1]),O=O-1>>1,T[O]+=C.weight;w+=C.weight*b}}),w},k=function(E,N){for(var I=0,m=1;m<(N==null?void 0:N.length);m+=1)I+=z(E,N[m-1],N[m]);return I};S.default=k},61795:function(le,S,M){"use strict";var x=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(S,"__esModule",{value:!0});var z=x(M(78762)),k=x(M(76462)),E=x(M(54564)),N=x(M(49323)),I=x(M(91481)),m=M(78302),y=M(31892),v=M(55998),p=function(C){for(var O=(0,v.maxRank)(C),b=[],l=[],K=1;K<O+1;K++)b.push(K);for(var K=O-1;K>-1;K--)l.push(K);var Z=g(C,b,"inEdges"),X=g(C,l,"outEdges"),W=(0,z.default)(C);w(C,W);for(var U=Number.POSITIVE_INFINITY,et,K=0,it=0;it<4;++K,++it){T(K%2?Z:X,K%4>=2),W=(0,v.buildLayerMatrix)(C);var J=(0,k.default)(C,W);J<U&&(it=0,et=(0,m.clone)(W),U=J)}W=(0,z.default)(C),w(C,W);for(var K=0,it=0;it<4;++K,++it){T(K%2?Z:X,K%4>=2,!0),W=(0,v.buildLayerMatrix)(C);var J=(0,k.default)(C,W);J<U&&(it=0,et=(0,m.clone)(W),U=J)}w(C,et)},g=function(C,O,b){return O.map(function(l){return(0,E.default)(C,l,b)})},T=function(C,O,b){var l=new y.Graph;C==null||C.forEach(function(K){for(var Z,X=K.graph().root,W=(0,I.default)(K,X,l,O,b),U=0;U<((Z=W.vs)===null||Z===void 0?void 0:Z.length);U++){var et=K.node(W.vs[U]);et&&(et.order=U)}(0,N.default)(K,l,W.vs)})},w=function(C,O){O==null||O.forEach(function(b){b==null||b.forEach(function(l,K){C.node(l).order=K})})};S.default=p},1745:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(x,z){var k=x.nodes().filter(function(m){var y;return!(!((y=x.children(m))===null||y===void 0)&&y.length)}),E=k.map(function(m){return x.node(m).rank}),N=Math.max.apply(Math,E),I=Array(N+1).fill([]);z==null||z.forEach(function(m){var y=x.node(m);!y||y!=null&&y.dummy||isNaN(y.rank)||(y.fixorder=I[y.rank].length,I[y.rank].push(m))})};S.default=M},78762:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(x){for(var z={},k=x.nodes().filter(function(T){var w;return!(!((w=x.children(T))===null||w===void 0)&&w.length)}),E=k.map(function(T){return x.node(T).rank}),N=Math.max.apply(Math,E),I=[],m=0;m<N+1;m++)I.push([]);var y=function(T){var w;if(!z.hasOwnProperty(T)){z[T]=!0;var C=x.node(T);isNaN(C.rank)||I[C.rank].push(T),(w=x.successors(T))===null||w===void 0||w.forEach(function(O){return y(O)})}},v=k.sort(function(T,w){return x.node(T).rank-x.node(w).rank}),p=v.filter(function(T){return x.node(T).fixorder!==void 0}),g=p.sort(function(T,w){return x.node(T).fixorder-x.node(w).fixorder});return g==null||g.forEach(function(T){isNaN(x.node(T).rank)||I[x.node(T).rank].push(T),z[T]=!0}),v==null||v.forEach(y),I};S.default=M},40593:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(k,E){var N,I,m,y={};k==null||k.forEach(function(p,g){y[p.v]={i:g,indegree:0,in:[],out:[],vs:[p.v]};var T=y[p.v];p.barycenter!==void 0&&(T.barycenter=p.barycenter,T.weight=p.weight)}),(N=E.edges())===null||N===void 0||N.forEach(function(p){var g=y[p.v],T=y[p.w];g!==void 0&&T!==void 0&&(T.indegree++,g.out.push(y[p.w]))});var v=(m=(I=Object.values(y)).filter)===null||m===void 0?void 0:m.call(I,function(p){return!p.indegree});return x(v)},x=function(k){for(var E,N,I=[],m=function(T){return function(w){w.merged||(w.barycenter===void 0||T.barycenter===void 0||w.barycenter>=T.barycenter)&&z(T,w)}},y=function(T){return function(w){w.in.push(T),--w.indegree===0&&k.push(w)}},v=function(){var T=k.pop();I.push(T),(E=T.in.reverse())===null||E===void 0||E.forEach(function(w){return m(T)(w)}),(N=T.out)===null||N===void 0||N.forEach(function(w){return y(T)(w)})};k!=null&&k.length;)v();var p=I.filter(function(T){return!T.merged}),g=["vs","i","barycenter","weight"];return p.map(function(T){var w={};return g==null||g.forEach(function(C){T[C]!==void 0&&(w[C]=T[C])}),w})},z=function(k,E){var N,I=0,m=0;k.weight&&(I+=k.barycenter*k.weight,m+=k.weight),E.weight&&(I+=E.barycenter*E.weight,m+=E.weight),k.vs=(N=E.vs)===null||N===void 0?void 0:N.concat(k.vs),k.barycenter=I/m,k.weight=m,k.i=Math.min(E.i,k.i),E.merged=!0};S.default=M},91481:function(le,S,M){"use strict";var x=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(S,"__esModule",{value:!0});var z=x(M(36989)),k=x(M(40593)),E=x(M(73359)),N=function(y,v,p,g,T){var w,C,O,b,l=y.children(v),K=y.node(v),Z=K?K.borderLeft:void 0,X=K?K.borderRight:void 0,W={};Z&&(l=l==null?void 0:l.filter(function(mt){return mt!==Z&&mt!==X}));var U=(0,z.default)(y,l||[]);U==null||U.forEach(function(mt){var pt;if(!((pt=y.children(mt.v))===null||pt===void 0)&&pt.length){var ft=N(y,mt.v,p,g);W[mt.v]=ft,ft.hasOwnProperty("barycenter")&&m(mt,ft)}});var et=(0,k.default)(U,p);I(et,W),(w=et.filter(function(mt){return mt.vs.length>0}))===null||w===void 0||w.forEach(function(mt){var pt=y.node(mt.vs[0]);pt&&(mt.fixorder=pt.fixorder,mt.order=pt.order)});var it=(0,E.default)(et,g,T);if(Z&&(it.vs=[Z,it.vs,X].flat(),!((C=y.predecessors(Z))===null||C===void 0)&&C.length)){var J=y.node(((O=y.predecessors(Z))===null||O===void 0?void 0:O[0])||""),rt=y.node(((b=y.predecessors(X))===null||b===void 0?void 0:b[0])||"");it.hasOwnProperty("barycenter")||(it.barycenter=0,it.weight=0),it.barycenter=(it.barycenter*it.weight+J.order+rt.order)/(it.weight+2),it.weight+=2}return it},I=function(y,v){y==null||y.forEach(function(p){var g,T=(g=p.vs)===null||g===void 0?void 0:g.map(function(w){return v[w]?v[w].vs:w});p.vs=T.flat()})},m=function(y,v){y.barycenter!==void 0?(y.barycenter=(y.barycenter*y.weight+v.barycenter*v.weight)/(y.weight+v.weight),y.weight+=v.weight):(y.barycenter=v.barycenter,y.weight=v.weight)};S.default=N},73359:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(55998),z=function(N,I,m){var y=(0,x.partition)(N,function(b){return b.hasOwnProperty("fixorder")&&!isNaN(b.fixorder)||b.hasOwnProperty("barycenter")}),v=y.lhs,p=y.rhs.sort(function(b,l){return-b.i- -l.i}),g=[],T=0,w=0,C=0;v==null||v.sort(E(!!I,!!m)),C=k(g,p,C),v==null||v.forEach(function(b){var l;C+=(l=b.vs)===null||l===void 0?void 0:l.length,g.push(b.vs),T+=b.barycenter*b.weight,w+=b.weight,C=k(g,p,C)});var O={vs:g.flat()};return w&&(O.barycenter=T/w,O.weight=w),O},k=function(N,I,m){for(var y=m,v;I.length&&(v=I[I.length-1]).i<=y;)I.pop(),N==null||N.push(v.vs),y++;return y},E=function(N,I){return function(m,y){if(m.fixorder!==void 0&&y.fixorder!==void 0)return m.fixorder-y.fixorder;if(m.barycenter<y.barycenter)return-1;if(m.barycenter>y.barycenter)return 1;if(I&&m.order!==void 0&&y.order!==void 0){if(m.order<y.order)return-1;if(m.order>y.order)return 1}return N?y.i-m.i:m.i-y.i}};S.default=z},53134:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(k){var E,N={},I=0,m=function(y){var v,p=I;(v=k.children(y))===null||v===void 0||v.forEach(m),N[y]={low:p,lim:I++}};return(E=k.children())===null||E===void 0||E.forEach(m),N},x=function(k,E,N,I){var m=[],y=[],v=Math.min(E[N].low,E[I].low),p=Math.max(E[N].lim,E[I].lim),g,T;g=N;do g=k.parent(g),m.push(g);while(g&&(E[g].low>v||p>E[g].lim));for(T=g,g=I;g&&g!==T;)y.push(g),g=k.parent(g);return{lca:T,path:m.concat(y.reverse())}},z=function(k){var E,N=M(k);(E=k.graph().dummyChains)===null||E===void 0||E.forEach(function(I){var m,y,v=I,p=k.node(v),g=p.edgeObj;if(g)for(var T=x(k,N,g.v,g.w),w=T.path,C=T.lca,O=0,b=w[O],l=!0;v!==g.w;){if(p=k.node(v),l){for(;b!==C&&((m=k.node(b))===null||m===void 0?void 0:m.maxRank)<p.rank;)O++,b=w[O];b===C&&(l=!1)}if(!l){for(;O<w.length-1&&((y=k.node(w[O+1]))===null||y===void 0?void 0:y.minRank)<=p.rank;)O++;b=w[O]}k.setParent(v,b),v=k.successors(v)[0]}})};S.default=z},6088:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var Z=function(X,W){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,et){U.__proto__=et}||function(U,et){for(var it in et)Object.prototype.hasOwnProperty.call(et,it)&&(U[it]=et[it])},Z(X,W)};return function(X,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");Z(X,W);function U(){this.constructor=X}X.prototype=W===null?Object.create(W):(U.prototype=W.prototype,new U)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.width=S.sep=S.positionX=S.balance=S.alignCoordinates=S.findSmallestWidthAlignment=S.buildBlockGraph=S.horizontalCompaction=S.verticalAlignment=S.hasConflict=S.addConflict=S.findOtherInnerSegmentNode=S.findType2Conflicts=S.findType1Conflicts=void 0;var z=M(20156),k=M(55998),E=function(Z){x(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return X}(z.Graph),N=function(Z,X){var W={},U=function(et,it){var J=0,rt=0,mt=et.length,pt=it==null?void 0:it[(it==null?void 0:it.length)-1];return it==null||it.forEach(function(ft,Mt){var zt,Vt=(0,S.findOtherInnerSegmentNode)(Z,ft),kt=Vt?Z.node(Vt).order:mt;(Vt||ft===pt)&&((zt=it.slice(rt,Mt+1))===null||zt===void 0||zt.forEach(function(st){var St;(St=Z.predecessors(st))===null||St===void 0||St.forEach(function(qt){var re,Nt=Z.node(qt),be=Nt.order;(be<J||kt<be)&&!(Nt.dummy&&(!((re=Z.node(st))===null||re===void 0)&&re.dummy))&&(0,S.addConflict)(W,qt,st)})}),rt=Mt+1,J=kt)}),it};return X!=null&&X.length&&X.reduce(U),W};S.findType1Conflicts=N;var I=function(Z,X){var W={},U=function(it,J,rt,mt,pt){for(var ft,Mt=[],zt=J;zt<rt;zt++)Mt.push(zt);Mt.forEach(function(Vt){var kt,st;ft=it[Vt],!((kt=Z.node(ft))===null||kt===void 0)&&kt.dummy&&((st=Z.predecessors(ft))===null||st===void 0||st.forEach(function(St){var qt=Z.node(St);qt.dummy&&(qt.order<mt||qt.order>pt)&&(0,S.addConflict)(W,St,ft)}))})},et=function(it,J){var rt=-1,mt,pt=0;return J==null||J.forEach(function(ft,Mt){var zt;if(((zt=Z.node(ft))===null||zt===void 0?void 0:zt.dummy)==="border"){var Vt=Z.predecessors(ft)||[];Vt.length&&(mt=Z.node(Vt[0]).order,U(J,pt,Mt,rt,mt),pt=Mt,rt=mt)}U(J,pt,J.length,mt,it.length)}),J};return X!=null&&X.length&&X.reduce(et),W};S.findType2Conflicts=I;var m=function(Z,X){var W,U;if(!((W=Z.node(X))===null||W===void 0)&&W.dummy)return(U=Z.predecessors(X))===null||U===void 0?void 0:U.find(function(et){return Z.node(et).dummy})};S.findOtherInnerSegmentNode=m;var y=function(Z,X,W){var U=X,et=W;if(U>et){var it=U;U=et,et=it}var J=Z[U];J||(Z[U]=J={}),J[et]=!0};S.addConflict=y;var v=function(Z,X,W){var U=X,et=W;if(U>et){var it=X;U=et,et=it}return!!Z[U]};S.hasConflict=v;var p=function(Z,X,W,U){var et={},it={},J={};return X==null||X.forEach(function(rt){rt==null||rt.forEach(function(mt,pt){et[mt]=mt,it[mt]=mt,J[mt]=pt})}),X==null||X.forEach(function(rt){var mt=-1;rt==null||rt.forEach(function(pt){var ft=U(pt);if(ft.length){ft=ft.sort(function(st,St){return J[st]-J[St]});for(var Mt=(ft.length-1)/2,zt=Math.floor(Mt),Vt=Math.ceil(Mt);zt<=Vt;++zt){var kt=ft[zt];it[pt]===pt&&mt<J[kt]&&!(0,S.hasConflict)(W,pt,kt)&&(it[kt]=pt,it[pt]=et[pt]=et[kt],mt=J[kt])}}})}),{root:et,align:it}};S.verticalAlignment=p;var g=function(Z,X,W,U,et){var it,J={},rt=(0,S.buildBlockGraph)(Z,X,W,et),mt=et?"borderLeft":"borderRight",pt=function(zt,Vt){for(var kt=rt.nodes(),st=kt.pop(),St={};st;)St[st]?zt(st):(St[st]=!0,kt.push(st),kt=kt.concat(Vt(st))),st=kt.pop()},ft=function(zt){J[zt]=(rt.inEdges(zt)||[]).reduce(function(Vt,kt){return Math.max(Vt,(J[kt.v]||0)+rt.edge(kt))},0)},Mt=function(zt){var Vt=(rt.outEdges(zt)||[]).reduce(function(st,St){return Math.min(st,(J[St.w]||0)-rt.edge(St))},Number.POSITIVE_INFINITY),kt=Z.node(zt);Vt!==Number.POSITIVE_INFINITY&&kt.borderType!==mt&&(J[zt]=Math.max(J[zt],Vt))};return pt(ft,rt.predecessors.bind(rt)),pt(Mt,rt.successors.bind(rt)),(it=Object.values(U))===null||it===void 0||it.forEach(function(zt){J[zt]=J[W[zt]]}),J};S.horizontalCompaction=g;var T=function(Z,X,W,U){var et=new E,it=Z.graph(),J=(0,S.sep)(it.nodesep,it.edgesep,U);return X==null||X.forEach(function(rt){var mt;rt==null||rt.forEach(function(pt){var ft=W[pt];if(et.setNode(ft),mt){var Mt=W[mt],zt=et.edgeFromArgs(Mt,ft);et.setEdge(Mt,ft,Math.max(J(Z,pt,mt),zt||0))}mt=pt})}),et};S.buildBlockGraph=T;var w=function(Z,X){return(0,k.minBy)(Object.values(X),function(W){var U,et=Number.NEGATIVE_INFINITY,it=Number.POSITIVE_INFINITY;return(U=Object.keys(W))===null||U===void 0||U.forEach(function(J){var rt=W[J],mt=(0,S.width)(Z,J)/2;et=Math.max(rt+mt,et),it=Math.min(rt-mt,it)}),et-it})};S.findSmallestWidthAlignment=w;function C(Z,X){var W=Object.values(X),U=Math.min.apply(Math,W),et=Math.max.apply(Math,W);["u","d"].forEach(function(it){["l","r"].forEach(function(J){var rt=it+J,mt=Z[rt],pt;if(mt!==X){var ft=Object.values(mt);pt=J==="l"?U-Math.min.apply(Math,ft):et-Math.max.apply(Math,ft),pt&&(Z[rt]={},Object.keys(mt).forEach(function(Mt){Z[rt][Mt]=mt[Mt]+pt}))}})})}S.alignCoordinates=C;var O=function(Z,X){var W={};return Object.keys(Z.ul).forEach(function(U){if(X)W[U]=Z[X.toLowerCase()][U];else{var et=Object.values(Z).map(function(it){return it[U]});W[U]=(et[0]+et[1])/2}}),W};S.balance=O;var b=function(Z){var X=(0,k.buildLayerMatrix)(Z),W=Object.assign((0,S.findType1Conflicts)(Z,X),(0,S.findType2Conflicts)(Z,X)),U={},et;["u","d"].forEach(function(J){et=J==="u"?X:Object.values(X).reverse(),["l","r"].forEach(function(rt){rt==="r"&&(et=et.map(function(Mt){return Object.values(Mt).reverse()}));var mt=(J==="u"?Z.predecessors:Z.successors).bind(Z),pt=(0,S.verticalAlignment)(Z,et,W,mt),ft=(0,S.horizontalCompaction)(Z,et,pt.root,pt.align,rt==="r");rt==="r"&&Object.keys(ft).forEach(function(Mt){ft[Mt]=-ft[Mt]}),U[J+rt]=ft})});var it=(0,S.findSmallestWidthAlignment)(Z,U);return C(U,it),(0,S.balance)(U,Z.graph().align)};S.positionX=b;var l=function(Z,X,W){return function(U,et,it){var J=U.node(et),rt=U.node(it),mt=0,pt;if(mt+=J.width/2,J.hasOwnProperty("labelpos"))switch((J.labelpos||"").toLowerCase()){case"l":pt=-J.width/2;break;case"r":pt=J.width/2;break}if(pt&&(mt+=W?pt:-pt),pt=0,mt+=(J.dummy?X:Z)/2,mt+=(rt.dummy?X:Z)/2,mt+=rt.width/2,rt.labelpos)switch((rt.labelpos||"").toLowerCase()){case"l":pt=rt.width/2;break;case"r":pt=-rt.width/2;break}return pt&&(mt+=W?pt:-pt),pt=0,mt}};S.sep=l;var K=function(Z,X){return Z.node(X).width||0};S.width=K},11977:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(55998),z=M(6088),k=function(I){var m=(0,x.buildLayerMatrix)(I),y=I.graph().ranksep,v=0;m==null||m.forEach(function(p){var g=p.map(function(w){return I.node(w).height}),T=Math.max.apply(Math,g);p==null||p.forEach(function(w){I.node(w).y=v+T/2}),v+=T+y})},E=function(I){var m=(0,x.buildLayerMatrix)(I),y=Object.assign((0,z.findType1Conflicts)(I,m),(0,z.findType2Conflicts)(I,m)),v={},p=[];["u","d"].forEach(function(T){p=T==="u"?m:Object.values(m).reverse(),["l","r"].forEach(function(w){w==="r"&&(p=p.map(function(l){return Object.values(l).reverse()}));var C=(T==="u"?I.predecessors:I.successors).bind(I),O=(0,z.verticalAlignment)(I,p,y,C),b=(0,z.horizontalCompaction)(I,p,O.root,O.align,w==="r");w==="r"&&Object.keys(b).forEach(function(l){return b[l]=-b[l]}),v[T+w]=b})});var g=(0,z.findSmallestWidthAlignment)(I,v);return g&&(0,z.alignCoordinates)(v,g),(0,z.balance)(v,I.graph().align)},N=function(I){var m,y=(0,x.asNonCompoundGraph)(I);k(y);var v=E(y);(m=Object.keys(v))===null||m===void 0||m.forEach(function(p){y.node(p).x=v[p]})};S.default=N},1371:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.feasibleTreeWithLayer=S.feasibleTree=void 0;var x=M(51495),z=M(55998),k=M(31892),E=function(p){var g=new k.Graph({directed:!1}),T=p.nodes()[0],w=p.nodeCount();g.setNode(T,{});for(var C,O;N(g,p)<w;)C=y(g,p),O=g.hasNode(C.v)?(0,x.slack)(p,C):-(0,x.slack)(p,C),v(g,p,O);return g};S.feasibleTree=E;var N=function(p,g){var T=function(w){g.nodeEdges(w).forEach(function(C){var O=C.v,b=w===O?C.w:O;!p.hasNode(b)&&!(0,x.slack)(g,C)&&(p.setNode(b,{}),p.setEdge(w,b,{}),T(b))})};return p.nodes().forEach(T),p.nodeCount()},I=function(p){var g=new k.Graph({directed:!1}),T=p.nodes()[0],w=p.nodeCount();g.setNode(T,{});for(var C,O;m(g,p)<w;)C=y(g,p),O=g.hasNode(C.v)?(0,x.slack)(p,C):-(0,x.slack)(p,C),v(g,p,O);return g};S.feasibleTreeWithLayer=I;var m=function(p,g){var T=function(w){var C;(C=g.nodeEdges(w))===null||C===void 0||C.forEach(function(O){var b=O.v,l=w===b?O.w:b;!p.hasNode(l)&&(g.node(l).layer!==void 0||!(0,x.slack)(g,O))&&(p.setNode(l,{}),p.setEdge(w,l,{}),T(l))})};return p.nodes().forEach(T),p.nodeCount()},y=function(p,g){return(0,z.minBy)(g.edges(),function(T){return p.hasNode(T.v)!==p.hasNode(T.w)?(0,x.slack)(g,T):1/0})},v=function(p,g,T){p.nodes().forEach(function(w){g.node(w).rank||(g.node(w).rank=0),g.node(w).rank+=T})};S.default={feasibleTree:E,feasibleTreeWithLayer:I}},68750:function(le,S,M){"use strict";var x=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(S,"__esModule",{value:!0});var z=M(51495),k=M(1371),E=x(M(40272)),N=function(v){switch(v.graph().ranker){case"network-simplex":y(v);break;case"tight-tree":m(v);break;case"longest-path":I(v);break;default:m(v)}},I=z.longestPath,m=function(v){(0,z.longestPathWithLayer)(v),(0,k.feasibleTreeWithLayer)(v)},y=function(v){(0,E.default)(v)};S.default=N},40272:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.exchangeEdges=S.enterEdge=S.leaveEdge=S.initLowLimValues=S.calcCutValue=S.initCutValues=void 0;var x=M(1371),z=M(51495),k=M(55998),E=M(20156),N=E.algorithm.preorder,I=E.algorithm.postorder,m=function(Z){var X=(0,k.simplify)(Z);(0,z.longestPath)(X);var W=(0,x.feasibleTree)(X);(0,S.initLowLimValues)(W),(0,S.initCutValues)(W,X);for(var U,et;U=(0,S.leaveEdge)(W);)et=(0,S.enterEdge)(W,X,U),(0,S.exchangeEdges)(W,X,U,et)},y=function(Z,X){var W=I(Z,Z.nodes());W=W==null?void 0:W.slice(0,(W==null?void 0:W.length)-1),W==null||W.forEach(function(U){v(Z,X,U)})};S.initCutValues=y;var v=function(Z,X,W){var U=Z.node(W),et=U.parent;Z.edgeFromArgs(W,et).cutvalue=(0,S.calcCutValue)(Z,X,W)},p=function(Z,X,W){var U,et=Z.node(W),it=et.parent,J=!0,rt=X.edgeFromArgs(W,it),mt=0;return rt||(J=!1,rt=X.edgeFromArgs(it,W)),mt=rt.weight,(U=X.nodeEdges(W))===null||U===void 0||U.forEach(function(pt){var ft=pt.v===W,Mt=ft?pt.w:pt.v;if(Mt!==it){var zt=ft===J,Vt=X.edge(pt).weight;if(mt+=zt?Vt:-Vt,l(Z,W,Mt)){var kt=Z.edgeFromArgs(W,Mt).cutvalue;mt+=zt?-kt:kt}}}),mt};S.calcCutValue=p;var g=function(Z,X){X===void 0&&(X=Z.nodes()[0]),T(Z,{},1,X)};S.initLowLimValues=g;var T=function(Z,X,W,U,et){var it,J=W,rt=W,mt=Z.node(U);return X[U]=!0,(it=Z.neighbors(U))===null||it===void 0||it.forEach(function(pt){X[pt]||(rt=T(Z,X,rt,pt,U))}),mt.low=J,mt.lim=rt++,et?mt.parent=et:delete mt.parent,rt},w=function(Z){return Z.edges().find(function(X){return Z.edge(X).cutvalue<0})};S.leaveEdge=w;var C=function(Z,X,W){var U=W.v,et=W.w;X.hasEdge(U,et)||(U=W.w,et=W.v);var it=Z.node(U),J=Z.node(et),rt=it,mt=!1;it.lim>J.lim&&(rt=J,mt=!0);var pt=X.edges().filter(function(ft){return mt===K(Z,Z.node(ft.v),rt)&&mt!==K(Z,Z.node(ft.w),rt)});return(0,k.minBy)(pt,function(ft){return(0,z.slack)(X,ft)})};S.enterEdge=C;var O=function(Z,X,W,U){var et=W.v,it=W.w;Z.removeEdge(et,it),Z.setEdge(U.v,U.w,{}),(0,S.initLowLimValues)(Z),(0,S.initCutValues)(Z,X),b(Z,X)};S.exchangeEdges=O;var b=function(Z,X){var W=Z.nodes().find(function(et){var it;return!(!((it=X.node(et))===null||it===void 0)&&it.parent)}),U=N(Z,W);U=U==null?void 0:U.slice(1),U==null||U.forEach(function(et){var it=Z.node(et).parent,J=X.edgeFromArgs(et,it),rt=!1;J||(J=X.edgeFromArgs(it,et),rt=!0),X.node(et).rank=X.node(it).rank+(rt?J.minlen:-J.minlen)})},l=function(Z,X,W){return Z.hasEdge(X,W)},K=function(Z,X,W){return W.low<=X.lim&&X.lim<=W.lim};S.default=m},51495:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.slack=S.longestPathWithLayer=S.longestPath=void 0;var M=function(k){var E,N={},I=function(m){var y,v=k.node(m);if(N[m])return v.rank;N[m]=!0;var p;return(y=k.outEdges(m))===null||y===void 0||y.forEach(function(g){var T=I(g.w),w=k.edge(g).minlen,C=T-w;C&&(p===void 0||C<p)&&(p=C)}),p||(p=0),v.rank=p,p};(E=k.sources())===null||E===void 0||E.forEach(function(m){return I(m)})};S.longestPath=M;var x=function(k){var E,N={},I,m=function(v){var p,g=k.node(v);if(N[v])return g.rank;N[v]=!0;var T;return(p=k.outEdges(v))===null||p===void 0||p.forEach(function(w){var C=m(w.w),O=k.edge(w).minlen,b=C-O;b&&(T===void 0||b<T)&&(T=b)}),T||(T=0),(I===void 0||T<I)&&(I=T),g.rank=T,T};(E=k.sources())===null||E===void 0||E.forEach(function(v){return m(v)}),I===void 0&&(I=0);var y=function(v,p){var g,T=k.node(v),w=isNaN(T.layer)?p:T.layer;(T.rank===void 0||T.rank<w)&&(T.rank=w),(g=k.outEdges(v))===null||g===void 0||g.map(function(C){y(C.w,w+k.edge(C).minlen)})};k.nodes().forEach(function(v){var p=k.node(v);isNaN(p.layer)?p.rank-=I:y(v,p.layer)})};S.longestPathWithLayer=x;var z=function(k,E){return k.node(E.w).rank-k.node(E.v).rank-k.edge(E).minlen};S.slack=z,S.default={longestPath:M,longestPathWithLayer:x,slack:z}},55998:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.minBy=S.notime=S.time=S.partition=S.maxRank=S.addBorderNode=S.removeEmptyRanks=S.normalizeRanks=S.buildLayerMatrix=S.intersectRect=S.predecessorWeights=S.successorWeights=S.zipObject=S.asNonCompoundGraph=S.simplify=S.addDummyNode=void 0;var x=M(78302),z=M(31892),k=function(X,W){return Number(X)-Number(W)},E=function(X,W,U,et){var it;do it="".concat(et).concat(Math.random());while(X.hasNode(it));return U.dummy=W,X.setNode(it,U),it};S.addDummyNode=E;var N=function(X){var W=new z.Graph().setGraph(X.graph());return X.nodes().forEach(function(U){W.setNode(U,X.node(U))}),X.edges().forEach(function(U){var et=W.edgeFromArgs(U.v,U.w)||{weight:0,minlen:1},it=X.edge(U);W.setEdge(U.v,U.w,{weight:et.weight+it.weight,minlen:Math.max(et.minlen,it.minlen)})}),W};S.simplify=N;var I=function(X){var W=new z.Graph({multigraph:X.isMultigraph()}).setGraph(X.graph());return X.nodes().forEach(function(U){var et;!((et=X.children(U))===null||et===void 0)&&et.length||W.setNode(U,X.node(U))}),X.edges().forEach(function(U){W.setEdgeObj(U,X.edge(U))}),W};S.asNonCompoundGraph=I;var m=function(X,W){return X==null?void 0:X.reduce(function(U,et,it){return U[et]=W[it],U},{})};S.zipObject=m;var y=function(X){var W={};return X.nodes().forEach(function(U){var et,it={};(et=X.outEdges(U))===null||et===void 0||et.forEach(function(J){var rt;it[J.w]=(it[J.w]||0)+(((rt=X.edge(J))===null||rt===void 0?void 0:rt.weight)||0)}),W[U]=it}),W};S.successorWeights=y;var v=function(X){var W=X.nodes(),U=W.map(function(et){var it,J={};return(it=X.inEdges(et))===null||it===void 0||it.forEach(function(rt){J[rt.v]=(J[rt.v]||0)+X.edge(rt).weight}),J});return(0,S.zipObject)(W,U)};S.predecessorWeights=v;var p=function(X,W){var U=Number(X.x),et=Number(X.y),it=Number(W.x)-U,J=Number(W.y)-et,rt=Number(X.width)/2,mt=Number(X.height)/2;if(!it&&!J)return{x:0,y:0};var pt,ft;return Math.abs(J)*rt>Math.abs(it)*mt?(J<0&&(mt=-mt),pt=mt*it/J,ft=mt):(it<0&&(rt=-rt),pt=rt,ft=rt*J/it),{x:U+pt,y:et+ft}};S.intersectRect=p;var g=function(X){for(var W=[],U=(0,S.maxRank)(X)+1,et=0;et<U;et++)W.push([]);X.nodes().forEach(function(it){var J=X.node(it),rt=J.rank;rt!==void 0&&W[rt]&&W[rt].push(it)});for(var et=0;et<U;et++)W[et]=W[et].sort(function(J,rt){var mt,pt;return k((mt=X.node(J))===null||mt===void 0?void 0:mt.order,(pt=X.node(rt))===null||pt===void 0?void 0:pt.order)});return W};S.buildLayerMatrix=g;var T=function(X){var W=X.nodes().filter(function(et){var it;return((it=X.node(et))===null||it===void 0?void 0:it.rank)!==void 0}).map(function(et){return X.node(et).rank}),U=Math.min.apply(Math,W);X.nodes().forEach(function(et){var it=X.node(et);it.hasOwnProperty("rank")&&U!==1/0&&(it.rank-=U)})};S.normalizeRanks=T;var w=function(X){var W=X.nodes(),U=W.filter(function(ft){var Mt;return((Mt=X.node(ft))===null||Mt===void 0?void 0:Mt.rank)!==void 0}).map(function(ft){return X.node(ft).rank}),et=Math.min.apply(Math,U),it=[];W.forEach(function(ft){var Mt,zt=(((Mt=X.node(ft))===null||Mt===void 0?void 0:Mt.rank)||0)-et;it[zt]||(it[zt]=[]),it[zt].push(ft)});for(var J=0,rt=X.graph().nodeRankFactor||0,mt=0;mt<it.length;mt++){var pt=it[mt];pt===void 0?mt%rt!==0&&(J-=1):J&&(pt==null||pt.forEach(function(ft){var Mt=X.node(ft);Mt&&(Mt.rank=Mt.rank||0,Mt.rank+=J)}))}};S.removeEmptyRanks=w;var C=function(X,W,U,et){var it={width:0,height:0};return(0,x.isNumber)(U)&&(0,x.isNumber)(et)&&(it.rank=U,it.order=et),(0,S.addDummyNode)(X,"border",it,W)};S.addBorderNode=C;var O=function(X){var W;return X.nodes().forEach(function(U){var et,it=(et=X.node(U))===null||et===void 0?void 0:et.rank;it!==void 0&&(W===void 0||it>W)&&(W=it)}),W||(W=0),W};S.maxRank=O;var b=function(X,W){var U={lhs:[],rhs:[]};return X==null||X.forEach(function(et){W(et)?U.lhs.push(et):U.rhs.push(et)}),U};S.partition=b;var l=function(X,W){var U=Date.now();try{return W()}finally{console.log("".concat(X," time: ").concat(Date.now()-U,"ms"))}};S.time=l;var K=function(X,W){return W()};S.notime=K;var Z=function(X,W){return X.reduce(function(U,et){var it=W(U),J=W(et);return it>J?et:U})};S.minBy=Z},74222:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(g[w]=T[w])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(y){for(var v,p=1,g=arguments.length;p<g;p++){v=arguments[p];for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&(y[T]=v[T])}return y},z.apply(this,arguments)},k=this&&this.__spreadArray||function(y,v,p){if(p||arguments.length===2)for(var g=0,T=v.length,w;g<T;g++)(w||!(g in v))&&(w||(w=Array.prototype.slice.call(v,0,g)),w[g]=v[g]);return y.concat(w||Array.prototype.slice.call(v))};Object.defineProperty(S,"__esModule",{value:!0}),S.DagreCompoundLayout=void 0;var E=M(94416),N=M(55281),I=M(78302),m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},v.prototype.init=function(p){var g=p.hiddenNodes||[],T=p.hiddenEdges||[],w=p.hiddenCombos||[];this.nodes=this.getDataByOrder((p.nodes||[]).concat(g)),this.edges=this.getDataByOrder((p.edges||[]).concat(T)),this.combos=(p.combos||[]).concat(w.map(function(C){return z(z({},C),{collapsed:!0})}))},v.prototype.execute=function(){var p=this,g=p.nodes,T=p.edges;if(g){var w=p.getLayoutConfig(),C=w.graphDef,O=w.graphOption,b=w.graphSettings,l=(0,N.buildGraph)(C,O,b),K=(0,N.flatGraph)(l,!0);return this.updatePosition(K),p.onLayoutEnd&&p.onLayoutEnd(),{nodes:g,edges:T}}},v.prototype.getNodePath=function(p){var g=this,T=g.nodes,w=g.combos,C=T.find(function(b){return b.id===p}),O=function(b,l){l===void 0&&(l=[]);var K=w.find(function(Z){return Z.id===b});return K?(l.unshift(b),K.parentId?O(K.parentId,l):l):l};return C&&C.comboId?O(C.comboId,[p]):[p]},v.prototype.getLayoutConfig=function(){var p,g,T,w=this,C=w.nodes,O=w.edges,b=w.combos,l=w.nodeSize,K=w.rankdir,Z=w.align,X=w.edgesep,W=w.nodesep,U=w.ranksep,et=w.settings,it=(b||[]).reduce(function(Te,nr){var Rt=C.filter(function(At){return At.comboId===nr.id}).map(function(At){return At.id}),Dt=(b||[]).filter(function(At){return At.parentId===nr.id}).map(function(At){return At.id});return(Rt.length||Dt.length)&&(Te[nr.id]=k(k([],Rt,!0),Dt,!0)),Te},{}),J;l?(0,I.isArray)(l)?J=function(){return l}:J=function(){return[l,l]}:J=function(Te){return Te&&Te.size?(0,I.isArray)(Te.size)?Te.size:(0,I.isObject)(Te.size)?[Te.size.width||40,Te.size.height||40]:[Te.size,Te.size]:[40,40]};var rt=function(Te){return Te&&Te.size?(0,I.isArray)(Te.size)?Te.size:[Te.size,Te.size]:[80,40]},mt=rt(b==null?void 0:b[0]),pt=mt[0],ft=mt[1],Mt=(g=(p=w.graphSettings)===null||p===void 0?void 0:p.subScene)===null||g===void 0?void 0:g.meta,zt=((T=b.find(function(Te){return!Te.collapsed}))===null||T===void 0?void 0:T.padding)||[20,20,20,20],Vt=zt[0],kt=zt[1],st=zt[2],St=zt[3],qt={compound:it,nodes:k([],(C||[]).map(function(Te){var nr=J(Te),Rt=nr[0],Dt=nr[1];return z(z({},Te),{width:Rt,height:Dt})}),!0),edges:k([],(O||[]).map(function(Te){return z(z({},Te),{v:Te.source,w:Te.target})}),!0)},re={expanded:(b||[]).filter(function(Te){return!Te.collapsed}).map(function(Te){return Te.id})},Nt={graph:{meta:{align:Z,rankDir:K,nodeSep:W,edgeSep:X,rankSep:U}},subScene:{meta:{paddingTop:Vt||(Mt==null?void 0:Mt.paddingTop)||20,paddingRight:kt||(Mt==null?void 0:Mt.paddingRight)||20,paddingBottom:st||(Mt==null?void 0:Mt.paddingBottom)||20,paddingLeft:St||(Mt==null?void 0:Mt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:pt,height:ft}}},be=(0,N.mergeConfig)(et,z({},(0,N.mergeConfig)(Nt,N.LAYOUT_CONFIG)));return w.graphSettings=be,{graphDef:qt,graphOption:re,graphSettings:be}},v.prototype.updatePosition=function(p){var g=p.nodes,T=p.edges;this.updateNodePosition(g,T),this.updateEdgePosition(g,T)},v.prototype.getBegin=function(p,g){var T=this,w=T.begin,C=[0,0];if(w){var O=1/0,b=1/0;p.forEach(function(l){O>l.x&&(O=l.x),b>l.y&&(b=l.y)}),g.forEach(function(l){l.points.forEach(function(K){O>K.x&&(O=K.x),b>K.y&&(b=K.y)})}),C[0]=w[0]-O,C[1]=w[1]-b}return C},v.prototype.updateNodePosition=function(p,g){var T=this,w=T.combos,C=T.nodes,O=T.edges,b=T.anchorPoint,l=T.graphSettings,K=this.getBegin(p,g);p.forEach(function(Z){var X,W=Z.x,U=Z.y,et=Z.id,it=Z.type,J=Z.coreBox;if(it===N.HierarchyNodeType.META&&et!==N.ROOT_NAME){var rt=w.findIndex(function(zt){return zt.id===et}),mt=(X=l==null?void 0:l.subScene)===null||X===void 0?void 0:X.meta;w[rt].offsetX=W+K[0],w[rt].offsetY=U+K[1],w[rt].fixSize=[J.width,J.height],w[rt].fixCollapseSize=[J.width,J.height],Z.expanded?w[rt].padding=[mt==null?void 0:mt.paddingTop,mt==null?void 0:mt.paddingRight,mt==null?void 0:mt.paddingBottom,mt==null?void 0:mt.paddingLeft]:w[rt].padding=[0,0,0,0]}else if(it===N.HierarchyNodeType.OP){var rt=C.findIndex(function(Vt){return Vt.id===et});if(C[rt].x=W+K[0],C[rt].y=U+K[1],b){var pt=[],ft=g.filter(function(Vt){return Vt.v===et}),Mt=g.filter(function(Vt){return Vt.w===et});ft.length>0&&ft.forEach(function(Vt){var kt=Vt.points[0],st=(kt.x-W)/Z.width+.5,St=(kt.y-U)/Z.height+.5;pt.push([st,St]),Vt.baseEdgeList.forEach(function(qt){var re=O.find(function(Nt){return Nt.source===qt.v&&Nt.target===qt.w});re&&(re.sourceAnchor=pt.length-1)})}),Mt.length>0&&Mt.forEach(function(Vt){var kt=Vt.points[Vt.points.length-1],st=(kt.x-W)/Z.width+.5,St=(kt.y-U)/Z.height+.5;pt.push([st,St]),Vt.baseEdgeList.forEach(function(qt){var re=O.find(function(Nt){return Nt.source===qt.v&&Nt.target===qt.w});re&&(re.targetAnchor=pt.length-1)})}),C[rt].anchorPoints=pt.length>0?pt:C[rt].anchorPoints||[]}}})},v.prototype.updateEdgePosition=function(p,g){var T=this,w=T.combos,C=T.edges,O=T.controlPoints,b=this.getBegin(p,g);O&&(w.forEach(function(l){l.inEdges=[],l.outEdges=[]}),C.forEach(function(l){var K,Z,X,W,U=p.find(function(zt){return zt.id===l.source}),et=p.find(function(zt){return zt.id===l.target}),it=[],J=[];if(U&&et)J=(0,N.getEdges)(U==null?void 0:U.id,et==null?void 0:et.id,p);else if(!U||!et){var rt=T.getNodePath(l.source),mt=T.getNodePath(l.target),pt=rt.reverse().slice(U?0:1).find(function(zt){return p.find(function(Vt){return Vt.id===zt})}),ft=mt.reverse().slice(et?0:1).find(function(zt){return p.find(function(Vt){return Vt.id===zt})});U=p.find(function(zt){return zt.id===pt}),et=p.find(function(zt){return zt.id===ft}),J=(0,N.getEdges)(U==null?void 0:U.id,et==null?void 0:et.id,p,{v:l.source,w:l.target})}if(it=J.reduce(function(zt,Vt){return k(k([],zt,!0),Vt.points.map(function(kt){return z(z({},kt),{x:kt.x+b[0],y:kt.y+b[1]})}),!0)},[]),it=it.slice(1,-1),l.controlPoints=it,(et==null?void 0:et.type)===N.NodeType.META){var Mt=w.findIndex(function(zt){return zt.id===(et==null?void 0:et.id)});if(!w[Mt]||!((K=w[Mt].inEdges)===null||K===void 0)&&K.some(function(zt){return zt.source===U.id&&zt.target===et.id}))return;(Z=w[Mt].inEdges)===null||Z===void 0||Z.push({source:U.id,target:et.id,controlPoints:it})}if((U==null?void 0:U.type)===N.NodeType.META){var Mt=w.findIndex(function(Vt){return Vt.id===(U==null?void 0:U.id)});if(!w[Mt]||!((X=w[Mt].outEdges)===null||X===void 0)&&X.some(function(Vt){return Vt.source===U.id&&Vt.target===et.id}))return;(W=w[Mt].outEdges)===null||W===void 0||W.push({source:U.id,target:et.id,controlPoints:it})}}))},v.prototype.getType=function(){return"dagreCompound"},v.prototype.getDataByOrder=function(p){return p.every(function(g){return g.layoutOrder!==void 0})||p.forEach(function(g,T){g.layoutOrder=T}),p.sort(function(g,T){return g.layoutOrder-T.layoutOrder})},v}(E.Base);S.DagreCompoundLayout=m},18658:function(le,S,M){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(g){for(var T,w=1,C=arguments.length;w<C;w++){T=arguments[w];for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&(g[O]=T[O])}return g},x.apply(this,arguments)},z=this&&this.__createBinding||(Object.create?function(g,T,w,C){C===void 0&&(C=w);var O=Object.getOwnPropertyDescriptor(T,w);(!O||("get"in O?!T.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return T[w]}}),Object.defineProperty(g,C,O)}:function(g,T,w,C){C===void 0&&(C=w),g[C]=T[w]}),k=this&&this.__setModuleDefault||(Object.create?function(g,T){Object.defineProperty(g,"default",{enumerable:!0,value:T})}:function(g,T){g.default=T}),E=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var T={};if(g!=null)for(var w in g)w!=="default"&&Object.prototype.hasOwnProperty.call(g,w)&&z(T,g,w);return k(T,g),T},N=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(S,"__esModule",{value:!0});var I=E(M(87599)),m=N(M(96349)),y=N(M(67009)),v=M(98989);function p(g,T){var w=g.nodes,C=g.edges,O=T.width,b=T.height;if(!(w!=null&&w.length))return Promise.resolve();var l=[];w.forEach(function(J){var rt=C.filter(function(pt){return pt.source===J.id||pt.target===J.id});if(rt.length>1){var mt=x({},J);delete mt.size,l.push(mt)}});var K=[];C.forEach(function(J){var rt=l.find(function(pt){return pt.id===J.source}),mt=l.find(function(pt){return pt.id===J.target});rt&&mt&&K.push(J)});var Z=new v.DagreLayout({type:"dagre",ranksep:T.nodeMinGap,nodesep:T.nodeMinGap}),X=Z.layout({nodes:l,edges:K}).nodes;w.forEach(function(J){var rt=(X||[]).find(function(mt){return mt.id===J.id});J.x=(rt==null?void 0:rt.x)||O/2,J.y=(rt==null?void 0:rt.y)||b/2});var W=JSON.parse(JSON.stringify(w)),U=JSON.parse(JSON.stringify(C)),et=I.forceSimulation().nodes(W).force("link",I.forceLink(U).id(function(J){return J.id}).distance(function(J){var rt=K.find(function(mt){return mt.source===J.source&&mt.target===J.target});return rt?30:20})).force("charge",I.forceManyBody()).force("center",I.forceCenter(O/2,b/2)).force("x",I.forceX(O/2)).force("y",I.forceY(b/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),it=new Promise(function(J){et.on("end",function(){w.forEach(function(Vt){var kt=W.find(function(st){return st.id===Vt.id});kt&&(Vt.x=kt.x,Vt.y=kt.y)});var rt=Math.min.apply(Math,w.map(function(Vt){return Vt.x})),mt=Math.max.apply(Math,w.map(function(Vt){return Vt.x})),pt=Math.min.apply(Math,w.map(function(Vt){return Vt.y})),ft=Math.max.apply(Math,w.map(function(Vt){return Vt.y})),Mt=O/(mt-rt),zt=b/(ft-pt);w.forEach(function(Vt){Vt.x!==void 0&&Mt<1&&(Vt.x=(Vt.x-rt)*Mt),Vt.y!==void 0&&zt<1&&(Vt.y=(Vt.y-pt)*zt)}),w.forEach(function(Vt){Vt.sizeTemp=Vt.size,Vt.size=[10,10]}),(0,y.default)(w,C),w.forEach(function(Vt){Vt.size=Vt.sizeTemp||[],delete Vt.sizeTemp}),(0,m.default)({nodes:w,edges:C},T),J()})});return it}S.default=p},96349:function(le,S,M){"use strict";var x=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(S,"__esModule",{value:!0});var z=x(M(92900));function k(E,N){if(!E.nodes||E.nodes.length===0)return E;var I=N.width,m=N.height,y=N.nodeMinGap,v=1e4,p=1e4;E.nodes.forEach(function(U){var et=U.size[0]||50,it=U.size[1]||50;v=Math.min(et,v),p=Math.min(it,p)});var g=new z.default;g.init(I,m,{CELL_H:p,CELL_W:v}),E.nodes.forEach(function(U){var et=g.occupyNearest(U);et&&(et.node={id:U.id,size:U.size},U.x=et.x,U.y=et.y,U.dx=et.dx,U.dy=et.dy)});for(var T=0;T<E.nodes.length;T++){var w=E.nodes[T],C=g.findGridByNodeId(w.id);if(!C)throw new Error("can not find node cell");var O=C.column,b=C.row;if(w.size[0]+y>v){for(var l=Math.ceil((w.size[0]+y)/v)-1,K=l,Z=0;Z<l;Z++){var X=g.additionColumn.indexOf(O+Z+1)>-1;if(X&&!g.cells[O+Z+1][b].node)K--;else break}g.insertColumn(O,K)}if(w.size[1]+y>p){for(var l=Math.ceil((w.size[1]+y)/p)-1,K=l,Z=0;Z<l;Z++){var X=g.additionRow.indexOf(b+Z+1)>-1;if(X&&!g.cells[O][b+Z+1].node)K--;else break}g.insertRow(b,K)}}for(var T=0;T<g.columnNum;T++)for(var W=function(et){var it=g.cells[T][et];if(it.node){var J=E.nodes.find(function(rt){var mt;return rt.id===((mt=it==null?void 0:it.node)===null||mt===void 0?void 0:mt.id)});J&&(J.x=it.x+J.size[0]/2,J.y=it.y+J.size[1]/2)}},Z=0;Z<g.rowNum;Z++)W(Z)}S.default=k},92900:function(le,S){"use strict";var M=this&&this.__assign||function(){return M=Object.assign||function(z){for(var k,E=1,N=arguments.length;E<N;E++){k=arguments[E];for(var I in k)Object.prototype.hasOwnProperty.call(k,I)&&(z[I]=k[I])}return z},M.apply(this,arguments)};Object.defineProperty(S,"__esModule",{value:!0});var x=function(){function z(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return z.prototype.init=function(k,E,N){this.cells=[],this.CELL_W=N.CELL_W||z.DEFAULT_CELL_W,this.CELL_H=N.CELL_H||z.DEFAULT_CELL_H,this.columnNum=Math.ceil(k/this.CELL_W),this.rowNum=Math.ceil(E/this.CELL_H),z.MIN_DIST=Math.pow(k,2)+Math.pow(E,2);for(var I=0;I<this.columnNum;I++){for(var m=[],y=0;y<this.rowNum;y++){var v={dx:I,dy:y,x:I*this.CELL_W,y:y*this.CELL_H,occupied:!1};m.push(v)}this.cells.push(m)}},z.prototype.findGridByNodeId=function(k){for(var E,N,I=0;I<this.columnNum;I++)for(var m=0;m<this.rowNum;m++)if(this.cells[I][m].node&&((N=(E=this.cells[I][m])===null||E===void 0?void 0:E.node)===null||N===void 0?void 0:N.id)===k)return{column:I,row:m};return null},z.prototype.sqdist=function(k,E){return Math.pow(k.x-E.x,2)+Math.pow(k.y-E.y,2)},z.prototype.occupyNearest=function(k){for(var E=z.MIN_DIST,N,I=null,m=0;m<this.columnNum;m++)for(var y=0;y<this.rowNum;y++)!this.cells[m][y].occupied&&(N=this.sqdist(k,this.cells[m][y]))<E&&(E=N,I=this.cells[m][y]);return I&&(I.occupied=!0),I},z.prototype.insertColumn=function(k,E){if(!(E<=0)){for(var N=0;N<E;N++){this.cells[N+this.columnNum]=[];for(var I=0;I<this.rowNum;I++)this.cells[N+this.columnNum][I]={dx:N,dy:I,x:N*this.CELL_W,y:I*this.CELL_H,occupied:!1,node:null}}for(var N=this.columnNum-1;N>k;N--)for(var I=0;I<this.rowNum;I++)this.cells[N+E][I]=M(M({},this.cells[N][I]),{x:(N+E)*this.CELL_W,y:I*this.CELL_H}),this.cells[N][I]={x:N*this.CELL_W,y:I*this.CELL_H,occupied:!0,node:null};for(var I=0;I<this.additionColumn.length;I++)this.additionColumn[I]>=k&&(this.additionColumn[I]+=E);for(var N=0;N<E;N++)this.additionColumn.push(k+N+1);this.columnNum+=E}},z.prototype.insertRow=function(k,E){if(!(E<=0)){for(var N=0;N<E;N++)for(var I=0;I<this.columnNum;I++)this.cells[I][N+this.rowNum]={dx:I,dy:N,x:I*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var I=0;I<this.columnNum;I++)for(var N=this.rowNum-1;N>k;N--)this.cells[I][N+E]=M(M({},this.cells[I][N]),{dx:I,dy:N+E,x:I*this.CELL_W,y:(N+E)*this.CELL_H}),this.cells[I][N]={dx:I,dy:N,x:I*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.additionRow.length;N++)this.additionRow[N]>=k&&(this.additionRow[N]+=E);for(var I=0;I<E;I++)this.additionRow.push(k+I+1);this.rowNum+=E}},z.prototype.getNodes=function(){for(var k=[],E=0;E<this.columnNum;E++)for(var N=0;N<this.rowNum;N++)this.cells[E][N].node&&k.push(this.cells[E][N]);return k},z.MIN_DIST=50,z.DEFAULT_CELL_W=80,z.DEFAULT_CELL_H=80,z}();S.default=x},83529:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var I=function(m,y){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},I(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");I(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}(),z=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(S,"__esModule",{value:!0}),S.ERLayout=void 0;var k=M(94416),E=z(M(18658)),N=function(I){x(m,I);function m(y){var v=I.call(this)||this;return v.width=300,v.height=300,v.nodeMinGap=50,v.onLayoutEnd=function(){},y&&v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},m.prototype.execute=function(){var y=this,v=y.nodes,p=y.edges;return v==null||v.forEach(function(g){g.size||(g.size=[50,50])}),(0,E.default)({nodes:v,edges:p},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){y.onLayoutEnd&&y.onLayoutEnd()})},m.prototype.getType=function(){return"er"},m}(k.Base);S.ERLayout=N},67009:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=1200,x=800,z=1e7,k=10,E=3.141592653589793,N=1.5707963267948966,I=E*.375,m=E*.625,y=new Map,v=10,p=10,g=.8,T=.1,w=.5;function C(W,U,et){var it=W.x-W.size[0]/2,J=W.y-W.size[1]/2,rt=W.x+W.size[0]/2,mt=W.y+W.size[1]/2,pt=U.x-U.size[0]/2,ft=U.y-U.size[1]/2,Mt=U.x+U.size[0]/2,zt=U.y+U.size[1]/2,Vt=W.x,kt=W.y,st=U.x,St=U.y,qt=st-Vt,re=Math.atan2(qt,St-kt),Nt=0,be=0,Te=0,nr=0;re>N?(be=J-zt,Nt=pt-rt,Te=parseFloat(be?(be/Math.cos(re)).toFixed(2):Nt.toFixed(2)),nr=parseFloat(Nt?(Nt/Math.sin(re)).toFixed(2):be.toFixed(2))):0<re&&re<=N?(be=ft-mt,Nt=pt-rt,be>Nt?Te=nr=parseFloat(be?(be/Math.cos(re)).toFixed(2):Nt.toFixed(2)):Te=nr=parseFloat(Nt?(Nt/Math.sin(re)).toFixed(2):be.toFixed(2))):re<-N?(be=J-zt,Nt=-(Mt-it),be>Nt?Te=nr=parseFloat(be?(be/Math.cos(re)).toFixed(2):Nt.toFixed(2)):Te=nr=parseFloat(Nt?(Nt/Math.sin(re)).toFixed(2):be.toFixed(2))):(be=ft-mt,Math.abs(qt)>(rt-it)/2?Nt=it-Mt:Nt=qt,be>Nt?Te=nr=parseFloat(be?(be/Math.cos(re)).toFixed(2):Nt.toFixed(2)):Te=nr=parseFloat(Nt&&re!==0?(Nt/Math.sin(re)).toFixed(2):be.toFixed(2)));var Rt=parseFloat(re.toFixed(2)),Dt=et;return et&&(Dt=I<Rt&&Rt<m),{distance:Math.abs(Te<nr?Te:nr),isHoriz:Dt}}function O(W,U){var et=y.get(W.id)||[],it=et.find(function(D){return D.source===U.id||D.target===U.id}),J=W.size[0]*W.size[1],rt=U.size[0]*U.size[1],mt=J>rt?U:W,pt=J>rt?W:U,ft=mt.x-mt.size[0]/2,Mt=mt.y-mt.size[1]/2,zt=mt.x+mt.size[0]/2,Vt=mt.y+mt.size[1]/2,kt=pt.x-pt.size[0]/2,st=pt.y-pt.size[1]/2,St=pt.x+pt.size[0]/2,qt=pt.y+pt.size[1]/2,re=mt.x,Nt=mt.y,be=pt.x,Te=pt.y,nr=zt>=kt&&St>=ft&&Vt>=st&&qt>=Mt,Rt=0,Dt=0;if(nr){Dt=Math.sqrt(Math.pow(be-re,2)+Math.pow(Te-Nt,2));var At=ft>kt?ft:kt,Xt=Mt>st?Mt:st,$t=zt<St?zt:St,Tt=Vt<qt?Vt:qt,Kt=$t-At,Ee=Tt-Xt,vt=Kt*Ee;Dt===0&&(Dt=1e-7),Rt=k*1/Dt*100+vt,Rt*=z}else{var bt=!1,wt=C(mt,pt,bt);Dt=wt.distance,bt=wt.isHoriz,Dt<=k?Dt!==0?it?Rt+=k+z*1/Dt:Rt+=k+z*k/Dt:Rt+=z:(Rt+=Dt,it&&(Rt+=Dt*Dt))}return Rt}function b(W){for(var U=0,et=0;et<W.length;et++){var it=W[et];(it.x<0||it.y<0||it.x>M||it.y>x)&&(U+=1e12);for(var J=et+1;J<W.length;J++)U+=O(it,W[J])}return U}function l(W,U,et,it){var J=new Map;et.forEach(function(re,Nt){J.set(re.id,re)});var rt=it.filter(function(re){return re.source===W.id||re.target===W.id})||[],mt=[];rt.forEach(function(re){var Nt=re.source===W.id?re.target:re.source,be=J.get(Nt);be&&mt.push(be)});for(var pt=!0,ft=0;ft<mt.length;ft++){var Mt=mt[ft],zt=Math.atan((W.y-Mt.y)/(Mt.x-W.y))*180,Vt=Math.atan((U.y-Mt.y)/(Mt.x-U.y))*180,kt=zt<30||zt>150,st=Vt<30||Vt>150,St=zt>70&&zt<110,qt=Vt>70&&Vt<110;if(kt&&!st||zt*Vt<0){pt=!1;break}else if(St&&!qt||zt*Vt<0){pt=!1;break}else if((Mt.x-W.x)*(Mt.x-U.x)<0){pt=!1;break}else if((Mt.y-W.y)*(Mt.y-U.y)<0){pt=!1;break}}return pt}function K(W,U){for(var et=!1,it=1,J=v*it,rt=p*it,mt=[J,-J,0,0],pt=[0,0,rt,-rt],ft=0;ft<W.length;++ft)for(var Mt=W[ft],zt=Z(Mt,W),Vt=0;Vt<mt.length;Vt++){var kt=l(Mt,{x:Mt.x+mt[Vt],y:Mt.y+pt[Vt]},W,U);if(kt){Mt.x+=mt[Vt],Mt.y+=pt[Vt];var st=Z(Mt,W),St=Math.random();st<zt||St<g&&St>T?(zt=st,et=!0):(Mt.x-=mt[Vt],Mt.y-=pt[Vt])}}return g>T&&(g*=w),et?b(W):0}function Z(W,U){var et=0;(W.x<0||W.y<0||W.x+W.size[0]+20>M||W.y+W.size[1]+20>x)&&(et+=1e12);for(var it=0;it<U.length;++it)W.id!==U[it].id&&(et+=O(W,U[it]));return et}function X(W,U){if(W.length===0)return{nodes:W,edges:U};W.forEach(function(Mt){var zt=U.filter(function(Vt){return Vt.source===Mt.id||Vt.target===Mt.id});y.set(Mt,zt)}),W.sort(function(Mt,zt){var Vt,kt;return((Vt=y.get(Mt.id))===null||Vt===void 0?void 0:Vt.length)-((kt=y.get(zt.id))===null||kt===void 0?void 0:kt.length)});for(var et=b(W),it=20,J=1,rt=0,mt=50,pt=0;it>0&&(pt++,!(pt>=mt));){var ft=K(W,U);ft!==0&&(rt=ft),J=rt-et,et=rt,J===0?--it:it=20}return W.forEach(function(Mt){Mt.x=Mt.x-Mt.size[0]/2,Mt.y=Mt.y-Mt.size[1]/2}),{nodes:W,edges:U}}S.default=X},20083:function(le,S,M){"use strict";var x=this&&this.__createBinding||(Object.create?function(m,y,v,p){p===void 0&&(p=v);var g=Object.getOwnPropertyDescriptor(y,v);(!g||("get"in g?!y.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return y[v]}}),Object.defineProperty(m,p,g)}:function(m,y,v,p){p===void 0&&(p=v),m[p]=y[v]}),z=this&&this.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),k=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var v in m)v!=="default"&&Object.prototype.hasOwnProperty.call(m,v)&&x(y,m,v);return z(y,m),y};Object.defineProperty(S,"__esModule",{value:!0});var E=k(M(87599)),N=M(78302);function I(){function m(Tt){return function(){return Tt}}var y=function(Tt){return Tt.cluster},v=m(1),p=m(-1),g=m(100),T=m(.1),w=[0,0],C=[],O={},b=[],l=100,K=100,Z={none:{x:0,y:0}},X=[],W,U="force",et=!0,it=.1;function J(Tt){if(!et)return J;W.tick(),zt();for(var Kt=0,Ee=C.length,vt=void 0,bt=Tt*it;Kt<Ee;++Kt)vt=C[Kt],vt.vx+=(Z[y(vt)].x-vt.x)*bt,vt.vy+=(Z[y(vt)].y-vt.y)*bt}function rt(){C&&mt()}function mt(){if(!(!C||!C.length)){if(y(C[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Tt=pt();W=E.forceSimulation(Tt.nodes).force("x",E.forceX(l).strength(.1)).force("y",E.forceY(K).strength(.1)).force("collide",E.forceCollide(function(Kt){return Kt.r}).iterations(4)).force("charge",E.forceManyBody().strength(p)).force("links",E.forceLink(Tt.nodes.length?Tt.links:[]).distance(g).strength(T)),X=W.nodes(),zt()}}function pt(){var Tt=[],Kt=[],Ee={},vt=[],bt={},wt=[];return bt=ft(C),wt=Mt(b),vt=Object.keys(bt),vt.forEach(function(D,tt){var Ot=bt[D];Tt.push({id:D,size:Ot.count,r:Math.sqrt(Ot.sumforceNodeSize/Math.PI)}),Ee[D]=tt}),wt.forEach(function(D){var tt=(0,N.getEdgeTerminal)(D,"source"),Ot=(0,N.getEdgeTerminal)(D,"target"),ct=Ee[tt],ie=Ee[Ot];ct!==void 0&&ie!==void 0&&Kt.push({source:ct,target:ie,count:D.count})}),{nodes:Tt,links:Kt}}function ft(Tt){var Kt={};return Tt.forEach(function(Ee){var vt=y(Ee);Kt[vt]||(Kt[vt]={count:0,sumforceNodeSize:0})}),Tt.forEach(function(Ee){var vt=y(Ee),bt=v(Ee),wt=Kt[vt];wt.count=wt.count+1,wt.sumforceNodeSize=wt.sumforceNodeSize+Math.PI*(bt*bt)*1.3,Kt[vt]=wt}),Kt}function Mt(Tt){var Kt={},Ee=[];Tt.forEach(function(bt){var wt=Vt(bt),D=0;Kt[wt]!==void 0&&(D=Kt[wt]),D+=1,Kt[wt]=D});var vt=Object.entries(Kt);return vt.forEach(function(bt){var wt=bt[0],D=bt[1],tt=wt.split("~")[0],Ot=wt.split("~")[1];tt!==void 0&&Ot!==void 0&&Ee.push({source:tt,target:Ot,count:D})}),Ee}function zt(){return Z={none:{x:0,y:0}},X.forEach(function(Tt){Z[Tt.id]={x:Tt.x-w[0],y:Tt.y-w[1]}}),Z}function Vt(Tt){var Kt=(0,N.getEdgeTerminal)(Tt,"source"),Ee=(0,N.getEdgeTerminal)(Tt,"target"),vt=y(O[Kt]),bt=y(O[Ee]);return vt<=bt?"".concat(vt,"~").concat(bt):"".concat(bt,"~").concat(vt)}function kt(Tt){O={},Tt.forEach(function(Kt){O[Kt.id]=Kt})}function st(Tt){return arguments.length?(U=Tt,rt(),J):U}function St(Tt){return arguments.length?typeof Tt=="string"?(y=function(Kt){return Kt[Tt]},J):(y=Tt,J):y}function qt(Tt){return arguments.length?(et=Tt,J):et}function re(Tt){return arguments.length?(it=Tt,J):it}function Nt(Tt){return arguments.length?(l=Tt,J):l}function be(Tt){return arguments.length?(K=Tt,J):K}function Te(Tt){return arguments.length?(kt(Tt||[]),C=Tt||[],J):C}function nr(Tt){return arguments.length?(b=Tt||[],rt(),J):b}function Rt(Tt){return arguments.length?(typeof Tt=="function"?v=Tt:v=m(+Tt),rt(),J):v}function Dt(Tt){return arguments.length?(typeof Tt=="function"?p=Tt:p=m(+Tt),rt(),J):p}function At(Tt){return arguments.length?(typeof Tt=="function"?g=Tt:g=m(+Tt),rt(),J):g}function Xt(Tt){return arguments.length?(typeof Tt=="function"?T=Tt:T=m(+Tt),rt(),J):T}function $t(Tt){return arguments.length?(w=Tt,J):w}return J.initialize=function(Tt){C=Tt,rt()},J.template=st,J.groupBy=St,J.enableGrouping=qt,J.strength=re,J.centerX=Nt,J.centerY=be,J.nodes=Te,J.links=nr,J.forceNodeSize=Rt,J.nodeSize=J.forceNodeSize,J.forceCharge=Dt,J.forceLinkDistance=At,J.forceLinkStrength=Xt,J.offset=$t,J.getFocis=zt,J}S.default=I},49116:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var C=function(O,b){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,K){l.__proto__=K}||function(l,K){for(var Z in K)Object.prototype.hasOwnProperty.call(K,Z)&&(l[Z]=K[Z])},C(O,b)};return function(O,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");C(O,b);function l(){this.constructor=O}O.prototype=b===null?Object.create(b):(l.prototype=b.prototype,new l)}}(),z=this&&this.__createBinding||(Object.create?function(C,O,b,l){l===void 0&&(l=b);var K=Object.getOwnPropertyDescriptor(O,b);(!K||("get"in K?!O.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return O[b]}}),Object.defineProperty(C,l,K)}:function(C,O,b,l){l===void 0&&(l=b),C[l]=O[b]}),k=this&&this.__setModuleDefault||(Object.create?function(C,O){Object.defineProperty(C,"default",{enumerable:!0,value:O})}:function(C,O){C.default=O}),E=this&&this.__importStar||function(C){if(C&&C.__esModule)return C;var O={};if(C!=null)for(var b in C)b!=="default"&&Object.prototype.hasOwnProperty.call(C,b)&&z(O,C,b);return k(O,C),O},N=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(S,"__esModule",{value:!0}),S.ForceLayout=void 0;var I=E(M(87599)),m=N(M(20083)),y=M(78302),v=M(94416),p=M(17219),g=function(C){x(O,C);function O(b){var l=C.call(this)||this;return l.center=[0,0],l.nodeStrength=null,l.edgeStrength=null,l.preventOverlap=!1,l.clusterNodeStrength=null,l.clusterEdgeStrength=null,l.clusterEdgeDistance=null,l.clusterNodeSize=null,l.clusterFociStrength=null,l.linkDistance=50,l.alphaDecay=.028,l.alphaMin=.001,l.alpha=.3,l.collideStrength=1,l.workerEnabled=!1,l.tick=function(){},l.onLayoutEnd=function(){},l.ticking=void 0,b&&l.updateCfg(b),l}return O.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},O.prototype.init=function(b){var l=this;l.nodes=b.nodes||[];var K=b.edges||[];l.edges=K.map(function(Z){var X={},W=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Z).forEach(function(U){W.indexOf(U)>-1||(X[U]=Z[U])}),X}),l.ticking=!1},O.prototype.execute=function(b){var l=this,K=l.nodes,Z=l.edges;if(!l.ticking){var X=l.forceSimulation,W=l.alphaMin,U=l.alphaDecay,et=l.alpha;if(X){if(b){if(l.clustering&&l.clusterForce&&(l.clusterForce.nodes(K),l.clusterForce.links(Z)),X.nodes(K),Z&&l.edgeForce)l.edgeForce.links(Z);else if(Z&&!l.edgeForce){var rt=I.forceLink().id(function(Mt){return Mt.id}).links(Z);l.edgeStrength&&rt.strength(l.edgeStrength),l.linkDistance&&rt.distance(l.linkDistance),l.edgeForce=rt,X.force("link",rt)}}l.preventOverlap&&l.overlapProcess(X),X.alpha(et).restart(),this.ticking=!0}else try{var it=I.forceManyBody();if(l.nodeStrength&&it.strength(l.nodeStrength),X=I.forceSimulation().nodes(K),l.clustering){var J=(0,m.default)();J.centerX(l.center[0]).centerY(l.center[1]).template("force").strength(l.clusterFociStrength),Z&&J.links(Z),K&&J.nodes(K),J.forceLinkDistance(l.clusterEdgeDistance).forceLinkStrength(l.clusterEdgeStrength).forceCharge(l.clusterNodeStrength).forceNodeSize(l.clusterNodeSize),l.clusterForce=J,X.force("group",J)}if(X.force("center",I.forceCenter(l.center[0],l.center[1])).force("charge",it).alpha(et).alphaDecay(U).alphaMin(W),l.preventOverlap&&l.overlapProcess(X),Z){var rt=I.forceLink().id(function(ft){return ft.id}).links(Z);l.edgeStrength&&rt.strength(l.edgeStrength),l.linkDistance&&rt.distance(l.linkDistance),l.edgeForce=rt,X.force("link",rt)}if(l.workerEnabled&&!w()&&(l.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!l.workerEnabled)X.on("tick",function(){l.tick()}).on("end",function(){l.ticking=!1,l.onLayoutEnd&&l.onLayoutEnd()}),l.ticking=!0;else{X.stop();for(var mt=T(X),pt=1;pt<=mt;pt++)X.tick(),postMessage({nodes:K,currentTick:pt,totalTicks:mt,type:p.LAYOUT_MESSAGE.TICK},void 0);l.ticking=!1}l.forceSimulation=X,l.ticking=!0}catch(ft){l.ticking=!1,console.warn(ft)}}},O.prototype.overlapProcess=function(b){var l=this,K=l.nodeSize,Z=l.nodeSpacing,X,W,U=l.collideStrength;if((0,y.isNumber)(Z)?W=function(){return Z}:(0,y.isFunction)(Z)?W=Z:W=function(){return 0},!K)X=function(rt){if(rt.size){if((0,y.isArray)(rt.size)){var mt=rt.size[0]>rt.size[1]?rt.size[0]:rt.size[1];return mt/2+W(rt)}if((0,y.isObject)(rt.size)){var mt=rt.size.width>rt.size.height?rt.size.width:rt.size.height;return mt/2+W(rt)}return rt.size/2+W(rt)}return 10+W(rt)};else if((0,y.isFunction)(K))X=function(rt){var mt=K(rt);return mt+W(rt)};else if((0,y.isArray)(K)){var et=K[0]>K[1]?K[0]:K[1],it=et/2;X=function(rt){return it+W(rt)}}else if((0,y.isNumber)(K)){var J=K/2;X=function(rt){return J+W(rt)}}else X=function(){return 10};b.force("collisionForce",I.forceCollide(X).strength(U))},O.prototype.updateCfg=function(b){var l=this;l.ticking&&(l.forceSimulation.stop(),l.ticking=!1),l.forceSimulation=null,Object.assign(l,b)},O.prototype.destroy=function(){var b=this;b.ticking&&(b.forceSimulation.stop(),b.ticking=!1),b.nodes=null,b.edges=null,b.destroyed=!0},O}(v.Base);S.ForceLayout=g;function T(C){var O=C.alphaMin(),b=C.alphaTarget(),l=C.alpha(),K=Math.log((O-b)/(l-b))/Math.log(1-C.alphaDecay()),Z=Math.ceil(K);return Z}function w(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},12032:function(le,S,M){"use strict";var x=this&&this.__createBinding||(Object.create?function(k,E,N,I){I===void 0&&(I=N);var m=Object.getOwnPropertyDescriptor(E,N);(!m||("get"in m?!E.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return E[N]}}),Object.defineProperty(k,I,m)}:function(k,E,N,I){I===void 0&&(I=N),k[I]=E[N]}),z=this&&this.__exportStar||function(k,E){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&x(E,k,N)};Object.defineProperty(S,"__esModule",{value:!0}),z(M(49116),S)},38289:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.forceNBody=void 0;var x=M(45517),z=.81,k=.1;function E(y,v,p,g,T){var w=p/g,C=y.map(function(b,l){var K=v[b.id],Z=K.data,X=K.x,W=K.y,U=K.size,et=Z.layout.force.nodeStrength;return{x:X,y:W,size:U,index:l,vx:0,vy:0,weight:w*et}}),O=(0,x.quadtree)(C,function(b){return b.x},function(b){return b.y}).visitAfter(N);return C.forEach(function(b){m(b,O)}),C.map(function(b,l){var K=v[y[l].id],Z=K.data.layout.force.mass,X=Z===void 0?1:Z;T[2*l]=b.vx/X,T[2*l+1]=b.vy/X}),T}S.forceNBody=E;function N(y){var v=0,p=0,g=0;if(y.length){for(var T=0;T<4;T++){var w=y[T];w&&w.weight&&(v+=w.weight,p+=w.x*w.weight,g+=w.y*w.weight)}y.x=p/v,y.y=g/v,y.weight=v}else{var w=y;y.x=w.data.x,y.y=w.data.y,y.weight=w.data.weight}}var I=function(y,v,p,g,T,w){var C=w.x-y.x||k,O=w.y-y.y||k,b=g-v,l=C*C+O*O,K=Math.sqrt(l)*l;if(b*b*z<l){var Z=y.weight/K;return w.vx+=C*Z,w.vy+=O*Z,!0}if(y.length)return!1;if(y.data!==w){var Z=y.data.weight/K;w.vx+=C*Z,w.vy+=O*Z}};function m(y,v){v.visit(function(p,g,T,w,C){return I(p,g,T,w,C,y)})}},36129:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(g[w]=T[w])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(y){for(var v,p=1,g=arguments.length;p<g;p++){v=arguments[p];for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&(y[T]=v[T])}return y},z.apply(this,arguments)};Object.defineProperty(S,"__esModule",{value:!0}),S.Force2Layout=void 0;var k=M(94416),E=M(78302),N=M(38289),I=function(y,v){var p;return y?(0,E.isNumber)(y)?p=function(g){return y}:p=y:p=function(g){return v||1},p},m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=1e3,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(T){return{x:g.width/2,y:g.height/2}}},g.updateCfg(p),g}return v.prototype.getCentripetalOptions=function(){var p=this,g=p.leafCluster,T=p.clustering,w=p.nodeClusterBy,C=p.nodes,O=p.nodeMap,b=p.clusterNodeStrength,l=function(mt){return typeof b=="function"?b(mt):b},K={},Z;if(g){Z=this.getSameTypeLeafMap()||{};var X=Array.from(new Set(C==null?void 0:C.map(function(mt){return mt[w]})))||[];K={single:100,leaf:function(mt,pt,ft){var Mt=Z[mt.id]||{},zt=Mt.relativeLeafNodes,Vt=Mt.sameTypeLeafNodes;return(Vt==null?void 0:Vt.length)===(zt==null?void 0:zt.length)||(X==null?void 0:X.length)===1?1:l(mt)},others:1,center:function(mt,pt,ft){var Mt,zt=(((Mt=mt.data)===null||Mt===void 0?void 0:Mt.layout)||{}).degree;if(!zt)return{x:100,y:100};var Vt;if(zt===1){var kt=(Z[mt.id]||{}).sameTypeLeafNodes,st=kt===void 0?[]:kt;st.length===1?Vt=void 0:st.length>1&&(Vt=(0,E.getAvgNodePosition)(st))}else Vt=void 0;return{x:Vt==null?void 0:Vt.x,y:Vt==null?void 0:Vt.y}}}}if(T){Z||(Z=this.getSameTypeLeafMap());var W=Array.from(new Set(C.map(function(mt,pt){return mt[w]}))).filter(function(mt){return mt!==void 0}),U={};W.forEach(function(mt){var pt=C.filter(function(ft){return ft[w]===mt}).map(function(ft){return O[ft.id]});U[mt]=(0,E.getAvgNodePosition)(pt)}),K={single:function(mt){return l(mt)},leaf:function(mt){return l(mt)},others:function(mt){return l(mt)},center:function(mt,pt,ft){var Mt=U[mt[w]];return{x:Mt==null?void 0:Mt.x,y:Mt==null?void 0:Mt.y}}}}this.centripetalOptions=z(z({},this.centripetalOptions),K);var et=this.centripetalOptions,it=et.leaf,J=et.single,rt=et.others;it&&typeof it!="function"&&(this.centripetalOptions.leaf=function(){return it}),J&&typeof J!="function"&&(this.centripetalOptions.single=function(){return J}),rt&&typeof rt!="function"&&(this.centripetalOptions.others=function(){return rt})},v.prototype.updateCfg=function(p){p&&Object.assign(this,p)},v.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},v.prototype.execute=function(){var p=this;p.stop();var g=p.nodes,T=p.edges,w=p.defSpringLen;if(p.judgingDistance=0,!g||g.length===0){p.onLayoutEnd([]);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var C=p.center;if(g.length===1){g[0].x=C[0],g[0].y=C[1],p.onLayoutEnd([z({},g[0])]);return}p.degreesMap=(0,E.getDegreeMap)(g,T),p.getMass||(p.getMass=function(W){var U=1;(0,E.isNumber)(W.mass)&&(U=W.mass);var et=p.degreesMap[W.id].all;return!et||et<5?U:et*5*U});var O=p.nodeSize,b;if(p.preventOverlap){var l=p.nodeSpacing,K;(0,E.isNumber)(l)?K=function(){return l}:(0,E.isFunction)(l)?K=l:K=function(){return 0},O?(0,E.isArray)(O)?b=function(W){return Math.max(O[0],O[1])+K(W)}:b=function(W){return O+K(W)}:b=function(W){return W.size?(0,E.isArray)(W.size)?Math.max(W.size[0],W.size[1])+K(W):(0,E.isObject)(W.size)?Math.max(W.size.width,W.size.height)+K(W):W.size+K(W):10+K(W)}}p.nodeSize=b,p.linkDistance=I(p.linkDistance,1),p.nodeStrength=I(p.nodeStrength,1),p.edgeStrength=I(p.edgeStrength,1);var Z={},X={};g.forEach(function(W,U){(0,E.isNumber)(W.x)||(W.x=Math.random()*p.width),(0,E.isNumber)(W.y)||(W.y=Math.random()*p.height);var et=p.degreesMap[W.id];Z[W.id]=z(z({},W),{data:z(z({},W.data),{size:p.nodeSize(W)||30,layout:{inDegree:et.in,outDegree:et.out,degree:et.all,tDegree:et.in,sDegree:et.out,force:{mass:p.getMass(W),nodeStrength:p.nodeStrength(W)}}})}),X[W.id]=U}),p.nodeMap=Z,p.nodeIdxMap=X,p.edgeInfos=[],T==null||T.forEach(function(W){var U=Z[W.source],et=Z[W.target];!U||!et?elf.edgeInfos.push({}):p.edgeInfos.push({edgeStrength:p.edgeStrength(W),linkDistance:w?w(z(z({},W),{source:U,target:et}),U,et):p.linkDistance(W,U,et)||1+(O(U)+O(U)||0)/2})}),this.getCentripetalOptions(),p.onLayoutEnd=p.onLayoutEnd||function(){},p.run()},v.prototype.run=function(){var p=this,g=p.maxIteration,T=p.nodes,w=p.workerEnabled,C=p.minMovement,O=p.animate,b=p.nodeMap;if(T){var l=[];T.forEach(function(et,it){l[2*it]=0,l[2*it+1]=0});var K=g,Z=!O;if(w||Z){for(var X=0,W=0;(p.judgingDistance>C||W<1)&&W<K;W++)X=W,p.runOneStep(W,l);p.onLayoutEnd(Object.values(b))}else{if(typeof window=="undefined")return;var U=0;this.timeInterval=window.setInterval(function(){T&&(p.runOneStep(U,l),U++,(U>=K||p.judgingDistance<C)&&(p.onLayoutEnd(Object.values(b)),window.clearInterval(p.timeInterval)))},0)}}},v.prototype.runOneStep=function(p,g){var T,w=this,C=w.nodes,O=w.edges,b=w.nodeMap,l=w.monitor,K=[];if(C!=null&&C.length){w.calRepulsive(K),O&&w.calAttractive(K),w.calGravity(K);var Z=w.interval;if(w.updateVelocity(K,g,Z),w.updatePosition(g,Z),(T=w.tick)===null||T===void 0||T.call(w),l){var X=this.calTotalEnergy(K);l({energy:X,nodes:C,edges:O,iterations:p})}}},v.prototype.calTotalEnergy=function(p){var g=this,T=g.nodes,w=g.nodeMap;if(!(T!=null&&T.length))return 0;var C=0;return T.forEach(function(O,b){var l=p[2*b],K=p[2*b+1],Z=l*l+K*K,X=w[O.id].data.layout.force.mass,W=X===void 0?1:X;C+=W*Z*.5}),C},v.prototype.calRepulsive=function(p){var g=this,T=g.nodes,w=g.nodeMap,C=g.factor,O=g.coulombDisScale,b=g.nodeSize;(0,N.forceNBody)(T,w,C,O*O,p)},v.prototype.calAttractive=function(p){var g=this,T=g.edges,w=g.nodeMap,C=g.nodeIdxMap,O=g.edgeInfos,b=g.nodeSize;T.forEach(function(l,K){var Z=(0,E.getEdgeTerminal)(l,"source"),X=(0,E.getEdgeTerminal)(l,"target"),W=w[Z],U=w[X];if(!(!W||!U)){var et=U.x-W.x,it=U.y-W.y;!et&&!it&&(et=Math.random()*.01,it=Math.random()*.01);var J=Math.sqrt(et*et+it*it),rt=et/J,mt=it/J,pt=O[K]||{},ft=pt.linkDistance,Mt=ft===void 0?200:ft,zt=pt.edgeStrength,Vt=zt===void 0?200:zt,kt=Mt-J,st=kt*Vt,St=W.data.layout.force.mass||1,qt=U.data.layout.force.mass||1,re=1/St,Nt=1/qt,be=rt*st,Te=mt*st,nr=2*C[Z],Rt=2*C[X];p[nr]-=be*re,p[nr+1]-=Te*re,p[Rt]+=be*Nt,p[Rt+1]+=Te*Nt}})},v.prototype.calGravity=function(p){var g,T=this,w=T.nodes,C=T.edges,O=C===void 0?[]:C,b=T.nodeMap,l=T.width,K=T.height,Z=T.center,X=T.gravity,W=T.degreesMap,U=T.centripetalOptions;if(w)for(var et=w.length,it=0;it<et;it++){var J=2*it,rt=b[w[it].id],mt=rt.data.layout.force.mass,pt=mt===void 0?1:mt,ft=0,Mt=0,zt=X,Vt=W[rt.id],kt=Vt.in,st=Vt.out,St=Vt.all,qt=(g=T.getCenter)===null||g===void 0?void 0:g.call(T,rt,St);if(qt){var re=qt[0],Nt=qt[1],be=qt[2];ft=rt.x-re,Mt=rt.y-Nt,zt=be}else ft=rt.x-Z[0],Mt=rt.y-Z[1];if(zt&&(p[J]-=zt*ft/pt,p[J+1]-=zt*Mt/pt),U){var Te=U.leaf,nr=U.single,Rt=U.others,Dt=U.center,At=(Dt==null?void 0:Dt(rt,w,O,l,K))||{x:0,y:0,centerStrength:0},Xt=At.x,$t=At.y,Tt=At.centerStrength;if(!(0,E.isNumber)(Xt)||!(0,E.isNumber)($t))continue;var Kt=(rt.x-Xt)/pt,Ee=(rt.y-$t)/pt;if(Tt&&(p[J]-=Tt*Kt,p[J+1]-=Tt*Ee),St===0){var vt=nr(rt);if(!vt)continue;p[J]-=vt*Kt,p[J+1]-=vt*Ee;continue}if(kt===0||st===0){var bt=Te(rt,w,O);if(!bt)continue;p[J]-=bt*Kt,p[J+1]-=bt*Ee;continue}var wt=Rt(rt);if(!wt)continue;p[J]-=wt*Kt,p[J+1]-=wt*Ee}}},v.prototype.updateVelocity=function(p,g,T){var w=this,C=w.nodes,O=w.damping,b=w.maxSpeed;C!=null&&C.length&&C.forEach(function(l,K){var Z=(g[2*K]+p[2*K]*T)*O||.01,X=(g[2*K+1]+p[2*K+1]*T)*O||.01,W=Math.sqrt(Z*Z+X*X);if(W>b){var U=b/W;Z=U*Z,X=U*X}g[2*K]=Z,g[2*K+1]=X})},v.prototype.updatePosition=function(p,g){var T=this,w=T.nodes,C=T.distanceThresholdMode,O=T.nodeMap;if(!(w!=null&&w.length)){this.judgingDistance=0;return}var b=0;C==="max"?T.judgingDistance=-1/0:C==="min"&&(T.judgingDistance=1/0),w.forEach(function(l,K){var Z=O[l.id];if((0,E.isNumber)(l.fx)&&(0,E.isNumber)(l.fy)){l.x=l.fx,l.y=l.fy,Z.x=l.x,Z.y=l.y;return}var X=p[2*K]*g,W=p[2*K+1]*g;l.x+=X,l.y+=W,Z.x=l.x,Z.y=l.y;var U=Math.sqrt(X*X+W*W);switch(C){case"max":T.judgingDistance<U&&(T.judgingDistance=U);break;case"min":T.judgingDistance>U&&(T.judgingDistance=U);break;default:b=b+U;break}}),(!C||C==="mean")&&(T.judgingDistance=b/w.length)},v.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},v.prototype.destroy=function(){var p=this;p.stop(),p.tick=null,p.nodes=null,p.edges=null,p.destroyed=!0},v.prototype.getType=function(){return"force2"},v.prototype.getSameTypeLeafMap=function(){var p=this,g=p.nodeClusterBy,T=p.nodes,w=p.edges,C=p.nodeMap,O=p.degreesMap;if(T!=null&&T.length){var b={};return T.forEach(function(l,K){var Z=O[l.id].all;Z===1&&(b[l.id]=(0,E.getCoreNodeAndRelativeLeafNodes)("leaf",l,w,g,O,C))}),b}},v}(k.Base);S.Force2Layout=m},19615:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(){function x(z){this.id=z.id||0,this.rx=z.rx,this.ry=z.ry,this.fx=0,this.fy=0,this.mass=z.mass,this.degree=z.degree,this.g=z.g||0}return x.prototype.distanceTo=function(z){var k=this.rx-z.rx,E=this.ry-z.ry;return Math.hypot(k,E)},x.prototype.setPos=function(z,k){this.rx=z,this.ry=k},x.prototype.resetForce=function(){this.fx=0,this.fy=0},x.prototype.addForce=function(z){var k=z.rx-this.rx,E=z.ry-this.ry,N=Math.hypot(k,E);N=N<1e-4?1e-4:N;var I=this.g*(this.degree+1)*(z.degree+1)/N;this.fx+=I*k/N,this.fy+=I*E/N},x.prototype.in=function(z){return z.contains(this.rx,this.ry)},x.prototype.add=function(z){var k=this.mass+z.mass,E=(this.rx*this.mass+z.rx*z.mass)/k,N=(this.ry*this.mass+z.ry*z.mass)/k,I=this.degree+z.degree,m={rx:E,ry:N,mass:k,degree:I};return new x(m)},x}();S.default=M},58443:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,w){T.__proto__=w}||function(T,w){for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(T[C]=w[C])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(p,g);function T(){this.constructor=p}p.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}}(),z=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(S,"__esModule",{value:!0}),S.ForceAtlas2Layout=void 0;var k=M(94416),E=M(78302),N=z(M(19615)),I=z(M(80057)),m=z(M(37809)),y=function(v){x(p,v);function p(g){var T=v.call(this)||this;return T.center=[0,0],T.width=300,T.height=300,T.nodes=[],T.edges=[],T.kr=5,T.kg=1,T.mode="normal",T.preventOverlap=!1,T.dissuadeHubs=!1,T.barnesHut=void 0,T.maxIteration=0,T.ks=.1,T.ksmax=10,T.tao=.1,T.onLayoutEnd=function(){},T.prune=void 0,T.updateCfg(g),T}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.execute=function(){var g=this,T=g.nodes,w=g.onLayoutEnd,C=g.prune,O=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var b=[],l=T.length,K=0;K<l;K+=1){var Z=T[K],X=10,W=10;(0,E.isNumber)(Z.size)&&(X=Z.size,W=Z.size),(0,E.isArray)(Z.size)?(isNaN(Z.size[0])||(X=Z.size[0]),isNaN(Z.size[1])||(W=Z.size[1])):(0,E.isObject)(Z.size)&&(X=Z.size.width,W=Z.size.height),g.getWidth&&!isNaN(g.getWidth(Z))&&(W=g.getWidth(Z)),g.getHeight&&!isNaN(g.getHeight(Z))&&(X=g.getHeight(Z));var U=Math.max(X,W);b.push(U)}g.barnesHut===void 0&&l>250&&(g.barnesHut=!0),g.prune===void 0&&l>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(O=250,l<=200&&l>100?O=1e3:l>200&&(O=1200),this.maxIteration=O):this.maxIteration===0&&C&&(O=100,l<=200&&l>100?O=500:l>200&&(O=950),this.maxIteration=O),g.kr||(g.kr=50,l>100&&l<=500?g.kr=20:l>500&&(g.kr=1)),g.kg||(g.kg=20,l>100&&l<=500?g.kg=10:l>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(b),w()},p.prototype.updateNodesByForces=function(g){for(var T=this,w=T.edges,C=T.maxIteration,O=T.nodes,b=w.filter(function(Vt){var kt=(0,E.getEdgeTerminal)(Vt,"source"),st=(0,E.getEdgeTerminal)(Vt,"target");return kt!==st}),l=O.length,K=b.length,Z=[],X={},W={},U=[],et=0;et<l;et+=1)X[O[et].id]=et,Z[et]=0,(O[et].x===void 0||isNaN(O[et].x))&&(O[et].x=Math.random()*1e3),(O[et].y===void 0||isNaN(O[et].y))&&(O[et].y=Math.random()*1e3),U.push({x:O[et].x,y:O[et].y});for(var et=0;et<K;et+=1){for(var it=void 0,J=void 0,rt=0,mt=0,pt=0;pt<l;pt+=1){var ft=(0,E.getEdgeTerminal)(b[et],"source"),Mt=(0,E.getEdgeTerminal)(b[et],"target");O[pt].id===ft?(it=O[pt],rt=pt):O[pt].id===Mt&&(J=O[pt],mt=pt),W[et]={sourceIdx:rt,targetIdx:mt}}it&&(Z[X[it.id]]+=1),J&&(Z[X[J.id]]+=1)}var zt=C;if(O=this.iterate(zt,X,W,K,Z,g),T.prune){for(var pt=0;pt<K;pt+=1)Z[W[pt].sourceIdx]<=1?(O[W[pt].sourceIdx].x=O[W[pt].targetIdx].x,O[W[pt].sourceIdx].y=O[W[pt].targetIdx].y):Z[W[pt].targetIdx]<=1&&(O[W[pt].targetIdx].x=O[W[pt].sourceIdx].x,O[W[pt].targetIdx].y=O[W[pt].sourceIdx].y);T.prune=!1,T.barnesHut=!1,zt=100,O=this.iterate(zt,X,W,K,Z,g)}return O},p.prototype.iterate=function(g,T,w,C,O,b){for(var l=this,K=l.nodes,Z=l.kr,X=l.preventOverlap,W=l.barnesHut,U=K.length,et=0,it=100,J=g,rt=50,mt=[],pt=[],ft=[],Mt=0;Mt<U;Mt+=1)if(mt[2*Mt]=0,mt[2*Mt+1]=0,W){var zt={id:Mt,rx:K[Mt].x,ry:K[Mt].y,mass:1,g:Z,degree:O[Mt]};ft[Mt]=new N.default(zt)}for(;J>0;){for(var Mt=0;Mt<U;Mt+=1)pt[2*Mt]=mt[2*Mt],pt[2*Mt+1]=mt[2*Mt+1],mt[2*Mt]=0,mt[2*Mt+1]=0;mt=this.getAttrForces(J,rt,C,T,w,O,b,mt),W&&(X&&J>rt||!X)?mt=this.getOptRepGraForces(mt,ft,O):mt=this.getRepGraForces(J,rt,mt,it,b,O);var Vt=this.updatePos(mt,pt,et,O);K=Vt.nodes,et=Vt.sg,J--,l.tick&&l.tick()}return K},p.prototype.getAttrForces=function(g,T,w,C,O,b,l,K){for(var Z=this,X=Z.nodes,W=Z.preventOverlap,U=Z.dissuadeHubs,et=Z.mode,it=Z.prune,J=0;J<w;J+=1){var rt=X[O[J].sourceIdx],mt=O[J].sourceIdx,pt=X[O[J].targetIdx],ft=O[J].targetIdx;if(!(it&&(b[mt]<=1||b[ft]<=1))){var Mt=[pt.x-rt.x,pt.y-rt.y],zt=Math.hypot(Mt[0],Mt[1]);zt=zt<1e-4?1e-4:zt,Mt[0]=Mt[0]/zt,Mt[1]=Mt[1]/zt,W&&g<T&&(zt=zt-l[mt]-l[ft]);var Vt=zt,kt=Vt;et==="linlog"&&(Vt=Math.log(1+zt),kt=Vt),U&&(Vt=zt/b[mt],kt=zt/b[ft]),W&&g<T&&zt<=0?(Vt=0,kt=0):W&&g<T&&zt>0&&(Vt=zt,kt=zt),K[2*C[rt.id]]+=Vt*Mt[0],K[2*C[pt.id]]-=kt*Mt[0],K[2*C[rt.id]+1]+=Vt*Mt[1],K[2*C[pt.id]+1]-=kt*Mt[1]}}return K},p.prototype.getRepGraForces=function(g,T,w,C,O,b){for(var l=this,K=l.nodes,Z=l.preventOverlap,X=l.kr,W=l.kg,U=l.center,et=l.prune,it=K.length,J=0;J<it;J+=1){for(var rt=J+1;rt<it;rt+=1)if(!(et&&(b[J]<=1||b[rt]<=1))){var mt=[K[rt].x-K[J].x,K[rt].y-K[J].y],pt=Math.hypot(mt[0],mt[1]);pt=pt<1e-4?1e-4:pt,mt[0]=mt[0]/pt,mt[1]=mt[1]/pt,Z&&g<T&&(pt=pt-O[J]-O[rt]);var ft=X*(b[J]+1)*(b[rt]+1)/pt;Z&&g<T&&pt<0?ft=C*(b[J]+1)*(b[rt]+1):Z&&g<T&&pt===0?ft=0:Z&&g<T&&pt>0&&(ft=X*(b[J]+1)*(b[rt]+1)/pt),w[2*J]-=ft*mt[0],w[2*rt]+=ft*mt[0],w[2*J+1]-=ft*mt[1],w[2*rt+1]+=ft*mt[1]}var Mt=[K[J].x-U[0],K[J].y-U[1]],zt=Math.hypot(Mt[0],Mt[1]);Mt[0]=Mt[0]/zt,Mt[1]=Mt[1]/zt;var Vt=W*(b[J]+1);w[2*J]-=Vt*Mt[0],w[2*J+1]-=Vt*Mt[1]}return w},p.prototype.getOptRepGraForces=function(g,T,w){for(var C=this,O=C.nodes,b=C.kg,l=C.center,K=C.prune,Z=O.length,X=9e10,W=-9e10,U=9e10,et=-9e10,it=0;it<Z;it+=1)K&&w[it]<=1||(T[it].setPos(O[it].x,O[it].y),O[it].x>=W&&(W=O[it].x),O[it].x<=X&&(X=O[it].x),O[it].y>=et&&(et=O[it].y),O[it].y<=U&&(U=O[it].y));for(var J=Math.max(W-X,et-U),rt={xmid:(W+X)/2,ymid:(et+U)/2,length:J,massCenter:l,mass:Z},mt=new I.default(rt),pt=new m.default(mt),it=0;it<Z;it+=1)K&&w[it]<=1||T[it].in(mt)&&pt.insert(T[it]);for(var it=0;it<Z;it+=1)if(!(K&&w[it]<=1)){T[it].resetForce(),pt.updateForce(T[it]),g[2*it]-=T[it].fx,g[2*it+1]-=T[it].fy;var ft=[O[it].x-l[0],O[it].y-l[1]],Mt=Math.hypot(ft[0],ft[1]);Mt=Mt<1e-4?1e-4:Mt,ft[0]=ft[0]/Mt,ft[1]=ft[1]/Mt;var zt=b*(w[it]+1);g[2*it]-=zt*ft[0],g[2*it+1]-=zt*ft[1]}return g},p.prototype.updatePos=function(g,T,w,C){for(var O=this,b=O.nodes,l=O.ks,K=O.tao,Z=O.prune,X=O.ksmax,W=b.length,U=[],et=[],it=0,J=0,rt=0;rt<W;rt+=1)if(!(Z&&C[rt]<=1)){var mt=[g[2*rt]-T[2*rt],g[2*rt+1]-T[2*rt+1]],pt=Math.hypot(mt[0],mt[1]),ft=[g[2*rt]+T[2*rt],g[2*rt+1]+T[2*rt+1]],Mt=Math.hypot(ft[0],ft[1]);U[rt]=pt,et[rt]=Mt/2,it+=(C[rt]+1)*U[rt],J+=(C[rt]+1)*et[rt]}var zt=w;w=K*J/it,zt!==0&&(w=w>1.5*zt?1.5*zt:w);for(var rt=0;rt<W;rt+=1)if(!(Z&&C[rt]<=1)&&!((0,E.isNumber)(b[rt].fx)&&(0,E.isNumber)(b[rt].fy))){var Vt=l*w/(1+w*Math.sqrt(U[rt])),kt=Math.hypot(g[2*rt],g[2*rt+1]);kt=kt<1e-4?1e-4:kt;var st=X/kt;Vt=Vt>st?st:Vt;var St=Vt*g[2*rt],qt=Vt*g[2*rt+1];b[rt].x+=St,b[rt].y+=qt}return{nodes:b,sg:w}},p}(k.Base);S.ForceAtlas2Layout=y},80057:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(){function x(z){this.xmid=z.xmid,this.ymid=z.ymid,this.length=z.length,this.massCenter=z.massCenter||[0,0],this.mass=z.mass||1}return x.prototype.getLength=function(){return this.length},x.prototype.contains=function(z,k){var E=this.length/2;return z<=this.xmid+E&&z>=this.xmid-E&&k<=this.ymid+E&&k>=this.ymid-E},x.prototype.NW=function(){var z=this.xmid-this.length/4,k=this.ymid+this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},I=new x(N);return I},x.prototype.NE=function(){var z=this.xmid+this.length/4,k=this.ymid+this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},I=new x(N);return I},x.prototype.SW=function(){var z=this.xmid-this.length/4,k=this.ymid-this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},I=new x(N);return I},x.prototype.SE=function(){var z=this.xmid+this.length/4,k=this.ymid-this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},I=new x(N);return I},x}();S.default=M},37809:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=function(){function x(z){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,z!=null&&(this.quad=z)}return x.prototype.insert=function(z){if(this.body==null){this.body=z;return}this._isExternal()?(this.quad&&(this.NW=new x(this.quad.NW()),this.NE=new x(this.quad.NE()),this.SW=new x(this.quad.SW()),this.SE=new x(this.quad.SE())),this._putBody(this.body),this._putBody(z),this.body=this.body.add(z)):(this.body=this.body.add(z),this._putBody(z))},x.prototype._putBody=function(z){this.quad&&(z.in(this.quad.NW())&&this.NW?this.NW.insert(z):z.in(this.quad.NE())&&this.NE?this.NE.insert(z):z.in(this.quad.SW())&&this.SW?this.SW.insert(z):z.in(this.quad.SE())&&this.SE&&this.SE.insert(z))},x.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},x.prototype.updateForce=function(z){if(!(this.body==null||z===this.body))if(this._isExternal())z.addForce(this.body);else{var k=this.quad?this.quad.getLength():0,E=this.body.distanceTo(z);k/E<this.theta?z.addForce(this.body):(this.NW&&this.NW.updateForce(z),this.NE&&this.NE.updateForce(z),this.SW&&this.SW.updateForce(z),this.SE&&this.SE.updateForce(z))}},x}();S.default=M},39570:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var I=function(m,y){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},I(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");I(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.FruchtermanLayout=void 0;var z=M(94416),k=M(78302),E=800,N=function(I){x(m,I);function m(y){var v=I.call(this)||this;return v.maxIteration=1e3,v.workerEnabled=!1,v.gravity=10,v.speed=5,v.clustering=!1,v.clusterGravity=10,v.nodes=[],v.edges=[],v.width=300,v.height=300,v.nodeMap={},v.nodeIdxMap={},v.onLayoutEnd=function(){},v.tick=function(){},v.animate=!0,v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},m.prototype.execute=function(){var y=this,v,p,g=this,T=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!T||T.length===0){(v=g.onLayoutEnd)===null||v===void 0||v.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var w=g.center;if(T.length===1){T[0].x=w[0],T[0].y=w[1],(p=g.onLayoutEnd)===null||p===void 0||p.call(g);return}var C={},O={};return T.forEach(function(b,l){(0,k.isNumber)(b.x)||(b.x=Math.random()*y.width),(0,k.isNumber)(b.y)||(b.y=Math.random()*y.height),C[b.id]=b,O[b.id]=l}),g.nodeMap=C,g.nodeIdxMap=O,g.run()},m.prototype.run=function(){var y,v=this,p=v.nodes;if(p){var g=v.edges,T=v.maxIteration,w=v.workerEnabled,C=v.clustering,O=v.animate,b={};if(C&&p.forEach(function(Z){b[Z.cluster]===void 0&&(b[Z.cluster]={name:Z.cluster,cx:0,cy:0,count:0})}),w||!O){for(var l=0;l<T;l++)v.runOneStep(b);(y=v.onLayoutEnd)===null||y===void 0||y.call(v)}else{if(typeof window=="undefined")return;var K=0;this.timeInterval=window.setInterval(function(){var Z;v.runOneStep(b),K++,K>=T&&((Z=v.onLayoutEnd)===null||Z===void 0||Z.call(v),window.clearInterval(v.timeInterval))},0)}return{nodes:p,edges:g}}},m.prototype.runOneStep=function(y){var v,p=this,g=p.nodes;if(g){var T=p.edges,w=p.center,C=p.gravity,O=p.speed,b=p.clustering,l=p.height*p.width,K=Math.sqrt(l)/10,Z=l/(g.length+1),X=Math.sqrt(Z),W=[];if(g.forEach(function(it,J){W[J]={x:0,y:0}}),p.applyCalculate(g,T,W,X,Z),b){for(var U in y)y[U].cx=0,y[U].cy=0,y[U].count=0;g.forEach(function(it){var J=y[it.cluster];(0,k.isNumber)(it.x)&&(J.cx+=it.x),(0,k.isNumber)(it.y)&&(J.cy+=it.y),J.count++});for(var U in y)y[U].cx/=y[U].count,y[U].cy/=y[U].count;var et=p.clusterGravity||C;g.forEach(function(it,J){if(!(!(0,k.isNumber)(it.x)||!(0,k.isNumber)(it.y))){var rt=y[it.cluster],mt=Math.sqrt((it.x-rt.cx)*(it.x-rt.cx)+(it.y-rt.cy)*(it.y-rt.cy)),pt=X*et;W[J].x-=pt*(it.x-rt.cx)/mt,W[J].y-=pt*(it.y-rt.cy)/mt}})}g.forEach(function(it,J){if(!(!(0,k.isNumber)(it.x)||!(0,k.isNumber)(it.y))){var rt=.01*X*C;W[J].x-=rt*(it.x-w[0]),W[J].y-=rt*(it.y-w[1])}}),g.forEach(function(it,J){if((0,k.isNumber)(it.fx)&&(0,k.isNumber)(it.fy)){it.x=it.fx,it.y=it.fy;return}if(!(!(0,k.isNumber)(it.x)||!(0,k.isNumber)(it.y))){var rt=Math.sqrt(W[J].x*W[J].x+W[J].y*W[J].y);if(rt>0){var mt=Math.min(K*(O/E),rt);it.x+=W[J].x/rt*mt,it.y+=W[J].y/rt*mt}}}),(v=p.tick)===null||v===void 0||v.call(p)}},m.prototype.applyCalculate=function(y,v,p,g,T){var w=this;w.calRepulsive(y,p,T),v&&w.calAttractive(v,p,g)},m.prototype.calRepulsive=function(y,v,p){y.forEach(function(g,T){v[T]={x:0,y:0},y.forEach(function(w,C){if(T!==C&&!(!(0,k.isNumber)(g.x)||!(0,k.isNumber)(w.x)||!(0,k.isNumber)(g.y)||!(0,k.isNumber)(w.y))){var O=g.x-w.x,b=g.y-w.y,l=O*O+b*b;if(l===0){l=1;var K=T>C?1:-1;O=.01*K,b=.01*K}var Z=p/l;v[T].x+=O*Z,v[T].y+=b*Z}})})},m.prototype.calAttractive=function(y,v,p){var g=this;y.forEach(function(T){var w=(0,k.getEdgeTerminal)(T,"source"),C=(0,k.getEdgeTerminal)(T,"target");if(!(!w||!C)){var O=g.nodeIdxMap[w],b=g.nodeIdxMap[C];if(O!==b){var l=g.nodeMap[w],K=g.nodeMap[C];if(!(!(0,k.isNumber)(K.x)||!(0,k.isNumber)(l.x)||!(0,k.isNumber)(K.y)||!(0,k.isNumber)(l.y))){var Z=K.x-l.x,X=K.y-l.y,W=Math.sqrt(Z*Z+X*X),U=W*W/p;v[b].x-=Z/W*U,v[b].y-=X/W*U,v[O].x+=Z/W*U,v[O].y+=X/W*U}}}})},m.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},m.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},m.prototype.getType=function(){return"fruchterman"},m}(z.Base);S.FruchtermanLayout=N},2014:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var I=function(m,y){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},I(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");I(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.GForceLayout=void 0;var z=M(94416),k=M(78302),E=function(I,m){var y;return I?(0,k.isNumber)(I)?y=function(v){return I}:y=I:y=function(v){return m||1},y},N=function(I){x(m,I);function m(y){var v=I.call(this)||this;return v.maxIteration=500,v.workerEnabled=!1,v.edgeStrength=200,v.nodeStrength=1e3,v.coulombDisScale=.005,v.damping=.9,v.maxSpeed=1e3,v.minMovement=.5,v.interval=.02,v.factor=1,v.linkDistance=1,v.gravity=10,v.preventOverlap=!0,v.collideStrength=1,v.tick=function(){},v.nodes=[],v.edges=[],v.width=300,v.height=300,v.nodeMap={},v.nodeIdxMap={},v.animate=!0,v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},m.prototype.execute=function(){var y,v,p=this,g=p.nodes;if(p.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(p.timeInterval),!g||g.length===0){(y=p.onLayoutEnd)===null||y===void 0||y.call(p);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var T=p.center;if(g.length===1){g[0].x=T[0],g[0].y=T[1],(v=p.onLayoutEnd)===null||v===void 0||v.call(p);return}var w={},C={};g.forEach(function(X,W){(0,k.isNumber)(X.x)||(X.x=Math.random()*p.width),(0,k.isNumber)(X.y)||(X.y=Math.random()*p.height),w[X.id]=X,C[X.id]=W}),p.nodeMap=w,p.nodeIdxMap=C,p.linkDistance=E(p.linkDistance,1),p.nodeStrength=E(p.nodeStrength,1),p.edgeStrength=E(p.edgeStrength,1);var O=p.nodeSize,b;if(p.preventOverlap){var l=p.nodeSpacing,K;(0,k.isNumber)(l)?K=function(){return l}:(0,k.isFunction)(l)?K=l:K=function(){return 0},O?(0,k.isArray)(O)?b=function(X){return Math.max(O[0],O[1])+K(X)}:b=function(X){return O+K(X)}:b=function(X){return X.size?(0,k.isArray)(X.size)?Math.max(X.size[0],X.size[1])+K(X):(0,k.isObject)(X.size)?Math.max(X.size.width,X.size.height)+K(X):X.size+K(X):10+K(X)}}p.nodeSize=b;var Z=p.edges;p.degrees=(0,k.getDegree)(g.length,p.nodeIdxMap,Z),p.getMass||(p.getMass=function(X){var W=X.mass||p.degrees[p.nodeIdxMap[X.id]].all||1;return W}),p.run()},m.prototype.run=function(){var y,v=this,p=v.maxIteration,g=v.nodes,T=v.workerEnabled,w=v.minMovement,C=v.animate;if(g)if(T||!C){for(var O=0;O<p;O++){var b=v.runOneStep(O);if(v.reachMoveThreshold(g,b,w))break}(y=v.onLayoutEnd)===null||y===void 0||y.call(v)}else{if(typeof window=="undefined")return;var l=0;this.timeInterval=window.setInterval(function(){var K,Z;if(g){var X=v.runOneStep(l)||[];v.reachMoveThreshold(g,X,w)&&((K=v.onLayoutEnd)===null||K===void 0||K.call(v),window.clearInterval(v.timeInterval)),l++,l>=p&&((Z=v.onLayoutEnd)===null||Z===void 0||Z.call(v),window.clearInterval(v.timeInterval))}},0)}},m.prototype.reachMoveThreshold=function(y,v,p){var g=0;return y.forEach(function(T,w){var C=T.x-v[w].x,O=T.y-v[w].y;g+=Math.sqrt(C*C+O*O)}),g/=y.length,g<p},m.prototype.runOneStep=function(y){var v,p=this,g=p.nodes,T=p.edges,w=[],C=[];if(g){g.forEach(function(l,K){w[2*K]=0,w[2*K+1]=0,C[2*K]=0,C[2*K+1]=0}),p.calRepulsive(w,g),T&&p.calAttractive(w,T),p.calGravity(w,g);var O=Math.max(.02,p.interval-y*.002);p.updateVelocity(w,C,O,g);var b=[];return g.forEach(function(l){b.push({x:l.x,y:l.y})}),p.updatePosition(C,O,g),(v=p.tick)===null||v===void 0||v.call(p),b}},m.prototype.calRepulsive=function(y,v){var p=this,g=p.getMass,T=p.factor,w=p.coulombDisScale,C=p.preventOverlap,O=p.collideStrength,b=O===void 0?1:O,l=p.nodeStrength,K=p.nodeSize;v.forEach(function(Z,X){var W=g?g(Z):1;v.forEach(function(U,et){if(!(X>=et)){var it=Z.x-U.x,J=Z.y-U.y;it===0&&J===0&&(it=Math.random()*.01,J=Math.random()*.01);var rt=it*it+J*J,mt=Math.sqrt(rt),pt=(mt+.1)*w,ft=it/mt,Mt=J/mt,zt=(l(Z)+l(U))*.5*T/(pt*pt),Vt=g?g(U):1;if(y[2*X]+=ft*zt,y[2*X+1]+=Mt*zt,y[2*et]-=ft*zt,y[2*et+1]-=Mt*zt,C&&(K(Z)+K(U))/2>mt){var kt=b*(l(Z)+l(U))*.5/rt;y[2*X]+=ft*kt/W,y[2*X+1]+=Mt*kt/W,y[2*et]-=ft*kt/Vt,y[2*et+1]-=Mt*kt/Vt}}})})},m.prototype.calAttractive=function(y,v){var p=this,g=p.nodeMap,T=p.nodeIdxMap,w=p.linkDistance,C=p.edgeStrength,O=p.nodeSize,b=p.getMass;v.forEach(function(l,K){var Z=(0,k.getEdgeTerminal)(l,"source"),X=(0,k.getEdgeTerminal)(l,"target"),W=g[Z],U=g[X],et=U.x-W.x,it=U.y-W.y;et===0&&it===0&&(et=Math.random()*.01,it=Math.random()*.01);var J=Math.sqrt(et*et+it*it),rt=et/J,mt=it/J,pt=w(l,W,U)||1+(O(W)+O(W)||0)/2,ft=pt-J,Mt=ft*C(l),zt=T[Z],Vt=T[X],kt=b?b(W):1,st=b?b(U):1;y[2*zt]-=rt*Mt/kt,y[2*zt+1]-=mt*Mt/kt,y[2*Vt]+=rt*Mt/st,y[2*Vt+1]+=mt*Mt/st})},m.prototype.calGravity=function(y,v){for(var p=this,g=p.center,T=p.gravity,w=p.degrees,C=v.length,O=0;O<C;O++){var b=v[O],l=b.x-g[0],K=b.y-g[1],Z=T;if(p.getCenter){var X=p.getCenter(b,w[O].all);X&&(0,k.isNumber)(X[0])&&(0,k.isNumber)(X[1])&&(0,k.isNumber)(X[2])&&(l=b.x-X[0],K=b.y-X[1],Z=X[2])}Z&&(y[2*O]-=Z*l,y[2*O+1]-=Z*K)}},m.prototype.updateVelocity=function(y,v,p,g){var T=this,w=p*T.damping;g.forEach(function(C,O){var b=y[2*O]*w||.01,l=y[2*O+1]*w||.01,K=Math.sqrt(b*b+l*l);if(K>T.maxSpeed){var Z=T.maxSpeed/K;b=Z*b,l=Z*l}v[2*O]=b,v[2*O+1]=l})},m.prototype.updatePosition=function(y,v,p){p.forEach(function(g,T){if((0,k.isNumber)(g.fx)&&(0,k.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var w=y[2*T]*v,C=y[2*T+1]*v;g.x+=w,g.y+=C})},m.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},m.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},m.prototype.getType=function(){return"gForce"},m}(z.Base);S.GForceLayout=N},96396:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var g=function(T,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,O){C.__proto__=O}||function(C,O){for(var b in O)Object.prototype.hasOwnProperty.call(O,b)&&(C[b]=O[b])},g(T,w)};return function(T,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");g(T,w);function C(){this.constructor=T}T.prototype=w===null?Object.create(w):(C.prototype=w.prototype,new C)}}(),z=this&&this.__awaiter||function(g,T,w,C){function O(b){return b instanceof w?b:new w(function(l){l(b)})}return new(w||(w=Promise))(function(b,l){function K(W){try{X(C.next(W))}catch(U){l(U)}}function Z(W){try{X(C.throw(W))}catch(U){l(U)}}function X(W){W.done?b(W.value):O(W.value).then(K,Z)}X((C=C.apply(g,T||[])).next())})},k=this&&this.__generator||function(g,T){var w={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},C,O,b,l;return l={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function K(X){return function(W){return Z([X,W])}}function Z(X){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,O&&(b=X[0]&2?O.return:X[0]?O.throw||((b=O.return)&&b.call(O),0):O.next)&&!(b=b.call(O,X[1])).done)return b;switch(O=0,b&&(X=[X[0]&2,b.value]),X[0]){case 0:case 1:b=X;break;case 4:return w.label++,{value:X[1],done:!1};case 5:w.label++,O=X[1],X=[0];continue;case 7:X=w.ops.pop(),w.trys.pop();continue;default:if(b=w.trys,!(b=b.length>0&&b[b.length-1])&&(X[0]===6||X[0]===2)){w=0;continue}if(X[0]===3&&(!b||X[1]>b[0]&&X[1]<b[3])){w.label=X[1];break}if(X[0]===6&&w.label<b[1]){w.label=b[1],b=X;break}if(b&&w.label<b[2]){w.label=b[2],w.ops.push(X);break}b[2]&&w.ops.pop(),w.trys.pop();continue}X=T.call(g,w)}catch(W){X=[6,W],O=0}finally{C=b=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}};Object.defineProperty(S,"__esModule",{value:!0}),S.FruchtermanGPULayout=void 0;var E=M(94416),N=M(78302),I=M(82274),m=M(46063),y=M(27481),v=M(17219),p=function(g){x(T,g);function T(w){var C=g.call(this)||this;return C.maxIteration=1e3,C.gravity=10,C.speed=1,C.clustering=!1,C.clusterField="cluster",C.clusterGravity=10,C.workerEnabled=!1,C.nodes=[],C.edges=[],C.width=300,C.height=300,C.nodeMap={},C.nodeIdxMap={},C.updateCfg(w),C}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},T.prototype.execute=function(){return z(this,void 0,void 0,function(){var w,C,O,b,l,K=this;return k(this,function(Z){switch(Z.label){case 0:return w=this,C=w.nodes,!C||C.length===0?(w.onLayoutEnd&&w.onLayoutEnd(),[2]):(!w.width&&typeof window!="undefined"&&(w.width=window.innerWidth),!w.height&&typeof window!="undefined"&&(w.height=window.innerHeight),w.center||(w.center=[w.width/2,w.height/2]),O=w.center,C.length===1?(C[0].x=O[0],C[0].y=O[1],w.onLayoutEnd&&w.onLayoutEnd(),[2]):(b={},l={},C.forEach(function(X,W){(0,N.isNumber)(X.x)||(X.x=Math.random()*K.width),(0,N.isNumber)(X.y)||(X.y=Math.random()*K.height),b[X.id]=X,l[X.id]=W}),w.nodeMap=b,w.nodeIdxMap=l,[4,w.run()]));case 1:return Z.sent(),[2]}})})},T.prototype.executeWithWorker=function(w,C){return z(this,void 0,void 0,function(){var O,b,l,K,Z,X=this;return k(this,function(W){switch(W.label){case 0:return O=this,b=O.nodes,l=O.center,!b||b.length===0?[2]:b.length===1?(b[0].x=l[0],b[0].y=l[1],[2]):(K={},Z={},b.forEach(function(U,et){(0,N.isNumber)(U.x)||(U.x=Math.random()*X.width),(0,N.isNumber)(U.y)||(U.y=Math.random()*X.height),K[U.id]=U,Z[U.id]=et}),O.nodeMap=K,O.nodeIdxMap=Z,[4,O.run(w,C)]);case 1:return W.sent(),[2]}})})},T.prototype.run=function(w,C){return z(this,void 0,void 0,function(){var O,b,l,K,Z,X,W,U,et,it,J,rt,mt,pt,ft,Mt,zt,Vt,kt,st,St,qt,re,Nt,be,Te,nr=this;return k(this,function(Rt){switch(Rt.label){case 0:for(O=this,b=O.nodes,l=O.edges,K=O.maxIteration,Z=O.center,X=O.height*O.width,W=Math.sqrt(X)/10,U=X/(b.length+1),et=Math.sqrt(U),it=O.speed,J=O.clustering,rt=(0,m.attributesToTextureData)([O.clusterField],b),mt=rt.array,pt=rt.count,b.forEach(function(Dt,At){var Xt=0,$t=0;(0,N.isNumber)(Dt.fx)&&(0,N.isNumber)(Dt.fy)&&(Xt=Dt.fx||.001,$t=Dt.fy||.001),mt[4*At+1]=Xt,mt[4*At+2]=$t}),ft=b.length,Mt=(0,m.buildTextureData)(b,l),zt=Mt.maxEdgePerVetex,Vt=Mt.array,kt=O.workerEnabled,kt?st=I.World.create({canvas:w,engineOptions:{supportCompute:!0}}):st=I.World.create({engineOptions:{supportCompute:!0}}),St=O.onLayoutEnd,qt=[],re=0;re<pt;re++)qt.push(0,0,0,0);return Nt=st.createKernel(y.fruchtermanBundle).setDispatch([ft,1,1]).setBinding({u_Data:Vt,u_K:et,u_K2:U,u_Gravity:O.gravity,u_ClusterGravity:O.clusterGravity||O.gravity||1,u_Speed:it,u_MaxDisplace:W,u_Clustering:J?1:0,u_Center:Z,u_AttributeArray:mt,u_ClusterCenters:qt,MAX_EDGE_PER_VERTEX:zt,VERTEX_COUNT:ft}),J&&(be=st.createKernel(y.clusterBundle).setDispatch([pt,1,1]).setBinding({u_Data:Vt,u_NodeAttributes:mt,u_ClusterCenters:qt,VERTEX_COUNT:ft,CLUSTER_COUNT:pt})),Te=function(){return z(nr,void 0,void 0,function(){var Dt,At;return k(this,function(Xt){switch(Xt.label){case 0:Dt=0,Xt.label=1;case 1:return Dt<K?[4,Nt.execute()]:[3,6];case 2:return Xt.sent(),J?(be.setBinding({u_Data:Nt}),[4,be.execute()]):[3,4];case 3:Xt.sent(),Nt.setBinding({u_ClusterCenters:be}),Xt.label=4;case 4:Nt.setBinding({u_MaxDisplace:W*=.99}),Xt.label=5;case 5:return Dt++,[3,1];case 6:return[4,Nt.getOutput()];case 7:return At=Xt.sent(),w?C.postMessage({type:v.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:At}):b.forEach(function($t,Tt){var Kt=At[4*Tt],Ee=At[4*Tt+1];$t.x=Kt,$t.y=Ee}),St&&St(),[2]}})})},[4,Te()];case 1:return Rt.sent(),[2]}})})},T.prototype.getType=function(){return"fruchterman-gpu"},T}(E.Base);S.FruchtermanGPULayout=p},27481:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.clusterBundle=S.clusterCode=S.fruchtermanBundle=S.fruchtermanCode=void 0,S.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,S.fruchtermanBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',S.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,S.clusterBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},47469:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var T=function(w,C){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,b){O.__proto__=b}||function(O,b){for(var l in b)Object.prototype.hasOwnProperty.call(b,l)&&(O[l]=b[l])},T(w,C)};return function(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");T(w,C);function O(){this.constructor=w}w.prototype=C===null?Object.create(C):(O.prototype=C.prototype,new O)}}(),z=this&&this.__awaiter||function(T,w,C,O){function b(l){return l instanceof C?l:new C(function(K){K(l)})}return new(C||(C=Promise))(function(l,K){function Z(U){try{W(O.next(U))}catch(et){K(et)}}function X(U){try{W(O.throw(U))}catch(et){K(et)}}function W(U){U.done?l(U.value):b(U.value).then(Z,X)}W((O=O.apply(T,w||[])).next())})},k=this&&this.__generator||function(T,w){var C={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},O,b,l,K;return K={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(K[Symbol.iterator]=function(){return this}),K;function Z(W){return function(U){return X([W,U])}}function X(W){if(O)throw new TypeError("Generator is already executing.");for(;C;)try{if(O=1,b&&(l=W[0]&2?b.return:W[0]?b.throw||((l=b.return)&&l.call(b),0):b.next)&&!(l=l.call(b,W[1])).done)return l;switch(b=0,l&&(W=[W[0]&2,l.value]),W[0]){case 0:case 1:l=W;break;case 4:return C.label++,{value:W[1],done:!1};case 5:C.label++,b=W[1],W=[0];continue;case 7:W=C.ops.pop(),C.trys.pop();continue;default:if(l=C.trys,!(l=l.length>0&&l[l.length-1])&&(W[0]===6||W[0]===2)){C=0;continue}if(W[0]===3&&(!l||W[1]>l[0]&&W[1]<l[3])){C.label=W[1];break}if(W[0]===6&&C.label<l[1]){C.label=l[1],l=W;break}if(l&&C.label<l[2]){C.label=l[2],C.ops.push(W);break}l[2]&&C.ops.pop(),C.trys.pop();continue}W=w.call(T,C)}catch(U){W=[6,U],b=0}finally{O=l=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(S,"__esModule",{value:!0}),S.GForceGPULayout=void 0;var E=M(94416),N=M(78302),I=M(82274),m=M(46063),y=M(87073),v=M(9382),p=M(17219),g=function(T){x(w,T);function w(C){var O=T.call(this)||this;return O.maxIteration=1e3,O.edgeStrength=200,O.nodeStrength=1e3,O.coulombDisScale=.005,O.damping=.9,O.maxSpeed=1e3,O.minMovement=.5,O.interval=.02,O.factor=1,O.linkDistance=1,O.gravity=10,O.workerEnabled=!1,O.nodes=[],O.edges=[],O.width=300,O.height=300,O.nodeMap={},O.nodeIdxMap={},O.updateCfg(C),O}return w.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},w.prototype.execute=function(){return z(this,void 0,void 0,function(){var C,O,b,l,K;return k(this,function(Z){switch(Z.label){case 0:return C=this,O=C.nodes,!O||O.length===0?(C.onLayoutEnd&&C.onLayoutEnd(),[2]):(!C.width&&typeof window!="undefined"&&(C.width=window.innerWidth),!C.height&&typeof window!="undefined"&&(C.height=window.innerHeight),C.center||(C.center=[C.width/2,C.height/2]),b=C.center,O.length===1?(O[0].x=b[0],O[0].y=b[1],C.onLayoutEnd&&C.onLayoutEnd(),[2]):(l={},K={},O.forEach(function(X,W){(0,N.isNumber)(X.x)||(X.x=Math.random()*C.width),(0,N.isNumber)(X.y)||(X.y=Math.random()*C.height),l[X.id]=X,K[X.id]=W}),C.nodeMap=l,C.nodeIdxMap=K,C.nodeStrength=(0,m.proccessToFunc)(C.nodeStrength,1),C.edgeStrength=(0,m.proccessToFunc)(C.edgeStrength,1),[4,C.run()]));case 1:return Z.sent(),[2]}})})},w.prototype.executeWithWorker=function(C,O){var b=this,l=b.nodes,K=b.center;if(!(!l||l.length===0)){if(l.length===1){l[0].x=K[0],l[0].y=K[1];return}var Z={},X={};l.forEach(function(W,U){(0,N.isNumber)(W.x)||(W.x=Math.random()*b.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*b.height),Z[W.id]=W,X[W.id]=U}),b.nodeMap=Z,b.nodeIdxMap=X,b.nodeStrength=(0,m.proccessToFunc)(b.nodeStrength,1),b.edgeStrength=(0,m.proccessToFunc)(b.edgeStrength,1),b.run(C,O)}},w.prototype.run=function(C,O){return z(this,void 0,void 0,function(){var b,l,K,Z,X,W,U,et,it,J,rt,mt,pt,ft,Mt,zt,Vt,kt,st,St,qt,re,Nt,be,Te,nr,Rt,Dt=this;return k(this,function(At){switch(At.label){case 0:for(b=this,l=b.nodes,K=b.edges,Z=b.maxIteration,!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight),X=l.length,b.linkDistance=(0,m.proccessToFunc)(b.linkDistance),b.edgeStrength=(0,m.proccessToFunc)(b.edgeStrength),W=(0,m.buildTextureDataWithTwoEdgeAttr)(l,K,b.linkDistance,b.edgeStrength),U=W.maxEdgePerVetex,et=W.array,b.degrees=(0,y.getDegree)(l.length,b.nodeIdxMap,K).map(function(Xt){return Xt.all}),it=[],J=[],rt=[],mt=[],pt=[],ft=[],Mt=[],b.getMass||(b.getMass=function(Xt){return b.degrees[b.nodeIdxMap[Xt.id]]||1}),zt=b.gravity,Vt=b.center,l.forEach(function(Xt,$t){it.push(b.getMass(Xt)),J.push(b.nodeStrength(Xt)),b.degrees[$t]||(b.degrees[$t]=0);var Tt=[Vt[0],Vt[1],zt];if(b.getCenter){var Kt=b.getCenter(Xt,b.degrees[$t]);Kt&&(0,N.isNumber)(Kt[0])&&(0,N.isNumber)(Kt[1])&&(0,N.isNumber)(Kt[2])&&(Tt=Kt)}rt.push(Tt[0]),mt.push(Tt[1]),pt.push(Tt[2]),(0,N.isNumber)(Xt.fx)&&(0,N.isNumber)(Xt.fy)?(ft.push(Xt.fx||.001),Mt.push(Xt.fy||.001)):(ft.push(0),Mt.push(0))}),kt=(0,m.arrayToTextureData)([it,b.degrees,J,ft]),st=(0,m.arrayToTextureData)([rt,mt,pt,Mt]),St=b.workerEnabled,St?qt=I.World.create({canvas:C,engineOptions:{supportCompute:!0}}):qt=I.World.create({engineOptions:{supportCompute:!0}}),re=b.onLayoutEnd,Nt=[],et.forEach(function(Xt){Nt.push(Xt)}),be=0;be<4;be++)Nt.push(0);return Te=qt.createKernel(v.gForceBundle).setDispatch([X,1,1]).setBinding({u_Data:et,u_damping:b.damping,u_maxSpeed:b.maxSpeed,u_minMovement:b.minMovement,u_coulombDisScale:b.coulombDisScale,u_factor:b.factor,u_NodeAttributeArray1:kt,u_NodeAttributeArray2:st,MAX_EDGE_PER_VERTEX:U,VERTEX_COUNT:X,u_AveMovement:Nt,u_interval:b.interval}),nr=qt.createKernel(v.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:et,VERTEX_COUNT:X,u_AveMovement:[0,0,0,0]}),Rt=function(){return z(Dt,void 0,void 0,function(){var Xt,$t,Tt;return k(this,function(Kt){switch(Kt.label){case 0:Xt=0,Kt.label=1;case 1:return Xt<Z?[4,Te.execute()]:[3,5];case 2:return Kt.sent(),nr.setBinding({u_Data:Te}),[4,nr.execute()];case 3:Kt.sent(),$t=Math.max(.02,b.interval-Xt*.002),Te.setBinding({u_interval:$t,u_AveMovement:nr}),Kt.label=4;case 4:return Xt++,[3,1];case 5:return[4,Te.getOutput()];case 6:return Tt=Kt.sent(),C?O.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Tt}):l.forEach(function(Ee,vt){var bt=Tt[4*vt],wt=Tt[4*vt+1];Ee.x=bt,Ee.y=wt}),re&&re(),[2]}})})},[4,Rt()];case 1:return At.sent(),[2]}})})},w.prototype.getType=function(){return"gForce-gpu"},w}(E.Base);S.GForceGPULayout=g},9382:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.aveMovementBundle=S.aveMovementCode=S.gForceBundle=S.gForceCode=void 0,S.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,S.gForceBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',S.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,S.aveMovementBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},11998:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var N=function(I,m){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(y[p]=v[p])},N(I,m)};return function(I,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");N(I,m);function y(){this.constructor=I}I.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.GridLayout=void 0;var z=M(78302),k=M(94416),E=function(N){x(I,N);function I(m){var y=N.call(this)||this;return y.begin=[0,0],y.preventOverlap=!0,y.preventOverlapPadding=10,y.condense=!1,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.row=0,y.col=0,y.cellWidth=0,y.cellHeight=0,y.cellUsed={},y.id2manPos={},y.onLayoutEnd=function(){},y.updateCfg(m),y}return I.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},I.prototype.execute=function(){var m=this,y=m.nodes,v=m.edges,p=m.begin,g=y.length;if(g===0)return m.onLayoutEnd&&m.onLayoutEnd(),{nodes:y,edges:v};if(g===1)return y[0].x=p[0],y[0].y=p[1],m.onLayoutEnd&&m.onLayoutEnd(),{nodes:y,edges:v};var T=m.sortBy,w=m.width,C=m.height,O=m.condense,b=m.preventOverlapPadding,l=m.preventOverlap,K=m.nodeSpacing,Z=m.nodeSize,X=[];y.forEach(function(kt){X.push(kt)});var W={};if(X.forEach(function(kt,st){W[kt.id]=st}),(T==="degree"||!(0,z.isString)(T)||X[0][T]===void 0)&&(T="degree",(0,z.isNaN)(y[0].degree))){var U=(0,z.getDegree)(X.length,W,v);X.forEach(function(kt,st){kt.degree=U[st].all})}X.sort(function(kt,st){return st[T]-kt[T]}),!w&&typeof window!="undefined"&&(w=window.innerWidth),!C&&typeof window!="undefined"&&(C=window.innerHeight);var et=m.rows,it=m.cols!=null?m.cols:m.columns;if(m.cells=g,et!=null&&it!=null?(m.rows=et,m.cols=it):et!=null&&it==null?(m.rows=et,m.cols=Math.ceil(m.cells/m.rows)):et==null&&it!=null?(m.cols=it,m.rows=Math.ceil(m.cells/m.cols)):(m.splits=Math.sqrt(m.cells*m.height/m.width),m.rows=Math.round(m.splits),m.cols=Math.round(m.width/m.height*m.splits)),m.rows=Math.max(m.rows,1),m.cols=Math.max(m.cols,1),m.cols*m.rows>m.cells){var J=m.small(),rt=m.large();(J-1)*rt>=m.cells?m.small(J-1):(rt-1)*J>=m.cells&&m.large(rt-1)}else for(;m.cols*m.rows<m.cells;){var J=m.small(),rt=m.large();(rt+1)*J>=m.cells?m.large(rt+1):m.small(J+1)}if(m.cellWidth=w/m.cols,m.cellHeight=C/m.rows,O&&(m.cellWidth=0,m.cellHeight=0),l||K){var mt=(0,z.getFuncByUnknownType)(10,K),pt=(0,z.getFuncByUnknownType)(30,Z,!1);X.forEach(function(kt){(!kt.x||!kt.y)&&(kt.x=0,kt.y=0);var st=pt(kt)||30,St,qt;(0,z.isArray)(st)?(St=st[0],qt=st[1]):(St=st,qt=st);var re=mt!==void 0?mt(kt):b,Nt=St+re,be=qt+re;m.cellWidth=Math.max(m.cellWidth,Nt),m.cellHeight=Math.max(m.cellHeight,be)})}m.cellUsed={},m.row=0,m.col=0,m.id2manPos={};for(var ft=0;ft<X.length;ft++){var Mt=X[ft],zt=void 0;if(m.position&&(zt=m.position(Mt)),zt&&(zt.row!==void 0||zt.col!==void 0)){var Vt={row:zt.row,col:zt.col};if(Vt.col===void 0)for(Vt.col=0;m.used(Vt.row,Vt.col);)Vt.col++;else if(Vt.row===void 0)for(Vt.row=0;m.used(Vt.row,Vt.col);)Vt.row++;m.id2manPos[Mt.id]=Vt,m.use(Vt.row,Vt.col)}m.getPos(Mt)}return m.onLayoutEnd&&m.onLayoutEnd(),{edges:v,nodes:X}},I.prototype.small=function(m){var y=this,v,p=y.rows||5,g=y.cols||5;if(m==null)v=Math.min(p,g);else{var T=Math.min(p,g);T===y.rows?y.rows=m:y.cols=m}return v},I.prototype.large=function(m){var y=this,v,p=y.rows||5,g=y.cols||5;if(m==null)v=Math.max(p,g);else{var T=Math.max(p,g);T===y.rows?y.rows=m:y.cols=m}return v},I.prototype.used=function(m,y){var v=this;return v.cellUsed["c-".concat(m,"-").concat(y)]||!1},I.prototype.use=function(m,y){var v=this;v.cellUsed["c-".concat(m,"-").concat(y)]=!0},I.prototype.moveToNextCell=function(){var m=this,y=m.cols||5;m.col++,m.col>=y&&(m.col=0,m.row++)},I.prototype.getPos=function(m){var y=this,v=y.begin,p=y.cellWidth,g=y.cellHeight,T,w,C=y.id2manPos[m.id];if(C)T=C.col*p+p/2+v[0],w=C.row*g+g/2+v[1];else{for(;y.used(y.row,y.col);)y.moveToNextCell();T=y.col*p+p/2+v[0],w=y.row*g+g/2+v[1],y.use(y.row,y.col),y.moveToNextCell()}m.x=T,m.y=w},I.prototype.getType=function(){return"grid"},I}(k.Base);S.GridLayout=E},51709:function(le,S,M){"use strict";var x=this&&this.__createBinding||(Object.create?function(U,et,it,J){J===void 0&&(J=it);var rt=Object.getOwnPropertyDescriptor(et,it);(!rt||("get"in rt?!et.__esModule:rt.writable||rt.configurable))&&(rt={enumerable:!0,get:function(){return et[it]}}),Object.defineProperty(U,J,rt)}:function(U,et,it,J){J===void 0&&(J=it),U[J]=et[it]}),z=this&&this.__exportStar||function(U,et){for(var it in U)it!=="default"&&!Object.prototype.hasOwnProperty.call(et,it)&&x(et,U,it)};Object.defineProperty(S,"__esModule",{value:!0}),S.ERLayout=S.ForceAtlas2Layout=S.ComboCombinedLayout=S.ComboForceLayout=S.GForceGPULayout=S.FruchtermanGPULayout=S.FruchtermanLayout=S.MDSLayout=S.ConcentricLayout=S.RadialLayout=S.DagreCompoundLayout=S.DagreLayout=S.CircularLayout=S.ForceLayout=S.Force2Layout=S.GForceLayout=S.RandomLayout=S.GridLayout=S.Layouts=S.Layout=void 0;var k=M(11998);Object.defineProperty(S,"GridLayout",{enumerable:!0,get:function(){return k.GridLayout}});var E=M(10136);Object.defineProperty(S,"RandomLayout",{enumerable:!0,get:function(){return E.RandomLayout}});var N=M(2014);Object.defineProperty(S,"GForceLayout",{enumerable:!0,get:function(){return N.GForceLayout}});var I=M(36129);Object.defineProperty(S,"Force2Layout",{enumerable:!0,get:function(){return I.Force2Layout}});var m=M(12032);Object.defineProperty(S,"ForceLayout",{enumerable:!0,get:function(){return m.ForceLayout}});var y=M(28672);Object.defineProperty(S,"CircularLayout",{enumerable:!0,get:function(){return y.CircularLayout}});var v=M(98989);Object.defineProperty(S,"DagreLayout",{enumerable:!0,get:function(){return v.DagreLayout}});var p=M(74222);Object.defineProperty(S,"DagreCompoundLayout",{enumerable:!0,get:function(){return p.DagreCompoundLayout}});var g=M(20179);Object.defineProperty(S,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var T=M(90127);Object.defineProperty(S,"ConcentricLayout",{enumerable:!0,get:function(){return T.ConcentricLayout}});var w=M(70623);Object.defineProperty(S,"MDSLayout",{enumerable:!0,get:function(){return w.MDSLayout}});var C=M(39570);Object.defineProperty(S,"FruchtermanLayout",{enumerable:!0,get:function(){return C.FruchtermanLayout}});var O=M(96396);Object.defineProperty(S,"FruchtermanGPULayout",{enumerable:!0,get:function(){return O.FruchtermanGPULayout}});var b=M(47469);Object.defineProperty(S,"GForceGPULayout",{enumerable:!0,get:function(){return b.GForceGPULayout}});var l=M(5506);Object.defineProperty(S,"ComboForceLayout",{enumerable:!0,get:function(){return l.ComboForceLayout}});var K=M(50023);Object.defineProperty(S,"ComboCombinedLayout",{enumerable:!0,get:function(){return K.ComboCombinedLayout}});var Z=M(58443);Object.defineProperty(S,"ForceAtlas2Layout",{enumerable:!0,get:function(){return Z.ForceAtlas2Layout}});var X=M(83529);Object.defineProperty(S,"ERLayout",{enumerable:!0,get:function(){return X.ERLayout}});var W=M(695);Object.defineProperty(S,"Layout",{enumerable:!0,get:function(){return W.Layout}}),Object.defineProperty(S,"Layouts",{enumerable:!0,get:function(){return W.Layouts}}),z(M(75864),S)},695:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Layouts=S.Layout=void 0;var x=M(45610),z=M(11998),k=M(10136),E=M(36129),N=M(2014),I=M(12032),m=M(28672),y=M(98989),v=M(20179),p=M(90127),g=M(70623),T=M(39570),w=M(96396),C=M(47469),O=M(5506),b=M(50023),l=M(58443),K=M(83529),Z=M(74222),X=function(){function W(U){var et=(0,x.getLayoutByName)(U.type);this.layoutInstance=new et(U)}return W.prototype.layout=function(U){return this.layoutInstance.layout(U)},W.prototype.updateCfg=function(U){this.layoutInstance.updateCfg(U)},W.prototype.init=function(U){this.layoutInstance.init(U)},W.prototype.execute=function(){this.layoutInstance.execute()},W.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},W.prototype.destroy=function(){return this.layoutInstance.destroy()},W}();S.Layout=X,S.Layouts={force:I.ForceLayout,fruchterman:T.FruchtermanLayout,forceAtlas2:l.ForceAtlas2Layout,gForce:N.GForceLayout,force2:E.Force2Layout,dagre:y.DagreLayout,dagreCompound:Z.DagreCompoundLayout,circular:m.CircularLayout,radial:v.RadialLayout,concentric:p.ConcentricLayout,grid:z.GridLayout,mds:g.MDSLayout,comboForce:O.ComboForceLayout,comboCombined:b.ComboCombinedLayout,random:k.RandomLayout,"gForce-gpu":C.GForceGPULayout,"fruchterman-gpu":w.FruchtermanGPULayout,er:K.ERLayout}},70623:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var I=function(m,y){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},I(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");I(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.MDSLayout=void 0;var z=M(60340),k=M(78302),E=M(94416),N=function(I){x(m,I);function m(y){var v=I.call(this)||this;return v.center=[0,0],v.linkDistance=50,v.nodes=[],v.edges=[],v.onLayoutEnd=function(){},v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},m.prototype.execute=function(){var y=this,v=y.nodes,p=y.edges,g=p===void 0?[]:p,T=y.center;if(!v||v.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(v.length===1){v[0].x=T[0],v[0].y=T[1],y.onLayoutEnd&&y.onLayoutEnd();return}var w=y.linkDistance,C=(0,k.getAdjMatrix)({nodes:v,edges:g},!1),O=(0,k.floydWarshall)(C);y.handleInfinity(O);var b=(0,k.scaleMatrix)(O,w);y.scaledDistances=b;var l=y.runMDS();return y.positions=l,l.forEach(function(K,Z){v[Z].x=K[0]+T[0],v[Z].y=K[1]+T[1]}),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:v,edges:g}},m.prototype.runMDS=function(){var y=this,v=2,p=y.scaledDistances,g=z.Matrix.mul(z.Matrix.pow(p,2),-.5),T=g.mean("row"),w=g.mean("column"),C=g.mean();g.add(C).subRowVector(T).subColumnVector(w);var O=new z.SingularValueDecomposition(g),b=z.Matrix.sqrt(O.diagonalMatrix).diagonal();return O.leftSingularVectors.toJSON().map(function(l){return z.Matrix.mul([l],[b]).toJSON()[0].splice(0,v)})},m.prototype.handleInfinity=function(y){var v=-999999;y.forEach(function(p){p.forEach(function(g){g!==1/0&&v<g&&(v=g)})}),y.forEach(function(p,g){p.forEach(function(T,w){T===1/0&&(y[g][w]=v)})})},m.prototype.getType=function(){return"mds"},m}(E.Base);S.MDSLayout=N},20179:function(le,S,M){"use strict";var x=this&&this.__createBinding||(Object.create?function(k,E,N,I){I===void 0&&(I=N);var m=Object.getOwnPropertyDescriptor(E,N);(!m||("get"in m?!E.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return E[N]}}),Object.defineProperty(k,I,m)}:function(k,E,N,I){I===void 0&&(I=N),k[I]=E[N]}),z=this&&this.__exportStar||function(k,E){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&x(E,k,N)};Object.defineProperty(S,"__esModule",{value:!0}),z(M(34028),S)},95196:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var x=M(60340),z=function(){function k(E){this.distances=E.distances,this.dimension=E.dimension||2,this.linkDistance=E.linkDistance}return k.prototype.layout=function(){var E=this,N=E.dimension,I=E.distances,m=E.linkDistance;try{var y=x.Matrix.mul(x.Matrix.pow(I,2),-.5),v=y.mean("row"),p=y.mean("column"),g=y.mean();y.add(g).subRowVector(v).subColumnVector(p);var T=new x.SingularValueDecomposition(y),w=x.Matrix.sqrt(T.diagonalMatrix).diagonal();return T.leftSingularVectors.toJSON().map(function(K){return x.Matrix.mul([K],[w]).toJSON()[0].splice(0,N)})}catch(K){for(var C=[],O=0;O<I.length;O++){var b=Math.random()*m,l=Math.random()*m;C.push([b,l])}return C}},k}();S.default=z},34028:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var g=function(T,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,O){C.__proto__=O}||function(C,O){for(var b in O)Object.prototype.hasOwnProperty.call(O,b)&&(C[b]=O[b])},g(T,w)};return function(T,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");g(T,w);function C(){this.constructor=T}T.prototype=w===null?Object.create(w):(C.prototype=w.prototype,new C)}}(),z=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(S,"__esModule",{value:!0}),S.RadialLayout=void 0;var k=M(78302),E=M(94416),N=z(M(95196)),I=z(M(34506));function m(g){for(var T=g.length,w=g[0].length,C=[],O=0;O<T;O++){for(var b=[],l=0;l<w;l++)g[O][l]!==0?b.push(1/(g[O][l]*g[O][l])):b.push(0);C.push(b)}return C}function y(g,T){var w=-1;return g.forEach(function(C,O){C.id===T&&(w=O)}),w}function v(g,T){return Math.sqrt((g[0]-T[0])*(g[0]-T[0])+(g[1]-T[1])*(g[1]-T[1]))}var p=function(g){x(T,g);function T(w){var C=g.call(this)||this;return C.maxIteration=1e3,C.focusNode=null,C.unitRadius=null,C.linkDistance=50,C.preventOverlap=!1,C.strictRadial=!0,C.maxPreventOverlapIteration=200,C.sortStrength=10,C.nodes=[],C.edges=[],C.updateCfg(w),C}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},T.prototype.execute=function(){var w=this,C=w.nodes,O=w.edges||[];if(!C||C.length===0){w.onLayoutEnd&&w.onLayoutEnd();return}!w.width&&typeof window!="undefined"&&(w.width=window.innerWidth),!w.height&&typeof window!="undefined"&&(w.height=window.innerHeight),w.center||(w.center=[w.width/2,w.height/2]);var b=w.center;if(C.length===1){C[0].x=b[0],C[0].y=b[1],w.onLayoutEnd&&w.onLayoutEnd();return}var l=w.linkDistance,K=null;if((0,k.isString)(w.focusNode)){for(var Z=!1,X=0;X<C.length;X++)C[X].id===w.focusNode&&(K=C[X],w.focusNode=K,Z=!0,X=C.length);Z||(K=null)}else K=w.focusNode;K||(K=C[0],w.focusNode=K);var W=y(C,K.id);W<0&&(W=0),w.focusIndex=W;var U=(0,k.getAdjMatrix)({nodes:C,edges:O},!1),et=(0,k.floydWarshall)(U),it=w.maxToFocus(et,W);w.handleInfinity(et,W,it+1),w.distances=et;var J=et[W],rt=w.width||500,mt=w.height||500,pt=rt-b[0]>b[0]?b[0]:rt-b[0],ft=mt-b[1]>b[1]?b[1]:mt-b[1];pt===0&&(pt=rt/2),ft===0&&(ft=mt/2);var Mt=ft>pt?pt:ft,zt=Math.max.apply(Math,J),Vt=[];J.forEach(function(Xt,$t){w.unitRadius||(w.unitRadius=Mt/zt),Vt[$t]=Xt*w.unitRadius}),w.radii=Vt;var kt=w.eIdealDisMatrix();w.eIdealDistances=kt;var st=m(kt);w.weights=st;var St=new N.default({linkDistance:l,distances:kt}),qt=St.layout();qt.forEach(function(Xt){(0,k.isNaN)(Xt[0])&&(Xt[0]=Math.random()*l),(0,k.isNaN)(Xt[1])&&(Xt[1]=Math.random()*l)}),w.positions=qt,qt.forEach(function(Xt,$t){C[$t].x=Xt[0]+b[0],C[$t].y=Xt[1]+b[1]}),qt.forEach(function(Xt){Xt[0]-=qt[W][0],Xt[1]-=qt[W][1]}),w.run();var re=w.preventOverlap,Nt=w.nodeSize,be,Te=w.strictRadial;if(re){var nr=w.nodeSpacing,Rt;(0,k.isNumber)(nr)?Rt=function(){return nr}:(0,k.isFunction)(nr)?Rt=nr:Rt=function(){return 0},Nt?(0,k.isArray)(Nt)?be=function(Xt){var $t=Nt[0]>Nt[1]?Nt[0]:Nt[1];return $t+Rt(Xt)}:be=function(Xt){return Nt+Rt(Xt)}:be=function(Xt){if(Xt.size){if((0,k.isArray)(Xt.size)){var $t=Xt.size[0]>Xt.size[1]?Xt.size[0]:Xt.size[1];return $t+Rt(Xt)}if((0,k.isObject)(Xt.size)){var $t=Xt.size.width>Xt.size.height?Xt.size.width:Xt.size.height;return $t+Rt(Xt)}return Xt.size+Rt(Xt)}return 10+Rt(Xt)};var Dt={nodes:C,nodeSizeFunc:be,adjMatrix:U,positions:qt,radii:Vt,height:mt,width:rt,strictRadial:Te,focusID:W,iterations:w.maxPreventOverlapIteration||200,k:qt.length/4.5},At=new I.default(Dt);qt=At.layout()}return qt.forEach(function(Xt,$t){C[$t].x=Xt[0]+b[0],C[$t].y=Xt[1]+b[1]}),w.onLayoutEnd&&w.onLayoutEnd(),{nodes:C,edges:O}},T.prototype.run=function(){for(var w=this,C=w.maxIteration,O=w.positions||[],b=w.weights||[],l=w.eIdealDistances||[],K=w.radii||[],Z=0;Z<=C;Z++){var X=Z/C;w.oneIteration(X,O,K,l,b)}},T.prototype.oneIteration=function(w,C,O,b,l){var K=this,Z=1-w,X=K.focusIndex;C.forEach(function(W,U){var et=v(W,[0,0]),it=et===0?0:1/et;if(U!==X){var J=0,rt=0,mt=0;C.forEach(function(ft,Mt){if(U!==Mt){var zt=v(W,ft),Vt=zt===0?0:1/zt,kt=b[Mt][U];mt+=l[U][Mt],J+=l[U][Mt]*(ft[0]+kt*(W[0]-ft[0])*Vt),rt+=l[U][Mt]*(ft[1]+kt*(W[1]-ft[1])*Vt)}});var pt=O[U]===0?0:1/O[U];mt*=Z,mt+=w*pt*pt,J*=Z,J+=w*pt*W[0]*it,W[0]=J/mt,rt*=Z,rt+=w*pt*W[1]*it,W[1]=rt/mt}})},T.prototype.eIdealDisMatrix=function(){var w=this,C=w.nodes;if(!C)return[];var O=w.distances,b=w.linkDistance,l=w.radii||[],K=w.unitRadius||50,Z=[];return O&&O.forEach(function(X,W){var U=[];X.forEach(function(et,it){if(W===it)U.push(0);else if(l[W]===l[it])if(w.sortBy==="data")U.push(et*(Math.abs(W-it)*w.sortStrength)/(l[W]/K));else if(w.sortBy){var J=C[W][w.sortBy]||0,rt=C[it][w.sortBy]||0;(0,k.isString)(J)&&(J=J.charCodeAt(0)),(0,k.isString)(rt)&&(rt=rt.charCodeAt(0)),U.push(et*(Math.abs(J-rt)*w.sortStrength)/(l[W]/K))}else U.push(et*b/(l[W]/K));else{var mt=(b+K)/2;U.push(et*mt)}}),Z.push(U)}),Z},T.prototype.handleInfinity=function(w,C,O){for(var b=w.length,l=0;l<b;l++)if(w[C][l]===1/0){w[C][l]=O,w[l][C]=O;for(var K=0;K<b;K++)w[l][K]!==1/0&&w[C][K]===1/0&&(w[C][K]=O+w[l][K],w[K][C]=O+w[l][K])}for(var l=0;l<b;l++)if(l!==C){for(var K=0;K<b;K++)if(w[l][K]===1/0){var Z=Math.abs(w[C][l]-w[C][K]);Z=Z===0?1:Z,w[l][K]=Z}}},T.prototype.maxToFocus=function(w,C){for(var O=0,b=0;b<w[C].length;b++)w[C][b]!==1/0&&(O=w[C][b]>O?w[C][b]:O);return O},T.prototype.getType=function(){return"radial"},T}(E.Base);S.RadialLayout=p},34506:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=800,x=function(){function z(k){this.disp=[],this.positions=k.positions,this.adjMatrix=k.adjMatrix,this.focusID=k.focusID,this.radii=k.radii,this.iterations=k.iterations||10,this.height=k.height||10,this.width=k.width||10,this.speed=k.speed||100,this.gravity=k.gravity||10,this.nodeSizeFunc=k.nodeSizeFunc,this.k=k.k||5,this.strictRadial=k.strictRadial,this.nodes=k.nodes}return z.prototype.layout=function(){var k=this,E=k.positions,N=[],I=k.iterations,m=k.width/10;k.maxDisplace=m,k.disp=N;for(var y=0;y<I;y++)E.forEach(function(v,p){N[p]={x:0,y:0}}),k.getRepulsion(),k.updatePositions();return E},z.prototype.getRepulsion=function(){var k=this,E=k.positions,N=k.nodes,I=k.disp,m=k.k,y=k.radii||[];E.forEach(function(v,p){I[p]={x:0,y:0},E.forEach(function(g,T){if(p!==T&&y[p]===y[T]){var w=v[0]-g[0],C=v[1]-g[1],O=Math.sqrt(w*w+C*C);if(O===0){O=1;var b=p>T?1:-1;w=.01*b,C=.01*b}if(O<k.nodeSizeFunc(N[p])/2+k.nodeSizeFunc(N[T])/2){var l=m*m/O;I[p].x+=w/O*l,I[p].y+=C/O*l}}})})},z.prototype.updatePositions=function(){var k=this,E=k.positions,N=k.disp,I=k.speed,m=k.strictRadial,y=k.focusID,v=k.maxDisplace||k.width/10;m&&N.forEach(function(g,T){var w=E[T][0]-E[y][0],C=E[T][1]-E[y][1],O=Math.sqrt(w*w+C*C),b=C/O,l=-w/O,K=Math.sqrt(g.x*g.x+g.y*g.y),Z=Math.acos((b*g.x+l*g.y)/K);Z>Math.PI/2&&(Z-=Math.PI/2,b*=-1,l*=-1);var X=Math.cos(Z)*K;g.x=b*X,g.y=l*X});var p=k.radii;E.forEach(function(g,T){if(T!==y){var w=Math.sqrt(N[T].x*N[T].x+N[T].y*N[T].y);if(w>0&&T!==y){var C=Math.min(v*(I/M),w);if(g[0]+=N[T].x/w*C,g[1]+=N[T].y/w*C,m){var O=g[0]-E[y][0],b=g[1]-E[y][1],l=Math.sqrt(O*O+b*b);O=O/l*p[T],b=b/l*p[T],g[0]=E[y][0]+O,g[1]=E[y][1]+b}}}})},z}();S.default=x},10136:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var E=function(N,I){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(m[v]=y[v])},E(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");E(N,I);function m(){this.constructor=N}N.prototype=I===null?Object.create(I):(m.prototype=I.prototype,new m)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.RandomLayout=void 0;var z=M(94416),k=function(E){x(N,E);function N(I){var m=E.call(this)||this;return m.center=[0,0],m.width=300,m.height=300,m.nodes=[],m.edges=[],m.onLayoutEnd=function(){},m.updateCfg(I),m}return N.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},N.prototype.execute=function(){var I=this,m=I.nodes,y=.9,v=I.center;return!I.width&&typeof window!="undefined"&&(I.width=window.innerWidth),!I.height&&typeof window!="undefined"&&(I.height=window.innerHeight),m&&m.forEach(function(p){p.x=(Math.random()-.5)*y*I.width+v[0],p.y=(Math.random()-.5)*y*I.height+v[1]}),I.onLayoutEnd&&I.onLayoutEnd(),{nodes:m,edges:this.edges}},N.prototype.getType=function(){return"random"},N}(z.Base);S.RandomLayout=k},75864:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0})},45610:function(le,S,M){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(g[w]=T[w])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(S,"__esModule",{value:!0}),S.getLayoutByName=S.unRegisterLayout=S.registerLayout=void 0;var z=M(94416),k=M(78302),E=new Map,N=function(y,v){if(E.get(y)&&console.warn("The layout with the name ".concat(y," exists already, it will be overridden")),(0,k.isObject)(v)){var p=function(g){x(T,g);function T(w){var C=g.call(this)||this,O=C,b={},l=O.getDefaultCfg();return Object.assign(b,l,v,w),Object.keys(b).forEach(function(K){var Z=b[K];O[K]=Z}),C}return T}(z.Base);E.set(y,p)}else E.set(y,v);return E.get(y)};S.registerLayout=N;var I=function(y){E.has(y)&&E.delete(y)};S.unRegisterLayout=I;var m=function(y){return E.has(y)?E.get(y):null};S.getLayoutByName=m},40532:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isArray=void 0,S.isArray=Array.isArray},91898:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getFuncByUnknownType=S.getFunc=S.isFunction=void 0;var x=M(78302),z=M(12655),k=function(I){return typeof I=="function"};S.isFunction=k;var E=function(I,m,y){var v;return y?v=y:(0,z.isNumber)(I)?v=function(){return I}:v=function(){return m},v};S.getFunc=E;var N=function(I,m,y){return y===void 0&&(y=!0),!m&&m!==0?function(v){return v.size?(0,x.isArray)(v.size)?v.size[0]>v.size[1]?v.size[0]:v.size[1]:(0,x.isObject)(v.size)?v.size.width>v.size.height?v.size.width:v.size.height:v.size:I}:(0,S.isFunction)(m)?m:(0,z.isNumber)(m)?function(){return m}:(0,x.isArray)(m)?function(){if(y){var v=Math.max.apply(Math,m);return isNaN(v)?I:v}return m}:(0,x.isObject)(m)?function(){if(y){var v=Math.max(m.width,m.height);return isNaN(v)?I:v}return[m.width,m.height]}:function(){return I}};S.getFuncByUnknownType=N},46063:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.arrayToTextureData=S.attributesToTextureData=S.buildTextureDataWithTwoEdgeAttr=S.buildTextureData=S.proccessToFunc=void 0;var x=M(78302),z=M(87073),k=function(y,v){var p;return y?(0,x.isNumber)(y)?p=function(){return y}:p=y:p=function(){return v||1},p};S.proccessToFunc=k;var E=function(y,v){var p=[],g=[],T={},w=0;for(w=0;w<y.length;w++){var C=y[w];T[C.id]=w,p.push(C.x),p.push(C.y),p.push(0),p.push(0),g.push([])}for(w=0;w<v.length;w++){var O=v[w],b=(0,z.getEdgeTerminal)(O,"source"),l=(0,z.getEdgeTerminal)(O,"target");!isNaN(T[b])&&!isNaN(T[l])&&(g[T[b]].push(T[l]),g[T[l]].push(T[b]))}var K=0;for(w=0;w<y.length;w++){var Z=p.length,X=g[w],W=X.length;console.log("dests",X,W),p[w*4+2]=Z,p[w*4+3]=W,K=Math.max(K,W);for(var U=0;U<W;++U){var et=X[U];p.push(+et)}}for(;p.length%4!==0;)p.push(0);return{maxEdgePerVetex:K,array:new Float32Array(p)}};S.buildTextureData=E;var N=function(y,v,p,g){var T=[],w=[],C={},O=0;for(O=0;O<y.length;O++){var b=y[O];C[b.id]=O,T.push(b.x),T.push(b.y),T.push(0),T.push(0),w.push([])}for(O=0;O<v.length;O++){var l=v[O],K=(0,z.getEdgeTerminal)(l,"source"),Z=(0,z.getEdgeTerminal)(l,"target");w[C[K]].push(C[Z]),w[C[K]].push(p(l)),w[C[K]].push(g(l)),w[C[K]].push(0),w[C[Z]].push(C[K]),w[C[Z]].push(p(l)),w[C[Z]].push(g(l)),w[C[Z]].push(0)}var X=0;for(O=0;O<y.length;O++){var W=T.length,U=w[O],et=U.length;T[O*4+2]=W+1048576*et/4,T[O*4+3]=0,X=Math.max(X,et/4);for(var it=0;it<et;++it){var J=U[it];T.push(+J)}}for(;T.length%4!==0;)T.push(0);return{maxEdgePerVetex:X,array:new Float32Array(T)}};S.buildTextureDataWithTwoEdgeAttr=N;var I=function(y,v){var p=[],g=y.length,T={};return v.forEach(function(w){y.forEach(function(C,O){if(T[w[C]]===void 0&&(T[w[C]]=Object.keys(T).length),p.push(T[w[C]]),O===g-1)for(;p.length%4!==0;)p.push(0)})}),{array:new Float32Array(p),count:Object.keys(T).length}};S.attributesToTextureData=I;var m=function(y){for(var v=[],p=y.length,g=y[0].length,T=function(C){y.forEach(function(O,b){if(v.push(O[C]),b===p-1)for(;v.length%4!==0;)v.push(0)})},w=0;w<g;w++)T(w);return new Float32Array(v)};S.arrayToTextureData=m},78302:function(le,S,M){"use strict";var x=this&&this.__createBinding||(Object.create?function(k,E,N,I){I===void 0&&(I=N);var m=Object.getOwnPropertyDescriptor(E,N);(!m||("get"in m?!E.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return E[N]}}),Object.defineProperty(k,I,m)}:function(k,E,N,I){I===void 0&&(I=N),k[I]=E[N]}),z=this&&this.__exportStar||function(k,E){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&x(E,k,N)};Object.defineProperty(S,"__esModule",{value:!0}),z(M(18031),S),z(M(40532),S),z(M(12655),S),z(M(87073),S),z(M(28178),S),z(M(91898),S)},87073:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getCoreNodeAndRelativeLeafNodes=S.getAvgNodePosition=S.findMinMaxNodeXY=S.traverseTreeUp=S.scaleMatrix=S.getAdjMatrix=S.floydWarshall=S.getDegreeMap=S.getDegree=S.getEdgeTerminal=void 0;var x=M(28178),z=function(b,l){var K=b[l];return(0,x.isObject)(K)?K.cell:K};S.getEdgeTerminal=z;var k=function(b,l,K){for(var Z=[],X=0;X<b;X++)Z[X]={in:0,out:0,all:0};return K&&K.forEach(function(W){var U=(0,S.getEdgeTerminal)(W,"source"),et=(0,S.getEdgeTerminal)(W,"target");U&&Z[l[U]]&&(Z[l[U]].out+=1,Z[l[U]].all+=1),et&&Z[l[et]]&&(Z[l[et]].in+=1,Z[l[et]].all+=1)}),Z};S.getDegree=k;var E=function(b,l){var K={};return b.forEach(function(Z){K[Z.id]={in:0,out:0,all:0}}),l&&l.forEach(function(Z){var X=(0,S.getEdgeTerminal)(Z,"source"),W=(0,S.getEdgeTerminal)(Z,"target");X&&(K[X].out+=1,K[X].all+=1),W&&(K[W].in+=1,K[W].all+=1)}),K};S.getDegreeMap=E;var N=function(b){for(var l=[],K=b.length,Z=0;Z<K;Z+=1){l[Z]=[];for(var X=0;X<K;X+=1)Z===X?l[Z][X]=0:b[Z][X]===0||!b[Z][X]?l[Z][X]=1/0:l[Z][X]=b[Z][X]}for(var W=0;W<K;W+=1)for(var Z=0;Z<K;Z+=1)for(var X=0;X<K;X+=1)l[Z][X]>l[Z][W]+l[W][X]&&(l[Z][X]=l[Z][W]+l[W][X]);return l};S.floydWarshall=N;var I=function(b,l){var K=b.nodes,Z=b.edges,X=[],W={};if(!K)throw new Error("invalid nodes data!");return K&&K.forEach(function(U,et){W[U.id]=et;var it=[];X.push(it)}),Z&&Z.forEach(function(U){var et=(0,S.getEdgeTerminal)(U,"source"),it=(0,S.getEdgeTerminal)(U,"target"),J=W[et],rt=W[it];X[J][rt]=1,l||(X[rt][J]=1)}),X};S.getAdjMatrix=I;var m=function(b,l){var K=[];return b.forEach(function(Z){var X=[];Z.forEach(function(W){X.push(W*l)}),K.push(X)}),K};S.scaleMatrix=m;var y=function(b,l){if(b&&b.children){for(var K=b.children.length-1;K>=0;K--)if(!y(b.children[K],l))return}return!!l(b)},v=function(b,l){typeof l=="function"&&y(b,l)};S.traverseTreeUp=v;var p=function(b){var l=1/0,K=1/0,Z=-1/0,X=-1/0;return b.forEach(function(W){l>W.x&&(l=W.x),K>W.y&&(K=W.y),Z<W.x&&(Z=W.x),X<W.y&&(X=W.y)}),{minX:l,minY:K,maxX:Z,maxY:X}};S.findMinMaxNodeXY=p;var g=function(b){var l={x:0,y:0};b.forEach(function(Z){l.x+=Z.x||0,l.y+=Z.y||0});var K=b.length||1;return{x:l.x/K,y:l.y/K}};S.getAvgNodePosition=g;var T=function(b,l,K){var Z,X;return b==="source"?((Z=K==null?void 0:K.find(function(W){return W.target===l.id}))===null||Z===void 0?void 0:Z.source)||{}:((X=K==null?void 0:K.find(function(W){return W.source===l.id}))===null||X===void 0?void 0:X.target)||{}},w=function(b,l,K){var Z=[];switch(b){case"source":Z=K==null?void 0:K.filter(function(W){return W.source===l.id}).map(function(W){return W.target});break;case"target":Z=K==null?void 0:K.filter(function(W){return W.target===l.id}).map(function(W){return W.source});break;case"both":Z=K==null?void 0:K.filter(function(W){return W.source===l.id}).map(function(W){return W.target}).concat(K==null?void 0:K.filter(function(W){return W.target===l.id}).map(function(W){return W.source}));break;default:break}var X=new Set(Z);return Array.from(X)},C=function(b,l,K,Z,X){var W=K[l]||"",U=(Z==null?void 0:Z.filter(function(et){return et[l]===W}))||[];return b==="leaf"&&(U=U.filter(function(et){var it,J;return((it=X[et.id])===null||it===void 0?void 0:it.in)===0||((J=X[et.id])===null||J===void 0?void 0:J.out)===0})),U},O=function(b,l,K,Z,X,W){var U=X[l.id],et=U.in,it=U.out,J=l,rt=[];et===0?(J=T("source",l,K),rt=w("both",J,K).map(function(pt){return W[pt]})):it===0&&(J=T("target",l,K),rt=w("both",J,K).map(function(pt){return W[pt]})),rt=rt.filter(function(pt){return X[pt.id]&&(X[pt.id].in===0||X[pt.id].out===0)});var mt=C(b,Z,l,rt,X);return{coreNode:J,relativeLeafNodes:rt,sameTypeLeafNodes:mt}};S.getCoreNodeAndRelativeLeafNodes=O},12655:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.toNumber=S.isNaN=S.isNumber=void 0;var M=function(k){return typeof k=="number"};S.isNumber=M;var x=function(k){return Number.isNaN(Number(k))};S.isNaN=x;var z=function(k){var E=parseFloat(k);return(0,S.isNaN)(E)?k:E};S.toNumber=z},28178:function(le,S){"use strict";var M=this&&this.__assign||function(){return M=Object.assign||function(k){for(var E,N=1,I=arguments.length;N<I;N++){E=arguments[N];for(var m in E)Object.prototype.hasOwnProperty.call(E,m)&&(k[m]=E[m])}return k},M.apply(this,arguments)};Object.defineProperty(S,"__esModule",{value:!0}),S.clone=S.isObject=void 0;var x=function(k){return k!==null&&typeof k=="object"};S.isObject=x;var z=function(k){if(k===null)return k;if(k instanceof Date)return new Date(k.getTime());if(k instanceof Array){var E=[];return k.forEach(function(I){E.push(I)}),E.map(function(I){return(0,S.clone)(I)})}if(typeof k=="object"&&k!=={}){var N=M({},k);return Object.keys(N).forEach(function(I){N[I]=(0,S.clone)(N[I])}),N}return k};S.clone=z},18031:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.camelize=S.isString=void 0;var M=function(k){return typeof k=="string"};S.isString=M;var x=function(k){var E=Object.create(null);return function(N){var I=E[N];return I||(E[N]=k(N))}},z=/-(\w)/g;S.camelize=x(function(k){return k.replace(z,function(E,N){return N?N.toUpperCase():""})})},89431:function(le,S,M){"use strict";var x;x={value:!0};var z=M(21574);function k(g,T,w){var C=[0,0,0,0,0,0,0,0,0];return z.mat3.fromTranslation(C,w),z.mat3.multiply(g,C,T)}x=k;function E(g,T,w){var C=[0,0,0,0,0,0,0,0,0];return z.mat3.fromRotation(C,w),z.mat3.multiply(g,C,T)}x=E;function N(g,T,w){var C=[0,0,0,0,0,0,0,0,0];return z.mat3.fromScaling(C,w),z.mat3.multiply(g,C,T)}x=N;function I(g,T,w){return z.mat3.multiply(g,w,T)}function m(g,T){for(var w=g?[].concat(g):[1,0,0,0,1,0,0,0,1],C=0,O=T.length;C<O;C++){var b=T[C];switch(b[0]){case"t":k(w,w,[b[1],b[2]]);break;case"s":N(w,w,[b[1],b[2]]);break;case"r":E(w,w,b[1]);break;case"m":I(w,w,b[1]);break;default:break}}return w}S.vs=m;function y(g,T){return g[0]*T[1]-T[0]*g[1]}x=y;function v(g,T,w){var C=z.vec2.angle(g,T),O=y(g,T)>=0;return w?O?Math.PI*2-C:C:O?C:Math.PI*2-C}x=v;function p(g,T,w){return w?(g[0]=T[1],g[1]=-1*T[0]):(g[0]=-1*T[1],g[1]=T[0]),g}x=p},76405:function(le,S,M){"use strict";M.r(S),M.d(S,{Cache:function(){return xs},assign:function(){return ia},augment:function(){return rs},clamp:function(){return bi},clearAnimationFrame:function(){return Wn},clone:function(){return ga},contains:function(){return E},debounce:function(){return Qs},deepMix:function(){return bs},difference:function(){return y},each:function(){return K},endsWith:function(){return je},every:function(){return vr},extend:function(){return Ns},filter:function(){return I},find:function(){return pt},findIndex:function(){return Mt},firstValue:function(){return Vt},fixedBase:function(){return Hn},flatten:function(){return st},flattenDeep:function(){return qt},forIn:function(){return ne},get:function(){return fi},getEllipsisText:function(){return Wu},getRange:function(){return Te},getType:function(){return Na},getWrapBehavior:function(){return Un},group:function(){return un},groupBy:function(){return zr},groupToMap:function(){return Mr},has:function(){return Pe},hasKey:function(){return Ce},hasValue:function(){return Wr},head:function(){return Re},identity:function(){return fo},includes:function(){return E},indexOf:function(){return ya},isArguments:function(){return vi},isArray:function(){return O},isArrayLike:function(){return z},isBoolean:function(){return Vo},isDate:function(){return ao},isDecimal:function(){return Pt},isElement:function(){return ts},isEmpty:function(){return Ka},isEqual:function(){return Js},isEqualWith:function(){return ka},isError:function(){return ps},isEven:function(){return H},isFinite:function(){return Io},isFunction:function(){return T},isInteger:function(){return F},isMatch:function(){return U},isNegative:function(){return Bt},isNil:function(){return C},isNull:function(){return Pn},isNumber:function(){return _i},isNumberEqual:function(){return Yt},isObject:function(){return b},isObjectLike:function(){return it},isOdd:function(){return at},isPlainObject:function(){return rt},isPositive:function(){return te},isPrototype:function(){return oo},isRegExp:function(){return qo},isString:function(){return D},isType:function(){return g},isUndefined:function(){return bo},keys:function(){return X},last:function(){return Je},lowerCase:function(){return Nn},lowerFirst:function(){return Jn},map:function(){return wo},mapValues:function(){return Xo},max:function(){return re},maxBy:function(){return Me},measureTextWidth:function(){return ns},memoize:function(){return ms},min:function(){return Nt},minBy:function(){return _e},mix:function(){return ia},mod:function(){return sr},noop:function(){return eo},number2color:function(){return Bn},omit:function(){return Mi},parseRadius:function(){return Cn},pick:function(){return ba},pull:function(){return Xt},pullAt:function(){return Kt},reduce:function(){return vt},remove:function(){return wt},requestAnimationFrame:function(){return es},set:function(){return ma},size:function(){return qs},some:function(){return Ae},sortBy:function(){return Ot},startsWith:function(){return ce},substitute:function(){return Ri},throttle:function(){return ca},toArray:function(){return Es},toDegree:function(){return qe},toInteger:function(){return _r},toRadian:function(){return Ft},toString:function(){return $r},union:function(){return pe},uniq:function(){return ct},uniqueId:function(){return uo},upperCase:function(){return Ki},upperFirst:function(){return Ea},values:function(){return Xe},valuesOfKey:function(){return Ge},wrapBehavior:function(){return vn}});var x=function(jt){return jt!==null&&typeof jt!="function"&&isFinite(jt.length)},z=x,k=function(jt,se){return z(jt)?jt.indexOf(se)>-1:!1},E=k,N=function(jt,se){if(!z(jt))return jt;for(var rr=[],cr=0;cr<jt.length;cr++){var Gr=jt[cr];se(Gr,cr)&&rr.push(Gr)}return rr},I=N,m=function(jt,se){return se===void 0&&(se=[]),I(jt,function(rr){return!E(se,rr)})},y=m,v={}.toString,p=function(jt,se){return v.call(jt)==="[object "+se+"]"},g=p,T=function(jt){return g(jt,"Function")},w=function(jt){return jt==null},C=w,O=function(jt){return Array.isArray?Array.isArray(jt):g(jt,"Array")},b=function(jt){var se=typeof jt;return jt!==null&&se==="object"||se==="function"};function l(jt,se){if(jt){var rr;if(O(jt))for(var cr=0,Gr=jt.length;cr<Gr&&(rr=se(jt[cr],cr),rr!==!1);cr++);else if(b(jt)){for(var cn in jt)if(jt.hasOwnProperty(cn)&&(rr=se(jt[cn],cn),rr===!1))break}}}var K=l,Z=Object.keys?function(jt){return Object.keys(jt)}:function(jt){var se=[];return K(jt,function(rr,cr){T(jt)&&cr==="prototype"||se.push(cr)}),se},X=Z;function W(jt,se){var rr=X(se),cr=rr.length;if(C(jt))return!cr;for(var Gr=0;Gr<cr;Gr+=1){var cn=rr[Gr];if(se[cn]!==jt[cn]||!(cn in jt))return!1}return!0}var U=W,et=function(jt){return typeof jt=="object"&&jt!==null},it=et,J=function(jt){if(!it(jt)||!g(jt,"Object"))return!1;if(Object.getPrototypeOf(jt)===null)return!0;for(var se=jt;Object.getPrototypeOf(se)!==null;)se=Object.getPrototypeOf(se);return Object.getPrototypeOf(jt)===se},rt=J;function mt(jt,se){if(!O(jt))return null;var rr;if(T(se)&&(rr=se),rt(se)&&(rr=function(Gr){return U(Gr,se)}),rr){for(var cr=0;cr<jt.length;cr+=1)if(rr(jt[cr]))return jt[cr]}return null}var pt=mt;function ft(jt,se,rr){rr===void 0&&(rr=0);for(var cr=rr;cr<jt.length;cr++)if(se(jt[cr],cr))return cr;return-1}var Mt=ft,zt=function(jt,se){for(var rr=null,cr=0;cr<jt.length;cr++){var Gr=jt[cr],cn=Gr[se];if(!C(cn)){O(cn)?rr=cn[0]:rr=cn;break}}return rr},Vt=zt,kt=function(jt){if(!O(jt))return[];for(var se=[],rr=0;rr<jt.length;rr++)se=se.concat(jt[rr]);return se},st=kt,St=function(jt,se){if(se===void 0&&(se=[]),!O(jt))se.push(jt);else for(var rr=0;rr<jt.length;rr+=1)St(jt[rr],se);return se},qt=St,re=function(jt){if(O(jt))return jt.reduce(function(se,rr){return Math.max(se,rr)},jt[0])},Nt=function(jt){if(O(jt))return jt.reduce(function(se,rr){return Math.min(se,rr)},jt[0])},be=function(jt){var se=jt.filter(function(xn){return!isNaN(xn)});if(!se.length)return{min:0,max:0};if(O(jt[0])){for(var rr=[],cr=0;cr<jt.length;cr++)rr=rr.concat(jt[cr]);se=rr}var Gr=re(se),cn=Nt(se);return{min:cn,max:Gr}},Te=be,nr=Array.prototype,Rt=nr.splice,Dt=nr.indexOf,At=function(jt){for(var se=[],rr=1;rr<arguments.length;rr++)se[rr-1]=arguments[rr];for(var cr=0;cr<se.length;cr++)for(var Gr=se[cr],cn=-1;(cn=Dt.call(jt,Gr))>-1;)Rt.call(jt,cn,1);return jt},Xt=At,$t=Array.prototype.splice,Tt=function(se,rr){if(!z(se))return[];for(var cr=se?rr.length:0,Gr=cr-1;cr--;){var cn=void 0,xn=rr[cr];(cr===Gr||xn!==cn)&&(cn=xn,$t.call(se,xn,1))}return se},Kt=Tt,Ee=function(jt,se,rr){if(!O(jt)&&!rt(jt))return jt;var cr=rr;return K(jt,function(Gr,cn){cr=se(cr,Gr,cn)}),cr},vt=Ee,bt=function(jt,se){var rr=[];if(!z(jt))return rr;for(var cr=-1,Gr=[],cn=jt.length;++cr<cn;){var xn=jt[cr];se(xn,cr,jt)&&(rr.push(xn),Gr.push(cr))}return Kt(jt,Gr),rr},wt=bt,D=function(jt){return g(jt,"String")};function tt(jt,se){var rr;if(T(se))rr=function(Gr,cn){return se(Gr)-se(cn)};else{var cr=[];D(se)?cr.push(se):O(se)&&(cr=se),rr=function(Gr,cn){for(var xn=0;xn<cr.length;xn+=1){var Zn=cr[xn];if(Gr[Zn]>cn[Zn])return 1;if(Gr[Zn]<cn[Zn])return-1}return 0}}return jt.sort(rr),jt}var Ot=tt;function ct(jt,se){se===void 0&&(se=new Map);var rr=[];if(Array.isArray(jt))for(var cr=0,Gr=jt.length;cr<Gr;cr++){var cn=jt[cr];se.has(cn)||(rr.push(cn),se.set(cn,!0))}return rr}var ie=function(){for(var jt=[],se=0;se<arguments.length;se++)jt[se]=arguments[se];return ct([].concat.apply([],jt))},pe=ie,Ge=function(jt,se){for(var rr=[],cr={},Gr=0;Gr<jt.length;Gr++){var cn=jt[Gr],xn=cn[se];if(!C(xn)){O(xn)||(xn=[xn]);for(var Zn=0;Zn<xn.length;Zn++){var Wi=xn[Zn];cr[Wi]||(rr.push(Wi),cr[Wi]=!0)}}}return rr};function Re(jt){if(z(jt))return jt[0]}function Je(jt){if(z(jt)){var se=jt;return se[se.length-1]}}function Ve(jt,se){return O(jt)||D(jt)?jt[0]===se:!1}var ce=Ve;function Le(jt,se){return O(jt)||D(jt)?jt[jt.length-1]===se:!1}var je=Le,Be=function(jt,se){for(var rr=0;rr<jt.length;rr++)if(!se(jt[rr],rr))return!1;return!0},vr=Be,or=function(jt,se){for(var rr=0;rr<jt.length;rr++)if(se(jt[rr],rr))return!0;return!1},Ae=or,yr=Object.prototype.hasOwnProperty;function Cr(jt,se){if(!se||!O(jt))return{};for(var rr={},cr=T(se)?se:function(Zn){return Zn[se]},Gr,cn=0;cn<jt.length;cn++){var xn=jt[cn];Gr=cr(xn),yr.call(rr,Gr)?rr[Gr].push(xn):rr[Gr]=[xn]}return rr}var zr=Cr;function Mr(jt,se){if(!se)return{0:jt};if(!T(se)){var rr=O(se)?se:se.replace(/\s+/g,"").split("*");se=function(cr){for(var Gr="_",cn=0,xn=rr.length;cn<xn;cn++)Gr+=cr[rr[cn]]&&cr[rr[cn]].toString();return Gr}}return zr(jt,se)}var un=function(jt,se){if(!se)return[jt];var rr=Mr(jt,se),cr=[];for(var Gr in rr)cr.push(rr[Gr]);return cr};function hn(jt,se){return jt["_wrap_"+se]}var Un=hn;function nn(jt,se){if(jt["_wrap_"+se])return jt["_wrap_"+se];var rr=function(cr){jt[se](cr)};return jt["_wrap_"+se]=rr,rr}var vn=nn,ln={};function pn(jt){var se=ln[jt];if(!se){for(var rr=jt.toString(16),cr=rr.length;cr<6;cr++)rr="0"+rr;se="#"+rr,ln[jt]=se}return se}var Bn=pn;function Oe(jt){var se=0,rr=0,cr=0,Gr=0;return O(jt)?jt.length===1?se=rr=cr=Gr=jt[0]:jt.length===2?(se=cr=jt[0],rr=Gr=jt[1]):jt.length===3?(se=jt[0],rr=Gr=jt[1],cr=jt[2]):(se=jt[0],rr=jt[1],cr=jt[2],Gr=jt[3]):se=rr=cr=Gr=jt,{r1:se,r2:rr,r3:cr,r4:Gr}}var Cn=Oe,Gn=function(jt,se,rr){return jt<se?se:jt>rr?rr:jt},bi=Gn,zn=function(jt,se){var rr=se.toString(),cr=rr.indexOf(".");if(cr===-1)return Math.round(jt);var Gr=rr.substr(cr+1).length;return Gr>20&&(Gr=20),parseFloat(jt.toFixed(Gr))},Hn=zn,hi=function(jt){return g(jt,"Number")},_i=hi,pi=function(jt){return _i(jt)&&jt%1!==0},Pt=pi,Lt=function(jt){return _i(jt)&&jt%2===0},H=Lt,G=Number.isInteger?Number.isInteger:function(jt){return _i(jt)&&jt%1===0},F=G,ot=function(jt){return _i(jt)&&jt<0},Bt=ot,Ht=1e-5;function Yt(jt,se,rr){return rr===void 0&&(rr=Ht),Math.abs(jt-se)<rr}var he=function(jt){return _i(jt)&&jt%2!==0},at=he,yt=function(jt){return _i(jt)&&jt>0},te=yt,Me=function(jt,se){if(O(jt)){for(var rr,cr=-1/0,Gr=0;Gr<jt.length;Gr++){var cn=jt[Gr],xn=T(se)?se(cn):cn[se];xn>cr&&(rr=cn,cr=xn)}return rr}},_e=function(jt,se){if(O(jt)){for(var rr,cr=1/0,Gr=0;Gr<jt.length;Gr++){var cn=jt[Gr],xn=T(se)?se(cn):cn[se];xn<cr&&(rr=cn,cr=xn)}return rr}},tr=function(jt,se){return(jt%se+se)%se},sr=tr,ge=180/Math.PI,Fe=function(jt){return ge*jt},qe=Fe,_r=parseInt,Er=Math.PI/180,ye=function(jt){return Er*jt},Ft=ye,ne=K,Pe=function(jt,se){return jt.hasOwnProperty(se)},Ce=Pe,Ue=Object.values?function(jt){return Object.values(jt)}:function(jt){var se=[];return K(jt,function(rr,cr){T(jt)&&cr==="prototype"||se.push(rr)}),se},Xe=Ue,Wr=function(jt,se){return E(Xe(jt),se)},$r=function(jt){return C(jt)?"":jt.toString()},mn=function(jt){return $r(jt).toLowerCase()},Nn=mn,kn=function(jt){var se=$r(jt);return se.charAt(0).toLowerCase()+se.substring(1)},Jn=kn;function ri(jt,se){return!jt||!se?jt:jt.replace(/\\?\{([^{}]+)\}/g,function(rr,cr){return rr.charAt(0)==="\\"?rr.slice(1):se[cr]===void 0?"":se[cr]})}var Ri=ri,di=function(jt){return $r(jt).toUpperCase()},Ki=di,yo=function(jt){var se=$r(jt);return se.charAt(0).toUpperCase()+se.substring(1)},Ea=yo,ta={}.toString,mo=function(jt){return ta.call(jt).replace(/^\[object /,"").replace(/]$/,"")},Na=mo,To=function(jt){return g(jt,"Arguments")},vi=To,xa=function(jt){return g(jt,"Boolean")},Vo=xa,zi=function(jt){return g(jt,"Date")},ao=zi,jo=function(jt){return g(jt,"Error")},ps=jo;function Io(jt){return _i(jt)&&isFinite(jt)}var Ja=function(jt){return jt===null},Pn=Ja,$s=Object.prototype,na=function(jt){var se=jt&&jt.constructor,rr=typeof se=="function"&&se.prototype||$s;return jt===rr},oo=na,Xa=function(jt){return g(jt,"RegExp")},qo=Xa,On=function(jt){return jt===void 0},bo=On,gs=function(jt){return jt instanceof Element||jt instanceof HTMLDocument},ts=gs;function es(jt){var se=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(rr){return setTimeout(rr,16)};return se(jt)}function Wn(jt){var se=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;se(jt)}function so(jt,se){for(var rr in se)se.hasOwnProperty(rr)&&rr!=="constructor"&&se[rr]!==void 0&&(jt[rr]=se[rr])}function ia(jt,se,rr,cr){return se&&so(jt,se),rr&&so(jt,rr),cr&&so(jt,cr),jt}var Bi=function(){for(var jt=[],se=0;se<arguments.length;se++)jt[se]=arguments[se];for(var rr=jt[0],cr=1;cr<jt.length;cr++){var Gr=jt[cr];T(Gr)&&(Gr=Gr.prototype),ia(rr.prototype,Gr)}},rs=Bi,Po=function(jt){if(typeof jt!="object"||jt===null)return jt;var se;if(O(jt)){se=[];for(var rr=0,cr=jt.length;rr<cr;rr++)typeof jt[rr]=="object"&&jt[rr]!=null?se[rr]=Po(jt[rr]):se[rr]=jt[rr]}else{se={};for(var Gr in jt)typeof jt[Gr]=="object"&&jt[Gr]!=null?se[Gr]=Po(jt[Gr]):se[Gr]=jt[Gr]}return se},ga=Po;function ys(jt,se,rr){var cr;return function(){var Gr=this,cn=arguments,xn=function(){cr=null,rr||jt.apply(Gr,cn)},Zn=rr&&!cr;clearTimeout(cr),cr=setTimeout(xn,se),Zn&&jt.apply(Gr,cn)}}var Qs=ys,ms=function(jt,se){if(!T(jt))throw new TypeError("Expected a function");var rr=function(){for(var cr=[],Gr=0;Gr<arguments.length;Gr++)cr[Gr]=arguments[Gr];var cn=se?se.apply(this,cr):cr[0],xn=rr.cache;if(xn.has(cn))return xn.get(cn);var Zn=jt.apply(this,cr);return xn.set(cn,Zn),Zn};return rr.cache=new Map,rr},Eo=5;function Ai(jt,se,rr,cr){rr=rr||0,cr=cr||Eo;for(var Gr in se)if(se.hasOwnProperty(Gr)){var cn=se[Gr];cn!==null&&rt(cn)?(rt(jt[Gr])||(jt[Gr]={}),rr<cr?Ai(jt[Gr],cn,rr+1,cr):jt[Gr]=se[Gr]):O(cn)?(jt[Gr]=[],jt[Gr]=jt[Gr].concat(cn)):cn!==void 0&&(jt[Gr]=cn)}}var Ya=function(jt){for(var se=[],rr=1;rr<arguments.length;rr++)se[rr-1]=arguments[rr];for(var cr=0;cr<se.length;cr+=1)Ai(jt,se[cr]);return jt},bs=Ya,Ha=function(jt,se,rr,cr){T(se)||(rr=se,se=jt,jt=function(){});var Gr=Object.create?function(xn,Zn){return Object.create(xn,{constructor:{value:Zn}})}:function(xn,Zn){function Wi(){}Wi.prototype=xn;var Ra=new Wi;return Ra.constructor=Zn,Ra},cn=Gr(se.prototype,jt);return jt.prototype=ia(cn,jt.prototype),jt.superclass=Gr(se.prototype,se),ia(cn,rr),ia(jt,cr),jt},Ns=Ha,La=function(jt,se){if(!z(jt))return-1;var rr=Array.prototype.indexOf;if(rr)return rr.call(jt,se);for(var cr=-1,Gr=0;Gr<jt.length;Gr++)if(jt[Gr]===se){cr=Gr;break}return cr},ya=La,Za=Object.prototype.hasOwnProperty;function xo(jt){if(C(jt))return!0;if(z(jt))return!jt.length;var se=Na(jt);if(se==="Map"||se==="Set")return!jt.size;if(oo(jt))return!Object.keys(jt).length;for(var rr in jt)if(Za.call(jt,rr))return!1;return!0}var Ka=xo,Ga=function(jt,se){if(jt===se)return!0;if(!jt||!se||D(jt)||D(se))return!1;if(z(jt)||z(se)){if(jt.length!==se.length)return!1;for(var rr=!0,cr=0;cr<jt.length&&(rr=Ga(jt[cr],se[cr]),!!rr);cr++);return rr}if(it(jt)||it(se)){var Gr=Object.keys(jt),cn=Object.keys(se);if(Gr.length!==cn.length)return!1;for(var rr=!0,cr=0;cr<Gr.length&&(rr=Ga(jt[Gr[cr]],se[Gr[cr]]),!!rr);cr++);return rr}return!1},Js=Ga,ka=function(jt,se,rr){return T(rr)?!!rr(jt,se):Js(jt,se)},$a=function(jt,se){if(!z(jt))return jt;for(var rr=[],cr=0;cr<jt.length;cr++){var Gr=jt[cr];rr.push(se(Gr,cr))}return rr},wo=$a,qa=function(jt){return jt},Xo=function(jt,se){se===void 0&&(se=qa);var rr={};return b(jt)&&!C(jt)&&Object.keys(jt).forEach(function(cr){rr[cr]=se(jt[cr],cr)}),rr},fi=function(jt,se,rr){for(var cr=0,Gr=D(se)?se.split("."):se;jt&&cr<Gr.length;)jt=jt[Gr[cr++]];return jt===void 0||cr<Gr.length?rr:jt},ma=function(jt,se,rr){var cr=jt,Gr=D(se)?se.split("."):se;return Gr.forEach(function(cn,xn){xn<Gr.length-1?(b(cr[cn])||(cr[cn]=_i(Gr[xn+1])?[]:{}),cr=cr[cn]):cr[cn]=rr}),jt},to=Object.prototype.hasOwnProperty,ba=function(jt,se){if(jt===null||!rt(jt))return{};var rr={};return K(se,function(cr){to.call(jt,cr)&&(rr[cr]=jt[cr])}),rr},Mi=function(jt,se){return vt(jt,function(rr,cr,Gr){return se.includes(Gr)||(rr[Gr]=cr),rr},{})},ca=function(jt,se,rr){var cr,Gr,cn,xn,Zn=0;rr||(rr={});var Wi=function(){Zn=rr.leading===!1?0:Date.now(),cr=null,xn=jt.apply(Gr,cn),cr||(Gr=cn=null)},Ra=function(){var Fa=Date.now();!Zn&&rr.leading===!1&&(Zn=Fa);var Ho=se-(Fa-Zn);return Gr=this,cn=arguments,Ho<=0||Ho>se?(cr&&(clearTimeout(cr),cr=null),Zn=Fa,xn=jt.apply(Gr,cn),cr||(Gr=cn=null)):!cr&&rr.trailing!==!1&&(cr=setTimeout(Wi,Ho)),xn};return Ra.cancel=function(){clearTimeout(cr),Zn=0,cr=Gr=cn=null},Ra},Es=function(jt){return z(jt)?Array.prototype.slice.call(jt):[]},aa={},uo=function(jt){return jt=jt||"g",aa[jt]?aa[jt]+=1:aa[jt]=1,jt+aa[jt]},eo=function(){},fo=function(jt){return jt};function qs(jt){return C(jt)?0:z(jt)?jt.length:Object.keys(jt).length}var Yo=M(98725),Oo,ns=ms(function(jt,se){se===void 0&&(se={});var rr=se.fontSize,cr=se.fontFamily,Gr=se.fontWeight,cn=se.fontStyle,xn=se.fontVariant;return Oo||(Oo=document.createElement("canvas").getContext("2d")),Oo.font=[cn,xn,Gr,rr+"px",cr].join(" "),Oo.measureText(D(jt)?jt:"").width},function(jt,se){return se===void 0&&(se={}),(0,Yo.pr)([jt],Xe(se)).join("")}),Wu=function(jt,se,rr,cr){cr===void 0&&(cr="...");var Gr=16,cn=ns(cr,rr),xn=D(jt)?jt:$r(jt),Zn=se,Wi=[],Ra,Fa;if(ns(jt,rr)<=se)return jt;for(;Ra=xn.substr(0,Gr),Fa=ns(Ra,rr),!(Fa+cn>Zn&&Fa>Zn);)if(Wi.push(Ra),Zn-=Fa,xn=xn.substr(Gr),!xn)return Wi.join("");for(;Ra=xn.substr(0,1),Fa=ns(Ra,rr),!(Fa+cn>Zn);)if(Wi.push(Ra),Zn-=Fa,xn=xn.substr(1),!xn)return Wi.join("");return""+Wi.join("")+cr},yu=function(){function jt(){this.map={}}return jt.prototype.has=function(se){return this.map[se]!==void 0},jt.prototype.get=function(se,rr){var cr=this.map[se];return cr===void 0?rr:cr},jt.prototype.set=function(se,rr){this.map[se]=rr},jt.prototype.clear=function(){this.map={}},jt.prototype.delete=function(se){delete this.map[se]},jt.prototype.size=function(){return Object.keys(this.map).length},jt}(),xs=yu},75946:function(le,S){"use strict";var M;M={value:!0};var x;(function(ft){ft.TextureCompressionBC="texture-compression-bc"})(x=S.UX||(S.UX={}));var z;(function(ft){ft.ClampToEdge="clamp-to-edge",ft.Repeat="repeat",ft.MirrorRepeat="mirror-repeat"})(z=S.OB||(S.OB={}));var k;(function(ft){ft.UniformBuffer="uniform-buffer",ft.StorageBuffer="storage-buffer",ft.ReadonlyStorageBuffer="readonly-storage-buffer",ft.Sampler="sampler",ft.ComparisonSampler="comparison-sampler",ft.SampledTexture="sampled-texture",ft.ReadonlyStorageTexture="readonly-storage-texture",ft.WriteonlyStorageTexture="writeonly-storage-texture"})(k=S.$l||(S.$l={}));var E;(function(ft){ft.Zero="zero",ft.One="one",ft.SrcColor="src-color",ft.OneMinusSrcColor="one-minus-src-color",ft.SrcAlpha="src-alpha",ft.OneMinusSrcAlpha="one-minus-src-alpha",ft.DstColor="dst-color",ft.OneMinusDstColor="one-minus-dst-color",ft.DstAlpha="dst-alpha",ft.OneMinusDstAlpha="one-minus-dst-alpha",ft.SrcAlphaSaturated="src-alpha-saturated",ft.BlendColor="blend-color",ft.OneMinusBlendColor="one-minus-blend-color"})(E=S.zi||(S.zi={}));var N;(function(ft){ft.Add="add",ft.Subtract="subtract",ft.ReverseSubtract="reverse-subtract",ft.Min="min",ft.Max="max"})(N=S.db||(S.db={}));var I;(function(ft){ft.Never="never",ft.Less="less",ft.Equal="equal",ft.LessEqual="less-equal",ft.Greater="greater",ft.NotEqual="not-equal",ft.GreaterEqual="greater-equal",ft.Always="always"})(I=S.wb||(S.wb={}));var m;(function(ft){ft.None="none",ft.Front="front",ft.Back="back"})(m=S.Wf||(S.Wf={}));var y;(function(ft){ft.Nearest="nearest",ft.Linear="linear"})(y=S.X9||(S.X9={}));var v;(function(ft){ft.CCW="ccw",ft.CW="cw"})(v=S.zX||(S.zX={}));var p;(function(ft){ft.Uint16="uint16",ft.Uint32="uint32"})(p=S.iD||(S.iD={}));var g;(function(ft){ft.Vertex="vertex",ft.Instance="instance"})(g=S.V||(S.V={}));var T;(function(ft){ft.Load="load"})(T=S.Ws||(S.Ws={}));var w;(function(ft){ft.PointList="point-list",ft.LineList="line-list",ft.LineStrip="line-strip",ft.TriangleList="triangle-list",ft.TriangleStrip="triangle-strip"})(w=S.YV||(S.YV={}));var C;(function(ft){ft.Keep="keep",ft.Zero="zero",ft.Replace="replace",ft.Invert="invert",ft.IncrementClamp="increment-clamp",ft.DecrementClamp="decrement-clamp",ft.IncrementWrap="increment-wrap",ft.DecrementWrap="decrement-wrap"})(C=S.xS||(S.xS={}));var O;(function(ft){ft.Store="store",ft.Clear="clear"})(O=S.EG||(S.EG={}));var b;(function(ft){ft.E1d="1d",ft.E2d="2d",ft.E3d="3d"})(b=S.kd||(S.kd={}));var l;(function(ft){ft.R8Unorm="r8unorm",ft.R8Snorm="r8snorm",ft.R8Uint="r8uint",ft.R8Sint="r8sint",ft.R16Uint="r16uint",ft.R16Sint="r16sint",ft.R16Float="r16float",ft.RG8Unorm="rg8unorm",ft.RG8Snorm="rg8snorm",ft.RG8Uint="rg8uint",ft.RG8Sint="rg8sint",ft.R32Uint="r32uint",ft.R32Sint="r32sint",ft.R32Float="r32float",ft.RG16Uint="rg16uint",ft.RG16Sint="rg16sint",ft.RG16Float="rg16float",ft.RGBA8Unorm="rgba8unorm",ft.RGBA8UnormSRGB="rgba8unorm-srgb",ft.RGBA8Snorm="rgba8snorm",ft.RGBA8Uint="rgba8uint",ft.RGBA8Sint="rgba8sint",ft.BGRA8Unorm="bgra8unorm",ft.BGRA8UnormSRGB="bgra8unorm-srgb",ft.RGB10A2Unorm="rgb10a2unorm",ft.RG11B10Float="rg11b10float",ft.RG32Uint="rg32uint",ft.RG32Sint="rg32sint",ft.RG32Float="rg32float",ft.RGBA16Uint="rgba16uint",ft.RGBA16Sint="rgba16sint",ft.RGBA16Float="rgba16float",ft.RGBA32Uint="rgba32uint",ft.RGBA32Sint="rgba32sint",ft.RGBA32Float="rgba32float",ft.Depth32Float="depth32float",ft.Depth24Plus="depth24plus",ft.Depth24PlusStencil8="depth24plus-stencil8"})(l=S.EV||(S.EV={}));var K;(function(ft){ft.Float="float",ft.Sint="sint",ft.Uint="uint"})(K=S.Ek||(S.Ek={}));var Z;(function(ft){ft.E1d="1d",ft.E2d="2d",ft.E2dArray="2d-array",ft.Cube="cube",ft.CubeArray="cube-array",ft.E3d="3d"})(Z=S.p_||(S.p_={}));var X;(function(ft){ft.Uchar2="uchar2",ft.Uchar4="uchar4",ft.Char2="char2",ft.Char4="char4",ft.Uchar2Norm="uchar2norm",ft.Uchar4Norm="uchar4norm",ft.Char2Norm="char2norm",ft.Char4Norm="char4norm",ft.Ushort2="ushort2",ft.Ushort4="ushort4",ft.Short2="short2",ft.Short4="short4",ft.Ushort2Norm="ushort2norm",ft.Ushort4Norm="ushort4norm",ft.Short2Norm="short2norm",ft.Short4Norm="short4norm",ft.Half2="half2",ft.Half4="half4",ft.Float="float",ft.Float2="float2",ft.Float3="float3",ft.Float4="float4",ft.Uint="uint",ft.Uint2="uint2",ft.Uint3="uint3",ft.Uint4="uint4",ft.Int="int",ft.Int2="int2",ft.Int3="int3",ft.Int4="int4"})(X=S.gB||(S.gB={}));var W;(function(ft){ft.All="all",ft.StencilOnly="stencil-only",ft.DepthOnly="depth-only"})(W=S.H7||(S.H7={}));var U;(function(ft){ft.Error="error",ft.Warning="warning",ft.Info="info"})(U=S.mj||(S.mj={}));var et;(function(ft){ft.Occlusion="occlusion"})(et=S.xL||(S.xL={}));var it;(function(ft){ft[ft.MapRead=1]="MapRead",ft[ft.MapWrite=2]="MapWrite",ft[ft.CopySrc=4]="CopySrc",ft[ft.CopyDst=8]="CopyDst",ft[ft.Index=16]="Index",ft[ft.Vertex=32]="Vertex",ft[ft.Uniform=64]="Uniform",ft[ft.Storage=128]="Storage",ft[ft.Indirect=256]="Indirect",ft[ft.QueryResolve=512]="QueryResolve"})(it=S.FB||(S.FB={}));var J;(function(ft){ft[ft.Red=1]="Red",ft[ft.Green=2]="Green",ft[ft.Blue=4]="Blue",ft[ft.Alpha=8]="Alpha",ft[ft.All=15]="All"})(J=S.Yw||(S.Yw={}));var rt;(function(ft){ft[ft.Vertex=1]="Vertex",ft[ft.Fragment=2]="Fragment",ft[ft.Compute=4]="Compute"})(rt=S.$X||(S.$X={}));var mt;(function(ft){ft[ft.CopySrc=1]="CopySrc",ft[ft.CopyDst=2]="CopyDst",ft[ft.Sampled=4]="Sampled",ft[ft.Storage=8]="Storage",ft[ft.OutputAttachment=16]="OutputAttachment"})(mt=S.v2||(S.v2={}));var pt;(function(ft){ft[ft.Read=1]="Read",ft[ft.Write=2]="Write"})(pt=S.gc||(S.gc={}))},53616:function(le,S,M){var x=M(96585),z={};for(var k in x)x.hasOwnProperty(k)&&(z[x[k]]=k);var E=le.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var N in E)if(E.hasOwnProperty(N)){if(!("channels"in E[N]))throw new Error("missing channels property: "+N);if(!("labels"in E[N]))throw new Error("missing channel labels property: "+N);if(E[N].labels.length!==E[N].channels)throw new Error("channel and label counts mismatch: "+N);var I=E[N].channels,m=E[N].labels;delete E[N].channels,delete E[N].labels,Object.defineProperty(E[N],"channels",{value:I}),Object.defineProperty(E[N],"labels",{value:m})}E.rgb.hsl=function(v){var p=v[0]/255,g=v[1]/255,T=v[2]/255,w=Math.min(p,g,T),C=Math.max(p,g,T),O=C-w,b,l,K;return C===w?b=0:p===C?b=(g-T)/O:g===C?b=2+(T-p)/O:T===C&&(b=4+(p-g)/O),b=Math.min(b*60,360),b<0&&(b+=360),K=(w+C)/2,C===w?l=0:K<=.5?l=O/(C+w):l=O/(2-C-w),[b,l*100,K*100]},E.rgb.hsv=function(v){var p,g,T,w,C,O=v[0]/255,b=v[1]/255,l=v[2]/255,K=Math.max(O,b,l),Z=K-Math.min(O,b,l),X=function(W){return(K-W)/6/Z+1/2};return Z===0?w=C=0:(C=Z/K,p=X(O),g=X(b),T=X(l),O===K?w=T-g:b===K?w=1/3+p-T:l===K&&(w=2/3+g-p),w<0?w+=1:w>1&&(w-=1)),[w*360,C*100,K*100]},E.rgb.hwb=function(v){var p=v[0],g=v[1],T=v[2],w=E.rgb.hsl(v)[0],C=1/255*Math.min(p,Math.min(g,T));return T=1-1/255*Math.max(p,Math.max(g,T)),[w,C*100,T*100]},E.rgb.cmyk=function(v){var p=v[0]/255,g=v[1]/255,T=v[2]/255,w,C,O,b;return b=Math.min(1-p,1-g,1-T),w=(1-p-b)/(1-b)||0,C=(1-g-b)/(1-b)||0,O=(1-T-b)/(1-b)||0,[w*100,C*100,O*100,b*100]};function y(v,p){return Math.pow(v[0]-p[0],2)+Math.pow(v[1]-p[1],2)+Math.pow(v[2]-p[2],2)}E.rgb.keyword=function(v){var p=z[v];if(p)return p;var g=1/0,T;for(var w in x)if(x.hasOwnProperty(w)){var C=x[w],O=y(v,C);O<g&&(g=O,T=w)}return T},E.keyword.rgb=function(v){return x[v]},E.rgb.xyz=function(v){var p=v[0]/255,g=v[1]/255,T=v[2]/255;p=p>.04045?Math.pow((p+.055)/1.055,2.4):p/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,T=T>.04045?Math.pow((T+.055)/1.055,2.4):T/12.92;var w=p*.4124+g*.3576+T*.1805,C=p*.2126+g*.7152+T*.0722,O=p*.0193+g*.1192+T*.9505;return[w*100,C*100,O*100]},E.rgb.lab=function(v){var p=E.rgb.xyz(v),g=p[0],T=p[1],w=p[2],C,O,b;return g/=95.047,T/=100,w/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,T=T>.008856?Math.pow(T,1/3):7.787*T+16/116,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,C=116*T-16,O=500*(g-T),b=200*(T-w),[C,O,b]},E.hsl.rgb=function(v){var p=v[0]/360,g=v[1]/100,T=v[2]/100,w,C,O,b,l;if(g===0)return l=T*255,[l,l,l];T<.5?C=T*(1+g):C=T+g-T*g,w=2*T-C,b=[0,0,0];for(var K=0;K<3;K++)O=p+1/3*-(K-1),O<0&&O++,O>1&&O--,6*O<1?l=w+(C-w)*6*O:2*O<1?l=C:3*O<2?l=w+(C-w)*(2/3-O)*6:l=w,b[K]=l*255;return b},E.hsl.hsv=function(v){var p=v[0],g=v[1]/100,T=v[2]/100,w=g,C=Math.max(T,.01),O,b;return T*=2,g*=T<=1?T:2-T,w*=C<=1?C:2-C,b=(T+g)/2,O=T===0?2*w/(C+w):2*g/(T+g),[p,O*100,b*100]},E.hsv.rgb=function(v){var p=v[0]/60,g=v[1]/100,T=v[2]/100,w=Math.floor(p)%6,C=p-Math.floor(p),O=255*T*(1-g),b=255*T*(1-g*C),l=255*T*(1-g*(1-C));switch(T*=255,w){case 0:return[T,l,O];case 1:return[b,T,O];case 2:return[O,T,l];case 3:return[O,b,T];case 4:return[l,O,T];case 5:return[T,O,b]}},E.hsv.hsl=function(v){var p=v[0],g=v[1]/100,T=v[2]/100,w=Math.max(T,.01),C,O,b;return b=(2-g)*T,C=(2-g)*w,O=g*w,O/=C<=1?C:2-C,O=O||0,b/=2,[p,O*100,b*100]},E.hwb.rgb=function(v){var p=v[0]/360,g=v[1]/100,T=v[2]/100,w=g+T,C,O,b,l;w>1&&(g/=w,T/=w),C=Math.floor(6*p),O=1-T,b=6*p-C,C&1&&(b=1-b),l=g+b*(O-g);var K,Z,X;switch(C){default:case 6:case 0:K=O,Z=l,X=g;break;case 1:K=l,Z=O,X=g;break;case 2:K=g,Z=O,X=l;break;case 3:K=g,Z=l,X=O;break;case 4:K=l,Z=g,X=O;break;case 5:K=O,Z=g,X=l;break}return[K*255,Z*255,X*255]},E.cmyk.rgb=function(v){var p=v[0]/100,g=v[1]/100,T=v[2]/100,w=v[3]/100,C,O,b;return C=1-Math.min(1,p*(1-w)+w),O=1-Math.min(1,g*(1-w)+w),b=1-Math.min(1,T*(1-w)+w),[C*255,O*255,b*255]},E.xyz.rgb=function(v){var p=v[0]/100,g=v[1]/100,T=v[2]/100,w,C,O;return w=p*3.2406+g*-1.5372+T*-.4986,C=p*-.9689+g*1.8758+T*.0415,O=p*.0557+g*-.204+T*1.057,w=w>.0031308?1.055*Math.pow(w,1/2.4)-.055:w*12.92,C=C>.0031308?1.055*Math.pow(C,1/2.4)-.055:C*12.92,O=O>.0031308?1.055*Math.pow(O,1/2.4)-.055:O*12.92,w=Math.min(Math.max(0,w),1),C=Math.min(Math.max(0,C),1),O=Math.min(Math.max(0,O),1),[w*255,C*255,O*255]},E.xyz.lab=function(v){var p=v[0],g=v[1],T=v[2],w,C,O;return p/=95.047,g/=100,T/=108.883,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,T=T>.008856?Math.pow(T,1/3):7.787*T+16/116,w=116*g-16,C=500*(p-g),O=200*(g-T),[w,C,O]},E.lab.xyz=function(v){var p=v[0],g=v[1],T=v[2],w,C,O;C=(p+16)/116,w=g/500+C,O=C-T/200;var b=Math.pow(C,3),l=Math.pow(w,3),K=Math.pow(O,3);return C=b>.008856?b:(C-16/116)/7.787,w=l>.008856?l:(w-16/116)/7.787,O=K>.008856?K:(O-16/116)/7.787,w*=95.047,C*=100,O*=108.883,[w,C,O]},E.lab.lch=function(v){var p=v[0],g=v[1],T=v[2],w,C,O;return w=Math.atan2(T,g),C=w*360/2/Math.PI,C<0&&(C+=360),O=Math.sqrt(g*g+T*T),[p,O,C]},E.lch.lab=function(v){var p=v[0],g=v[1],T=v[2],w,C,O;return O=T/360*2*Math.PI,w=g*Math.cos(O),C=g*Math.sin(O),[p,w,C]},E.rgb.ansi16=function(v){var p=v[0],g=v[1],T=v[2],w=1 in arguments?arguments[1]:E.rgb.hsv(v)[2];if(w=Math.round(w/50),w===0)return 30;var C=30+(Math.round(T/255)<<2|Math.round(g/255)<<1|Math.round(p/255));return w===2&&(C+=60),C},E.hsv.ansi16=function(v){return E.rgb.ansi16(E.hsv.rgb(v),v[2])},E.rgb.ansi256=function(v){var p=v[0],g=v[1],T=v[2];if(p===g&&g===T)return p<8?16:p>248?231:Math.round((p-8)/247*24)+232;var w=16+36*Math.round(p/255*5)+6*Math.round(g/255*5)+Math.round(T/255*5);return w},E.ansi16.rgb=function(v){var p=v%10;if(p===0||p===7)return v>50&&(p+=3.5),p=p/10.5*255,[p,p,p];var g=(~~(v>50)+1)*.5,T=(p&1)*g*255,w=(p>>1&1)*g*255,C=(p>>2&1)*g*255;return[T,w,C]},E.ansi256.rgb=function(v){if(v>=232){var p=(v-232)*10+8;return[p,p,p]}v-=16;var g,T=Math.floor(v/36)/5*255,w=Math.floor((g=v%36)/6)/5*255,C=g%6/5*255;return[T,w,C]},E.rgb.hex=function(v){var p=((Math.round(v[0])&255)<<16)+((Math.round(v[1])&255)<<8)+(Math.round(v[2])&255),g=p.toString(16).toUpperCase();return"000000".substring(g.length)+g},E.hex.rgb=function(v){var p=v.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!p)return[0,0,0];var g=p[0];p[0].length===3&&(g=g.split("").map(function(b){return b+b}).join(""));var T=parseInt(g,16),w=T>>16&255,C=T>>8&255,O=T&255;return[w,C,O]},E.rgb.hcg=function(v){var p=v[0]/255,g=v[1]/255,T=v[2]/255,w=Math.max(Math.max(p,g),T),C=Math.min(Math.min(p,g),T),O=w-C,b,l;return O<1?b=C/(1-O):b=0,O<=0?l=0:w===p?l=(g-T)/O%6:w===g?l=2+(T-p)/O:l=4+(p-g)/O+4,l/=6,l%=1,[l*360,O*100,b*100]},E.hsl.hcg=function(v){var p=v[1]/100,g=v[2]/100,T=1,w=0;return g<.5?T=2*p*g:T=2*p*(1-g),T<1&&(w=(g-.5*T)/(1-T)),[v[0],T*100,w*100]},E.hsv.hcg=function(v){var p=v[1]/100,g=v[2]/100,T=p*g,w=0;return T<1&&(w=(g-T)/(1-T)),[v[0],T*100,w*100]},E.hcg.rgb=function(v){var p=v[0]/360,g=v[1]/100,T=v[2]/100;if(g===0)return[T*255,T*255,T*255];var w=[0,0,0],C=p%1*6,O=C%1,b=1-O,l=0;switch(Math.floor(C)){case 0:w[0]=1,w[1]=O,w[2]=0;break;case 1:w[0]=b,w[1]=1,w[2]=0;break;case 2:w[0]=0,w[1]=1,w[2]=O;break;case 3:w[0]=0,w[1]=b,w[2]=1;break;case 4:w[0]=O,w[1]=0,w[2]=1;break;default:w[0]=1,w[1]=0,w[2]=b}return l=(1-g)*T,[(g*w[0]+l)*255,(g*w[1]+l)*255,(g*w[2]+l)*255]},E.hcg.hsv=function(v){var p=v[1]/100,g=v[2]/100,T=p+g*(1-p),w=0;return T>0&&(w=p/T),[v[0],w*100,T*100]},E.hcg.hsl=function(v){var p=v[1]/100,g=v[2]/100,T=g*(1-p)+.5*p,w=0;return T>0&&T<.5?w=p/(2*T):T>=.5&&T<1&&(w=p/(2*(1-T))),[v[0],w*100,T*100]},E.hcg.hwb=function(v){var p=v[1]/100,g=v[2]/100,T=p+g*(1-p);return[v[0],(T-p)*100,(1-T)*100]},E.hwb.hcg=function(v){var p=v[1]/100,g=v[2]/100,T=1-g,w=T-p,C=0;return w<1&&(C=(T-w)/(1-w)),[v[0],w*100,C*100]},E.apple.rgb=function(v){return[v[0]/65535*255,v[1]/65535*255,v[2]/65535*255]},E.rgb.apple=function(v){return[v[0]/255*65535,v[1]/255*65535,v[2]/255*65535]},E.gray.rgb=function(v){return[v[0]/100*255,v[0]/100*255,v[0]/100*255]},E.gray.hsl=E.gray.hsv=function(v){return[0,0,v[0]]},E.gray.hwb=function(v){return[0,100,v[0]]},E.gray.cmyk=function(v){return[0,0,0,v[0]]},E.gray.lab=function(v){return[v[0],0,0]},E.gray.hex=function(v){var p=Math.round(v[0]/100*255)&255,g=(p<<16)+(p<<8)+p,T=g.toString(16).toUpperCase();return"000000".substring(T.length)+T},E.rgb.gray=function(v){var p=(v[0]+v[1]+v[2])/3;return[p/255*100]}},14170:function(le,S,M){var x=M(53616),z=M(64774),k={},E=Object.keys(x);function N(m){var y=function(v){return v==null?v:(arguments.length>1&&(v=Array.prototype.slice.call(arguments)),m(v))};return"conversion"in m&&(y.conversion=m.conversion),y}function I(m){var y=function(v){if(v==null)return v;arguments.length>1&&(v=Array.prototype.slice.call(arguments));var p=m(v);if(typeof p=="object")for(var g=p.length,T=0;T<g;T++)p[T]=Math.round(p[T]);return p};return"conversion"in m&&(y.conversion=m.conversion),y}E.forEach(function(m){k[m]={},Object.defineProperty(k[m],"channels",{value:x[m].channels}),Object.defineProperty(k[m],"labels",{value:x[m].labels});var y=z(m),v=Object.keys(y);v.forEach(function(p){var g=y[p];k[m][p]=I(g),k[m][p].raw=N(g)})}),le.exports=k},64774:function(le,S,M){var x=M(53616);function z(){for(var I={},m=Object.keys(x),y=m.length,v=0;v<y;v++)I[m[v]]={distance:-1,parent:null};return I}function k(I){var m=z(),y=[I];for(m[I].distance=0;y.length;)for(var v=y.pop(),p=Object.keys(x[v]),g=p.length,T=0;T<g;T++){var w=p[T],C=m[w];C.distance===-1&&(C.distance=m[v].distance+1,C.parent=v,y.unshift(w))}return m}function E(I,m){return function(y){return m(I(y))}}function N(I,m){for(var y=[m[I].parent,I],v=x[m[I].parent][I],p=m[I].parent;m[p].parent;)y.unshift(m[p].parent),v=E(x[m[p].parent][p],v),p=m[p].parent;return v.conversion=y,v}le.exports=function(I){for(var m=k(I),y={},v=Object.keys(m),p=v.length,g=0;g<p;g++){var T=v[g],w=m[T];w.parent!==null&&(y[T]=N(T,m))}return y}},96585:function(le){"use strict";le.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},33608:function(le){"use strict";le.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},64510:function(le,S,M){var x=M(33608),z=M(5458),k=Object.hasOwnProperty,E=Object.create(null);for(var N in x)k.call(x,N)&&(E[x[N]]=N);var I=le.exports={to:{},get:{}};I.get=function(v){var p=v.substring(0,3).toLowerCase(),g,T;switch(p){case"hsl":g=I.get.hsl(v),T="hsl";break;case"hwb":g=I.get.hwb(v),T="hwb";break;default:g=I.get.rgb(v),T="rgb";break}return g?{model:T,value:g}:null},I.get.rgb=function(v){if(!v)return null;var p=/^#([a-f0-9]{3,4})$/i,g=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,T=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,w=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,C=/^(\w+)$/,O=[0,0,0,1],b,l,K;if(b=v.match(g)){for(K=b[2],b=b[1],l=0;l<3;l++){var Z=l*2;O[l]=parseInt(b.slice(Z,Z+2),16)}K&&(O[3]=parseInt(K,16)/255)}else if(b=v.match(p)){for(b=b[1],K=b[3],l=0;l<3;l++)O[l]=parseInt(b[l]+b[l],16);K&&(O[3]=parseInt(K+K,16)/255)}else if(b=v.match(T)){for(l=0;l<3;l++)O[l]=parseInt(b[l+1],0);b[4]&&(b[5]?O[3]=parseFloat(b[4])*.01:O[3]=parseFloat(b[4]))}else if(b=v.match(w)){for(l=0;l<3;l++)O[l]=Math.round(parseFloat(b[l+1])*2.55);b[4]&&(b[5]?O[3]=parseFloat(b[4])*.01:O[3]=parseFloat(b[4]))}else return(b=v.match(C))?b[1]==="transparent"?[0,0,0,0]:k.call(x,b[1])?(O=x[b[1]],O[3]=1,O):null:null;for(l=0;l<3;l++)O[l]=m(O[l],0,255);return O[3]=m(O[3],0,1),O},I.get.hsl=function(v){if(!v)return null;var p=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=v.match(p);if(g){var T=parseFloat(g[4]),w=(parseFloat(g[1])%360+360)%360,C=m(parseFloat(g[2]),0,100),O=m(parseFloat(g[3]),0,100),b=m(isNaN(T)?1:T,0,1);return[w,C,O,b]}return null},I.get.hwb=function(v){if(!v)return null;var p=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=v.match(p);if(g){var T=parseFloat(g[4]),w=(parseFloat(g[1])%360+360)%360,C=m(parseFloat(g[2]),0,100),O=m(parseFloat(g[3]),0,100),b=m(isNaN(T)?1:T,0,1);return[w,C,O,b]}return null},I.to.hex=function(){var v=z(arguments);return"#"+y(v[0])+y(v[1])+y(v[2])+(v[3]<1?y(Math.round(v[3]*255)):"")},I.to.rgb=function(){var v=z(arguments);return v.length<4||v[3]===1?"rgb("+Math.round(v[0])+", "+Math.round(v[1])+", "+Math.round(v[2])+")":"rgba("+Math.round(v[0])+", "+Math.round(v[1])+", "+Math.round(v[2])+", "+v[3]+")"},I.to.rgb.percent=function(){var v=z(arguments),p=Math.round(v[0]/255*100),g=Math.round(v[1]/255*100),T=Math.round(v[2]/255*100);return v.length<4||v[3]===1?"rgb("+p+"%, "+g+"%, "+T+"%)":"rgba("+p+"%, "+g+"%, "+T+"%, "+v[3]+")"},I.to.hsl=function(){var v=z(arguments);return v.length<4||v[3]===1?"hsl("+v[0]+", "+v[1]+"%, "+v[2]+"%)":"hsla("+v[0]+", "+v[1]+"%, "+v[2]+"%, "+v[3]+")"},I.to.hwb=function(){var v=z(arguments),p="";return v.length>=4&&v[3]!==1&&(p=", "+v[3]),"hwb("+v[0]+", "+v[1]+"%, "+v[2]+"%"+p+")"},I.to.keyword=function(v){return E[v.slice(0,3)]};function m(v,p,g){return Math.min(Math.max(p,v),g)}function y(v){var p=Math.round(v).toString(16).toUpperCase();return p.length<2?"0"+p:p}},90094:function(le,S,M){"use strict";var x=M(64510),z=M(14170),k=[].slice,E=["keyword","gray","hex"],N={};Object.keys(z).forEach(function(C){N[k.call(z[C].labels).sort().join("")]=C});var I={};function m(C,O){if(!(this instanceof m))return new m(C,O);if(O&&O in E&&(O=null),O&&!(O in z))throw new Error("Unknown model: "+O);var b,l;if(C==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(C instanceof m)this.model=C.model,this.color=C.color.slice(),this.valpha=C.valpha;else if(typeof C=="string"){var K=x.get(C);if(K===null)throw new Error("Unable to parse color from string: "+C);this.model=K.model,l=z[this.model].channels,this.color=K.value.slice(0,l),this.valpha=typeof K.value[l]=="number"?K.value[l]:1}else if(C.length){this.model=O||"rgb",l=z[this.model].channels;var Z=k.call(C,0,l);this.color=w(Z,l),this.valpha=typeof C[l]=="number"?C[l]:1}else if(typeof C=="number")C&=16777215,this.model="rgb",this.color=[C>>16&255,C>>8&255,C&255],this.valpha=1;else{this.valpha=1;var X=Object.keys(C);"alpha"in C&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof C.alpha=="number"?C.alpha:0);var W=X.sort().join("");if(!(W in N))throw new Error("Unable to parse color from object: "+JSON.stringify(C));this.model=N[W];var U=z[this.model].labels,et=[];for(b=0;b<U.length;b++)et.push(C[U[b]]);this.color=w(et)}if(I[this.model])for(l=z[this.model].channels,b=0;b<l;b++){var it=I[this.model][b];it&&(this.color[b]=it(this.color[b]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}m.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(C){var O=this.model in x.to?this:this.rgb();O=O.round(typeof C=="number"?C:1);var b=O.valpha===1?O.color:O.color.concat(this.valpha);return x.to[O.model](b)},percentString:function(C){var O=this.rgb().round(typeof C=="number"?C:1),b=O.valpha===1?O.color:O.color.concat(this.valpha);return x.to.rgb.percent(b)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var C={},O=z[this.model].channels,b=z[this.model].labels,l=0;l<O;l++)C[b[l]]=this.color[l];return this.valpha!==1&&(C.alpha=this.valpha),C},unitArray:function(){var C=this.rgb().color;return C[0]/=255,C[1]/=255,C[2]/=255,this.valpha!==1&&C.push(this.valpha),C},unitObject:function(){var C=this.rgb().object();return C.r/=255,C.g/=255,C.b/=255,this.valpha!==1&&(C.alpha=this.valpha),C},round:function(C){return C=Math.max(C||0,0),new m(this.color.map(v(C)).concat(this.valpha),this.model)},alpha:function(C){return arguments.length?new m(this.color.concat(Math.max(0,Math.min(1,C))),this.model):this.valpha},red:p("rgb",0,g(255)),green:p("rgb",1,g(255)),blue:p("rgb",2,g(255)),hue:p(["hsl","hsv","hsl","hwb","hcg"],0,function(C){return(C%360+360)%360}),saturationl:p("hsl",1,g(100)),lightness:p("hsl",2,g(100)),saturationv:p("hsv",1,g(100)),value:p("hsv",2,g(100)),chroma:p("hcg",1,g(100)),gray:p("hcg",2,g(100)),white:p("hwb",1,g(100)),wblack:p("hwb",2,g(100)),cyan:p("cmyk",0,g(100)),magenta:p("cmyk",1,g(100)),yellow:p("cmyk",2,g(100)),black:p("cmyk",3,g(100)),x:p("xyz",0,g(100)),y:p("xyz",1,g(100)),z:p("xyz",2,g(100)),l:p("lab",0,g(100)),a:p("lab",1),b:p("lab",2),keyword:function(C){return arguments.length?new m(C):z[this.model].keyword(this.color)},hex:function(C){return arguments.length?new m(C):x.to.hex(this.rgb().round().color)},rgbNumber:function(){var C=this.rgb().color;return(C[0]&255)<<16|(C[1]&255)<<8|C[2]&255},luminosity:function(){for(var C=this.rgb().color,O=[],b=0;b<C.length;b++){var l=C[b]/255;O[b]=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}return .2126*O[0]+.7152*O[1]+.0722*O[2]},contrast:function(C){var O=this.luminosity(),b=C.luminosity();return O>b?(O+.05)/(b+.05):(b+.05)/(O+.05)},level:function(C){var O=this.contrast(C);return O>=7.1?"AAA":O>=4.5?"AA":""},isDark:function(){var C=this.rgb().color,O=(C[0]*299+C[1]*587+C[2]*114)/1e3;return O<128},isLight:function(){return!this.isDark()},negate:function(){for(var C=this.rgb(),O=0;O<3;O++)C.color[O]=255-C.color[O];return C},lighten:function(C){var O=this.hsl();return O.color[2]+=O.color[2]*C,O},darken:function(C){var O=this.hsl();return O.color[2]-=O.color[2]*C,O},saturate:function(C){var O=this.hsl();return O.color[1]+=O.color[1]*C,O},desaturate:function(C){var O=this.hsl();return O.color[1]-=O.color[1]*C,O},whiten:function(C){var O=this.hwb();return O.color[1]+=O.color[1]*C,O},blacken:function(C){var O=this.hwb();return O.color[2]+=O.color[2]*C,O},grayscale:function(){var C=this.rgb().color,O=C[0]*.3+C[1]*.59+C[2]*.11;return m.rgb(O,O,O)},fade:function(C){return this.alpha(this.valpha-this.valpha*C)},opaquer:function(C){return this.alpha(this.valpha+this.valpha*C)},rotate:function(C){var O=this.hsl(),b=O.color[0];return b=(b+C)%360,b=b<0?360+b:b,O.color[0]=b,O},mix:function(C,O){if(!C||!C.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof C);var b=C.rgb(),l=this.rgb(),K=O===void 0?.5:O,Z=2*K-1,X=b.alpha()-l.alpha(),W=((Z*X===-1?Z:(Z+X)/(1+Z*X))+1)/2,U=1-W;return m.rgb(W*b.red()+U*l.red(),W*b.green()+U*l.green(),W*b.blue()+U*l.blue(),b.alpha()*K+l.alpha()*(1-K))}},Object.keys(z).forEach(function(C){if(E.indexOf(C)===-1){var O=z[C].channels;m.prototype[C]=function(){if(this.model===C)return new m(this);if(arguments.length)return new m(arguments,C);var b=typeof arguments[O]=="number"?O:this.valpha;return new m(T(z[this.model][C].raw(this.color)).concat(b),C)},m[C]=function(b){return typeof b=="number"&&(b=w(k.call(arguments),O)),new m(b,C)}}});function y(C,O){return Number(C.toFixed(O))}function v(C){return function(O){return y(O,C)}}function p(C,O,b){return C=Array.isArray(C)?C:[C],C.forEach(function(l){(I[l]||(I[l]=[]))[O]=b}),C=C[0],function(l){var K;return arguments.length?(b&&(l=b(l)),K=this[C](),K.color[O]=l,K):(K=this[C]().color[O],b&&(K=b(K)),K)}}function g(C){return function(O){return Math.max(0,Math.min(C,O))}}function T(C){return Array.isArray(C)?C:[C]}function w(C,O){for(var b=0;b<O;b++)typeof C[b]!="number"&&(C[b]=0);return C}le.exports=m},45517:function(le,S,M){"use strict";M.r(S),M.d(S,{quadtree:function(){return x.Z}});var x=M(90696)},90696:function(le,S,M){"use strict";M.d(S,{Z:function(){return Z}});function x(et){const it=+this._x.call(null,et),J=+this._y.call(null,et);return z(this.cover(it,J),it,J,et)}function z(et,it,J,rt){if(isNaN(it)||isNaN(J))return et;var mt,pt=et._root,ft={data:rt},Mt=et._x0,zt=et._y0,Vt=et._x1,kt=et._y1,st,St,qt,re,Nt,be,Te,nr;if(!pt)return et._root=ft,et;for(;pt.length;)if((Nt=it>=(st=(Mt+Vt)/2))?Mt=st:Vt=st,(be=J>=(St=(zt+kt)/2))?zt=St:kt=St,mt=pt,!(pt=pt[Te=be<<1|Nt]))return mt[Te]=ft,et;if(qt=+et._x.call(null,pt.data),re=+et._y.call(null,pt.data),it===qt&&J===re)return ft.next=pt,mt?mt[Te]=ft:et._root=ft,et;do mt=mt?mt[Te]=new Array(4):et._root=new Array(4),(Nt=it>=(st=(Mt+Vt)/2))?Mt=st:Vt=st,(be=J>=(St=(zt+kt)/2))?zt=St:kt=St;while((Te=be<<1|Nt)===(nr=(re>=St)<<1|qt>=st));return mt[nr]=pt,mt[Te]=ft,et}function k(et){var it,J,rt=et.length,mt,pt,ft=new Array(rt),Mt=new Array(rt),zt=1/0,Vt=1/0,kt=-1/0,st=-1/0;for(J=0;J<rt;++J)isNaN(mt=+this._x.call(null,it=et[J]))||isNaN(pt=+this._y.call(null,it))||(ft[J]=mt,Mt[J]=pt,mt<zt&&(zt=mt),mt>kt&&(kt=mt),pt<Vt&&(Vt=pt),pt>st&&(st=pt));if(zt>kt||Vt>st)return this;for(this.cover(zt,Vt).cover(kt,st),J=0;J<rt;++J)z(this,ft[J],Mt[J],et[J]);return this}function E(et,it){if(isNaN(et=+et)||isNaN(it=+it))return this;var J=this._x0,rt=this._y0,mt=this._x1,pt=this._y1;if(isNaN(J))mt=(J=Math.floor(et))+1,pt=(rt=Math.floor(it))+1;else{for(var ft=mt-J||1,Mt=this._root,zt,Vt;J>et||et>=mt||rt>it||it>=pt;)switch(Vt=(it<rt)<<1|et<J,zt=new Array(4),zt[Vt]=Mt,Mt=zt,ft*=2,Vt){case 0:mt=J+ft,pt=rt+ft;break;case 1:J=mt-ft,pt=rt+ft;break;case 2:mt=J+ft,rt=pt-ft;break;case 3:J=mt-ft,rt=pt-ft;break}this._root&&this._root.length&&(this._root=Mt)}return this._x0=J,this._y0=rt,this._x1=mt,this._y1=pt,this}function N(){var et=[];return this.visit(function(it){if(!it.length)do et.push(it.data);while(it=it.next)}),et}function I(et){return arguments.length?this.cover(+et[0][0],+et[0][1]).cover(+et[1][0],+et[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function m(et,it,J,rt,mt){this.node=et,this.x0=it,this.y0=J,this.x1=rt,this.y1=mt}function y(et,it,J){var rt,mt=this._x0,pt=this._y0,ft,Mt,zt,Vt,kt=this._x1,st=this._y1,St=[],qt=this._root,re,Nt;for(qt&&St.push(new m(qt,mt,pt,kt,st)),J==null?J=1/0:(mt=et-J,pt=it-J,kt=et+J,st=it+J,J*=J);re=St.pop();)if(!(!(qt=re.node)||(ft=re.x0)>kt||(Mt=re.y0)>st||(zt=re.x1)<mt||(Vt=re.y1)<pt))if(qt.length){var be=(ft+zt)/2,Te=(Mt+Vt)/2;St.push(new m(qt[3],be,Te,zt,Vt),new m(qt[2],ft,Te,be,Vt),new m(qt[1],be,Mt,zt,Te),new m(qt[0],ft,Mt,be,Te)),(Nt=(it>=Te)<<1|et>=be)&&(re=St[St.length-1],St[St.length-1]=St[St.length-1-Nt],St[St.length-1-Nt]=re)}else{var nr=et-+this._x.call(null,qt.data),Rt=it-+this._y.call(null,qt.data),Dt=nr*nr+Rt*Rt;if(Dt<J){var At=Math.sqrt(J=Dt);mt=et-At,pt=it-At,kt=et+At,st=it+At,rt=qt.data}}return rt}function v(et){if(isNaN(kt=+this._x.call(null,et))||isNaN(st=+this._y.call(null,et)))return this;var it,J=this._root,rt,mt,pt,ft=this._x0,Mt=this._y0,zt=this._x1,Vt=this._y1,kt,st,St,qt,re,Nt,be,Te;if(!J)return this;if(J.length)for(;;){if((re=kt>=(St=(ft+zt)/2))?ft=St:zt=St,(Nt=st>=(qt=(Mt+Vt)/2))?Mt=qt:Vt=qt,it=J,!(J=J[be=Nt<<1|re]))return this;if(!J.length)break;(it[be+1&3]||it[be+2&3]||it[be+3&3])&&(rt=it,Te=be)}for(;J.data!==et;)if(mt=J,!(J=J.next))return this;return(pt=J.next)&&delete J.next,mt?(pt?mt.next=pt:delete mt.next,this):it?(pt?it[be]=pt:delete it[be],(J=it[0]||it[1]||it[2]||it[3])&&J===(it[3]||it[2]||it[1]||it[0])&&!J.length&&(rt?rt[Te]=J:this._root=J),this):(this._root=pt,this)}function p(et){for(var it=0,J=et.length;it<J;++it)this.remove(et[it]);return this}function g(){return this._root}function T(){var et=0;return this.visit(function(it){if(!it.length)do++et;while(it=it.next)}),et}function w(et){var it=[],J,rt=this._root,mt,pt,ft,Mt,zt;for(rt&&it.push(new m(rt,this._x0,this._y0,this._x1,this._y1));J=it.pop();)if(!et(rt=J.node,pt=J.x0,ft=J.y0,Mt=J.x1,zt=J.y1)&&rt.length){var Vt=(pt+Mt)/2,kt=(ft+zt)/2;(mt=rt[3])&&it.push(new m(mt,Vt,kt,Mt,zt)),(mt=rt[2])&&it.push(new m(mt,pt,kt,Vt,zt)),(mt=rt[1])&&it.push(new m(mt,Vt,ft,Mt,kt)),(mt=rt[0])&&it.push(new m(mt,pt,ft,Vt,kt))}return this}function C(et){var it=[],J=[],rt;for(this._root&&it.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));rt=it.pop();){var mt=rt.node;if(mt.length){var pt,ft=rt.x0,Mt=rt.y0,zt=rt.x1,Vt=rt.y1,kt=(ft+zt)/2,st=(Mt+Vt)/2;(pt=mt[0])&&it.push(new m(pt,ft,Mt,kt,st)),(pt=mt[1])&&it.push(new m(pt,kt,Mt,zt,st)),(pt=mt[2])&&it.push(new m(pt,ft,st,kt,Vt)),(pt=mt[3])&&it.push(new m(pt,kt,st,zt,Vt))}J.push(rt)}for(;rt=J.pop();)et(rt.node,rt.x0,rt.y0,rt.x1,rt.y1);return this}function O(et){return et[0]}function b(et){return arguments.length?(this._x=et,this):this._x}function l(et){return et[1]}function K(et){return arguments.length?(this._y=et,this):this._y}function Z(et,it,J){var rt=new X(it==null?O:it,J==null?l:J,NaN,NaN,NaN,NaN);return et==null?rt:rt.addAll(et)}function X(et,it,J,rt,mt,pt){this._x=et,this._y=it,this._x0=J,this._y0=rt,this._x1=mt,this._y1=pt,this._root=void 0}function W(et){for(var it={data:et.data},J=it;et=et.next;)J=J.next={data:et.data};return it}var U=Z.prototype=X.prototype;U.copy=function(){var et=new X(this._x,this._y,this._x0,this._y0,this._x1,this._y1),it=this._root,J,rt;if(!it)return et;if(!it.length)return et._root=W(it),et;for(J=[{source:it,target:et._root=new Array(4)}];it=J.pop();)for(var mt=0;mt<4;++mt)(rt=it.source[mt])&&(rt.length?J.push({source:rt,target:it.target[mt]=new Array(4)}):it.target[mt]=W(rt));return et},U.add=x,U.addAll=k,U.cover=E,U.data=N,U.extent=I,U.find=y,U.remove=v,U.removeAll=p,U.root=g,U.size=T,U.visit=w,U.visitAfter=C,U.x=b,U.y=K},55281:function(le,S,M){"use strict";M.r(S),M.d(S,{BRIDGE_GRAPH_NAME:function(){return N},GraphType:function(){return y},HierarchyNodeType:function(){return v},InclusionType:function(){return m},LAYOUT_CONFIG:function(){return x},NodeType:function(){return I},ROOT_NAME:function(){return E},buildGraph:function(){return Ar},flatGraph:function(){return jr},getEdges:function(){return Hr},mergeConfig:function(){return z}});const x={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function z(d={},L=x){var j,q,ht,gt;const _t=JSON.parse(JSON.stringify(L)),It=((j=d==null?void 0:d.graph)===null||j===void 0?void 0:j.meta)||{},Ut=((q=d==null?void 0:d.subScene)===null||q===void 0?void 0:q.meta)||{},Jt=((ht=d==null?void 0:d.nodeSize)===null||ht===void 0?void 0:ht.meta)||{},ue=((gt=d==null?void 0:d.nodeSize)===null||gt===void 0?void 0:gt.node)||{},ae=_t.nodeSize.bridge;return{graph:{meta:Object.assign(_t.graph.meta,It)},subScene:{meta:Object.assign(_t.subScene.meta,Ut)},nodeSize:{meta:Object.assign(_t.nodeSize.meta,Jt),node:Object.assign(_t.nodeSize.node,ue),bridge:ae}}}function k(d){return`\u25EC${d}\u25EC`}const E=k("ROOT"),N=k("BRIDGE_GRAPH");var I,m,y,v;(function(d){d[d.META=0]="META",d[d.NODE=1]="NODE",d[d.BRIDGE=2]="BRIDGE"})(I||(I={})),function(d){d[d.INCLUDE=0]="INCLUDE",d[d.EXCLUDE=1]="EXCLUDE",d[d.UNSPECIFIED=2]="UNSPECIFIED"}(m||(m={})),function(d){d[d.META=0]="META",d[d.CORE=1]="CORE",d[d.BRIDGE=2]="BRIDGE"}(y||(y={})),function(d){d[d.META=0]="META",d[d.OP=1]="OP",d[d.SERIES=2]="SERIES"}(v||(v={}));var p=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof M.g!="undefined"?M.g:typeof self!="undefined"?self:{};function g(d,L){return d(L={exports:{}},L.exports),L.exports}var T=function(){this.__data__=[],this.size=0},w=function(d,L){return d===L||d!=d&&L!=L},C=function(d,L){for(var j=d.length;j--;)if(w(d[j][0],L))return j;return-1},O=Array.prototype.splice,b=function(d){var L=this.__data__,j=C(L,d);return!(j<0)&&(j==L.length-1?L.pop():O.call(L,j,1),--this.size,!0)},l=function(d){var L=this.__data__,j=C(L,d);return j<0?void 0:L[j][1]},K=function(d){return C(this.__data__,d)>-1},Z=function(d,L){var j=this.__data__,q=C(j,d);return q<0?(++this.size,j.push([d,L])):j[q][1]=L,this};function X(d){var L=-1,j=d==null?0:d.length;for(this.clear();++L<j;){var q=d[L];this.set(q[0],q[1])}}X.prototype.clear=T,X.prototype.delete=b,X.prototype.get=l,X.prototype.has=K,X.prototype.set=Z;var W=X,U=function(){this.__data__=new W,this.size=0},et=function(d){var L=this.__data__,j=L.delete(d);return this.size=L.size,j},it=function(d){return this.__data__.get(d)},J=function(d){return this.__data__.has(d)},rt=typeof p=="object"&&p&&p.Object===Object&&p,mt=typeof self=="object"&&self&&self.Object===Object&&self,pt=rt||mt||Function("return this")(),ft=pt.Symbol,Mt=Object.prototype,zt=Mt.hasOwnProperty,Vt=Mt.toString,kt=ft?ft.toStringTag:void 0,st=function(d){var L=zt.call(d,kt),j=d[kt];try{d[kt]=void 0;var q=!0}catch(gt){}var ht=Vt.call(d);return q&&(L?d[kt]=j:delete d[kt]),ht},St=Object.prototype.toString,qt=function(d){return St.call(d)},re=ft?ft.toStringTag:void 0,Nt=function(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":re&&re in Object(d)?st(d):qt(d)},be=function(d){var L=typeof d;return d!=null&&(L=="object"||L=="function")},Te,nr=function(d){if(!be(d))return!1;var L=Nt(d);return L=="[object Function]"||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"},Rt=pt["__core-js_shared__"],Dt=(Te=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||""))?"Symbol(src)_1."+Te:"",At=function(d){return!!Dt&&Dt in d},Xt=Function.prototype.toString,$t=function(d){if(d!=null){try{return Xt.call(d)}catch(L){}try{return d+""}catch(L){}}return""},Tt=/^\[object .+?Constructor\]$/,Kt=Function.prototype,Ee=Object.prototype,vt=Kt.toString,bt=Ee.hasOwnProperty,wt=RegExp("^"+vt.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=function(d){return!(!be(d)||At(d))&&(nr(d)?wt:Tt).test($t(d))},tt=function(d,L){return d==null?void 0:d[L]},Ot=function(d,L){var j=tt(d,L);return D(j)?j:void 0},ct=Ot(pt,"Map"),ie=Ot(Object,"create"),pe=function(){this.__data__=ie?ie(null):{},this.size=0},Ge=function(d){var L=this.has(d)&&delete this.__data__[d];return this.size-=L?1:0,L},Re=Object.prototype.hasOwnProperty,Je=function(d){var L=this.__data__;if(ie){var j=L[d];return j==="__lodash_hash_undefined__"?void 0:j}return Re.call(L,d)?L[d]:void 0},Ve=Object.prototype.hasOwnProperty,ce=function(d){var L=this.__data__;return ie?L[d]!==void 0:Ve.call(L,d)},Le=function(d,L){var j=this.__data__;return this.size+=this.has(d)?0:1,j[d]=ie&&L===void 0?"__lodash_hash_undefined__":L,this};function je(d){var L=-1,j=d==null?0:d.length;for(this.clear();++L<j;){var q=d[L];this.set(q[0],q[1])}}je.prototype.clear=pe,je.prototype.delete=Ge,je.prototype.get=Je,je.prototype.has=ce,je.prototype.set=Le;var Be=je,vr=function(){this.size=0,this.__data__={hash:new Be,map:new(ct||W),string:new Be}},or=function(d){var L=typeof d;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?d!=="__proto__":d===null},Ae=function(d,L){var j=d.__data__;return or(L)?j[typeof L=="string"?"string":"hash"]:j.map},yr=function(d){var L=Ae(this,d).delete(d);return this.size-=L?1:0,L},Cr=function(d){return Ae(this,d).get(d)},zr=function(d){return Ae(this,d).has(d)},Mr=function(d,L){var j=Ae(this,d),q=j.size;return j.set(d,L),this.size+=j.size==q?0:1,this};function un(d){var L=-1,j=d==null?0:d.length;for(this.clear();++L<j;){var q=d[L];this.set(q[0],q[1])}}un.prototype.clear=vr,un.prototype.delete=yr,un.prototype.get=Cr,un.prototype.has=zr,un.prototype.set=Mr;var hn=un,Un=function(d,L){var j=this.__data__;if(j instanceof W){var q=j.__data__;if(!ct||q.length<199)return q.push([d,L]),this.size=++j.size,this;j=this.__data__=new hn(q)}return j.set(d,L),this.size=j.size,this};function nn(d){var L=this.__data__=new W(d);this.size=L.size}nn.prototype.clear=U,nn.prototype.delete=et,nn.prototype.get=it,nn.prototype.has=J,nn.prototype.set=Un;var vn=nn,ln=function(d,L){for(var j=-1,q=d==null?0:d.length;++j<q&&L(d[j],j,d)!==!1;);return d},pn=function(){try{var d=Ot(Object,"defineProperty");return d({},"",{}),d}catch(L){}}(),Bn=function(d,L,j){L=="__proto__"&&pn?pn(d,L,{configurable:!0,enumerable:!0,value:j,writable:!0}):d[L]=j},Oe=Object.prototype.hasOwnProperty,Cn=function(d,L,j){var q=d[L];Oe.call(d,L)&&w(q,j)&&(j!==void 0||L in d)||Bn(d,L,j)},Gn=function(d,L,j,q){var ht=!j;j||(j={});for(var gt=-1,_t=L.length;++gt<_t;){var It=L[gt],Ut=q?q(j[It],d[It],It,j,d):void 0;Ut===void 0&&(Ut=d[It]),ht?Bn(j,It,Ut):Cn(j,It,Ut)}return j},bi=function(d,L){for(var j=-1,q=Array(d);++j<d;)q[j]=L(j);return q},zn=function(d){return d!=null&&typeof d=="object"},Hn=function(d){return zn(d)&&Nt(d)=="[object Arguments]"},hi=Object.prototype,_i=hi.hasOwnProperty,pi=hi.propertyIsEnumerable,Pt=Hn(function(){return arguments}())?Hn:function(d){return zn(d)&&_i.call(d,"callee")&&!pi.call(d,"callee")},Lt=Array.isArray,H=function(){return!1},G=g(function(d,L){var j=L&&!L.nodeType&&L,q=j&&d&&!d.nodeType&&d,ht=q&&q.exports===j?pt.Buffer:void 0,gt=(ht?ht.isBuffer:void 0)||H;d.exports=gt}),F=/^(?:0|[1-9]\d*)$/,ot=function(d,L){var j=typeof d;return!!(L=L==null?9007199254740991:L)&&(j=="number"||j!="symbol"&&F.test(d))&&d>-1&&d%1==0&&d<L},Bt=function(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=9007199254740991},Ht={};Ht["[object Float32Array]"]=Ht["[object Float64Array]"]=Ht["[object Int8Array]"]=Ht["[object Int16Array]"]=Ht["[object Int32Array]"]=Ht["[object Uint8Array]"]=Ht["[object Uint8ClampedArray]"]=Ht["[object Uint16Array]"]=Ht["[object Uint32Array]"]=!0,Ht["[object Arguments]"]=Ht["[object Array]"]=Ht["[object ArrayBuffer]"]=Ht["[object Boolean]"]=Ht["[object DataView]"]=Ht["[object Date]"]=Ht["[object Error]"]=Ht["[object Function]"]=Ht["[object Map]"]=Ht["[object Number]"]=Ht["[object Object]"]=Ht["[object RegExp]"]=Ht["[object Set]"]=Ht["[object String]"]=Ht["[object WeakMap]"]=!1;var Yt=function(d){return zn(d)&&Bt(d.length)&&!!Ht[Nt(d)]},he=function(d){return function(L){return d(L)}},at=g(function(d,L){var j=L&&!L.nodeType&&L,q=j&&d&&!d.nodeType&&d,ht=q&&q.exports===j&&rt.process,gt=function(){try{var _t=q&&q.require&&q.require("util").types;return _t||ht&&ht.binding&&ht.binding("util")}catch(It){}}();d.exports=gt}),yt=at&&at.isTypedArray,te=yt?he(yt):Yt,Me=Object.prototype.hasOwnProperty,_e=function(d,L){var j=Lt(d),q=!j&&Pt(d),ht=!j&&!q&&G(d),gt=!j&&!q&&!ht&&te(d),_t=j||q||ht||gt,It=_t?bi(d.length,String):[],Ut=It.length;for(var Jt in d)!L&&!Me.call(d,Jt)||_t&&(Jt=="length"||ht&&(Jt=="offset"||Jt=="parent")||gt&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||ot(Jt,Ut))||It.push(Jt);return It},tr=Object.prototype,sr=function(d){var L=d&&d.constructor;return d===(typeof L=="function"&&L.prototype||tr)},ge=function(d,L){return function(j){return d(L(j))}},Fe=ge(Object.keys,Object),qe=Object.prototype.hasOwnProperty,_r=function(d){if(!sr(d))return Fe(d);var L=[];for(var j in Object(d))qe.call(d,j)&&j!="constructor"&&L.push(j);return L},Er=function(d){return d!=null&&Bt(d.length)&&!nr(d)},ye=function(d){return Er(d)?_e(d):_r(d)},Ft=function(d,L){return d&&Gn(L,ye(L),d)},ne=function(d){var L=[];if(d!=null)for(var j in Object(d))L.push(j);return L},Pe=Object.prototype.hasOwnProperty,Ce=function(d){if(!be(d))return ne(d);var L=sr(d),j=[];for(var q in d)(q!="constructor"||!L&&Pe.call(d,q))&&j.push(q);return j},Ue=function(d){return Er(d)?_e(d,!0):Ce(d)},Xe=function(d,L){return d&&Gn(L,Ue(L),d)},Wr=g(function(d,L){var j=L&&!L.nodeType&&L,q=j&&d&&!d.nodeType&&d,ht=q&&q.exports===j?pt.Buffer:void 0,gt=ht?ht.allocUnsafe:void 0;d.exports=function(_t,It){if(It)return _t.slice();var Ut=_t.length,Jt=gt?gt(Ut):new _t.constructor(Ut);return _t.copy(Jt),Jt}}),$r=function(d,L){var j=-1,q=d.length;for(L||(L=Array(q));++j<q;)L[j]=d[j];return L},mn=function(d,L){for(var j=-1,q=d==null?0:d.length,ht=0,gt=[];++j<q;){var _t=d[j];L(_t,j,d)&&(gt[ht++]=_t)}return gt},Nn=function(){return[]},kn=Object.prototype.propertyIsEnumerable,Jn=Object.getOwnPropertySymbols,ri=Jn?function(d){return d==null?[]:(d=Object(d),mn(Jn(d),function(L){return kn.call(d,L)}))}:Nn,Ri=function(d,L){return Gn(d,ri(d),L)},di=function(d,L){for(var j=-1,q=L.length,ht=d.length;++j<q;)d[ht+j]=L[j];return d},Ki=ge(Object.getPrototypeOf,Object),yo=Object.getOwnPropertySymbols?function(d){for(var L=[];d;)di(L,ri(d)),d=Ki(d);return L}:Nn,Ea=function(d,L){return Gn(d,yo(d),L)},ta=function(d,L,j){var q=L(d);return Lt(d)?q:di(q,j(d))},mo=function(d){return ta(d,ye,ri)},Na=function(d){return ta(d,Ue,yo)},To=Ot(pt,"DataView"),vi=Ot(pt,"Promise"),xa=Ot(pt,"Set"),Vo=Ot(pt,"WeakMap"),zi=$t(To),ao=$t(ct),jo=$t(vi),ps=$t(xa),Io=$t(Vo),Ja=Nt;(To&&Ja(new To(new ArrayBuffer(1)))!="[object DataView]"||ct&&Ja(new ct)!="[object Map]"||vi&&Ja(vi.resolve())!="[object Promise]"||xa&&Ja(new xa)!="[object Set]"||Vo&&Ja(new Vo)!="[object WeakMap]")&&(Ja=function(d){var L=Nt(d),j=L=="[object Object]"?d.constructor:void 0,q=j?$t(j):"";if(q)switch(q){case zi:return"[object DataView]";case ao:return"[object Map]";case jo:return"[object Promise]";case ps:return"[object Set]";case Io:return"[object WeakMap]"}return L});var Pn=Ja,$s=Object.prototype.hasOwnProperty,na=function(d){var L=d.length,j=new d.constructor(L);return L&&typeof d[0]=="string"&&$s.call(d,"index")&&(j.index=d.index,j.input=d.input),j},oo=pt.Uint8Array,Xa=function(d){var L=new d.constructor(d.byteLength);return new oo(L).set(new oo(d)),L},qo=function(d,L){var j=L?Xa(d.buffer):d.buffer;return new d.constructor(j,d.byteOffset,d.byteLength)},On=/\w*$/,bo=function(d){var L=new d.constructor(d.source,On.exec(d));return L.lastIndex=d.lastIndex,L},gs=ft?ft.prototype:void 0,ts=gs?gs.valueOf:void 0,es=function(d){return ts?Object(ts.call(d)):{}},Wn=function(d,L){var j=L?Xa(d.buffer):d.buffer;return new d.constructor(j,d.byteOffset,d.length)},so=function(d,L,j){var q=d.constructor;switch(L){case"[object ArrayBuffer]":return Xa(d);case"[object Boolean]":case"[object Date]":return new q(+d);case"[object DataView]":return qo(d,j);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wn(d,j);case"[object Map]":return new q;case"[object Number]":case"[object String]":return new q(d);case"[object RegExp]":return bo(d);case"[object Set]":return new q;case"[object Symbol]":return es(d)}},ia=Object.create,Bi=function(){function d(){}return function(L){if(!be(L))return{};if(ia)return ia(L);d.prototype=L;var j=new d;return d.prototype=void 0,j}}(),rs=function(d){return typeof d.constructor!="function"||sr(d)?{}:Bi(Ki(d))},Po=function(d){return zn(d)&&Pn(d)=="[object Map]"},ga=at&&at.isMap,ys=ga?he(ga):Po,Qs=function(d){return zn(d)&&Pn(d)=="[object Set]"},ms=at&&at.isSet,Eo=ms?he(ms):Qs,Ai={};Ai["[object Arguments]"]=Ai["[object Array]"]=Ai["[object ArrayBuffer]"]=Ai["[object DataView]"]=Ai["[object Boolean]"]=Ai["[object Date]"]=Ai["[object Float32Array]"]=Ai["[object Float64Array]"]=Ai["[object Int8Array]"]=Ai["[object Int16Array]"]=Ai["[object Int32Array]"]=Ai["[object Map]"]=Ai["[object Number]"]=Ai["[object Object]"]=Ai["[object RegExp]"]=Ai["[object Set]"]=Ai["[object String]"]=Ai["[object Symbol]"]=Ai["[object Uint8Array]"]=Ai["[object Uint8ClampedArray]"]=Ai["[object Uint16Array]"]=Ai["[object Uint32Array]"]=!0,Ai["[object Error]"]=Ai["[object Function]"]=Ai["[object WeakMap]"]=!1;var Ya=function d(L,j,q,ht,gt,_t){var It,Ut=1&j,Jt=2&j,ue=4&j;if(q&&(It=gt?q(L,ht,gt,_t):q(L)),It!==void 0)return It;if(!be(L))return L;var ae=Lt(L);if(ae){if(It=na(L),!Ut)return $r(L,It)}else{var Ne=Pn(L),er=Ne=="[object Function]"||Ne=="[object GeneratorFunction]";if(G(L))return Wr(L,Ut);if(Ne=="[object Object]"||Ne=="[object Arguments]"||er&&!gt){if(It=Jt||er?{}:rs(L),!Ut)return Jt?Ea(L,Xe(It,L)):Ri(L,Ft(It,L))}else{if(!Ai[Ne])return gt?L:{};It=so(L,Ne,Ut)}}_t||(_t=new vn);var Pr=_t.get(L);if(Pr)return Pr;_t.set(L,It),Eo(L)?L.forEach(function(hr){It.add(d(hr,j,q,hr,L,_t))}):ys(L)&&L.forEach(function(hr,fr){It.set(fr,d(hr,j,q,fr,L,_t))});var ur=ae?void 0:(ue?Jt?Na:mo:Jt?Ue:ye)(L);return ln(ur||L,function(hr,fr){ur&&(hr=L[fr=hr]),Cn(It,fr,d(hr,j,q,fr,L,_t))}),It},bs=function(d){return Ya(d,4)},Ha=function(d){return function(){return d}},Ns=function(d){return function(L,j,q){for(var ht=-1,gt=Object(L),_t=q(L),It=_t.length;It--;){var Ut=_t[d?It:++ht];if(j(gt[Ut],Ut,gt)===!1)break}return L}}(),La=function(d,L){return d&&Ns(d,L,ye)},ya=function(d,L){return function(j,q){if(j==null)return j;if(!Er(j))return d(j,q);for(var ht=j.length,gt=L?ht:-1,_t=Object(j);(L?gt--:++gt<ht)&&q(_t[gt],gt,_t)!==!1;);return j}}(La),Za=function(d){return d},xo=function(d){return typeof d=="function"?d:Za},Ka=function(d,L){return(Lt(d)?ln:ya)(d,xo(L))},Ga=Ka,Js=function(d,L){var j=[];return ya(d,function(q,ht,gt){L(q,ht,gt)&&j.push(q)}),j},ka=function(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},$a=function(d){return this.__data__.has(d)};function wo(d){var L=-1,j=d==null?0:d.length;for(this.__data__=new hn;++L<j;)this.add(d[L])}wo.prototype.add=wo.prototype.push=ka,wo.prototype.has=$a;var qa=wo,Xo=function(d,L){for(var j=-1,q=d==null?0:d.length;++j<q;)if(L(d[j],j,d))return!0;return!1},fi=function(d,L){return d.has(L)},ma=function(d,L,j,q,ht,gt){var _t=1&j,It=d.length,Ut=L.length;if(It!=Ut&&!(_t&&Ut>It))return!1;var Jt=gt.get(d),ue=gt.get(L);if(Jt&&ue)return Jt==L&&ue==d;var ae=-1,Ne=!0,er=2&j?new qa:void 0;for(gt.set(d,L),gt.set(L,d);++ae<It;){var Pr=d[ae],ur=L[ae];if(q)var hr=_t?q(ur,Pr,ae,L,d,gt):q(Pr,ur,ae,d,L,gt);if(hr!==void 0){if(hr)continue;Ne=!1;break}if(er){if(!Xo(L,function(fr,Xr){if(!fi(er,Xr)&&(Pr===fr||ht(Pr,fr,j,q,gt)))return er.push(Xr)})){Ne=!1;break}}else if(Pr!==ur&&!ht(Pr,ur,j,q,gt)){Ne=!1;break}}return gt.delete(d),gt.delete(L),Ne},to=function(d){var L=-1,j=Array(d.size);return d.forEach(function(q,ht){j[++L]=[ht,q]}),j},ba=function(d){var L=-1,j=Array(d.size);return d.forEach(function(q){j[++L]=q}),j},Mi=ft?ft.prototype:void 0,ca=Mi?Mi.valueOf:void 0,Es=function(d,L,j,q,ht,gt,_t){switch(j){case"[object DataView]":if(d.byteLength!=L.byteLength||d.byteOffset!=L.byteOffset)return!1;d=d.buffer,L=L.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=L.byteLength||!gt(new oo(d),new oo(L)));case"[object Boolean]":case"[object Date]":case"[object Number]":return w(+d,+L);case"[object Error]":return d.name==L.name&&d.message==L.message;case"[object RegExp]":case"[object String]":return d==L+"";case"[object Map]":var It=to;case"[object Set]":var Ut=1&q;if(It||(It=ba),d.size!=L.size&&!Ut)return!1;var Jt=_t.get(d);if(Jt)return Jt==L;q|=2,_t.set(d,L);var ue=ma(It(d),It(L),q,ht,gt,_t);return _t.delete(d),ue;case"[object Symbol]":if(ca)return ca.call(d)==ca.call(L)}return!1},aa=Object.prototype.hasOwnProperty,uo=function(d,L,j,q,ht,gt){var _t=1&j,It=mo(d),Ut=It.length;if(Ut!=mo(L).length&&!_t)return!1;for(var Jt=Ut;Jt--;){var ue=It[Jt];if(!(_t?ue in L:aa.call(L,ue)))return!1}var ae=gt.get(d),Ne=gt.get(L);if(ae&&Ne)return ae==L&&Ne==d;var er=!0;gt.set(d,L),gt.set(L,d);for(var Pr=_t;++Jt<Ut;){var ur=d[ue=It[Jt]],hr=L[ue];if(q)var fr=_t?q(hr,ur,ue,L,d,gt):q(ur,hr,ue,d,L,gt);if(!(fr===void 0?ur===hr||ht(ur,hr,j,q,gt):fr)){er=!1;break}Pr||(Pr=ue=="constructor")}if(er&&!Pr){var Xr=d.constructor,fn=L.constructor;Xr==fn||!("constructor"in d)||!("constructor"in L)||typeof Xr=="function"&&Xr instanceof Xr&&typeof fn=="function"&&fn instanceof fn||(er=!1)}return gt.delete(d),gt.delete(L),er},eo=Object.prototype.hasOwnProperty,fo=function(d,L,j,q,ht,gt){var _t=Lt(d),It=Lt(L),Ut=_t?"[object Array]":Pn(d),Jt=It?"[object Array]":Pn(L),ue=(Ut=Ut=="[object Arguments]"?"[object Object]":Ut)=="[object Object]",ae=(Jt=Jt=="[object Arguments]"?"[object Object]":Jt)=="[object Object]",Ne=Ut==Jt;if(Ne&&G(d)){if(!G(L))return!1;_t=!0,ue=!1}if(Ne&&!ue)return gt||(gt=new vn),_t||te(d)?ma(d,L,j,q,ht,gt):Es(d,L,Ut,j,q,ht,gt);if(!(1&j)){var er=ue&&eo.call(d,"__wrapped__"),Pr=ae&&eo.call(L,"__wrapped__");if(er||Pr){var ur=er?d.value():d,hr=Pr?L.value():L;return gt||(gt=new vn),ht(ur,hr,j,q,gt)}}return!!Ne&&(gt||(gt=new vn),uo(d,L,j,q,ht,gt))},qs=function d(L,j,q,ht,gt){return L===j||(L==null||j==null||!zn(L)&&!zn(j)?L!=L&&j!=j:fo(L,j,q,ht,d,gt))},Yo=function(d,L,j,q){var ht=j.length,gt=ht,_t=!q;if(d==null)return!gt;for(d=Object(d);ht--;){var It=j[ht];if(_t&&It[2]?It[1]!==d[It[0]]:!(It[0]in d))return!1}for(;++ht<gt;){var Ut=(It=j[ht])[0],Jt=d[Ut],ue=It[1];if(_t&&It[2]){if(Jt===void 0&&!(Ut in d))return!1}else{var ae=new vn;if(q)var Ne=q(Jt,ue,Ut,d,L,ae);if(!(Ne===void 0?qs(ue,Jt,3,q,ae):Ne))return!1}}return!0},Oo=function(d){return d==d&&!be(d)},ns=function(d){for(var L=ye(d),j=L.length;j--;){var q=L[j],ht=d[q];L[j]=[q,ht,Oo(ht)]}return L},Wu=function(d,L){return function(j){return j!=null&&j[d]===L&&(L!==void 0||d in Object(j))}},yu=function(d){var L=ns(d);return L.length==1&&L[0][2]?Wu(L[0][0],L[0][1]):function(j){return j===d||Yo(j,d,L)}},xs=function(d){return typeof d=="symbol"||zn(d)&&Nt(d)=="[object Symbol]"},jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,se=/^\w*$/,rr=function(d,L){if(Lt(d))return!1;var j=typeof d;return!(j!="number"&&j!="symbol"&&j!="boolean"&&d!=null&&!xs(d))||se.test(d)||!jt.test(d)||L!=null&&d in Object(L)};function cr(d,L){if(typeof d!="function"||L!=null&&typeof L!="function")throw new TypeError("Expected a function");var j=function(){var q=arguments,ht=L?L.apply(this,q):q[0],gt=j.cache;if(gt.has(ht))return gt.get(ht);var _t=d.apply(this,q);return j.cache=gt.set(ht,_t)||gt,_t};return j.cache=new(cr.Cache||hn),j}cr.Cache=hn;var Gr=cr,cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/\\(\\)?/g,Zn=function(d){var L=Gr(d,function(q){return j.size===500&&j.clear(),q}),j=L.cache;return L}(function(d){var L=[];return d.charCodeAt(0)===46&&L.push(""),d.replace(cn,function(j,q,ht,gt){L.push(ht?gt.replace(xn,"$1"):q||j)}),L}),Wi=function(d,L){for(var j=-1,q=d==null?0:d.length,ht=Array(q);++j<q;)ht[j]=L(d[j],j,d);return ht},Ra=ft?ft.prototype:void 0,Fa=Ra?Ra.toString:void 0,Ho=function d(L){if(typeof L=="string")return L;if(Lt(L))return Wi(L,d)+"";if(xs(L))return Fa?Fa.call(L):"";var j=L+"";return j=="0"&&1/L==-1/0?"-0":j},xf=function(d){return d==null?"":Ho(d)},wa=function(d,L){return Lt(d)?d:rr(d,L)?[d]:Zn(xf(d))},ro=function(d){if(typeof d=="string"||xs(d))return d;var L=d+"";return L=="0"&&1/d==-1/0?"-0":L},mu=function(d,L){for(var j=0,q=(L=wa(L,d)).length;d!=null&&j<q;)d=d[ro(L[j++])];return j&&j==q?d:void 0},ic=function(d,L,j){var q=d==null?void 0:mu(d,L);return q===void 0?j:q},Yc=function(d,L){return d!=null&&L in Object(d)},wf=function(d,L,j){for(var q=-1,ht=(L=wa(L,d)).length,gt=!1;++q<ht;){var _t=ro(L[q]);if(!(gt=d!=null&&j(d,_t)))break;d=d[_t]}return gt||++q!=ht?gt:!!(ht=d==null?0:d.length)&&Bt(ht)&&ot(_t,ht)&&(Lt(d)||Pt(d))},Sf=function(d,L){return d!=null&&wf(d,L,Yc)},_f=function(d,L){return rr(d)&&Oo(L)?Wu(ro(d),L):function(j){var q=ic(j,d);return q===void 0&&q===L?Sf(j,d):qs(L,q,3)}},tu=function(d){return function(L){return L==null?void 0:L[d]}},bu=function(d){return function(L){return mu(L,d)}},eu=function(d){return rr(d)?tu(ro(d)):bu(d)},co=function(d){return typeof d=="function"?d:d==null?Za:typeof d=="object"?Lt(d)?_f(d[0],d[1]):yu(d):eu(d)},Hc=function(d,L){return(Lt(d)?mn:Js)(d,co(L))},Mf=Object.prototype.hasOwnProperty,zl=function(d,L){return d!=null&&Mf.call(d,L)},Ls=function(d,L){return d!=null&&wf(d,L,zl)},Wl=Object.prototype.hasOwnProperty,Vl=function(d){if(d==null)return!0;if(Er(d)&&(Lt(d)||typeof d=="string"||typeof d.splice=="function"||G(d)||te(d)||Pt(d)))return!d.length;var L=Pn(d);if(L=="[object Map]"||L=="[object Set]")return!d.size;if(sr(d))return!_r(d).length;for(var j in d)if(Wl.call(d,j))return!1;return!0},Eu=function(d){return d===void 0},Xn=function(d,L){var j=-1,q=Er(d)?Array(d.length):[];return ya(d,function(ht,gt,_t){q[++j]=L(ht,gt,_t)}),q},Cf=function(d,L){return(Lt(d)?Wi:Xn)(d,co(L))},Af=function(d,L,j,q){var ht=-1,gt=d==null?0:d.length;for(q&&gt&&(j=d[++ht]);++ht<gt;)j=L(j,d[ht],ht,d);return j},Vu=function(d,L,j,q,ht){return ht(d,function(gt,_t,It){j=q?(q=!1,gt):L(j,gt,_t,It)}),j},ac=function(d,L,j){var q=Lt(d)?Af:Vu,ht=arguments.length<3;return q(d,co(L),j,ht,ya)},Tf=function(d){return typeof d=="string"||!Lt(d)&&zn(d)&&Nt(d)=="[object String]"},oc=tu("length"),If=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),sc=function(d){return If.test(d)},Zc="[\\ud800-\\udfff]",Pf="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kc="\\ud83c[\\udffb-\\udfff]",jl="[^\\ud800-\\udfff]",ks="(?:\\ud83c[\\udde6-\\uddff]){2}",$c="[\\ud800-\\udbff][\\udc00-\\udfff]",ju="(?:"+Pf+"|"+Kc+")?",Xu="[\\ufe0e\\ufe0f]?"+ju+("(?:\\u200d(?:"+[jl,ks,$c].join("|")+")[\\ufe0e\\ufe0f]?"+ju+")*"),Qc="(?:"+[jl+Pf+"?",Pf,ks,$c,Zc].join("|")+")",Yu=RegExp(Kc+"(?="+Kc+")|"+Qc+Xu,"g"),Do=function(d){for(var L=Yu.lastIndex=0;Yu.test(d);)++L;return L},xu=function(d){return sc(d)?Do(d):oc(d)},Jc=function(d){if(d==null)return 0;if(Er(d))return Tf(d)?xu(d):d.length;var L=Pn(d);return L=="[object Map]"||L=="[object Set]"?d.size:_r(d).length},Xl=function(d,L,j){var q=Lt(d),ht=q||G(d)||te(d);if(L=co(L),j==null){var gt=d&&d.constructor;j=ht?q?new gt:[]:be(d)&&nr(gt)?Bi(Ki(d)):{}}return(ht?ln:La)(d,function(_t,It,Ut){return L(j,_t,It,Ut)}),j},qc=ft?ft.isConcatSpreadable:void 0,Yl=function(d){return Lt(d)||Pt(d)||!!(qc&&d&&d[qc])},Of=function d(L,j,q,ht,gt){var _t=-1,It=L.length;for(q||(q=Yl),gt||(gt=[]);++_t<It;){var Ut=L[_t];j>0&&q(Ut)?j>1?d(Ut,j-1,q,ht,gt):di(gt,Ut):ht||(gt[gt.length]=Ut)}return gt},Hl=function(d,L,j){switch(j.length){case 0:return d.call(L);case 1:return d.call(L,j[0]);case 2:return d.call(L,j[0],j[1]);case 3:return d.call(L,j[0],j[1],j[2])}return d.apply(L,j)},tl=Math.max,ru=function(d,L,j){return L=tl(L===void 0?d.length-1:L,0),function(){for(var q=arguments,ht=-1,gt=tl(q.length-L,0),_t=Array(gt);++ht<gt;)_t[ht]=q[L+ht];ht=-1;for(var It=Array(L+1);++ht<L;)It[ht]=q[ht];return It[L]=j(_t),Hl(d,this,It)}},Aa=pn?function(d,L){return pn(d,"toString",{configurable:!0,enumerable:!1,value:Ha(L),writable:!0})}:Za,Df=Date.now,nu=function(d){var L=0,j=0;return function(){var q=Df(),ht=16-(q-j);if(j=q,ht>0){if(++L>=800)return arguments[0]}else L=0;return d.apply(void 0,arguments)}}(Aa),Zo=function(d,L){return nu(ru(d,L,Za),d+"")},el=function(d,L,j,q){for(var ht=d.length,gt=j+(q?1:-1);q?gt--:++gt<ht;)if(L(d[gt],gt,d))return gt;return-1},rl=function(d){return d!=d},Zl=function(d,L,j){for(var q=j-1,ht=d.length;++q<ht;)if(d[q]===L)return q;return-1},Kl=function(d,L,j){return L==L?Zl(d,L,j):el(d,rl,j)},$l=function(d,L){return!!(d!=null&&d.length)&&Kl(d,L,0)>-1},nl=function(d,L,j){for(var q=-1,ht=d==null?0:d.length;++q<ht;)if(j(L,d[q]))return!0;return!1},Ko=function(){},il=xa&&1/ba(new xa([,-0]))[1]==1/0?function(d){return new xa(d)}:Ko,al=function(d,L,j){var q=-1,ht=$l,gt=d.length,_t=!0,It=[],Ut=It;if(j)_t=!1,ht=nl;else if(gt>=200){var Jt=L?null:il(d);if(Jt)return ba(Jt);_t=!1,ht=fi,Ut=new qa}else Ut=L?[]:It;t:for(;++q<gt;){var ue=d[q],ae=L?L(ue):ue;if(ue=j||ue!==0?ue:0,_t&&ae==ae){for(var Ne=Ut.length;Ne--;)if(Ut[Ne]===ae)continue t;L&&Ut.push(ae),It.push(ue)}else ht(Ut,ae,j)||(Ut!==It&&Ut.push(ae),It.push(ue))}return It},ol=function(d){return zn(d)&&Er(d)},Ql=Zo(function(d){return al(Of(d,1,ol,!0))}),sl=function(d,L){return Wi(L,function(j){return d[j]})},Ta,Nh=function(d){return d==null?[]:sl(d,ye(d))};try{Ta={clone:bs,constant:Ha,each:Ga,filter:Hc,has:Ls,isArray:Lt,isEmpty:Vl,isFunction:nr,isUndefined:Eu,keys:ye,map:Cf,reduce:ac,size:Jc,transform:Xl,union:Ql,values:Nh}}catch(d){}Ta||(Ta=window._);var bn=Ta,Nf=Ei;function Ei(d){this._isDirected=!bn.has(d,"directed")||d.directed,this._isMultigraph=!!bn.has(d,"multigraph")&&d.multigraph,this._isCompound=!!bn.has(d,"compound")&&d.compound,this._label=void 0,this._defaultNodeLabelFn=bn.constant(void 0),this._defaultEdgeLabelFn=bn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function ul(d,L){d[L]?d[L]++:d[L]=1}function Jl(d,L){--d[L]||delete d[L]}function Hu(d,L,j,q){var ht=""+L,gt=""+j;if(!d&&ht>gt){var _t=ht;ht=gt,gt=_t}return ht+""+gt+""+(bn.isUndefined(q)?"\0":q)}function ql(d,L,j,q){var ht=""+L,gt=""+j;if(!d&&ht>gt){var _t=ht;ht=gt,gt=_t}var It={v:ht,w:gt};return q&&(It.name=q),It}function uc(d,L){return Hu(d,L.v,L.w,L.name)}Ei.prototype._nodeCount=0,Ei.prototype._edgeCount=0,Ei.prototype.isDirected=function(){return this._isDirected},Ei.prototype.isMultigraph=function(){return this._isMultigraph},Ei.prototype.isCompound=function(){return this._isCompound},Ei.prototype.setGraph=function(d){return this._label=d,this},Ei.prototype.graph=function(){return this._label},Ei.prototype.setDefaultNodeLabel=function(d){return bn.isFunction(d)||(d=bn.constant(d)),this._defaultNodeLabelFn=d,this},Ei.prototype.nodeCount=function(){return this._nodeCount},Ei.prototype.nodes=function(){return bn.keys(this._nodes)},Ei.prototype.sources=function(){var d=this;return bn.filter(this.nodes(),function(L){return bn.isEmpty(d._in[L])})},Ei.prototype.sinks=function(){var d=this;return bn.filter(this.nodes(),function(L){return bn.isEmpty(d._out[L])})},Ei.prototype.setNodes=function(d,L){var j=arguments,q=this;return bn.each(d,function(ht){j.length>1?q.setNode(ht,L):q.setNode(ht)}),this},Ei.prototype.setNode=function(d,L){return bn.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=L),this):(this._nodes[d]=arguments.length>1?L:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]="\0",this._children[d]={},this._children["\0"][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},Ei.prototype.node=function(d){return this._nodes[d]},Ei.prototype.hasNode=function(d){return bn.has(this._nodes,d)},Ei.prototype.removeNode=function(d){var L=this;if(bn.has(this._nodes,d)){var j=function(q){L.removeEdge(L._edgeObjs[q])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],bn.each(this.children(d),function(q){L.setParent(q)}),delete this._children[d]),bn.each(bn.keys(this._in[d]),j),delete this._in[d],delete this._preds[d],bn.each(bn.keys(this._out[d]),j),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},Ei.prototype.setParent=function(d,L){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(bn.isUndefined(L))L="\0";else{for(var j=L+="";!bn.isUndefined(j);j=this.parent(j))if(j===d)throw new Error("Setting "+L+" as parent of "+d+" would create a cycle");this.setNode(L)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=L,this._children[L][d]=!0,this},Ei.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},Ei.prototype.parent=function(d){if(this._isCompound){var L=this._parent[d];if(L!=="\0")return L}},Ei.prototype.children=function(d){if(bn.isUndefined(d)&&(d="\0"),this._isCompound){var L=this._children[d];if(L)return bn.keys(L)}else{if(d==="\0")return this.nodes();if(this.hasNode(d))return[]}},Ei.prototype.predecessors=function(d){var L=this._preds[d];if(L)return bn.keys(L)},Ei.prototype.successors=function(d){var L=this._sucs[d];if(L)return bn.keys(L)},Ei.prototype.neighbors=function(d){var L=this.predecessors(d);if(L)return bn.union(L,this.successors(d))},Ei.prototype.isLeaf=function(d){return(this.isDirected()?this.successors(d):this.neighbors(d)).length===0},Ei.prototype.filterNodes=function(d){var L=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});L.setGraph(this.graph());var j=this;bn.each(this._nodes,function(gt,_t){d(_t)&&L.setNode(_t,gt)}),bn.each(this._edgeObjs,function(gt){L.hasNode(gt.v)&&L.hasNode(gt.w)&&L.setEdge(gt,j.edge(gt))});var q={};function ht(gt){var _t=j.parent(gt);return _t===void 0||L.hasNode(_t)?(q[gt]=_t,_t):_t in q?q[_t]:ht(_t)}return this._isCompound&&bn.each(L.nodes(),function(gt){L.setParent(gt,ht(gt))}),L},Ei.prototype.setDefaultEdgeLabel=function(d){return bn.isFunction(d)||(d=bn.constant(d)),this._defaultEdgeLabelFn=d,this},Ei.prototype.edgeCount=function(){return this._edgeCount},Ei.prototype.edges=function(){return bn.values(this._edgeObjs)},Ei.prototype.setPath=function(d,L){var j=this,q=arguments;return bn.reduce(d,function(ht,gt){return q.length>1?j.setEdge(ht,gt,L):j.setEdge(ht,gt),gt}),this},Ei.prototype.setEdge=function(){var d,L,j,q,ht=!1,gt=arguments[0];typeof gt=="object"&&gt!==null&&"v"in gt?(d=gt.v,L=gt.w,j=gt.name,arguments.length===2&&(q=arguments[1],ht=!0)):(d=gt,L=arguments[1],j=arguments[3],arguments.length>2&&(q=arguments[2],ht=!0)),d=""+d,L=""+L,bn.isUndefined(j)||(j=""+j);var _t=Hu(this._isDirected,d,L,j);if(bn.has(this._edgeLabels,_t))return ht&&(this._edgeLabels[_t]=q),this;if(!bn.isUndefined(j)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(L),this._edgeLabels[_t]=ht?q:this._defaultEdgeLabelFn(d,L,j);var It=ql(this._isDirected,d,L,j);return d=It.v,L=It.w,Object.freeze(It),this._edgeObjs[_t]=It,ul(this._preds[L],d),ul(this._sucs[d],L),this._in[L][_t]=It,this._out[d][_t]=It,this._edgeCount++,this},Ei.prototype.edge=function(d,L,j){var q=arguments.length===1?uc(this._isDirected,arguments[0]):Hu(this._isDirected,d,L,j);return this._edgeLabels[q]},Ei.prototype.hasEdge=function(d,L,j){var q=arguments.length===1?uc(this._isDirected,arguments[0]):Hu(this._isDirected,d,L,j);return bn.has(this._edgeLabels,q)},Ei.prototype.removeEdge=function(d,L,j){var q=arguments.length===1?uc(this._isDirected,arguments[0]):Hu(this._isDirected,d,L,j),ht=this._edgeObjs[q];return ht&&(d=ht.v,L=ht.w,delete this._edgeLabels[q],delete this._edgeObjs[q],Jl(this._preds[L],d),Jl(this._sucs[d],L),delete this._in[L][q],delete this._out[d][q],this._edgeCount--),this},Ei.prototype.inEdges=function(d,L){var j=this._in[d];if(j){var q=bn.values(j);return L?bn.filter(q,function(ht){return ht.v===L}):q}},Ei.prototype.outEdges=function(d,L){var j=this._out[d];if(j){var q=bn.values(j);return L?bn.filter(q,function(ht){return ht.w===L}):q}},Ei.prototype.nodeEdges=function(d,L){var j=this.inEdges(d,L);if(j)return j.concat(this.outEdges(d,L))};var Lh={Graph:Nf,version:"2.1.8"},th={write:function(d){var L={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:kh(d),edges:ws(d)};return bn.isUndefined(d.graph())||(L.value=bn.clone(d.graph())),L},read:function(d){var L=new Nf(d.options).setGraph(d.value);return bn.each(d.nodes,function(j){L.setNode(j.v,j.value),j.parent&&L.setParent(j.v,j.parent)}),bn.each(d.edges,function(j){L.setEdge({v:j.v,w:j.w,name:j.name},j.value)}),L}};function kh(d){return bn.map(d.nodes(),function(L){var j=d.node(L),q=d.parent(L),ht={v:L};return bn.isUndefined(j)||(ht.value=j),bn.isUndefined(q)||(ht.parent=q),ht})}function ws(d){return bn.map(d.edges(),function(L){var j=d.edge(L),q={v:L.v,w:L.w};return bn.isUndefined(L.name)||(q.name=L.name),bn.isUndefined(j)||(q.value=j),q})}var Rh=function(d){var L,j={},q=[];function ht(gt){bn.has(j,gt)||(j[gt]=!0,L.push(gt),bn.each(d.successors(gt),ht),bn.each(d.predecessors(gt),ht))}return bn.each(d.nodes(),function(gt){L=[],ht(gt),L.length&&q.push(L)}),q},fc=ea;function ea(){this._arr=[],this._keyIndices={}}ea.prototype.size=function(){return this._arr.length},ea.prototype.keys=function(){return this._arr.map(function(d){return d.key})},ea.prototype.has=function(d){return bn.has(this._keyIndices,d)},ea.prototype.priority=function(d){var L=this._keyIndices[d];if(L!==void 0)return this._arr[L].priority},ea.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ea.prototype.add=function(d,L){var j=this._keyIndices;if(d=String(d),!bn.has(j,d)){var q=this._arr,ht=q.length;return j[d]=ht,q.push({key:d,priority:L}),this._decrease(ht),!0}return!1},ea.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var d=this._arr.pop();return delete this._keyIndices[d.key],this._heapify(0),d.key},ea.prototype.decrease=function(d,L){var j=this._keyIndices[d];if(L>this._arr[j].priority)throw new Error("New priority is greater than current priority. Key: "+d+" Old: "+this._arr[j].priority+" New: "+L);this._arr[j].priority=L,this._decrease(j)},ea.prototype._heapify=function(d){var L=this._arr,j=2*d,q=j+1,ht=d;j<L.length&&(ht=L[j].priority<L[ht].priority?j:ht,q<L.length&&(ht=L[q].priority<L[ht].priority?q:ht),ht!==d&&(this._swap(d,ht),this._heapify(ht)))},ea.prototype._decrease=function(d){for(var L,j=this._arr,q=j[d].priority;d!==0&&!(j[L=d>>1].priority<q);)this._swap(d,L),d=L},ea.prototype._swap=function(d,L){var j=this._arr,q=this._keyIndices,ht=j[d],gt=j[L];j[d]=gt,j[L]=ht,q[gt.key]=d,q[ht.key]=L};var cc=function(d,L,j,q){return function(ht,gt,_t,It){var Ut,Jt,ue={},ae=new fc,Ne=function(er){var Pr=er.v!==Ut?er.v:er.w,ur=ue[Pr],hr=_t(er),fr=Jt.distance+hr;if(hr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+er+" Weight: "+hr);fr<ur.distance&&(ur.distance=fr,ur.predecessor=Ut,ae.decrease(Pr,fr))};for(ht.nodes().forEach(function(er){var Pr=er===gt?0:Number.POSITIVE_INFINITY;ue[er]={distance:Pr},ae.add(er,Pr)});ae.size()>0&&(Ut=ae.removeMin(),(Jt=ue[Ut]).distance!==Number.POSITIVE_INFINITY);)It(Ut).forEach(Ne);return ue}(d,String(L),j||Ss,q||function(ht){return d.outEdges(ht)})},Ss=bn.constant(1),Lf=function(d,L,j){return bn.transform(d.nodes(),function(q,ht){q[ht]=cc(d,ht,L,j)},{})},eh=function(d){var L=0,j=[],q={},ht=[];function gt(_t){var It=q[_t]={onStack:!0,lowlink:L,index:L++};if(j.push(_t),d.successors(_t).forEach(function(ue){bn.has(q,ue)?q[ue].onStack&&(It.lowlink=Math.min(It.lowlink,q[ue].index)):(gt(ue),It.lowlink=Math.min(It.lowlink,q[ue].lowlink))}),It.lowlink===It.index){var Ut,Jt=[];do Ut=j.pop(),q[Ut].onStack=!1,Jt.push(Ut);while(_t!==Ut);ht.push(Jt)}}return d.nodes().forEach(function(_t){bn.has(q,_t)||gt(_t)}),ht},Bh=function(d){return bn.filter(eh(d),function(L){return L.length>1||L.length===1&&d.hasEdge(L[0],L[0])})},iu=function(d,L,j){return function(q,ht,gt){var _t={},It=q.nodes();return It.forEach(function(Ut){_t[Ut]={},_t[Ut][Ut]={distance:0},It.forEach(function(Jt){Ut!==Jt&&(_t[Ut][Jt]={distance:Number.POSITIVE_INFINITY})}),gt(Ut).forEach(function(Jt){var ue=Jt.v===Ut?Jt.w:Jt.v,ae=ht(Jt);_t[Ut][ue]={distance:ae,predecessor:Ut}})}),It.forEach(function(Ut){var Jt=_t[Ut];It.forEach(function(ue){var ae=_t[ue];It.forEach(function(Ne){var er=ae[Ut],Pr=Jt[Ne],ur=ae[Ne],hr=er.distance+Pr.distance;hr<ur.distance&&(ur.distance=hr,ur.predecessor=Pr.predecessor)})})}),_t}(d,L||fl,j||function(q){return d.outEdges(q)})},fl=bn.constant(1),is=Zu;function Zu(d){var L={},j={},q=[];if(bn.each(d.sinks(),function ht(gt){if(bn.has(j,gt))throw new lc;bn.has(L,gt)||(j[gt]=!0,L[gt]=!0,bn.each(d.predecessors(gt),ht),delete j[gt],q.push(gt))}),bn.size(L)!==d.nodeCount())throw new lc;return q}function lc(){}Zu.CycleException=lc,lc.prototype=new Error;var hc=function(d,L,j){bn.isArray(L)||(L=[L]);var q=(d.isDirected()?d.successors:d.neighbors).bind(d),ht=[],gt={};return bn.each(L,function(_t){if(!d.hasNode(_t))throw new Error("Graph does not have node: "+_t);_s(d,_t,j==="post",gt,q,ht)}),ht};function _s(d,L,j,q,ht,gt){bn.has(q,L)||(q[L]=!0,j||gt.push(L),bn.each(ht(L),function(_t){_s(d,_t,j,q,ht,gt)}),j&&gt.push(L))}var as,cl={Graph:Lh.Graph,json:th,alg:{components:Rh,dijkstra:cc,dijkstraAll:Lf,findCycles:Bh,floydWarshall:iu,isAcyclic:function(d){try{is(d)}catch(L){if(L instanceof is.CycleException)return!1;throw L}return!0},postorder:function(d,L){return hc(d,L,"post")},preorder:function(d,L){return hc(d,L,"pre")},prim:function(d,L){var j,q=new Nf,ht={},gt=new fc;function _t(Ut){var Jt=Ut.v===j?Ut.w:Ut.v,ue=gt.priority(Jt);if(ue!==void 0){var ae=L(Ut);ae<ue&&(ht[Jt]=j,gt.decrease(Jt,ae))}}if(d.nodeCount()===0)return q;bn.each(d.nodes(),function(Ut){gt.add(Ut,Number.POSITIVE_INFINITY),q.setNode(Ut)}),gt.decrease(d.nodes()[0],0);for(var It=!1;gt.size()>0;){if(j=gt.removeMin(),bn.has(ht,j))q.setEdge(j,ht[j]);else{if(It)throw new Error("Input graph is not connected: "+d);It=!0}d.nodeEdges(j).forEach(_t)}return q},tarjan:eh,topsort:is},version:Lh.version};try{as=cl}catch(d){}as||(as=window.graphlib);var So=as,dc=function(d){return Ya(d,5)},au=function(d,L,j){if(!be(j))return!1;var q=typeof L;return!!(q=="number"?Er(j)&&ot(L,j.length):q=="string"&&L in j)&&w(j[L],d)},ll=Object.prototype,rh=ll.hasOwnProperty,vc=Zo(function(d,L){d=Object(d);var j=-1,q=L.length,ht=q>2?L[2]:void 0;for(ht&&au(L[0],L[1],ht)&&(q=1);++j<q;)for(var gt=L[j],_t=Ue(gt),It=-1,Ut=_t.length;++It<Ut;){var Jt=_t[It],ue=d[Jt];(ue===void 0||w(ue,ll[Jt])&&!rh.call(d,Jt))&&(d[Jt]=gt[Jt])}return d}),kf=function(d){return function(L,j,q){var ht=Object(L);if(!Er(L)){var gt=co(j);L=ye(L),j=function(It){return gt(ht[It],It,ht)}}var _t=d(L,j,q);return _t>-1?ht[gt?L[_t]:_t]:void 0}},Gi=/^\s+|\s+$/g,Rs=/^[-+]0x[0-9a-f]+$/i,os=/^0b[01]+$/i,No=/^0o[0-7]+$/i,Bs=parseInt,wu=function(d){if(typeof d=="number")return d;if(xs(d))return NaN;if(be(d)){var L=typeof d.valueOf=="function"?d.valueOf():d;d=be(L)?L+"":L}if(typeof d!="string")return d===0?d:+d;d=d.replace(Gi,"");var j=os.test(d);return j||No.test(d)?Bs(d.slice(2),j?2:8):Rs.test(d)?NaN:+d},Gs=function(d){return d?(d=wu(d))===1/0||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0},Rf=function(d){var L=Gs(d),j=L%1;return L==L?j?L-j:L:0},ou=Math.max,Ku=kf(function(d,L,j){var q=d==null?0:d.length;if(!q)return-1;var ht=j==null?0:Rf(j);return ht<0&&(ht=ou(q+ht,0)),el(d,co(L),ht)}),Su=function(d){return d!=null&&d.length?Of(d,1):[]},ss=function(d,L){return d==null?d:Ns(d,xo(L),Ue)},hl=function(d){var L=d==null?0:d.length;return L?d[L-1]:void 0},Fs=function(d,L){var j={};return L=co(L),La(d,function(q,ht,gt){Bn(j,ht,L(q,ht,gt))}),j},an=function(d,L,j){for(var q=-1,ht=d.length;++q<ht;){var gt=d[q],_t=L(gt);if(_t!=null&&(It===void 0?_t==_t&&!xs(_t):j(_t,It)))var It=_t,Ut=gt}return Ut},Bf=function(d,L){return d>L},Gh=function(d){return d&&d.length?an(d,Za,Bf):void 0},Gf=function(d,L,j){(j!==void 0&&!w(d[L],j)||j===void 0&&!(L in d))&&Bn(d,L,j)},Fh=Function.prototype,Uh=Object.prototype,pc=Fh.toString,dl=Uh.hasOwnProperty,nh=pc.call(Object),Us=function(d){if(!zn(d)||Nt(d)!="[object Object]")return!1;var L=Ki(d);if(L===null)return!0;var j=dl.call(L,"constructor")&&L.constructor;return typeof j=="function"&&j instanceof j&&pc.call(j)==nh},_u=function(d,L){if((L!=="constructor"||typeof d[L]!="function")&&L!="__proto__")return d[L]},Mu=function(d){return Gn(d,Ue(d))},$u=function(d,L,j,q,ht,gt,_t){var It=_u(d,j),Ut=_u(L,j),Jt=_t.get(Ut);if(Jt)Gf(d,j,Jt);else{var ue=gt?gt(It,Ut,j+"",d,L,_t):void 0,ae=ue===void 0;if(ae){var Ne=Lt(Ut),er=!Ne&&G(Ut),Pr=!Ne&&!er&&te(Ut);ue=Ut,Ne||er||Pr?Lt(It)?ue=It:ol(It)?ue=$r(It):er?(ae=!1,ue=Wr(Ut,!0)):Pr?(ae=!1,ue=Wn(Ut,!0)):ue=[]:Us(Ut)||Pt(Ut)?(ue=It,Pt(It)?ue=Mu(It):be(It)&&!nr(It)||(ue=rs(Ut))):ae=!1}ae&&(_t.set(Ut,ue),ht(ue,Ut,q,gt,_t),_t.delete(Ut)),Gf(d,j,ue)}},Ms=function d(L,j,q,ht,gt){L!==j&&Ns(j,function(_t,It){if(gt||(gt=new vn),be(_t))$u(L,j,It,q,d,ht,gt);else{var Ut=ht?ht(_u(L,It),_t,It+"",L,j,gt):void 0;Ut===void 0&&(Ut=_t),Gf(L,It,Ut)}},Ue)},lo=function(d){return Zo(function(L,j){var q=-1,ht=j.length,gt=ht>1?j[ht-1]:void 0,_t=ht>2?j[2]:void 0;for(gt=d.length>3&&typeof gt=="function"?(ht--,gt):void 0,_t&&au(j[0],j[1],_t)&&(gt=ht<3?void 0:gt,ht=1),L=Object(L);++q<ht;){var It=j[q];It&&d(L,It,q,gt)}return L})}(function(d,L,j){Ms(d,L,j)}),ih=function(d,L){return d<L},Qu=function(d){return d&&d.length?an(d,Za,ih):void 0},ah=function(d,L){return d&&d.length?an(d,co(L),ih):void 0},Ju=function(){return pt.Date.now()},vl=function(d,L,j,q){if(!be(d))return d;for(var ht=-1,gt=(L=wa(L,d)).length,_t=gt-1,It=d;It!=null&&++ht<gt;){var Ut=ro(L[ht]),Jt=j;if(Ut==="__proto__"||Ut==="constructor"||Ut==="prototype")return d;if(ht!=_t){var ue=It[Ut];(Jt=q?q(ue,Ut,It):void 0)===void 0&&(Jt=be(ue)?ue:ot(L[ht+1])?[]:{})}Cn(It,Ut,Jt),It=It[Ut]}return d},pl=function(d,L,j){for(var q=-1,ht=L.length,gt={};++q<ht;){var _t=L[q],It=mu(d,_t);j(It,_t)&&vl(gt,wa(_t,d),It)}return gt},gl=function(d,L){return pl(d,L,function(j,q){return Sf(d,q)})},gc=function(d){return nu(ru(d,void 0,Su),d+"")}(function(d,L){return d==null?{}:gl(d,L)}),yc=Math.ceil,mc=Math.max,yl=function(d,L,j,q){for(var ht=-1,gt=mc(yc((L-d)/(j||1)),0),_t=Array(gt);gt--;)_t[q?gt:++ht]=d,d+=j;return _t},qu=function(d){return function(L,j,q){return q&&typeof q!="number"&&au(L,j,q)&&(j=q=void 0),L=Gs(L),j===void 0?(j=L,L=0):j=Gs(j),q=q===void 0?L<j?1:-1:Gs(q),yl(L,j,q,d)}}(),ml=function(d,L){var j=d.length;for(d.sort(L);j--;)d[j]=d[j].value;return d},Ff=function(d,L){if(d!==L){var j=d!==void 0,q=d===null,ht=d==d,gt=xs(d),_t=L!==void 0,It=L===null,Ut=L==L,Jt=xs(L);if(!It&&!Jt&&!gt&&d>L||gt&&_t&&Ut&&!It&&!Jt||q&&_t&&Ut||!j&&Ut||!ht)return 1;if(!q&&!gt&&!Jt&&d<L||Jt&&j&&ht&&!q&&!gt||It&&j&&ht||!_t&&ht||!Ut)return-1}return 0},oh=function(d,L,j){for(var q=-1,ht=d.criteria,gt=L.criteria,_t=ht.length,It=j.length;++q<_t;){var Ut=Ff(ht[q],gt[q]);if(Ut)return q>=It?Ut:Ut*(j[q]=="desc"?-1:1)}return d.index-L.index},tf=function(d,L,j){L=L.length?Wi(L,function(gt){return Lt(gt)?function(_t){return mu(_t,gt.length===1?gt[0]:gt)}:gt}):[Za];var q=-1;L=Wi(L,he(co));var ht=Xn(d,function(gt,_t,It){return{criteria:Wi(L,function(Ut){return Ut(gt)}),index:++q,value:gt}});return ml(ht,function(gt,_t){return oh(gt,_t,j)})},gi=Zo(function(d,L){if(d==null)return[];var j=L.length;return j>1&&au(d,L[0],L[1])?L=[]:j>2&&au(L[0],L[1],L[2])&&(L=[L[0]]),tf(d,Of(L,1),[])}),sh=0,bl=function(d){var L=++sh;return xf(d)+L},bc=function(d,L,j){for(var q=-1,ht=d.length,gt=L.length,_t={};++q<ht;){var It=q<gt?L[q]:void 0;j(_t,d[q],It)}return _t},ef,Ec=function(d,L){return bc(d||[],L||[],Cn)};try{ef={cloneDeep:dc,constant:Ha,defaults:vc,each:Ga,filter:Hc,find:Ku,flatten:Su,forEach:Ka,forIn:ss,has:Ls,isUndefined:Eu,last:hl,map:Cf,mapValues:Fs,max:Gh,merge:lo,min:Qu,minBy:ah,now:Ju,pick:gc,range:qu,reduce:ac,sortBy:gi,uniqueId:bl,values:Nh,zipObject:Ec}}catch(d){}ef||(ef=window._);var Ze=ef,$o=zs;function zs(){var d={};d._next=d._prev=d,this._sentinel=d}function rf(d){d._prev._next=d._next,d._next._prev=d._prev,delete d._next,delete d._prev}function El(d,L){if(d!=="_next"&&d!=="_prev")return L}zs.prototype.dequeue=function(){var d=this._sentinel,L=d._prev;if(L!==d)return rf(L),L},zs.prototype.enqueue=function(d){var L=this._sentinel;d._prev&&d._next&&rf(d),d._next=L._next,L._next._prev=d,L._next=d,d._prev=L},zs.prototype.toString=function(){for(var d=[],L=this._sentinel,j=L._prev;j!==L;)d.push(JSON.stringify(j,El)),j=j._prev;return"["+d.join(", ")+"]"};var xc=So.Graph,Cu=function(d,L){if(d.nodeCount()<=1)return[];var j=function(ht,gt){var _t=new xc,It=0,Ut=0;Ze.forEach(ht.nodes(),function(ae){_t.setNode(ae,{v:ae,in:0,out:0})}),Ze.forEach(ht.edges(),function(ae){var Ne=_t.edge(ae.v,ae.w)||0,er=gt(ae),Pr=Ne+er;_t.setEdge(ae.v,ae.w,Pr),Ut=Math.max(Ut,_t.node(ae.v).out+=er),It=Math.max(It,_t.node(ae.w).in+=er)});var Jt=Ze.range(Ut+It+3).map(function(){return new $o}),ue=It+1;return Ze.forEach(_t.nodes(),function(ae){Sc(Jt,ue,_t.node(ae))}),{graph:_t,buckets:Jt,zeroIdx:ue}}(d,L||wc),q=function(ht,gt,_t){for(var It,Ut=[],Jt=gt[gt.length-1],ue=gt[0];ht.nodeCount();){for(;It=ue.dequeue();)nf(ht,gt,_t,It);for(;It=Jt.dequeue();)nf(ht,gt,_t,It);if(ht.nodeCount()){for(var ae=gt.length-2;ae>0;--ae)if(It=gt[ae].dequeue()){Ut=Ut.concat(nf(ht,gt,_t,It,!0));break}}}return Ut}(j.graph,j.buckets,j.zeroIdx);return Ze.flatten(Ze.map(q,function(ht){return d.outEdges(ht.v,ht.w)}),!0)},wc=Ze.constant(1);function nf(d,L,j,q,ht){var gt=ht?[]:void 0;return Ze.forEach(d.inEdges(q.v),function(_t){var It=d.edge(_t),Ut=d.node(_t.v);ht&&gt.push({v:_t.v,w:_t.w}),Ut.out-=It,Sc(L,j,Ut)}),Ze.forEach(d.outEdges(q.v),function(_t){var It=d.edge(_t),Ut=_t.w,Jt=d.node(Ut);Jt.in-=It,Sc(L,j,Jt)}),d.removeNode(q.v),gt}function Sc(d,L,j){j.out?j.in?d[j.out-j.in+L].enqueue(j):d[d.length-1].enqueue(j):d[0].enqueue(j)}var _c={run:function(d){var L=d.graph().acyclicer==="greedy"?Cu(d,function(j){return function(q){return j.edge(q).weight}}(d)):function(j){var q=[],ht={},gt={};function _t(It){Ze.has(gt,It)||(gt[It]=!0,ht[It]=!0,Ze.forEach(j.outEdges(It),function(Ut){Ze.has(ht,Ut.w)?q.push(Ut):_t(Ut.w)}),delete ht[It])}return Ze.forEach(j.nodes(),_t),q}(d);Ze.forEach(L,function(j){var q=d.edge(j);d.removeEdge(j),q.forwardName=j.name,q.reversed=!0,d.setEdge(j.w,j.v,q,Ze.uniqueId("rev"))})},undo:function(d){Ze.forEach(d.edges(),function(L){var j=d.edge(L);if(j.reversed){d.removeEdge(L);var q=j.forwardName;delete j.reversed,delete j.forwardName,d.setEdge(L.w,L.v,j,q)}})}},af=So.Graph,la={addDummyNode:su,simplify:function(d){var L=new af().setGraph(d.graph());return Ze.forEach(d.nodes(),function(j){L.setNode(j,d.node(j))}),Ze.forEach(d.edges(),function(j){var q=L.edge(j.v,j.w)||{weight:0,minlen:1},ht=d.edge(j);L.setEdge(j.v,j.w,{weight:q.weight+ht.weight,minlen:Math.max(q.minlen,ht.minlen)})}),L},asNonCompoundGraph:function(d){var L=new af({multigraph:d.isMultigraph()}).setGraph(d.graph());return Ze.forEach(d.nodes(),function(j){d.children(j).length||L.setNode(j,d.node(j))}),Ze.forEach(d.edges(),function(j){L.setEdge(j,d.edge(j))}),L},successorWeights:function(d){var L=Ze.map(d.nodes(),function(j){var q={};return Ze.forEach(d.outEdges(j),function(ht){q[ht.w]=(q[ht.w]||0)+d.edge(ht).weight}),q});return Ze.zipObject(d.nodes(),L)},predecessorWeights:function(d){var L=Ze.map(d.nodes(),function(j){var q={};return Ze.forEach(d.inEdges(j),function(ht){q[ht.v]=(q[ht.v]||0)+d.edge(ht).weight}),q});return Ze.zipObject(d.nodes(),L)},intersectRect:function(d,L){var j,q,ht=d.x,gt=d.y,_t=L.x-ht,It=L.y-gt,Ut=d.width/2,Jt=d.height/2;if(!_t&&!It)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(It)*Ut>Math.abs(_t)*Jt?(It<0&&(Jt=-Jt),j=Jt*_t/It,q=Jt):(_t<0&&(Ut=-Ut),j=Ut,q=Ut*It/_t),{x:ht+j,y:gt+q}},buildLayerMatrix:function(d){var L=Ze.map(Ze.range(xl(d)+1),function(){return[]});return Ze.forEach(d.nodes(),function(j){var q=d.node(j),ht=q.rank;Ze.isUndefined(ht)||(L[ht][q.order]=j)}),L},normalizeRanks:function(d){var L=Ze.min(Ze.map(d.nodes(),function(j){return d.node(j).rank}));Ze.forEach(d.nodes(),function(j){var q=d.node(j);Ze.has(q,"rank")&&(q.rank-=L)})},removeEmptyRanks:function(d){var L=Ze.min(Ze.map(d.nodes(),function(gt){return d.node(gt).rank})),j=[];Ze.forEach(d.nodes(),function(gt){var _t=d.node(gt).rank-L;j[_t]||(j[_t]=[]),j[_t].push(gt)});var q=0,ht=d.graph().nodeRankFactor;Ze.forEach(j,function(gt,_t){Ze.isUndefined(gt)&&_t%ht!=0?--q:q&&Ze.forEach(gt,function(It){d.node(It).rank+=q})})},addBorderNode:function(d,L,j,q){var ht={width:0,height:0};return arguments.length>=4&&(ht.rank=j,ht.order=q),su(d,"border",ht,L)},maxRank:xl,partition:function(d,L){var j={lhs:[],rhs:[]};return Ze.forEach(d,function(q){L(q)?j.lhs.push(q):j.rhs.push(q)}),j},time:function(d,L){var j=Ze.now();try{return L()}finally{console.log(d+" time: "+(Ze.now()-j)+"ms")}},notime:function(d,L){return L()}};function su(d,L,j,q){var ht;do ht=Ze.uniqueId(q);while(d.hasNode(ht));return j.dummy=L,d.setNode(ht,j),ht}function xl(d){return Ze.max(Ze.map(d.nodes(),function(L){var j=d.node(L).rank;if(!Ze.isUndefined(j))return j}))}var Uf={run:function(d){d.graph().dummyChains=[],Ze.forEach(d.edges(),function(L){(function(j,q){var ht,gt,_t,It=q.v,Ut=j.node(It).rank,Jt=q.w,ue=j.node(Jt).rank,ae=q.name,Ne=j.edge(q),er=Ne.labelRank;if(ue!==Ut+1){for(j.removeEdge(q),_t=0,++Ut;Ut<ue;++_t,++Ut)Ne.points=[],gt={width:0,height:0,edgeLabel:Ne,edgeObj:q,rank:Ut},ht=la.addDummyNode(j,"edge",gt,"_d"),Ut===er&&(gt.width=Ne.width,gt.height=Ne.height,gt.dummy="edge-label",gt.labelpos=Ne.labelpos),j.setEdge(It,ht,{weight:Ne.weight},ae),_t===0&&j.graph().dummyChains.push(ht),It=ht;j.setEdge(It,Jt,{weight:Ne.weight},ae)}})(d,L)})},undo:function(d){Ze.forEach(d.graph().dummyChains,function(L){var j,q=d.node(L),ht=q.edgeLabel;for(d.setEdge(q.edgeObj,ht);q.dummy;)j=d.successors(L)[0],d.removeNode(L),ht.points.push({x:q.x,y:q.y}),q.dummy==="edge-label"&&(ht.x=q.x,ht.y=q.y,ht.width=q.width,ht.height=q.height),L=j,q=d.node(L)})}},Lo=function(d){var L={};Ze.forEach(d.sources(),function j(q){var ht=d.node(q);if(Ze.has(L,q))return ht.rank;L[q]=!0;var gt=Ze.min(Ze.map(d.outEdges(q),function(_t){return j(_t.w)-d.edge(_t).minlen}));return gt!==Number.POSITIVE_INFINITY&&gt!=null||(gt=0),ht.rank=gt})},uu=function(d,L){return d.node(L.w).rank-d.node(L.v).rank-d.edge(L).minlen},fu=So.Graph,Cs=uu,cu=function(d){var L,j,q=new fu({directed:!1}),ht=d.nodes()[0],gt=d.nodeCount();for(q.setNode(ht,{});As(q,d)<gt;)L=lu(q,d),j=q.hasNode(L.v)?Cs(d,L):-Cs(d,L),Ts(q,d,j);return q};function As(d,L){return Ze.forEach(d.nodes(),function j(q){Ze.forEach(L.nodeEdges(q),function(ht){var gt=ht.v,_t=q===gt?ht.w:gt;d.hasNode(_t)||Cs(L,ht)||(d.setNode(_t,{}),d.setEdge(q,_t,{}),j(_t))})}),d.nodeCount()}function lu(d,L){return Ze.minBy(L.edges(),function(j){if(d.hasNode(j.v)!==d.hasNode(j.w))return Cs(L,j)})}function Ts(d,L,j){Ze.forEach(d.nodes(),function(q){L.node(q).rank+=j})}var Au=uu,zf=Lo,of=So.alg.preorder,Mc=So.alg.postorder,us=la.simplify,Tu=ko;function ko(d){d=us(d),zf(d);var L,j=cu(d);for(Iu(j),Cc(j,d);L=Qo(j);)Pu(j,d,L,Ic(j,d,L))}function Cc(d,L){var j=Mc(d,d.nodes());j=j.slice(0,j.length-1),Ze.forEach(j,function(q){(function(ht,gt,_t){var It=ht.node(_t).parent;ht.edge(_t,It).cutvalue=Ac(ht,gt,_t)})(d,L,q)})}function Ac(d,L,j){var q=d.node(j).parent,ht=!0,gt=L.edge(j,q),_t=0;return gt||(ht=!1,gt=L.edge(q,j)),_t=gt.weight,Ze.forEach(L.nodeEdges(j),function(It){var Ut,Jt,ue=It.v===j,ae=ue?It.w:It.v;if(ae!==q){var Ne=ue===ht,er=L.edge(It).weight;if(_t+=Ne?er:-er,Ut=j,Jt=ae,d.hasEdge(Ut,Jt)){var Pr=d.edge(j,ae).cutvalue;_t+=Ne?-Pr:Pr}}}),_t}function Iu(d,L){arguments.length<2&&(L=d.nodes()[0]),Tc(d,{},1,L)}function Tc(d,L,j,q,ht){var gt=j,_t=d.node(q);return L[q]=!0,Ze.forEach(d.neighbors(q),function(It){Ze.has(L,It)||(j=Tc(d,L,j,It,q))}),_t.low=gt,_t.lim=j++,ht?_t.parent=ht:delete _t.parent,j}function Qo(d){return Ze.find(d.edges(),function(L){return d.edge(L).cutvalue<0})}function Ic(d,L,j){var q=j.v,ht=j.w;L.hasEdge(q,ht)||(q=j.w,ht=j.v);var gt=d.node(q),_t=d.node(ht),It=gt,Ut=!1;gt.lim>_t.lim&&(It=_t,Ut=!0);var Jt=Ze.filter(L.edges(),function(ue){return Ut===uh(d,d.node(ue.v),It)&&Ut!==uh(d,d.node(ue.w),It)});return Ze.minBy(Jt,function(ue){return Au(L,ue)})}function Pu(d,L,j,q){var ht=j.v,gt=j.w;d.removeEdge(ht,gt),d.setEdge(q.v,q.w,{}),Iu(d),Cc(d,L),function(_t,It){var Ut=Ze.find(_t.nodes(),function(ue){return!It.node(ue).parent}),Jt=of(_t,Ut);Jt=Jt.slice(1),Ze.forEach(Jt,function(ue){var ae=_t.node(ue).parent,Ne=It.edge(ue,ae),er=!1;Ne||(Ne=It.edge(ae,ue),er=!0),It.node(ue).rank=It.node(ae).rank+(er?Ne.minlen:-Ne.minlen)})}(d,L)}function uh(d,L,j){return j.low<=L.lim&&L.lim<=j.lim}ko.initLowLimValues=Iu,ko.initCutValues=Cc,ko.calcCutValue=Ac,ko.leaveEdge=Qo,ko.enterEdge=Ic,ko.exchangeEdges=Pu;var fs=Lo,sf=function(d){switch(d.graph().ranker){case"network-simplex":Ro(d);break;case"tight-tree":(function(L){fs(L),cu(L)})(d);break;case"longest-path":cs(d);break;default:Ro(d)}},cs=fs;function Ro(d){Tu(d)}var Wf=function(d){var L=function(j){var q={},ht=0;function gt(_t){var It=ht;Ze.forEach(j.children(_t),gt),q[_t]={low:It,lim:ht++}}return Ze.forEach(j.children(),gt),q}(d);Ze.forEach(d.graph().dummyChains,function(j){for(var q=d.node(j),ht=q.edgeObj,gt=function(ae,Ne,er,Pr){var ur,hr,fr=[],Xr=[],fn=Math.min(Ne[er].low,Ne[Pr].low),tn=Math.max(Ne[er].lim,Ne[Pr].lim);ur=er;do ur=ae.parent(ur),fr.push(ur);while(ur&&(Ne[ur].low>fn||tn>Ne[ur].lim));for(hr=ur,ur=Pr;(ur=ae.parent(ur))!==hr;)Xr.push(ur);return{path:fr.concat(Xr.reverse()),lca:hr}}(d,L,ht.v,ht.w),_t=gt.path,It=gt.lca,Ut=0,Jt=_t[Ut],ue=!0;j!==ht.w;){if(q=d.node(j),ue){for(;(Jt=_t[Ut])!==It&&d.node(Jt).maxRank<q.rank;)Ut++;Jt===It&&(ue=!1)}if(!ue){for(;Ut<_t.length-1&&d.node(Jt=_t[Ut+1]).minRank<=q.rank;)Ut++;Jt=_t[Ut]}d.setParent(j,Jt),j=d.successors(j)[0]}})},Is={run:function(d){var L=la.addDummyNode(d,"root",{},"_root"),j=function(_t){var It={};function Ut(Jt,ue){var ae=_t.children(Jt);ae&&ae.length&&Ze.forEach(ae,function(Ne){Ut(Ne,ue+1)}),It[Jt]=ue}return Ze.forEach(_t.children(),function(Jt){Ut(Jt,1)}),It}(d),q=Ze.max(Ze.values(j))-1,ht=2*q+1;d.graph().nestingRoot=L,Ze.forEach(d.edges(),function(_t){d.edge(_t).minlen*=ht});var gt=function(_t){return Ze.reduce(_t.edges(),function(It,Ut){return It+_t.edge(Ut).weight},0)}(d)+1;Ze.forEach(d.children(),function(_t){Bo(d,L,ht,gt,q,j,_t)}),d.graph().nodeRankFactor=ht},cleanup:function(d){var L=d.graph();d.removeNode(L.nestingRoot),delete L.nestingRoot,Ze.forEach(d.edges(),function(j){d.edge(j).nestingEdge&&d.removeEdge(j)})}};function Bo(d,L,j,q,ht,gt,_t){var It=d.children(_t);if(It.length){var Ut=la.addBorderNode(d,"_bt"),Jt=la.addBorderNode(d,"_bb"),ue=d.node(_t);d.setParent(Ut,_t),ue.borderTop=Ut,d.setParent(Jt,_t),ue.borderBottom=Jt,Ze.forEach(It,function(ae){Bo(d,L,j,q,ht,gt,ae);var Ne=d.node(ae),er=Ne.borderTop?Ne.borderTop:ae,Pr=Ne.borderBottom?Ne.borderBottom:ae,ur=Ne.borderTop?q:2*q,hr=er!==Pr?1:ht-gt[_t]+1;d.setEdge(Ut,er,{weight:ur,minlen:hr,nestingEdge:!0}),d.setEdge(Pr,Jt,{weight:ur,minlen:hr,nestingEdge:!0})}),d.parent(_t)||d.setEdge(L,Ut,{weight:0,minlen:ht+gt[_t]})}else _t!==L&&d.setEdge(L,_t,{weight:0,minlen:j})}var Pc=function(d){Ze.forEach(d.children(),function L(j){var q=d.children(j),ht=d.node(j);if(q.length&&Ze.forEach(q,L),Ze.has(ht,"minRank")){ht.borderLeft=[],ht.borderRight=[];for(var gt=ht.minRank,_t=ht.maxRank+1;gt<_t;++gt)ls(d,"borderLeft","_bl",j,ht,gt),ls(d,"borderRight","_br",j,ht,gt)}})};function ls(d,L,j,q,ht,gt){var _t={width:0,height:0,rank:gt,borderType:L},It=ht[L][gt-1],Ut=la.addDummyNode(d,"border",_t,j);ht[L][gt]=Ut,d.setParent(Ut,q),It&&d.setEdge(It,Ut,{weight:1})}var Ws={adjust:function(d){var L=d.graph().rankdir.toLowerCase();L!=="lr"&&L!=="rl"||Ua(d)},undo:function(d){var L=d.graph().rankdir.toLowerCase();L!=="bt"&&L!=="rl"||function(j){Ze.forEach(j.nodes(),function(q){Go(j.node(q))}),Ze.forEach(j.edges(),function(q){var ht=j.edge(q);Ze.forEach(ht.points,Go),Ze.has(ht,"y")&&Go(ht)})}(d),L!=="lr"&&L!=="rl"||(function(j){Ze.forEach(j.nodes(),function(q){Ps(j.node(q))}),Ze.forEach(j.edges(),function(q){var ht=j.edge(q);Ze.forEach(ht.points,Ps),Ze.has(ht,"x")&&Ps(ht)})}(d),Ua(d))}};function Ua(d){Ze.forEach(d.nodes(),function(L){hs(d.node(L))}),Ze.forEach(d.edges(),function(L){hs(d.edge(L))})}function hs(d){var L=d.width;d.width=d.height,d.height=L}function Go(d){d.y=-d.y}function Ps(d){var L=d.x;d.x=d.y,d.y=L}var Oc=function(d){var L={},j=Ze.filter(d.nodes(),function(It){return!d.children(It).length}),q=Ze.max(Ze.map(j,function(It){return d.node(It).rank})),ht=Ze.map(Ze.range(q+1),function(){return[]});function gt(It){if(!Ze.has(L,It)){L[It]=!0;var Ut=d.node(It);ht[Ut.rank].push(It),Ze.forEach(d.successors(It),gt)}}var _t=Ze.sortBy(j,function(It){return d.node(It).rank});return Ze.forEach(_t,gt),ht},Vf=function(d,L){for(var j=0,q=1;q<L.length;++q)j+=uf(d,L[q-1],L[q]);return j};function uf(d,L,j){for(var q=Ze.zipObject(j,Ze.map(j,function(Jt,ue){return ue})),ht=Ze.flatten(Ze.map(L,function(Jt){return Ze.sortBy(Ze.map(d.outEdges(Jt),function(ue){return{pos:q[ue.w],weight:d.edge(ue).weight}}),"pos")}),!0),gt=1;gt<j.length;)gt<<=1;var _t=2*gt-1;gt-=1;var It=Ze.map(new Array(_t),function(){return 0}),Ut=0;return Ze.forEach(ht.forEach(function(Jt){var ue=Jt.pos+gt;It[ue]+=Jt.weight;for(var ae=0;ue>0;)ue%2&&(ae+=It[ue+1]),It[ue=ue-1>>1]+=Jt.weight;Ut+=Jt.weight*ae})),Ut}var wl=function(d,L){return Ze.map(L,function(j){var q=d.inEdges(j);if(q.length){var ht=Ze.reduce(q,function(gt,_t){var It=d.edge(_t),Ut=d.node(_t.v);return{sum:gt.sum+It.weight*Ut.order,weight:gt.weight+It.weight}},{sum:0,weight:0});return{v:j,barycenter:ht.sum/ht.weight,weight:ht.weight}}return{v:j}})},Dc=function(d,L){var j={};return Ze.forEach(d,function(q,ht){var gt=j[q.v]={indegree:0,in:[],out:[],vs:[q.v],i:ht};Ze.isUndefined(q.barycenter)||(gt.barycenter=q.barycenter,gt.weight=q.weight)}),Ze.forEach(L.edges(),function(q){var ht=j[q.v],gt=j[q.w];Ze.isUndefined(ht)||Ze.isUndefined(gt)||(gt.indegree++,ht.out.push(j[q.w]))}),function(q){var ht=[];function gt(Ut){return function(Jt){Jt.merged||(Ze.isUndefined(Jt.barycenter)||Ze.isUndefined(Ut.barycenter)||Jt.barycenter>=Ut.barycenter)&&function(ue,ae){var Ne=0,er=0;ue.weight&&(Ne+=ue.barycenter*ue.weight,er+=ue.weight),ae.weight&&(Ne+=ae.barycenter*ae.weight,er+=ae.weight),ue.vs=ae.vs.concat(ue.vs),ue.barycenter=Ne/er,ue.weight=er,ue.i=Math.min(ae.i,ue.i),ae.merged=!0}(Ut,Jt)}}function _t(Ut){return function(Jt){Jt.in.push(Ut),--Jt.indegree==0&&q.push(Jt)}}for(;q.length;){var It=q.pop();ht.push(It),Ze.forEach(It.in.reverse(),gt(It)),Ze.forEach(It.out,_t(It))}return Ze.map(Ze.filter(ht,function(Ut){return!Ut.merged}),function(Ut){return Ze.pick(Ut,["vs","i","barycenter","weight"])})}(Ze.filter(j,function(q){return!q.indegree}))},jf=function(d,L){var j=la.partition(d,function(ae){return Ze.has(ae,"barycenter")}),q=j.lhs,ht=Ze.sortBy(j.rhs,function(ae){return-ae.i}),gt=[],_t=0,It=0,Ut=0;q.sort((Jt=!!L,function(ae,Ne){return ae.barycenter<Ne.barycenter?-1:ae.barycenter>Ne.barycenter?1:Jt?Ne.i-ae.i:ae.i-Ne.i})),Ut=ff(gt,ht,Ut),Ze.forEach(q,function(ae){Ut+=ae.vs.length,gt.push(ae.vs),_t+=ae.barycenter*ae.weight,It+=ae.weight,Ut=ff(gt,ht,Ut)});var Jt,ue={vs:Ze.flatten(gt,!0)};return It&&(ue.barycenter=_t/It,ue.weight=It),ue};function ff(d,L,j){for(var q;L.length&&(q=Ze.last(L)).i<=j;)L.pop(),d.push(q.vs),j++;return j}var Sl=function d(L,j,q,ht){var gt=L.children(j),_t=L.node(j),It=_t?_t.borderLeft:void 0,Ut=_t?_t.borderRight:void 0,Jt={};It&&(gt=Ze.filter(gt,function(ur){return ur!==It&&ur!==Ut}));var ue=wl(L,gt);Ze.forEach(ue,function(ur){if(L.children(ur.v).length){var hr=d(L,ur.v,q,ht);Jt[ur.v]=hr,Ze.has(hr,"barycenter")&&(fr=ur,Xr=hr,Ze.isUndefined(fr.barycenter)?(fr.barycenter=Xr.barycenter,fr.weight=Xr.weight):(fr.barycenter=(fr.barycenter*fr.weight+Xr.barycenter*Xr.weight)/(fr.weight+Xr.weight),fr.weight+=Xr.weight))}var fr,Xr});var ae=Dc(ue,q);(function(ur,hr){Ze.forEach(ur,function(fr){fr.vs=Ze.flatten(fr.vs.map(function(Xr){return hr[Xr]?hr[Xr].vs:Xr}),!0)})})(ae,Jt);var Ne=jf(ae,ht);if(It&&(Ne.vs=Ze.flatten([It,Ne.vs,Ut],!0),L.predecessors(It).length)){var er=L.node(L.predecessors(It)[0]),Pr=L.node(L.predecessors(Ut)[0]);Ze.has(Ne,"barycenter")||(Ne.barycenter=0,Ne.weight=0),Ne.barycenter=(Ne.barycenter*Ne.weight+er.order+Pr.order)/(Ne.weight+2),Ne.weight+=2}return Ne},Ou=So.Graph,Xf=function(d,L,j){var q=function(gt){for(var _t;gt.hasNode(_t=Ze.uniqueId("_root")););return _t}(d),ht=new Ou({compound:!0}).setGraph({root:q}).setDefaultNodeLabel(function(gt){return d.node(gt)});return Ze.forEach(d.nodes(),function(gt){var _t=d.node(gt),It=d.parent(gt);(_t.rank===L||_t.minRank<=L&&L<=_t.maxRank)&&(ht.setNode(gt),ht.setParent(gt,It||q),Ze.forEach(d[j](gt),function(Ut){var Jt=Ut.v===gt?Ut.w:Ut.v,ue=ht.edge(Jt,gt),ae=Ze.isUndefined(ue)?0:ue.weight;ht.setEdge(Jt,gt,{weight:d.edge(Ut).weight+ae})}),Ze.has(_t,"minRank")&&ht.setNode(gt,{borderLeft:_t.borderLeft[L],borderRight:_t.borderRight[L]}))}),ht},ds=function(d,L,j){var q,ht={};Ze.forEach(j,function(gt){for(var _t,It,Ut=d.parent(gt);Ut;){if((_t=d.parent(Ut))?(It=ht[_t],ht[_t]=Ut):(It=q,q=Ut),It&&It!==Ut)return void L.setEdge(It,Ut);Ut=_t}})},Yf=So.Graph,Jo=function(d){var L=la.maxRank(d),j=cf(d,Ze.range(1,L+1),"inEdges"),q=cf(d,Ze.range(L-1,-1,-1),"outEdges"),ht=Oc(d);$i(d,ht);for(var gt,_t=Number.POSITIVE_INFINITY,It=0,Ut=0;Ut<4;++It,++Ut){Hf(It%2?j:q,It%4>=2),ht=la.buildLayerMatrix(d);var Jt=Vf(d,ht);Jt<_t&&(Ut=0,gt=Ze.cloneDeep(ht),_t=Jt)}$i(d,gt)};function cf(d,L,j){return Ze.map(L,function(q){return Xf(d,q,j)})}function Hf(d,L){var j=new Yf;Ze.forEach(d,function(q){var ht=q.graph().root,gt=Sl(q,ht,j,L);Ze.forEach(gt.vs,function(_t,It){q.node(_t).order=It}),ds(q,j,gt.vs)})}function $i(d,L){Ze.forEach(L,function(j){Ze.forEach(j,function(q,ht){d.node(q).order=ht})})}var Du=So.Graph,Nu=function(d){var L,j=la.buildLayerMatrix(d),q=Ze.merge(Vs(d,j),fh(d,j)),ht={};Ze.forEach(["u","d"],function(_t){L=_t==="u"?j:Ze.values(j).reverse(),Ze.forEach(["l","r"],function(It){It==="r"&&(L=Ze.map(L,function(ae){return Ze.values(ae).reverse()}));var Ut=(_t==="u"?d.predecessors:d.successors).bind(d),Jt=ch(d,L,q,Ut),ue=Wh(d,L,Jt.root,Jt.align,It==="r");It==="r"&&(ue=Ze.mapValues(ue,function(ae){return-ae})),ht[_t+It]=ue})});var gt=Lu(d,ht);return lh(ht,gt),hh(ht,d.graph().align)};function Vs(d,L){var j={};return Ze.reduce(L,function(q,ht){var gt=0,_t=0,It=q.length,Ut=Ze.last(ht);return Ze.forEach(ht,function(Jt,ue){var ae=function(er,Pr){if(er.node(Pr).dummy)return Ze.find(er.predecessors(Pr),function(ur){return er.node(ur).dummy})}(d,Jt),Ne=ae?d.node(ae).order:It;(ae||Jt===Ut)&&(Ze.forEach(ht.slice(_t,ue+1),function(er){Ze.forEach(d.predecessors(er),function(Pr){var ur=d.node(Pr),hr=ur.order;!(hr<gt||Ne<hr)||ur.dummy&&d.node(er).dummy||Zf(j,Pr,er)})}),_t=ue+1,gt=Ne)}),ht}),j}function fh(d,L){var j={};function q(ht,gt,_t,It,Ut){var Jt;Ze.forEach(Ze.range(gt,_t),function(ue){Jt=ht[ue],d.node(Jt).dummy&&Ze.forEach(d.predecessors(Jt),function(ae){var Ne=d.node(ae);Ne.dummy&&(Ne.order<It||Ne.order>Ut)&&Zf(j,ae,Jt)})})}return Ze.reduce(L,function(ht,gt){var _t,It=-1,Ut=0;return Ze.forEach(gt,function(Jt,ue){if(d.node(Jt).dummy==="border"){var ae=d.predecessors(Jt);ae.length&&(_t=d.node(ae[0]).order,q(gt,Ut,ue,It,_t),Ut=ue,It=_t)}q(gt,Ut,gt.length,_t,ht.length)}),gt}),j}function Zf(d,L,j){if(L>j){var q=L;L=j,j=q}var ht=d[L];ht||(d[L]=ht={}),ht[j]=!0}function zh(d,L,j){if(L>j){var q=L;L=j,j=q}return Ze.has(d[L],j)}function ch(d,L,j,q){var ht={},gt={},_t={};return Ze.forEach(L,function(It){Ze.forEach(It,function(Ut,Jt){ht[Ut]=Ut,gt[Ut]=Ut,_t[Ut]=Jt})}),Ze.forEach(L,function(It){var Ut=-1;Ze.forEach(It,function(Jt){var ue=q(Jt);if(ue.length)for(var ae=((ue=Ze.sortBy(ue,function(ur){return _t[ur]})).length-1)/2,Ne=Math.floor(ae),er=Math.ceil(ae);Ne<=er;++Ne){var Pr=ue[Ne];gt[Jt]===Jt&&Ut<_t[Pr]&&!zh(j,Jt,Pr)&&(gt[Pr]=Jt,gt[Jt]=ht[Jt]=ht[Pr],Ut=_t[Pr])}})}),{root:ht,align:gt}}function Wh(d,L,j,q,ht){var gt={},_t=function(Jt,ue,ae,Ne){var er=new Du,Pr=Jt.graph(),ur=function(hr,fr,Xr){return function(fn,tn,Tn){var wn,Rn=fn.node(tn),Kn=fn.node(Tn),Fn=0;if(Fn+=Rn.width/2,Ze.has(Rn,"labelpos"))switch(Rn.labelpos.toLowerCase()){case"l":wn=-Rn.width/2;break;case"r":wn=Rn.width/2}if(wn&&(Fn+=Xr?wn:-wn),wn=0,Fn+=(Rn.dummy?fr:hr)/2,Fn+=(Kn.dummy?fr:hr)/2,Fn+=Kn.width/2,Ze.has(Kn,"labelpos"))switch(Kn.labelpos.toLowerCase()){case"l":wn=Kn.width/2;break;case"r":wn=-Kn.width/2}return wn&&(Fn+=Xr?wn:-wn),wn=0,Fn}}(Pr.nodesep,Pr.edgesep,Ne);return Ze.forEach(ue,function(hr){var fr;Ze.forEach(hr,function(Xr){var fn=ae[Xr];if(er.setNode(fn),fr){var tn=ae[fr],Tn=er.edge(tn,fn);er.setEdge(tn,fn,Math.max(ur(Jt,Xr,fr),Tn||0))}fr=Xr})}),er}(d,L,j,ht),It=ht?"borderLeft":"borderRight";function Ut(Jt,ue){for(var ae=_t.nodes(),Ne=ae.pop(),er={};Ne;)er[Ne]?Jt(Ne):(er[Ne]=!0,ae.push(Ne),ae=ae.concat(ue(Ne))),Ne=ae.pop()}return Ut(function(Jt){gt[Jt]=_t.inEdges(Jt).reduce(function(ue,ae){return Math.max(ue,gt[ae.v]+_t.edge(ae))},0)},_t.predecessors.bind(_t)),Ut(function(Jt){var ue=_t.outEdges(Jt).reduce(function(Ne,er){return Math.min(Ne,gt[er.w]-_t.edge(er))},Number.POSITIVE_INFINITY),ae=d.node(Jt);ue!==Number.POSITIVE_INFINITY&&ae.borderType!==It&&(gt[Jt]=Math.max(gt[Jt],ue))},_t.successors.bind(_t)),Ze.forEach(q,function(Jt){gt[Jt]=gt[j[Jt]]}),gt}function Lu(d,L){return Ze.minBy(Ze.values(L),function(j){var q=Number.NEGATIVE_INFINITY,ht=Number.POSITIVE_INFINITY;return Ze.forIn(j,function(gt,_t){var It=function(Ut,Jt){return Ut.node(Jt).width}(d,_t)/2;q=Math.max(gt+It,q),ht=Math.min(gt-It,ht)}),q-ht})}function lh(d,L){var j=Ze.values(L),q=Ze.min(j),ht=Ze.max(j);Ze.forEach(["u","d"],function(gt){Ze.forEach(["l","r"],function(_t){var It,Ut=gt+_t,Jt=d[Ut];if(Jt!==L){var ue=Ze.values(Jt);(It=_t==="l"?q-Ze.min(ue):ht-Ze.max(ue))&&(d[Ut]=Ze.mapValues(Jt,function(ae){return ae+It}))}})})}function hh(d,L){return Ze.mapValues(d.ul,function(j,q){if(L)return d[L.toLowerCase()][q];var ht=Ze.sortBy(Ze.map(d,q));return(ht[1]+ht[2])/2})}var _l=Nu,Vh=function(d){(function(L){var j=la.buildLayerMatrix(L),q=L.graph().ranksep,ht=0;Ze.forEach(j,function(gt){var _t=Ze.max(Ze.map(gt,function(It){return L.node(It).height}));Ze.forEach(gt,function(It){L.node(It).y=ht+_t/2}),ht+=_t+q})})(d=la.asNonCompoundGraph(d)),Ze.forEach(_l(d),function(L,j){d.node(j).x=L})},dh=la.normalizeRanks,jh=la.removeEmptyRanks,Qa=la,vh=So.Graph,ku=function(d,L){var j=L&&L.debugTiming?Qa.time:Qa.notime;j("layout",function(){var q=j("  buildLayoutGraph",function(){return function(ht){var gt=new vh({multigraph:!0,compound:!0}),_t=Nc(ht.graph());return gt.setGraph(Ze.merge({},Ml,no(_t,hu),Ze.pick(_t,ph))),Ze.forEach(ht.nodes(),function(It){var Ut=Nc(ht.node(It));gt.setNode(It,Ze.defaults(no(Ut,Kf),gh)),gt.setParent(It,ht.parent(It))}),Ze.forEach(ht.edges(),function(It){var Ut=Nc(ht.edge(It));gt.setEdge(It,Ze.merge({},du,no(Ut,ho),Ze.pick(Ut,ii)))}),gt}(d)});j("  runLayout",function(){(function(ht,gt){gt("    makeSpaceForEdgeLabels",function(){(function(_t){var It=_t.graph();It.ranksep/=2,Ze.forEach(_t.edges(),function(Ut){var Jt=_t.edge(Ut);Jt.minlen*=2,Jt.labelpos.toLowerCase()!=="c"&&(It.rankdir==="TB"||It.rankdir==="BT"?Jt.width+=Jt.labeloffset:Jt.height+=Jt.labeloffset)})})(ht)}),gt("    removeSelfEdges",function(){(function(_t){Ze.forEach(_t.edges(),function(It){if(It.v===It.w){var Ut=_t.node(It.v);Ut.selfEdges||(Ut.selfEdges=[]),Ut.selfEdges.push({e:It,label:_t.edge(It)}),_t.removeEdge(It)}})})(ht)}),gt("    acyclic",function(){_c.run(ht)}),gt("    nestingGraph.run",function(){Is.run(ht)}),gt("    rank",function(){sf(Qa.asNonCompoundGraph(ht))}),gt("    injectEdgeLabelProxies",function(){(function(_t){Ze.forEach(_t.edges(),function(It){var Ut=_t.edge(It);if(Ut.width&&Ut.height){var Jt=_t.node(It.v),ue={rank:(_t.node(It.w).rank-Jt.rank)/2+Jt.rank,e:It};Qa.addDummyNode(_t,"edge-proxy",ue,"_ep")}})})(ht)}),gt("    removeEmptyRanks",function(){jh(ht)}),gt("    nestingGraph.cleanup",function(){Is.cleanup(ht)}),gt("    normalizeRanks",function(){dh(ht)}),gt("    assignRankMinMax",function(){(function(_t){var It=0;Ze.forEach(_t.nodes(),function(Ut){var Jt=_t.node(Ut);Jt.borderTop&&(Jt.minRank=_t.node(Jt.borderTop).rank,Jt.maxRank=_t.node(Jt.borderBottom).rank,It=Ze.max(It,Jt.maxRank))}),_t.graph().maxRank=It})(ht)}),gt("    removeEdgeLabelProxies",function(){(function(_t){Ze.forEach(_t.nodes(),function(It){var Ut=_t.node(It);Ut.dummy==="edge-proxy"&&(_t.edge(Ut.e).labelRank=Ut.rank,_t.removeNode(It))})})(ht)}),gt("    normalize.run",function(){Uf.run(ht)}),gt("    parentDummyChains",function(){Wf(ht)}),gt("    addBorderSegments",function(){Pc(ht)}),gt("    order",function(){Jo(ht)}),gt("    insertSelfEdges",function(){(function(_t){var It=Qa.buildLayerMatrix(_t);Ze.forEach(It,function(Ut){var Jt=0;Ze.forEach(Ut,function(ue,ae){var Ne=_t.node(ue);Ne.order=ae+Jt,Ze.forEach(Ne.selfEdges,function(er){Qa.addDummyNode(_t,"selfedge",{width:er.label.width,height:er.label.height,rank:Ne.rank,order:ae+ ++Jt,e:er.e,label:er.label},"_se")}),delete Ne.selfEdges})})})(ht)}),gt("    adjustCoordinateSystem",function(){Ws.adjust(ht)}),gt("    position",function(){Vh(ht)}),gt("    positionSelfEdges",function(){(function(_t){Ze.forEach(_t.nodes(),function(It){var Ut=_t.node(It);if(Ut.dummy==="selfedge"){var Jt=_t.node(Ut.e.v),ue=Jt.x+Jt.width/2,ae=Jt.y,Ne=Ut.x-ue,er=Jt.height/2;_t.setEdge(Ut.e,Ut.label),_t.removeNode(It),Ut.label.points=[{x:ue+2*Ne/3,y:ae-er},{x:ue+5*Ne/6,y:ae-er},{x:ue+Ne,y:ae},{x:ue+5*Ne/6,y:ae+er},{x:ue+2*Ne/3,y:ae+er}],Ut.label.x=Ut.x,Ut.label.y=Ut.y}})})(ht)}),gt("    removeBorderNodes",function(){(function(_t){Ze.forEach(_t.nodes(),function(It){if(_t.children(It).length){var Ut=_t.node(It),Jt=_t.node(Ut.borderTop),ue=_t.node(Ut.borderBottom),ae=_t.node(Ze.last(Ut.borderLeft)),Ne=_t.node(Ze.last(Ut.borderRight));Ut.width=Math.abs(Ne.x-ae.x),Ut.height=Math.abs(ue.y-Jt.y),Ut.x=ae.x+Ut.width/2,Ut.y=Jt.y+Ut.height/2}}),Ze.forEach(_t.nodes(),function(It){_t.node(It).dummy==="border"&&_t.removeNode(It)})})(ht)}),gt("    normalize.undo",function(){Uf.undo(ht)}),gt("    fixupEdgeLabelCoords",function(){(function(_t){Ze.forEach(_t.edges(),function(It){var Ut=_t.edge(It);if(Ze.has(Ut,"x"))switch(Ut.labelpos!=="l"&&Ut.labelpos!=="r"||(Ut.width-=Ut.labeloffset),Ut.labelpos){case"l":Ut.x-=Ut.width/2+Ut.labeloffset;break;case"r":Ut.x+=Ut.width/2+Ut.labeloffset}})})(ht)}),gt("    undoCoordinateSystem",function(){Ws.undo(ht)}),gt("    translateGraph",function(){(function(_t){var It=Number.POSITIVE_INFINITY,Ut=0,Jt=Number.POSITIVE_INFINITY,ue=0,ae=_t.graph(),Ne=ae.marginx||0,er=ae.marginy||0;function Pr(ur){var hr=ur.x,fr=ur.y,Xr=ur.width,fn=ur.height;It=Math.min(It,hr-Xr/2),Ut=Math.max(Ut,hr+Xr/2),Jt=Math.min(Jt,fr-fn/2),ue=Math.max(ue,fr+fn/2)}Ze.forEach(_t.nodes(),function(ur){Pr(_t.node(ur))}),Ze.forEach(_t.edges(),function(ur){var hr=_t.edge(ur);Ze.has(hr,"x")&&Pr(hr)}),It-=Ne,Jt-=er,Ze.forEach(_t.nodes(),function(ur){var hr=_t.node(ur);hr.x-=It,hr.y-=Jt}),Ze.forEach(_t.edges(),function(ur){var hr=_t.edge(ur);Ze.forEach(hr.points,function(fr){fr.x-=It,fr.y-=Jt}),Ze.has(hr,"x")&&(hr.x-=It),Ze.has(hr,"y")&&(hr.y-=Jt)}),ae.width=Ut-It+Ne,ae.height=ue-Jt+er})(ht)}),gt("    assignNodeIntersects",function(){(function(_t){Ze.forEach(_t.edges(),function(It){var Ut,Jt,ue=_t.edge(It),ae=_t.node(It.v),Ne=_t.node(It.w);ue.points?(Ut=ue.points[0],Jt=ue.points[ue.points.length-1]):(ue.points=[],Ut=Ne,Jt=ae),ue.points.unshift(Qa.intersectRect(ae,Ut)),ue.points.push(Qa.intersectRect(Ne,Jt))})})(ht)}),gt("    reversePoints",function(){(function(_t){Ze.forEach(_t.edges(),function(It){var Ut=_t.edge(It);Ut.reversed&&Ut.points.reverse()})})(ht)}),gt("    acyclic.undo",function(){_c.undo(ht)})})(q,j)}),j("  updateInputGraph",function(){(function(ht,gt){Ze.forEach(ht.nodes(),function(_t){var It=ht.node(_t),Ut=gt.node(_t);It&&(It.x=Ut.x,It.y=Ut.y,gt.children(_t).length&&(It.width=Ut.width,It.height=Ut.height))}),Ze.forEach(ht.edges(),function(_t){var It=ht.edge(_t),Ut=gt.edge(_t);It.points=Ut.points,Ze.has(Ut,"x")&&(It.x=Ut.x,It.y=Ut.y)}),ht.graph().width=gt.graph().width,ht.graph().height=gt.graph().height})(d,q)})})},hu=["nodesep","edgesep","ranksep","marginx","marginy"],Ml={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ph=["acyclicer","ranker","rankdir","align"],Kf=["width","height"],gh={width:0,height:0},ho=["minlen","weight","width","height","labeloffset"],du={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ii=["labelpos"];function no(d,L){return Ze.mapValues(Ze.pick(d,L),Number)}function Nc(d){var L={};return Ze.forEach(d,function(j,q){L[q.toLowerCase()]=j}),L}var Xh=So.Graph,Cl={graphlib:So,layout:ku,debug:{debugOrdering:function(d){var L=la.buildLayerMatrix(d),j=new Xh({compound:!0,multigraph:!0}).setGraph({});return Ze.forEach(d.nodes(),function(q){j.setNode(q,{label:q}),j.setParent(q,"layer"+d.node(q).rank)}),Ze.forEach(d.edges(),function(q){j.setEdge(q.v,q.w,{},q.name)}),Ze.forEach(L,function(q,ht){var gt="layer"+ht;j.setNode(gt,{rank:"same"}),Ze.reduce(q,function(_t,It){return j.setEdge(_t,It,{style:"invis"}),It})}),j}},util:{time:la.time,notime:la.notime},version:"0.8.5"},Yh=Cl.graphlib,yh=Cl.layout;class Lc{constructor(L){this.cardinality=1,this.include=m.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=I.NODE,this.name=L.name,this.attr=L.attr||{},this.inputs=L.inputs,this.path=L.path||[],this.width=L.width,this.height=L.height}}class Al{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Tl(d){const L=new Al;return d.nodes.map(j=>new Lc(j)).forEach(j=>{L.nodes[j.name]=j,j.inputs.forEach(q=>{(function(ht,gt,_t){_t.name!==gt.name&&ht.edges.push(Object.assign(Object.assign({},_t.attr),{v:_t.name,w:gt.name}))})(L,j,q)})}),L}class Os{constructor(L,j={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=m.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=I.META,this.path=[],this.name=L,this.metaGraph=Ru(L,y.META,j)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(L=>this.metaGraph.node(L))}leaves(){let L,j=[],q=[this];for(;q.length;){let ht=q.shift();ht.isGroupNode?(L=ht.metaGraph,L.nodes().forEach(gt=>q.push(L.node(gt)))):j.push(ht.name)}return j}}class Il{constructor(L,j){this.v=L,this.w=j,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(L,j){this.baseEdgeList.push(L)}}function lf(d,L={}){return new Os(d,L)}function kc(d,L){return new Il(d,L)}function Ru(d,L,j){const q=j||{},ht=new Yh.Graph(q);return ht.setGraph({name:d,rankdir:q.rankdir,type:L,align:q.align}),ht}class $f{constructor(L={}){this.graphOptions=L,this.index={},this.graphOptions.compound=!0,this.root=lf(E,this.graphOptions),this.index[E]=this.root}getNodeMap(){return this.index}node(L){return this.index[L]}setNode(L,j){this.index[L]=j}getBridgeGraph(L){const j=this.index[L];if(!j)throw Error("Could not find node in hierarchy: "+L);if(!("metaGraph"in j))return null;const q=j;if(q.bridgeGraph)return q.bridgeGraph;const ht=Ru(N,y.BRIDGE,this.graphOptions);if(q.bridgeGraph=ht,!j.parentNode||!("metaGraph"in j.parentNode))return ht;const gt=j.parentNode;return[gt.metaGraph,this.getBridgeGraph(gt.name)].forEach(_t=>{_t.edges().filter(It=>It.v===L||It.w===L).forEach(It=>{const Ut=It.w===L;_t.edge(It).baseEdgeList.forEach(Jt=>{const[ue,ae]=Ut?[Jt.w,It.v]:[Jt.v,It.w],Ne=this.getChildName(L,ue),er={v:Ut?ae:Ne,w:Ut?Ne:ae};let Pr=ht.edge(er);Pr||(Pr=kc(er.v,er.w),Pr.inbound=Ut,ht.setEdge(er.v,er.w,Pr)),Pr.addBaseEdge(Jt,this)})})}),ht}getChildName(L,j){let q=this.index[j];for(;q;){if(q.parentNode&&q.parentNode.name===L)return q.name;q=q.parentNode}throw Error("Could not find immediate child for descendant: "+j)}getPredecessors(L){const j=this.index[L];if(!j)throw Error("Could not find node with name: "+L);return this.getOneWayEdges(j,!0)}getSuccessors(L){const j=this.index[L];if(!j)throw Error("Could not find node with name: "+L);return this.getOneWayEdges(j,!1)}getOneWayEdges(L,j){const q=[];if(!L.parentNode||!L.parentNode.isGroupNode)return q;const ht=L.parentNode,gt=ht.metaGraph,_t=this.getBridgeGraph(ht.name);return js(gt,L,j,q),js(_t,L,j,q),q}}function io(d,L){const{rankDirection:j,align:q}=L,ht=new $f({rankdir:j,align:q});return function(gt,_t){Object.keys(_t.nodes).forEach(It=>{const Ut=_t.nodes[It],Jt=Ut.path;let ue=gt.root;ue.depth=Math.max(Jt.length,ue.depth);for(let ae=0;ae<Jt.length&&(ue.depth=Math.max(ue.depth,Jt.length-ae),ue.cardinality+=Ut.cardinality,ae!==Jt.length-1);ae++){const Ne=Jt[ae];let er=gt.node(Ne);er||(er=lf(Ne,gt.graphOptions),er.path=Ut.path.slice(0,ae+1),er.parentNode=ue,gt.setNode(Ne,er),ue.metaGraph.setNode(Ne,er)),ue=er}gt.setNode(Ut.name,Ut),Ut.parentNode=ue,ue.metaGraph.setNode(Ut.name,Ut)})}(ht,d),function(gt,_t){const It=gt.getNodeMap();let Ut=[],Jt=[];const ue=(ae,Ne)=>{let er=0;for(;ae;)Ne[er++]=ae.name,ae=ae.parentNode;return er-1};_t.edges.forEach(ae=>{Ut=[],Jt=[];let Ne=ue(_t.nodes[ae.v],Ut),er=ue(_t.nodes[ae.w],Jt);for(;Ut[Ne]===Jt[er];)if(Ne--,er--,Ne<0||er<0)throw Error("No difference found between ancestor paths.");const Pr=It[Ut[Ne+1]],ur=Ut[Ne],hr=Jt[er];let fr=Pr.metaGraph.edge(ur,hr);fr||(fr=kc(ur,hr),Pr.metaGraph.setEdge(ur,hr,fr)),fr.addBaseEdge(ae,gt)})}(ht,d),ht}function js(d,L,j,q){(j?d.inEdges(L.name):d.outEdges(L.name)).forEach(ht=>{const gt=d.edge(ht);q.push(gt)})}class Xs{constructor(L){this.hierarchy=L,this.index={},this.hasSubHierarchy={},this.root=new fe(this.hierarchy.root,this.hierarchy.graphOptions),this.index[L.root.name]=this.root,this.buildSubHierarchy(L.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(L){if(L in this.hasSubHierarchy)return;this.hasSubHierarchy[L]=!0;const j=this.index[L];if(j.node.type!==I.META)return;const q=j,ht=q.node.metaGraph,gt=q.coreGraph;ht.nodes().forEach(ue=>{const ae=this.getOrCreateRenderNodeByName(ue);gt.setNode(ue,ae)}),ht.edges().forEach(ue=>{const ae=ht.edge(ue),Ne=new Ct(ae);gt.setEdge(ue.v,ue.w,Ne)});const _t=q.node.parentNode;if(!_t)return;const It=this.getRenderNodeByName(_t.name),Ut=(ue,...ae)=>ae.concat([ue?"IN":"OUT"]).join("~~"),Jt=this.hierarchy.getBridgeGraph(L);Jt.edges().forEach(ue=>{const ae=Jt.edge(ue),Ne=!!ht.node(ue.w),[er,Pr]=Ne?[ue.w,ue.v]:[ue.v,ue.w],ur=Tn=>{const wn=Ne?{v:Tn,w:L}:{v:L,w:Tn};return It.coreGraph.edge(wn)};let hr=ur(Pr);hr||(hr=ur(Ut(Ne,Pr,_t.name)));const fr=Ut(Ne,L),Xr=Ut(Ne,Pr,L);let fn=gt.node(Xr);if(!fn){let Tn=gt.node(fr);if(!Tn){const Rn={name:fr,type:I.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:m.UNSPECIFIED,inbound:Ne,attr:{}};Tn=new Rc(Rn),this.index[fr]=Tn,gt.setNode(fr,Tn)}const wn={name:Xr,type:I.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:m.UNSPECIFIED,inbound:Ne,attr:{}};fn=new Rc(wn),this.index[Xr]=fn,gt.setNode(Xr,fn),gt.setParent(Xr,fr),Tn.node.cardinality++}const tn=new Ct(ae);tn.adjoiningMetaEdge=hr,Ne?gt.setEdge(Xr,er,tn):gt.setEdge(er,Xr,tn)})}getOrCreateRenderNodeByName(L){if(!L)return null;if(L in this.index)return this.index[L];const j=this.getNodeByName(L);return j?(this.index[L]=j.isGroupNode?new fe(j,this.hierarchy.graphOptions):new Rc(j),this.index[L]):null}getRenderNodeByName(L){return this.index[L]}getNodeByName(L){return this.hierarchy.node(L)}}class Rc{constructor(L){this.node=L,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=L.width||0,this.height=L.height||0,this.displayName=L.name,this.attr=L.attr}}class Ct{constructor(L){this.metaEdge=L,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class fe extends Rc{constructor(L,j){super(L);const q=L.metaGraph.graph();j.compound=!0,this.coreGraph=Ru(q.name,y.CORE,j)}}function ze(d,L){d.node.isGroupNode&&function(j,q){const ht=z(q);j.coreGraph.nodes().map(gt=>j.coreGraph.node(gt)).forEach(gt=>{var _t,It,Ut,Jt,ue,ae;const{height:Ne,width:er}=gt;switch(gt.node.type){case I.NODE:Object.assign(gt,ht.nodeSize.node),gt.height=Ne||ht.nodeSize.node.height,gt.width=er||ht.nodeSize.node.width;break;case I.BRIDGE:Object.assign(gt,ht.nodeSize.bridge);break;case I.META:gt.expanded?ze(gt,q):(Object.assign(gt,ht.nodeSize.meta),gt.height=ht.nodeSize.meta.height,gt.width=ht.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+gt.node.type)}if(!gt.expanded){const Pr=gt.attr;(function(ur,hr=!1){if(ur.coreBox.width=ur.width,ur.coreBox.height=ur.height,!hr){const fr=`${ur.displayName}`.length,Xr=3;ur.width=Math.max(ur.coreBox.width,fr*Xr)}})(gt,q&&(gt.node.type===0&&!!(!((It=(_t=q==null?void 0:q.nodeSize)===null||_t===void 0?void 0:_t.meta)===null||It===void 0)&&It.width)||gt.node.type===1&&(!!(!((Jt=(Ut=q==null?void 0:q.nodeSize)===null||Ut===void 0?void 0:Ut.node)===null||Jt===void 0)&&Jt.width)||!!Pr.width)||gt.node.type===2&&!!(!((ae=(ue=q==null?void 0:q.nodeSize)===null||ue===void 0?void 0:ue.bridge)===null||ae===void 0)&&ae.width)))}})}(d,L),d.node.type===I.META&&function(j,q){const ht=z(q),gt=ht.subScene.meta;Object.assign(j,gt);const{nodeSep:_t,rankSep:It,edgeSep:Ut,align:Jt}=ht.graph.meta,ue={nodesep:_t,ranksep:It,edgesep:Ut,align:Jt};Object.assign(j.coreBox,function(er,Pr){const{ranksep:ur,nodesep:hr,edgesep:fr,align:Xr}=Pr;Object.assign(er.graph(),{ranksep:ur,nodesep:hr,edgesep:fr,align:Xr});const fn=[];if(er.nodes().forEach(Kn=>{er.node(Kn).node.type!==I.BRIDGE&&fn.push(Kn)}),!fn.length)return{width:0,height:0};yh(er);let tn=1/0,Tn=1/0,wn=-1/0,Rn=-1/0;return fn.forEach(Kn=>{const Fn=er.node(Kn),Vi=.5*Fn.width,Qn=Fn.x-Vi,oa=Fn.x+Vi;tn=Qn<tn?Qn:tn,wn=oa>wn?oa:wn;const Di=.5*Fn.height,ui=Fn.y-Di,Qi=Fn.y+Di;Tn=ui<Tn?ui:Tn,Rn=Qi>Rn?Qi:Rn}),er.edges().forEach(Kn=>{const Fn=er.edge(Kn),Vi=er.node(Fn.metaEdge.v),Qn=er.node(Fn.metaEdge.w);if(Fn.points.length===3&&function(ui){let Qi=wr(ui[0],ui[1]);for(let sa=1;sa<ui.length-1;sa++){const Sa=wr(ui[sa],ui[sa+1]);if(Math.abs(Sa-Qi)>1)return!1;Qi=Sa}return!0}(Fn.points)){if(Vi!=null){const ui=Vi.expanded?Vi.x:Rr(Vi);Fn.points[0].x=ui}if(Qn!=null){const ui=Qn.expanded?Qn.x:Rr(Qn);Fn.points[2].x=ui}Fn.points=[Fn.points[0],Fn.points[1]]}const oa=Fn.points[Fn.points.length-2];Qn!=null&&(Fn.points[Fn.points.length-1]=br(oa,Qn));const Di=Fn.points[1];Vi!=null&&(Fn.points[0]=br(Di,Vi)),Fn.points.forEach(ui=>{tn=ui.x<tn?ui.x:tn,wn=ui.x>wn?ui.x:wn,Tn=ui.y<Tn?ui.y:Tn,Rn=ui.y>Rn?ui.y:Rn})}),er.nodes().forEach(Kn=>{const Fn=er.node(Kn);Fn.x-=tn,Fn.y-=Tn}),er.edges().forEach(Kn=>{er.edge(Kn).points.forEach(Fn=>{Fn.x-=tn,Fn.y-=Tn})}),{width:wn-tn,height:Rn-Tn}}(j.coreGraph,ue));let ae=0;j.coreGraph.nodeCount()>0&&ae++;const Ne=ae<=1?0:ae;j.coreBox.width+=Ne+Ne,j.coreBox.height=gt.labelHeight+j.coreBox.height,j.width=j.coreBox.width+gt.paddingLeft+gt.paddingRight,j.height=j.paddingTop+j.coreBox.height+j.paddingBottom}(d,L)}function wr(d,L){const j=L.x-d.x,q=L.y-d.y;return 180*Math.atan(q/j)/Math.PI}function Rr(d){return d.expanded?d.x:d.x-d.width/2+0+d.coreBox.width/2}function br(d,L){const j=L.expanded?L.x:Rr(L),q=L.y,ht=d.x-j,gt=d.y-q;let _t,It,Ut=L.expanded?L.width:L.coreBox.width,Jt=L.expanded?L.height:L.coreBox.height;return Math.abs(gt)*Ut/2>Math.abs(ht)*Jt/2?(gt<0&&(Jt=-Jt),_t=gt===0?0:Jt/2*ht/gt,It=Jt/2):(ht<0&&(Ut=-Ut),_t=Ut/2,It=ht===0?0:Ut/2*gt/ht),{x:j+_t,y:q+It}}function Ar(d,L,j){var q,ht,gt,_t;const It=d.nodes.filter((ae,Ne,er)=>er.findIndex(Pr=>Pr.id===ae.id)!==Ne).map(ae=>ae.id);if(It.length)throw new Error(`Duplicated ids found: ${It.join(", ")}`);const Ut=function(ae){const Ne={nodes:[]},er=ae.compound,Pr=Object.keys(er||{}),ur=new Map,hr=(Xr,fn=[])=>{if(ur.has(Xr))return ur.get(Xr);for(let tn=0;tn<Pr.length;tn++){let Tn=Pr[tn];if(er&&er[Tn].indexOf(Xr)!==-1)return fn.unshift(Tn),hr(Tn,fn)}return fn.length===0&&ur.set(Xr,fn),fn},fr=Xr=>ae.edges.filter(fn=>fn.w===Xr).map(fn=>({name:fn.v}));return ae.nodes.forEach(Xr=>{const fn=Xr.id,tn=[...hr(fn),fn];let Tn=fr(fn);Ne.nodes.push({name:fn,path:tn,inputs:Tn,width:Xr.width,height:Xr.height,attr:Object.assign({},Xr)})}),Ne}(d),Jt=function(ae,Ne){const er=(ur,hr)=>{for(let fr of hr.values())if(fr.includes(ur))return!0;return!1},Pr=(ur,hr=[])=>{if(Object.keys(ur).length===0)return[...new Set(hr)];const fr=new Map(Object.keys(ur).map(fn=>[fn,ur[fn]])),Xr={};for(let[fn,tn]of fr)er(fn,fr)?Xr[fn]=tn:hr=hr.concat(fn,tn);return Pr(Xr,hr)};return Pr(ae).filter(ur=>Ne.includes(ur))}(d.compound||{},(L==null?void 0:L.expanded)||[]),ue=function(ae,Ne){return function(er){return new Xs(er)}(io(Tl(ae),Ne))}(Ut,{rankDirection:((ht=(q=j==null?void 0:j.graph)===null||q===void 0?void 0:q.meta)===null||ht===void 0?void 0:ht.rankDir)||(L==null?void 0:L.rankDirection)||x.graph.meta.rankDir,align:((_t=(gt=j==null?void 0:j.graph)===null||gt===void 0?void 0:gt.meta)===null||_t===void 0?void 0:_t.align)||x.graph.meta.align});return function(ae,Ne){Ne.forEach(er=>{const Pr=ae.getRenderInfoNodes().find(fr=>fr.displayName===er);let ur=Pr&&Pr.node&&Pr.node.name||"";const hr=ae.getRenderNodeByName(ur);if(!hr)throw new Error(`No nodes found: ${ur}`);hr.expanded=!0,ae.buildSubHierarchy(ur)})}(ue,Jt),ze(ue.root,j),Kr(ue.root)}function jr(d,L=!1){const j=JSON.parse(JSON.stringify(d)),q={nodes:[j],edges:[...j.edges]};return j.nodes.forEach(function ht(gt){(gt.type===0||gt.type===1)&&q.nodes.push(gt),gt.type===0&&(q.edges=q.edges.concat(gt.edges)),Array.isArray(gt.nodes)&&gt.nodes.forEach(ht)}),L&&q.nodes.forEach(ht=>{const gt=q.nodes.find(_t=>_t.id===ht.parentNodeName);if(gt){const _t=gt.x-gt.width/2+gt.paddingLeft,It=gt.y-gt.height/2+gt.labelHeight+gt.paddingTop;gt.id!==E&&(ht.x+=_t,ht.y+=It),ht.type===0&&ht.edges.forEach(Ut=>{Ut.points.forEach(Jt=>{Jt.x+=ht.x-ht.width/2+ht.paddingLeft,Jt.y+=ht.y-ht.height/2+ht.labelHeight+ht.paddingTop})})}}),q}function Hr(d,L,j,q){var ht,gt;let _t=[];const It=((ht=j.find(ae=>ae.id===d))===null||ht===void 0?void 0:ht.path)||[],Ut=((gt=j.find(ae=>ae.id===L))===null||gt===void 0?void 0:gt.path)||[],Jt=[E,...It].slice(0,It.length).reverse(),ue=[E,...Ut].slice(0,Ut.length);return Jt.forEach(ae=>{const Ne=j.find(er=>er.id===ae);_t=_t.concat(Ne.edges.filter(er=>er.baseEdgeList.some(Pr=>Pr.v===((q==null?void 0:q.v)||d)&&Pr.w===((q==null?void 0:q.w)||L))))}),ue.filter(ae=>!Jt.includes(ae)).forEach(ae=>{const Ne=j.find(er=>er.id===ae);_t=_t.concat(Ne.edges.filter(er=>er.baseEdgeList.some(Pr=>Pr.v===((q==null?void 0:q.v)||d)&&Pr.w===((q==null?void 0:q.w)||L))))}),_t}function Kr(d){const L=d.coreGraph.nodes().map(q=>d.coreGraph.node(q));return Object.assign(Object.assign({},Vr(d)),{expanded:d.expanded,nodes:d.expanded?(j=L,j.map(q=>q.node.type===I.META?Kr(q):Vr(q))):[],edges:d.expanded?Qr(d):[]});var j}function Vr(d){return{id:d.node.name,name:d.node.name,type:d.node.type,cardinality:d.node.cardinality,attr:d.attr,parentNodeName:d.node.parentNode?d.node.parentNode.name:null,coreBox:Object.assign({},d.coreBox),x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius,labelHeight:d.labelHeight,labelOffset:d.labelOffset,outboxWidth:d.outboxWidth,paddingLeft:d.paddingLeft,paddingTop:d.paddingTop,paddingRight:d.paddingRight,paddingBottom:d.paddingBottom,path:d.node.path}}function Qr(d){return d.coreGraph.edges().map(L=>({renderInfoEdge:d.coreGraph.edge(L),edge:L})).filter(({renderInfoEdge:L})=>L.metaEdge).map(({edge:L,renderInfoEdge:j})=>{const q=function(ht,gt){const _t=gt.points.map(It=>Object.assign({},It));if(gt.adjoiningMetaEdge){const It=gt.adjoiningMetaEdge.points,Ut=gt.metaEdge.inbound,Jt=Ut?It[It.length-1]:It[0],ue=_t[Ut?0:_t.length-1],ae=ht.x-ht.width/2,Ne=ht.y-ht.height/2,er=Jt.x-ae,Pr=Jt.y-Ne,ur=-ht.paddingLeft,hr=-(ht.paddingTop+ht.labelHeight);ue.x=er+ur,ue.y=Pr+hr}return _t}(d,j);return{adjoiningEdge:j.adjoiningMetaEdge?{w:j.adjoiningMetaEdge.metaEdge.w,v:j.adjoiningMetaEdge.metaEdge.v}:null,inbound:j.metaEdge.inbound,w:L.w,v:L.v,points:q,weight:j.weight,baseEdgeList:j.metaEdge.baseEdgeList,parentNodeName:d.node.name}})}},47897:function(le,S,M){"use strict";M.r(S),M.d(S,{ARRAY_TYPE:function(){return z},EPSILON:function(){return x},RANDOM:function(){return k},equals:function(){return m},setMatrixArrayType:function(){return E},toRadian:function(){return I}});var x=1e-6,z=typeof Float32Array!="undefined"?Float32Array:Array,k=Math.random;function E(y){z=y}var N=Math.PI/180;function I(y){return y*N}function m(y,v){return Math.abs(y-v)<=x*Math.max(1,Math.abs(y),Math.abs(v))}Math.hypot||(Math.hypot=function(){for(var y=0,v=arguments.length;v--;)y+=arguments[v]*arguments[v];return Math.sqrt(y)})},21574:function(le,S,M){"use strict";M.r(S),M.d(S,{glMatrix:function(){return E},mat2:function(){return x},mat2d:function(){return z},mat3:function(){return ct},mat4:function(){return ie},quat:function(){return pe},quat2:function(){return k},vec2:function(){return Ht},vec3:function(){return Yt},vec4:function(){return he}});var x={};M.r(x),M.d(x,{LDU:function(){return U},add:function(){return et},adjoint:function(){return w},clone:function(){return I},copy:function(){return m},create:function(){return N},determinant:function(){return C},equals:function(){return rt},exactEquals:function(){return J},frob:function(){return W},fromRotation:function(){return K},fromScaling:function(){return Z},fromValues:function(){return v},identity:function(){return y},invert:function(){return T},mul:function(){return ft},multiply:function(){return O},multiplyScalar:function(){return mt},multiplyScalarAndAdd:function(){return pt},rotate:function(){return b},scale:function(){return l},set:function(){return p},str:function(){return X},sub:function(){return Mt},subtract:function(){return it},transpose:function(){return g}});var z={};M.r(z),M.d(z,{add:function(){return Kt},clone:function(){return Vt},copy:function(){return kt},create:function(){return zt},determinant:function(){return Nt},equals:function(){return D},exactEquals:function(){return wt},frob:function(){return Tt},fromRotation:function(){return Dt},fromScaling:function(){return At},fromTranslation:function(){return Xt},fromValues:function(){return St},identity:function(){return st},invert:function(){return re},mul:function(){return tt},multiply:function(){return be},multiplyScalar:function(){return vt},multiplyScalarAndAdd:function(){return bt},rotate:function(){return Te},scale:function(){return nr},set:function(){return qt},str:function(){return $t},sub:function(){return Ot},subtract:function(){return Ee},translate:function(){return Rt}});var k={};M.r(k),M.d(k,{add:function(){return Oe},clone:function(){return Re},conjugate:function(){return _i},copy:function(){return vr},create:function(){return Ge},dot:function(){return zn},equals:function(){return Bt},exactEquals:function(){return ot},fromMat4:function(){return Be},fromRotation:function(){return je},fromRotationTranslation:function(){return ce},fromRotationTranslationValues:function(){return Ve},fromTranslation:function(){return Le},fromValues:function(){return Je},getDual:function(){return Cr},getReal:function(){return yr},getTranslation:function(){return un},identity:function(){return or},invert:function(){return hi},len:function(){return Pt},length:function(){return pi},lerp:function(){return Hn},mul:function(){return Gn},multiply:function(){return Cn},normalize:function(){return G},rotateAroundAxis:function(){return Bn},rotateByQuatAppend:function(){return ln},rotateByQuatPrepend:function(){return pn},rotateX:function(){return Un},rotateY:function(){return nn},rotateZ:function(){return vn},scale:function(){return bi},set:function(){return Ae},setDual:function(){return Mr},setReal:function(){return zr},sqrLen:function(){return H},squaredLength:function(){return Lt},str:function(){return F},translate:function(){return hn}});var E=M(47897);function N(){var at=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(at[1]=0,at[2]=0),at[0]=1,at[3]=1,at}function I(at){var yt=new E.ARRAY_TYPE(4);return yt[0]=at[0],yt[1]=at[1],yt[2]=at[2],yt[3]=at[3],yt}function m(at,yt){return at[0]=yt[0],at[1]=yt[1],at[2]=yt[2],at[3]=yt[3],at}function y(at){return at[0]=1,at[1]=0,at[2]=0,at[3]=1,at}function v(at,yt,te,Me){var _e=new E.ARRAY_TYPE(4);return _e[0]=at,_e[1]=yt,_e[2]=te,_e[3]=Me,_e}function p(at,yt,te,Me,_e){return at[0]=yt,at[1]=te,at[2]=Me,at[3]=_e,at}function g(at,yt){if(at===yt){var te=yt[1];at[1]=yt[2],at[2]=te}else at[0]=yt[0],at[1]=yt[2],at[2]=yt[1],at[3]=yt[3];return at}function T(at,yt){var te=yt[0],Me=yt[1],_e=yt[2],tr=yt[3],sr=te*tr-_e*Me;return sr?(sr=1/sr,at[0]=tr*sr,at[1]=-Me*sr,at[2]=-_e*sr,at[3]=te*sr,at):null}function w(at,yt){var te=yt[0];return at[0]=yt[3],at[1]=-yt[1],at[2]=-yt[2],at[3]=te,at}function C(at){return at[0]*at[3]-at[2]*at[1]}function O(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=te[0],Fe=te[1],qe=te[2],_r=te[3];return at[0]=Me*ge+tr*Fe,at[1]=_e*ge+sr*Fe,at[2]=Me*qe+tr*_r,at[3]=_e*qe+sr*_r,at}function b(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=Math.sin(te),Fe=Math.cos(te);return at[0]=Me*Fe+tr*ge,at[1]=_e*Fe+sr*ge,at[2]=Me*-ge+tr*Fe,at[3]=_e*-ge+sr*Fe,at}function l(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=te[0],Fe=te[1];return at[0]=Me*ge,at[1]=_e*ge,at[2]=tr*Fe,at[3]=sr*Fe,at}function K(at,yt){var te=Math.sin(yt),Me=Math.cos(yt);return at[0]=Me,at[1]=te,at[2]=-te,at[3]=Me,at}function Z(at,yt){return at[0]=yt[0],at[1]=0,at[2]=0,at[3]=yt[1],at}function X(at){return"mat2("+at[0]+", "+at[1]+", "+at[2]+", "+at[3]+")"}function W(at){return Math.hypot(at[0],at[1],at[2],at[3])}function U(at,yt,te,Me){return at[2]=Me[2]/Me[0],te[0]=Me[0],te[1]=Me[1],te[3]=Me[3]-at[2]*te[1],[at,yt,te]}function et(at,yt,te){return at[0]=yt[0]+te[0],at[1]=yt[1]+te[1],at[2]=yt[2]+te[2],at[3]=yt[3]+te[3],at}function it(at,yt,te){return at[0]=yt[0]-te[0],at[1]=yt[1]-te[1],at[2]=yt[2]-te[2],at[3]=yt[3]-te[3],at}function J(at,yt){return at[0]===yt[0]&&at[1]===yt[1]&&at[2]===yt[2]&&at[3]===yt[3]}function rt(at,yt){var te=at[0],Me=at[1],_e=at[2],tr=at[3],sr=yt[0],ge=yt[1],Fe=yt[2],qe=yt[3];return Math.abs(te-sr)<=E.EPSILON*Math.max(1,Math.abs(te),Math.abs(sr))&&Math.abs(Me-ge)<=E.EPSILON*Math.max(1,Math.abs(Me),Math.abs(ge))&&Math.abs(_e-Fe)<=E.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Fe))&&Math.abs(tr-qe)<=E.EPSILON*Math.max(1,Math.abs(tr),Math.abs(qe))}function mt(at,yt,te){return at[0]=yt[0]*te,at[1]=yt[1]*te,at[2]=yt[2]*te,at[3]=yt[3]*te,at}function pt(at,yt,te,Me){return at[0]=yt[0]+te[0]*Me,at[1]=yt[1]+te[1]*Me,at[2]=yt[2]+te[2]*Me,at[3]=yt[3]+te[3]*Me,at}var ft=O,Mt=it;function zt(){var at=new E.ARRAY_TYPE(6);return E.ARRAY_TYPE!=Float32Array&&(at[1]=0,at[2]=0,at[4]=0,at[5]=0),at[0]=1,at[3]=1,at}function Vt(at){var yt=new E.ARRAY_TYPE(6);return yt[0]=at[0],yt[1]=at[1],yt[2]=at[2],yt[3]=at[3],yt[4]=at[4],yt[5]=at[5],yt}function kt(at,yt){return at[0]=yt[0],at[1]=yt[1],at[2]=yt[2],at[3]=yt[3],at[4]=yt[4],at[5]=yt[5],at}function st(at){return at[0]=1,at[1]=0,at[2]=0,at[3]=1,at[4]=0,at[5]=0,at}function St(at,yt,te,Me,_e,tr){var sr=new E.ARRAY_TYPE(6);return sr[0]=at,sr[1]=yt,sr[2]=te,sr[3]=Me,sr[4]=_e,sr[5]=tr,sr}function qt(at,yt,te,Me,_e,tr,sr){return at[0]=yt,at[1]=te,at[2]=Me,at[3]=_e,at[4]=tr,at[5]=sr,at}function re(at,yt){var te=yt[0],Me=yt[1],_e=yt[2],tr=yt[3],sr=yt[4],ge=yt[5],Fe=te*tr-Me*_e;return Fe?(Fe=1/Fe,at[0]=tr*Fe,at[1]=-Me*Fe,at[2]=-_e*Fe,at[3]=te*Fe,at[4]=(_e*ge-tr*sr)*Fe,at[5]=(Me*sr-te*ge)*Fe,at):null}function Nt(at){return at[0]*at[3]-at[1]*at[2]}function be(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=te[0],_r=te[1],Er=te[2],ye=te[3],Ft=te[4],ne=te[5];return at[0]=Me*qe+tr*_r,at[1]=_e*qe+sr*_r,at[2]=Me*Er+tr*ye,at[3]=_e*Er+sr*ye,at[4]=Me*Ft+tr*ne+ge,at[5]=_e*Ft+sr*ne+Fe,at}function Te(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=Math.sin(te),_r=Math.cos(te);return at[0]=Me*_r+tr*qe,at[1]=_e*_r+sr*qe,at[2]=Me*-qe+tr*_r,at[3]=_e*-qe+sr*_r,at[4]=ge,at[5]=Fe,at}function nr(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=te[0],_r=te[1];return at[0]=Me*qe,at[1]=_e*qe,at[2]=tr*_r,at[3]=sr*_r,at[4]=ge,at[5]=Fe,at}function Rt(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=te[0],_r=te[1];return at[0]=Me,at[1]=_e,at[2]=tr,at[3]=sr,at[4]=Me*qe+tr*_r+ge,at[5]=_e*qe+sr*_r+Fe,at}function Dt(at,yt){var te=Math.sin(yt),Me=Math.cos(yt);return at[0]=Me,at[1]=te,at[2]=-te,at[3]=Me,at[4]=0,at[5]=0,at}function At(at,yt){return at[0]=yt[0],at[1]=0,at[2]=0,at[3]=yt[1],at[4]=0,at[5]=0,at}function Xt(at,yt){return at[0]=1,at[1]=0,at[2]=0,at[3]=1,at[4]=yt[0],at[5]=yt[1],at}function $t(at){return"mat2d("+at[0]+", "+at[1]+", "+at[2]+", "+at[3]+", "+at[4]+", "+at[5]+")"}function Tt(at){return Math.hypot(at[0],at[1],at[2],at[3],at[4],at[5],1)}function Kt(at,yt,te){return at[0]=yt[0]+te[0],at[1]=yt[1]+te[1],at[2]=yt[2]+te[2],at[3]=yt[3]+te[3],at[4]=yt[4]+te[4],at[5]=yt[5]+te[5],at}function Ee(at,yt,te){return at[0]=yt[0]-te[0],at[1]=yt[1]-te[1],at[2]=yt[2]-te[2],at[3]=yt[3]-te[3],at[4]=yt[4]-te[4],at[5]=yt[5]-te[5],at}function vt(at,yt,te){return at[0]=yt[0]*te,at[1]=yt[1]*te,at[2]=yt[2]*te,at[3]=yt[3]*te,at[4]=yt[4]*te,at[5]=yt[5]*te,at}function bt(at,yt,te,Me){return at[0]=yt[0]+te[0]*Me,at[1]=yt[1]+te[1]*Me,at[2]=yt[2]+te[2]*Me,at[3]=yt[3]+te[3]*Me,at[4]=yt[4]+te[4]*Me,at[5]=yt[5]+te[5]*Me,at}function wt(at,yt){return at[0]===yt[0]&&at[1]===yt[1]&&at[2]===yt[2]&&at[3]===yt[3]&&at[4]===yt[4]&&at[5]===yt[5]}function D(at,yt){var te=at[0],Me=at[1],_e=at[2],tr=at[3],sr=at[4],ge=at[5],Fe=yt[0],qe=yt[1],_r=yt[2],Er=yt[3],ye=yt[4],Ft=yt[5];return Math.abs(te-Fe)<=E.EPSILON*Math.max(1,Math.abs(te),Math.abs(Fe))&&Math.abs(Me-qe)<=E.EPSILON*Math.max(1,Math.abs(Me),Math.abs(qe))&&Math.abs(_e-_r)<=E.EPSILON*Math.max(1,Math.abs(_e),Math.abs(_r))&&Math.abs(tr-Er)<=E.EPSILON*Math.max(1,Math.abs(tr),Math.abs(Er))&&Math.abs(sr-ye)<=E.EPSILON*Math.max(1,Math.abs(sr),Math.abs(ye))&&Math.abs(ge-Ft)<=E.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Ft))}var tt=be,Ot=Ee,ct=M(65316),ie=M(96518),pe=M(14717);function Ge(){var at=new E.ARRAY_TYPE(8);return E.ARRAY_TYPE!=Float32Array&&(at[0]=0,at[1]=0,at[2]=0,at[4]=0,at[5]=0,at[6]=0,at[7]=0),at[3]=1,at}function Re(at){var yt=new E.ARRAY_TYPE(8);return yt[0]=at[0],yt[1]=at[1],yt[2]=at[2],yt[3]=at[3],yt[4]=at[4],yt[5]=at[5],yt[6]=at[6],yt[7]=at[7],yt}function Je(at,yt,te,Me,_e,tr,sr,ge){var Fe=new E.ARRAY_TYPE(8);return Fe[0]=at,Fe[1]=yt,Fe[2]=te,Fe[3]=Me,Fe[4]=_e,Fe[5]=tr,Fe[6]=sr,Fe[7]=ge,Fe}function Ve(at,yt,te,Me,_e,tr,sr){var ge=new E.ARRAY_TYPE(8);ge[0]=at,ge[1]=yt,ge[2]=te,ge[3]=Me;var Fe=_e*.5,qe=tr*.5,_r=sr*.5;return ge[4]=Fe*Me+qe*te-_r*yt,ge[5]=qe*Me+_r*at-Fe*te,ge[6]=_r*Me+Fe*yt-qe*at,ge[7]=-Fe*at-qe*yt-_r*te,ge}function ce(at,yt,te){var Me=te[0]*.5,_e=te[1]*.5,tr=te[2]*.5,sr=yt[0],ge=yt[1],Fe=yt[2],qe=yt[3];return at[0]=sr,at[1]=ge,at[2]=Fe,at[3]=qe,at[4]=Me*qe+_e*Fe-tr*ge,at[5]=_e*qe+tr*sr-Me*Fe,at[6]=tr*qe+Me*ge-_e*sr,at[7]=-Me*sr-_e*ge-tr*Fe,at}function Le(at,yt){return at[0]=0,at[1]=0,at[2]=0,at[3]=1,at[4]=yt[0]*.5,at[5]=yt[1]*.5,at[6]=yt[2]*.5,at[7]=0,at}function je(at,yt){return at[0]=yt[0],at[1]=yt[1],at[2]=yt[2],at[3]=yt[3],at[4]=0,at[5]=0,at[6]=0,at[7]=0,at}function Be(at,yt){var te=pe.create();ie.getRotation(te,yt);var Me=new E.ARRAY_TYPE(3);return ie.getTranslation(Me,yt),ce(at,te,Me),at}function vr(at,yt){return at[0]=yt[0],at[1]=yt[1],at[2]=yt[2],at[3]=yt[3],at[4]=yt[4],at[5]=yt[5],at[6]=yt[6],at[7]=yt[7],at}function or(at){return at[0]=0,at[1]=0,at[2]=0,at[3]=1,at[4]=0,at[5]=0,at[6]=0,at[7]=0,at}function Ae(at,yt,te,Me,_e,tr,sr,ge,Fe){return at[0]=yt,at[1]=te,at[2]=Me,at[3]=_e,at[4]=tr,at[5]=sr,at[6]=ge,at[7]=Fe,at}var yr=pe.copy;function Cr(at,yt){return at[0]=yt[4],at[1]=yt[5],at[2]=yt[6],at[3]=yt[7],at}var zr=pe.copy;function Mr(at,yt){return at[4]=yt[0],at[5]=yt[1],at[6]=yt[2],at[7]=yt[3],at}function un(at,yt){var te=yt[4],Me=yt[5],_e=yt[6],tr=yt[7],sr=-yt[0],ge=-yt[1],Fe=-yt[2],qe=yt[3];return at[0]=(te*qe+tr*sr+Me*Fe-_e*ge)*2,at[1]=(Me*qe+tr*ge+_e*sr-te*Fe)*2,at[2]=(_e*qe+tr*Fe+te*ge-Me*sr)*2,at}function hn(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=te[0]*.5,Fe=te[1]*.5,qe=te[2]*.5,_r=yt[4],Er=yt[5],ye=yt[6],Ft=yt[7];return at[0]=Me,at[1]=_e,at[2]=tr,at[3]=sr,at[4]=sr*ge+_e*qe-tr*Fe+_r,at[5]=sr*Fe+tr*ge-Me*qe+Er,at[6]=sr*qe+Me*Fe-_e*ge+ye,at[7]=-Me*ge-_e*Fe-tr*qe+Ft,at}function Un(at,yt,te){var Me=-yt[0],_e=-yt[1],tr=-yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=yt[6],_r=yt[7],Er=ge*sr+_r*Me+Fe*tr-qe*_e,ye=Fe*sr+_r*_e+qe*Me-ge*tr,Ft=qe*sr+_r*tr+ge*_e-Fe*Me,ne=_r*sr-ge*Me-Fe*_e-qe*tr;return pe.rotateX(at,yt,te),Me=at[0],_e=at[1],tr=at[2],sr=at[3],at[4]=Er*sr+ne*Me+ye*tr-Ft*_e,at[5]=ye*sr+ne*_e+Ft*Me-Er*tr,at[6]=Ft*sr+ne*tr+Er*_e-ye*Me,at[7]=ne*sr-Er*Me-ye*_e-Ft*tr,at}function nn(at,yt,te){var Me=-yt[0],_e=-yt[1],tr=-yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=yt[6],_r=yt[7],Er=ge*sr+_r*Me+Fe*tr-qe*_e,ye=Fe*sr+_r*_e+qe*Me-ge*tr,Ft=qe*sr+_r*tr+ge*_e-Fe*Me,ne=_r*sr-ge*Me-Fe*_e-qe*tr;return pe.rotateY(at,yt,te),Me=at[0],_e=at[1],tr=at[2],sr=at[3],at[4]=Er*sr+ne*Me+ye*tr-Ft*_e,at[5]=ye*sr+ne*_e+Ft*Me-Er*tr,at[6]=Ft*sr+ne*tr+Er*_e-ye*Me,at[7]=ne*sr-Er*Me-ye*_e-Ft*tr,at}function vn(at,yt,te){var Me=-yt[0],_e=-yt[1],tr=-yt[2],sr=yt[3],ge=yt[4],Fe=yt[5],qe=yt[6],_r=yt[7],Er=ge*sr+_r*Me+Fe*tr-qe*_e,ye=Fe*sr+_r*_e+qe*Me-ge*tr,Ft=qe*sr+_r*tr+ge*_e-Fe*Me,ne=_r*sr-ge*Me-Fe*_e-qe*tr;return pe.rotateZ(at,yt,te),Me=at[0],_e=at[1],tr=at[2],sr=at[3],at[4]=Er*sr+ne*Me+ye*tr-Ft*_e,at[5]=ye*sr+ne*_e+Ft*Me-Er*tr,at[6]=Ft*sr+ne*tr+Er*_e-ye*Me,at[7]=ne*sr-Er*Me-ye*_e-Ft*tr,at}function ln(at,yt,te){var Me=te[0],_e=te[1],tr=te[2],sr=te[3],ge=yt[0],Fe=yt[1],qe=yt[2],_r=yt[3];return at[0]=ge*sr+_r*Me+Fe*tr-qe*_e,at[1]=Fe*sr+_r*_e+qe*Me-ge*tr,at[2]=qe*sr+_r*tr+ge*_e-Fe*Me,at[3]=_r*sr-ge*Me-Fe*_e-qe*tr,ge=yt[4],Fe=yt[5],qe=yt[6],_r=yt[7],at[4]=ge*sr+_r*Me+Fe*tr-qe*_e,at[5]=Fe*sr+_r*_e+qe*Me-ge*tr,at[6]=qe*sr+_r*tr+ge*_e-Fe*Me,at[7]=_r*sr-ge*Me-Fe*_e-qe*tr,at}function pn(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=te[0],Fe=te[1],qe=te[2],_r=te[3];return at[0]=Me*_r+sr*ge+_e*qe-tr*Fe,at[1]=_e*_r+sr*Fe+tr*ge-Me*qe,at[2]=tr*_r+sr*qe+Me*Fe-_e*ge,at[3]=sr*_r-Me*ge-_e*Fe-tr*qe,ge=te[4],Fe=te[5],qe=te[6],_r=te[7],at[4]=Me*_r+sr*ge+_e*qe-tr*Fe,at[5]=_e*_r+sr*Fe+tr*ge-Me*qe,at[6]=tr*_r+sr*qe+Me*Fe-_e*ge,at[7]=sr*_r-Me*ge-_e*Fe-tr*qe,at}function Bn(at,yt,te,Me){if(Math.abs(Me)<E.EPSILON)return vr(at,yt);var _e=Math.hypot(te[0],te[1],te[2]);Me=Me*.5;var tr=Math.sin(Me),sr=tr*te[0]/_e,ge=tr*te[1]/_e,Fe=tr*te[2]/_e,qe=Math.cos(Me),_r=yt[0],Er=yt[1],ye=yt[2],Ft=yt[3];at[0]=_r*qe+Ft*sr+Er*Fe-ye*ge,at[1]=Er*qe+Ft*ge+ye*sr-_r*Fe,at[2]=ye*qe+Ft*Fe+_r*ge-Er*sr,at[3]=Ft*qe-_r*sr-Er*ge-ye*Fe;var ne=yt[4],Pe=yt[5],Ce=yt[6],Ue=yt[7];return at[4]=ne*qe+Ue*sr+Pe*Fe-Ce*ge,at[5]=Pe*qe+Ue*ge+Ce*sr-ne*Fe,at[6]=Ce*qe+Ue*Fe+ne*ge-Pe*sr,at[7]=Ue*qe-ne*sr-Pe*ge-Ce*Fe,at}function Oe(at,yt,te){return at[0]=yt[0]+te[0],at[1]=yt[1]+te[1],at[2]=yt[2]+te[2],at[3]=yt[3]+te[3],at[4]=yt[4]+te[4],at[5]=yt[5]+te[5],at[6]=yt[6]+te[6],at[7]=yt[7]+te[7],at}function Cn(at,yt,te){var Me=yt[0],_e=yt[1],tr=yt[2],sr=yt[3],ge=te[4],Fe=te[5],qe=te[6],_r=te[7],Er=yt[4],ye=yt[5],Ft=yt[6],ne=yt[7],Pe=te[0],Ce=te[1],Ue=te[2],Xe=te[3];return at[0]=Me*Xe+sr*Pe+_e*Ue-tr*Ce,at[1]=_e*Xe+sr*Ce+tr*Pe-Me*Ue,at[2]=tr*Xe+sr*Ue+Me*Ce-_e*Pe,at[3]=sr*Xe-Me*Pe-_e*Ce-tr*Ue,at[4]=Me*_r+sr*ge+_e*qe-tr*Fe+Er*Xe+ne*Pe+ye*Ue-Ft*Ce,at[5]=_e*_r+sr*Fe+tr*ge-Me*qe+ye*Xe+ne*Ce+Ft*Pe-Er*Ue,at[6]=tr*_r+sr*qe+Me*Fe-_e*ge+Ft*Xe+ne*Ue+Er*Ce-ye*Pe,at[7]=sr*_r-Me*ge-_e*Fe-tr*qe+ne*Xe-Er*Pe-ye*Ce-Ft*Ue,at}var Gn=Cn;function bi(at,yt,te){return at[0]=yt[0]*te,at[1]=yt[1]*te,at[2]=yt[2]*te,at[3]=yt[3]*te,at[4]=yt[4]*te,at[5]=yt[5]*te,at[6]=yt[6]*te,at[7]=yt[7]*te,at}var zn=pe.dot;function Hn(at,yt,te,Me){var _e=1-Me;return zn(yt,te)<0&&(Me=-Me),at[0]=yt[0]*_e+te[0]*Me,at[1]=yt[1]*_e+te[1]*Me,at[2]=yt[2]*_e+te[2]*Me,at[3]=yt[3]*_e+te[3]*Me,at[4]=yt[4]*_e+te[4]*Me,at[5]=yt[5]*_e+te[5]*Me,at[6]=yt[6]*_e+te[6]*Me,at[7]=yt[7]*_e+te[7]*Me,at}function hi(at,yt){var te=Lt(yt);return at[0]=-yt[0]/te,at[1]=-yt[1]/te,at[2]=-yt[2]/te,at[3]=yt[3]/te,at[4]=-yt[4]/te,at[5]=-yt[5]/te,at[6]=-yt[6]/te,at[7]=yt[7]/te,at}function _i(at,yt){return at[0]=-yt[0],at[1]=-yt[1],at[2]=-yt[2],at[3]=yt[3],at[4]=-yt[4],at[5]=-yt[5],at[6]=-yt[6],at[7]=yt[7],at}var pi=pe.length,Pt=pi,Lt=pe.squaredLength,H=Lt;function G(at,yt){var te=Lt(yt);if(te>0){te=Math.sqrt(te);var Me=yt[0]/te,_e=yt[1]/te,tr=yt[2]/te,sr=yt[3]/te,ge=yt[4],Fe=yt[5],qe=yt[6],_r=yt[7],Er=Me*ge+_e*Fe+tr*qe+sr*_r;at[0]=Me,at[1]=_e,at[2]=tr,at[3]=sr,at[4]=(ge-Me*Er)/te,at[5]=(Fe-_e*Er)/te,at[6]=(qe-tr*Er)/te,at[7]=(_r-sr*Er)/te}return at}function F(at){return"quat2("+at[0]+", "+at[1]+", "+at[2]+", "+at[3]+", "+at[4]+", "+at[5]+", "+at[6]+", "+at[7]+")"}function ot(at,yt){return at[0]===yt[0]&&at[1]===yt[1]&&at[2]===yt[2]&&at[3]===yt[3]&&at[4]===yt[4]&&at[5]===yt[5]&&at[6]===yt[6]&&at[7]===yt[7]}function Bt(at,yt){var te=at[0],Me=at[1],_e=at[2],tr=at[3],sr=at[4],ge=at[5],Fe=at[6],qe=at[7],_r=yt[0],Er=yt[1],ye=yt[2],Ft=yt[3],ne=yt[4],Pe=yt[5],Ce=yt[6],Ue=yt[7];return Math.abs(te-_r)<=E.EPSILON*Math.max(1,Math.abs(te),Math.abs(_r))&&Math.abs(Me-Er)<=E.EPSILON*Math.max(1,Math.abs(Me),Math.abs(Er))&&Math.abs(_e-ye)<=E.EPSILON*Math.max(1,Math.abs(_e),Math.abs(ye))&&Math.abs(tr-Ft)<=E.EPSILON*Math.max(1,Math.abs(tr),Math.abs(Ft))&&Math.abs(sr-ne)<=E.EPSILON*Math.max(1,Math.abs(sr),Math.abs(ne))&&Math.abs(ge-Pe)<=E.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Pe))&&Math.abs(Fe-Ce)<=E.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(Ce))&&Math.abs(qe-Ue)<=E.EPSILON*Math.max(1,Math.abs(qe),Math.abs(Ue))}var Ht=M(20663),Yt=M(91606),he=M(59196)},65316:function(le,S,M){"use strict";M.r(S),M.d(S,{add:function(){return rt},adjoint:function(){return g},clone:function(){return E},copy:function(){return N},create:function(){return z},determinant:function(){return T},equals:function(){return zt},exactEquals:function(){return Mt},frob:function(){return J},fromMat2d:function(){return X},fromMat4:function(){return k},fromQuat:function(){return W},fromRotation:function(){return K},fromScaling:function(){return Z},fromTranslation:function(){return l},fromValues:function(){return I},identity:function(){return y},invert:function(){return p},mul:function(){return Vt},multiply:function(){return w},multiplyScalar:function(){return pt},multiplyScalarAndAdd:function(){return ft},normalFromMat4:function(){return U},projection:function(){return et},rotate:function(){return O},scale:function(){return b},set:function(){return m},str:function(){return it},sub:function(){return kt},subtract:function(){return mt},translate:function(){return C},transpose:function(){return v}});var x=M(47897);function z(){var st=new x.ARRAY_TYPE(9);return x.ARRAY_TYPE!=Float32Array&&(st[1]=0,st[2]=0,st[3]=0,st[5]=0,st[6]=0,st[7]=0),st[0]=1,st[4]=1,st[8]=1,st}function k(st,St){return st[0]=St[0],st[1]=St[1],st[2]=St[2],st[3]=St[4],st[4]=St[5],st[5]=St[6],st[6]=St[8],st[7]=St[9],st[8]=St[10],st}function E(st){var St=new x.ARRAY_TYPE(9);return St[0]=st[0],St[1]=st[1],St[2]=st[2],St[3]=st[3],St[4]=st[4],St[5]=st[5],St[6]=st[6],St[7]=st[7],St[8]=st[8],St}function N(st,St){return st[0]=St[0],st[1]=St[1],st[2]=St[2],st[3]=St[3],st[4]=St[4],st[5]=St[5],st[6]=St[6],st[7]=St[7],st[8]=St[8],st}function I(st,St,qt,re,Nt,be,Te,nr,Rt){var Dt=new x.ARRAY_TYPE(9);return Dt[0]=st,Dt[1]=St,Dt[2]=qt,Dt[3]=re,Dt[4]=Nt,Dt[5]=be,Dt[6]=Te,Dt[7]=nr,Dt[8]=Rt,Dt}function m(st,St,qt,re,Nt,be,Te,nr,Rt,Dt){return st[0]=St,st[1]=qt,st[2]=re,st[3]=Nt,st[4]=be,st[5]=Te,st[6]=nr,st[7]=Rt,st[8]=Dt,st}function y(st){return st[0]=1,st[1]=0,st[2]=0,st[3]=0,st[4]=1,st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function v(st,St){if(st===St){var qt=St[1],re=St[2],Nt=St[5];st[1]=St[3],st[2]=St[6],st[3]=qt,st[5]=St[7],st[6]=re,st[7]=Nt}else st[0]=St[0],st[1]=St[3],st[2]=St[6],st[3]=St[1],st[4]=St[4],st[5]=St[7],st[6]=St[2],st[7]=St[5],st[8]=St[8];return st}function p(st,St){var qt=St[0],re=St[1],Nt=St[2],be=St[3],Te=St[4],nr=St[5],Rt=St[6],Dt=St[7],At=St[8],Xt=At*Te-nr*Dt,$t=-At*be+nr*Rt,Tt=Dt*be-Te*Rt,Kt=qt*Xt+re*$t+Nt*Tt;return Kt?(Kt=1/Kt,st[0]=Xt*Kt,st[1]=(-At*re+Nt*Dt)*Kt,st[2]=(nr*re-Nt*Te)*Kt,st[3]=$t*Kt,st[4]=(At*qt-Nt*Rt)*Kt,st[5]=(-nr*qt+Nt*be)*Kt,st[6]=Tt*Kt,st[7]=(-Dt*qt+re*Rt)*Kt,st[8]=(Te*qt-re*be)*Kt,st):null}function g(st,St){var qt=St[0],re=St[1],Nt=St[2],be=St[3],Te=St[4],nr=St[5],Rt=St[6],Dt=St[7],At=St[8];return st[0]=Te*At-nr*Dt,st[1]=Nt*Dt-re*At,st[2]=re*nr-Nt*Te,st[3]=nr*Rt-be*At,st[4]=qt*At-Nt*Rt,st[5]=Nt*be-qt*nr,st[6]=be*Dt-Te*Rt,st[7]=re*Rt-qt*Dt,st[8]=qt*Te-re*be,st}function T(st){var St=st[0],qt=st[1],re=st[2],Nt=st[3],be=st[4],Te=st[5],nr=st[6],Rt=st[7],Dt=st[8];return St*(Dt*be-Te*Rt)+qt*(-Dt*Nt+Te*nr)+re*(Rt*Nt-be*nr)}function w(st,St,qt){var re=St[0],Nt=St[1],be=St[2],Te=St[3],nr=St[4],Rt=St[5],Dt=St[6],At=St[7],Xt=St[8],$t=qt[0],Tt=qt[1],Kt=qt[2],Ee=qt[3],vt=qt[4],bt=qt[5],wt=qt[6],D=qt[7],tt=qt[8];return st[0]=$t*re+Tt*Te+Kt*Dt,st[1]=$t*Nt+Tt*nr+Kt*At,st[2]=$t*be+Tt*Rt+Kt*Xt,st[3]=Ee*re+vt*Te+bt*Dt,st[4]=Ee*Nt+vt*nr+bt*At,st[5]=Ee*be+vt*Rt+bt*Xt,st[6]=wt*re+D*Te+tt*Dt,st[7]=wt*Nt+D*nr+tt*At,st[8]=wt*be+D*Rt+tt*Xt,st}function C(st,St,qt){var re=St[0],Nt=St[1],be=St[2],Te=St[3],nr=St[4],Rt=St[5],Dt=St[6],At=St[7],Xt=St[8],$t=qt[0],Tt=qt[1];return st[0]=re,st[1]=Nt,st[2]=be,st[3]=Te,st[4]=nr,st[5]=Rt,st[6]=$t*re+Tt*Te+Dt,st[7]=$t*Nt+Tt*nr+At,st[8]=$t*be+Tt*Rt+Xt,st}function O(st,St,qt){var re=St[0],Nt=St[1],be=St[2],Te=St[3],nr=St[4],Rt=St[5],Dt=St[6],At=St[7],Xt=St[8],$t=Math.sin(qt),Tt=Math.cos(qt);return st[0]=Tt*re+$t*Te,st[1]=Tt*Nt+$t*nr,st[2]=Tt*be+$t*Rt,st[3]=Tt*Te-$t*re,st[4]=Tt*nr-$t*Nt,st[5]=Tt*Rt-$t*be,st[6]=Dt,st[7]=At,st[8]=Xt,st}function b(st,St,qt){var re=qt[0],Nt=qt[1];return st[0]=re*St[0],st[1]=re*St[1],st[2]=re*St[2],st[3]=Nt*St[3],st[4]=Nt*St[4],st[5]=Nt*St[5],st[6]=St[6],st[7]=St[7],st[8]=St[8],st}function l(st,St){return st[0]=1,st[1]=0,st[2]=0,st[3]=0,st[4]=1,st[5]=0,st[6]=St[0],st[7]=St[1],st[8]=1,st}function K(st,St){var qt=Math.sin(St),re=Math.cos(St);return st[0]=re,st[1]=qt,st[2]=0,st[3]=-qt,st[4]=re,st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function Z(st,St){return st[0]=St[0],st[1]=0,st[2]=0,st[3]=0,st[4]=St[1],st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function X(st,St){return st[0]=St[0],st[1]=St[1],st[2]=0,st[3]=St[2],st[4]=St[3],st[5]=0,st[6]=St[4],st[7]=St[5],st[8]=1,st}function W(st,St){var qt=St[0],re=St[1],Nt=St[2],be=St[3],Te=qt+qt,nr=re+re,Rt=Nt+Nt,Dt=qt*Te,At=re*Te,Xt=re*nr,$t=Nt*Te,Tt=Nt*nr,Kt=Nt*Rt,Ee=be*Te,vt=be*nr,bt=be*Rt;return st[0]=1-Xt-Kt,st[3]=At-bt,st[6]=$t+vt,st[1]=At+bt,st[4]=1-Dt-Kt,st[7]=Tt-Ee,st[2]=$t-vt,st[5]=Tt+Ee,st[8]=1-Dt-Xt,st}function U(st,St){var qt=St[0],re=St[1],Nt=St[2],be=St[3],Te=St[4],nr=St[5],Rt=St[6],Dt=St[7],At=St[8],Xt=St[9],$t=St[10],Tt=St[11],Kt=St[12],Ee=St[13],vt=St[14],bt=St[15],wt=qt*nr-re*Te,D=qt*Rt-Nt*Te,tt=qt*Dt-be*Te,Ot=re*Rt-Nt*nr,ct=re*Dt-be*nr,ie=Nt*Dt-be*Rt,pe=At*Ee-Xt*Kt,Ge=At*vt-$t*Kt,Re=At*bt-Tt*Kt,Je=Xt*vt-$t*Ee,Ve=Xt*bt-Tt*Ee,ce=$t*bt-Tt*vt,Le=wt*ce-D*Ve+tt*Je+Ot*Re-ct*Ge+ie*pe;return Le?(Le=1/Le,st[0]=(nr*ce-Rt*Ve+Dt*Je)*Le,st[1]=(Rt*Re-Te*ce-Dt*Ge)*Le,st[2]=(Te*Ve-nr*Re+Dt*pe)*Le,st[3]=(Nt*Ve-re*ce-be*Je)*Le,st[4]=(qt*ce-Nt*Re+be*Ge)*Le,st[5]=(re*Re-qt*Ve-be*pe)*Le,st[6]=(Ee*ie-vt*ct+bt*Ot)*Le,st[7]=(vt*tt-Kt*ie-bt*D)*Le,st[8]=(Kt*ct-Ee*tt+bt*wt)*Le,st):null}function et(st,St,qt){return st[0]=2/St,st[1]=0,st[2]=0,st[3]=0,st[4]=-2/qt,st[5]=0,st[6]=-1,st[7]=1,st[8]=1,st}function it(st){return"mat3("+st[0]+", "+st[1]+", "+st[2]+", "+st[3]+", "+st[4]+", "+st[5]+", "+st[6]+", "+st[7]+", "+st[8]+")"}function J(st){return Math.hypot(st[0],st[1],st[2],st[3],st[4],st[5],st[6],st[7],st[8])}function rt(st,St,qt){return st[0]=St[0]+qt[0],st[1]=St[1]+qt[1],st[2]=St[2]+qt[2],st[3]=St[3]+qt[3],st[4]=St[4]+qt[4],st[5]=St[5]+qt[5],st[6]=St[6]+qt[6],st[7]=St[7]+qt[7],st[8]=St[8]+qt[8],st}function mt(st,St,qt){return st[0]=St[0]-qt[0],st[1]=St[1]-qt[1],st[2]=St[2]-qt[2],st[3]=St[3]-qt[3],st[4]=St[4]-qt[4],st[5]=St[5]-qt[5],st[6]=St[6]-qt[6],st[7]=St[7]-qt[7],st[8]=St[8]-qt[8],st}function pt(st,St,qt){return st[0]=St[0]*qt,st[1]=St[1]*qt,st[2]=St[2]*qt,st[3]=St[3]*qt,st[4]=St[4]*qt,st[5]=St[5]*qt,st[6]=St[6]*qt,st[7]=St[7]*qt,st[8]=St[8]*qt,st}function ft(st,St,qt,re){return st[0]=St[0]+qt[0]*re,st[1]=St[1]+qt[1]*re,st[2]=St[2]+qt[2]*re,st[3]=St[3]+qt[3]*re,st[4]=St[4]+qt[4]*re,st[5]=St[5]+qt[5]*re,st[6]=St[6]+qt[6]*re,st[7]=St[7]+qt[7]*re,st[8]=St[8]+qt[8]*re,st}function Mt(st,St){return st[0]===St[0]&&st[1]===St[1]&&st[2]===St[2]&&st[3]===St[3]&&st[4]===St[4]&&st[5]===St[5]&&st[6]===St[6]&&st[7]===St[7]&&st[8]===St[8]}function zt(st,St){var qt=st[0],re=st[1],Nt=st[2],be=st[3],Te=st[4],nr=st[5],Rt=st[6],Dt=st[7],At=st[8],Xt=St[0],$t=St[1],Tt=St[2],Kt=St[3],Ee=St[4],vt=St[5],bt=St[6],wt=St[7],D=St[8];return Math.abs(qt-Xt)<=x.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Xt))&&Math.abs(re-$t)<=x.EPSILON*Math.max(1,Math.abs(re),Math.abs($t))&&Math.abs(Nt-Tt)<=x.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Tt))&&Math.abs(be-Kt)<=x.EPSILON*Math.max(1,Math.abs(be),Math.abs(Kt))&&Math.abs(Te-Ee)<=x.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Ee))&&Math.abs(nr-vt)<=x.EPSILON*Math.max(1,Math.abs(nr),Math.abs(vt))&&Math.abs(Rt-bt)<=x.EPSILON*Math.max(1,Math.abs(Rt),Math.abs(bt))&&Math.abs(Dt-wt)<=x.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(wt))&&Math.abs(At-D)<=x.EPSILON*Math.max(1,Math.abs(At),Math.abs(D))}var Vt=w,kt=mt},96518:function(le,S,M){"use strict";M.r(S),M.d(S,{add:function(){return Xt},adjoint:function(){return p},clone:function(){return k},copy:function(){return E},create:function(){return z},determinant:function(){return g},equals:function(){return vt},exactEquals:function(){return Ee},frob:function(){return At},fromQuat:function(){return Vt},fromQuat2:function(){return rt},fromRotation:function(){return W},fromRotationTranslation:function(){return J},fromRotationTranslationScale:function(){return Mt},fromRotationTranslationScaleOrigin:function(){return zt},fromScaling:function(){return X},fromTranslation:function(){return Z},fromValues:function(){return N},fromXRotation:function(){return U},fromYRotation:function(){return et},fromZRotation:function(){return it},frustum:function(){return kt},getRotation:function(){return ft},getScaling:function(){return pt},getTranslation:function(){return mt},identity:function(){return m},invert:function(){return v},lookAt:function(){return nr},mul:function(){return bt},multiply:function(){return T},multiplyScalar:function(){return Tt},multiplyScalarAndAdd:function(){return Kt},ortho:function(){return be},orthoNO:function(){return Nt},orthoZO:function(){return Te},perspective:function(){return St},perspectiveFromFieldOfView:function(){return re},perspectiveNO:function(){return st},perspectiveZO:function(){return qt},rotate:function(){return O},rotateX:function(){return b},rotateY:function(){return l},rotateZ:function(){return K},scale:function(){return C},set:function(){return I},str:function(){return Dt},sub:function(){return wt},subtract:function(){return $t},targetTo:function(){return Rt},translate:function(){return w},transpose:function(){return y}});var x=M(47897);function z(){var D=new x.ARRAY_TYPE(16);return x.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=0,D[12]=0,D[13]=0,D[14]=0),D[0]=1,D[5]=1,D[10]=1,D[15]=1,D}function k(D){var tt=new x.ARRAY_TYPE(16);return tt[0]=D[0],tt[1]=D[1],tt[2]=D[2],tt[3]=D[3],tt[4]=D[4],tt[5]=D[5],tt[6]=D[6],tt[7]=D[7],tt[8]=D[8],tt[9]=D[9],tt[10]=D[10],tt[11]=D[11],tt[12]=D[12],tt[13]=D[13],tt[14]=D[14],tt[15]=D[15],tt}function E(D,tt){return D[0]=tt[0],D[1]=tt[1],D[2]=tt[2],D[3]=tt[3],D[4]=tt[4],D[5]=tt[5],D[6]=tt[6],D[7]=tt[7],D[8]=tt[8],D[9]=tt[9],D[10]=tt[10],D[11]=tt[11],D[12]=tt[12],D[13]=tt[13],D[14]=tt[14],D[15]=tt[15],D}function N(D,tt,Ot,ct,ie,pe,Ge,Re,Je,Ve,ce,Le,je,Be,vr,or){var Ae=new x.ARRAY_TYPE(16);return Ae[0]=D,Ae[1]=tt,Ae[2]=Ot,Ae[3]=ct,Ae[4]=ie,Ae[5]=pe,Ae[6]=Ge,Ae[7]=Re,Ae[8]=Je,Ae[9]=Ve,Ae[10]=ce,Ae[11]=Le,Ae[12]=je,Ae[13]=Be,Ae[14]=vr,Ae[15]=or,Ae}function I(D,tt,Ot,ct,ie,pe,Ge,Re,Je,Ve,ce,Le,je,Be,vr,or,Ae){return D[0]=tt,D[1]=Ot,D[2]=ct,D[3]=ie,D[4]=pe,D[5]=Ge,D[6]=Re,D[7]=Je,D[8]=Ve,D[9]=ce,D[10]=Le,D[11]=je,D[12]=Be,D[13]=vr,D[14]=or,D[15]=Ae,D}function m(D){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function y(D,tt){if(D===tt){var Ot=tt[1],ct=tt[2],ie=tt[3],pe=tt[6],Ge=tt[7],Re=tt[11];D[1]=tt[4],D[2]=tt[8],D[3]=tt[12],D[4]=Ot,D[6]=tt[9],D[7]=tt[13],D[8]=ct,D[9]=pe,D[11]=tt[14],D[12]=ie,D[13]=Ge,D[14]=Re}else D[0]=tt[0],D[1]=tt[4],D[2]=tt[8],D[3]=tt[12],D[4]=tt[1],D[5]=tt[5],D[6]=tt[9],D[7]=tt[13],D[8]=tt[2],D[9]=tt[6],D[10]=tt[10],D[11]=tt[14],D[12]=tt[3],D[13]=tt[7],D[14]=tt[11],D[15]=tt[15];return D}function v(D,tt){var Ot=tt[0],ct=tt[1],ie=tt[2],pe=tt[3],Ge=tt[4],Re=tt[5],Je=tt[6],Ve=tt[7],ce=tt[8],Le=tt[9],je=tt[10],Be=tt[11],vr=tt[12],or=tt[13],Ae=tt[14],yr=tt[15],Cr=Ot*Re-ct*Ge,zr=Ot*Je-ie*Ge,Mr=Ot*Ve-pe*Ge,un=ct*Je-ie*Re,hn=ct*Ve-pe*Re,Un=ie*Ve-pe*Je,nn=ce*or-Le*vr,vn=ce*Ae-je*vr,ln=ce*yr-Be*vr,pn=Le*Ae-je*or,Bn=Le*yr-Be*or,Oe=je*yr-Be*Ae,Cn=Cr*Oe-zr*Bn+Mr*pn+un*ln-hn*vn+Un*nn;return Cn?(Cn=1/Cn,D[0]=(Re*Oe-Je*Bn+Ve*pn)*Cn,D[1]=(ie*Bn-ct*Oe-pe*pn)*Cn,D[2]=(or*Un-Ae*hn+yr*un)*Cn,D[3]=(je*hn-Le*Un-Be*un)*Cn,D[4]=(Je*ln-Ge*Oe-Ve*vn)*Cn,D[5]=(Ot*Oe-ie*ln+pe*vn)*Cn,D[6]=(Ae*Mr-vr*Un-yr*zr)*Cn,D[7]=(ce*Un-je*Mr+Be*zr)*Cn,D[8]=(Ge*Bn-Re*ln+Ve*nn)*Cn,D[9]=(ct*ln-Ot*Bn-pe*nn)*Cn,D[10]=(vr*hn-or*Mr+yr*Cr)*Cn,D[11]=(Le*Mr-ce*hn-Be*Cr)*Cn,D[12]=(Re*vn-Ge*pn-Je*nn)*Cn,D[13]=(Ot*pn-ct*vn+ie*nn)*Cn,D[14]=(or*zr-vr*un-Ae*Cr)*Cn,D[15]=(ce*un-Le*zr+je*Cr)*Cn,D):null}function p(D,tt){var Ot=tt[0],ct=tt[1],ie=tt[2],pe=tt[3],Ge=tt[4],Re=tt[5],Je=tt[6],Ve=tt[7],ce=tt[8],Le=tt[9],je=tt[10],Be=tt[11],vr=tt[12],or=tt[13],Ae=tt[14],yr=tt[15];return D[0]=Re*(je*yr-Be*Ae)-Le*(Je*yr-Ve*Ae)+or*(Je*Be-Ve*je),D[1]=-(ct*(je*yr-Be*Ae)-Le*(ie*yr-pe*Ae)+or*(ie*Be-pe*je)),D[2]=ct*(Je*yr-Ve*Ae)-Re*(ie*yr-pe*Ae)+or*(ie*Ve-pe*Je),D[3]=-(ct*(Je*Be-Ve*je)-Re*(ie*Be-pe*je)+Le*(ie*Ve-pe*Je)),D[4]=-(Ge*(je*yr-Be*Ae)-ce*(Je*yr-Ve*Ae)+vr*(Je*Be-Ve*je)),D[5]=Ot*(je*yr-Be*Ae)-ce*(ie*yr-pe*Ae)+vr*(ie*Be-pe*je),D[6]=-(Ot*(Je*yr-Ve*Ae)-Ge*(ie*yr-pe*Ae)+vr*(ie*Ve-pe*Je)),D[7]=Ot*(Je*Be-Ve*je)-Ge*(ie*Be-pe*je)+ce*(ie*Ve-pe*Je),D[8]=Ge*(Le*yr-Be*or)-ce*(Re*yr-Ve*or)+vr*(Re*Be-Ve*Le),D[9]=-(Ot*(Le*yr-Be*or)-ce*(ct*yr-pe*or)+vr*(ct*Be-pe*Le)),D[10]=Ot*(Re*yr-Ve*or)-Ge*(ct*yr-pe*or)+vr*(ct*Ve-pe*Re),D[11]=-(Ot*(Re*Be-Ve*Le)-Ge*(ct*Be-pe*Le)+ce*(ct*Ve-pe*Re)),D[12]=-(Ge*(Le*Ae-je*or)-ce*(Re*Ae-Je*or)+vr*(Re*je-Je*Le)),D[13]=Ot*(Le*Ae-je*or)-ce*(ct*Ae-ie*or)+vr*(ct*je-ie*Le),D[14]=-(Ot*(Re*Ae-Je*or)-Ge*(ct*Ae-ie*or)+vr*(ct*Je-ie*Re)),D[15]=Ot*(Re*je-Je*Le)-Ge*(ct*je-ie*Le)+ce*(ct*Je-ie*Re),D}function g(D){var tt=D[0],Ot=D[1],ct=D[2],ie=D[3],pe=D[4],Ge=D[5],Re=D[6],Je=D[7],Ve=D[8],ce=D[9],Le=D[10],je=D[11],Be=D[12],vr=D[13],or=D[14],Ae=D[15],yr=tt*Ge-Ot*pe,Cr=tt*Re-ct*pe,zr=tt*Je-ie*pe,Mr=Ot*Re-ct*Ge,un=Ot*Je-ie*Ge,hn=ct*Je-ie*Re,Un=Ve*vr-ce*Be,nn=Ve*or-Le*Be,vn=Ve*Ae-je*Be,ln=ce*or-Le*vr,pn=ce*Ae-je*vr,Bn=Le*Ae-je*or;return yr*Bn-Cr*pn+zr*ln+Mr*vn-un*nn+hn*Un}function T(D,tt,Ot){var ct=tt[0],ie=tt[1],pe=tt[2],Ge=tt[3],Re=tt[4],Je=tt[5],Ve=tt[6],ce=tt[7],Le=tt[8],je=tt[9],Be=tt[10],vr=tt[11],or=tt[12],Ae=tt[13],yr=tt[14],Cr=tt[15],zr=Ot[0],Mr=Ot[1],un=Ot[2],hn=Ot[3];return D[0]=zr*ct+Mr*Re+un*Le+hn*or,D[1]=zr*ie+Mr*Je+un*je+hn*Ae,D[2]=zr*pe+Mr*Ve+un*Be+hn*yr,D[3]=zr*Ge+Mr*ce+un*vr+hn*Cr,zr=Ot[4],Mr=Ot[5],un=Ot[6],hn=Ot[7],D[4]=zr*ct+Mr*Re+un*Le+hn*or,D[5]=zr*ie+Mr*Je+un*je+hn*Ae,D[6]=zr*pe+Mr*Ve+un*Be+hn*yr,D[7]=zr*Ge+Mr*ce+un*vr+hn*Cr,zr=Ot[8],Mr=Ot[9],un=Ot[10],hn=Ot[11],D[8]=zr*ct+Mr*Re+un*Le+hn*or,D[9]=zr*ie+Mr*Je+un*je+hn*Ae,D[10]=zr*pe+Mr*Ve+un*Be+hn*yr,D[11]=zr*Ge+Mr*ce+un*vr+hn*Cr,zr=Ot[12],Mr=Ot[13],un=Ot[14],hn=Ot[15],D[12]=zr*ct+Mr*Re+un*Le+hn*or,D[13]=zr*ie+Mr*Je+un*je+hn*Ae,D[14]=zr*pe+Mr*Ve+un*Be+hn*yr,D[15]=zr*Ge+Mr*ce+un*vr+hn*Cr,D}function w(D,tt,Ot){var ct=Ot[0],ie=Ot[1],pe=Ot[2],Ge,Re,Je,Ve,ce,Le,je,Be,vr,or,Ae,yr;return tt===D?(D[12]=tt[0]*ct+tt[4]*ie+tt[8]*pe+tt[12],D[13]=tt[1]*ct+tt[5]*ie+tt[9]*pe+tt[13],D[14]=tt[2]*ct+tt[6]*ie+tt[10]*pe+tt[14],D[15]=tt[3]*ct+tt[7]*ie+tt[11]*pe+tt[15]):(Ge=tt[0],Re=tt[1],Je=tt[2],Ve=tt[3],ce=tt[4],Le=tt[5],je=tt[6],Be=tt[7],vr=tt[8],or=tt[9],Ae=tt[10],yr=tt[11],D[0]=Ge,D[1]=Re,D[2]=Je,D[3]=Ve,D[4]=ce,D[5]=Le,D[6]=je,D[7]=Be,D[8]=vr,D[9]=or,D[10]=Ae,D[11]=yr,D[12]=Ge*ct+ce*ie+vr*pe+tt[12],D[13]=Re*ct+Le*ie+or*pe+tt[13],D[14]=Je*ct+je*ie+Ae*pe+tt[14],D[15]=Ve*ct+Be*ie+yr*pe+tt[15]),D}function C(D,tt,Ot){var ct=Ot[0],ie=Ot[1],pe=Ot[2];return D[0]=tt[0]*ct,D[1]=tt[1]*ct,D[2]=tt[2]*ct,D[3]=tt[3]*ct,D[4]=tt[4]*ie,D[5]=tt[5]*ie,D[6]=tt[6]*ie,D[7]=tt[7]*ie,D[8]=tt[8]*pe,D[9]=tt[9]*pe,D[10]=tt[10]*pe,D[11]=tt[11]*pe,D[12]=tt[12],D[13]=tt[13],D[14]=tt[14],D[15]=tt[15],D}function O(D,tt,Ot,ct){var ie=ct[0],pe=ct[1],Ge=ct[2],Re=Math.hypot(ie,pe,Ge),Je,Ve,ce,Le,je,Be,vr,or,Ae,yr,Cr,zr,Mr,un,hn,Un,nn,vn,ln,pn,Bn,Oe,Cn,Gn;return Re<x.EPSILON?null:(Re=1/Re,ie*=Re,pe*=Re,Ge*=Re,Je=Math.sin(Ot),Ve=Math.cos(Ot),ce=1-Ve,Le=tt[0],je=tt[1],Be=tt[2],vr=tt[3],or=tt[4],Ae=tt[5],yr=tt[6],Cr=tt[7],zr=tt[8],Mr=tt[9],un=tt[10],hn=tt[11],Un=ie*ie*ce+Ve,nn=pe*ie*ce+Ge*Je,vn=Ge*ie*ce-pe*Je,ln=ie*pe*ce-Ge*Je,pn=pe*pe*ce+Ve,Bn=Ge*pe*ce+ie*Je,Oe=ie*Ge*ce+pe*Je,Cn=pe*Ge*ce-ie*Je,Gn=Ge*Ge*ce+Ve,D[0]=Le*Un+or*nn+zr*vn,D[1]=je*Un+Ae*nn+Mr*vn,D[2]=Be*Un+yr*nn+un*vn,D[3]=vr*Un+Cr*nn+hn*vn,D[4]=Le*ln+or*pn+zr*Bn,D[5]=je*ln+Ae*pn+Mr*Bn,D[6]=Be*ln+yr*pn+un*Bn,D[7]=vr*ln+Cr*pn+hn*Bn,D[8]=Le*Oe+or*Cn+zr*Gn,D[9]=je*Oe+Ae*Cn+Mr*Gn,D[10]=Be*Oe+yr*Cn+un*Gn,D[11]=vr*Oe+Cr*Cn+hn*Gn,tt!==D&&(D[12]=tt[12],D[13]=tt[13],D[14]=tt[14],D[15]=tt[15]),D)}function b(D,tt,Ot){var ct=Math.sin(Ot),ie=Math.cos(Ot),pe=tt[4],Ge=tt[5],Re=tt[6],Je=tt[7],Ve=tt[8],ce=tt[9],Le=tt[10],je=tt[11];return tt!==D&&(D[0]=tt[0],D[1]=tt[1],D[2]=tt[2],D[3]=tt[3],D[12]=tt[12],D[13]=tt[13],D[14]=tt[14],D[15]=tt[15]),D[4]=pe*ie+Ve*ct,D[5]=Ge*ie+ce*ct,D[6]=Re*ie+Le*ct,D[7]=Je*ie+je*ct,D[8]=Ve*ie-pe*ct,D[9]=ce*ie-Ge*ct,D[10]=Le*ie-Re*ct,D[11]=je*ie-Je*ct,D}function l(D,tt,Ot){var ct=Math.sin(Ot),ie=Math.cos(Ot),pe=tt[0],Ge=tt[1],Re=tt[2],Je=tt[3],Ve=tt[8],ce=tt[9],Le=tt[10],je=tt[11];return tt!==D&&(D[4]=tt[4],D[5]=tt[5],D[6]=tt[6],D[7]=tt[7],D[12]=tt[12],D[13]=tt[13],D[14]=tt[14],D[15]=tt[15]),D[0]=pe*ie-Ve*ct,D[1]=Ge*ie-ce*ct,D[2]=Re*ie-Le*ct,D[3]=Je*ie-je*ct,D[8]=pe*ct+Ve*ie,D[9]=Ge*ct+ce*ie,D[10]=Re*ct+Le*ie,D[11]=Je*ct+je*ie,D}function K(D,tt,Ot){var ct=Math.sin(Ot),ie=Math.cos(Ot),pe=tt[0],Ge=tt[1],Re=tt[2],Je=tt[3],Ve=tt[4],ce=tt[5],Le=tt[6],je=tt[7];return tt!==D&&(D[8]=tt[8],D[9]=tt[9],D[10]=tt[10],D[11]=tt[11],D[12]=tt[12],D[13]=tt[13],D[14]=tt[14],D[15]=tt[15]),D[0]=pe*ie+Ve*ct,D[1]=Ge*ie+ce*ct,D[2]=Re*ie+Le*ct,D[3]=Je*ie+je*ct,D[4]=Ve*ie-pe*ct,D[5]=ce*ie-Ge*ct,D[6]=Le*ie-Re*ct,D[7]=je*ie-Je*ct,D}function Z(D,tt){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=tt[0],D[13]=tt[1],D[14]=tt[2],D[15]=1,D}function X(D,tt){return D[0]=tt[0],D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=tt[1],D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=tt[2],D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function W(D,tt,Ot){var ct=Ot[0],ie=Ot[1],pe=Ot[2],Ge=Math.hypot(ct,ie,pe),Re,Je,Ve;return Ge<x.EPSILON?null:(Ge=1/Ge,ct*=Ge,ie*=Ge,pe*=Ge,Re=Math.sin(tt),Je=Math.cos(tt),Ve=1-Je,D[0]=ct*ct*Ve+Je,D[1]=ie*ct*Ve+pe*Re,D[2]=pe*ct*Ve-ie*Re,D[3]=0,D[4]=ct*ie*Ve-pe*Re,D[5]=ie*ie*Ve+Je,D[6]=pe*ie*Ve+ct*Re,D[7]=0,D[8]=ct*pe*Ve+ie*Re,D[9]=ie*pe*Ve-ct*Re,D[10]=pe*pe*Ve+Je,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D)}function U(D,tt){var Ot=Math.sin(tt),ct=Math.cos(tt);return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ct,D[6]=Ot,D[7]=0,D[8]=0,D[9]=-Ot,D[10]=ct,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function et(D,tt){var Ot=Math.sin(tt),ct=Math.cos(tt);return D[0]=ct,D[1]=0,D[2]=-Ot,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=Ot,D[9]=0,D[10]=ct,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function it(D,tt){var Ot=Math.sin(tt),ct=Math.cos(tt);return D[0]=ct,D[1]=Ot,D[2]=0,D[3]=0,D[4]=-Ot,D[5]=ct,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function J(D,tt,Ot){var ct=tt[0],ie=tt[1],pe=tt[2],Ge=tt[3],Re=ct+ct,Je=ie+ie,Ve=pe+pe,ce=ct*Re,Le=ct*Je,je=ct*Ve,Be=ie*Je,vr=ie*Ve,or=pe*Ve,Ae=Ge*Re,yr=Ge*Je,Cr=Ge*Ve;return D[0]=1-(Be+or),D[1]=Le+Cr,D[2]=je-yr,D[3]=0,D[4]=Le-Cr,D[5]=1-(ce+or),D[6]=vr+Ae,D[7]=0,D[8]=je+yr,D[9]=vr-Ae,D[10]=1-(ce+Be),D[11]=0,D[12]=Ot[0],D[13]=Ot[1],D[14]=Ot[2],D[15]=1,D}function rt(D,tt){var Ot=new x.ARRAY_TYPE(3),ct=-tt[0],ie=-tt[1],pe=-tt[2],Ge=tt[3],Re=tt[4],Je=tt[5],Ve=tt[6],ce=tt[7],Le=ct*ct+ie*ie+pe*pe+Ge*Ge;return Le>0?(Ot[0]=(Re*Ge+ce*ct+Je*pe-Ve*ie)*2/Le,Ot[1]=(Je*Ge+ce*ie+Ve*ct-Re*pe)*2/Le,Ot[2]=(Ve*Ge+ce*pe+Re*ie-Je*ct)*2/Le):(Ot[0]=(Re*Ge+ce*ct+Je*pe-Ve*ie)*2,Ot[1]=(Je*Ge+ce*ie+Ve*ct-Re*pe)*2,Ot[2]=(Ve*Ge+ce*pe+Re*ie-Je*ct)*2),J(D,tt,Ot),D}function mt(D,tt){return D[0]=tt[12],D[1]=tt[13],D[2]=tt[14],D}function pt(D,tt){var Ot=tt[0],ct=tt[1],ie=tt[2],pe=tt[4],Ge=tt[5],Re=tt[6],Je=tt[8],Ve=tt[9],ce=tt[10];return D[0]=Math.hypot(Ot,ct,ie),D[1]=Math.hypot(pe,Ge,Re),D[2]=Math.hypot(Je,Ve,ce),D}function ft(D,tt){var Ot=new x.ARRAY_TYPE(3);pt(Ot,tt);var ct=1/Ot[0],ie=1/Ot[1],pe=1/Ot[2],Ge=tt[0]*ct,Re=tt[1]*ie,Je=tt[2]*pe,Ve=tt[4]*ct,ce=tt[5]*ie,Le=tt[6]*pe,je=tt[8]*ct,Be=tt[9]*ie,vr=tt[10]*pe,or=Ge+ce+vr,Ae=0;return or>0?(Ae=Math.sqrt(or+1)*2,D[3]=.25*Ae,D[0]=(Le-Be)/Ae,D[1]=(je-Je)/Ae,D[2]=(Re-Ve)/Ae):Ge>ce&&Ge>vr?(Ae=Math.sqrt(1+Ge-ce-vr)*2,D[3]=(Le-Be)/Ae,D[0]=.25*Ae,D[1]=(Re+Ve)/Ae,D[2]=(je+Je)/Ae):ce>vr?(Ae=Math.sqrt(1+ce-Ge-vr)*2,D[3]=(je-Je)/Ae,D[0]=(Re+Ve)/Ae,D[1]=.25*Ae,D[2]=(Le+Be)/Ae):(Ae=Math.sqrt(1+vr-Ge-ce)*2,D[3]=(Re-Ve)/Ae,D[0]=(je+Je)/Ae,D[1]=(Le+Be)/Ae,D[2]=.25*Ae),D}function Mt(D,tt,Ot,ct){var ie=tt[0],pe=tt[1],Ge=tt[2],Re=tt[3],Je=ie+ie,Ve=pe+pe,ce=Ge+Ge,Le=ie*Je,je=ie*Ve,Be=ie*ce,vr=pe*Ve,or=pe*ce,Ae=Ge*ce,yr=Re*Je,Cr=Re*Ve,zr=Re*ce,Mr=ct[0],un=ct[1],hn=ct[2];return D[0]=(1-(vr+Ae))*Mr,D[1]=(je+zr)*Mr,D[2]=(Be-Cr)*Mr,D[3]=0,D[4]=(je-zr)*un,D[5]=(1-(Le+Ae))*un,D[6]=(or+yr)*un,D[7]=0,D[8]=(Be+Cr)*hn,D[9]=(or-yr)*hn,D[10]=(1-(Le+vr))*hn,D[11]=0,D[12]=Ot[0],D[13]=Ot[1],D[14]=Ot[2],D[15]=1,D}function zt(D,tt,Ot,ct,ie){var pe=tt[0],Ge=tt[1],Re=tt[2],Je=tt[3],Ve=pe+pe,ce=Ge+Ge,Le=Re+Re,je=pe*Ve,Be=pe*ce,vr=pe*Le,or=Ge*ce,Ae=Ge*Le,yr=Re*Le,Cr=Je*Ve,zr=Je*ce,Mr=Je*Le,un=ct[0],hn=ct[1],Un=ct[2],nn=ie[0],vn=ie[1],ln=ie[2],pn=(1-(or+yr))*un,Bn=(Be+Mr)*un,Oe=(vr-zr)*un,Cn=(Be-Mr)*hn,Gn=(1-(je+yr))*hn,bi=(Ae+Cr)*hn,zn=(vr+zr)*Un,Hn=(Ae-Cr)*Un,hi=(1-(je+or))*Un;return D[0]=pn,D[1]=Bn,D[2]=Oe,D[3]=0,D[4]=Cn,D[5]=Gn,D[6]=bi,D[7]=0,D[8]=zn,D[9]=Hn,D[10]=hi,D[11]=0,D[12]=Ot[0]+nn-(pn*nn+Cn*vn+zn*ln),D[13]=Ot[1]+vn-(Bn*nn+Gn*vn+Hn*ln),D[14]=Ot[2]+ln-(Oe*nn+bi*vn+hi*ln),D[15]=1,D}function Vt(D,tt){var Ot=tt[0],ct=tt[1],ie=tt[2],pe=tt[3],Ge=Ot+Ot,Re=ct+ct,Je=ie+ie,Ve=Ot*Ge,ce=ct*Ge,Le=ct*Re,je=ie*Ge,Be=ie*Re,vr=ie*Je,or=pe*Ge,Ae=pe*Re,yr=pe*Je;return D[0]=1-Le-vr,D[1]=ce+yr,D[2]=je-Ae,D[3]=0,D[4]=ce-yr,D[5]=1-Ve-vr,D[6]=Be+or,D[7]=0,D[8]=je+Ae,D[9]=Be-or,D[10]=1-Ve-Le,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function kt(D,tt,Ot,ct,ie,pe,Ge){var Re=1/(Ot-tt),Je=1/(ie-ct),Ve=1/(pe-Ge);return D[0]=pe*2*Re,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=pe*2*Je,D[6]=0,D[7]=0,D[8]=(Ot+tt)*Re,D[9]=(ie+ct)*Je,D[10]=(Ge+pe)*Ve,D[11]=-1,D[12]=0,D[13]=0,D[14]=Ge*pe*2*Ve,D[15]=0,D}function st(D,tt,Ot,ct,ie){var pe=1/Math.tan(tt/2),Ge;return D[0]=pe/Ot,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=pe,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,ie!=null&&ie!==1/0?(Ge=1/(ct-ie),D[10]=(ie+ct)*Ge,D[14]=2*ie*ct*Ge):(D[10]=-1,D[14]=-2*ct),D}var St=st;function qt(D,tt,Ot,ct,ie){var pe=1/Math.tan(tt/2),Ge;return D[0]=pe/Ot,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=pe,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,ie!=null&&ie!==1/0?(Ge=1/(ct-ie),D[10]=ie*Ge,D[14]=ie*ct*Ge):(D[10]=-1,D[14]=-ct),D}function re(D,tt,Ot,ct){var ie=Math.tan(tt.upDegrees*Math.PI/180),pe=Math.tan(tt.downDegrees*Math.PI/180),Ge=Math.tan(tt.leftDegrees*Math.PI/180),Re=Math.tan(tt.rightDegrees*Math.PI/180),Je=2/(Ge+Re),Ve=2/(ie+pe);return D[0]=Je,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=Ve,D[6]=0,D[7]=0,D[8]=-((Ge-Re)*Je*.5),D[9]=(ie-pe)*Ve*.5,D[10]=ct/(Ot-ct),D[11]=-1,D[12]=0,D[13]=0,D[14]=ct*Ot/(Ot-ct),D[15]=0,D}function Nt(D,tt,Ot,ct,ie,pe,Ge){var Re=1/(tt-Ot),Je=1/(ct-ie),Ve=1/(pe-Ge);return D[0]=-2*Re,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*Je,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=2*Ve,D[11]=0,D[12]=(tt+Ot)*Re,D[13]=(ie+ct)*Je,D[14]=(Ge+pe)*Ve,D[15]=1,D}var be=Nt;function Te(D,tt,Ot,ct,ie,pe,Ge){var Re=1/(tt-Ot),Je=1/(ct-ie),Ve=1/(pe-Ge);return D[0]=-2*Re,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*Je,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=Ve,D[11]=0,D[12]=(tt+Ot)*Re,D[13]=(ie+ct)*Je,D[14]=pe*Ve,D[15]=1,D}function nr(D,tt,Ot,ct){var ie,pe,Ge,Re,Je,Ve,ce,Le,je,Be,vr=tt[0],or=tt[1],Ae=tt[2],yr=ct[0],Cr=ct[1],zr=ct[2],Mr=Ot[0],un=Ot[1],hn=Ot[2];return Math.abs(vr-Mr)<x.EPSILON&&Math.abs(or-un)<x.EPSILON&&Math.abs(Ae-hn)<x.EPSILON?m(D):(ce=vr-Mr,Le=or-un,je=Ae-hn,Be=1/Math.hypot(ce,Le,je),ce*=Be,Le*=Be,je*=Be,ie=Cr*je-zr*Le,pe=zr*ce-yr*je,Ge=yr*Le-Cr*ce,Be=Math.hypot(ie,pe,Ge),Be?(Be=1/Be,ie*=Be,pe*=Be,Ge*=Be):(ie=0,pe=0,Ge=0),Re=Le*Ge-je*pe,Je=je*ie-ce*Ge,Ve=ce*pe-Le*ie,Be=Math.hypot(Re,Je,Ve),Be?(Be=1/Be,Re*=Be,Je*=Be,Ve*=Be):(Re=0,Je=0,Ve=0),D[0]=ie,D[1]=Re,D[2]=ce,D[3]=0,D[4]=pe,D[5]=Je,D[6]=Le,D[7]=0,D[8]=Ge,D[9]=Ve,D[10]=je,D[11]=0,D[12]=-(ie*vr+pe*or+Ge*Ae),D[13]=-(Re*vr+Je*or+Ve*Ae),D[14]=-(ce*vr+Le*or+je*Ae),D[15]=1,D)}function Rt(D,tt,Ot,ct){var ie=tt[0],pe=tt[1],Ge=tt[2],Re=ct[0],Je=ct[1],Ve=ct[2],ce=ie-Ot[0],Le=pe-Ot[1],je=Ge-Ot[2],Be=ce*ce+Le*Le+je*je;Be>0&&(Be=1/Math.sqrt(Be),ce*=Be,Le*=Be,je*=Be);var vr=Je*je-Ve*Le,or=Ve*ce-Re*je,Ae=Re*Le-Je*ce;return Be=vr*vr+or*or+Ae*Ae,Be>0&&(Be=1/Math.sqrt(Be),vr*=Be,or*=Be,Ae*=Be),D[0]=vr,D[1]=or,D[2]=Ae,D[3]=0,D[4]=Le*Ae-je*or,D[5]=je*vr-ce*Ae,D[6]=ce*or-Le*vr,D[7]=0,D[8]=ce,D[9]=Le,D[10]=je,D[11]=0,D[12]=ie,D[13]=pe,D[14]=Ge,D[15]=1,D}function Dt(D){return"mat4("+D[0]+", "+D[1]+", "+D[2]+", "+D[3]+", "+D[4]+", "+D[5]+", "+D[6]+", "+D[7]+", "+D[8]+", "+D[9]+", "+D[10]+", "+D[11]+", "+D[12]+", "+D[13]+", "+D[14]+", "+D[15]+")"}function At(D){return Math.hypot(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15])}function Xt(D,tt,Ot){return D[0]=tt[0]+Ot[0],D[1]=tt[1]+Ot[1],D[2]=tt[2]+Ot[2],D[3]=tt[3]+Ot[3],D[4]=tt[4]+Ot[4],D[5]=tt[5]+Ot[5],D[6]=tt[6]+Ot[6],D[7]=tt[7]+Ot[7],D[8]=tt[8]+Ot[8],D[9]=tt[9]+Ot[9],D[10]=tt[10]+Ot[10],D[11]=tt[11]+Ot[11],D[12]=tt[12]+Ot[12],D[13]=tt[13]+Ot[13],D[14]=tt[14]+Ot[14],D[15]=tt[15]+Ot[15],D}function $t(D,tt,Ot){return D[0]=tt[0]-Ot[0],D[1]=tt[1]-Ot[1],D[2]=tt[2]-Ot[2],D[3]=tt[3]-Ot[3],D[4]=tt[4]-Ot[4],D[5]=tt[5]-Ot[5],D[6]=tt[6]-Ot[6],D[7]=tt[7]-Ot[7],D[8]=tt[8]-Ot[8],D[9]=tt[9]-Ot[9],D[10]=tt[10]-Ot[10],D[11]=tt[11]-Ot[11],D[12]=tt[12]-Ot[12],D[13]=tt[13]-Ot[13],D[14]=tt[14]-Ot[14],D[15]=tt[15]-Ot[15],D}function Tt(D,tt,Ot){return D[0]=tt[0]*Ot,D[1]=tt[1]*Ot,D[2]=tt[2]*Ot,D[3]=tt[3]*Ot,D[4]=tt[4]*Ot,D[5]=tt[5]*Ot,D[6]=tt[6]*Ot,D[7]=tt[7]*Ot,D[8]=tt[8]*Ot,D[9]=tt[9]*Ot,D[10]=tt[10]*Ot,D[11]=tt[11]*Ot,D[12]=tt[12]*Ot,D[13]=tt[13]*Ot,D[14]=tt[14]*Ot,D[15]=tt[15]*Ot,D}function Kt(D,tt,Ot,ct){return D[0]=tt[0]+Ot[0]*ct,D[1]=tt[1]+Ot[1]*ct,D[2]=tt[2]+Ot[2]*ct,D[3]=tt[3]+Ot[3]*ct,D[4]=tt[4]+Ot[4]*ct,D[5]=tt[5]+Ot[5]*ct,D[6]=tt[6]+Ot[6]*ct,D[7]=tt[7]+Ot[7]*ct,D[8]=tt[8]+Ot[8]*ct,D[9]=tt[9]+Ot[9]*ct,D[10]=tt[10]+Ot[10]*ct,D[11]=tt[11]+Ot[11]*ct,D[12]=tt[12]+Ot[12]*ct,D[13]=tt[13]+Ot[13]*ct,D[14]=tt[14]+Ot[14]*ct,D[15]=tt[15]+Ot[15]*ct,D}function Ee(D,tt){return D[0]===tt[0]&&D[1]===tt[1]&&D[2]===tt[2]&&D[3]===tt[3]&&D[4]===tt[4]&&D[5]===tt[5]&&D[6]===tt[6]&&D[7]===tt[7]&&D[8]===tt[8]&&D[9]===tt[9]&&D[10]===tt[10]&&D[11]===tt[11]&&D[12]===tt[12]&&D[13]===tt[13]&&D[14]===tt[14]&&D[15]===tt[15]}function vt(D,tt){var Ot=D[0],ct=D[1],ie=D[2],pe=D[3],Ge=D[4],Re=D[5],Je=D[6],Ve=D[7],ce=D[8],Le=D[9],je=D[10],Be=D[11],vr=D[12],or=D[13],Ae=D[14],yr=D[15],Cr=tt[0],zr=tt[1],Mr=tt[2],un=tt[3],hn=tt[4],Un=tt[5],nn=tt[6],vn=tt[7],ln=tt[8],pn=tt[9],Bn=tt[10],Oe=tt[11],Cn=tt[12],Gn=tt[13],bi=tt[14],zn=tt[15];return Math.abs(Ot-Cr)<=x.EPSILON*Math.max(1,Math.abs(Ot),Math.abs(Cr))&&Math.abs(ct-zr)<=x.EPSILON*Math.max(1,Math.abs(ct),Math.abs(zr))&&Math.abs(ie-Mr)<=x.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Mr))&&Math.abs(pe-un)<=x.EPSILON*Math.max(1,Math.abs(pe),Math.abs(un))&&Math.abs(Ge-hn)<=x.EPSILON*Math.max(1,Math.abs(Ge),Math.abs(hn))&&Math.abs(Re-Un)<=x.EPSILON*Math.max(1,Math.abs(Re),Math.abs(Un))&&Math.abs(Je-nn)<=x.EPSILON*Math.max(1,Math.abs(Je),Math.abs(nn))&&Math.abs(Ve-vn)<=x.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(vn))&&Math.abs(ce-ln)<=x.EPSILON*Math.max(1,Math.abs(ce),Math.abs(ln))&&Math.abs(Le-pn)<=x.EPSILON*Math.max(1,Math.abs(Le),Math.abs(pn))&&Math.abs(je-Bn)<=x.EPSILON*Math.max(1,Math.abs(je),Math.abs(Bn))&&Math.abs(Be-Oe)<=x.EPSILON*Math.max(1,Math.abs(Be),Math.abs(Oe))&&Math.abs(vr-Cn)<=x.EPSILON*Math.max(1,Math.abs(vr),Math.abs(Cn))&&Math.abs(or-Gn)<=x.EPSILON*Math.max(1,Math.abs(or),Math.abs(Gn))&&Math.abs(Ae-bi)<=x.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(bi))&&Math.abs(yr-zn)<=x.EPSILON*Math.max(1,Math.abs(yr),Math.abs(zn))}var bt=T,wt=$t},14717:function(le,S,M){"use strict";M.r(S),M.d(S,{add:function(){return ft},calculateW:function(){return C},clone:function(){return J},conjugate:function(){return W},copy:function(){return mt},create:function(){return N},dot:function(){return Vt},equals:function(){return Te},exactEquals:function(){return be},exp:function(){return O},fromEuler:function(){return et},fromMat3:function(){return U},fromValues:function(){return rt},getAngle:function(){return v},getAxisAngle:function(){return y},identity:function(){return I},invert:function(){return X},len:function(){return St},length:function(){return st},lerp:function(){return kt},ln:function(){return b},mul:function(){return Mt},multiply:function(){return p},normalize:function(){return Nt},pow:function(){return l},random:function(){return Z},rotateX:function(){return g},rotateY:function(){return T},rotateZ:function(){return w},rotationTo:function(){return nr},scale:function(){return zt},set:function(){return pt},setAxes:function(){return Dt},setAxisAngle:function(){return m},slerp:function(){return K},sqlerp:function(){return Rt},sqrLen:function(){return re},squaredLength:function(){return qt},str:function(){return it}});var x=M(47897),z=M(65316),k=M(91606),E=M(59196);function N(){var At=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(At[0]=0,At[1]=0,At[2]=0),At[3]=1,At}function I(At){return At[0]=0,At[1]=0,At[2]=0,At[3]=1,At}function m(At,Xt,$t){$t=$t*.5;var Tt=Math.sin($t);return At[0]=Tt*Xt[0],At[1]=Tt*Xt[1],At[2]=Tt*Xt[2],At[3]=Math.cos($t),At}function y(At,Xt){var $t=Math.acos(Xt[3])*2,Tt=Math.sin($t/2);return Tt>x.EPSILON?(At[0]=Xt[0]/Tt,At[1]=Xt[1]/Tt,At[2]=Xt[2]/Tt):(At[0]=1,At[1]=0,At[2]=0),$t}function v(At,Xt){var $t=Vt(At,Xt);return Math.acos(2*$t*$t-1)}function p(At,Xt,$t){var Tt=Xt[0],Kt=Xt[1],Ee=Xt[2],vt=Xt[3],bt=$t[0],wt=$t[1],D=$t[2],tt=$t[3];return At[0]=Tt*tt+vt*bt+Kt*D-Ee*wt,At[1]=Kt*tt+vt*wt+Ee*bt-Tt*D,At[2]=Ee*tt+vt*D+Tt*wt-Kt*bt,At[3]=vt*tt-Tt*bt-Kt*wt-Ee*D,At}function g(At,Xt,$t){$t*=.5;var Tt=Xt[0],Kt=Xt[1],Ee=Xt[2],vt=Xt[3],bt=Math.sin($t),wt=Math.cos($t);return At[0]=Tt*wt+vt*bt,At[1]=Kt*wt+Ee*bt,At[2]=Ee*wt-Kt*bt,At[3]=vt*wt-Tt*bt,At}function T(At,Xt,$t){$t*=.5;var Tt=Xt[0],Kt=Xt[1],Ee=Xt[2],vt=Xt[3],bt=Math.sin($t),wt=Math.cos($t);return At[0]=Tt*wt-Ee*bt,At[1]=Kt*wt+vt*bt,At[2]=Ee*wt+Tt*bt,At[3]=vt*wt-Kt*bt,At}function w(At,Xt,$t){$t*=.5;var Tt=Xt[0],Kt=Xt[1],Ee=Xt[2],vt=Xt[3],bt=Math.sin($t),wt=Math.cos($t);return At[0]=Tt*wt+Kt*bt,At[1]=Kt*wt-Tt*bt,At[2]=Ee*wt+vt*bt,At[3]=vt*wt-Ee*bt,At}function C(At,Xt){var $t=Xt[0],Tt=Xt[1],Kt=Xt[2];return At[0]=$t,At[1]=Tt,At[2]=Kt,At[3]=Math.sqrt(Math.abs(1-$t*$t-Tt*Tt-Kt*Kt)),At}function O(At,Xt){var $t=Xt[0],Tt=Xt[1],Kt=Xt[2],Ee=Xt[3],vt=Math.sqrt($t*$t+Tt*Tt+Kt*Kt),bt=Math.exp(Ee),wt=vt>0?bt*Math.sin(vt)/vt:0;return At[0]=$t*wt,At[1]=Tt*wt,At[2]=Kt*wt,At[3]=bt*Math.cos(vt),At}function b(At,Xt){var $t=Xt[0],Tt=Xt[1],Kt=Xt[2],Ee=Xt[3],vt=Math.sqrt($t*$t+Tt*Tt+Kt*Kt),bt=vt>0?Math.atan2(vt,Ee)/vt:0;return At[0]=$t*bt,At[1]=Tt*bt,At[2]=Kt*bt,At[3]=.5*Math.log($t*$t+Tt*Tt+Kt*Kt+Ee*Ee),At}function l(At,Xt,$t){return b(At,Xt),zt(At,At,$t),O(At,At),At}function K(At,Xt,$t,Tt){var Kt=Xt[0],Ee=Xt[1],vt=Xt[2],bt=Xt[3],wt=$t[0],D=$t[1],tt=$t[2],Ot=$t[3],ct,ie,pe,Ge,Re;return ie=Kt*wt+Ee*D+vt*tt+bt*Ot,ie<0&&(ie=-ie,wt=-wt,D=-D,tt=-tt,Ot=-Ot),1-ie>x.EPSILON?(ct=Math.acos(ie),pe=Math.sin(ct),Ge=Math.sin((1-Tt)*ct)/pe,Re=Math.sin(Tt*ct)/pe):(Ge=1-Tt,Re=Tt),At[0]=Ge*Kt+Re*wt,At[1]=Ge*Ee+Re*D,At[2]=Ge*vt+Re*tt,At[3]=Ge*bt+Re*Ot,At}function Z(At){var Xt=x.RANDOM(),$t=x.RANDOM(),Tt=x.RANDOM(),Kt=Math.sqrt(1-Xt),Ee=Math.sqrt(Xt);return At[0]=Kt*Math.sin(2*Math.PI*$t),At[1]=Kt*Math.cos(2*Math.PI*$t),At[2]=Ee*Math.sin(2*Math.PI*Tt),At[3]=Ee*Math.cos(2*Math.PI*Tt),At}function X(At,Xt){var $t=Xt[0],Tt=Xt[1],Kt=Xt[2],Ee=Xt[3],vt=$t*$t+Tt*Tt+Kt*Kt+Ee*Ee,bt=vt?1/vt:0;return At[0]=-$t*bt,At[1]=-Tt*bt,At[2]=-Kt*bt,At[3]=Ee*bt,At}function W(At,Xt){return At[0]=-Xt[0],At[1]=-Xt[1],At[2]=-Xt[2],At[3]=Xt[3],At}function U(At,Xt){var $t=Xt[0]+Xt[4]+Xt[8],Tt;if($t>0)Tt=Math.sqrt($t+1),At[3]=.5*Tt,Tt=.5/Tt,At[0]=(Xt[5]-Xt[7])*Tt,At[1]=(Xt[6]-Xt[2])*Tt,At[2]=(Xt[1]-Xt[3])*Tt;else{var Kt=0;Xt[4]>Xt[0]&&(Kt=1),Xt[8]>Xt[Kt*3+Kt]&&(Kt=2);var Ee=(Kt+1)%3,vt=(Kt+2)%3;Tt=Math.sqrt(Xt[Kt*3+Kt]-Xt[Ee*3+Ee]-Xt[vt*3+vt]+1),At[Kt]=.5*Tt,Tt=.5/Tt,At[3]=(Xt[Ee*3+vt]-Xt[vt*3+Ee])*Tt,At[Ee]=(Xt[Ee*3+Kt]+Xt[Kt*3+Ee])*Tt,At[vt]=(Xt[vt*3+Kt]+Xt[Kt*3+vt])*Tt}return At}function et(At,Xt,$t,Tt){var Kt=.5*Math.PI/180;Xt*=Kt,$t*=Kt,Tt*=Kt;var Ee=Math.sin(Xt),vt=Math.cos(Xt),bt=Math.sin($t),wt=Math.cos($t),D=Math.sin(Tt),tt=Math.cos(Tt);return At[0]=Ee*wt*tt-vt*bt*D,At[1]=vt*bt*tt+Ee*wt*D,At[2]=vt*wt*D-Ee*bt*tt,At[3]=vt*wt*tt+Ee*bt*D,At}function it(At){return"quat("+At[0]+", "+At[1]+", "+At[2]+", "+At[3]+")"}var J=E.clone,rt=E.fromValues,mt=E.copy,pt=E.set,ft=E.add,Mt=p,zt=E.scale,Vt=E.dot,kt=E.lerp,st=E.length,St=st,qt=E.squaredLength,re=qt,Nt=E.normalize,be=E.exactEquals,Te=E.equals,nr=function(){var At=k.create(),Xt=k.fromValues(1,0,0),$t=k.fromValues(0,1,0);return function(Tt,Kt,Ee){var vt=k.dot(Kt,Ee);return vt<-.999999?(k.cross(At,Xt,Kt),k.len(At)<1e-6&&k.cross(At,$t,Kt),k.normalize(At,At),m(Tt,At,Math.PI),Tt):vt>.999999?(Tt[0]=0,Tt[1]=0,Tt[2]=0,Tt[3]=1,Tt):(k.cross(At,Kt,Ee),Tt[0]=At[0],Tt[1]=At[1],Tt[2]=At[2],Tt[3]=1+vt,Nt(Tt,Tt))}}(),Rt=function(){var At=N(),Xt=N();return function($t,Tt,Kt,Ee,vt,bt){return K(At,Tt,vt,bt),K(Xt,Kt,Ee,bt),K($t,At,Xt,2*bt*(1-bt)),$t}}(),Dt=function(){var At=z.create();return function(Xt,$t,Tt,Kt){return At[0]=Tt[0],At[3]=Tt[1],At[6]=Tt[2],At[1]=Kt[0],At[4]=Kt[1],At[7]=Kt[2],At[2]=-$t[0],At[5]=-$t[1],At[8]=-$t[2],Nt(Xt,U(Xt,At))}}()},20663:function(le,S,M){"use strict";M.r(S),M.d(S,{add:function(){return m},angle:function(){return st},ceil:function(){return g},clone:function(){return k},copy:function(){return N},create:function(){return z},cross:function(){return rt},dist:function(){return Dt},distance:function(){return K},div:function(){return Rt},divide:function(){return p},dot:function(){return J},equals:function(){return Nt},exactEquals:function(){return re},floor:function(){return T},forEach:function(){return $t},fromValues:function(){return E},inverse:function(){return et},len:function(){return be},length:function(){return X},lerp:function(){return mt},max:function(){return C},min:function(){return w},mul:function(){return nr},multiply:function(){return v},negate:function(){return U},normalize:function(){return it},random:function(){return pt},rotate:function(){return kt},round:function(){return O},scale:function(){return b},scaleAndAdd:function(){return l},set:function(){return I},sqrDist:function(){return At},sqrLen:function(){return Xt},squaredDistance:function(){return Z},squaredLength:function(){return W},str:function(){return qt},sub:function(){return Te},subtract:function(){return y},transformMat2:function(){return ft},transformMat2d:function(){return Mt},transformMat3:function(){return zt},transformMat4:function(){return Vt},zero:function(){return St}});var x=M(47897);function z(){var Tt=new x.ARRAY_TYPE(2);return x.ARRAY_TYPE!=Float32Array&&(Tt[0]=0,Tt[1]=0),Tt}function k(Tt){var Kt=new x.ARRAY_TYPE(2);return Kt[0]=Tt[0],Kt[1]=Tt[1],Kt}function E(Tt,Kt){var Ee=new x.ARRAY_TYPE(2);return Ee[0]=Tt,Ee[1]=Kt,Ee}function N(Tt,Kt){return Tt[0]=Kt[0],Tt[1]=Kt[1],Tt}function I(Tt,Kt,Ee){return Tt[0]=Kt,Tt[1]=Ee,Tt}function m(Tt,Kt,Ee){return Tt[0]=Kt[0]+Ee[0],Tt[1]=Kt[1]+Ee[1],Tt}function y(Tt,Kt,Ee){return Tt[0]=Kt[0]-Ee[0],Tt[1]=Kt[1]-Ee[1],Tt}function v(Tt,Kt,Ee){return Tt[0]=Kt[0]*Ee[0],Tt[1]=Kt[1]*Ee[1],Tt}function p(Tt,Kt,Ee){return Tt[0]=Kt[0]/Ee[0],Tt[1]=Kt[1]/Ee[1],Tt}function g(Tt,Kt){return Tt[0]=Math.ceil(Kt[0]),Tt[1]=Math.ceil(Kt[1]),Tt}function T(Tt,Kt){return Tt[0]=Math.floor(Kt[0]),Tt[1]=Math.floor(Kt[1]),Tt}function w(Tt,Kt,Ee){return Tt[0]=Math.min(Kt[0],Ee[0]),Tt[1]=Math.min(Kt[1],Ee[1]),Tt}function C(Tt,Kt,Ee){return Tt[0]=Math.max(Kt[0],Ee[0]),Tt[1]=Math.max(Kt[1],Ee[1]),Tt}function O(Tt,Kt){return Tt[0]=Math.round(Kt[0]),Tt[1]=Math.round(Kt[1]),Tt}function b(Tt,Kt,Ee){return Tt[0]=Kt[0]*Ee,Tt[1]=Kt[1]*Ee,Tt}function l(Tt,Kt,Ee,vt){return Tt[0]=Kt[0]+Ee[0]*vt,Tt[1]=Kt[1]+Ee[1]*vt,Tt}function K(Tt,Kt){var Ee=Kt[0]-Tt[0],vt=Kt[1]-Tt[1];return Math.hypot(Ee,vt)}function Z(Tt,Kt){var Ee=Kt[0]-Tt[0],vt=Kt[1]-Tt[1];return Ee*Ee+vt*vt}function X(Tt){var Kt=Tt[0],Ee=Tt[1];return Math.hypot(Kt,Ee)}function W(Tt){var Kt=Tt[0],Ee=Tt[1];return Kt*Kt+Ee*Ee}function U(Tt,Kt){return Tt[0]=-Kt[0],Tt[1]=-Kt[1],Tt}function et(Tt,Kt){return Tt[0]=1/Kt[0],Tt[1]=1/Kt[1],Tt}function it(Tt,Kt){var Ee=Kt[0],vt=Kt[1],bt=Ee*Ee+vt*vt;return bt>0&&(bt=1/Math.sqrt(bt)),Tt[0]=Kt[0]*bt,Tt[1]=Kt[1]*bt,Tt}function J(Tt,Kt){return Tt[0]*Kt[0]+Tt[1]*Kt[1]}function rt(Tt,Kt,Ee){var vt=Kt[0]*Ee[1]-Kt[1]*Ee[0];return Tt[0]=Tt[1]=0,Tt[2]=vt,Tt}function mt(Tt,Kt,Ee,vt){var bt=Kt[0],wt=Kt[1];return Tt[0]=bt+vt*(Ee[0]-bt),Tt[1]=wt+vt*(Ee[1]-wt),Tt}function pt(Tt,Kt){Kt=Kt||1;var Ee=x.RANDOM()*2*Math.PI;return Tt[0]=Math.cos(Ee)*Kt,Tt[1]=Math.sin(Ee)*Kt,Tt}function ft(Tt,Kt,Ee){var vt=Kt[0],bt=Kt[1];return Tt[0]=Ee[0]*vt+Ee[2]*bt,Tt[1]=Ee[1]*vt+Ee[3]*bt,Tt}function Mt(Tt,Kt,Ee){var vt=Kt[0],bt=Kt[1];return Tt[0]=Ee[0]*vt+Ee[2]*bt+Ee[4],Tt[1]=Ee[1]*vt+Ee[3]*bt+Ee[5],Tt}function zt(Tt,Kt,Ee){var vt=Kt[0],bt=Kt[1];return Tt[0]=Ee[0]*vt+Ee[3]*bt+Ee[6],Tt[1]=Ee[1]*vt+Ee[4]*bt+Ee[7],Tt}function Vt(Tt,Kt,Ee){var vt=Kt[0],bt=Kt[1];return Tt[0]=Ee[0]*vt+Ee[4]*bt+Ee[12],Tt[1]=Ee[1]*vt+Ee[5]*bt+Ee[13],Tt}function kt(Tt,Kt,Ee,vt){var bt=Kt[0]-Ee[0],wt=Kt[1]-Ee[1],D=Math.sin(vt),tt=Math.cos(vt);return Tt[0]=bt*tt-wt*D+Ee[0],Tt[1]=bt*D+wt*tt+Ee[1],Tt}function st(Tt,Kt){var Ee=Tt[0],vt=Tt[1],bt=Kt[0],wt=Kt[1],D=Math.sqrt(Ee*Ee+vt*vt)*Math.sqrt(bt*bt+wt*wt),tt=D&&(Ee*bt+vt*wt)/D;return Math.acos(Math.min(Math.max(tt,-1),1))}function St(Tt){return Tt[0]=0,Tt[1]=0,Tt}function qt(Tt){return"vec2("+Tt[0]+", "+Tt[1]+")"}function re(Tt,Kt){return Tt[0]===Kt[0]&&Tt[1]===Kt[1]}function Nt(Tt,Kt){var Ee=Tt[0],vt=Tt[1],bt=Kt[0],wt=Kt[1];return Math.abs(Ee-bt)<=x.EPSILON*Math.max(1,Math.abs(Ee),Math.abs(bt))&&Math.abs(vt-wt)<=x.EPSILON*Math.max(1,Math.abs(vt),Math.abs(wt))}var be=X,Te=y,nr=v,Rt=p,Dt=K,At=Z,Xt=W,$t=function(){var Tt=z();return function(Kt,Ee,vt,bt,wt,D){var tt,Ot;for(Ee||(Ee=2),vt||(vt=0),bt?Ot=Math.min(bt*Ee+vt,Kt.length):Ot=Kt.length,tt=vt;tt<Ot;tt+=Ee)Tt[0]=Kt[tt],Tt[1]=Kt[tt+1],wt(Tt,Tt,D),Kt[tt]=Tt[0],Kt[tt+1]=Tt[1];return Kt}}()},91606:function(le,S,M){"use strict";M.r(S),M.d(S,{add:function(){return y},angle:function(){return re},bezier:function(){return ft},ceil:function(){return T},clone:function(){return k},copy:function(){return I},create:function(){return z},cross:function(){return rt},dist:function(){return Xt},distance:function(){return Z},div:function(){return At},divide:function(){return g},dot:function(){return J},equals:function(){return nr},exactEquals:function(){return Te},floor:function(){return w},forEach:function(){return Ee},fromValues:function(){return N},hermite:function(){return pt},inverse:function(){return et},len:function(){return Tt},length:function(){return E},lerp:function(){return mt},max:function(){return O},min:function(){return C},mul:function(){return Dt},multiply:function(){return p},negate:function(){return U},normalize:function(){return it},random:function(){return Mt},rotateX:function(){return st},rotateY:function(){return St},rotateZ:function(){return qt},round:function(){return b},scale:function(){return l},scaleAndAdd:function(){return K},set:function(){return m},sqrDist:function(){return $t},sqrLen:function(){return Kt},squaredDistance:function(){return X},squaredLength:function(){return W},str:function(){return be},sub:function(){return Rt},subtract:function(){return v},transformMat3:function(){return Vt},transformMat4:function(){return zt},transformQuat:function(){return kt},zero:function(){return Nt}});var x=M(47897);function z(){var vt=new x.ARRAY_TYPE(3);return x.ARRAY_TYPE!=Float32Array&&(vt[0]=0,vt[1]=0,vt[2]=0),vt}function k(vt){var bt=new x.ARRAY_TYPE(3);return bt[0]=vt[0],bt[1]=vt[1],bt[2]=vt[2],bt}function E(vt){var bt=vt[0],wt=vt[1],D=vt[2];return Math.hypot(bt,wt,D)}function N(vt,bt,wt){var D=new x.ARRAY_TYPE(3);return D[0]=vt,D[1]=bt,D[2]=wt,D}function I(vt,bt){return vt[0]=bt[0],vt[1]=bt[1],vt[2]=bt[2],vt}function m(vt,bt,wt,D){return vt[0]=bt,vt[1]=wt,vt[2]=D,vt}function y(vt,bt,wt){return vt[0]=bt[0]+wt[0],vt[1]=bt[1]+wt[1],vt[2]=bt[2]+wt[2],vt}function v(vt,bt,wt){return vt[0]=bt[0]-wt[0],vt[1]=bt[1]-wt[1],vt[2]=bt[2]-wt[2],vt}function p(vt,bt,wt){return vt[0]=bt[0]*wt[0],vt[1]=bt[1]*wt[1],vt[2]=bt[2]*wt[2],vt}function g(vt,bt,wt){return vt[0]=bt[0]/wt[0],vt[1]=bt[1]/wt[1],vt[2]=bt[2]/wt[2],vt}function T(vt,bt){return vt[0]=Math.ceil(bt[0]),vt[1]=Math.ceil(bt[1]),vt[2]=Math.ceil(bt[2]),vt}function w(vt,bt){return vt[0]=Math.floor(bt[0]),vt[1]=Math.floor(bt[1]),vt[2]=Math.floor(bt[2]),vt}function C(vt,bt,wt){return vt[0]=Math.min(bt[0],wt[0]),vt[1]=Math.min(bt[1],wt[1]),vt[2]=Math.min(bt[2],wt[2]),vt}function O(vt,bt,wt){return vt[0]=Math.max(bt[0],wt[0]),vt[1]=Math.max(bt[1],wt[1]),vt[2]=Math.max(bt[2],wt[2]),vt}function b(vt,bt){return vt[0]=Math.round(bt[0]),vt[1]=Math.round(bt[1]),vt[2]=Math.round(bt[2]),vt}function l(vt,bt,wt){return vt[0]=bt[0]*wt,vt[1]=bt[1]*wt,vt[2]=bt[2]*wt,vt}function K(vt,bt,wt,D){return vt[0]=bt[0]+wt[0]*D,vt[1]=bt[1]+wt[1]*D,vt[2]=bt[2]+wt[2]*D,vt}function Z(vt,bt){var wt=bt[0]-vt[0],D=bt[1]-vt[1],tt=bt[2]-vt[2];return Math.hypot(wt,D,tt)}function X(vt,bt){var wt=bt[0]-vt[0],D=bt[1]-vt[1],tt=bt[2]-vt[2];return wt*wt+D*D+tt*tt}function W(vt){var bt=vt[0],wt=vt[1],D=vt[2];return bt*bt+wt*wt+D*D}function U(vt,bt){return vt[0]=-bt[0],vt[1]=-bt[1],vt[2]=-bt[2],vt}function et(vt,bt){return vt[0]=1/bt[0],vt[1]=1/bt[1],vt[2]=1/bt[2],vt}function it(vt,bt){var wt=bt[0],D=bt[1],tt=bt[2],Ot=wt*wt+D*D+tt*tt;return Ot>0&&(Ot=1/Math.sqrt(Ot)),vt[0]=bt[0]*Ot,vt[1]=bt[1]*Ot,vt[2]=bt[2]*Ot,vt}function J(vt,bt){return vt[0]*bt[0]+vt[1]*bt[1]+vt[2]*bt[2]}function rt(vt,bt,wt){var D=bt[0],tt=bt[1],Ot=bt[2],ct=wt[0],ie=wt[1],pe=wt[2];return vt[0]=tt*pe-Ot*ie,vt[1]=Ot*ct-D*pe,vt[2]=D*ie-tt*ct,vt}function mt(vt,bt,wt,D){var tt=bt[0],Ot=bt[1],ct=bt[2];return vt[0]=tt+D*(wt[0]-tt),vt[1]=Ot+D*(wt[1]-Ot),vt[2]=ct+D*(wt[2]-ct),vt}function pt(vt,bt,wt,D,tt,Ot){var ct=Ot*Ot,ie=ct*(2*Ot-3)+1,pe=ct*(Ot-2)+Ot,Ge=ct*(Ot-1),Re=ct*(3-2*Ot);return vt[0]=bt[0]*ie+wt[0]*pe+D[0]*Ge+tt[0]*Re,vt[1]=bt[1]*ie+wt[1]*pe+D[1]*Ge+tt[1]*Re,vt[2]=bt[2]*ie+wt[2]*pe+D[2]*Ge+tt[2]*Re,vt}function ft(vt,bt,wt,D,tt,Ot){var ct=1-Ot,ie=ct*ct,pe=Ot*Ot,Ge=ie*ct,Re=3*Ot*ie,Je=3*pe*ct,Ve=pe*Ot;return vt[0]=bt[0]*Ge+wt[0]*Re+D[0]*Je+tt[0]*Ve,vt[1]=bt[1]*Ge+wt[1]*Re+D[1]*Je+tt[1]*Ve,vt[2]=bt[2]*Ge+wt[2]*Re+D[2]*Je+tt[2]*Ve,vt}function Mt(vt,bt){bt=bt||1;var wt=x.RANDOM()*2*Math.PI,D=x.RANDOM()*2-1,tt=Math.sqrt(1-D*D)*bt;return vt[0]=Math.cos(wt)*tt,vt[1]=Math.sin(wt)*tt,vt[2]=D*bt,vt}function zt(vt,bt,wt){var D=bt[0],tt=bt[1],Ot=bt[2],ct=wt[3]*D+wt[7]*tt+wt[11]*Ot+wt[15];return ct=ct||1,vt[0]=(wt[0]*D+wt[4]*tt+wt[8]*Ot+wt[12])/ct,vt[1]=(wt[1]*D+wt[5]*tt+wt[9]*Ot+wt[13])/ct,vt[2]=(wt[2]*D+wt[6]*tt+wt[10]*Ot+wt[14])/ct,vt}function Vt(vt,bt,wt){var D=bt[0],tt=bt[1],Ot=bt[2];return vt[0]=D*wt[0]+tt*wt[3]+Ot*wt[6],vt[1]=D*wt[1]+tt*wt[4]+Ot*wt[7],vt[2]=D*wt[2]+tt*wt[5]+Ot*wt[8],vt}function kt(vt,bt,wt){var D=wt[0],tt=wt[1],Ot=wt[2],ct=wt[3],ie=bt[0],pe=bt[1],Ge=bt[2],Re=tt*Ge-Ot*pe,Je=Ot*ie-D*Ge,Ve=D*pe-tt*ie,ce=tt*Ve-Ot*Je,Le=Ot*Re-D*Ve,je=D*Je-tt*Re,Be=ct*2;return Re*=Be,Je*=Be,Ve*=Be,ce*=2,Le*=2,je*=2,vt[0]=ie+Re+ce,vt[1]=pe+Je+Le,vt[2]=Ge+Ve+je,vt}function st(vt,bt,wt,D){var tt=[],Ot=[];return tt[0]=bt[0]-wt[0],tt[1]=bt[1]-wt[1],tt[2]=bt[2]-wt[2],Ot[0]=tt[0],Ot[1]=tt[1]*Math.cos(D)-tt[2]*Math.sin(D),Ot[2]=tt[1]*Math.sin(D)+tt[2]*Math.cos(D),vt[0]=Ot[0]+wt[0],vt[1]=Ot[1]+wt[1],vt[2]=Ot[2]+wt[2],vt}function St(vt,bt,wt,D){var tt=[],Ot=[];return tt[0]=bt[0]-wt[0],tt[1]=bt[1]-wt[1],tt[2]=bt[2]-wt[2],Ot[0]=tt[2]*Math.sin(D)+tt[0]*Math.cos(D),Ot[1]=tt[1],Ot[2]=tt[2]*Math.cos(D)-tt[0]*Math.sin(D),vt[0]=Ot[0]+wt[0],vt[1]=Ot[1]+wt[1],vt[2]=Ot[2]+wt[2],vt}function qt(vt,bt,wt,D){var tt=[],Ot=[];return tt[0]=bt[0]-wt[0],tt[1]=bt[1]-wt[1],tt[2]=bt[2]-wt[2],Ot[0]=tt[0]*Math.cos(D)-tt[1]*Math.sin(D),Ot[1]=tt[0]*Math.sin(D)+tt[1]*Math.cos(D),Ot[2]=tt[2],vt[0]=Ot[0]+wt[0],vt[1]=Ot[1]+wt[1],vt[2]=Ot[2]+wt[2],vt}function re(vt,bt){var wt=vt[0],D=vt[1],tt=vt[2],Ot=bt[0],ct=bt[1],ie=bt[2],pe=Math.sqrt(wt*wt+D*D+tt*tt),Ge=Math.sqrt(Ot*Ot+ct*ct+ie*ie),Re=pe*Ge,Je=Re&&J(vt,bt)/Re;return Math.acos(Math.min(Math.max(Je,-1),1))}function Nt(vt){return vt[0]=0,vt[1]=0,vt[2]=0,vt}function be(vt){return"vec3("+vt[0]+", "+vt[1]+", "+vt[2]+")"}function Te(vt,bt){return vt[0]===bt[0]&&vt[1]===bt[1]&&vt[2]===bt[2]}function nr(vt,bt){var wt=vt[0],D=vt[1],tt=vt[2],Ot=bt[0],ct=bt[1],ie=bt[2];return Math.abs(wt-Ot)<=x.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Ot))&&Math.abs(D-ct)<=x.EPSILON*Math.max(1,Math.abs(D),Math.abs(ct))&&Math.abs(tt-ie)<=x.EPSILON*Math.max(1,Math.abs(tt),Math.abs(ie))}var Rt=v,Dt=p,At=g,Xt=Z,$t=X,Tt=E,Kt=W,Ee=function(){var vt=z();return function(bt,wt,D,tt,Ot,ct){var ie,pe;for(wt||(wt=3),D||(D=0),tt?pe=Math.min(tt*wt+D,bt.length):pe=bt.length,ie=D;ie<pe;ie+=wt)vt[0]=bt[ie],vt[1]=bt[ie+1],vt[2]=bt[ie+2],Ot(vt,vt,ct),bt[ie]=vt[0],bt[ie+1]=vt[1],bt[ie+2]=vt[2];return bt}}()},59196:function(le,S,M){"use strict";M.r(S),M.d(S,{add:function(){return m},ceil:function(){return g},clone:function(){return k},copy:function(){return N},create:function(){return z},cross:function(){return rt},dist:function(){return Nt},distance:function(){return K},div:function(){return re},divide:function(){return p},dot:function(){return J},equals:function(){return st},exactEquals:function(){return kt},floor:function(){return T},forEach:function(){return Rt},fromValues:function(){return E},inverse:function(){return et},len:function(){return Te},length:function(){return X},lerp:function(){return mt},max:function(){return C},min:function(){return w},mul:function(){return qt},multiply:function(){return v},negate:function(){return U},normalize:function(){return it},random:function(){return pt},round:function(){return O},scale:function(){return b},scaleAndAdd:function(){return l},set:function(){return I},sqrDist:function(){return be},sqrLen:function(){return nr},squaredDistance:function(){return Z},squaredLength:function(){return W},str:function(){return Vt},sub:function(){return St},subtract:function(){return y},transformMat4:function(){return ft},transformQuat:function(){return Mt},zero:function(){return zt}});var x=M(47897);function z(){var Dt=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(Dt[0]=0,Dt[1]=0,Dt[2]=0,Dt[3]=0),Dt}function k(Dt){var At=new x.ARRAY_TYPE(4);return At[0]=Dt[0],At[1]=Dt[1],At[2]=Dt[2],At[3]=Dt[3],At}function E(Dt,At,Xt,$t){var Tt=new x.ARRAY_TYPE(4);return Tt[0]=Dt,Tt[1]=At,Tt[2]=Xt,Tt[3]=$t,Tt}function N(Dt,At){return Dt[0]=At[0],Dt[1]=At[1],Dt[2]=At[2],Dt[3]=At[3],Dt}function I(Dt,At,Xt,$t,Tt){return Dt[0]=At,Dt[1]=Xt,Dt[2]=$t,Dt[3]=Tt,Dt}function m(Dt,At,Xt){return Dt[0]=At[0]+Xt[0],Dt[1]=At[1]+Xt[1],Dt[2]=At[2]+Xt[2],Dt[3]=At[3]+Xt[3],Dt}function y(Dt,At,Xt){return Dt[0]=At[0]-Xt[0],Dt[1]=At[1]-Xt[1],Dt[2]=At[2]-Xt[2],Dt[3]=At[3]-Xt[3],Dt}function v(Dt,At,Xt){return Dt[0]=At[0]*Xt[0],Dt[1]=At[1]*Xt[1],Dt[2]=At[2]*Xt[2],Dt[3]=At[3]*Xt[3],Dt}function p(Dt,At,Xt){return Dt[0]=At[0]/Xt[0],Dt[1]=At[1]/Xt[1],Dt[2]=At[2]/Xt[2],Dt[3]=At[3]/Xt[3],Dt}function g(Dt,At){return Dt[0]=Math.ceil(At[0]),Dt[1]=Math.ceil(At[1]),Dt[2]=Math.ceil(At[2]),Dt[3]=Math.ceil(At[3]),Dt}function T(Dt,At){return Dt[0]=Math.floor(At[0]),Dt[1]=Math.floor(At[1]),Dt[2]=Math.floor(At[2]),Dt[3]=Math.floor(At[3]),Dt}function w(Dt,At,Xt){return Dt[0]=Math.min(At[0],Xt[0]),Dt[1]=Math.min(At[1],Xt[1]),Dt[2]=Math.min(At[2],Xt[2]),Dt[3]=Math.min(At[3],Xt[3]),Dt}function C(Dt,At,Xt){return Dt[0]=Math.max(At[0],Xt[0]),Dt[1]=Math.max(At[1],Xt[1]),Dt[2]=Math.max(At[2],Xt[2]),Dt[3]=Math.max(At[3],Xt[3]),Dt}function O(Dt,At){return Dt[0]=Math.round(At[0]),Dt[1]=Math.round(At[1]),Dt[2]=Math.round(At[2]),Dt[3]=Math.round(At[3]),Dt}function b(Dt,At,Xt){return Dt[0]=At[0]*Xt,Dt[1]=At[1]*Xt,Dt[2]=At[2]*Xt,Dt[3]=At[3]*Xt,Dt}function l(Dt,At,Xt,$t){return Dt[0]=At[0]+Xt[0]*$t,Dt[1]=At[1]+Xt[1]*$t,Dt[2]=At[2]+Xt[2]*$t,Dt[3]=At[3]+Xt[3]*$t,Dt}function K(Dt,At){var Xt=At[0]-Dt[0],$t=At[1]-Dt[1],Tt=At[2]-Dt[2],Kt=At[3]-Dt[3];return Math.hypot(Xt,$t,Tt,Kt)}function Z(Dt,At){var Xt=At[0]-Dt[0],$t=At[1]-Dt[1],Tt=At[2]-Dt[2],Kt=At[3]-Dt[3];return Xt*Xt+$t*$t+Tt*Tt+Kt*Kt}function X(Dt){var At=Dt[0],Xt=Dt[1],$t=Dt[2],Tt=Dt[3];return Math.hypot(At,Xt,$t,Tt)}function W(Dt){var At=Dt[0],Xt=Dt[1],$t=Dt[2],Tt=Dt[3];return At*At+Xt*Xt+$t*$t+Tt*Tt}function U(Dt,At){return Dt[0]=-At[0],Dt[1]=-At[1],Dt[2]=-At[2],Dt[3]=-At[3],Dt}function et(Dt,At){return Dt[0]=1/At[0],Dt[1]=1/At[1],Dt[2]=1/At[2],Dt[3]=1/At[3],Dt}function it(Dt,At){var Xt=At[0],$t=At[1],Tt=At[2],Kt=At[3],Ee=Xt*Xt+$t*$t+Tt*Tt+Kt*Kt;return Ee>0&&(Ee=1/Math.sqrt(Ee)),Dt[0]=Xt*Ee,Dt[1]=$t*Ee,Dt[2]=Tt*Ee,Dt[3]=Kt*Ee,Dt}function J(Dt,At){return Dt[0]*At[0]+Dt[1]*At[1]+Dt[2]*At[2]+Dt[3]*At[3]}function rt(Dt,At,Xt,$t){var Tt=Xt[0]*$t[1]-Xt[1]*$t[0],Kt=Xt[0]*$t[2]-Xt[2]*$t[0],Ee=Xt[0]*$t[3]-Xt[3]*$t[0],vt=Xt[1]*$t[2]-Xt[2]*$t[1],bt=Xt[1]*$t[3]-Xt[3]*$t[1],wt=Xt[2]*$t[3]-Xt[3]*$t[2],D=At[0],tt=At[1],Ot=At[2],ct=At[3];return Dt[0]=tt*wt-Ot*bt+ct*vt,Dt[1]=-(D*wt)+Ot*Ee-ct*Kt,Dt[2]=D*bt-tt*Ee+ct*Tt,Dt[3]=-(D*vt)+tt*Kt-Ot*Tt,Dt}function mt(Dt,At,Xt,$t){var Tt=At[0],Kt=At[1],Ee=At[2],vt=At[3];return Dt[0]=Tt+$t*(Xt[0]-Tt),Dt[1]=Kt+$t*(Xt[1]-Kt),Dt[2]=Ee+$t*(Xt[2]-Ee),Dt[3]=vt+$t*(Xt[3]-vt),Dt}function pt(Dt,At){At=At||1;var Xt,$t,Tt,Kt,Ee,vt;do Xt=x.RANDOM()*2-1,$t=x.RANDOM()*2-1,Ee=Xt*Xt+$t*$t;while(Ee>=1);do Tt=x.RANDOM()*2-1,Kt=x.RANDOM()*2-1,vt=Tt*Tt+Kt*Kt;while(vt>=1);var bt=Math.sqrt((1-Ee)/vt);return Dt[0]=At*Xt,Dt[1]=At*$t,Dt[2]=At*Tt*bt,Dt[3]=At*Kt*bt,Dt}function ft(Dt,At,Xt){var $t=At[0],Tt=At[1],Kt=At[2],Ee=At[3];return Dt[0]=Xt[0]*$t+Xt[4]*Tt+Xt[8]*Kt+Xt[12]*Ee,Dt[1]=Xt[1]*$t+Xt[5]*Tt+Xt[9]*Kt+Xt[13]*Ee,Dt[2]=Xt[2]*$t+Xt[6]*Tt+Xt[10]*Kt+Xt[14]*Ee,Dt[3]=Xt[3]*$t+Xt[7]*Tt+Xt[11]*Kt+Xt[15]*Ee,Dt}function Mt(Dt,At,Xt){var $t=At[0],Tt=At[1],Kt=At[2],Ee=Xt[0],vt=Xt[1],bt=Xt[2],wt=Xt[3],D=wt*$t+vt*Kt-bt*Tt,tt=wt*Tt+bt*$t-Ee*Kt,Ot=wt*Kt+Ee*Tt-vt*$t,ct=-Ee*$t-vt*Tt-bt*Kt;return Dt[0]=D*wt+ct*-Ee+tt*-bt-Ot*-vt,Dt[1]=tt*wt+ct*-vt+Ot*-Ee-D*-bt,Dt[2]=Ot*wt+ct*-bt+D*-vt-tt*-Ee,Dt[3]=At[3],Dt}function zt(Dt){return Dt[0]=0,Dt[1]=0,Dt[2]=0,Dt[3]=0,Dt}function Vt(Dt){return"vec4("+Dt[0]+", "+Dt[1]+", "+Dt[2]+", "+Dt[3]+")"}function kt(Dt,At){return Dt[0]===At[0]&&Dt[1]===At[1]&&Dt[2]===At[2]&&Dt[3]===At[3]}function st(Dt,At){var Xt=Dt[0],$t=Dt[1],Tt=Dt[2],Kt=Dt[3],Ee=At[0],vt=At[1],bt=At[2],wt=At[3];return Math.abs(Xt-Ee)<=x.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ee))&&Math.abs($t-vt)<=x.EPSILON*Math.max(1,Math.abs($t),Math.abs(vt))&&Math.abs(Tt-bt)<=x.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(bt))&&Math.abs(Kt-wt)<=x.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(wt))}var St=y,qt=v,re=p,Nt=K,be=Z,Te=X,nr=W,Rt=function(){var Dt=z();return function(At,Xt,$t,Tt,Kt,Ee){var vt,bt;for(Xt||(Xt=4),$t||($t=0),Tt?bt=Math.min(Tt*Xt+$t,At.length):bt=At.length,vt=$t;vt<bt;vt+=Xt)Dt[0]=At[vt],Dt[1]=At[vt+1],Dt[2]=At[vt+2],Dt[3]=At[vt+3],Kt(Dt,Dt,Ee),At[vt]=Dt[0],At[vt+1]=Dt[1],At[vt+2]=Dt[2],At[vt+3]=Dt[3];return At}}()},60330:function(le){le.exports=S;function S(M,x,z){return M[0]=x[0]+z[0],M[1]=x[1]+z[1],M}},56895:function(le){le.exports=S;function S(M,x){return M[0]=Math.ceil(x[0]),M[1]=Math.ceil(x[1]),M}},24577:function(le){le.exports=S;function S(M){var x=new Float32Array(2);return x[0]=M[0],x[1]=M[1],x}},79927:function(le){le.exports=S;function S(M,x){return M[0]=x[0],M[1]=x[1],M}},82850:function(le){le.exports=S;function S(){var M=new Float32Array(2);return M[0]=0,M[1]=0,M}},89004:function(le){le.exports=S;function S(M,x,z){var k=x[0]*z[1]-x[1]*z[0];return M[0]=M[1]=0,M[2]=k,M}},80451:function(le,S,M){le.exports=M(4962)},4962:function(le){le.exports=S;function S(M,x){var z=x[0]-M[0],k=x[1]-M[1];return Math.sqrt(z*z+k*k)}},31754:function(le,S,M){le.exports=M(52318)},52318:function(le){le.exports=S;function S(M,x,z){return M[0]=x[0]/z[0],M[1]=x[1]/z[1],M}},44927:function(le){le.exports=S;function S(M,x){return M[0]*x[0]+M[1]*x[1]}},242:function(le){le.exports=1e-6},57657:function(le,S,M){le.exports=z;var x=M(242);function z(k,E){var N=k[0],I=k[1],m=E[0],y=E[1];return Math.abs(N-m)<=x*Math.max(1,Math.abs(N),Math.abs(m))&&Math.abs(I-y)<=x*Math.max(1,Math.abs(I),Math.abs(y))}},22236:function(le){le.exports=S;function S(M,x){return M[0]===x[0]&&M[1]===x[1]}},76438:function(le){le.exports=S;function S(M,x){return M[0]=Math.floor(x[0]),M[1]=Math.floor(x[1]),M}},23861:function(le,S,M){le.exports=z;var x=M(82850)();function z(k,E,N,I,m,y){var v,p;for(E||(E=2),N||(N=0),I?p=Math.min(I*E+N,k.length):p=k.length,v=N;v<p;v+=E)x[0]=k[v],x[1]=k[v+1],m(x,x,y),k[v]=x[0],k[v+1]=x[1];return k}},34238:function(le){le.exports=S;function S(M,x){var z=new Float32Array(2);return z[0]=M,z[1]=x,z}},42850:function(le,S,M){le.exports={EPSILON:M(242),create:M(82850),clone:M(24577),fromValues:M(34238),copy:M(79927),set:M(19204),equals:M(57657),exactEquals:M(22236),add:M(60330),subtract:M(41596),sub:M(75394),multiply:M(79365),mul:M(29108),divide:M(52318),div:M(31754),inverse:M(28123),min:M(19986),max:M(73567),rotate:M(99516),floor:M(76438),ceil:M(56895),round:M(95241),scale:M(9608),scaleAndAdd:M(92893),distance:M(4962),dist:M(80451),squaredDistance:M(80096),sqrDist:M(12549),length:M(92876),len:M(88798),squaredLength:M(71986),sqrLen:M(41887),negate:M(28316),normalize:M(42105),dot:M(44927),cross:M(89004),lerp:M(87220),random:M(88566),transformMat2:M(68402),transformMat2d:M(8230),transformMat3:M(92058),transformMat4:M(12360),forEach:M(23861),limit:M(80840)}},28123:function(le){le.exports=S;function S(M,x){return M[0]=1/x[0],M[1]=1/x[1],M}},88798:function(le,S,M){le.exports=M(92876)},92876:function(le){le.exports=S;function S(M){var x=M[0],z=M[1];return Math.sqrt(x*x+z*z)}},87220:function(le){le.exports=S;function S(M,x,z,k){var E=x[0],N=x[1];return M[0]=E+k*(z[0]-E),M[1]=N+k*(z[1]-N),M}},80840:function(le){le.exports=S;function S(M,x,z){var k=x[0]*x[0]+x[1]*x[1];if(k>z*z){var E=Math.sqrt(k);M[0]=x[0]/E*z,M[1]=x[1]/E*z}else M[0]=x[0],M[1]=x[1];return M}},73567:function(le){le.exports=S;function S(M,x,z){return M[0]=Math.max(x[0],z[0]),M[1]=Math.max(x[1],z[1]),M}},19986:function(le){le.exports=S;function S(M,x,z){return M[0]=Math.min(x[0],z[0]),M[1]=Math.min(x[1],z[1]),M}},29108:function(le,S,M){le.exports=M(79365)},79365:function(le){le.exports=S;function S(M,x,z){return M[0]=x[0]*z[0],M[1]=x[1]*z[1],M}},28316:function(le){le.exports=S;function S(M,x){return M[0]=-x[0],M[1]=-x[1],M}},42105:function(le){le.exports=S;function S(M,x){var z=x[0],k=x[1],E=z*z+k*k;return E>0&&(E=1/Math.sqrt(E),M[0]=x[0]*E,M[1]=x[1]*E),M}},88566:function(le){le.exports=S;function S(M,x){x=x||1;var z=Math.random()*2*Math.PI;return M[0]=Math.cos(z)*x,M[1]=Math.sin(z)*x,M}},99516:function(le){le.exports=S;function S(M,x,z){var k=Math.cos(z),E=Math.sin(z),N=x[0],I=x[1];return M[0]=N*k-I*E,M[1]=N*E+I*k,M}},95241:function(le){le.exports=S;function S(M,x){return M[0]=Math.round(x[0]),M[1]=Math.round(x[1]),M}},9608:function(le){le.exports=S;function S(M,x,z){return M[0]=x[0]*z,M[1]=x[1]*z,M}},92893:function(le){le.exports=S;function S(M,x,z,k){return M[0]=x[0]+z[0]*k,M[1]=x[1]+z[1]*k,M}},19204:function(le){le.exports=S;function S(M,x,z){return M[0]=x,M[1]=z,M}},12549:function(le,S,M){le.exports=M(80096)},41887:function(le,S,M){le.exports=M(71986)},80096:function(le){le.exports=S;function S(M,x){var z=x[0]-M[0],k=x[1]-M[1];return z*z+k*k}},71986:function(le){le.exports=S;function S(M){var x=M[0],z=M[1];return x*x+z*z}},75394:function(le,S,M){le.exports=M(41596)},41596:function(le){le.exports=S;function S(M,x,z){return M[0]=x[0]-z[0],M[1]=x[1]-z[1],M}},68402:function(le){le.exports=S;function S(M,x,z){var k=x[0],E=x[1];return M[0]=z[0]*k+z[2]*E,M[1]=z[1]*k+z[3]*E,M}},8230:function(le){le.exports=S;function S(M,x,z){var k=x[0],E=x[1];return M[0]=z[0]*k+z[2]*E+z[4],M[1]=z[1]*k+z[3]*E+z[5],M}},92058:function(le){le.exports=S;function S(M,x,z){var k=x[0],E=x[1];return M[0]=z[0]*k+z[3]*E+z[6],M[1]=z[1]*k+z[4]*E+z[7],M}},12360:function(le){le.exports=S;function S(M,x,z){var k=x[0],E=x[1];return M[0]=z[0]*k+z[4]*E+z[12],M[1]=z[1]*k+z[5]*E+z[13],M}},20956:function(le){var S=[],M=[],x="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function z(E,N){if(N=N||{},E===void 0)throw new Error(x);var I=N.prepend===!0?"prepend":"append",m=N.container!==void 0?N.container:document.querySelector("head"),y=S.indexOf(m);y===-1&&(y=S.push(m)-1,M[y]={});var v;return M[y]!==void 0&&M[y][I]!==void 0?v=M[y][I]:(v=M[y][I]=k(),I==="prepend"?m.insertBefore(v,m.childNodes[0]):m.appendChild(v)),E.charCodeAt(0)===65279&&(E=E.substr(1,E.length)),v.styleSheet?v.styleSheet.cssText+=E:v.textContent+=E,v}function k(){var E=document.createElement("style");return E.setAttribute("type","text/css"),E}le.exports=z,le.exports.insertCss=z},15909:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var M=Symbol.for("INJECTION");function x(I,m,y,v){function p(){return v&&!Reflect.hasMetadata(M,this,m)&&Reflect.defineMetadata(M,y(),this,m),Reflect.hasMetadata(M,this,m)?Reflect.getMetadata(M,this,m):y()}function g(T){Reflect.defineMetadata(M,T,this,m)}Object.defineProperty(I,m,{configurable:!0,enumerable:!0,get:p,set:g})}function z(I,m){return function(y){return function(v,p){var g=function(){return I.get(y)};x(v,p,g,m)}}}S.makePropertyInjectDecorator=z;function k(I,m){return function(y,v){return function(p,g){var T=function(){return I.getNamed(y,v)};x(p,g,T,m)}}}S.makePropertyInjectNamedDecorator=k;function E(I,m){return function(y,v,p){return function(g,T){var w=function(){return I.getTagged(y,v,p)};x(g,T,w,m)}}}S.makePropertyInjectTaggedDecorator=E;function N(I,m){return function(y){return function(v,p){var g=function(){return I.getAll(y)};x(v,p,g,m)}}}S.makePropertyMultiInjectDecorator=N},79309:function(le,S,M){"use strict";var x;x={value:!0};var z=M(15909);function k(E,N){N===void 0&&(N=!0);var I=z.makePropertyInjectDecorator(E,N),m=z.makePropertyInjectNamedDecorator(E,N),y=z.makePropertyInjectTaggedDecorator(E,N),v=z.makePropertyMultiInjectDecorator(E,N);return{lazyInject:I,lazyInjectNamed:m,lazyInjectTagged:y,lazyMultiInject:v}}S.Z=k},26459:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.tagProperty=S.tagParameter=S.decorate=void 0;var x=M(40055),z=M(62220);function k(v,p,g,T){var w=z.TAGGED;N(w,v,p,T,g)}S.tagParameter=k;function E(v,p,g){var T=z.TAGGED_PROP;N(T,v.constructor,p,g)}S.tagProperty=E;function N(v,p,g,T,w){var C={},O=typeof w=="number",b=w!==void 0&&O?w.toString():g;if(O&&g!==void 0)throw new Error(x.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(v,p)&&(C=Reflect.getMetadata(v,p));var l=C[b];if(!Array.isArray(l))l=[];else for(var K=0,Z=l;K<Z.length;K++){var X=Z[K];if(X.key===T.key)throw new Error(x.DUPLICATED_METADATA+" "+X.key.toString())}l.push(T),C[b]=l,Reflect.defineMetadata(v,C,p)}function I(v,p){Reflect.decorate(v,p)}function m(v,p){return function(g,T){p(g,T,v)}}function y(v,p,g){typeof g=="number"?I([m(g,v)],p):typeof g=="string"?Reflect.decorate([v],p,g):I([v],p)}S.decorate=y},13012:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.inject=S.LazyServiceIdentifer=void 0;var x=M(40055),z=M(62220),k=M(37397),E=M(26459),N=function(){function m(y){this._cb=y}return m.prototype.unwrap=function(){return this._cb()},m}();S.LazyServiceIdentifer=N;function I(m){return function(y,v,p){if(m===void 0)throw new Error(x.UNDEFINED_INJECT_ANNOTATION(y.name));var g=new k.Metadata(z.INJECT_TAG,m);typeof p=="number"?E.tagParameter(y,v,p,g):E.tagProperty(y,v,g)}}S.inject=I},52890:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.injectable=void 0;var x=M(40055),z=M(62220);function k(){return function(E){if(Reflect.hasOwnMetadata(z.PARAM_TYPES,E))throw new Error(x.DUPLICATED_INJECTABLE_DECORATOR);var N=Reflect.getMetadata(z.DESIGN_PARAM_TYPES,E)||[];return Reflect.defineMetadata(z.PARAM_TYPES,N,E),E}}S.injectable=k},34341:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.multiInject=void 0;var x=M(62220),z=M(37397),k=M(26459);function E(N){return function(I,m,y){var v=new z.Metadata(x.MULTI_INJECT_TAG,N);typeof y=="number"?k.tagParameter(I,m,y,v):k.tagProperty(I,m,v)}}S.multiInject=E},95650:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.named=void 0;var x=M(62220),z=M(37397),k=M(26459);function E(N){return function(I,m,y){var v=new z.Metadata(x.NAMED_TAG,N);typeof y=="number"?k.tagParameter(I,m,y,v):k.tagProperty(I,m,v)}}S.named=E},85635:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.optional=void 0;var x=M(62220),z=M(37397),k=M(26459);function E(){return function(N,I,m){var y=new z.Metadata(x.OPTIONAL_TAG,!0);typeof m=="number"?k.tagParameter(N,I,m,y):k.tagProperty(N,I,y)}}S.optional=E},62568:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.postConstruct=void 0;var x=M(40055),z=M(62220),k=M(37397);function E(){return function(N,I,m){var y=new k.Metadata(z.POST_CONSTRUCT,I);if(Reflect.hasOwnMetadata(z.POST_CONSTRUCT,N.constructor))throw new Error(x.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(z.POST_CONSTRUCT,y,N.constructor)}}S.postConstruct=E},37678:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.tagged=void 0;var x=M(37397),z=M(26459);function k(E,N){return function(I,m,y){var v=new x.Metadata(E,N);typeof y=="number"?z.tagParameter(I,m,y,v):z.tagProperty(I,m,v)}}S.tagged=k},51238:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.targetName=void 0;var x=M(62220),z=M(37397),k=M(26459);function E(N){return function(I,m,y){var v=new z.Metadata(x.NAME_TAG,N);k.tagParameter(I,m,y,v)}}S.targetName=E},6022:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.unmanaged=void 0;var x=M(62220),z=M(37397),k=M(26459);function E(){return function(N,I,m){var y=new z.Metadata(x.UNMANAGED_TAG,!0);k.tagParameter(N,I,m,y)}}S.unmanaged=E},25241:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Binding=void 0;var x=M(84624),z=M(54906),k=function(){function E(N,I){this.id=z.id(),this.activated=!1,this.serviceIdentifier=N,this.scope=I,this.type=x.BindingTypeEnum.Invalid,this.constraint=function(m){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return E.prototype.clone=function(){var N=new E(this.serviceIdentifier,this.scope);return N.activated=N.scope===x.BindingScopeEnum.Singleton?this.activated:!1,N.implementationType=this.implementationType,N.dynamicValue=this.dynamicValue,N.scope=this.scope,N.type=this.type,N.factory=this.factory,N.provider=this.provider,N.constraint=this.constraint,N.onActivation=this.onActivation,N.cache=this.cache,N},E}();S.Binding=k},74451:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingCount=void 0;var M={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};S.BindingCount=M},40055:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.STACK_OVERFLOW=S.CIRCULAR_DEPENDENCY_IN_FACTORY=S.POST_CONSTRUCT_ERROR=S.MULTIPLE_POST_CONSTRUCT_METHODS=S.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=S.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=S.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=S.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=S.ARGUMENTS_LENGTH_MISMATCH=S.INVALID_DECORATOR_OPERATION=S.INVALID_TO_SELF_VALUE=S.INVALID_FUNCTION_BINDING=S.INVALID_MIDDLEWARE_RETURN=S.NO_MORE_SNAPSHOTS_AVAILABLE=S.INVALID_BINDING_TYPE=S.NOT_IMPLEMENTED=S.CIRCULAR_DEPENDENCY=S.UNDEFINED_INJECT_ANNOTATION=S.MISSING_INJECT_ANNOTATION=S.MISSING_INJECTABLE_ANNOTATION=S.NOT_REGISTERED=S.CANNOT_UNBIND=S.AMBIGUOUS_MATCH=S.KEY_NOT_FOUND=S.NULL_ARGUMENT=S.DUPLICATED_METADATA=S.DUPLICATED_INJECTABLE_DECORATOR=void 0,S.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",S.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",S.NULL_ARGUMENT="NULL argument",S.KEY_NOT_FOUND="Key Not Found",S.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",S.CANNOT_UNBIND="Could not unbind serviceIdentifier:",S.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",S.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",S.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var M=function(E){return"@inject called with undefined this could mean that the class "+E+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};S.UNDEFINED_INJECT_ANNOTATION=M,S.CIRCULAR_DEPENDENCY="Circular dependency found:",S.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",S.INVALID_BINDING_TYPE="Invalid binding type:",S.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",S.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",S.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",S.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",S.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var x=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return"The number of constructor arguments in the derived class "+(E[0]+" must be >= than the number of constructor arguments of its base class.")};S.ARGUMENTS_LENGTH_MISMATCH=x,S.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",S.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",S.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",S.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",S.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var z=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return"@postConstruct error in class "+E[0]+": "+E[1]};S.POST_CONSTRUCT_ERROR=z;var k=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return"It looks like there is a circular dependency "+("in one of the '"+E[0]+"' bindings. Please investigate bindings with")+("service identifier '"+E[1]+"'.")};S.CIRCULAR_DEPENDENCY_IN_FACTORY=k,S.STACK_OVERFLOW="Maximum call stack size exceeded"},84624:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TargetTypeEnum=S.BindingTypeEnum=S.BindingScopeEnum=void 0;var M={Request:"Request",Singleton:"Singleton",Transient:"Transient"};S.BindingScopeEnum=M;var x={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};S.BindingTypeEnum=x;var z={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};S.TargetTypeEnum=z},62220:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.NON_CUSTOM_TAG_KEYS=S.POST_CONSTRUCT=S.DESIGN_PARAM_TYPES=S.PARAM_TYPES=S.TAGGED_PROP=S.TAGGED=S.MULTI_INJECT_TAG=S.INJECT_TAG=S.OPTIONAL_TAG=S.UNMANAGED_TAG=S.NAME_TAG=S.NAMED_TAG=void 0,S.NAMED_TAG="named",S.NAME_TAG="name",S.UNMANAGED_TAG="unmanaged",S.OPTIONAL_TAG="optional",S.INJECT_TAG="inject",S.MULTI_INJECT_TAG="multi_inject",S.TAGGED="inversify:tagged",S.TAGGED_PROP="inversify:tagged_props",S.PARAM_TYPES="inversify:paramtypes",S.DESIGN_PARAM_TYPES="design:paramtypes",S.POST_CONSTRUCT="post_construct";function M(){return[S.INJECT_TAG,S.MULTI_INJECT_TAG,S.NAME_TAG,S.UNMANAGED_TAG,S.NAMED_TAG,S.OPTIONAL_TAG]}S.NON_CUSTOM_TAG_KEYS=M()},59819:function(le,S,M){"use strict";var x=this&&this.__awaiter||function(l,K,Z,X){function W(U){return U instanceof Z?U:new Z(function(et){et(U)})}return new(Z||(Z=Promise))(function(U,et){function it(mt){try{rt(X.next(mt))}catch(pt){et(pt)}}function J(mt){try{rt(X.throw(mt))}catch(pt){et(pt)}}function rt(mt){mt.done?U(mt.value):W(mt.value).then(it,J)}rt((X=X.apply(l,K||[])).next())})},z=this&&this.__generator||function(l,K){var Z={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},X,W,U,et;return et={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function it(rt){return function(mt){return J([rt,mt])}}function J(rt){if(X)throw new TypeError("Generator is already executing.");for(;Z;)try{if(X=1,W&&(U=rt[0]&2?W.return:rt[0]?W.throw||((U=W.return)&&U.call(W),0):W.next)&&!(U=U.call(W,rt[1])).done)return U;switch(W=0,U&&(rt=[rt[0]&2,U.value]),rt[0]){case 0:case 1:U=rt;break;case 4:return Z.label++,{value:rt[1],done:!1};case 5:Z.label++,W=rt[1],rt=[0];continue;case 7:rt=Z.ops.pop(),Z.trys.pop();continue;default:if(U=Z.trys,!(U=U.length>0&&U[U.length-1])&&(rt[0]===6||rt[0]===2)){Z=0;continue}if(rt[0]===3&&(!U||rt[1]>U[0]&&rt[1]<U[3])){Z.label=rt[1];break}if(rt[0]===6&&Z.label<U[1]){Z.label=U[1],U=rt;break}if(U&&Z.label<U[2]){Z.label=U[2],Z.ops.push(rt);break}U[2]&&Z.ops.pop(),Z.trys.pop();continue}rt=K.call(l,Z)}catch(mt){rt=[6,mt],W=0}finally{X=U=0}if(rt[0]&5)throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}},k=this&&this.__spreadArray||function(l,K){for(var Z=0,X=K.length,W=l.length;Z<X;Z++,W++)l[W]=K[Z];return l};Object.defineProperty(S,"__esModule",{value:!0}),S.Container=void 0;var E=M(25241),N=M(40055),I=M(84624),m=M(62220),y=M(51188),v=M(48296),p=M(93337),g=M(50832),T=M(54906),w=M(88229),C=M(22968),O=M(60513),b=function(){function l(K){this._appliedMiddleware=[];var Z=K||{};if(typeof Z!="object")throw new Error(""+N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Z.defaultScope===void 0)Z.defaultScope=I.BindingScopeEnum.Transient;else if(Z.defaultScope!==I.BindingScopeEnum.Singleton&&Z.defaultScope!==I.BindingScopeEnum.Transient&&Z.defaultScope!==I.BindingScopeEnum.Request)throw new Error(""+N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Z.autoBindInjectable===void 0)Z.autoBindInjectable=!1;else if(typeof Z.autoBindInjectable!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Z.skipBaseClassChecks===void 0)Z.skipBaseClassChecks=!1;else if(typeof Z.skipBaseClassChecks!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Z.autoBindInjectable,defaultScope:Z.defaultScope,skipBaseClassChecks:Z.skipBaseClassChecks},this.id=T.id(),this._bindingDictionary=new O.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new y.MetadataReader}return l.merge=function(K,Z){for(var X=[],W=2;W<arguments.length;W++)X[W-2]=arguments[W];var U=new l,et=k([K,Z],X).map(function(rt){return v.getBindingDictionary(rt)}),it=v.getBindingDictionary(U);function J(rt,mt){rt.traverse(function(pt,ft){ft.forEach(function(Mt){mt.add(Mt.serviceIdentifier,Mt.clone())})})}return et.forEach(function(rt){J(rt,it)}),U},l.prototype.load=function(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];for(var X=this._getContainerModuleHelpersFactory(),W=0,U=K;W<U.length;W++){var et=U[W],it=X(et.id);et.registry(it.bindFunction,it.unbindFunction,it.isboundFunction,it.rebindFunction)}},l.prototype.loadAsync=function(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];return x(this,void 0,void 0,function(){var X,W,U,et,it;return z(this,function(J){switch(J.label){case 0:X=this._getContainerModuleHelpersFactory(),W=0,U=K,J.label=1;case 1:return W<U.length?(et=U[W],it=X(et.id),[4,et.registry(it.bindFunction,it.unbindFunction,it.isboundFunction,it.rebindFunction)]):[3,4];case 2:J.sent(),J.label=3;case 3:return W++,[3,1];case 4:return[2]}})})},l.prototype.unload=function(){for(var K=this,Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var W=function(U){return function(et){return et.moduleId===U}};Z.forEach(function(U){var et=W(U.id);K._bindingDictionary.removeByCondition(et)})},l.prototype.bind=function(K){var Z=this.options.defaultScope||I.BindingScopeEnum.Transient,X=new E.Binding(K,Z);return this._bindingDictionary.add(K,X),new g.BindingToSyntax(X)},l.prototype.rebind=function(K){return this.unbind(K),this.bind(K)},l.prototype.unbind=function(K){try{this._bindingDictionary.remove(K)}catch(Z){throw new Error(N.CANNOT_UNBIND+" "+w.getServiceIdentifierAsString(K))}},l.prototype.unbindAll=function(){this._bindingDictionary=new O.Lookup},l.prototype.isBound=function(K){var Z=this._bindingDictionary.hasKey(K);return!Z&&this.parent&&(Z=this.parent.isBound(K)),Z},l.prototype.isBoundNamed=function(K,Z){return this.isBoundTagged(K,m.NAMED_TAG,Z)},l.prototype.isBoundTagged=function(K,Z,X){var W=!1;if(this._bindingDictionary.hasKey(K)){var U=this._bindingDictionary.get(K),et=v.createMockRequest(this,K,Z,X);W=U.some(function(it){return it.constraint(et)})}return!W&&this.parent&&(W=this.parent.isBoundTagged(K,Z,X)),W},l.prototype.snapshot=function(){this._snapshots.push(C.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},l.prototype.restore=function(){var K=this._snapshots.pop();if(K===void 0)throw new Error(N.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=K.bindings,this._middleware=K.middleware},l.prototype.createChild=function(K){var Z=new l(K||this.options);return Z.parent=this,Z},l.prototype.applyMiddleware=function(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];this._appliedMiddleware=this._appliedMiddleware.concat(K);var X=this._middleware?this._middleware:this._planAndResolve();this._middleware=K.reduce(function(W,U){return U(W)},X)},l.prototype.applyCustomMetadataReader=function(K){this._metadataReader=K},l.prototype.get=function(K){return this._get(!1,!1,I.TargetTypeEnum.Variable,K)},l.prototype.getTagged=function(K,Z,X){return this._get(!1,!1,I.TargetTypeEnum.Variable,K,Z,X)},l.prototype.getNamed=function(K,Z){return this.getTagged(K,m.NAMED_TAG,Z)},l.prototype.getAll=function(K){return this._get(!0,!0,I.TargetTypeEnum.Variable,K)},l.prototype.getAllTagged=function(K,Z,X){return this._get(!1,!0,I.TargetTypeEnum.Variable,K,Z,X)},l.prototype.getAllNamed=function(K,Z){return this.getAllTagged(K,m.NAMED_TAG,Z)},l.prototype.resolve=function(K){var Z=this.createChild();return Z.bind(K).toSelf(),this._appliedMiddleware.forEach(function(X){Z.applyMiddleware(X)}),Z.get(K)},l.prototype._getContainerModuleHelpersFactory=function(){var K=this,Z=function(it,J){it._binding.moduleId=J},X=function(it){return function(J){var rt=K.bind.bind(K),mt=rt(J);return Z(mt,it),mt}},W=function(it){return function(J){var rt=K.unbind.bind(K);rt(J)}},U=function(it){return function(J){var rt=K.isBound.bind(K);return rt(J)}},et=function(it){return function(J){var rt=K.rebind.bind(K),mt=rt(J);return Z(mt,it),mt}};return function(it){return{bindFunction:X(it),isboundFunction:U(it),rebindFunction:et(it),unbindFunction:W(it)}}},l.prototype._get=function(K,Z,X,W,U,et){var it=null,J={avoidConstraints:K,contextInterceptor:function(rt){return rt},isMultiInject:Z,key:U,serviceIdentifier:W,targetType:X,value:et};if(this._middleware){if(it=this._middleware(J),it==null)throw new Error(N.INVALID_MIDDLEWARE_RETURN)}else it=this._planAndResolve()(J);return it},l.prototype._planAndResolve=function(){var K=this;return function(Z){var X=v.plan(K._metadataReader,K,Z.isMultiInject,Z.targetType,Z.serviceIdentifier,Z.key,Z.value,Z.avoidConstraints);X=Z.contextInterceptor(X);var W=p.resolve(X);return W}},l}();S.Container=b},51637:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.AsyncContainerModule=S.ContainerModule=void 0;var x=M(54906),z=function(){function E(N){this.id=x.id(),this.registry=N}return E}();S.ContainerModule=z;var k=function(){function E(N){this.id=x.id(),this.registry=N}return E}();S.AsyncContainerModule=k},22968:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ContainerSnapshot=void 0;var M=function(){function x(){}return x.of=function(z,k){var E=new x;return E.bindings=z,E.middleware=k,E},x}();S.ContainerSnapshot=M},60513:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Lookup=void 0;var x=M(40055),z=function(){function k(){this._map=new Map}return k.prototype.getMap=function(){return this._map},k.prototype.add=function(E,N){if(E==null)throw new Error(x.NULL_ARGUMENT);if(N==null)throw new Error(x.NULL_ARGUMENT);var I=this._map.get(E);I!==void 0?(I.push(N),this._map.set(E,I)):this._map.set(E,[N])},k.prototype.get=function(E){if(E==null)throw new Error(x.NULL_ARGUMENT);var N=this._map.get(E);if(N!==void 0)return N;throw new Error(x.KEY_NOT_FOUND)},k.prototype.remove=function(E){if(E==null)throw new Error(x.NULL_ARGUMENT);if(!this._map.delete(E))throw new Error(x.KEY_NOT_FOUND)},k.prototype.removeByCondition=function(E){var N=this;this._map.forEach(function(I,m){var y=I.filter(function(v){return!E(v)});y.length>0?N._map.set(m,y):N._map.delete(m)})},k.prototype.hasKey=function(E){if(E==null)throw new Error(x.NULL_ARGUMENT);return this._map.has(E)},k.prototype.clone=function(){var E=new k;return this._map.forEach(function(N,I){N.forEach(function(m){return E.add(I,m.clone())})}),E},k.prototype.traverse=function(E){this._map.forEach(function(N,I){E(I,N)})},k}();S.Lookup=z},45540:function(le,S,M){"use strict";var x;x={value:!0},x=x=x=x=x=x=x=x=x=x=x=x=x=x=x=S.f3=S.t6=x=S.b2=x=x=x=x=x=S.W2=x=void 0;var z=M(62220);x=z;var k=M(59819);Object.defineProperty(S,"W2",{enumerable:!0,get:function(){return k.Container}});var E=M(84624);x={enumerable:!0,get:function(){return E.BindingScopeEnum}},x={enumerable:!0,get:function(){return E.BindingTypeEnum}},x={enumerable:!0,get:function(){return E.TargetTypeEnum}};var N=M(51637);x={enumerable:!0,get:function(){return N.AsyncContainerModule}},x={enumerable:!0,get:function(){return N.ContainerModule}};var I=M(52890);Object.defineProperty(S,"b2",{enumerable:!0,get:function(){return I.injectable}});var m=M(37678);x={enumerable:!0,get:function(){return m.tagged}};var y=M(95650);Object.defineProperty(S,"t6",{enumerable:!0,get:function(){return y.named}});var v=M(13012);Object.defineProperty(S,"f3",{enumerable:!0,get:function(){return v.inject}}),x={enumerable:!0,get:function(){return v.LazyServiceIdentifer}};var p=M(85635);x={enumerable:!0,get:function(){return p.optional}};var g=M(6022);x={enumerable:!0,get:function(){return g.unmanaged}};var T=M(34341);x={enumerable:!0,get:function(){return T.multiInject}};var w=M(51238);x={enumerable:!0,get:function(){return w.targetName}};var C=M(62568);x={enumerable:!0,get:function(){return C.postConstruct}};var O=M(51188);x={enumerable:!0,get:function(){return O.MetadataReader}};var b=M(54906);x={enumerable:!0,get:function(){return b.id}};var l=M(26459);x={enumerable:!0,get:function(){return l.decorate}};var K=M(4106);x={enumerable:!0,get:function(){return K.traverseAncerstors}},x={enumerable:!0,get:function(){return K.taggedConstraint}},x={enumerable:!0,get:function(){return K.namedConstraint}},x={enumerable:!0,get:function(){return K.typeConstraint}};var Z=M(88229);x={enumerable:!0,get:function(){return Z.getServiceIdentifierAsString}};var X=M(65049);x={enumerable:!0,get:function(){return X.multiBindToService}}},20508:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Context=void 0;var x=M(54906),z=function(){function k(E){this.id=x.id(),this.container=E}return k.prototype.addPlan=function(E){this.plan=E},k.prototype.setCurrentRequest=function(E){this.currentRequest=E},k}();S.Context=z},37397:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Metadata=void 0;var x=M(62220),z=function(){function k(E,N){this.key=E,this.value=N}return k.prototype.toString=function(){return this.key===x.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},k}();S.Metadata=z},51188:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MetadataReader=void 0;var x=M(62220),z=function(){function k(){}return k.prototype.getConstructorMetadata=function(E){var N=Reflect.getMetadata(x.PARAM_TYPES,E),I=Reflect.getMetadata(x.TAGGED,E);return{compilerGeneratedMetadata:N,userGeneratedMetadata:I||{}}},k.prototype.getPropertiesMetadata=function(E){var N=Reflect.getMetadata(x.TAGGED_PROP,E)||[];return N},k}();S.MetadataReader=z},80955:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Plan=void 0;var M=function(){function x(z,k){this.parentContext=z,this.rootRequest=k}return x}();S.Plan=M},48296:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getBindingDictionary=S.createMockRequest=S.plan=void 0;var x=M(74451),z=M(40055),k=M(84624),E=M(62220),N=M(16555),I=M(88229),m=M(20508),y=M(37397),v=M(80955),p=M(34819),g=M(21047),T=M(89544);function w(W){return W._bindingDictionary}S.getBindingDictionary=w;function C(W,U,et,it,J,rt){var mt=W?E.MULTI_INJECT_TAG:E.INJECT_TAG,pt=new y.Metadata(mt,et),ft=new T.Target(U,it,et,pt);if(J!==void 0){var Mt=new y.Metadata(J,rt);ft.metadata.push(Mt)}return ft}function O(W,U,et,it,J){var rt=K(et.container,J.serviceIdentifier),mt=[];return rt.length===x.BindingCount.NoBindingsAvailable&&et.container.options.autoBindInjectable&&typeof J.serviceIdentifier=="function"&&W.getConstructorMetadata(J.serviceIdentifier).compilerGeneratedMetadata&&(et.container.bind(J.serviceIdentifier).toSelf(),rt=K(et.container,J.serviceIdentifier)),U?mt=rt:mt=rt.filter(function(pt){var ft=new g.Request(pt.serviceIdentifier,et,it,pt,J);return pt.constraint(ft)}),b(J.serviceIdentifier,mt,J,et.container),mt}function b(W,U,et,it){switch(U.length){case x.BindingCount.NoBindingsAvailable:if(et.isOptional())return U;var J=I.getServiceIdentifierAsString(W),rt=z.NOT_REGISTERED;throw rt+=I.listMetadataForTarget(J,et),rt+=I.listRegisteredBindingsForServiceIdentifier(it,J,K),new Error(rt);case x.BindingCount.OnlyOneBindingAvailable:if(!et.isArray())return U;case x.BindingCount.MultipleBindingsAvailable:default:if(et.isArray())return U;var J=I.getServiceIdentifierAsString(W),rt=z.AMBIGUOUS_MATCH+" "+J;throw rt+=I.listRegisteredBindingsForServiceIdentifier(it,J,K),new Error(rt)}}function l(W,U,et,it,J,rt){var mt,pt;if(J===null){mt=O(W,U,it,null,rt),pt=new g.Request(et,it,null,mt,rt);var ft=new v.Plan(it,pt);it.addPlan(ft)}else mt=O(W,U,it,J,rt),pt=J.addChildRequest(rt.serviceIdentifier,mt,rt);mt.forEach(function(Mt){var zt=null;if(rt.isArray())zt=pt.addChildRequest(Mt.serviceIdentifier,Mt,rt);else{if(Mt.cache)return;zt=pt}if(Mt.type===k.BindingTypeEnum.Instance&&Mt.implementationType!==null){var Vt=p.getDependencies(W,Mt.implementationType);if(!it.container.options.skipBaseClassChecks){var kt=p.getBaseClassDependencyCount(W,Mt.implementationType);if(Vt.length<kt){var st=z.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(Mt.implementationType));throw new Error(st)}}Vt.forEach(function(St){l(W,!1,St.serviceIdentifier,it,zt,St)})}})}function K(W,U){var et=[],it=w(W);return it.hasKey(U)?et=it.get(U):W.parent!==null&&(et=K(W.parent,U)),et}function Z(W,U,et,it,J,rt,mt,pt){pt===void 0&&(pt=!1);var ft=new m.Context(U),Mt=C(et,it,J,"",rt,mt);try{return l(W,pt,J,ft,null,Mt),ft}catch(zt){throw N.isStackOverflowExeption(zt)&&ft.plan&&I.circularDependencyToException(ft.plan.rootRequest),zt}}S.plan=Z;function X(W,U,et,it){var J=new T.Target(k.TargetTypeEnum.Variable,"",U,new y.Metadata(et,it)),rt=new m.Context(W),mt=new g.Request(U,rt,null,[],J);return mt}S.createMockRequest=X},99692:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.QueryableString=void 0;var M=function(){function x(z){this.str=z}return x.prototype.startsWith=function(z){return this.str.indexOf(z)===0},x.prototype.endsWith=function(z){var k="",E=z.split("").reverse().join("");return k=this.str.split("").reverse().join(""),this.startsWith.call({str:k},E)},x.prototype.contains=function(z){return this.str.indexOf(z)!==-1},x.prototype.equals=function(z){return this.str===z},x.prototype.value=function(){return this.str},x}();S.QueryableString=M},34819:function(le,S,M){"use strict";var x=this&&this.__spreadArray||function(O,b){for(var l=0,K=b.length,Z=O.length;l<K;l++,Z++)O[Z]=b[l];return O};Object.defineProperty(S,"__esModule",{value:!0}),S.getFunctionName=S.getBaseClassDependencyCount=S.getDependencies=void 0;var z=M(13012),k=M(40055),E=M(84624),N=M(62220),I=M(88229);Object.defineProperty(S,"getFunctionName",{enumerable:!0,get:function(){return I.getFunctionName}});var m=M(89544);function y(O,b){var l=I.getFunctionName(b),K=v(O,l,b,!1);return K}S.getDependencies=y;function v(O,b,l,K){var Z=O.getConstructorMetadata(l),X=Z.compilerGeneratedMetadata;if(X===void 0){var W=k.MISSING_INJECTABLE_ANNOTATION+" "+b+".";throw new Error(W)}var U=Z.userGeneratedMetadata,et=Object.keys(U),it=l.length===0&&et.length>0,J=et.length>l.length,rt=it||J?et.length:l.length,mt=g(K,b,X,U,rt),pt=T(O,l),ft=x(x([],mt),pt);return ft}function p(O,b,l,K,Z){var X=Z[O.toString()]||[],W=C(X),U=W.unmanaged!==!0,et=K[O],it=W.inject||W.multiInject;if(et=it||et,et instanceof z.LazyServiceIdentifer&&(et=et.unwrap()),U){var J=et===Object,rt=et===Function,mt=et===void 0,pt=J||rt||mt;if(!b&&pt){var ft=k.MISSING_INJECT_ANNOTATION+" argument "+O+" in class "+l+".";throw new Error(ft)}var Mt=new m.Target(E.TargetTypeEnum.ConstructorArgument,W.targetName,et);return Mt.metadata=X,Mt}return null}function g(O,b,l,K,Z){for(var X=[],W=0;W<Z;W++){var U=W,et=p(U,O,b,l,K);et!==null&&X.push(et)}return X}function T(O,b){for(var l=O.getPropertiesMetadata(b),K=[],Z=Object.keys(l),X=0,W=Z;X<W.length;X++){var U=W[X],et=l[U],it=C(l[U]),J=it.targetName||U,rt=it.inject||it.multiInject,mt=new m.Target(E.TargetTypeEnum.ClassProperty,J,rt);mt.metadata=et,K.push(mt)}var pt=Object.getPrototypeOf(b.prototype).constructor;if(pt!==Object){var ft=T(O,pt);K=x(x([],K),ft)}return K}function w(O,b){var l=Object.getPrototypeOf(b.prototype).constructor;if(l!==Object){var K=I.getFunctionName(l),Z=v(O,K,l,!0),X=Z.map(function(et){return et.metadata.filter(function(it){return it.key===N.UNMANAGED_TAG})}),W=[].concat.apply([],X).length,U=Z.length-W;return U>0?U:w(O,l)}else return 0}S.getBaseClassDependencyCount=w;function C(O){var b={};return O.forEach(function(l){b[l.key.toString()]=l.value}),{inject:b[N.INJECT_TAG],multiInject:b[N.MULTI_INJECT_TAG],targetName:b[N.NAME_TAG],unmanaged:b[N.UNMANAGED_TAG]}}},21047:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Request=void 0;var x=M(54906),z=function(){function k(E,N,I,m,y){this.id=x.id(),this.serviceIdentifier=E,this.parentContext=N,this.parentRequest=I,this.target=y,this.childRequests=[],this.bindings=Array.isArray(m)?m:[m],this.requestScope=I===null?new Map:null}return k.prototype.addChildRequest=function(E,N,I){var m=new k(E,this.parentContext,this,N,I);return this.childRequests.push(m),m},k}();S.Request=z},89544:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Target=void 0;var x=M(62220),z=M(54906),k=M(37397),E=M(99692),N=function(){function I(m,y,v,p){this.id=z.id(),this.type=m,this.serviceIdentifier=v,this.name=new E.QueryableString(y||""),this.metadata=new Array;var g=null;typeof p=="string"?g=new k.Metadata(x.NAMED_TAG,p):p instanceof k.Metadata&&(g=p),g!==null&&this.metadata.push(g)}return I.prototype.hasTag=function(m){for(var y=0,v=this.metadata;y<v.length;y++){var p=v[y];if(p.key===m)return!0}return!1},I.prototype.isArray=function(){return this.hasTag(x.MULTI_INJECT_TAG)},I.prototype.matchesArray=function(m){return this.matchesTag(x.MULTI_INJECT_TAG)(m)},I.prototype.isNamed=function(){return this.hasTag(x.NAMED_TAG)},I.prototype.isTagged=function(){return this.metadata.some(function(m){return x.NON_CUSTOM_TAG_KEYS.every(function(y){return m.key!==y})})},I.prototype.isOptional=function(){return this.matchesTag(x.OPTIONAL_TAG)(!0)},I.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(m){return m.key===x.NAMED_TAG})[0]:null},I.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(m){return x.NON_CUSTOM_TAG_KEYS.every(function(y){return m.key!==y})}):null},I.prototype.matchesNamedTag=function(m){return this.matchesTag(x.NAMED_TAG)(m)},I.prototype.matchesTag=function(m){var y=this;return function(v){for(var p=0,g=y.metadata;p<g.length;p++){var T=g[p];if(T.key===m&&T.value===v)return!0}return!1}},I}();S.Target=N},36913:function(le,S,M){"use strict";var x=this&&this.__spreadArray||function(v,p){for(var g=0,T=p.length,w=v.length;g<T;g++,w++)v[w]=p[g];return v};Object.defineProperty(S,"__esModule",{value:!0}),S.resolveInstance=void 0;var z=M(40055),k=M(84624),E=M(62220);function N(v,p,g){var T=p.filter(function(C){return C.target!==null&&C.target.type===k.TargetTypeEnum.ClassProperty}),w=T.map(g);return T.forEach(function(C,O){var b="";b=C.target.name.value();var l=w[O];v[b]=l}),v}function I(v,p){return new(v.bind.apply(v,x([void 0],p)))}function m(v,p){if(Reflect.hasMetadata(E.POST_CONSTRUCT,v)){var g=Reflect.getMetadata(E.POST_CONSTRUCT,v);try{p[g.value]()}catch(T){throw new Error(z.POST_CONSTRUCT_ERROR(v.name,T.message))}}}function y(v,p,g){var T=null;if(p.length>0){var w=p.filter(function(O){return O.target!==null&&O.target.type===k.TargetTypeEnum.ConstructorArgument}),C=w.map(g);T=I(v,C),T=N(T,p,g)}else T=new v;return m(v,T),T}S.resolveInstance=y},93337:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.resolve=void 0;var x=M(40055),z=M(84624),k=M(16555),E=M(88229),N=M(36913),I=function(v,p,g){try{return g()}catch(T){throw k.isStackOverflowExeption(T)?new Error(x.CIRCULAR_DEPENDENCY_IN_FACTORY(v,p.toString())):T}},m=function(v){return function(p){p.parentContext.setCurrentRequest(p);var g=p.bindings,T=p.childRequests,w=p.target&&p.target.isArray(),C=!p.parentRequest||!p.parentRequest.target||!p.target||!p.parentRequest.target.matchesArray(p.target.serviceIdentifier);if(w&&C)return T.map(function(X){var W=m(v);return W(X)});var O=null;if(p.target.isOptional()&&g.length===0)return;var b=g[0],l=b.scope===z.BindingScopeEnum.Singleton,K=b.scope===z.BindingScopeEnum.Request;if(l&&b.activated)return b.cache;if(K&&v!==null&&v.has(b.id))return v.get(b.id);if(b.type===z.BindingTypeEnum.ConstantValue)O=b.cache,b.activated=!0;else if(b.type===z.BindingTypeEnum.Function)O=b.cache,b.activated=!0;else if(b.type===z.BindingTypeEnum.Constructor)O=b.implementationType;else if(b.type===z.BindingTypeEnum.DynamicValue&&b.dynamicValue!==null)O=I("toDynamicValue",b.serviceIdentifier,function(){return b.dynamicValue(p.parentContext)});else if(b.type===z.BindingTypeEnum.Factory&&b.factory!==null)O=I("toFactory",b.serviceIdentifier,function(){return b.factory(p.parentContext)});else if(b.type===z.BindingTypeEnum.Provider&&b.provider!==null)O=I("toProvider",b.serviceIdentifier,function(){return b.provider(p.parentContext)});else if(b.type===z.BindingTypeEnum.Instance&&b.implementationType!==null)O=N.resolveInstance(b.implementationType,T,m(v));else{var Z=E.getServiceIdentifierAsString(p.serviceIdentifier);throw new Error(x.INVALID_BINDING_TYPE+" "+Z)}return typeof b.onActivation=="function"&&(O=b.onActivation(p.parentContext,O)),l&&(b.cache=O,b.activated=!0),K&&v!==null&&!v.has(b.id)&&v.set(b.id,O),O}};function y(v){var p=m(v.plan.rootRequest.requestScope);return p(v.plan.rootRequest)}S.resolve=y},45980:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingInSyntax=void 0;var x=M(84624),z=M(29215),k=function(){function E(N){this._binding=N}return E.prototype.inRequestScope=function(){return this._binding.scope=x.BindingScopeEnum.Request,new z.BindingWhenOnSyntax(this._binding)},E.prototype.inSingletonScope=function(){return this._binding.scope=x.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},E.prototype.inTransientScope=function(){return this._binding.scope=x.BindingScopeEnum.Transient,new z.BindingWhenOnSyntax(this._binding)},E}();S.BindingInSyntax=k},24847:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingInWhenOnSyntax=void 0;var x=M(45980),z=M(50783),k=M(34647),E=function(){function N(I){this._binding=I,this._bindingWhenSyntax=new k.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new z.BindingOnSyntax(this._binding),this._bindingInSyntax=new x.BindingInSyntax(I)}return N.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},N.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},N.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},N.prototype.when=function(I){return this._bindingWhenSyntax.when(I)},N.prototype.whenTargetNamed=function(I){return this._bindingWhenSyntax.whenTargetNamed(I)},N.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},N.prototype.whenTargetTagged=function(I,m){return this._bindingWhenSyntax.whenTargetTagged(I,m)},N.prototype.whenInjectedInto=function(I){return this._bindingWhenSyntax.whenInjectedInto(I)},N.prototype.whenParentNamed=function(I){return this._bindingWhenSyntax.whenParentNamed(I)},N.prototype.whenParentTagged=function(I,m){return this._bindingWhenSyntax.whenParentTagged(I,m)},N.prototype.whenAnyAncestorIs=function(I){return this._bindingWhenSyntax.whenAnyAncestorIs(I)},N.prototype.whenNoAncestorIs=function(I){return this._bindingWhenSyntax.whenNoAncestorIs(I)},N.prototype.whenAnyAncestorNamed=function(I){return this._bindingWhenSyntax.whenAnyAncestorNamed(I)},N.prototype.whenAnyAncestorTagged=function(I,m){return this._bindingWhenSyntax.whenAnyAncestorTagged(I,m)},N.prototype.whenNoAncestorNamed=function(I){return this._bindingWhenSyntax.whenNoAncestorNamed(I)},N.prototype.whenNoAncestorTagged=function(I,m){return this._bindingWhenSyntax.whenNoAncestorTagged(I,m)},N.prototype.whenAnyAncestorMatches=function(I){return this._bindingWhenSyntax.whenAnyAncestorMatches(I)},N.prototype.whenNoAncestorMatches=function(I){return this._bindingWhenSyntax.whenNoAncestorMatches(I)},N.prototype.onActivation=function(I){return this._bindingOnSyntax.onActivation(I)},N}();S.BindingInWhenOnSyntax=E},50783:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingOnSyntax=void 0;var x=M(34647),z=function(){function k(E){this._binding=E}return k.prototype.onActivation=function(E){return this._binding.onActivation=E,new x.BindingWhenSyntax(this._binding)},k}();S.BindingOnSyntax=z},50832:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingToSyntax=void 0;var x=M(40055),z=M(84624),k=M(24847),E=M(29215),N=function(){function I(m){this._binding=m}return I.prototype.to=function(m){return this._binding.type=z.BindingTypeEnum.Instance,this._binding.implementationType=m,new k.BindingInWhenOnSyntax(this._binding)},I.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+x.INVALID_TO_SELF_VALUE);var m=this._binding.serviceIdentifier;return this.to(m)},I.prototype.toConstantValue=function(m){return this._binding.type=z.BindingTypeEnum.ConstantValue,this._binding.cache=m,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},I.prototype.toDynamicValue=function(m){return this._binding.type=z.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=m,this._binding.implementationType=null,new k.BindingInWhenOnSyntax(this._binding)},I.prototype.toConstructor=function(m){return this._binding.type=z.BindingTypeEnum.Constructor,this._binding.implementationType=m,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},I.prototype.toFactory=function(m){return this._binding.type=z.BindingTypeEnum.Factory,this._binding.factory=m,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},I.prototype.toFunction=function(m){if(typeof m!="function")throw new Error(x.INVALID_FUNCTION_BINDING);var y=this.toConstantValue(m);return this._binding.type=z.BindingTypeEnum.Function,this._binding.scope=z.BindingScopeEnum.Singleton,y},I.prototype.toAutoFactory=function(m){return this._binding.type=z.BindingTypeEnum.Factory,this._binding.factory=function(y){var v=function(){return y.container.get(m)};return v},this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},I.prototype.toProvider=function(m){return this._binding.type=z.BindingTypeEnum.Provider,this._binding.provider=m,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},I.prototype.toService=function(m){this.toDynamicValue(function(y){return y.container.get(m)})},I}();S.BindingToSyntax=N},29215:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingWhenOnSyntax=void 0;var x=M(50783),z=M(34647),k=function(){function E(N){this._binding=N,this._bindingWhenSyntax=new z.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new x.BindingOnSyntax(this._binding)}return E.prototype.when=function(N){return this._bindingWhenSyntax.when(N)},E.prototype.whenTargetNamed=function(N){return this._bindingWhenSyntax.whenTargetNamed(N)},E.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},E.prototype.whenTargetTagged=function(N,I){return this._bindingWhenSyntax.whenTargetTagged(N,I)},E.prototype.whenInjectedInto=function(N){return this._bindingWhenSyntax.whenInjectedInto(N)},E.prototype.whenParentNamed=function(N){return this._bindingWhenSyntax.whenParentNamed(N)},E.prototype.whenParentTagged=function(N,I){return this._bindingWhenSyntax.whenParentTagged(N,I)},E.prototype.whenAnyAncestorIs=function(N){return this._bindingWhenSyntax.whenAnyAncestorIs(N)},E.prototype.whenNoAncestorIs=function(N){return this._bindingWhenSyntax.whenNoAncestorIs(N)},E.prototype.whenAnyAncestorNamed=function(N){return this._bindingWhenSyntax.whenAnyAncestorNamed(N)},E.prototype.whenAnyAncestorTagged=function(N,I){return this._bindingWhenSyntax.whenAnyAncestorTagged(N,I)},E.prototype.whenNoAncestorNamed=function(N){return this._bindingWhenSyntax.whenNoAncestorNamed(N)},E.prototype.whenNoAncestorTagged=function(N,I){return this._bindingWhenSyntax.whenNoAncestorTagged(N,I)},E.prototype.whenAnyAncestorMatches=function(N){return this._bindingWhenSyntax.whenAnyAncestorMatches(N)},E.prototype.whenNoAncestorMatches=function(N){return this._bindingWhenSyntax.whenNoAncestorMatches(N)},E.prototype.onActivation=function(N){return this._bindingOnSyntax.onActivation(N)},E}();S.BindingWhenOnSyntax=k},34647:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.BindingWhenSyntax=void 0;var x=M(50783),z=M(4106),k=function(){function E(N){this._binding=N}return E.prototype.when=function(N){return this._binding.constraint=N,new x.BindingOnSyntax(this._binding)},E.prototype.whenTargetNamed=function(N){return this._binding.constraint=z.namedConstraint(N),new x.BindingOnSyntax(this._binding)},E.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(N){var I=N.target!==null&&!N.target.isNamed()&&!N.target.isTagged();return I},new x.BindingOnSyntax(this._binding)},E.prototype.whenTargetTagged=function(N,I){return this._binding.constraint=z.taggedConstraint(N)(I),new x.BindingOnSyntax(this._binding)},E.prototype.whenInjectedInto=function(N){return this._binding.constraint=function(I){return z.typeConstraint(N)(I.parentRequest)},new x.BindingOnSyntax(this._binding)},E.prototype.whenParentNamed=function(N){return this._binding.constraint=function(I){return z.namedConstraint(N)(I.parentRequest)},new x.BindingOnSyntax(this._binding)},E.prototype.whenParentTagged=function(N,I){return this._binding.constraint=function(m){return z.taggedConstraint(N)(I)(m.parentRequest)},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorIs=function(N){return this._binding.constraint=function(I){return z.traverseAncerstors(I,z.typeConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorIs=function(N){return this._binding.constraint=function(I){return!z.traverseAncerstors(I,z.typeConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorNamed=function(N){return this._binding.constraint=function(I){return z.traverseAncerstors(I,z.namedConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorNamed=function(N){return this._binding.constraint=function(I){return!z.traverseAncerstors(I,z.namedConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorTagged=function(N,I){return this._binding.constraint=function(m){return z.traverseAncerstors(m,z.taggedConstraint(N)(I))},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorTagged=function(N,I){return this._binding.constraint=function(m){return!z.traverseAncerstors(m,z.taggedConstraint(N)(I))},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorMatches=function(N){return this._binding.constraint=function(I){return z.traverseAncerstors(I,N)},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorMatches=function(N){return this._binding.constraint=function(I){return!z.traverseAncerstors(I,N)},new x.BindingOnSyntax(this._binding)},E}();S.BindingWhenSyntax=k},4106:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.typeConstraint=S.namedConstraint=S.taggedConstraint=S.traverseAncerstors=void 0;var x=M(62220),z=M(37397),k=function(m,y){var v=m.parentRequest;return v!==null?y(v)?!0:k(v,y):!1};S.traverseAncerstors=k;var E=function(m){return function(y){var v=function(p){return p!==null&&p.target!==null&&p.target.matchesTag(m)(y)};return v.metaData=new z.Metadata(m,y),v}};S.taggedConstraint=E;var N=E(x.NAMED_TAG);S.namedConstraint=N;var I=function(m){return function(y){var v=null;if(y!==null)if(v=y.bindings[0],typeof m=="string"){var p=v.serviceIdentifier;return p===m}else{var g=y.bindings[0].implementationType;return m===g}return!1}};S.typeConstraint=I},65049:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.multiBindToService=void 0;var M=function(x){return function(z){return function(){for(var k=[],E=0;E<arguments.length;E++)k[E]=arguments[E];return k.forEach(function(N){return x.bind(N).toService(z)})}}};S.multiBindToService=M},16555:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isStackOverflowExeption=void 0;var x=M(40055);function z(k){return k instanceof RangeError||k.message===x.STACK_OVERFLOW}S.isStackOverflowExeption=z},54906:function(le,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.id=void 0;var M=0;function x(){return M++}S.id=x},88229:function(le,S,M){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.circularDependencyToException=S.listMetadataForTarget=S.listRegisteredBindingsForServiceIdentifier=S.getServiceIdentifierAsString=S.getFunctionName=void 0;var x=M(40055);function z(v){if(typeof v=="function"){var p=v;return p.name}else{if(typeof v=="symbol")return v.toString();var p=v;return p}}S.getServiceIdentifierAsString=z;function k(v,p,g){var T="",w=g(v,p);return w.length!==0&&(T=`
Registered bindings:`,w.forEach(function(C){var O="Object";C.implementationType!==null&&(O=y(C.implementationType)),T=T+`
 `+O,C.constraint.metaData&&(T=T+" - "+C.constraint.metaData)})),T}S.listRegisteredBindingsForServiceIdentifier=k;function E(v,p){return v.parentRequest===null?!1:v.parentRequest.serviceIdentifier===p?!0:E(v.parentRequest,p)}function N(v){function p(T,w){w===void 0&&(w=[]);var C=z(T.serviceIdentifier);return w.push(C),T.parentRequest!==null?p(T.parentRequest,w):w}var g=p(v);return g.reverse().join(" --> ")}function I(v){v.childRequests.forEach(function(p){if(E(p,p.serviceIdentifier)){var g=N(p);throw new Error(x.CIRCULAR_DEPENDENCY+" "+g)}else I(p)})}S.circularDependencyToException=I;function m(v,p){if(p.isTagged()||p.isNamed()){var g="",T=p.getNamedTag(),w=p.getCustomTags();return T!==null&&(g+=T.toString()+`
`),w!==null&&w.forEach(function(C){g+=C.toString()+`
`})," "+v+`
 `+v+" - "+g}else return" "+v}S.listMetadataForTarget=m;function y(v){if(v.name)return v.name;var p=v.toString(),g=p.match(/^function\s*([^\s(]+)/);return g?g[1]:"Anonymous function: "+p}S.getFunctionName=y},89161:function(le){le.exports=function(M){return!M||typeof M=="string"?!1:M instanceof Array||Array.isArray(M)||M.length>=0&&(M.splice instanceof Function||Object.getOwnPropertyDescriptor(M,M.length-1)&&M.constructor.name!=="String")}},8639:function(le,S,M){var x=M(60330),z=M(19204),k=M(42105),E=M(41596),N=M(44927),I=[0,0];le.exports.x7=function(y,v,p,g,T){return x(y,p,g),k(y,y),z(v,-y[1],y[0]),z(I,-p[1],p[0]),T/N(v,I)},le.exports.mJ=function(y,v){return z(y,-v[1],v[0]),y},le.exports.o7=function(y,v,p){return E(y,v,p),k(y,y),y}},91010:function(le,S,M){var x=M(44675);var z;(function(k){(function(E){var N=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),I=m(k);typeof N.Reflect=="undefined"?N.Reflect=k:I=m(N.Reflect,I),E(I);function m(y,v){return function(p,g){typeof y[p]!="function"&&Object.defineProperty(y,p,{configurable:!0,writable:!0,value:g}),v&&v(p,g)}}})(function(E){var N=Object.prototype.hasOwnProperty,I=typeof Symbol=="function",m=I&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",y=I&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",v=typeof Object.create=="function",p={__proto__:[]}instanceof Array,g=!v&&!p,T={create:v?function(){return Ve(Object.create(null))}:p?function(){return Ve({__proto__:null})}:function(){return Ve({})},has:g?function(ce,Le){return N.call(ce,Le)}:function(ce,Le){return Le in ce},get:g?function(ce,Le){return N.call(ce,Le)?ce[Le]:void 0}:function(ce,Le){return ce[Le]}},w=Object.getPrototypeOf(Function),C=typeof x=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/__umi_ui/entry/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/__umi_ui/entry/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",O=!C&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ge(),b=!C&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Re(),l=!C&&typeof WeakMap=="function"?WeakMap:Je(),K=new l;function Z(ce,Le,je,Be){if(Te(je)){if(!Ee(ce))throw new TypeError;if(!bt(Le))throw new TypeError;return ft(ce,Le)}else{if(!Ee(ce))throw new TypeError;if(!Dt(Le))throw new TypeError;if(!Dt(Be)&&!Te(Be)&&!nr(Be))throw new TypeError;return nr(Be)&&(Be=void 0),je=Kt(je),Mt(ce,Le,je,Be)}}E("decorate",Z);function X(ce,Le){function je(Be,vr){if(!Dt(Be))throw new TypeError;if(!Te(vr)&&!wt(vr))throw new TypeError;qt(ce,Le,Be,vr)}return je}E("metadata",X);function W(ce,Le,je,Be){if(!Dt(je))throw new TypeError;return Te(Be)||(Be=Kt(Be)),qt(ce,Le,je,Be)}E("defineMetadata",W);function U(ce,Le,je){if(!Dt(Le))throw new TypeError;return Te(je)||(je=Kt(je)),Vt(ce,Le,je)}E("hasMetadata",U);function et(ce,Le,je){if(!Dt(Le))throw new TypeError;return Te(je)||(je=Kt(je)),kt(ce,Le,je)}E("hasOwnMetadata",et);function it(ce,Le,je){if(!Dt(Le))throw new TypeError;return Te(je)||(je=Kt(je)),st(ce,Le,je)}E("getMetadata",it);function J(ce,Le,je){if(!Dt(Le))throw new TypeError;return Te(je)||(je=Kt(je)),St(ce,Le,je)}E("getOwnMetadata",J);function rt(ce,Le){if(!Dt(ce))throw new TypeError;return Te(Le)||(Le=Kt(Le)),re(ce,Le)}E("getMetadataKeys",rt);function mt(ce,Le){if(!Dt(ce))throw new TypeError;return Te(Le)||(Le=Kt(Le)),Nt(ce,Le)}E("getOwnMetadataKeys",mt);function pt(ce,Le,je){if(!Dt(Le))throw new TypeError;Te(je)||(je=Kt(je));var Be=zt(Le,je,!1);if(Te(Be)||!Be.delete(ce))return!1;if(Be.size>0)return!0;var vr=K.get(Le);return vr.delete(je),vr.size>0||K.delete(Le),!0}E("deleteMetadata",pt);function ft(ce,Le){for(var je=ce.length-1;je>=0;--je){var Be=ce[je],vr=Be(Le);if(!Te(vr)&&!nr(vr)){if(!bt(vr))throw new TypeError;Le=vr}}return Le}function Mt(ce,Le,je,Be){for(var vr=ce.length-1;vr>=0;--vr){var or=ce[vr],Ae=or(Le,je,Be);if(!Te(Ae)&&!nr(Ae)){if(!Dt(Ae))throw new TypeError;Be=Ae}}return Be}function zt(ce,Le,je){var Be=K.get(ce);if(Te(Be)){if(!je)return;Be=new O,K.set(ce,Be)}var vr=Be.get(Le);if(Te(vr)){if(!je)return;vr=new O,Be.set(Le,vr)}return vr}function Vt(ce,Le,je){var Be=kt(ce,Le,je);if(Be)return!0;var vr=pe(Le);return nr(vr)?!1:Vt(ce,vr,je)}function kt(ce,Le,je){var Be=zt(Le,je,!1);return Te(Be)?!1:$t(Be.has(ce))}function st(ce,Le,je){var Be=kt(ce,Le,je);if(Be)return St(ce,Le,je);var vr=pe(Le);if(!nr(vr))return st(ce,vr,je)}function St(ce,Le,je){var Be=zt(Le,je,!1);if(!Te(Be))return Be.get(ce)}function qt(ce,Le,je,Be){var vr=zt(je,Be,!0);vr.set(ce,Le)}function re(ce,Le){var je=Nt(ce,Le),Be=pe(ce);if(Be===null)return je;var vr=re(Be,Le);if(vr.length<=0)return je;if(je.length<=0)return vr;for(var or=new b,Ae=[],yr=0,Cr=je;yr<Cr.length;yr++){var zr=Cr[yr],Mr=or.has(zr);Mr||(or.add(zr),Ae.push(zr))}for(var un=0,hn=vr;un<hn.length;un++){var zr=hn[un],Mr=or.has(zr);Mr||(or.add(zr),Ae.push(zr))}return Ae}function Nt(ce,Le){var je=[],Be=zt(ce,Le,!1);if(Te(Be))return je;for(var vr=Be.keys(),or=tt(vr),Ae=0;;){var yr=ct(or);if(!yr)return je.length=Ae,je;var Cr=Ot(yr);try{je[Ae]=Cr}catch(zr){try{ie(or)}finally{throw zr}}Ae++}}function be(ce){if(ce===null)return 1;switch(typeof ce){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ce===null?1:6;default:return 6}}function Te(ce){return ce===void 0}function nr(ce){return ce===null}function Rt(ce){return typeof ce=="symbol"}function Dt(ce){return typeof ce=="object"?ce!==null:typeof ce=="function"}function At(ce,Le){switch(be(ce)){case 0:return ce;case 1:return ce;case 2:return ce;case 3:return ce;case 4:return ce;case 5:return ce}var je=Le===3?"string":Le===5?"number":"default",Be=D(ce,m);if(Be!==void 0){var vr=Be.call(ce,je);if(Dt(vr))throw new TypeError;return vr}return Xt(ce,je==="default"?"number":je)}function Xt(ce,Le){if(Le==="string"){var je=ce.toString;if(vt(je)){var Be=je.call(ce);if(!Dt(Be))return Be}var vr=ce.valueOf;if(vt(vr)){var Be=vr.call(ce);if(!Dt(Be))return Be}}else{var vr=ce.valueOf;if(vt(vr)){var Be=vr.call(ce);if(!Dt(Be))return Be}var or=ce.toString;if(vt(or)){var Be=or.call(ce);if(!Dt(Be))return Be}}throw new TypeError}function $t(ce){return!!ce}function Tt(ce){return""+ce}function Kt(ce){var Le=At(ce,3);return Rt(Le)?Le:Tt(Le)}function Ee(ce){return Array.isArray?Array.isArray(ce):ce instanceof Object?ce instanceof Array:Object.prototype.toString.call(ce)==="[object Array]"}function vt(ce){return typeof ce=="function"}function bt(ce){return typeof ce=="function"}function wt(ce){switch(be(ce)){case 3:return!0;case 4:return!0;default:return!1}}function D(ce,Le){var je=ce[Le];if(je!=null){if(!vt(je))throw new TypeError;return je}}function tt(ce){var Le=D(ce,y);if(!vt(Le))throw new TypeError;var je=Le.call(ce);if(!Dt(je))throw new TypeError;return je}function Ot(ce){return ce.value}function ct(ce){var Le=ce.next();return Le.done?!1:Le}function ie(ce){var Le=ce.return;Le&&Le.call(ce)}function pe(ce){var Le=Object.getPrototypeOf(ce);if(typeof ce!="function"||ce===w||Le!==w)return Le;var je=ce.prototype,Be=je&&Object.getPrototypeOf(je);if(Be==null||Be===Object.prototype)return Le;var vr=Be.constructor;return typeof vr!="function"||vr===ce?Le:vr}function Ge(){var ce={},Le=[],je=function(){function Ae(yr,Cr,zr){this._index=0,this._keys=yr,this._values=Cr,this._selector=zr}return Ae.prototype["@@iterator"]=function(){return this},Ae.prototype[y]=function(){return this},Ae.prototype.next=function(){var yr=this._index;if(yr>=0&&yr<this._keys.length){var Cr=this._selector(this._keys[yr],this._values[yr]);return yr+1>=this._keys.length?(this._index=-1,this._keys=Le,this._values=Le):this._index++,{value:Cr,done:!1}}return{value:void 0,done:!0}},Ae.prototype.throw=function(yr){throw this._index>=0&&(this._index=-1,this._keys=Le,this._values=Le),yr},Ae.prototype.return=function(yr){return this._index>=0&&(this._index=-1,this._keys=Le,this._values=Le),{value:yr,done:!0}},Ae}();return function(){function Ae(){this._keys=[],this._values=[],this._cacheKey=ce,this._cacheIndex=-2}return Object.defineProperty(Ae.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ae.prototype.has=function(yr){return this._find(yr,!1)>=0},Ae.prototype.get=function(yr){var Cr=this._find(yr,!1);return Cr>=0?this._values[Cr]:void 0},Ae.prototype.set=function(yr,Cr){var zr=this._find(yr,!0);return this._values[zr]=Cr,this},Ae.prototype.delete=function(yr){var Cr=this._find(yr,!1);if(Cr>=0){for(var zr=this._keys.length,Mr=Cr+1;Mr<zr;Mr++)this._keys[Mr-1]=this._keys[Mr],this._values[Mr-1]=this._values[Mr];return this._keys.length--,this._values.length--,yr===this._cacheKey&&(this._cacheKey=ce,this._cacheIndex=-2),!0}return!1},Ae.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ce,this._cacheIndex=-2},Ae.prototype.keys=function(){return new je(this._keys,this._values,Be)},Ae.prototype.values=function(){return new je(this._keys,this._values,vr)},Ae.prototype.entries=function(){return new je(this._keys,this._values,or)},Ae.prototype["@@iterator"]=function(){return this.entries()},Ae.prototype[y]=function(){return this.entries()},Ae.prototype._find=function(yr,Cr){return this._cacheKey!==yr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=yr)),this._cacheIndex<0&&Cr&&(this._cacheIndex=this._keys.length,this._keys.push(yr),this._values.push(void 0)),this._cacheIndex},Ae}();function Be(Ae,yr){return Ae}function vr(Ae,yr){return yr}function or(Ae,yr){return[Ae,yr]}}function Re(){return function(){function ce(){this._map=new O}return Object.defineProperty(ce.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ce.prototype.has=function(Le){return this._map.has(Le)},ce.prototype.add=function(Le){return this._map.set(Le,Le),this},ce.prototype.delete=function(Le){return this._map.delete(Le)},ce.prototype.clear=function(){this._map.clear()},ce.prototype.keys=function(){return this._map.keys()},ce.prototype.values=function(){return this._map.values()},ce.prototype.entries=function(){return this._map.entries()},ce.prototype["@@iterator"]=function(){return this.keys()},ce.prototype[y]=function(){return this.keys()},ce}()}function Je(){var ce=16,Le=T.create(),je=Be();return function(){function Cr(){this._key=Be()}return Cr.prototype.has=function(zr){var Mr=vr(zr,!1);return Mr!==void 0?T.has(Mr,this._key):!1},Cr.prototype.get=function(zr){var Mr=vr(zr,!1);return Mr!==void 0?T.get(Mr,this._key):void 0},Cr.prototype.set=function(zr,Mr){var un=vr(zr,!0);return un[this._key]=Mr,this},Cr.prototype.delete=function(zr){var Mr=vr(zr,!1);return Mr!==void 0?delete Mr[this._key]:!1},Cr.prototype.clear=function(){this._key=Be()},Cr}();function Be(){var Cr;do Cr="@@WeakMap@@"+yr();while(T.has(Le,Cr));return Le[Cr]=!0,Cr}function vr(Cr,zr){if(!N.call(Cr,je)){if(!zr)return;Object.defineProperty(Cr,je,{value:T.create()})}return Cr[je]}function or(Cr,zr){for(var Mr=0;Mr<zr;++Mr)Cr[Mr]=Math.random()*255|0;return Cr}function Ae(Cr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Cr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Cr)):or(new Uint8Array(Cr),Cr):or(new Array(Cr),Cr)}function yr(){var Cr=Ae(ce);Cr[6]=Cr[6]&79|64,Cr[8]=Cr[8]&191|128;for(var zr="",Mr=0;Mr<ce;++Mr){var un=Cr[Mr];(Mr===4||Mr===6||Mr===8)&&(zr+="-"),un<16&&(zr+="0"),zr+=un.toString(16).toLowerCase()}return zr}}function Ve(ce){return ce.__=void 0,delete ce.__,ce}})})(z||(z={}))},4085:function(le){(function(S,M){le.exports=M()})(this,function(){"use strict";var S=function(Ct){return Ct instanceof Uint8Array||Ct instanceof Uint16Array||Ct instanceof Uint32Array||Ct instanceof Int8Array||Ct instanceof Int16Array||Ct instanceof Int32Array||Ct instanceof Float32Array||Ct instanceof Float64Array||Ct instanceof Uint8ClampedArray},M=function(Ct,fe){for(var ze=Object.keys(fe),wr=0;wr<ze.length;++wr)Ct[ze[wr]]=fe[ze[wr]];return Ct},x=`
`;function z(Ct){return typeof atob!="undefined"?atob(Ct):"base64:"+Ct}function k(Ct){var fe=new Error("(regl) "+Ct);throw console.error(fe),fe}function E(Ct,fe){Ct||k(fe)}function N(Ct){return Ct?": "+Ct:""}function I(Ct,fe,ze){Ct in fe||k("unknown parameter ("+Ct+")"+N(ze)+". possible values: "+Object.keys(fe).join())}function m(Ct,fe){S(Ct)||k("invalid parameter type"+N(fe)+". must be a typed array")}function y(Ct,fe){switch(fe){case"number":return typeof Ct=="number";case"object":return typeof Ct=="object";case"string":return typeof Ct=="string";case"boolean":return typeof Ct=="boolean";case"function":return typeof Ct=="function";case"undefined":return typeof Ct=="undefined";case"symbol":return typeof Ct=="symbol"}}function v(Ct,fe,ze){y(Ct,fe)||k("invalid parameter type"+N(ze)+". expected "+fe+", got "+typeof Ct)}function p(Ct,fe){Ct>=0&&(Ct|0)===Ct||k("invalid parameter type, ("+Ct+")"+N(fe)+". must be a nonnegative integer")}function g(Ct,fe,ze){fe.indexOf(Ct)<0&&k("invalid value"+N(ze)+". must be one of: "+fe)}var T=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function w(Ct){Object.keys(Ct).forEach(function(fe){T.indexOf(fe)<0&&k('invalid regl constructor argument "'+fe+'". must be one of '+T)})}function C(Ct,fe){for(Ct=Ct+"";Ct.length<fe;)Ct=" "+Ct;return Ct}function O(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(Ct,fe){this.number=Ct,this.line=fe,this.errors=[]}function l(Ct,fe,ze){this.file=Ct,this.line=fe,this.message=ze}function K(){var Ct=new Error,fe=(Ct.stack||Ct).toString(),ze=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(fe);if(ze)return ze[1];var wr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(fe);return wr?wr[1]:"unknown"}function Z(){var Ct=new Error,fe=(Ct.stack||Ct).toString(),ze=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(fe);if(ze)return ze[1];var wr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(fe);return wr?wr[1]:"unknown"}function X(Ct,fe){var ze=Ct.split(`
`),wr=1,Rr=0,br={unknown:new O,0:new O};br.unknown.name=br[0].name=fe||K(),br.unknown.lines.push(new b(0,""));for(var Ar=0;Ar<ze.length;++Ar){var jr=ze[Ar],Hr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(jr);if(Hr)switch(Hr[1]){case"line":var Kr=/(\d+)(\s+\d+)?/.exec(Hr[2]);Kr&&(wr=Kr[1]|0,Kr[2]&&(Rr=Kr[2]|0,Rr in br||(br[Rr]=new O)));break;case"define":var Vr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Hr[2]);Vr&&(br[Rr].name=Vr[1]?z(Vr[2]):Vr[2]);break}br[Rr].lines.push(new b(wr++,jr))}return Object.keys(br).forEach(function(Qr){var d=br[Qr];d.lines.forEach(function(L){d.index[L.number]=L})}),br}function W(Ct){var fe=[];return Ct.split(`
`).forEach(function(ze){if(!(ze.length<5)){var wr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ze);wr?fe.push(new l(wr[1]|0,wr[2]|0,wr[3].trim())):ze.length>0&&fe.push(new l("unknown",0,ze))}}),fe}function U(Ct,fe){fe.forEach(function(ze){var wr=Ct[ze.file];if(wr){var Rr=wr.index[ze.line];if(Rr){Rr.errors.push(ze),wr.hasErrors=!0;return}}Ct.unknown.hasErrors=!0,Ct.unknown.lines[0].errors.push(ze)})}function et(Ct,fe,ze,wr,Rr){if(!Ct.getShaderParameter(fe,Ct.COMPILE_STATUS)){var br=Ct.getShaderInfoLog(fe),Ar=wr===Ct.FRAGMENT_SHADER?"fragment":"vertex";Mt(ze,"string",Ar+" shader source must be a string",Rr);var jr=X(ze,Rr),Hr=W(br);U(jr,Hr),Object.keys(jr).forEach(function(Kr){var Vr=jr[Kr];if(!Vr.hasErrors)return;var Qr=[""],d=[""];function L(j,q){Qr.push(j),d.push(q||"")}L("file number "+Kr+": "+Vr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Vr.lines.forEach(function(j){if(j.errors.length>0){L(C(j.number,4)+"|  ","background-color:yellow; font-weight:bold"),L(j.line+x,"color:red; background-color:yellow; font-weight:bold");var q=0;j.errors.forEach(function(ht){var gt=ht.message,_t=/^\s*'(.*)'\s*:\s*(.*)$/.exec(gt);if(_t){var It=_t[1];switch(gt=_t[2],It){case"assign":It="=";break}q=Math.max(j.line.indexOf(It,q),0)}else q=0;L(C("| ",6)),L(C("^^^",q+3)+x,"font-weight:bold"),L(C("| ",6)),L(gt+x,"font-weight:bold")}),L(C("| ",6)+x)}else L(C(j.number,4)+"|  "),L(j.line+x,"color:red")}),typeof document!="undefined"&&!window.chrome?(d[0]=Qr.join("%c"),console.log.apply(console,d)):console.log(Qr.join(""))}),E.raise("Error compiling "+Ar+" shader, "+jr[0].name)}}function it(Ct,fe,ze,wr,Rr){if(!Ct.getProgramParameter(fe,Ct.LINK_STATUS)){var br=Ct.getProgramInfoLog(fe),Ar=X(ze,Rr),jr=X(wr,Rr),Hr='Error linking program with vertex shader, "'+jr[0].name+'", and fragment shader "'+Ar[0].name+'"';typeof document!="undefined"?console.log("%c"+Hr+x+"%c"+br,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Hr+x+br),E.raise(Hr)}}function J(Ct){Ct._commandRef=K()}function rt(Ct,fe,ze,wr){J(Ct);function Rr(Hr){return Hr?wr.id(Hr):0}Ct._fragId=Rr(Ct.static.frag),Ct._vertId=Rr(Ct.static.vert);function br(Hr,Kr){Object.keys(Kr).forEach(function(Vr){Hr[wr.id(Vr)]=!0})}var Ar=Ct._uniformSet={};br(Ar,fe.static),br(Ar,fe.dynamic);var jr=Ct._attributeSet={};br(jr,ze.static),br(jr,ze.dynamic),Ct._hasCount="count"in Ct.static||"count"in Ct.dynamic||"elements"in Ct.static||"elements"in Ct.dynamic}function mt(Ct,fe){var ze=Z();k(Ct+" in command "+(fe||K())+(ze==="unknown"?"":" called from "+ze))}function pt(Ct,fe,ze){Ct||mt(fe,ze||K())}function ft(Ct,fe,ze,wr){Ct in fe||mt("unknown parameter ("+Ct+")"+N(ze)+". possible values: "+Object.keys(fe).join(),wr||K())}function Mt(Ct,fe,ze,wr){y(Ct,fe)||mt("invalid parameter type"+N(ze)+". expected "+fe+", got "+typeof Ct,wr||K())}function zt(Ct){Ct()}function Vt(Ct,fe,ze){Ct.texture?g(Ct.texture._texture.internalformat,fe,"unsupported texture format for attachment"):g(Ct.renderbuffer._renderbuffer.format,ze,"unsupported renderbuffer format for attachment")}var kt=33071,st=9728,St=9984,qt=9985,re=9986,Nt=9987,be=5120,Te=5121,nr=5122,Rt=5123,Dt=5124,At=5125,Xt=5126,$t=32819,Tt=32820,Kt=33635,Ee=34042,vt=36193,bt={};bt[be]=bt[Te]=1,bt[nr]=bt[Rt]=bt[vt]=bt[Kt]=bt[$t]=bt[Tt]=2,bt[Dt]=bt[At]=bt[Xt]=bt[Ee]=4;function wt(Ct,fe){return Ct===Tt||Ct===$t||Ct===Kt?2:Ct===Ee?4:bt[Ct]*fe}function D(Ct){return!(Ct&Ct-1)&&!!Ct}function tt(Ct,fe,ze){var wr,Rr=fe.width,br=fe.height,Ar=fe.channels;E(Rr>0&&Rr<=ze.maxTextureSize&&br>0&&br<=ze.maxTextureSize,"invalid texture shape"),(Ct.wrapS!==kt||Ct.wrapT!==kt)&&E(D(Rr)&&D(br),"incompatible wrap mode for texture, both width and height must be power of 2"),fe.mipmask===1?Rr!==1&&br!==1&&E(Ct.minFilter!==St&&Ct.minFilter!==re&&Ct.minFilter!==qt&&Ct.minFilter!==Nt,"min filter requires mipmap"):(E(D(Rr)&&D(br),"texture must be a square power of 2 to support mipmapping"),E(fe.mipmask===(Rr<<1)-1,"missing or incomplete mipmap data")),fe.type===Xt&&(ze.extensions.indexOf("oes_texture_float_linear")<0&&E(Ct.minFilter===st&&Ct.magFilter===st,"filter not supported, must enable oes_texture_float_linear"),E(!Ct.genMipmaps,"mipmap generation not supported with float textures"));var jr=fe.images;for(wr=0;wr<16;++wr)if(jr[wr]){var Hr=Rr>>wr,Kr=br>>wr;E(fe.mipmask&1<<wr,"missing mipmap data");var Vr=jr[wr];if(E(Vr.width===Hr&&Vr.height===Kr,"invalid shape for mip images"),E(Vr.format===fe.format&&Vr.internalformat===fe.internalformat&&Vr.type===fe.type,"incompatible type for mip image"),!Vr.compressed)if(Vr.data){var Qr=Math.ceil(wt(Vr.type,Ar)*Hr/Vr.unpackAlignment)*Vr.unpackAlignment;E(Vr.data.byteLength===Qr*Kr,"invalid data for image, buffer size is inconsistent with image format")}else Vr.element||Vr.copy}else Ct.genMipmaps||E((fe.mipmask&1<<wr)===0,"extra mipmap data");fe.compressed&&E(!Ct.genMipmaps,"mipmap generation for compressed images not supported")}function Ot(Ct,fe,ze,wr){var Rr=Ct.width,br=Ct.height,Ar=Ct.channels;E(Rr>0&&Rr<=wr.maxTextureSize&&br>0&&br<=wr.maxTextureSize,"invalid texture shape"),E(Rr===br,"cube map must be square"),E(fe.wrapS===kt&&fe.wrapT===kt,"wrap mode not supported by cube map");for(var jr=0;jr<ze.length;++jr){var Hr=ze[jr];E(Hr.width===Rr&&Hr.height===br,"inconsistent cube map face shape"),fe.genMipmaps&&(E(!Hr.compressed,"can not generate mipmap for compressed textures"),E(Hr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Kr=Hr.images,Vr=0;Vr<16;++Vr){var Qr=Kr[Vr];if(Qr){var d=Rr>>Vr,L=br>>Vr;E(Hr.mipmask&1<<Vr,"missing mipmap data"),E(Qr.width===d&&Qr.height===L,"invalid shape for mip images"),E(Qr.format===Ct.format&&Qr.internalformat===Ct.internalformat&&Qr.type===Ct.type,"incompatible type for mip image"),Qr.compressed||(Qr.data?E(Qr.data.byteLength===d*L*Math.max(wt(Qr.type,Ar),Qr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Qr.element||Qr.copy)}}}}var ct=M(E,{optional:zt,raise:k,commandRaise:mt,command:pt,parameter:I,commandParameter:ft,constructor:w,type:v,commandType:Mt,isTypedArray:m,nni:p,oneOf:g,shaderError:et,linkError:it,callSite:Z,saveCommandRef:J,saveDrawInfo:rt,framebufferFormat:Vt,guessCommand:K,texture2D:tt,textureCube:Ot}),ie=0,pe=0,Ge=5,Re=6;function Je(Ct,fe){this.id=ie++,this.type=Ct,this.data=fe}function Ve(Ct){return Ct.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ce(Ct){if(Ct.length===0)return[];var fe=Ct.charAt(0),ze=Ct.charAt(Ct.length-1);if(Ct.length>1&&fe===ze&&(fe==='"'||fe==="'"))return['"'+Ve(Ct.substr(1,Ct.length-2))+'"'];var wr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ct);if(wr)return ce(Ct.substr(0,wr.index)).concat(ce(wr[1])).concat(ce(Ct.substr(wr.index+wr[0].length)));var Rr=Ct.split(".");if(Rr.length===1)return['"'+Ve(Ct)+'"'];for(var br=[],Ar=0;Ar<Rr.length;++Ar)br=br.concat(ce(Rr[Ar]));return br}function Le(Ct){return"["+ce(Ct).join("][")+"]"}function je(Ct,fe){return new Je(Ct,Le(fe+""))}function Be(Ct){return typeof Ct=="function"&&!Ct._reglType||Ct instanceof Je}function vr(Ct,fe){if(typeof Ct=="function")return new Je(pe,Ct);if(typeof Ct=="number"||typeof Ct=="boolean")return new Je(Ge,Ct);if(Array.isArray(Ct))return new Je(Re,Ct.map((ze,wr)=>vr(ze,fe+"["+wr+"]")));if(Ct instanceof Je)return Ct;ct(!1,"invalid option type in uniform "+fe)}var or={DynamicVariable:Je,define:je,isDynamic:Be,unbox:vr,accessor:Le},Ae={next:typeof requestAnimationFrame=="function"?function(Ct){return requestAnimationFrame(Ct)}:function(Ct){return setTimeout(Ct,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ct){return cancelAnimationFrame(Ct)}:clearTimeout},yr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Cr(){var Ct={"":0},fe=[""];return{id:function(ze){var wr=Ct[ze];return wr||(wr=Ct[ze]=fe.length,fe.push(ze),wr)},str:function(ze){return fe[ze]}}}function zr(Ct,fe,ze){var wr=document.createElement("canvas");M(wr.style,{border:0,margin:0,padding:0,top:0,left:0}),Ct.appendChild(wr),Ct===document.body&&(wr.style.position="absolute",M(Ct.style,{margin:0,padding:0}));function Rr(){var jr=window.innerWidth,Hr=window.innerHeight;if(Ct!==document.body){var Kr=Ct.getBoundingClientRect();jr=Kr.right-Kr.left,Hr=Kr.bottom-Kr.top}wr.width=ze*jr,wr.height=ze*Hr,M(wr.style,{width:jr+"px",height:Hr+"px"})}var br;Ct!==document.body&&typeof ResizeObserver=="function"?(br=new ResizeObserver(function(){setTimeout(Rr)}),br.observe(Ct)):window.addEventListener("resize",Rr,!1);function Ar(){br?br.disconnect():window.removeEventListener("resize",Rr),Ct.removeChild(wr)}return Rr(),{canvas:wr,onDestroy:Ar}}function Mr(Ct,fe){function ze(wr){try{return Ct.getContext(wr,fe)}catch(Rr){return null}}return ze("webgl")||ze("experimental-webgl")||ze("webgl-experimental")}function un(Ct){return typeof Ct.nodeName=="string"&&typeof Ct.appendChild=="function"&&typeof Ct.getBoundingClientRect=="function"}function hn(Ct){return typeof Ct.drawArrays=="function"||typeof Ct.drawElements=="function"}function Un(Ct){return typeof Ct=="string"?Ct.split():(ct(Array.isArray(Ct),"invalid extension array"),Ct)}function nn(Ct){return typeof Ct=="string"?(ct(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ct)):Ct}function vn(Ct){var fe=Ct||{},ze,wr,Rr,br,Ar={},jr=[],Hr=[],Kr=typeof window=="undefined"?1:window.devicePixelRatio,Vr=!1,Qr=function(j){j&&ct.raise(j)},d=function(){};if(typeof fe=="string"?(ct(typeof document!="undefined","selector queries only supported in DOM enviroments"),ze=document.querySelector(fe),ct(ze,"invalid query string for element")):typeof fe=="object"?un(fe)?ze=fe:hn(fe)?(br=fe,Rr=br.canvas):(ct.constructor(fe),"gl"in fe?br=fe.gl:"canvas"in fe?Rr=nn(fe.canvas):"container"in fe&&(wr=nn(fe.container)),"attributes"in fe&&(Ar=fe.attributes,ct.type(Ar,"object","invalid context attributes")),"extensions"in fe&&(jr=Un(fe.extensions)),"optionalExtensions"in fe&&(Hr=Un(fe.optionalExtensions)),"onDone"in fe&&(ct.type(fe.onDone,"function","invalid or missing onDone callback"),Qr=fe.onDone),"profile"in fe&&(Vr=!!fe.profile),"pixelRatio"in fe&&(Kr=+fe.pixelRatio,ct(Kr>0,"invalid pixel ratio"))):ct.raise("invalid arguments to regl"),ze&&(ze.nodeName.toLowerCase()==="canvas"?Rr=ze:wr=ze),!br){if(!Rr){ct(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var L=zr(wr||document.body,Qr,Kr);if(!L)return null;Rr=L.canvas,d=L.onDestroy}Ar.premultipliedAlpha===void 0&&(Ar.premultipliedAlpha=!0),br=Mr(Rr,Ar)}return br?{gl:br,canvas:Rr,container:wr,extensions:jr,optionalExtensions:Hr,pixelRatio:Kr,profile:Vr,onDone:Qr,onDestroy:d}:(d(),Qr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ln(Ct,fe){var ze={};function wr(Ar){ct.type(Ar,"string","extension name must be string");var jr=Ar.toLowerCase(),Hr;try{Hr=ze[jr]=Ct.getExtension(jr)}catch(Kr){}return!!Hr}for(var Rr=0;Rr<fe.extensions.length;++Rr){var br=fe.extensions[Rr];if(!wr(br))return fe.onDestroy(),fe.onDone('"'+br+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return fe.optionalExtensions.forEach(wr),{extensions:ze,restore:function(){Object.keys(ze).forEach(function(Ar){if(ze[Ar]&&!wr(Ar))throw new Error("(regl): error restoring extension "+Ar)})}}}function pn(Ct,fe){for(var ze=Array(Ct),wr=0;wr<Ct;++wr)ze[wr]=fe(wr);return ze}var Bn=5120,Oe=5121,Cn=5122,Gn=5123,bi=5124,zn=5125,Hn=5126;function hi(Ct){for(var fe=16;fe<=1<<28;fe*=16)if(Ct<=fe)return fe;return 0}function _i(Ct){var fe,ze;return fe=(Ct>65535)<<4,Ct>>>=fe,ze=(Ct>255)<<3,Ct>>>=ze,fe|=ze,ze=(Ct>15)<<2,Ct>>>=ze,fe|=ze,ze=(Ct>3)<<1,Ct>>>=ze,fe|=ze,fe|Ct>>1}function pi(){var Ct=pn(8,function(){return[]});function fe(br){var Ar=hi(br),jr=Ct[_i(Ar)>>2];return jr.length>0?jr.pop():new ArrayBuffer(Ar)}function ze(br){Ct[_i(br.byteLength)>>2].push(br)}function wr(br,Ar){var jr=null;switch(br){case Bn:jr=new Int8Array(fe(Ar),0,Ar);break;case Oe:jr=new Uint8Array(fe(Ar),0,Ar);break;case Cn:jr=new Int16Array(fe(2*Ar),0,Ar);break;case Gn:jr=new Uint16Array(fe(2*Ar),0,Ar);break;case bi:jr=new Int32Array(fe(4*Ar),0,Ar);break;case zn:jr=new Uint32Array(fe(4*Ar),0,Ar);break;case Hn:jr=new Float32Array(fe(4*Ar),0,Ar);break;default:return null}return jr.length!==Ar?jr.subarray(0,Ar):jr}function Rr(br){ze(br.buffer)}return{alloc:fe,free:ze,allocType:wr,freeType:Rr}}var Pt=pi();Pt.zero=pi();var Lt=3408,H=3410,G=3411,F=3412,ot=3413,Bt=3414,Ht=3415,Yt=33901,he=33902,at=3379,yt=3386,te=34921,Me=36347,_e=36348,tr=35661,sr=35660,ge=34930,Fe=36349,qe=34076,_r=34024,Er=7936,ye=7937,Ft=7938,ne=35724,Pe=34047,Ce=36063,Ue=34852,Xe=3553,Wr=34067,$r=34069,mn=33984,Nn=6408,kn=5126,Jn=5121,ri=36160,Ri=36053,di=36064,Ki=16384,yo=function(Ct,fe){var ze=1;fe.ext_texture_filter_anisotropic&&(ze=Ct.getParameter(Pe));var wr=1,Rr=1;fe.webgl_draw_buffers&&(wr=Ct.getParameter(Ue),Rr=Ct.getParameter(Ce));var br=!!fe.oes_texture_float;if(br){var Ar=Ct.createTexture();Ct.bindTexture(Xe,Ar),Ct.texImage2D(Xe,0,Nn,1,1,0,Nn,kn,null);var jr=Ct.createFramebuffer();if(Ct.bindFramebuffer(ri,jr),Ct.framebufferTexture2D(ri,di,Xe,Ar,0),Ct.bindTexture(Xe,null),Ct.checkFramebufferStatus(ri)!==Ri)br=!1;else{Ct.viewport(0,0,1,1),Ct.clearColor(1,0,0,1),Ct.clear(Ki);var Hr=Pt.allocType(kn,4);Ct.readPixels(0,0,1,1,Nn,kn,Hr),Ct.getError()?br=!1:(Ct.deleteFramebuffer(jr),Ct.deleteTexture(Ar),br=Hr[0]===1),Pt.freeType(Hr)}}var Kr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Vr=!0;if(!Kr){var Qr=Ct.createTexture(),d=Pt.allocType(Jn,36);Ct.activeTexture(mn),Ct.bindTexture(Wr,Qr),Ct.texImage2D($r,0,Nn,3,3,0,Nn,Jn,d),Pt.freeType(d),Ct.bindTexture(Wr,null),Ct.deleteTexture(Qr),Vr=!Ct.getError()}return{colorBits:[Ct.getParameter(H),Ct.getParameter(G),Ct.getParameter(F),Ct.getParameter(ot)],depthBits:Ct.getParameter(Bt),stencilBits:Ct.getParameter(Ht),subpixelBits:Ct.getParameter(Lt),extensions:Object.keys(fe).filter(function(L){return!!fe[L]}),maxAnisotropic:ze,maxDrawbuffers:wr,maxColorAttachments:Rr,pointSizeDims:Ct.getParameter(Yt),lineWidthDims:Ct.getParameter(he),maxViewportDims:Ct.getParameter(yt),maxCombinedTextureUnits:Ct.getParameter(tr),maxCubeMapSize:Ct.getParameter(qe),maxRenderbufferSize:Ct.getParameter(_r),maxTextureUnits:Ct.getParameter(ge),maxTextureSize:Ct.getParameter(at),maxAttributes:Ct.getParameter(te),maxVertexUniforms:Ct.getParameter(Me),maxVertexTextureUnits:Ct.getParameter(sr),maxVaryingVectors:Ct.getParameter(_e),maxFragmentUniforms:Ct.getParameter(Fe),glsl:Ct.getParameter(ne),renderer:Ct.getParameter(ye),vendor:Ct.getParameter(Er),version:Ct.getParameter(Ft),readFloat:br,npotTextureCube:Vr}};function Ea(Ct){return!!Ct&&typeof Ct=="object"&&Array.isArray(Ct.shape)&&Array.isArray(Ct.stride)&&typeof Ct.offset=="number"&&Ct.shape.length===Ct.stride.length&&(Array.isArray(Ct.data)||S(Ct.data))}var ta=function(Ct){return Object.keys(Ct).map(function(fe){return Ct[fe]})},mo={shape:zi,flatten:Vo};function Na(Ct,fe,ze){for(var wr=0;wr<fe;++wr)ze[wr]=Ct[wr]}function To(Ct,fe,ze,wr){for(var Rr=0,br=0;br<fe;++br)for(var Ar=Ct[br],jr=0;jr<ze;++jr)wr[Rr++]=Ar[jr]}function vi(Ct,fe,ze,wr,Rr,br){for(var Ar=br,jr=0;jr<fe;++jr)for(var Hr=Ct[jr],Kr=0;Kr<ze;++Kr)for(var Vr=Hr[Kr],Qr=0;Qr<wr;++Qr)Rr[Ar++]=Vr[Qr]}function xa(Ct,fe,ze,wr,Rr){for(var br=1,Ar=ze+1;Ar<fe.length;++Ar)br*=fe[Ar];var jr=fe[ze];if(fe.length-ze===4){var Hr=fe[ze+1],Kr=fe[ze+2],Vr=fe[ze+3];for(Ar=0;Ar<jr;++Ar)vi(Ct[Ar],Hr,Kr,Vr,wr,Rr),Rr+=br}else for(Ar=0;Ar<jr;++Ar)xa(Ct[Ar],fe,ze+1,wr,Rr),Rr+=br}function Vo(Ct,fe,ze,wr){var Rr=1;if(fe.length)for(var br=0;br<fe.length;++br)Rr*=fe[br];else Rr=0;var Ar=wr||Pt.allocType(ze,Rr);switch(fe.length){case 0:break;case 1:Na(Ct,fe[0],Ar);break;case 2:To(Ct,fe[0],fe[1],Ar);break;case 3:vi(Ct,fe[0],fe[1],fe[2],Ar,0);break;default:xa(Ct,fe,0,Ar,0)}return Ar}function zi(Ct){for(var fe=[],ze=Ct;ze.length;ze=ze[0])fe.push(ze.length);return fe}var ao={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},jo=5120,ps=5122,Io=5124,Ja=5121,Pn=5123,$s=5125,na=5126,oo=5126,Xa={int8:jo,int16:ps,int32:Io,uint8:Ja,uint16:Pn,uint32:$s,float:na,float32:oo},qo=35048,On=35040,bo={dynamic:qo,stream:On,static:35044},gs=mo.flatten,ts=mo.shape,es=35044,Wn=35040,so=5121,ia=5126,Bi=[];Bi[5120]=1,Bi[5122]=2,Bi[5124]=4,Bi[5121]=1,Bi[5123]=2,Bi[5125]=4,Bi[5126]=4;function rs(Ct){return ao[Object.prototype.toString.call(Ct)]|0}function Po(Ct,fe){for(var ze=0;ze<fe.length;++ze)Ct[ze]=fe[ze]}function ga(Ct,fe,ze,wr,Rr,br,Ar){for(var jr=0,Hr=0;Hr<ze;++Hr)for(var Kr=0;Kr<wr;++Kr)Ct[jr++]=fe[Rr*Hr+br*Kr+Ar]}function ys(Ct,fe,ze,wr){var Rr=0,br={};function Ar(q){this.id=Rr++,this.buffer=Ct.createBuffer(),this.type=q,this.usage=es,this.byteLength=0,this.dimension=1,this.dtype=so,this.persistentData=null,ze.profile&&(this.stats={size:0})}Ar.prototype.bind=function(){Ct.bindBuffer(this.type,this.buffer)},Ar.prototype.destroy=function(){d(this)};var jr=[];function Hr(q,ht){var gt=jr.pop();return gt||(gt=new Ar(q)),gt.bind(),Qr(gt,ht,Wn,0,1,!1),gt}function Kr(q){jr.push(q)}function Vr(q,ht,gt){q.byteLength=ht.byteLength,Ct.bufferData(q.type,ht,gt)}function Qr(q,ht,gt,_t,It,Ut){var Jt;if(q.usage=gt,Array.isArray(ht)){if(q.dtype=_t||ia,ht.length>0){var ue;if(Array.isArray(ht[0])){Jt=ts(ht);for(var ae=1,Ne=1;Ne<Jt.length;++Ne)ae*=Jt[Ne];q.dimension=ae,ue=gs(ht,Jt,q.dtype),Vr(q,ue,gt),Ut?q.persistentData=ue:Pt.freeType(ue)}else if(typeof ht[0]=="number"){q.dimension=It;var er=Pt.allocType(q.dtype,ht.length);Po(er,ht),Vr(q,er,gt),Ut?q.persistentData=er:Pt.freeType(er)}else S(ht[0])?(q.dimension=ht[0].length,q.dtype=_t||rs(ht[0])||ia,ue=gs(ht,[ht.length,ht[0].length],q.dtype),Vr(q,ue,gt),Ut?q.persistentData=ue:Pt.freeType(ue)):ct.raise("invalid buffer data")}}else if(S(ht))q.dtype=_t||rs(ht),q.dimension=It,Vr(q,ht,gt),Ut&&(q.persistentData=new Uint8Array(new Uint8Array(ht.buffer)));else if(Ea(ht)){Jt=ht.shape;var Pr=ht.stride,ur=ht.offset,hr=0,fr=0,Xr=0,fn=0;Jt.length===1?(hr=Jt[0],fr=1,Xr=Pr[0],fn=0):Jt.length===2?(hr=Jt[0],fr=Jt[1],Xr=Pr[0],fn=Pr[1]):ct.raise("invalid shape"),q.dtype=_t||rs(ht.data)||ia,q.dimension=fr;var tn=Pt.allocType(q.dtype,hr*fr);ga(tn,ht.data,hr,fr,Xr,fn,ur),Vr(q,tn,gt),Ut?q.persistentData=tn:Pt.freeType(tn)}else ht instanceof ArrayBuffer?(q.dtype=so,q.dimension=It,Vr(q,ht,gt),Ut&&(q.persistentData=new Uint8Array(new Uint8Array(ht)))):ct.raise("invalid buffer data")}function d(q){fe.bufferCount--,wr(q);var ht=q.buffer;ct(ht,"buffer must not be deleted already"),Ct.deleteBuffer(ht),q.buffer=null,delete br[q.id]}function L(q,ht,gt,_t){fe.bufferCount++;var It=new Ar(ht);br[It.id]=It;function Ut(ae){var Ne=es,er=null,Pr=0,ur=0,hr=1;return Array.isArray(ae)||S(ae)||Ea(ae)||ae instanceof ArrayBuffer?er=ae:typeof ae=="number"?Pr=ae|0:ae&&(ct.type(ae,"object","buffer arguments must be an object, a number or an array"),"data"in ae&&(ct(er===null||Array.isArray(er)||S(er)||Ea(er),"invalid data for buffer"),er=ae.data),"usage"in ae&&(ct.parameter(ae.usage,bo,"invalid buffer usage"),Ne=bo[ae.usage]),"type"in ae&&(ct.parameter(ae.type,Xa,"invalid buffer type"),ur=Xa[ae.type]),"dimension"in ae&&(ct.type(ae.dimension,"number","invalid dimension"),hr=ae.dimension|0),"length"in ae&&(ct.nni(Pr,"buffer length must be a nonnegative integer"),Pr=ae.length|0)),It.bind(),er?Qr(It,er,Ne,ur,hr,_t):(Pr&&Ct.bufferData(It.type,Pr,Ne),It.dtype=ur||so,It.usage=Ne,It.dimension=hr,It.byteLength=Pr),ze.profile&&(It.stats.size=It.byteLength*Bi[It.dtype]),Ut}function Jt(ae,Ne){ct(Ne+ae.byteLength<=It.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ae.byteLength+" starting from offset "+Ne+" to a buffer of size "+It.byteLength),Ct.bufferSubData(It.type,Ne,ae)}function ue(ae,Ne){var er=(Ne||0)|0,Pr;if(It.bind(),S(ae)||ae instanceof ArrayBuffer)Jt(ae,er);else if(Array.isArray(ae)){if(ae.length>0)if(typeof ae[0]=="number"){var ur=Pt.allocType(It.dtype,ae.length);Po(ur,ae),Jt(ur,er),Pt.freeType(ur)}else if(Array.isArray(ae[0])||S(ae[0])){Pr=ts(ae);var hr=gs(ae,Pr,It.dtype);Jt(hr,er),Pt.freeType(hr)}else ct.raise("invalid buffer data")}else if(Ea(ae)){Pr=ae.shape;var fr=ae.stride,Xr=0,fn=0,tn=0,Tn=0;Pr.length===1?(Xr=Pr[0],fn=1,tn=fr[0],Tn=0):Pr.length===2?(Xr=Pr[0],fn=Pr[1],tn=fr[0],Tn=fr[1]):ct.raise("invalid shape");var wn=Array.isArray(ae.data)?It.dtype:rs(ae.data),Rn=Pt.allocType(wn,Xr*fn);ga(Rn,ae.data,Xr,fn,tn,Tn,ae.offset),Jt(Rn,er),Pt.freeType(Rn)}else ct.raise("invalid data for buffer subdata");return Ut}return gt||Ut(q),Ut._reglType="buffer",Ut._buffer=It,Ut.subdata=ue,ze.profile&&(Ut.stats=It.stats),Ut.destroy=function(){d(It)},Ut}function j(){ta(br).forEach(function(q){q.buffer=Ct.createBuffer(),Ct.bindBuffer(q.type,q.buffer),Ct.bufferData(q.type,q.persistentData||q.byteLength,q.usage)})}return ze.profile&&(fe.getTotalBufferSize=function(){var q=0;return Object.keys(br).forEach(function(ht){q+=br[ht].stats.size}),q}),{create:L,createStream:Hr,destroyStream:Kr,clear:function(){ta(br).forEach(d),jr.forEach(d)},getBuffer:function(q){return q&&q._buffer instanceof Ar?q._buffer:null},restore:j,_initBuffer:Qr}}var Qs=0,ms=0,Eo=1,Ai=1,Ya=4,bs=4,Ha={points:Qs,point:ms,lines:Eo,line:Ai,triangles:Ya,triangle:bs,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ns=0,La=1,ya=4,Za=5120,xo=5121,Ka=5122,Ga=5123,Js=5124,ka=5125,$a=34963,wo=35040,qa=35044;function Xo(Ct,fe,ze,wr){var Rr={},br=0,Ar={uint8:xo,uint16:Ga};fe.oes_element_index_uint&&(Ar.uint32=ka);function jr(j){this.id=br++,Rr[this.id]=this,this.buffer=j,this.primType=ya,this.vertCount=0,this.type=0}jr.prototype.bind=function(){this.buffer.bind()};var Hr=[];function Kr(j){var q=Hr.pop();return q||(q=new jr(ze.create(null,$a,!0,!1)._buffer)),Qr(q,j,wo,-1,-1,0,0),q}function Vr(j){Hr.push(j)}function Qr(j,q,ht,gt,_t,It,Ut){j.buffer.bind();var Jt;if(q){var ue=Ut;!Ut&&(!S(q)||Ea(q)&&!S(q.data))&&(ue=fe.oes_element_index_uint?ka:Ga),ze._initBuffer(j.buffer,q,ht,ue,3)}else Ct.bufferData($a,It,ht),j.buffer.dtype=Jt||xo,j.buffer.usage=ht,j.buffer.dimension=3,j.buffer.byteLength=It;if(Jt=Ut,!Ut){switch(j.buffer.dtype){case xo:case Za:Jt=xo;break;case Ga:case Ka:Jt=Ga;break;case ka:case Js:Jt=ka;break;default:ct.raise("unsupported type for element array")}j.buffer.dtype=Jt}j.type=Jt,ct(Jt!==ka||!!fe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ae=_t;ae<0&&(ae=j.buffer.byteLength,Jt===Ga?ae>>=1:Jt===ka&&(ae>>=2)),j.vertCount=ae;var Ne=gt;if(gt<0){Ne=ya;var er=j.buffer.dimension;er===1&&(Ne=Ns),er===2&&(Ne=La),er===3&&(Ne=ya)}j.primType=Ne}function d(j){wr.elementsCount--,ct(j.buffer!==null,"must not double destroy elements"),delete Rr[j.id],j.buffer.destroy(),j.buffer=null}function L(j,q){var ht=ze.create(null,$a,!0),gt=new jr(ht._buffer);wr.elementsCount++;function _t(It){if(!It)ht(),gt.primType=ya,gt.vertCount=0,gt.type=xo;else if(typeof It=="number")ht(It),gt.primType=ya,gt.vertCount=It|0,gt.type=xo;else{var Ut=null,Jt=qa,ue=-1,ae=-1,Ne=0,er=0;Array.isArray(It)||S(It)||Ea(It)?Ut=It:(ct.type(It,"object","invalid arguments for elements"),"data"in It&&(Ut=It.data,ct(Array.isArray(Ut)||S(Ut)||Ea(Ut),"invalid data for element buffer")),"usage"in It&&(ct.parameter(It.usage,bo,"invalid element buffer usage"),Jt=bo[It.usage]),"primitive"in It&&(ct.parameter(It.primitive,Ha,"invalid element buffer primitive"),ue=Ha[It.primitive]),"count"in It&&(ct(typeof It.count=="number"&&It.count>=0,"invalid vertex count for elements"),ae=It.count|0),"type"in It&&(ct.parameter(It.type,Ar,"invalid buffer type"),er=Ar[It.type]),"length"in It?Ne=It.length|0:(Ne=ae,er===Ga||er===Ka?Ne*=2:(er===ka||er===Js)&&(Ne*=4))),Qr(gt,Ut,Jt,ue,ae,Ne,er)}return _t}return _t(j),_t._reglType="elements",_t._elements=gt,_t.subdata=function(It,Ut){return ht.subdata(It,Ut),_t},_t.destroy=function(){d(gt)},_t}return{create:L,createStream:Kr,destroyStream:Vr,getElements:function(j){return typeof j=="function"&&j._elements instanceof jr?j._elements:null},clear:function(){ta(Rr).forEach(d)}}}var fi=new Float32Array(1),ma=new Uint32Array(fi.buffer),to=5123;function ba(Ct){for(var fe=Pt.allocType(to,Ct.length),ze=0;ze<Ct.length;++ze)if(isNaN(Ct[ze]))fe[ze]=65535;else if(Ct[ze]===1/0)fe[ze]=31744;else if(Ct[ze]===-1/0)fe[ze]=64512;else{fi[0]=Ct[ze];var wr=ma[0],Rr=wr>>>31<<15,br=(wr<<1>>>24)-127,Ar=wr>>13&(1<<10)-1;if(br<-24)fe[ze]=Rr;else if(br<-14){var jr=-14-br;fe[ze]=Rr+(Ar+(1<<10)>>jr)}else br>15?fe[ze]=Rr+31744:fe[ze]=Rr+(br+15<<10)+Ar}return fe}function Mi(Ct){return Array.isArray(Ct)||S(Ct)}var ca=function(Ct){return!(Ct&Ct-1)&&!!Ct},Es=34467,aa=3553,uo=34067,eo=34069,fo=6408,qs=6406,Yo=6407,Oo=6409,ns=6410,Wu=32854,yu=32855,xs=36194,jt=32819,se=32820,rr=33635,cr=34042,Gr=6402,cn=34041,xn=35904,Zn=35906,Wi=36193,Ra=33776,Fa=33777,Ho=33778,xf=33779,wa=35986,ro=35987,mu=34798,ic=35840,Yc=35841,wf=35842,Sf=35843,_f=36196,tu=5121,bu=5123,eu=5125,co=5126,Hc=10242,Mf=10243,zl=10497,Ls=33071,Wl=33648,Vl=10240,Eu=10241,Xn=9728,Cf=9729,Af=9984,Vu=9985,ac=9986,Tf=9987,oc=33170,If=4352,sc=4353,Zc=4354,Pf=34046,Kc=3317,jl=37440,ks=37441,$c=37443,ju=37444,Xu=33984,Qc=[Af,ac,Vu,Tf],Yu=[0,Oo,ns,Yo,fo],Do={};Do[Oo]=Do[qs]=Do[Gr]=1,Do[cn]=Do[ns]=2,Do[Yo]=Do[xn]=3,Do[fo]=Do[Zn]=4;function xu(Ct){return"[object "+Ct+"]"}var Jc=xu("HTMLCanvasElement"),Xl=xu("OffscreenCanvas"),qc=xu("CanvasRenderingContext2D"),Yl=xu("ImageBitmap"),Of=xu("HTMLImageElement"),Hl=xu("HTMLVideoElement"),tl=Object.keys(ao).concat([Jc,Xl,qc,Yl,Of,Hl]),ru=[];ru[tu]=1,ru[co]=4,ru[Wi]=2,ru[bu]=2,ru[eu]=4;var Aa=[];Aa[Wu]=2,Aa[yu]=2,Aa[xs]=2,Aa[cn]=4,Aa[Ra]=.5,Aa[Fa]=.5,Aa[Ho]=1,Aa[xf]=1,Aa[wa]=.5,Aa[ro]=1,Aa[mu]=1,Aa[ic]=.5,Aa[Yc]=.25,Aa[wf]=.5,Aa[Sf]=.25,Aa[_f]=.5;function Df(Ct){return Array.isArray(Ct)&&(Ct.length===0||typeof Ct[0]=="number")}function nu(Ct){if(!Array.isArray(Ct))return!1;var fe=Ct.length;return!(fe===0||!Mi(Ct[0]))}function Zo(Ct){return Object.prototype.toString.call(Ct)}function el(Ct){return Zo(Ct)===Jc}function rl(Ct){return Zo(Ct)===Xl}function Zl(Ct){return Zo(Ct)===qc}function Kl(Ct){return Zo(Ct)===Yl}function $l(Ct){return Zo(Ct)===Of}function nl(Ct){return Zo(Ct)===Hl}function Ko(Ct){if(!Ct)return!1;var fe=Zo(Ct);return tl.indexOf(fe)>=0?!0:Df(Ct)||nu(Ct)||Ea(Ct)}function il(Ct){return ao[Object.prototype.toString.call(Ct)]|0}function al(Ct,fe){var ze=fe.length;switch(Ct.type){case tu:case bu:case eu:case co:var wr=Pt.allocType(Ct.type,ze);wr.set(fe),Ct.data=wr;break;case Wi:Ct.data=ba(fe);break;default:ct.raise("unsupported texture type, must specify a typed array")}}function ol(Ct,fe){return Pt.allocType(Ct.type===Wi?co:Ct.type,fe)}function Ql(Ct,fe){Ct.type===Wi?(Ct.data=ba(fe),Pt.freeType(fe)):Ct.data=fe}function sl(Ct,fe,ze,wr,Rr,br){for(var Ar=Ct.width,jr=Ct.height,Hr=Ct.channels,Kr=Ar*jr*Hr,Vr=ol(Ct,Kr),Qr=0,d=0;d<jr;++d)for(var L=0;L<Ar;++L)for(var j=0;j<Hr;++j)Vr[Qr++]=fe[ze*L+wr*d+Rr*j+br];Ql(Ct,Vr)}function Ta(Ct,fe,ze,wr,Rr,br){var Ar;if(typeof Aa[Ct]!="undefined"?Ar=Aa[Ct]:Ar=Do[Ct]*ru[fe],br&&(Ar*=6),Rr){for(var jr=0,Hr=ze;Hr>=1;)jr+=Ar*Hr*Hr,Hr/=2;return jr}else return Ar*ze*wr}function Nh(Ct,fe,ze,wr,Rr,br,Ar){var jr={"don't care":If,"dont care":If,nice:Zc,fast:sc},Hr={repeat:zl,clamp:Ls,mirror:Wl},Kr={nearest:Xn,linear:Cf},Vr=M({mipmap:Tf,"nearest mipmap nearest":Af,"linear mipmap nearest":Vu,"nearest mipmap linear":ac,"linear mipmap linear":Tf},Kr),Qr={none:0,browser:ju},d={uint8:tu,rgba4:jt,rgb565:rr,"rgb5 a1":se},L={alpha:qs,luminance:Oo,"luminance alpha":ns,rgb:Yo,rgba:fo,rgba4:Wu,"rgb5 a1":yu,rgb565:xs},j={};fe.ext_srgb&&(L.srgb=xn,L.srgba=Zn),fe.oes_texture_float&&(d.float32=d.float=co),fe.oes_texture_half_float&&(d.float16=d["half float"]=Wi),fe.webgl_depth_texture&&(M(L,{depth:Gr,"depth stencil":cn}),M(d,{uint16:bu,uint32:eu,"depth stencil":cr})),fe.webgl_compressed_texture_s3tc&&M(j,{"rgb s3tc dxt1":Ra,"rgba s3tc dxt1":Fa,"rgba s3tc dxt3":Ho,"rgba s3tc dxt5":xf}),fe.webgl_compressed_texture_atc&&M(j,{"rgb atc":wa,"rgba atc explicit alpha":ro,"rgba atc interpolated alpha":mu}),fe.webgl_compressed_texture_pvrtc&&M(j,{"rgb pvrtc 4bppv1":ic,"rgb pvrtc 2bppv1":Yc,"rgba pvrtc 4bppv1":wf,"rgba pvrtc 2bppv1":Sf}),fe.webgl_compressed_texture_etc1&&(j["rgb etc1"]=_f);var q=Array.prototype.slice.call(Ct.getParameter(Es));Object.keys(j).forEach(function(ke){var Sr=j[ke];q.indexOf(Sr)>=0&&(L[ke]=Sr)});var ht=Object.keys(L);ze.textureFormats=ht;var gt=[];Object.keys(L).forEach(function(ke){var Sr=L[ke];gt[Sr]=ke});var _t=[];Object.keys(d).forEach(function(ke){var Sr=d[ke];_t[Sr]=ke});var It=[];Object.keys(Kr).forEach(function(ke){var Sr=Kr[ke];It[Sr]=ke});var Ut=[];Object.keys(Vr).forEach(function(ke){var Sr=Vr[ke];Ut[Sr]=ke});var Jt=[];Object.keys(Hr).forEach(function(ke){var Sr=Hr[ke];Jt[Sr]=ke});var ue=ht.reduce(function(ke,Sr){var xr=L[Sr];return xr===Oo||xr===qs||xr===Oo||xr===ns||xr===Gr||xr===cn||fe.ext_srgb&&(xr===xn||xr===Zn)?ke[xr]=xr:xr===yu||Sr.indexOf("rgba")>=0?ke[xr]=fo:ke[xr]=Yo,ke},{});function ae(){this.internalformat=fo,this.format=fo,this.type=tu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ju,this.width=0,this.height=0,this.channels=0}function Ne(ke,Sr){ke.internalformat=Sr.internalformat,ke.format=Sr.format,ke.type=Sr.type,ke.compressed=Sr.compressed,ke.premultiplyAlpha=Sr.premultiplyAlpha,ke.flipY=Sr.flipY,ke.unpackAlignment=Sr.unpackAlignment,ke.colorSpace=Sr.colorSpace,ke.width=Sr.width,ke.height=Sr.height,ke.channels=Sr.channels}function er(ke,Sr){if(!(typeof Sr!="object"||!Sr)){if("premultiplyAlpha"in Sr&&(ct.type(Sr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ke.premultiplyAlpha=Sr.premultiplyAlpha),"flipY"in Sr&&(ct.type(Sr.flipY,"boolean","invalid texture flip"),ke.flipY=Sr.flipY),"alignment"in Sr&&(ct.oneOf(Sr.alignment,[1,2,4,8],"invalid texture unpack alignment"),ke.unpackAlignment=Sr.alignment),"colorSpace"in Sr&&(ct.parameter(Sr.colorSpace,Qr,"invalid colorSpace"),ke.colorSpace=Qr[Sr.colorSpace]),"type"in Sr){var xr=Sr.type;ct(fe.oes_texture_float||!(xr==="float"||xr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ct(fe.oes_texture_half_float||!(xr==="half float"||xr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ct(fe.webgl_depth_texture||!(xr==="uint16"||xr==="uint32"||xr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ct.parameter(xr,d,"invalid texture type"),ke.type=d[xr]}var En=ke.width,si=ke.height,Se=ke.channels,oe=!1;"shape"in Sr?(ct(Array.isArray(Sr.shape)&&Sr.shape.length>=2,"shape must be an array"),En=Sr.shape[0],si=Sr.shape[1],Sr.shape.length===3&&(Se=Sr.shape[2],ct(Se>0&&Se<=4,"invalid number of channels"),oe=!0),ct(En>=0&&En<=ze.maxTextureSize,"invalid width"),ct(si>=0&&si<=ze.maxTextureSize,"invalid height")):("radius"in Sr&&(En=si=Sr.radius,ct(En>=0&&En<=ze.maxTextureSize,"invalid radius")),"width"in Sr&&(En=Sr.width,ct(En>=0&&En<=ze.maxTextureSize,"invalid width")),"height"in Sr&&(si=Sr.height,ct(si>=0&&si<=ze.maxTextureSize,"invalid height")),"channels"in Sr&&(Se=Sr.channels,ct(Se>0&&Se<=4,"invalid number of channels"),oe=!0)),ke.width=En|0,ke.height=si|0,ke.channels=Se|0;var Ke=!1;if("format"in Sr){var dr=Sr.format;ct(fe.webgl_depth_texture||!(dr==="depth"||dr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ct.parameter(dr,L,"invalid texture format");var gr=ke.internalformat=L[dr];ke.format=ue[gr],dr in d&&("type"in Sr||(ke.type=d[dr])),dr in j&&(ke.compressed=!0),Ke=!0}!oe&&Ke?ke.channels=Do[ke.format]:oe&&!Ke?ke.channels!==Yu[ke.format]&&(ke.format=ke.internalformat=Yu[ke.channels]):Ke&&oe&&ct(ke.channels===Do[ke.format],"number of channels inconsistent with specified format")}}function Pr(ke){Ct.pixelStorei(jl,ke.flipY),Ct.pixelStorei(ks,ke.premultiplyAlpha),Ct.pixelStorei($c,ke.colorSpace),Ct.pixelStorei(Kc,ke.unpackAlignment)}function ur(){ae.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function hr(ke,Sr){var xr=null;if(Ko(Sr)?xr=Sr:Sr&&(ct.type(Sr,"object","invalid pixel data type"),er(ke,Sr),"x"in Sr&&(ke.xOffset=Sr.x|0),"y"in Sr&&(ke.yOffset=Sr.y|0),Ko(Sr.data)&&(xr=Sr.data)),ct(!ke.compressed||xr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Sr.copy){ct(!xr,"can not specify copy and data field for the same texture");var En=Rr.viewportWidth,si=Rr.viewportHeight;ke.width=ke.width||En-ke.xOffset,ke.height=ke.height||si-ke.yOffset,ke.needsCopy=!0,ct(ke.xOffset>=0&&ke.xOffset<En&&ke.yOffset>=0&&ke.yOffset<si&&ke.width>0&&ke.width<=En&&ke.height>0&&ke.height<=si,"copy texture read out of bounds")}else if(!xr)ke.width=ke.width||1,ke.height=ke.height||1,ke.channels=ke.channels||4;else if(S(xr))ke.channels=ke.channels||4,ke.data=xr,!("type"in Sr)&&ke.type===tu&&(ke.type=il(xr));else if(Df(xr))ke.channels=ke.channels||4,al(ke,xr),ke.alignment=1,ke.needsFree=!0;else if(Ea(xr)){var Se=xr.data;!Array.isArray(Se)&&ke.type===tu&&(ke.type=il(Se));var oe=xr.shape,Ke=xr.stride,dr,gr,Qe,$e,ir,we;oe.length===3?(Qe=oe[2],we=Ke[2]):(ct(oe.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Qe=1,we=1),dr=oe[0],gr=oe[1],$e=Ke[0],ir=Ke[1],ke.alignment=1,ke.width=dr,ke.height=gr,ke.channels=Qe,ke.format=ke.internalformat=Yu[Qe],ke.needsFree=!0,sl(ke,Se,$e,ir,we,xr.offset)}else if(el(xr)||rl(xr)||Zl(xr))el(xr)||rl(xr)?ke.element=xr:ke.element=xr.canvas,ke.width=ke.element.width,ke.height=ke.element.height,ke.channels=4;else if(Kl(xr))ke.element=xr,ke.width=xr.width,ke.height=xr.height,ke.channels=4;else if($l(xr))ke.element=xr,ke.width=xr.naturalWidth,ke.height=xr.naturalHeight,ke.channels=4;else if(nl(xr))ke.element=xr,ke.width=xr.videoWidth,ke.height=xr.videoHeight,ke.channels=4;else if(nu(xr)){var Ye=ke.width||xr[0].length,me=ke.height||xr.length,lr=ke.channels;Mi(xr[0][0])?lr=lr||xr[0][0].length:lr=lr||1;for(var mr=mo.shape(xr),kr=1,Ur=0;Ur<mr.length;++Ur)kr*=mr[Ur];var Or=ol(ke,kr);mo.flatten(xr,mr,"",Or),Ql(ke,Or),ke.alignment=1,ke.width=Ye,ke.height=me,ke.channels=lr,ke.format=ke.internalformat=Yu[lr],ke.needsFree=!0}ke.type===co?ct(ze.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ke.type===Wi&&ct(ze.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function fr(ke,Sr,xr){var En=ke.element,si=ke.data,Se=ke.internalformat,oe=ke.format,Ke=ke.type,dr=ke.width,gr=ke.height;Pr(ke),En?Ct.texImage2D(Sr,xr,oe,oe,Ke,En):ke.compressed?Ct.compressedTexImage2D(Sr,xr,Se,dr,gr,0,si):ke.needsCopy?(wr(),Ct.copyTexImage2D(Sr,xr,oe,ke.xOffset,ke.yOffset,dr,gr,0)):Ct.texImage2D(Sr,xr,oe,dr,gr,0,oe,Ke,si||null)}function Xr(ke,Sr,xr,En,si){var Se=ke.element,oe=ke.data,Ke=ke.internalformat,dr=ke.format,gr=ke.type,Qe=ke.width,$e=ke.height;Pr(ke),Se?Ct.texSubImage2D(Sr,si,xr,En,dr,gr,Se):ke.compressed?Ct.compressedTexSubImage2D(Sr,si,xr,En,Ke,Qe,$e,oe):ke.needsCopy?(wr(),Ct.copyTexSubImage2D(Sr,si,xr,En,ke.xOffset,ke.yOffset,Qe,$e)):Ct.texSubImage2D(Sr,si,xr,En,Qe,$e,dr,gr,oe)}var fn=[];function tn(){return fn.pop()||new ur}function Tn(ke){ke.needsFree&&Pt.freeType(ke.data),ur.call(ke),fn.push(ke)}function wn(){ae.call(this),this.genMipmaps=!1,this.mipmapHint=If,this.mipmask=0,this.images=Array(16)}function Rn(ke,Sr,xr){var En=ke.images[0]=tn();ke.mipmask=1,En.width=ke.width=Sr,En.height=ke.height=xr,En.channels=ke.channels=4}function Kn(ke,Sr){var xr=null;if(Ko(Sr))xr=ke.images[0]=tn(),Ne(xr,ke),hr(xr,Sr),ke.mipmask=1;else if(er(ke,Sr),Array.isArray(Sr.mipmap))for(var En=Sr.mipmap,si=0;si<En.length;++si)xr=ke.images[si]=tn(),Ne(xr,ke),xr.width>>=si,xr.height>>=si,hr(xr,En[si]),ke.mipmask|=1<<si;else xr=ke.images[0]=tn(),Ne(xr,ke),hr(xr,Sr),ke.mipmask=1;Ne(ke,ke.images[0]),ke.compressed&&(ke.internalformat===Ra||ke.internalformat===Fa||ke.internalformat===Ho||ke.internalformat===xf)&&ct(ke.width%4===0&&ke.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Fn(ke,Sr){for(var xr=ke.images,En=0;En<xr.length;++En){if(!xr[En])return;fr(xr[En],Sr,En)}}var Vi=[];function Qn(){var ke=Vi.pop()||new wn;ae.call(ke),ke.mipmask=0;for(var Sr=0;Sr<16;++Sr)ke.images[Sr]=null;return ke}function oa(ke){for(var Sr=ke.images,xr=0;xr<Sr.length;++xr)Sr[xr]&&Tn(Sr[xr]),Sr[xr]=null;Vi.push(ke)}function Di(){this.minFilter=Xn,this.magFilter=Xn,this.wrapS=Ls,this.wrapT=Ls,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=If}function ui(ke,Sr){if("min"in Sr){var xr=Sr.min;ct.parameter(xr,Vr),ke.minFilter=Vr[xr],Qc.indexOf(ke.minFilter)>=0&&!("faces"in Sr)&&(ke.genMipmaps=!0)}if("mag"in Sr){var En=Sr.mag;ct.parameter(En,Kr),ke.magFilter=Kr[En]}var si=ke.wrapS,Se=ke.wrapT;if("wrap"in Sr){var oe=Sr.wrap;typeof oe=="string"?(ct.parameter(oe,Hr),si=Se=Hr[oe]):Array.isArray(oe)&&(ct.parameter(oe[0],Hr),ct.parameter(oe[1],Hr),si=Hr[oe[0]],Se=Hr[oe[1]])}else{if("wrapS"in Sr){var Ke=Sr.wrapS;ct.parameter(Ke,Hr),si=Hr[Ke]}if("wrapT"in Sr){var dr=Sr.wrapT;ct.parameter(dr,Hr),Se=Hr[dr]}}if(ke.wrapS=si,ke.wrapT=Se,"anisotropic"in Sr){var gr=Sr.anisotropic;ct(typeof gr=="number"&&gr>=1&&gr<=ze.maxAnisotropic,"aniso samples must be between 1 and "),ke.anisotropic=Sr.anisotropic}if("mipmap"in Sr){var Qe=!1;switch(typeof Sr.mipmap){case"string":ct.parameter(Sr.mipmap,jr,"invalid mipmap hint"),ke.mipmapHint=jr[Sr.mipmap],ke.genMipmaps=!0,Qe=!0;break;case"boolean":Qe=ke.genMipmaps=Sr.mipmap;break;case"object":ct(Array.isArray(Sr.mipmap),"invalid mipmap type"),ke.genMipmaps=!1,Qe=!0;break;default:ct.raise("invalid mipmap type")}Qe&&!("min"in Sr)&&(ke.minFilter=Af)}}function Qi(ke,Sr){Ct.texParameteri(Sr,Eu,ke.minFilter),Ct.texParameteri(Sr,Vl,ke.magFilter),Ct.texParameteri(Sr,Hc,ke.wrapS),Ct.texParameteri(Sr,Mf,ke.wrapT),fe.ext_texture_filter_anisotropic&&Ct.texParameteri(Sr,Pf,ke.anisotropic),ke.genMipmaps&&(Ct.hint(oc,ke.mipmapHint),Ct.generateMipmap(Sr))}var sa=0,Sa={},za=ze.maxTextureUnits,_a=Array(za).map(function(){return null});function ni(ke){ae.call(this),this.mipmask=0,this.internalformat=fo,this.id=sa++,this.refCount=1,this.target=ke,this.texture=Ct.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Di,Ar.profile&&(this.stats={size:0})}function Wa(ke){Ct.activeTexture(Xu),Ct.bindTexture(ke.target,ke.texture)}function Ii(){var ke=_a[0];ke?Ct.bindTexture(ke.target,ke.texture):Ct.bindTexture(aa,null)}function Vn(ke){var Sr=ke.texture;ct(Sr,"must not double destroy texture");var xr=ke.unit,En=ke.target;xr>=0&&(Ct.activeTexture(Xu+xr),Ct.bindTexture(En,null),_a[xr]=null),Ct.deleteTexture(Sr),ke.texture=null,ke.params=null,ke.pixels=null,ke.refCount=0,delete Sa[ke.id],br.textureCount--}M(ni.prototype,{bind:function(){var ke=this;ke.bindCount+=1;var Sr=ke.unit;if(Sr<0){for(var xr=0;xr<za;++xr){var En=_a[xr];if(En){if(En.bindCount>0)continue;En.unit=-1}_a[xr]=ke,Sr=xr;break}Sr>=za&&ct.raise("insufficient number of texture units"),Ar.profile&&br.maxTextureUnits<Sr+1&&(br.maxTextureUnits=Sr+1),ke.unit=Sr,Ct.activeTexture(Xu+Sr),Ct.bindTexture(ke.target,ke.texture)}return Sr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Vn(this)}});function ci(ke,Sr){var xr=new ni(aa);Sa[xr.id]=xr,br.textureCount++;function En(oe,Ke){var dr=xr.texInfo;Di.call(dr);var gr=Qn();return typeof oe=="number"?typeof Ke=="number"?Rn(gr,oe|0,Ke|0):Rn(gr,oe|0,oe|0):oe?(ct.type(oe,"object","invalid arguments to regl.texture"),ui(dr,oe),Kn(gr,oe)):Rn(gr,1,1),dr.genMipmaps&&(gr.mipmask=(gr.width<<1)-1),xr.mipmask=gr.mipmask,Ne(xr,gr),ct.texture2D(dr,gr,ze),xr.internalformat=gr.internalformat,En.width=gr.width,En.height=gr.height,Wa(xr),Fn(gr,aa),Qi(dr,aa),Ii(),oa(gr),Ar.profile&&(xr.stats.size=Ta(xr.internalformat,xr.type,gr.width,gr.height,dr.genMipmaps,!1)),En.format=gt[xr.internalformat],En.type=_t[xr.type],En.mag=It[dr.magFilter],En.min=Ut[dr.minFilter],En.wrapS=Jt[dr.wrapS],En.wrapT=Jt[dr.wrapT],En}function si(oe,Ke,dr,gr){ct(!!oe,"must specify image data");var Qe=Ke|0,$e=dr|0,ir=gr|0,we=tn();return Ne(we,xr),we.width=0,we.height=0,hr(we,oe),we.width=we.width||(xr.width>>ir)-Qe,we.height=we.height||(xr.height>>ir)-$e,ct(xr.type===we.type&&xr.format===we.format&&xr.internalformat===we.internalformat,"incompatible format for texture.subimage"),ct(Qe>=0&&$e>=0&&Qe+we.width<=xr.width&&$e+we.height<=xr.height,"texture.subimage write out of bounds"),ct(xr.mipmask&1<<ir,"missing mipmap data"),ct(we.data||we.element||we.needsCopy,"missing image data"),Wa(xr),Xr(we,aa,Qe,$e,ir),Ii(),Tn(we),En}function Se(oe,Ke){var dr=oe|0,gr=Ke|0||dr;if(dr===xr.width&&gr===xr.height)return En;En.width=xr.width=dr,En.height=xr.height=gr,Wa(xr);for(var Qe=0;xr.mipmask>>Qe;++Qe){var $e=dr>>Qe,ir=gr>>Qe;if(!$e||!ir)break;Ct.texImage2D(aa,Qe,xr.format,$e,ir,0,xr.format,xr.type,null)}return Ii(),Ar.profile&&(xr.stats.size=Ta(xr.internalformat,xr.type,dr,gr,!1,!1)),En}return En(ke,Sr),En.subimage=si,En.resize=Se,En._reglType="texture2d",En._texture=xr,Ar.profile&&(En.stats=xr.stats),En.destroy=function(){xr.decRef()},En}function yi(ke,Sr,xr,En,si,Se){var oe=new ni(uo);Sa[oe.id]=oe,br.cubeCount++;var Ke=new Array(6);function dr($e,ir,we,Ye,me,lr){var mr,kr=oe.texInfo;for(Di.call(kr),mr=0;mr<6;++mr)Ke[mr]=Qn();if(typeof $e=="number"||!$e){var Ur=$e|0||1;for(mr=0;mr<6;++mr)Rn(Ke[mr],Ur,Ur)}else if(typeof $e=="object")if(ir)Kn(Ke[0],$e),Kn(Ke[1],ir),Kn(Ke[2],we),Kn(Ke[3],Ye),Kn(Ke[4],me),Kn(Ke[5],lr);else if(ui(kr,$e),er(oe,$e),"faces"in $e){var Or=$e.faces;for(ct(Array.isArray(Or)&&Or.length===6,"cube faces must be a length 6 array"),mr=0;mr<6;++mr)ct(typeof Or[mr]=="object"&&!!Or[mr],"invalid input for cube map face"),Ne(Ke[mr],oe),Kn(Ke[mr],Or[mr])}else for(mr=0;mr<6;++mr)Kn(Ke[mr],$e);else ct.raise("invalid arguments to cube map");for(Ne(oe,Ke[0]),ze.npotTextureCube||ct(ca(oe.width)&&ca(oe.height),"your browser does not support non power or two texture dimensions"),kr.genMipmaps?oe.mipmask=(Ke[0].width<<1)-1:oe.mipmask=Ke[0].mipmask,ct.textureCube(oe,kr,Ke,ze),oe.internalformat=Ke[0].internalformat,dr.width=Ke[0].width,dr.height=Ke[0].height,Wa(oe),mr=0;mr<6;++mr)Fn(Ke[mr],eo+mr);for(Qi(kr,uo),Ii(),Ar.profile&&(oe.stats.size=Ta(oe.internalformat,oe.type,dr.width,dr.height,kr.genMipmaps,!0)),dr.format=gt[oe.internalformat],dr.type=_t[oe.type],dr.mag=It[kr.magFilter],dr.min=Ut[kr.minFilter],dr.wrapS=Jt[kr.wrapS],dr.wrapT=Jt[kr.wrapT],mr=0;mr<6;++mr)oa(Ke[mr]);return dr}function gr($e,ir,we,Ye,me){ct(!!ir,"must specify image data"),ct(typeof $e=="number"&&$e===($e|0)&&$e>=0&&$e<6,"invalid face");var lr=we|0,mr=Ye|0,kr=me|0,Ur=tn();return Ne(Ur,oe),Ur.width=0,Ur.height=0,hr(Ur,ir),Ur.width=Ur.width||(oe.width>>kr)-lr,Ur.height=Ur.height||(oe.height>>kr)-mr,ct(oe.type===Ur.type&&oe.format===Ur.format&&oe.internalformat===Ur.internalformat,"incompatible format for texture.subimage"),ct(lr>=0&&mr>=0&&lr+Ur.width<=oe.width&&mr+Ur.height<=oe.height,"texture.subimage write out of bounds"),ct(oe.mipmask&1<<kr,"missing mipmap data"),ct(Ur.data||Ur.element||Ur.needsCopy,"missing image data"),Wa(oe),Xr(Ur,eo+$e,lr,mr,kr),Ii(),Tn(Ur),dr}function Qe($e){var ir=$e|0;if(ir!==oe.width){dr.width=oe.width=ir,dr.height=oe.height=ir,Wa(oe);for(var we=0;we<6;++we)for(var Ye=0;oe.mipmask>>Ye;++Ye)Ct.texImage2D(eo+we,Ye,oe.format,ir>>Ye,ir>>Ye,0,oe.format,oe.type,null);return Ii(),Ar.profile&&(oe.stats.size=Ta(oe.internalformat,oe.type,dr.width,dr.height,!1,!0)),dr}}return dr(ke,Sr,xr,En,si,Se),dr.subimage=gr,dr.resize=Qe,dr._reglType="textureCube",dr._texture=oe,Ar.profile&&(dr.stats=oe.stats),dr.destroy=function(){oe.decRef()},dr}function ha(){for(var ke=0;ke<za;++ke)Ct.activeTexture(Xu+ke),Ct.bindTexture(aa,null),_a[ke]=null;ta(Sa).forEach(Vn),br.cubeCount=0,br.textureCount=0}Ar.profile&&(br.getTotalTextureSize=function(){var ke=0;return Object.keys(Sa).forEach(function(Sr){ke+=Sa[Sr].stats.size}),ke});function vu(){for(var ke=0;ke<za;++ke){var Sr=_a[ke];Sr&&(Sr.bindCount=0,Sr.unit=-1,_a[ke]=null)}ta(Sa).forEach(function(xr){xr.texture=Ct.createTexture(),Ct.bindTexture(xr.target,xr.texture);for(var En=0;En<32;++En)if(xr.mipmask&1<<En)if(xr.target===aa)Ct.texImage2D(aa,En,xr.internalformat,xr.width>>En,xr.height>>En,0,xr.internalformat,xr.type,null);else for(var si=0;si<6;++si)Ct.texImage2D(eo+si,En,xr.internalformat,xr.width>>En,xr.height>>En,0,xr.internalformat,xr.type,null);Qi(xr.texInfo,xr.target)})}function Qf(){for(var ke=0;ke<za;++ke){var Sr=_a[ke];Sr&&(Sr.bindCount=0,Sr.unit=-1,_a[ke]=null),Ct.activeTexture(Xu+ke),Ct.bindTexture(aa,null),Ct.bindTexture(uo,null)}}return{create2D:ci,createCube:yi,clear:ha,getTexture:function(ke){return null},restore:vu,refresh:Qf}}var bn=36161,Nf=32854,Ei=32855,ul=36194,Jl=33189,Hu=36168,ql=34041,uc=35907,Lh=34836,th=34842,kh=34843,ws=[];ws[Nf]=2,ws[Ei]=2,ws[ul]=2,ws[Jl]=2,ws[Hu]=1,ws[ql]=4,ws[uc]=4,ws[Lh]=16,ws[th]=8,ws[kh]=6;function Rh(Ct,fe,ze){return ws[Ct]*fe*ze}var fc=function(Ct,fe,ze,wr,Rr){var br={rgba4:Nf,rgb565:ul,"rgb5 a1":Ei,depth:Jl,stencil:Hu,"depth stencil":ql};fe.ext_srgb&&(br.srgba=uc),fe.ext_color_buffer_half_float&&(br.rgba16f=th,br.rgb16f=kh),fe.webgl_color_buffer_float&&(br.rgba32f=Lh);var Ar=[];Object.keys(br).forEach(function(L){var j=br[L];Ar[j]=L});var jr=0,Hr={};function Kr(L){this.id=jr++,this.refCount=1,this.renderbuffer=L,this.format=Nf,this.width=0,this.height=0,Rr.profile&&(this.stats={size:0})}Kr.prototype.decRef=function(){--this.refCount<=0&&Vr(this)};function Vr(L){var j=L.renderbuffer;ct(j,"must not double destroy renderbuffer"),Ct.bindRenderbuffer(bn,null),Ct.deleteRenderbuffer(j),L.renderbuffer=null,L.refCount=0,delete Hr[L.id],wr.renderbufferCount--}function Qr(L,j){var q=new Kr(Ct.createRenderbuffer());Hr[q.id]=q,wr.renderbufferCount++;function ht(_t,It){var Ut=0,Jt=0,ue=Nf;if(typeof _t=="object"&&_t){var ae=_t;if("shape"in ae){var Ne=ae.shape;ct(Array.isArray(Ne)&&Ne.length>=2,"invalid renderbuffer shape"),Ut=Ne[0]|0,Jt=Ne[1]|0}else"radius"in ae&&(Ut=Jt=ae.radius|0),"width"in ae&&(Ut=ae.width|0),"height"in ae&&(Jt=ae.height|0);"format"in ae&&(ct.parameter(ae.format,br,"invalid renderbuffer format"),ue=br[ae.format])}else typeof _t=="number"?(Ut=_t|0,typeof It=="number"?Jt=It|0:Jt=Ut):_t?ct.raise("invalid arguments to renderbuffer constructor"):Ut=Jt=1;if(ct(Ut>0&&Jt>0&&Ut<=ze.maxRenderbufferSize&&Jt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),!(Ut===q.width&&Jt===q.height&&ue===q.format))return ht.width=q.width=Ut,ht.height=q.height=Jt,q.format=ue,Ct.bindRenderbuffer(bn,q.renderbuffer),Ct.renderbufferStorage(bn,ue,Ut,Jt),ct(Ct.getError()===0,"invalid render buffer format"),Rr.profile&&(q.stats.size=Rh(q.format,q.width,q.height)),ht.format=Ar[q.format],ht}function gt(_t,It){var Ut=_t|0,Jt=It|0||Ut;return Ut===q.width&&Jt===q.height||(ct(Ut>0&&Jt>0&&Ut<=ze.maxRenderbufferSize&&Jt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),ht.width=q.width=Ut,ht.height=q.height=Jt,Ct.bindRenderbuffer(bn,q.renderbuffer),Ct.renderbufferStorage(bn,q.format,Ut,Jt),ct(Ct.getError()===0,"invalid render buffer format"),Rr.profile&&(q.stats.size=Rh(q.format,q.width,q.height))),ht}return ht(L,j),ht.resize=gt,ht._reglType="renderbuffer",ht._renderbuffer=q,Rr.profile&&(ht.stats=q.stats),ht.destroy=function(){q.decRef()},ht}Rr.profile&&(wr.getTotalRenderbufferSize=function(){var L=0;return Object.keys(Hr).forEach(function(j){L+=Hr[j].stats.size}),L});function d(){ta(Hr).forEach(function(L){L.renderbuffer=Ct.createRenderbuffer(),Ct.bindRenderbuffer(bn,L.renderbuffer),Ct.renderbufferStorage(bn,L.format,L.width,L.height)}),Ct.bindRenderbuffer(bn,null)}return{create:Qr,clear:function(){ta(Hr).forEach(Vr)},restore:d}},ea=36160,cc=36161,Ss=3553,Lf=34069,eh=36064,Bh=36096,iu=36128,fl=33306,is=36053,Zu=36054,lc=36055,hc=36057,_s=36061,as=36193,cl=5121,So=5126,dc=6407,au=6408,ll=6402,rh=[dc,au],vc=[];vc[au]=4,vc[dc]=3;var kf=[];kf[cl]=1,kf[So]=4,kf[as]=2;var Gi=32854,Rs=32855,os=36194,No=33189,Bs=36168,wu=34041,Gs=35907,Rf=34836,ou=34842,Ku=34843,Su=[Gi,Rs,os,Gs,ou,Ku,Rf],ss={};ss[is]="complete",ss[Zu]="incomplete attachment",ss[hc]="incomplete dimensions",ss[lc]="incomplete, missing attachment",ss[_s]="unsupported";function hl(Ct,fe,ze,wr,Rr,br){var Ar={cur:null,next:null,dirty:!1,setFBO:null},jr=["rgba"],Hr=["rgba4","rgb565","rgb5 a1"];fe.ext_srgb&&Hr.push("srgba"),fe.ext_color_buffer_half_float&&Hr.push("rgba16f","rgb16f"),fe.webgl_color_buffer_float&&Hr.push("rgba32f");var Kr=["uint8"];fe.oes_texture_half_float&&Kr.push("half float","float16"),fe.oes_texture_float&&Kr.push("float","float32");function Vr(ur,hr,fr){this.target=ur,this.texture=hr,this.renderbuffer=fr;var Xr=0,fn=0;hr?(Xr=hr.width,fn=hr.height):fr&&(Xr=fr.width,fn=fr.height),this.width=Xr,this.height=fn}function Qr(ur){ur&&(ur.texture&&ur.texture._texture.decRef(),ur.renderbuffer&&ur.renderbuffer._renderbuffer.decRef())}function d(ur,hr,fr){if(ur)if(ur.texture){var Xr=ur.texture._texture,fn=Math.max(1,Xr.width),tn=Math.max(1,Xr.height);ct(fn===hr&&tn===fr,"inconsistent width/height for supplied texture"),Xr.refCount+=1}else{var Tn=ur.renderbuffer._renderbuffer;ct(Tn.width===hr&&Tn.height===fr,"inconsistent width/height for renderbuffer"),Tn.refCount+=1}}function L(ur,hr){hr&&(hr.texture?Ct.framebufferTexture2D(ea,ur,hr.target,hr.texture._texture.texture,0):Ct.framebufferRenderbuffer(ea,ur,cc,hr.renderbuffer._renderbuffer.renderbuffer))}function j(ur){var hr=Ss,fr=null,Xr=null,fn=ur;typeof ur=="object"&&(fn=ur.data,"target"in ur&&(hr=ur.target|0)),ct.type(fn,"function","invalid attachment data");var tn=fn._reglType;return tn==="texture2d"?(fr=fn,ct(hr===Ss)):tn==="textureCube"?(fr=fn,ct(hr>=Lf&&hr<Lf+6,"invalid cube map target")):tn==="renderbuffer"?(Xr=fn,hr=cc):ct.raise("invalid regl object for attachment"),new Vr(hr,fr,Xr)}function q(ur,hr,fr,Xr,fn){if(fr){var tn=wr.create2D({width:ur,height:hr,format:Xr,type:fn});return tn._texture.refCount=0,new Vr(Ss,tn,null)}else{var Tn=Rr.create({width:ur,height:hr,format:Xr});return Tn._renderbuffer.refCount=0,new Vr(cc,null,Tn)}}function ht(ur){return ur&&(ur.texture||ur.renderbuffer)}function gt(ur,hr,fr){ur&&(ur.texture?ur.texture.resize(hr,fr):ur.renderbuffer&&ur.renderbuffer.resize(hr,fr),ur.width=hr,ur.height=fr)}var _t=0,It={};function Ut(){this.id=_t++,It[this.id]=this,this.framebuffer=Ct.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Jt(ur){ur.colorAttachments.forEach(Qr),Qr(ur.depthAttachment),Qr(ur.stencilAttachment),Qr(ur.depthStencilAttachment)}function ue(ur){var hr=ur.framebuffer;ct(hr,"must not double destroy framebuffer"),Ct.deleteFramebuffer(hr),ur.framebuffer=null,br.framebufferCount--,delete It[ur.id]}function ae(ur){var hr;Ct.bindFramebuffer(ea,ur.framebuffer);var fr=ur.colorAttachments;for(hr=0;hr<fr.length;++hr)L(eh+hr,fr[hr]);for(hr=fr.length;hr<ze.maxColorAttachments;++hr)Ct.framebufferTexture2D(ea,eh+hr,Ss,null,0);Ct.framebufferTexture2D(ea,fl,Ss,null,0),Ct.framebufferTexture2D(ea,Bh,Ss,null,0),Ct.framebufferTexture2D(ea,iu,Ss,null,0),L(Bh,ur.depthAttachment),L(iu,ur.stencilAttachment),L(fl,ur.depthStencilAttachment);var Xr=Ct.checkFramebufferStatus(ea);!Ct.isContextLost()&&Xr!==is&&ct.raise("framebuffer configuration not supported, status = "+ss[Xr]),Ct.bindFramebuffer(ea,Ar.next?Ar.next.framebuffer:null),Ar.cur=Ar.next,Ct.getError()}function Ne(ur,hr){var fr=new Ut;br.framebufferCount++;function Xr(tn,Tn){var wn;ct(Ar.next!==fr,"can not update framebuffer which is currently in use");var Rn=0,Kn=0,Fn=!0,Vi=!0,Qn=null,oa=!0,Di="rgba",ui="uint8",Qi=1,sa=null,Sa=null,za=null,_a=!1;if(typeof tn=="number")Rn=tn|0,Kn=Tn|0||Rn;else if(!tn)Rn=Kn=1;else{ct.type(tn,"object","invalid arguments for framebuffer");var ni=tn;if("shape"in ni){var Wa=ni.shape;ct(Array.isArray(Wa)&&Wa.length>=2,"invalid shape for framebuffer"),Rn=Wa[0],Kn=Wa[1]}else"radius"in ni&&(Rn=Kn=ni.radius),"width"in ni&&(Rn=ni.width),"height"in ni&&(Kn=ni.height);("color"in ni||"colors"in ni)&&(Qn=ni.color||ni.colors,Array.isArray(Qn)&&ct(Qn.length===1||fe.webgl_draw_buffers,"multiple render targets not supported")),Qn||("colorCount"in ni&&(Qi=ni.colorCount|0,ct(Qi>0,"invalid color buffer count")),"colorTexture"in ni&&(oa=!!ni.colorTexture,Di="rgba4"),"colorType"in ni&&(ui=ni.colorType,oa?(ct(fe.oes_texture_float||!(ui==="float"||ui==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ct(fe.oes_texture_half_float||!(ui==="half float"||ui==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ui==="half float"||ui==="float16"?(ct(fe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Di="rgba16f"):(ui==="float"||ui==="float32")&&(ct(fe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Di="rgba32f"),ct.oneOf(ui,Kr,"invalid color type")),"colorFormat"in ni&&(Di=ni.colorFormat,jr.indexOf(Di)>=0?oa=!0:Hr.indexOf(Di)>=0?oa=!1:oa?ct.oneOf(ni.colorFormat,jr,"invalid color format for texture"):ct.oneOf(ni.colorFormat,Hr,"invalid color format for renderbuffer"))),("depthTexture"in ni||"depthStencilTexture"in ni)&&(_a=!!(ni.depthTexture||ni.depthStencilTexture),ct(!_a||fe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ni&&(typeof ni.depth=="boolean"?Fn=ni.depth:(sa=ni.depth,Vi=!1)),"stencil"in ni&&(typeof ni.stencil=="boolean"?Vi=ni.stencil:(Sa=ni.stencil,Fn=!1)),"depthStencil"in ni&&(typeof ni.depthStencil=="boolean"?Fn=Vi=ni.depthStencil:(za=ni.depthStencil,Fn=!1,Vi=!1))}var Ii=null,Vn=null,ci=null,yi=null;if(Array.isArray(Qn))Ii=Qn.map(j);else if(Qn)Ii=[j(Qn)];else for(Ii=new Array(Qi),wn=0;wn<Qi;++wn)Ii[wn]=q(Rn,Kn,oa,Di,ui);ct(fe.webgl_draw_buffers||Ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ct(Ii.length<=ze.maxColorAttachments,"too many color attachments, not supported"),Rn=Rn||Ii[0].width,Kn=Kn||Ii[0].height,sa?Vn=j(sa):Fn&&!Vi&&(Vn=q(Rn,Kn,_a,"depth","uint32")),Sa?ci=j(Sa):Vi&&!Fn&&(ci=q(Rn,Kn,!1,"stencil","uint8")),za?yi=j(za):!sa&&!Sa&&Vi&&Fn&&(yi=q(Rn,Kn,_a,"depth stencil","depth stencil")),ct(!!sa+!!Sa+!!za<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ha=null;for(wn=0;wn<Ii.length;++wn)if(d(Ii[wn],Rn,Kn),ct(!Ii[wn]||Ii[wn].texture&&rh.indexOf(Ii[wn].texture._texture.format)>=0||Ii[wn].renderbuffer&&Su.indexOf(Ii[wn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+wn+" is invalid"),Ii[wn]&&Ii[wn].texture){var vu=vc[Ii[wn].texture._texture.format]*kf[Ii[wn].texture._texture.type];ha===null?ha=vu:ct(ha===vu,"all color attachments much have the same number of bits per pixel.")}return d(Vn,Rn,Kn),ct(!Vn||Vn.texture&&Vn.texture._texture.format===ll||Vn.renderbuffer&&Vn.renderbuffer._renderbuffer.format===No,"invalid depth attachment for framebuffer object"),d(ci,Rn,Kn),ct(!ci||ci.renderbuffer&&ci.renderbuffer._renderbuffer.format===Bs,"invalid stencil attachment for framebuffer object"),d(yi,Rn,Kn),ct(!yi||yi.texture&&yi.texture._texture.format===wu||yi.renderbuffer&&yi.renderbuffer._renderbuffer.format===wu,"invalid depth-stencil attachment for framebuffer object"),Jt(fr),fr.width=Rn,fr.height=Kn,fr.colorAttachments=Ii,fr.depthAttachment=Vn,fr.stencilAttachment=ci,fr.depthStencilAttachment=yi,Xr.color=Ii.map(ht),Xr.depth=ht(Vn),Xr.stencil=ht(ci),Xr.depthStencil=ht(yi),Xr.width=fr.width,Xr.height=fr.height,ae(fr),Xr}function fn(tn,Tn){ct(Ar.next!==fr,"can not resize a framebuffer which is currently in use");var wn=Math.max(tn|0,1),Rn=Math.max(Tn|0||wn,1);if(wn===fr.width&&Rn===fr.height)return Xr;for(var Kn=fr.colorAttachments,Fn=0;Fn<Kn.length;++Fn)gt(Kn[Fn],wn,Rn);return gt(fr.depthAttachment,wn,Rn),gt(fr.stencilAttachment,wn,Rn),gt(fr.depthStencilAttachment,wn,Rn),fr.width=Xr.width=wn,fr.height=Xr.height=Rn,ae(fr),Xr}return Xr(ur,hr),M(Xr,{resize:fn,_reglType:"framebuffer",_framebuffer:fr,destroy:function(){ue(fr),Jt(fr)},use:function(tn){Ar.setFBO({framebuffer:Xr},tn)}})}function er(ur){var hr=Array(6);function fr(fn){var tn;ct(hr.indexOf(Ar.next)<0,"can not update framebuffer which is currently in use");var Tn={color:null},wn=0,Rn=null,Kn="rgba",Fn="uint8",Vi=1;if(typeof fn=="number")wn=fn|0;else if(!fn)wn=1;else{ct.type(fn,"object","invalid arguments for framebuffer");var Qn=fn;if("shape"in Qn){var oa=Qn.shape;ct(Array.isArray(oa)&&oa.length>=2,"invalid shape for framebuffer"),ct(oa[0]===oa[1],"cube framebuffer must be square"),wn=oa[0]}else"radius"in Qn&&(wn=Qn.radius|0),"width"in Qn?(wn=Qn.width|0,"height"in Qn&&ct(Qn.height===wn,"must be square")):"height"in Qn&&(wn=Qn.height|0);("color"in Qn||"colors"in Qn)&&(Rn=Qn.color||Qn.colors,Array.isArray(Rn)&&ct(Rn.length===1||fe.webgl_draw_buffers,"multiple render targets not supported")),Rn||("colorCount"in Qn&&(Vi=Qn.colorCount|0,ct(Vi>0,"invalid color buffer count")),"colorType"in Qn&&(ct.oneOf(Qn.colorType,Kr,"invalid color type"),Fn=Qn.colorType),"colorFormat"in Qn&&(Kn=Qn.colorFormat,ct.oneOf(Qn.colorFormat,jr,"invalid color format for texture"))),"depth"in Qn&&(Tn.depth=Qn.depth),"stencil"in Qn&&(Tn.stencil=Qn.stencil),"depthStencil"in Qn&&(Tn.depthStencil=Qn.depthStencil)}var Di;if(Rn)if(Array.isArray(Rn))for(Di=[],tn=0;tn<Rn.length;++tn)Di[tn]=Rn[tn];else Di=[Rn];else{Di=Array(Vi);var ui={radius:wn,format:Kn,type:Fn};for(tn=0;tn<Vi;++tn)Di[tn]=wr.createCube(ui)}for(Tn.color=Array(Di.length),tn=0;tn<Di.length;++tn){var Qi=Di[tn];ct(typeof Qi=="function"&&Qi._reglType==="textureCube","invalid cube map"),wn=wn||Qi.width,ct(Qi.width===wn&&Qi.height===wn,"invalid cube map shape"),Tn.color[tn]={target:Lf,data:Di[tn]}}for(tn=0;tn<6;++tn){for(var sa=0;sa<Di.length;++sa)Tn.color[sa].target=Lf+tn;tn>0&&(Tn.depth=hr[0].depth,Tn.stencil=hr[0].stencil,Tn.depthStencil=hr[0].depthStencil),hr[tn]?hr[tn](Tn):hr[tn]=Ne(Tn)}return M(fr,{width:wn,height:wn,color:Di})}function Xr(fn){var tn,Tn=fn|0;if(ct(Tn>0&&Tn<=ze.maxCubeMapSize,"invalid radius for cube fbo"),Tn===fr.width)return fr;var wn=fr.color;for(tn=0;tn<wn.length;++tn)wn[tn].resize(Tn);for(tn=0;tn<6;++tn)hr[tn].resize(Tn);return fr.width=fr.height=Tn,fr}return fr(ur),M(fr,{faces:hr,resize:Xr,_reglType:"framebufferCube",destroy:function(){hr.forEach(function(fn){fn.destroy()})}})}function Pr(){Ar.cur=null,Ar.next=null,Ar.dirty=!0,ta(It).forEach(function(ur){ur.framebuffer=Ct.createFramebuffer(),ae(ur)})}return M(Ar,{getFramebuffer:function(ur){if(typeof ur=="function"&&ur._reglType==="framebuffer"){var hr=ur._framebuffer;if(hr instanceof Ut)return hr}return null},create:Ne,createCube:er,clear:function(){ta(It).forEach(ue)},restore:Pr})}var Fs=5126,an=34962;function Bf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Fs,this.offset=0,this.stride=0,this.divisor=0}function Gh(Ct,fe,ze,wr,Rr){for(var br=ze.maxAttributes,Ar=new Array(br),jr=0;jr<br;++jr)Ar[jr]=new Bf;var Hr=0,Kr={},Vr={Record:Bf,scope:{},state:Ar,currentVAO:null,targetVAO:null,restore:d()?It:function(){},createVAO:Ut,getVAO:j,destroyBuffer:Qr,setVAO:d()?q:ht,clear:d()?gt:function(){}};function Qr(Jt){for(var ue=0;ue<Ar.length;++ue){var ae=Ar[ue];ae.buffer===Jt&&(Ct.disableVertexAttribArray(ue),ae.buffer=null)}}function d(){return fe.oes_vertex_array_object}function L(){return fe.angle_instanced_arrays}function j(Jt){return typeof Jt=="function"&&Jt._vao?Jt._vao:null}function q(Jt){if(Jt!==Vr.currentVAO){var ue=d();Jt?ue.bindVertexArrayOES(Jt.vao):ue.bindVertexArrayOES(null),Vr.currentVAO=Jt}}function ht(Jt){if(Jt!==Vr.currentVAO){if(Jt)Jt.bindAttrs();else for(var ue=L(),ae=0;ae<Ar.length;++ae){var Ne=Ar[ae];Ne.buffer?(Ct.enableVertexAttribArray(ae),Ct.vertexAttribPointer(ae,Ne.size,Ne.type,Ne.normalized,Ne.stride,Ne.offfset),ue&&Ne.divisor&&ue.vertexAttribDivisorANGLE(ae,Ne.divisor)):(Ct.disableVertexAttribArray(ae),Ct.vertexAttrib4f(ae,Ne.x,Ne.y,Ne.z,Ne.w))}Vr.currentVAO=Jt}}function gt(){ta(Kr).forEach(function(Jt){Jt.destroy()})}function _t(){this.id=++Hr,this.attributes=[];var Jt=d();Jt?this.vao=Jt.createVertexArrayOES():this.vao=null,Kr[this.id]=this,this.buffers=[]}_t.prototype.bindAttrs=function(){for(var Jt=L(),ue=this.attributes,ae=0;ae<ue.length;++ae){var Ne=ue[ae];Ne.buffer?(Ct.enableVertexAttribArray(ae),Ct.bindBuffer(an,Ne.buffer.buffer),Ct.vertexAttribPointer(ae,Ne.size,Ne.type,Ne.normalized,Ne.stride,Ne.offset),Jt&&Ne.divisor&&Jt.vertexAttribDivisorANGLE(ae,Ne.divisor)):(Ct.disableVertexAttribArray(ae),Ct.vertexAttrib4f(ae,Ne.x,Ne.y,Ne.z,Ne.w))}for(var er=ue.length;er<br;++er)Ct.disableVertexAttribArray(er)},_t.prototype.refresh=function(){var Jt=d();Jt&&(Jt.bindVertexArrayOES(this.vao),this.bindAttrs(),Vr.currentVAO=this)},_t.prototype.destroy=function(){if(this.vao){var Jt=d();this===Vr.currentVAO&&(Vr.currentVAO=null,Jt.bindVertexArrayOES(null)),Jt.deleteVertexArrayOES(this.vao),this.vao=null}Kr[this.id]&&(delete Kr[this.id],wr.vaoCount-=1)};function It(){var Jt=d();Jt&&ta(Kr).forEach(function(ue){ue.refresh()})}function Ut(Jt){var ue=new _t;wr.vaoCount+=1;function ae(Ne){ct(Array.isArray(Ne),"arguments to vertex array constructor must be an array"),ct(Ne.length<br,"too many attributes"),ct(Ne.length>0,"must specify at least one attribute");var er={},Pr=ue.attributes;Pr.length=Ne.length;for(var ur=0;ur<Ne.length;++ur){var hr=Ne[ur],fr=Pr[ur]=new Bf,Xr=hr.data||hr;if(Array.isArray(Xr)||S(Xr)||Ea(Xr)){var fn;ue.buffers[ur]&&(fn=ue.buffers[ur],S(Xr)&&fn._buffer.byteLength>=Xr.byteLength?fn.subdata(Xr):(fn.destroy(),ue.buffers[ur]=null)),ue.buffers[ur]||(fn=ue.buffers[ur]=Rr.create(hr,an,!1,!0)),fr.buffer=Rr.getBuffer(fn),fr.size=fr.buffer.dimension|0,fr.normalized=!1,fr.type=fr.buffer.dtype,fr.offset=0,fr.stride=0,fr.divisor=0,fr.state=1,er[ur]=1}else Rr.getBuffer(hr)?(fr.buffer=Rr.getBuffer(hr),fr.size=fr.buffer.dimension|0,fr.normalized=!1,fr.type=fr.buffer.dtype,fr.offset=0,fr.stride=0,fr.divisor=0,fr.state=1):Rr.getBuffer(hr.buffer)?(fr.buffer=Rr.getBuffer(hr.buffer),fr.size=(+hr.size||fr.buffer.dimension)|0,fr.normalized=!!hr.normalized||!1,"type"in hr?(ct.parameter(hr.type,Xa,"invalid buffer type"),fr.type=Xa[hr.type]):fr.type=fr.buffer.dtype,fr.offset=(hr.offset||0)|0,fr.stride=(hr.stride||0)|0,fr.divisor=(hr.divisor||0)|0,fr.state=1,ct(fr.size>=1&&fr.size<=4,"size must be between 1 and 4"),ct(fr.offset>=0,"invalid offset"),ct(fr.stride>=0&&fr.stride<=255,"stride must be between 0 and 255"),ct(fr.divisor>=0,"divisor must be positive"),ct(!fr.divisor||!!fe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in hr?(ct(ur>0,"first attribute must not be a constant"),fr.x=+hr.x||0,fr.y=+hr.y||0,fr.z=+hr.z||0,fr.w=+hr.w||0,fr.state=2):ct(!1,"invalid attribute spec for location "+ur)}for(var tn=0;tn<ue.buffers.length;++tn)!er[tn]&&ue.buffers[tn]&&(ue.buffers[tn].destroy(),ue.buffers[tn]=null);return ue.refresh(),ae}return ae.destroy=function(){for(var Ne=0;Ne<ue.buffers.length;++Ne)ue.buffers[Ne]&&ue.buffers[Ne].destroy();ue.buffers.length=0,ue.destroy()},ae._vao=ue,ae._reglType="vao",ae(Jt)}return Vr}var Gf=35632,Fh=35633,Uh=35718,pc=35721;function dl(Ct,fe,ze,wr){var Rr={},br={};function Ar(q,ht,gt,_t){this.name=q,this.id=ht,this.location=gt,this.info=_t}function jr(q,ht){for(var gt=0;gt<q.length;++gt)if(q[gt].id===ht.id){q[gt].location=ht.location;return}q.push(ht)}function Hr(q,ht,gt){var _t=q===Gf?Rr:br,It=_t[ht];if(!It){var Ut=fe.str(ht);It=Ct.createShader(q),Ct.shaderSource(It,Ut),Ct.compileShader(It),ct.shaderError(Ct,It,Ut,q,gt),_t[ht]=It}return It}var Kr={},Vr=[],Qr=0;function d(q,ht){this.id=Qr++,this.fragId=q,this.vertId=ht,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,wr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function L(q,ht,gt){var _t,It,Ut=Hr(Gf,q.fragId),Jt=Hr(Fh,q.vertId),ue=q.program=Ct.createProgram();if(Ct.attachShader(ue,Ut),Ct.attachShader(ue,Jt),gt)for(_t=0;_t<gt.length;++_t){var ae=gt[_t];Ct.bindAttribLocation(ue,ae[0],ae[1])}Ct.linkProgram(ue),ct.linkError(Ct,ue,fe.str(q.fragId),fe.str(q.vertId),ht);var Ne=Ct.getProgramParameter(ue,Uh);wr.profile&&(q.stats.uniformsCount=Ne);var er=q.uniforms;for(_t=0;_t<Ne;++_t)if(It=Ct.getActiveUniform(ue,_t),It)if(It.size>1)for(var Pr=0;Pr<It.size;++Pr){var ur=It.name.replace("[0]","["+Pr+"]");jr(er,new Ar(ur,fe.id(ur),Ct.getUniformLocation(ue,ur),It))}else jr(er,new Ar(It.name,fe.id(It.name),Ct.getUniformLocation(ue,It.name),It));var hr=Ct.getProgramParameter(ue,pc);wr.profile&&(q.stats.attributesCount=hr);var fr=q.attributes;for(_t=0;_t<hr;++_t)It=Ct.getActiveAttrib(ue,_t),It&&jr(fr,new Ar(It.name,fe.id(It.name),Ct.getAttribLocation(ue,It.name),It))}wr.profile&&(ze.getMaxUniformsCount=function(){var q=0;return Vr.forEach(function(ht){ht.stats.uniformsCount>q&&(q=ht.stats.uniformsCount)}),q},ze.getMaxAttributesCount=function(){var q=0;return Vr.forEach(function(ht){ht.stats.attributesCount>q&&(q=ht.stats.attributesCount)}),q});function j(){Rr={},br={};for(var q=0;q<Vr.length;++q)L(Vr[q],null,Vr[q].attributes.map(function(ht){return[ht.location,ht.name]}))}return{clear:function(){var q=Ct.deleteShader.bind(Ct);ta(Rr).forEach(q),Rr={},ta(br).forEach(q),br={},Vr.forEach(function(ht){Ct.deleteProgram(ht.program)}),Vr.length=0,Kr={},ze.shaderCount=0},program:function(q,ht,gt,_t){ct.command(q>=0,"missing vertex shader",gt),ct.command(ht>=0,"missing fragment shader",gt);var It=Kr[ht];It||(It=Kr[ht]={});var Ut=It[q];if(Ut&&(Ut.refCount++,!_t))return Ut;var Jt=new d(ht,q);return ze.shaderCount++,L(Jt,gt,_t),Ut||(It[q]=Jt),Vr.push(Jt),M(Jt,{destroy:function(){if(Jt.refCount--,Jt.refCount<=0){Ct.deleteProgram(Jt.program);var ue=Vr.indexOf(Jt);Vr.splice(ue,1),ze.shaderCount--}It[Jt.vertId].refCount<=0&&(Ct.deleteShader(br[Jt.vertId]),delete br[Jt.vertId],delete Kr[Jt.fragId][Jt.vertId]),Object.keys(Kr[Jt.fragId]).length||(Ct.deleteShader(Rr[Jt.fragId]),delete Rr[Jt.fragId],delete Kr[Jt.fragId])}})},restore:j,shader:Hr,frag:-1,vert:-1}}var nh=6408,Us=5121,_u=3333,Mu=5126;function $u(Ct,fe,ze,wr,Rr,br,Ar){function jr(Vr){var Qr;fe.next===null?(ct(Rr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Qr=Us):(ct(fe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Qr=fe.next.colorAttachments[0].texture._texture.type,br.oes_texture_float?(ct(Qr===Us||Qr===Mu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Qr===Mu&&ct(Ar.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ct(Qr===Us,"Reading from a framebuffer is only allowed for the type 'uint8'"));var d=0,L=0,j=wr.framebufferWidth,q=wr.framebufferHeight,ht=null;S(Vr)?ht=Vr:Vr&&(ct.type(Vr,"object","invalid arguments to regl.read()"),d=Vr.x|0,L=Vr.y|0,ct(d>=0&&d<wr.framebufferWidth,"invalid x offset for regl.read"),ct(L>=0&&L<wr.framebufferHeight,"invalid y offset for regl.read"),j=(Vr.width||wr.framebufferWidth-d)|0,q=(Vr.height||wr.framebufferHeight-L)|0,ht=Vr.data||null),ht&&(Qr===Us?ct(ht instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Qr===Mu&&ct(ht instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ct(j>0&&j+d<=wr.framebufferWidth,"invalid width for read pixels"),ct(q>0&&q+L<=wr.framebufferHeight,"invalid height for read pixels"),ze();var gt=j*q*4;return ht||(Qr===Us?ht=new Uint8Array(gt):Qr===Mu&&(ht=ht||new Float32Array(gt))),ct.isTypedArray(ht,"data buffer for regl.read() must be a typedarray"),ct(ht.byteLength>=gt,"data buffer for regl.read() too small"),Ct.pixelStorei(_u,4),Ct.readPixels(d,L,j,q,nh,Qr,ht),ht}function Hr(Vr){var Qr;return fe.setFBO({framebuffer:Vr.framebuffer},function(){Qr=jr(Vr)}),Qr}function Kr(Vr){return!Vr||!("framebuffer"in Vr)?jr(Vr):Hr(Vr)}return Kr}function Ms(Ct){return Array.prototype.slice.call(Ct)}function lo(Ct){return Ms(Ct).join("")}function ih(){var Ct=0,fe=[],ze=[];function wr(Qr){for(var d=0;d<ze.length;++d)if(ze[d]===Qr)return fe[d];var L="g"+Ct++;return fe.push(L),ze.push(Qr),L}function Rr(){var Qr=[];function d(){Qr.push.apply(Qr,Ms(arguments))}var L=[];function j(){var q="v"+Ct++;return L.push(q),arguments.length>0&&(Qr.push(q,"="),Qr.push.apply(Qr,Ms(arguments)),Qr.push(";")),q}return M(d,{def:j,toString:function(){return lo([L.length>0?"var "+L.join(",")+";":"",lo(Qr)])}})}function br(){var Qr=Rr(),d=Rr(),L=Qr.toString,j=d.toString;function q(ht,gt){d(ht,gt,"=",Qr.def(ht,gt),";")}return M(function(){Qr.apply(Qr,Ms(arguments))},{def:Qr.def,entry:Qr,exit:d,save:q,set:function(ht,gt,_t){q(ht,gt),Qr(ht,gt,"=",_t,";")},toString:function(){return L()+j()}})}function Ar(){var Qr=lo(arguments),d=br(),L=br(),j=d.toString,q=L.toString;return M(d,{then:function(){return d.apply(d,Ms(arguments)),this},else:function(){return L.apply(L,Ms(arguments)),this},toString:function(){var ht=q();return ht&&(ht="else{"+ht+"}"),lo(["if(",Qr,"){",j(),"}",ht])}})}var jr=Rr(),Hr={};function Kr(Qr,d){var L=[];function j(){var It="a"+L.length;return L.push(It),It}d=d||0;for(var q=0;q<d;++q)j();var ht=br(),gt=ht.toString,_t=Hr[Qr]=M(ht,{arg:j,toString:function(){return lo(["function(",L.join(),"){",gt(),"}"])}});return _t}function Vr(){var Qr=['"use strict";',jr,"return {"];Object.keys(Hr).forEach(function(j){Qr.push('"',j,'":',Hr[j].toString(),",")}),Qr.push("}");var d=lo(Qr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),L=Function.apply(null,fe.concat(d));return L.apply(null,ze)}return{global:jr,link:wr,block:Rr,proc:Kr,scope:br,cond:Ar,compile:Vr}}var Qu="xyzw".split(""),ah=5121,Ju=1,vl=2,pl=0,gl=1,gc=2,yc=3,mc=4,yl=5,qu=6,ml="dither",Ff="blend.enable",oh="blend.color",tf="blend.equation",gi="blend.func",sh="depth.enable",bl="depth.func",bc="depth.range",ef="depth.mask",Ec="colorMask",Ze="cull.enable",$o="cull.face",zs="frontFace",rf="lineWidth",El="polygonOffset.enable",xc="polygonOffset.offset",Cu="sample.alpha",wc="sample.enable",nf="sample.coverage",Sc="stencil.enable",_c="stencil.mask",af="stencil.func",la="stencil.opFront",su="stencil.opBack",xl="scissor.enable",Uf="scissor.box",Lo="viewport",uu="profile",fu="framebuffer",Cs="vert",cu="frag",As="elements",lu="primitive",Ts="count",Au="offset",zf="instances",of="vao",Mc="Width",us="Height",Tu=fu+Mc,ko=fu+us,Cc=Lo+Mc,Ac=Lo+us,Iu="drawingBuffer",Tc=Iu+Mc,Qo=Iu+us,Ic=[gi,tf,af,la,su,nf,Lo,Uf,xc],Pu=34962,uh=34963,fs=35632,sf=35633,cs=3553,Ro=34067,Wf=2884,Is=3042,Bo=3024,Pc=2960,ls=2929,Ws=3089,Ua=32823,hs=32926,Go=32928,Ps=5126,Oc=35664,Vf=35665,uf=35666,wl=5124,Dc=35667,jf=35668,ff=35669,Sl=35670,Ou=35671,Xf=35672,ds=35673,Yf=35674,Jo=35675,cf=35676,Hf=35678,$i=35680,Du=4,Nu=1028,Vs=1029,fh=2304,Zf=2305,zh=32775,ch=32776,Wh=519,Lu=7680,lh=0,hh=1,_l=32774,Vh=513,dh=36160,jh=36064,Qa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},vh=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ku={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ml={frag:fs,vert:sf},ph={cw:fh,ccw:Zf};function Kf(Ct){return Array.isArray(Ct)||S(Ct)||Ea(Ct)}function gh(Ct){return Ct.sort(function(fe,ze){return fe===Lo?-1:ze===Lo?1:fe<ze?-1:1})}function ho(Ct,fe,ze,wr){this.thisDep=Ct,this.contextDep=fe,this.propDep=ze,this.append=wr}function du(Ct){return Ct&&!(Ct.thisDep||Ct.contextDep||Ct.propDep)}function ii(Ct){return new ho(!1,!1,!1,Ct)}function no(Ct,fe){var ze=Ct.type;if(ze===pl){var wr=Ct.data.length;return new ho(!0,wr>=1,wr>=2,fe)}else if(ze===mc){var Rr=Ct.data;return new ho(Rr.thisDep,Rr.contextDep,Rr.propDep,fe)}else{if(ze===yl)return new ho(!1,!1,!1,fe);if(ze===qu){for(var br=!1,Ar=!1,jr=!1,Hr=0;Hr<Ct.data.length;++Hr){var Kr=Ct.data[Hr];if(Kr.type===gl)jr=!0;else if(Kr.type===gc)Ar=!0;else if(Kr.type===yc)br=!0;else if(Kr.type===pl){br=!0;var Vr=Kr.data;Vr>=1&&(Ar=!0),Vr>=2&&(jr=!0)}else Kr.type===mc&&(br=br||Kr.data.thisDep,Ar=Ar||Kr.data.contextDep,jr=jr||Kr.data.propDep)}return new ho(br,Ar,jr,fe)}else return new ho(ze===yc,ze===gc,ze===gl,fe)}}var Nc=new ho(!1,!1,!1,function(){});function Xh(Ct,fe,ze,wr,Rr,br,Ar,jr,Hr,Kr,Vr,Qr,d,L,j){var q=Kr.Record,ht={add:32774,subtract:32778,"reverse subtract":32779};ze.ext_blend_minmax&&(ht.min=zh,ht.max=ch);var gt=ze.angle_instanced_arrays,_t=ze.webgl_draw_buffers,It={dirty:!0,profile:j.profile},Ut={},Jt=[],ue={},ae={};function Ne(Se){return Se.replace(".","_")}function er(Se,oe,Ke){var dr=Ne(Se);Jt.push(Se),Ut[dr]=It[dr]=!!Ke,ue[dr]=oe}function Pr(Se,oe,Ke){var dr=Ne(Se);Jt.push(Se),Array.isArray(Ke)?(It[dr]=Ke.slice(),Ut[dr]=Ke.slice()):It[dr]=Ut[dr]=Ke,ae[dr]=oe}er(ml,Bo),er(Ff,Is),Pr(oh,"blendColor",[0,0,0,0]),Pr(tf,"blendEquationSeparate",[_l,_l]),Pr(gi,"blendFuncSeparate",[hh,lh,hh,lh]),er(sh,ls,!0),Pr(bl,"depthFunc",Vh),Pr(bc,"depthRange",[0,1]),Pr(ef,"depthMask",!0),Pr(Ec,Ec,[!0,!0,!0,!0]),er(Ze,Wf),Pr($o,"cullFace",Vs),Pr(zs,zs,Zf),Pr(rf,rf,1),er(El,Ua),Pr(xc,"polygonOffset",[0,0]),er(Cu,hs),er(wc,Go),Pr(nf,"sampleCoverage",[1,!1]),er(Sc,Pc),Pr(_c,"stencilMask",-1),Pr(af,"stencilFunc",[Wh,0,-1]),Pr(la,"stencilOpSeparate",[Nu,Lu,Lu,Lu]),Pr(su,"stencilOpSeparate",[Vs,Lu,Lu,Lu]),er(xl,Ws),Pr(Uf,"scissor",[0,0,Ct.drawingBufferWidth,Ct.drawingBufferHeight]),Pr(Lo,Lo,[0,0,Ct.drawingBufferWidth,Ct.drawingBufferHeight]);var ur={gl:Ct,context:d,strings:fe,next:Ut,current:It,draw:Qr,elements:br,buffer:Rr,shader:Vr,attributes:Kr.state,vao:Kr,uniforms:Hr,framebuffer:jr,extensions:ze,timer:L,isBufferArgs:Kf},hr={primTypes:Ha,compareFuncs:ku,blendFuncs:Qa,blendEquations:ht,stencilOps:hu,glTypes:Xa,orientationType:ph};ct.optional(function(){ur.isArrayLike=Mi}),_t&&(hr.backBuffer=[Vs],hr.drawBuffer=pn(wr.maxDrawbuffers,function(Se){return Se===0?[0]:pn(Se,function(oe){return jh+oe})}));var fr=0;function Xr(){var Se=ih(),oe=Se.link,Ke=Se.global;Se.id=fr++,Se.batchId="0";var dr=oe(ur),gr=Se.shared={props:"a0"};Object.keys(ur).forEach(function(Ye){gr[Ye]=Ke.def(dr,".",Ye)}),ct.optional(function(){Se.CHECK=oe(ct),Se.commandStr=ct.guessCommand(),Se.command=oe(Se.commandStr),Se.assert=function(Ye,me,lr){Ye("if(!(",me,"))",this.CHECK,".commandRaise(",oe(lr),",",this.command,");")},hr.invalidBlendCombinations=vh});var Qe=Se.next={},$e=Se.current={};Object.keys(ae).forEach(function(Ye){Array.isArray(It[Ye])&&(Qe[Ye]=Ke.def(gr.next,".",Ye),$e[Ye]=Ke.def(gr.current,".",Ye))});var ir=Se.constants={};Object.keys(hr).forEach(function(Ye){ir[Ye]=Ke.def(JSON.stringify(hr[Ye]))}),Se.invoke=function(Ye,me){switch(me.type){case pl:var lr=["this",gr.context,gr.props,Se.batchId];return Ye.def(oe(me.data),".call(",lr.slice(0,Math.max(me.data.length+1,4)),")");case gl:return Ye.def(gr.props,me.data);case gc:return Ye.def(gr.context,me.data);case yc:return Ye.def("this",me.data);case mc:return me.data.append(Se,Ye),me.data.ref;case yl:return me.data.toString();case qu:return me.data.map(function(mr){return Se.invoke(Ye,mr)})}},Se.attribCache={};var we={};return Se.scopeAttrib=function(Ye){var me=fe.id(Ye);if(me in we)return we[me];var lr=Kr.scope[me];lr||(lr=Kr.scope[me]=new q);var mr=we[me]=oe(lr);return mr},Se}function fn(Se){var oe=Se.static,Ke=Se.dynamic,dr;if(uu in oe){var gr=!!oe[uu];dr=ii(function($e,ir){return gr}),dr.enable=gr}else if(uu in Ke){var Qe=Ke[uu];dr=no(Qe,function($e,ir){return $e.invoke(ir,Qe)})}return dr}function tn(Se,oe){var Ke=Se.static,dr=Se.dynamic;if(fu in Ke){var gr=Ke[fu];return gr?(gr=jr.getFramebuffer(gr),ct.command(gr,"invalid framebuffer object"),ii(function($e,ir){var we=$e.link(gr),Ye=$e.shared;ir.set(Ye.framebuffer,".next",we);var me=Ye.context;return ir.set(me,"."+Tu,we+".width"),ir.set(me,"."+ko,we+".height"),we})):ii(function($e,ir){var we=$e.shared;ir.set(we.framebuffer,".next","null");var Ye=we.context;return ir.set(Ye,"."+Tu,Ye+"."+Tc),ir.set(Ye,"."+ko,Ye+"."+Qo),"null"})}else if(fu in dr){var Qe=dr[fu];return no(Qe,function($e,ir){var we=$e.invoke(ir,Qe),Ye=$e.shared,me=Ye.framebuffer,lr=ir.def(me,".getFramebuffer(",we,")");ct.optional(function(){$e.assert(ir,"!"+we+"||"+lr,"invalid framebuffer object")}),ir.set(me,".next",lr);var mr=Ye.context;return ir.set(mr,"."+Tu,lr+"?"+lr+".width:"+mr+"."+Tc),ir.set(mr,"."+ko,lr+"?"+lr+".height:"+mr+"."+Qo),lr})}else return null}function Tn(Se,oe,Ke){var dr=Se.static,gr=Se.dynamic;function Qe(we){if(we in dr){var Ye=dr[we];ct.commandType(Ye,"object","invalid "+we,Ke.commandStr);var me=!0,lr=Ye.x|0,mr=Ye.y|0,kr,Ur;return"width"in Ye?(kr=Ye.width|0,ct.command(kr>=0,"invalid "+we,Ke.commandStr)):me=!1,"height"in Ye?(Ur=Ye.height|0,ct.command(Ur>=0,"invalid "+we,Ke.commandStr)):me=!1,new ho(!me&&oe&&oe.thisDep,!me&&oe&&oe.contextDep,!me&&oe&&oe.propDep,function(An,qn){var Mn=An.shared.context,jn=kr;"width"in Ye||(jn=qn.def(Mn,".",Tu,"-",lr));var $n=Ur;return"height"in Ye||($n=qn.def(Mn,".",ko,"-",mr)),[lr,mr,jn,$n]})}else if(we in gr){var Or=gr[we],qr=no(Or,function(An,qn){var Mn=An.invoke(qn,Or);ct.optional(function(){An.assert(qn,Mn+"&&typeof "+Mn+'==="object"',"invalid "+we)});var jn=An.shared.context,$n=qn.def(Mn,".x|0"),Ci=qn.def(Mn,".y|0"),da=qn.def('"width" in ',Mn,"?",Mn,".width|0:","(",jn,".",Tu,"-",$n,")"),Fo=qn.def('"height" in ',Mn,"?",Mn,".height|0:","(",jn,".",ko,"-",Ci,")");return ct.optional(function(){An.assert(qn,da+">=0&&"+Fo+">=0","invalid "+we)}),[$n,Ci,da,Fo]});return oe&&(qr.thisDep=qr.thisDep||oe.thisDep,qr.contextDep=qr.contextDep||oe.contextDep,qr.propDep=qr.propDep||oe.propDep),qr}else return oe?new ho(oe.thisDep,oe.contextDep,oe.propDep,function(An,qn){var Mn=An.shared.context;return[0,0,qn.def(Mn,".",Tu),qn.def(Mn,".",ko)]}):null}var $e=Qe(Lo);if($e){var ir=$e;$e=new ho($e.thisDep,$e.contextDep,$e.propDep,function(we,Ye){var me=ir.append(we,Ye),lr=we.shared.context;return Ye.set(lr,"."+Cc,me[2]),Ye.set(lr,"."+Ac,me[3]),me})}return{viewport:$e,scissor_box:Qe(Uf)}}function wn(Se,oe){var Ke=Se.static,dr=typeof Ke[cu]=="string"&&typeof Ke[Cs]=="string";if(dr){if(Object.keys(oe.dynamic).length>0)return null;var gr=oe.static,Qe=Object.keys(gr);if(Qe.length>0&&typeof gr[Qe[0]]=="number"){for(var $e=[],ir=0;ir<Qe.length;++ir)ct(typeof gr[Qe[ir]]=="number","must specify all vertex attribute locations when using vaos"),$e.push([gr[Qe[ir]]|0,Qe[ir]]);return $e}}return null}function Rn(Se,oe,Ke){var dr=Se.static,gr=Se.dynamic;function Qe(me){if(me in dr){var lr=fe.id(dr[me]);ct.optional(function(){Vr.shader(Ml[me],lr,ct.guessCommand())});var mr=ii(function(){return lr});return mr.id=lr,mr}else if(me in gr){var kr=gr[me];return no(kr,function(Ur,Or){var qr=Ur.invoke(Or,kr),An=Or.def(Ur.shared.strings,".id(",qr,")");return ct.optional(function(){Or(Ur.shared.shader,".shader(",Ml[me],",",An,",",Ur.command,");")}),An})}return null}var $e=Qe(cu),ir=Qe(Cs),we=null,Ye;return du($e)&&du(ir)?(we=Vr.program(ir.id,$e.id,null,Ke),Ye=ii(function(me,lr){return me.link(we)})):Ye=new ho($e&&$e.thisDep||ir&&ir.thisDep,$e&&$e.contextDep||ir&&ir.contextDep,$e&&$e.propDep||ir&&ir.propDep,function(me,lr){var mr=me.shared.shader,kr;$e?kr=$e.append(me,lr):kr=lr.def(mr,".",cu);var Ur;ir?Ur=ir.append(me,lr):Ur=lr.def(mr,".",Cs);var Or=mr+".program("+Ur+","+kr;return ct.optional(function(){Or+=","+me.command}),lr.def(Or+")")}),{frag:$e,vert:ir,progVar:Ye,program:we}}function Kn(Se,oe){var Ke=Se.static,dr=Se.dynamic;function gr(){if(As in Ke){var me=Ke[As];Kf(me)?me=br.getElements(br.create(me,!0)):me&&(me=br.getElements(me),ct.command(me,"invalid elements",oe.commandStr));var lr=ii(function(kr,Ur){if(me){var Or=kr.link(me);return kr.ELEMENTS=Or,Or}return kr.ELEMENTS=null,null});return lr.value=me,lr}else if(As in dr){var mr=dr[As];return no(mr,function(kr,Ur){var Or=kr.shared,qr=Or.isBufferArgs,An=Or.elements,qn=kr.invoke(Ur,mr),Mn=Ur.def("null"),jn=Ur.def(qr,"(",qn,")"),$n=kr.cond(jn).then(Mn,"=",An,".createStream(",qn,");").else(Mn,"=",An,".getElements(",qn,");");return ct.optional(function(){kr.assert($n.else,"!"+qn+"||"+Mn,"invalid elements")}),Ur.entry($n),Ur.exit(kr.cond(jn).then(An,".destroyStream(",Mn,");")),kr.ELEMENTS=Mn,Mn})}return null}var Qe=gr();function $e(){if(lu in Ke){var me=Ke[lu];return ct.commandParameter(me,Ha,"invalid primitve",oe.commandStr),ii(function(mr,kr){return Ha[me]})}else if(lu in dr){var lr=dr[lu];return no(lr,function(mr,kr){var Ur=mr.constants.primTypes,Or=mr.invoke(kr,lr);return ct.optional(function(){mr.assert(kr,Or+" in "+Ur,"invalid primitive, must be one of "+Object.keys(Ha))}),kr.def(Ur,"[",Or,"]")})}else if(Qe)return du(Qe)?Qe.value?ii(function(mr,kr){return kr.def(mr.ELEMENTS,".primType")}):ii(function(){return Du}):new ho(Qe.thisDep,Qe.contextDep,Qe.propDep,function(mr,kr){var Ur=mr.ELEMENTS;return kr.def(Ur,"?",Ur,".primType:",Du)});return null}function ir(me,lr){if(me in Ke){var mr=Ke[me]|0;return ct.command(!lr||mr>=0,"invalid "+me,oe.commandStr),ii(function(Ur,Or){return lr&&(Ur.OFFSET=mr),mr})}else if(me in dr){var kr=dr[me];return no(kr,function(Ur,Or){var qr=Ur.invoke(Or,kr);return lr&&(Ur.OFFSET=qr,ct.optional(function(){Ur.assert(Or,qr+">=0","invalid "+me)})),qr})}else if(lr&&Qe)return ii(function(Ur,Or){return Ur.OFFSET="0",0});return null}var we=ir(Au,!0);function Ye(){if(Ts in Ke){var me=Ke[Ts]|0;return ct.command(typeof me=="number"&&me>=0,"invalid vertex count",oe.commandStr),ii(function(){return me})}else if(Ts in dr){var lr=dr[Ts];return no(lr,function(Ur,Or){var qr=Ur.invoke(Or,lr);return ct.optional(function(){Ur.assert(Or,"typeof "+qr+'==="number"&&'+qr+">=0&&"+qr+"===("+qr+"|0)","invalid vertex count")}),qr})}else if(Qe)if(du(Qe)){if(Qe)return we?new ho(we.thisDep,we.contextDep,we.propDep,function(Ur,Or){var qr=Or.def(Ur.ELEMENTS,".vertCount-",Ur.OFFSET);return ct.optional(function(){Ur.assert(Or,qr+">=0","invalid vertex offset/element buffer too small")}),qr}):ii(function(Ur,Or){return Or.def(Ur.ELEMENTS,".vertCount")});var mr=ii(function(){return-1});return ct.optional(function(){mr.MISSING=!0}),mr}else{var kr=new ho(Qe.thisDep||we.thisDep,Qe.contextDep||we.contextDep,Qe.propDep||we.propDep,function(Ur,Or){var qr=Ur.ELEMENTS;return Ur.OFFSET?Or.def(qr,"?",qr,".vertCount-",Ur.OFFSET,":-1"):Or.def(qr,"?",qr,".vertCount:-1")});return ct.optional(function(){kr.DYNAMIC=!0}),kr}return null}return{elements:Qe,primitive:$e(),count:Ye(),instances:ir(zf,!1),offset:we}}function Fn(Se,oe){var Ke=Se.static,dr=Se.dynamic,gr={};return Jt.forEach(function(Qe){var $e=Ne(Qe);function ir(we,Ye){if(Qe in Ke){var me=we(Ke[Qe]);gr[$e]=ii(function(){return me})}else if(Qe in dr){var lr=dr[Qe];gr[$e]=no(lr,function(mr,kr){return Ye(mr,kr,mr.invoke(kr,lr))})}}switch(Qe){case Ze:case Ff:case ml:case Sc:case sh:case xl:case El:case Cu:case wc:case ef:return ir(function(we){return ct.commandType(we,"boolean",Qe,oe.commandStr),we},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,"typeof "+me+'==="boolean"',"invalid flag "+Qe,we.commandStr)}),me});case bl:return ir(function(we){return ct.commandParameter(we,ku,"invalid "+Qe,oe.commandStr),ku[we]},function(we,Ye,me){var lr=we.constants.compareFuncs;return ct.optional(function(){we.assert(Ye,me+" in "+lr,"invalid "+Qe+", must be one of "+Object.keys(ku))}),Ye.def(lr,"[",me,"]")});case bc:return ir(function(we){return ct.command(Mi(we)&&we.length===2&&typeof we[0]=="number"&&typeof we[1]=="number"&&we[0]<=we[1],"depth range is 2d array",oe.commandStr),we},function(we,Ye,me){ct.optional(function(){we.assert(Ye,we.shared.isArrayLike+"("+me+")&&"+me+".length===2&&typeof "+me+'[0]==="number"&&typeof '+me+'[1]==="number"&&'+me+"[0]<="+me+"[1]","depth range must be a 2d array")});var lr=Ye.def("+",me,"[0]"),mr=Ye.def("+",me,"[1]");return[lr,mr]});case gi:return ir(function(we){ct.commandType(we,"object","blend.func",oe.commandStr);var Ye="srcRGB"in we?we.srcRGB:we.src,me="srcAlpha"in we?we.srcAlpha:we.src,lr="dstRGB"in we?we.dstRGB:we.dst,mr="dstAlpha"in we?we.dstAlpha:we.dst;return ct.commandParameter(Ye,Qa,$e+".srcRGB",oe.commandStr),ct.commandParameter(me,Qa,$e+".srcAlpha",oe.commandStr),ct.commandParameter(lr,Qa,$e+".dstRGB",oe.commandStr),ct.commandParameter(mr,Qa,$e+".dstAlpha",oe.commandStr),ct.command(vh.indexOf(Ye+", "+lr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ye+", "+lr+")",oe.commandStr),[Qa[Ye],Qa[lr],Qa[me],Qa[mr]]},function(we,Ye,me){var lr=we.constants.blendFuncs;ct.optional(function(){we.assert(Ye,me+"&&typeof "+me+'==="object"',"invalid blend func, must be an object")});function mr(Mn,jn){var $n=Ye.def('"',Mn,jn,'" in ',me,"?",me,".",Mn,jn,":",me,".",Mn);return ct.optional(function(){we.assert(Ye,$n+" in "+lr,"invalid "+Qe+"."+Mn+jn+", must be one of "+Object.keys(Qa))}),$n}var kr=mr("src","RGB"),Ur=mr("dst","RGB");ct.optional(function(){var Mn=we.constants.invalidBlendCombinations;we.assert(Ye,Mn+".indexOf("+kr+'+", "+'+Ur+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Or=Ye.def(lr,"[",kr,"]"),qr=Ye.def(lr,"[",mr("src","Alpha"),"]"),An=Ye.def(lr,"[",Ur,"]"),qn=Ye.def(lr,"[",mr("dst","Alpha"),"]");return[Or,An,qr,qn]});case tf:return ir(function(we){if(typeof we=="string")return ct.commandParameter(we,ht,"invalid "+Qe,oe.commandStr),[ht[we],ht[we]];if(typeof we=="object")return ct.commandParameter(we.rgb,ht,Qe+".rgb",oe.commandStr),ct.commandParameter(we.alpha,ht,Qe+".alpha",oe.commandStr),[ht[we.rgb],ht[we.alpha]];ct.commandRaise("invalid blend.equation",oe.commandStr)},function(we,Ye,me){var lr=we.constants.blendEquations,mr=Ye.def(),kr=Ye.def(),Ur=we.cond("typeof ",me,'==="string"');return ct.optional(function(){function Or(qr,An,qn){we.assert(qr,qn+" in "+lr,"invalid "+An+", must be one of "+Object.keys(ht))}Or(Ur.then,Qe,me),we.assert(Ur.else,me+"&&typeof "+me+'==="object"',"invalid "+Qe),Or(Ur.else,Qe+".rgb",me+".rgb"),Or(Ur.else,Qe+".alpha",me+".alpha")}),Ur.then(mr,"=",kr,"=",lr,"[",me,"];"),Ur.else(mr,"=",lr,"[",me,".rgb];",kr,"=",lr,"[",me,".alpha];"),Ye(Ur),[mr,kr]});case oh:return ir(function(we){return ct.command(Mi(we)&&we.length===4,"blend.color must be a 4d array",oe.commandStr),pn(4,function(Ye){return+we[Ye]})},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,we.shared.isArrayLike+"("+me+")&&"+me+".length===4","blend.color must be a 4d array")}),pn(4,function(lr){return Ye.def("+",me,"[",lr,"]")})});case _c:return ir(function(we){return ct.commandType(we,"number",$e,oe.commandStr),we|0},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,"typeof "+me+'==="number"',"invalid stencil.mask")}),Ye.def(me,"|0")});case af:return ir(function(we){ct.commandType(we,"object",$e,oe.commandStr);var Ye=we.cmp||"keep",me=we.ref||0,lr="mask"in we?we.mask:-1;return ct.commandParameter(Ye,ku,Qe+".cmp",oe.commandStr),ct.commandType(me,"number",Qe+".ref",oe.commandStr),ct.commandType(lr,"number",Qe+".mask",oe.commandStr),[ku[Ye],me,lr]},function(we,Ye,me){var lr=we.constants.compareFuncs;ct.optional(function(){function Or(){we.assert(Ye,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Or(me+"&&typeof ",me,'==="object"'),Or('!("cmp" in ',me,")||(",me,".cmp in ",lr,")")});var mr=Ye.def('"cmp" in ',me,"?",lr,"[",me,".cmp]",":",Lu),kr=Ye.def(me,".ref|0"),Ur=Ye.def('"mask" in ',me,"?",me,".mask|0:-1");return[mr,kr,Ur]});case la:case su:return ir(function(we){ct.commandType(we,"object",$e,oe.commandStr);var Ye=we.fail||"keep",me=we.zfail||"keep",lr=we.zpass||"keep";return ct.commandParameter(Ye,hu,Qe+".fail",oe.commandStr),ct.commandParameter(me,hu,Qe+".zfail",oe.commandStr),ct.commandParameter(lr,hu,Qe+".zpass",oe.commandStr),[Qe===su?Vs:Nu,hu[Ye],hu[me],hu[lr]]},function(we,Ye,me){var lr=we.constants.stencilOps;ct.optional(function(){we.assert(Ye,me+"&&typeof "+me+'==="object"',"invalid "+Qe)});function mr(kr){return ct.optional(function(){we.assert(Ye,'!("'+kr+'" in '+me+")||("+me+"."+kr+" in "+lr+")","invalid "+Qe+"."+kr+", must be one of "+Object.keys(hu))}),Ye.def('"',kr,'" in ',me,"?",lr,"[",me,".",kr,"]:",Lu)}return[Qe===su?Vs:Nu,mr("fail"),mr("zfail"),mr("zpass")]});case xc:return ir(function(we){ct.commandType(we,"object",$e,oe.commandStr);var Ye=we.factor|0,me=we.units|0;return ct.commandType(Ye,"number",$e+".factor",oe.commandStr),ct.commandType(me,"number",$e+".units",oe.commandStr),[Ye,me]},function(we,Ye,me){ct.optional(function(){we.assert(Ye,me+"&&typeof "+me+'==="object"',"invalid "+Qe)});var lr=Ye.def(me,".factor|0"),mr=Ye.def(me,".units|0");return[lr,mr]});case $o:return ir(function(we){var Ye=0;return we==="front"?Ye=Nu:we==="back"&&(Ye=Vs),ct.command(!!Ye,$e,oe.commandStr),Ye},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,me+'==="front"||'+me+'==="back"',"invalid cull.face")}),Ye.def(me,'==="front"?',Nu,":",Vs)});case rf:return ir(function(we){return ct.command(typeof we=="number"&&we>=wr.lineWidthDims[0]&&we<=wr.lineWidthDims[1],"invalid line width, must be a positive number between "+wr.lineWidthDims[0]+" and "+wr.lineWidthDims[1],oe.commandStr),we},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,"typeof "+me+'==="number"&&'+me+">="+wr.lineWidthDims[0]+"&&"+me+"<="+wr.lineWidthDims[1],"invalid line width")}),me});case zs:return ir(function(we){return ct.commandParameter(we,ph,$e,oe.commandStr),ph[we]},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,me+'==="cw"||'+me+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ye.def(me+'==="cw"?'+fh+":"+Zf)});case Ec:return ir(function(we){return ct.command(Mi(we)&&we.length===4,"color.mask must be length 4 array",oe.commandStr),we.map(function(Ye){return!!Ye})},function(we,Ye,me){return ct.optional(function(){we.assert(Ye,we.shared.isArrayLike+"("+me+")&&"+me+".length===4","invalid color.mask")}),pn(4,function(lr){return"!!"+me+"["+lr+"]"})});case nf:return ir(function(we){ct.command(typeof we=="object"&&we,$e,oe.commandStr);var Ye="value"in we?we.value:1,me=!!we.invert;return ct.command(typeof Ye=="number"&&Ye>=0&&Ye<=1,"sample.coverage.value must be a number between 0 and 1",oe.commandStr),[Ye,me]},function(we,Ye,me){ct.optional(function(){we.assert(Ye,me+"&&typeof "+me+'==="object"',"invalid sample.coverage")});var lr=Ye.def('"value" in ',me,"?+",me,".value:1"),mr=Ye.def("!!",me,".invert");return[lr,mr]})}}),gr}function Vi(Se,oe){var Ke=Se.static,dr=Se.dynamic,gr={};return Object.keys(Ke).forEach(function(Qe){var $e=Ke[Qe],ir;if(typeof $e=="number"||typeof $e=="boolean")ir=ii(function(){return $e});else if(typeof $e=="function"){var we=$e._reglType;we==="texture2d"||we==="textureCube"?ir=ii(function(Ye){return Ye.link($e)}):we==="framebuffer"||we==="framebufferCube"?(ct.command($e.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Qe+'"',oe.commandStr),ir=ii(function(Ye){return Ye.link($e.color[0])})):ct.commandRaise('invalid data for uniform "'+Qe+'"',oe.commandStr)}else Mi($e)?ir=ii(function(Ye){var me=Ye.global.def("[",pn($e.length,function(lr){return ct.command(typeof $e[lr]=="number"||typeof $e[lr]=="boolean","invalid uniform "+Qe,Ye.commandStr),$e[lr]}),"]");return me}):ct.commandRaise('invalid or missing data for uniform "'+Qe+'"',oe.commandStr);ir.value=$e,gr[Qe]=ir}),Object.keys(dr).forEach(function(Qe){var $e=dr[Qe];gr[Qe]=no($e,function(ir,we){return ir.invoke(we,$e)})}),gr}function Qn(Se,oe){var Ke=Se.static,dr=Se.dynamic,gr={};return Object.keys(Ke).forEach(function(Qe){var $e=Ke[Qe],ir=fe.id(Qe),we=new q;if(Kf($e))we.state=Ju,we.buffer=Rr.getBuffer(Rr.create($e,Pu,!1,!0)),we.type=0;else{var Ye=Rr.getBuffer($e);if(Ye)we.state=Ju,we.buffer=Ye,we.type=0;else if(ct.command(typeof $e=="object"&&$e,"invalid data for attribute "+Qe,oe.commandStr),"constant"in $e){var me=$e.constant;we.buffer="null",we.state=vl,typeof me=="number"?we.x=me:(ct.command(Mi(me)&&me.length>0&&me.length<=4,"invalid constant for attribute "+Qe,oe.commandStr),Qu.forEach(function(An,qn){qn<me.length&&(we[An]=me[qn])}))}else{Kf($e.buffer)?Ye=Rr.getBuffer(Rr.create($e.buffer,Pu,!1,!0)):Ye=Rr.getBuffer($e.buffer),ct.command(!!Ye,'missing buffer for attribute "'+Qe+'"',oe.commandStr);var lr=$e.offset|0;ct.command(lr>=0,'invalid offset for attribute "'+Qe+'"',oe.commandStr);var mr=$e.stride|0;ct.command(mr>=0&&mr<256,'invalid stride for attribute "'+Qe+'", must be integer betweeen [0, 255]',oe.commandStr);var kr=$e.size|0;ct.command(!("size"in $e)||kr>0&&kr<=4,'invalid size for attribute "'+Qe+'", must be 1,2,3,4',oe.commandStr);var Ur=!!$e.normalized,Or=0;"type"in $e&&(ct.commandParameter($e.type,Xa,"invalid type for attribute "+Qe,oe.commandStr),Or=Xa[$e.type]);var qr=$e.divisor|0;"divisor"in $e&&(ct.command(qr===0||gt,'cannot specify divisor for attribute "'+Qe+'", instancing not supported',oe.commandStr),ct.command(qr>=0,'invalid divisor for attribute "'+Qe+'"',oe.commandStr)),ct.optional(function(){var An=oe.commandStr,qn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys($e).forEach(function(Mn){ct.command(qn.indexOf(Mn)>=0,'unknown parameter "'+Mn+'" for attribute pointer "'+Qe+'" (valid parameters are '+qn+")",An)})}),we.buffer=Ye,we.state=Ju,we.size=kr,we.normalized=Ur,we.type=Or||Ye.dtype,we.offset=lr,we.stride=mr,we.divisor=qr}}gr[Qe]=ii(function(An,qn){var Mn=An.attribCache;if(ir in Mn)return Mn[ir];var jn={isStream:!1};return Object.keys(we).forEach(function($n){jn[$n]=we[$n]}),we.buffer&&(jn.buffer=An.link(we.buffer),jn.type=jn.type||jn.buffer+".dtype"),Mn[ir]=jn,jn})}),Object.keys(dr).forEach(function(Qe){var $e=dr[Qe];function ir(we,Ye){var me=we.invoke(Ye,$e),lr=we.shared,mr=we.constants,kr=lr.isBufferArgs,Ur=lr.buffer;ct.optional(function(){we.assert(Ye,me+"&&(typeof "+me+'==="object"||typeof '+me+'==="function")&&('+kr+"("+me+")||"+Ur+".getBuffer("+me+")||"+Ur+".getBuffer("+me+".buffer)||"+kr+"("+me+'.buffer)||("constant" in '+me+"&&(typeof "+me+'.constant==="number"||'+lr.isArrayLike+"("+me+".constant))))",'invalid dynamic attribute "'+Qe+'"')});var Or={isStream:Ye.def(!1)},qr=new q;qr.state=Ju,Object.keys(qr).forEach(function(jn){Or[jn]=Ye.def(""+qr[jn])});var An=Or.buffer,qn=Or.type;Ye("if(",kr,"(",me,")){",Or.isStream,"=true;",An,"=",Ur,".createStream(",Pu,",",me,");",qn,"=",An,".dtype;","}else{",An,"=",Ur,".getBuffer(",me,");","if(",An,"){",qn,"=",An,".dtype;",'}else if("constant" in ',me,"){",Or.state,"=",vl,";","if(typeof "+me+'.constant === "number"){',Or[Qu[0]],"=",me,".constant;",Qu.slice(1).map(function(jn){return Or[jn]}).join("="),"=0;","}else{",Qu.map(function(jn,$n){return Or[jn]+"="+me+".constant.length>"+$n+"?"+me+".constant["+$n+"]:0;"}).join(""),"}}else{","if(",kr,"(",me,".buffer)){",An,"=",Ur,".createStream(",Pu,",",me,".buffer);","}else{",An,"=",Ur,".getBuffer(",me,".buffer);","}",qn,'="type" in ',me,"?",mr.glTypes,"[",me,".type]:",An,".dtype;",Or.normalized,"=!!",me,".normalized;");function Mn(jn){Ye(Or[jn],"=",me,".",jn,"|0;")}return Mn("size"),Mn("offset"),Mn("stride"),Mn("divisor"),Ye("}}"),Ye.exit("if(",Or.isStream,"){",Ur,".destroyStream(",An,");","}"),Or}gr[Qe]=no($e,ir)}),gr}function oa(Se,oe){var Ke=Se.static,dr=Se.dynamic;if(of in Ke){var gr=Ke[of];return gr!==null&&Kr.getVAO(gr)===null&&(gr=Kr.createVAO(gr)),ii(function($e){return $e.link(Kr.getVAO(gr))})}else if(of in dr){var Qe=dr[of];return no(Qe,function($e,ir){var we=$e.invoke(ir,Qe);return ir.def($e.shared.vao+".getVAO("+we+")")})}return null}function Di(Se){var oe=Se.static,Ke=Se.dynamic,dr={};return Object.keys(oe).forEach(function(gr){var Qe=oe[gr];dr[gr]=ii(function($e,ir){return typeof Qe=="number"||typeof Qe=="boolean"?""+Qe:$e.link(Qe)})}),Object.keys(Ke).forEach(function(gr){var Qe=Ke[gr];dr[gr]=no(Qe,function($e,ir){return $e.invoke(ir,Qe)})}),dr}function ui(Se,oe,Ke,dr,gr){var Qe=Se.static,$e=Se.dynamic;ct.optional(function(){var Mn=[fu,Cs,cu,As,lu,Au,Ts,zf,uu,of].concat(Jt);function jn($n){Object.keys($n).forEach(function(Ci){ct.command(Mn.indexOf(Ci)>=0,'unknown parameter "'+Ci+'"',gr.commandStr)})}jn(Qe),jn($e)});var ir=wn(Se,oe),we=tn(Se,gr),Ye=Tn(Se,we,gr),me=Kn(Se,gr),lr=Fn(Se,gr),mr=Rn(Se,gr,ir);function kr(Mn){var jn=Ye[Mn];jn&&(lr[Mn]=jn)}kr(Lo),kr(Ne(Uf));var Ur=Object.keys(lr).length>0,Or={framebuffer:we,draw:me,shader:mr,state:lr,dirty:Ur,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Or.profile=fn(Se,gr),Or.uniforms=Vi(Ke,gr),Or.drawVAO=Or.scopeVAO=oa(Se,gr),!Or.drawVAO&&mr.program&&!ir&&ze.angle_instanced_arrays){var qr=!0,An=mr.program.attributes.map(function(Mn){var jn=oe.static[Mn];return qr=qr&&!!jn,jn});if(qr&&An.length>0){var qn=Kr.getVAO(Kr.createVAO(An));Or.drawVAO=new ho(null,null,null,function(Mn,jn){return Mn.link(qn)}),Or.useVAO=!0}}return ir?Or.useVAO=!0:Or.attributes=Qn(oe,gr),Or.context=Di(dr,gr),Or}function Qi(Se,oe,Ke){var dr=Se.shared,gr=dr.context,Qe=Se.scope();Object.keys(Ke).forEach(function($e){oe.save(gr,"."+$e);var ir=Ke[$e],we=ir.append(Se,oe);Array.isArray(we)?Qe(gr,".",$e,"=[",we.join(),"];"):Qe(gr,".",$e,"=",we,";")}),oe(Qe)}function sa(Se,oe,Ke,dr){var gr=Se.shared,Qe=gr.gl,$e=gr.framebuffer,ir;_t&&(ir=oe.def(gr.extensions,".webgl_draw_buffers"));var we=Se.constants,Ye=we.drawBuffer,me=we.backBuffer,lr;Ke?lr=Ke.append(Se,oe):lr=oe.def($e,".next"),dr||oe("if(",lr,"!==",$e,".cur){"),oe("if(",lr,"){",Qe,".bindFramebuffer(",dh,",",lr,".framebuffer);"),_t&&oe(ir,".drawBuffersWEBGL(",Ye,"[",lr,".colorAttachments.length]);"),oe("}else{",Qe,".bindFramebuffer(",dh,",null);"),_t&&oe(ir,".drawBuffersWEBGL(",me,");"),oe("}",$e,".cur=",lr,";"),dr||oe("}")}function Sa(Se,oe,Ke){var dr=Se.shared,gr=dr.gl,Qe=Se.current,$e=Se.next,ir=dr.current,we=dr.next,Ye=Se.cond(ir,".dirty");Jt.forEach(function(me){var lr=Ne(me);if(!(lr in Ke.state)){var mr,kr;if(lr in $e){mr=$e[lr],kr=Qe[lr];var Ur=pn(It[lr].length,function(qr){return Ye.def(mr,"[",qr,"]")});Ye(Se.cond(Ur.map(function(qr,An){return qr+"!=="+kr+"["+An+"]"}).join("||")).then(gr,".",ae[lr],"(",Ur,");",Ur.map(function(qr,An){return kr+"["+An+"]="+qr}).join(";"),";"))}else{mr=Ye.def(we,".",lr);var Or=Se.cond(mr,"!==",ir,".",lr);Ye(Or),lr in ue?Or(Se.cond(mr).then(gr,".enable(",ue[lr],");").else(gr,".disable(",ue[lr],");"),ir,".",lr,"=",mr,";"):Or(gr,".",ae[lr],"(",mr,");",ir,".",lr,"=",mr,";")}}}),Object.keys(Ke.state).length===0&&Ye(ir,".dirty=false;"),oe(Ye)}function za(Se,oe,Ke,dr){var gr=Se.shared,Qe=Se.current,$e=gr.current,ir=gr.gl;gh(Object.keys(Ke)).forEach(function(we){var Ye=Ke[we];if(!(dr&&!dr(Ye))){var me=Ye.append(Se,oe);if(ue[we]){var lr=ue[we];du(Ye)?me?oe(ir,".enable(",lr,");"):oe(ir,".disable(",lr,");"):oe(Se.cond(me).then(ir,".enable(",lr,");").else(ir,".disable(",lr,");")),oe($e,".",we,"=",me,";")}else if(Mi(me)){var mr=Qe[we];oe(ir,".",ae[we],"(",me,");",me.map(function(kr,Ur){return mr+"["+Ur+"]="+kr}).join(";"),";")}else oe(ir,".",ae[we],"(",me,");",$e,".",we,"=",me,";")}})}function _a(Se,oe){gt&&(Se.instancing=oe.def(Se.shared.extensions,".angle_instanced_arrays"))}function ni(Se,oe,Ke,dr,gr){var Qe=Se.shared,$e=Se.stats,ir=Qe.current,we=Qe.timer,Ye=Ke.profile;function me(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var lr,mr;function kr(Mn){lr=oe.def(),Mn(lr,"=",me(),";"),typeof gr=="string"?Mn($e,".count+=",gr,";"):Mn($e,".count++;"),L&&(dr?(mr=oe.def(),Mn(mr,"=",we,".getNumPendingQueries();")):Mn(we,".beginQuery(",$e,");"))}function Ur(Mn){Mn($e,".cpuTime+=",me(),"-",lr,";"),L&&(dr?Mn(we,".pushScopeStats(",mr,",",we,".getNumPendingQueries(),",$e,");"):Mn(we,".endQuery();"))}function Or(Mn){var jn=oe.def(ir,".profile");oe(ir,".profile=",Mn,";"),oe.exit(ir,".profile=",jn,";")}var qr;if(Ye){if(du(Ye)){Ye.enable?(kr(oe),Ur(oe.exit),Or("true")):Or("false");return}qr=Ye.append(Se,oe),Or(qr)}else qr=oe.def(ir,".profile");var An=Se.block();kr(An),oe("if(",qr,"){",An,"}");var qn=Se.block();Ur(qn),oe.exit("if(",qr,"){",qn,"}")}function Wa(Se,oe,Ke,dr,gr){var Qe=Se.shared;function $e(we){switch(we){case Oc:case Dc:case Ou:return 2;case Vf:case jf:case Xf:return 3;case uf:case ff:case ds:return 4;default:return 1}}function ir(we,Ye,me){var lr=Qe.gl,mr=oe.def(we,".location"),kr=oe.def(Qe.attributes,"[",mr,"]"),Ur=me.state,Or=me.buffer,qr=[me.x,me.y,me.z,me.w],An=["buffer","normalized","offset","stride"];function qn(){oe("if(!",kr,".buffer){",lr,".enableVertexAttribArray(",mr,");}");var jn=me.type,$n;if(me.size?$n=oe.def(me.size,"||",Ye):$n=Ye,oe("if(",kr,".type!==",jn,"||",kr,".size!==",$n,"||",An.map(function(da){return kr+"."+da+"!=="+me[da]}).join("||"),"){",lr,".bindBuffer(",Pu,",",Or,".buffer);",lr,".vertexAttribPointer(",[mr,$n,jn,me.normalized,me.stride,me.offset],");",kr,".type=",jn,";",kr,".size=",$n,";",An.map(function(da){return kr+"."+da+"="+me[da]+";"}).join(""),"}"),gt){var Ci=me.divisor;oe("if(",kr,".divisor!==",Ci,"){",Se.instancing,".vertexAttribDivisorANGLE(",[mr,Ci],");",kr,".divisor=",Ci,";}")}}function Mn(){oe("if(",kr,".buffer){",lr,".disableVertexAttribArray(",mr,");",kr,".buffer=null;","}if(",Qu.map(function(jn,$n){return kr+"."+jn+"!=="+qr[$n]}).join("||"),"){",lr,".vertexAttrib4f(",mr,",",qr,");",Qu.map(function(jn,$n){return kr+"."+jn+"="+qr[$n]+";"}).join(""),"}")}Ur===Ju?qn():Ur===vl?Mn():(oe("if(",Ur,"===",Ju,"){"),qn(),oe("}else{"),Mn(),oe("}"))}dr.forEach(function(we){var Ye=we.name,me=Ke.attributes[Ye],lr;if(me){if(!gr(me))return;lr=me.append(Se,oe)}else{if(!gr(Nc))return;var mr=Se.scopeAttrib(Ye);ct.optional(function(){Se.assert(oe,mr+".state","missing attribute "+Ye)}),lr={},Object.keys(new q).forEach(function(kr){lr[kr]=oe.def(mr,".",kr)})}ir(Se.link(we),$e(we.info.type),lr)})}function Ii(Se,oe,Ke,dr,gr){for(var Qe=Se.shared,$e=Qe.gl,ir,we=0;we<dr.length;++we){var Ye=dr[we],me=Ye.name,lr=Ye.info.type,mr=Ke.uniforms[me],kr=Se.link(Ye),Ur=kr+".location",Or;if(mr){if(!gr(mr))continue;if(du(mr)){var qr=mr.value;if(ct.command(qr!==null&&typeof qr!="undefined",'missing uniform "'+me+'"',Se.commandStr),lr===Hf||lr===$i){ct.command(typeof qr=="function"&&(lr===Hf&&(qr._reglType==="texture2d"||qr._reglType==="framebuffer")||lr===$i&&(qr._reglType==="textureCube"||qr._reglType==="framebufferCube")),"invalid texture for uniform "+me,Se.commandStr);var An=Se.link(qr._texture||qr.color[0]._texture);oe($e,".uniform1i(",Ur,",",An+".bind());"),oe.exit(An,".unbind();")}else if(lr===Yf||lr===Jo||lr===cf){ct.optional(function(){ct.command(Mi(qr),"invalid matrix for uniform "+me,Se.commandStr),ct.command(lr===Yf&&qr.length===4||lr===Jo&&qr.length===9||lr===cf&&qr.length===16,"invalid length for matrix uniform "+me,Se.commandStr)});var qn=Se.global.def("new Float32Array(["+Array.prototype.slice.call(qr)+"])"),Mn=2;lr===Jo?Mn=3:lr===cf&&(Mn=4),oe($e,".uniformMatrix",Mn,"fv(",Ur,",false,",qn,");")}else{switch(lr){case Ps:ct.commandType(qr,"number","uniform "+me,Se.commandStr),ir="1f";break;case Oc:ct.command(Mi(qr)&&qr.length===2,"uniform "+me,Se.commandStr),ir="2f";break;case Vf:ct.command(Mi(qr)&&qr.length===3,"uniform "+me,Se.commandStr),ir="3f";break;case uf:ct.command(Mi(qr)&&qr.length===4,"uniform "+me,Se.commandStr),ir="4f";break;case Sl:ct.commandType(qr,"boolean","uniform "+me,Se.commandStr),ir="1i";break;case wl:ct.commandType(qr,"number","uniform "+me,Se.commandStr),ir="1i";break;case Ou:ct.command(Mi(qr)&&qr.length===2,"uniform "+me,Se.commandStr),ir="2i";break;case Dc:ct.command(Mi(qr)&&qr.length===2,"uniform "+me,Se.commandStr),ir="2i";break;case Xf:ct.command(Mi(qr)&&qr.length===3,"uniform "+me,Se.commandStr),ir="3i";break;case jf:ct.command(Mi(qr)&&qr.length===3,"uniform "+me,Se.commandStr),ir="3i";break;case ds:ct.command(Mi(qr)&&qr.length===4,"uniform "+me,Se.commandStr),ir="4i";break;case ff:ct.command(Mi(qr)&&qr.length===4,"uniform "+me,Se.commandStr),ir="4i";break}oe($e,".uniform",ir,"(",Ur,",",Mi(qr)?Array.prototype.slice.call(qr):qr,");")}continue}else Or=mr.append(Se,oe)}else{if(!gr(Nc))continue;Or=oe.def(Qe.uniforms,"[",fe.id(me),"]")}lr===Hf?(ct(!Array.isArray(Or),"must specify a scalar prop for textures"),oe("if(",Or,"&&",Or,'._reglType==="framebuffer"){',Or,"=",Or,".color[0];","}")):lr===$i&&(ct(!Array.isArray(Or),"must specify a scalar prop for cube maps"),oe("if(",Or,"&&",Or,'._reglType==="framebufferCube"){',Or,"=",Or,".color[0];","}")),ct.optional(function(){function Fo(vo,Hh){Se.assert(oe,vo,'bad data or missing for uniform "'+me+'".  '+Hh)}function Jf(vo){ct(!Array.isArray(Or),"must not specify an array type for uniform"),Fo("typeof "+Or+'==="'+vo+'"',"invalid type, expected "+vo)}function Uo(vo,Hh){Array.isArray(Or)?ct(Or.length===vo,"must have length "+vo):Fo(Qe.isArrayLike+"("+Or+")&&"+Or+".length==="+vo,"invalid vector, should have length "+vo,Se.commandStr)}function mh(vo){ct(!Array.isArray(Or),"must not specify a value type"),Fo("typeof "+Or+'==="function"&&'+Or+'._reglType==="texture'+(vo===cs?"2d":"Cube")+'"',"invalid texture type",Se.commandStr)}switch(lr){case wl:Jf("number");break;case Dc:Uo(2,"number");break;case jf:Uo(3,"number");break;case ff:Uo(4,"number");break;case Ps:Jf("number");break;case Oc:Uo(2,"number");break;case Vf:Uo(3,"number");break;case uf:Uo(4,"number");break;case Sl:Jf("boolean");break;case Ou:Uo(2,"boolean");break;case Xf:Uo(3,"boolean");break;case ds:Uo(4,"boolean");break;case Yf:Uo(4,"number");break;case Jo:Uo(9,"number");break;case cf:Uo(16,"number");break;case Hf:mh(cs);break;case $i:mh(Ro);break}});var jn=1;switch(lr){case Hf:case $i:var $n=oe.def(Or,"._texture");oe($e,".uniform1i(",Ur,",",$n,".bind());"),oe.exit($n,".unbind();");continue;case wl:case Sl:ir="1i";break;case Dc:case Ou:ir="2i",jn=2;break;case jf:case Xf:ir="3i",jn=3;break;case ff:case ds:ir="4i",jn=4;break;case Ps:ir="1f";break;case Oc:ir="2f",jn=2;break;case Vf:ir="3f",jn=3;break;case uf:ir="4f",jn=4;break;case Yf:ir="Matrix2fv";break;case Jo:ir="Matrix3fv";break;case cf:ir="Matrix4fv";break}if(oe($e,".uniform",ir,"(",Ur,","),ir.charAt(0)==="M"){var Ci=Math.pow(lr-Yf+2,2),da=Se.global.def("new Float32Array(",Ci,")");Array.isArray(Or)?oe("false,(",pn(Ci,function(Fo){return da+"["+Fo+"]="+Or[Fo]}),",",da,")"):oe("false,(Array.isArray(",Or,")||",Or," instanceof Float32Array)?",Or,":(",pn(Ci,function(Fo){return da+"["+Fo+"]="+Or+"["+Fo+"]"}),",",da,")")}else jn>1?oe(pn(jn,function(Fo){return Array.isArray(Or)?Or[Fo]:Or+"["+Fo+"]"})):(ct(!Array.isArray(Or),"uniform value must not be an array"),oe(Or));oe(");")}}function Vn(Se,oe,Ke,dr){var gr=Se.shared,Qe=gr.gl,$e=gr.draw,ir=dr.draw;function we(){var $n=ir.elements,Ci,da=oe;return $n?(($n.contextDep&&dr.contextDynamic||$n.propDep)&&(da=Ke),Ci=$n.append(Se,da)):Ci=da.def($e,".",As),Ci&&da("if("+Ci+")"+Qe+".bindBuffer("+uh+","+Ci+".buffer.buffer);"),Ci}function Ye(){var $n=ir.count,Ci,da=oe;return $n?(($n.contextDep&&dr.contextDynamic||$n.propDep)&&(da=Ke),Ci=$n.append(Se,da),ct.optional(function(){$n.MISSING&&Se.assert(oe,"false","missing vertex count"),$n.DYNAMIC&&Se.assert(da,Ci+">=0","missing vertex count")})):(Ci=da.def($e,".",Ts),ct.optional(function(){Se.assert(da,Ci+">=0","missing vertex count")})),Ci}var me=we();function lr($n){var Ci=ir[$n];return Ci?Ci.contextDep&&dr.contextDynamic||Ci.propDep?Ci.append(Se,Ke):Ci.append(Se,oe):oe.def($e,".",$n)}var mr=lr(lu),kr=lr(Au),Ur=Ye();if(typeof Ur=="number"){if(Ur===0)return}else Ke("if(",Ur,"){"),Ke.exit("}");var Or,qr;gt&&(Or=lr(zf),qr=Se.instancing);var An=me+".type",qn=ir.elements&&du(ir.elements);function Mn(){function $n(){Ke(qr,".drawElementsInstancedANGLE(",[mr,Ur,An,kr+"<<(("+An+"-"+ah+")>>1)",Or],");")}function Ci(){Ke(qr,".drawArraysInstancedANGLE(",[mr,kr,Ur,Or],");")}me?qn?$n():(Ke("if(",me,"){"),$n(),Ke("}else{"),Ci(),Ke("}")):Ci()}function jn(){function $n(){Ke(Qe+".drawElements("+[mr,Ur,An,kr+"<<(("+An+"-"+ah+")>>1)"]+");")}function Ci(){Ke(Qe+".drawArrays("+[mr,kr,Ur]+");")}me?qn?$n():(Ke("if(",me,"){"),$n(),Ke("}else{"),Ci(),Ke("}")):Ci()}gt&&(typeof Or!="number"||Or>=0)?typeof Or=="string"?(Ke("if(",Or,">0){"),Mn(),Ke("}else if(",Or,"<0){"),jn(),Ke("}")):Mn():jn()}function ci(Se,oe,Ke,dr,gr){var Qe=Xr(),$e=Qe.proc("body",gr);return ct.optional(function(){Qe.commandStr=oe.commandStr,Qe.command=Qe.link(oe.commandStr)}),gt&&(Qe.instancing=$e.def(Qe.shared.extensions,".angle_instanced_arrays")),Se(Qe,$e,Ke,dr),Qe.compile().body}function yi(Se,oe,Ke,dr){_a(Se,oe),Ke.useVAO?Ke.drawVAO?oe(Se.shared.vao,".setVAO(",Ke.drawVAO.append(Se,oe),");"):oe(Se.shared.vao,".setVAO(",Se.shared.vao,".targetVAO);"):(oe(Se.shared.vao,".setVAO(null);"),Wa(Se,oe,Ke,dr.attributes,function(){return!0})),Ii(Se,oe,Ke,dr.uniforms,function(){return!0}),Vn(Se,oe,oe,Ke)}function ha(Se,oe){var Ke=Se.proc("draw",1);_a(Se,Ke),Qi(Se,Ke,oe.context),sa(Se,Ke,oe.framebuffer),Sa(Se,Ke,oe),za(Se,Ke,oe.state),ni(Se,Ke,oe,!1,!0);var dr=oe.shader.progVar.append(Se,Ke);if(Ke(Se.shared.gl,".useProgram(",dr,".program);"),oe.shader.program)yi(Se,Ke,oe,oe.shader.program);else{Ke(Se.shared.vao,".setVAO(null);");var gr=Se.global.def("{}"),Qe=Ke.def(dr,".id"),$e=Ke.def(gr,"[",Qe,"]");Ke(Se.cond($e).then($e,".call(this,a0);").else($e,"=",gr,"[",Qe,"]=",Se.link(function(ir){return ci(yi,Se,oe,ir,1)}),"(",dr,");",$e,".call(this,a0);"))}Object.keys(oe.state).length>0&&Ke(Se.shared.current,".dirty=true;")}function vu(Se,oe,Ke,dr){Se.batchId="a1",_a(Se,oe);function gr(){return!0}Wa(Se,oe,Ke,dr.attributes,gr),Ii(Se,oe,Ke,dr.uniforms,gr),Vn(Se,oe,oe,Ke)}function Qf(Se,oe,Ke,dr){_a(Se,oe);var gr=Ke.contextDep,Qe=oe.def(),$e="a0",ir="a1",we=oe.def();Se.shared.props=we,Se.batchId=Qe;var Ye=Se.scope(),me=Se.scope();oe(Ye.entry,"for(",Qe,"=0;",Qe,"<",ir,";++",Qe,"){",we,"=",$e,"[",Qe,"];",me,"}",Ye.exit);function lr(An){return An.contextDep&&gr||An.propDep}function mr(An){return!lr(An)}if(Ke.needsContext&&Qi(Se,me,Ke.context),Ke.needsFramebuffer&&sa(Se,me,Ke.framebuffer),za(Se,me,Ke.state,lr),Ke.profile&&lr(Ke.profile)&&ni(Se,me,Ke,!1,!0),dr)Ke.useVAO?Ke.drawVAO?lr(Ke.drawVAO)?me(Se.shared.vao,".setVAO(",Ke.drawVAO.append(Se,me),");"):Ye(Se.shared.vao,".setVAO(",Ke.drawVAO.append(Se,Ye),");"):Ye(Se.shared.vao,".setVAO(",Se.shared.vao,".targetVAO);"):(Ye(Se.shared.vao,".setVAO(null);"),Wa(Se,Ye,Ke,dr.attributes,mr),Wa(Se,me,Ke,dr.attributes,lr)),Ii(Se,Ye,Ke,dr.uniforms,mr),Ii(Se,me,Ke,dr.uniforms,lr),Vn(Se,Ye,me,Ke);else{var kr=Se.global.def("{}"),Ur=Ke.shader.progVar.append(Se,me),Or=me.def(Ur,".id"),qr=me.def(kr,"[",Or,"]");me(Se.shared.gl,".useProgram(",Ur,".program);","if(!",qr,"){",qr,"=",kr,"[",Or,"]=",Se.link(function(An){return ci(vu,Se,Ke,An,2)}),"(",Ur,");}",qr,".call(this,a0[",Qe,"],",Qe,");")}}function ke(Se,oe){var Ke=Se.proc("batch",2);Se.batchId="0",_a(Se,Ke);var dr=!1,gr=!0;Object.keys(oe.context).forEach(function(kr){dr=dr||oe.context[kr].propDep}),dr||(Qi(Se,Ke,oe.context),gr=!1);var Qe=oe.framebuffer,$e=!1;Qe?(Qe.propDep?dr=$e=!0:Qe.contextDep&&dr&&($e=!0),$e||sa(Se,Ke,Qe)):sa(Se,Ke,null),oe.state.viewport&&oe.state.viewport.propDep&&(dr=!0);function ir(kr){return kr.contextDep&&dr||kr.propDep}Sa(Se,Ke,oe),za(Se,Ke,oe.state,function(kr){return!ir(kr)}),(!oe.profile||!ir(oe.profile))&&ni(Se,Ke,oe,!1,"a1"),oe.contextDep=dr,oe.needsContext=gr,oe.needsFramebuffer=$e;var we=oe.shader.progVar;if(we.contextDep&&dr||we.propDep)Qf(Se,Ke,oe,null);else{var Ye=we.append(Se,Ke);if(Ke(Se.shared.gl,".useProgram(",Ye,".program);"),oe.shader.program)Qf(Se,Ke,oe,oe.shader.program);else{Ke(Se.shared.vao,".setVAO(null);");var me=Se.global.def("{}"),lr=Ke.def(Ye,".id"),mr=Ke.def(me,"[",lr,"]");Ke(Se.cond(mr).then(mr,".call(this,a0,a1);").else(mr,"=",me,"[",lr,"]=",Se.link(function(kr){return ci(Qf,Se,oe,kr,2)}),"(",Ye,");",mr,".call(this,a0,a1);"))}}Object.keys(oe.state).length>0&&Ke(Se.shared.current,".dirty=true;")}function Sr(Se,oe){var Ke=Se.proc("scope",3);Se.batchId="a2";var dr=Se.shared,gr=dr.current;Qi(Se,Ke,oe.context),oe.framebuffer&&oe.framebuffer.append(Se,Ke),gh(Object.keys(oe.state)).forEach(function($e){var ir=oe.state[$e],we=ir.append(Se,Ke);Mi(we)?we.forEach(function(Ye,me){Ke.set(Se.next[$e],"["+me+"]",Ye)}):Ke.set(dr.next,"."+$e,we)}),ni(Se,Ke,oe,!0,!0),[As,Au,Ts,zf,lu].forEach(function($e){var ir=oe.draw[$e];ir&&Ke.set(dr.draw,"."+$e,""+ir.append(Se,Ke))}),Object.keys(oe.uniforms).forEach(function($e){var ir=oe.uniforms[$e].append(Se,Ke);Array.isArray(ir)&&(ir="["+ir.join()+"]"),Ke.set(dr.uniforms,"["+fe.id($e)+"]",ir)}),Object.keys(oe.attributes).forEach(function($e){var ir=oe.attributes[$e].append(Se,Ke),we=Se.scopeAttrib($e);Object.keys(new q).forEach(function(Ye){Ke.set(we,"."+Ye,ir[Ye])})}),oe.scopeVAO&&Ke.set(dr.vao,".targetVAO",oe.scopeVAO.append(Se,Ke));function Qe($e){var ir=oe.shader[$e];ir&&Ke.set(dr.shader,"."+$e,ir.append(Se,Ke))}Qe(Cs),Qe(cu),Object.keys(oe.state).length>0&&(Ke(gr,".dirty=true;"),Ke.exit(gr,".dirty=true;")),Ke("a1(",Se.shared.context,",a0,",Se.batchId,");")}function xr(Se){if(!(typeof Se!="object"||Mi(Se))){for(var oe=Object.keys(Se),Ke=0;Ke<oe.length;++Ke)if(or.isDynamic(Se[oe[Ke]]))return!0;return!1}}function En(Se,oe,Ke){var dr=oe.static[Ke];if(!dr||!xr(dr))return;var gr=Se.global,Qe=Object.keys(dr),$e=!1,ir=!1,we=!1,Ye=Se.global.def("{}");Qe.forEach(function(lr){var mr=dr[lr];if(or.isDynamic(mr)){typeof mr=="function"&&(mr=dr[lr]=or.unbox(mr));var kr=no(mr,null);$e=$e||kr.thisDep,we=we||kr.propDep,ir=ir||kr.contextDep}else{switch(gr(Ye,".",lr,"="),typeof mr){case"number":gr(mr);break;case"string":gr('"',mr,'"');break;case"object":Array.isArray(mr)&&gr("[",mr.join(),"]");break;default:gr(Se.link(mr));break}gr(";")}});function me(lr,mr){Qe.forEach(function(kr){var Ur=dr[kr];if(or.isDynamic(Ur)){var Or=lr.invoke(mr,Ur);mr(Ye,".",kr,"=",Or,";")}})}oe.dynamic[Ke]=new or.DynamicVariable(mc,{thisDep:$e,contextDep:ir,propDep:we,ref:Ye,append:me}),delete oe.static[Ke]}function si(Se,oe,Ke,dr,gr){var Qe=Xr();Qe.stats=Qe.link(gr),Object.keys(oe.static).forEach(function(ir){En(Qe,oe,ir)}),Ic.forEach(function(ir){En(Qe,Se,ir)});var $e=ui(Se,oe,Ke,dr,Qe);return ha(Qe,$e),Sr(Qe,$e),ke(Qe,$e),M(Qe.compile(),{destroy:function(){$e.shader.program.destroy()}})}return{next:Ut,current:It,procs:function(){var Se=Xr(),oe=Se.proc("poll"),Ke=Se.proc("refresh"),dr=Se.block();oe(dr),Ke(dr);var gr=Se.shared,Qe=gr.gl,$e=gr.next,ir=gr.current;dr(ir,".dirty=false;"),sa(Se,oe),sa(Se,Ke,null,!0);var we;gt&&(we=Se.link(gt)),ze.oes_vertex_array_object&&Ke(Se.link(ze.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ye=0;Ye<wr.maxAttributes;++Ye){var me=Ke.def(gr.attributes,"[",Ye,"]"),lr=Se.cond(me,".buffer");lr.then(Qe,".enableVertexAttribArray(",Ye,");",Qe,".bindBuffer(",Pu,",",me,".buffer.buffer);",Qe,".vertexAttribPointer(",Ye,",",me,".size,",me,".type,",me,".normalized,",me,".stride,",me,".offset);").else(Qe,".disableVertexAttribArray(",Ye,");",Qe,".vertexAttrib4f(",Ye,",",me,".x,",me,".y,",me,".z,",me,".w);",me,".buffer=null;"),Ke(lr),gt&&Ke(we,".vertexAttribDivisorANGLE(",Ye,",",me,".divisor);")}return Ke(Se.shared.vao,".currentVAO=null;",Se.shared.vao,".setVAO(",Se.shared.vao,".targetVAO);"),Object.keys(ue).forEach(function(mr){var kr=ue[mr],Ur=dr.def($e,".",mr),Or=Se.block();Or("if(",Ur,"){",Qe,".enable(",kr,")}else{",Qe,".disable(",kr,")}",ir,".",mr,"=",Ur,";"),Ke(Or),oe("if(",Ur,"!==",ir,".",mr,"){",Or,"}")}),Object.keys(ae).forEach(function(mr){var kr=ae[mr],Ur=It[mr],Or,qr,An=Se.block();if(An(Qe,".",kr,"("),Mi(Ur)){var qn=Ur.length;Or=Se.global.def($e,".",mr),qr=Se.global.def(ir,".",mr),An(pn(qn,function(Mn){return Or+"["+Mn+"]"}),");",pn(qn,function(Mn){return qr+"["+Mn+"]="+Or+"["+Mn+"];"}).join("")),oe("if(",pn(qn,function(Mn){return Or+"["+Mn+"]!=="+qr+"["+Mn+"]"}).join("||"),"){",An,"}")}else Or=dr.def($e,".",mr),qr=dr.def(ir,".",mr),An(Or,");",ir,".",mr,"=",Or,";"),oe("if(",Or,"!==",qr,"){",An,"}");Ke(An)}),Se.compile()}(),compile:si}}function Cl(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Yh=34918,yh=34919,Lc=35007,Al=function(Ct,fe){if(!fe.ext_disjoint_timer_query)return null;var ze=[];function wr(){return ze.pop()||fe.ext_disjoint_timer_query.createQueryEXT()}function Rr(gt){ze.push(gt)}var br=[];function Ar(gt){var _t=wr();fe.ext_disjoint_timer_query.beginQueryEXT(Lc,_t),br.push(_t),L(br.length-1,br.length,gt)}function jr(){fe.ext_disjoint_timer_query.endQueryEXT(Lc)}function Hr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Kr=[];function Vr(){return Kr.pop()||new Hr}function Qr(gt){Kr.push(gt)}var d=[];function L(gt,_t,It){var Ut=Vr();Ut.startQueryIndex=gt,Ut.endQueryIndex=_t,Ut.sum=0,Ut.stats=It,d.push(Ut)}var j=[],q=[];function ht(){var gt,_t,It=br.length;if(It!==0){q.length=Math.max(q.length,It+1),j.length=Math.max(j.length,It+1),j[0]=0,q[0]=0;var Ut=0;for(gt=0,_t=0;_t<br.length;++_t){var Jt=br[_t];fe.ext_disjoint_timer_query.getQueryObjectEXT(Jt,yh)?(Ut+=fe.ext_disjoint_timer_query.getQueryObjectEXT(Jt,Yh),Rr(Jt)):br[gt++]=Jt,j[_t+1]=Ut,q[_t+1]=gt}for(br.length=gt,gt=0,_t=0;_t<d.length;++_t){var ue=d[_t],ae=ue.startQueryIndex,Ne=ue.endQueryIndex;ue.sum+=j[Ne]-j[ae];var er=q[ae],Pr=q[Ne];Pr===er?(ue.stats.gpuTime+=ue.sum/1e6,Qr(ue)):(ue.startQueryIndex=er,ue.endQueryIndex=Pr,d[gt++]=ue)}d.length=gt}}return{beginQuery:Ar,endQuery:jr,pushScopeStats:L,update:ht,getNumPendingQueries:function(){return br.length},clear:function(){ze.push.apply(ze,br);for(var gt=0;gt<ze.length;gt++)fe.ext_disjoint_timer_query.deleteQueryEXT(ze[gt]);br.length=0,ze.length=0},restore:function(){br.length=0,ze.length=0}}},Tl=16384,Os=256,Il=1024,lf=34962,kc="webglcontextlost",Ru="webglcontextrestored",$f=1,io=2,js=3;function Xs(Ct,fe){for(var ze=0;ze<Ct.length;++ze)if(Ct[ze]===fe)return ze;return-1}function Rc(Ct){var fe=vn(Ct);if(!fe)return null;var ze=fe.gl,wr=ze.getContextAttributes(),Rr=ze.isContextLost(),br=ln(ze,fe);if(!br)return null;var Ar=Cr(),jr=Cl(),Hr=br.extensions,Kr=Al(ze,Hr),Vr=yr(),Qr=ze.drawingBufferWidth,d=ze.drawingBufferHeight,L={tick:0,time:0,viewportWidth:Qr,viewportHeight:d,framebufferWidth:Qr,framebufferHeight:d,drawingBufferWidth:Qr,drawingBufferHeight:d,pixelRatio:fe.pixelRatio},j={},q={elements:null,primitive:4,count:-1,offset:0,instances:-1},ht=yo(ze,Hr),gt=ys(ze,jr,fe,It),_t=Gh(ze,Hr,ht,jr,gt);function It(Vn){return _t.destroyBuffer(Vn)}var Ut=Xo(ze,Hr,gt,jr),Jt=dl(ze,Ar,jr,fe),ue=Nh(ze,Hr,ht,function(){er.procs.poll()},L,jr,fe),ae=fc(ze,Hr,ht,jr,fe),Ne=hl(ze,Hr,ht,ue,ae,jr),er=Xh(ze,Ar,Hr,ht,gt,Ut,ue,Ne,j,_t,Jt,q,L,Kr,fe),Pr=$u(ze,Ne,er.procs.poll,L,wr,Hr,ht),ur=er.next,hr=ze.canvas,fr=[],Xr=[],fn=[],tn=[fe.onDestroy],Tn=null;function wn(){if(fr.length===0){Kr&&Kr.update(),Tn=null;return}Tn=Ae.next(wn),za();for(var Vn=fr.length-1;Vn>=0;--Vn){var ci=fr[Vn];ci&&ci(L,null,0)}ze.flush(),Kr&&Kr.update()}function Rn(){!Tn&&fr.length>0&&(Tn=Ae.next(wn))}function Kn(){Tn&&(Ae.cancel(wn),Tn=null)}function Fn(Vn){Vn.preventDefault(),Rr=!0,Kn(),Xr.forEach(function(ci){ci()})}function Vi(Vn){ze.getError(),Rr=!1,br.restore(),Jt.restore(),gt.restore(),ue.restore(),ae.restore(),Ne.restore(),_t.restore(),Kr&&Kr.restore(),er.procs.refresh(),Rn(),fn.forEach(function(ci){ci()})}hr&&(hr.addEventListener(kc,Fn,!1),hr.addEventListener(Ru,Vi,!1));function Qn(){fr.length=0,Kn(),hr&&(hr.removeEventListener(kc,Fn),hr.removeEventListener(Ru,Vi)),Jt.clear(),Ne.clear(),ae.clear(),ue.clear(),Ut.clear(),gt.clear(),_t.clear(),Kr&&Kr.clear(),tn.forEach(function(Vn){Vn()})}function oa(Vn){ct(!!Vn,"invalid args to regl({...})"),ct.type(Vn,"object","invalid args to regl({...})");function ci(gr){var Qe=M({},gr);delete Qe.uniforms,delete Qe.attributes,delete Qe.context,delete Qe.vao,"stencil"in Qe&&Qe.stencil.op&&(Qe.stencil.opBack=Qe.stencil.opFront=Qe.stencil.op,delete Qe.stencil.op);function $e(ir){if(ir in Qe){var we=Qe[ir];delete Qe[ir],Object.keys(we).forEach(function(Ye){Qe[ir+"."+Ye]=we[Ye]})}}return $e("blend"),$e("depth"),$e("cull"),$e("stencil"),$e("polygonOffset"),$e("scissor"),$e("sample"),"vao"in gr&&(Qe.vao=gr.vao),Qe}function yi(gr,Qe){var $e={},ir={};return Object.keys(gr).forEach(function(we){var Ye=gr[we];if(or.isDynamic(Ye)){ir[we]=or.unbox(Ye,we);return}else if(Qe&&Array.isArray(Ye)){for(var me=0;me<Ye.length;++me)if(or.isDynamic(Ye[me])){ir[we]=or.unbox(Ye,we);return}}$e[we]=Ye}),{dynamic:ir,static:$e}}var ha=yi(Vn.context||{},!0),vu=yi(Vn.uniforms||{},!0),Qf=yi(Vn.attributes||{},!1),ke=yi(ci(Vn),!1),Sr={gpuTime:0,cpuTime:0,count:0},xr=er.compile(ke,Qf,vu,ha,Sr),En=xr.draw,si=xr.batch,Se=xr.scope,oe=[];function Ke(gr){for(;oe.length<gr;)oe.push(null);return oe}function dr(gr,Qe){var $e;if(Rr&&ct.raise("context lost"),typeof gr=="function")return Se.call(this,null,gr,0);if(typeof Qe=="function")if(typeof gr=="number")for($e=0;$e<gr;++$e)Se.call(this,null,Qe,$e);else if(Array.isArray(gr))for($e=0;$e<gr.length;++$e)Se.call(this,gr[$e],Qe,$e);else return Se.call(this,gr,Qe,0);else if(typeof gr=="number"){if(gr>0)return si.call(this,Ke(gr|0),gr|0)}else if(Array.isArray(gr)){if(gr.length)return si.call(this,gr,gr.length)}else return En.call(this,gr)}return M(dr,{stats:Sr,destroy:function(){xr.destroy()}})}var Di=Ne.setFBO=oa({framebuffer:or.define.call(null,$f,"framebuffer")});function ui(Vn,ci){var yi=0;er.procs.poll();var ha=ci.color;ha&&(ze.clearColor(+ha[0]||0,+ha[1]||0,+ha[2]||0,+ha[3]||0),yi|=Tl),"depth"in ci&&(ze.clearDepth(+ci.depth),yi|=Os),"stencil"in ci&&(ze.clearStencil(ci.stencil|0),yi|=Il),ct(!!yi,"called regl.clear with no buffer specified"),ze.clear(yi)}function Qi(Vn){if(ct(typeof Vn=="object"&&Vn,"regl.clear() takes an object as input"),"framebuffer"in Vn)if(Vn.framebuffer&&Vn.framebuffer_reglType==="framebufferCube")for(var ci=0;ci<6;++ci)Di(M({framebuffer:Vn.framebuffer.faces[ci]},Vn),ui);else Di(Vn,ui);else ui(null,Vn)}function sa(Vn){ct.type(Vn,"function","regl.frame() callback must be a function"),fr.push(Vn);function ci(){var yi=Xs(fr,Vn);ct(yi>=0,"cannot cancel a frame twice");function ha(){var vu=Xs(fr,ha);fr[vu]=fr[fr.length-1],fr.length-=1,fr.length<=0&&Kn()}fr[yi]=ha}return Rn(),{cancel:ci}}function Sa(){var Vn=ur.viewport,ci=ur.scissor_box;Vn[0]=Vn[1]=ci[0]=ci[1]=0,L.viewportWidth=L.framebufferWidth=L.drawingBufferWidth=Vn[2]=ci[2]=ze.drawingBufferWidth,L.viewportHeight=L.framebufferHeight=L.drawingBufferHeight=Vn[3]=ci[3]=ze.drawingBufferHeight}function za(){L.tick+=1,L.time=ni(),Sa(),er.procs.poll()}function _a(){ue.refresh(),Sa(),er.procs.refresh(),Kr&&Kr.update()}function ni(){return(yr()-Vr)/1e3}_a();function Wa(Vn,ci){ct.type(ci,"function","listener callback must be a function");var yi;switch(Vn){case"frame":return sa(ci);case"lost":yi=Xr;break;case"restore":yi=fn;break;case"destroy":yi=tn;break;default:ct.raise("invalid event, must be one of frame,lost,restore,destroy")}return yi.push(ci),{cancel:function(){for(var ha=0;ha<yi.length;++ha)if(yi[ha]===ci){yi[ha]=yi[yi.length-1],yi.pop();return}}}}var Ii=M(oa,{clear:Qi,prop:or.define.bind(null,$f),context:or.define.bind(null,io),this:or.define.bind(null,js),draw:oa({}),buffer:function(Vn){return gt.create(Vn,lf,!1,!1)},elements:function(Vn){return Ut.create(Vn,!1)},texture:ue.create2D,cube:ue.createCube,renderbuffer:ae.create,framebuffer:Ne.create,framebufferCube:Ne.createCube,vao:_t.createVAO,attributes:wr,frame:sa,on:Wa,limits:ht,hasExtension:function(Vn){return ht.extensions.indexOf(Vn.toLowerCase())>=0},read:Pr,destroy:Qn,_gl:ze,_refresh:_a,poll:function(){za(),Kr&&Kr.update()},now:ni,stats:jr});return fe.onDone(null,Ii),Ii}return Rc})},5458:function(le,S,M){"use strict";var x=M(89161),z=Array.prototype.concat,k=Array.prototype.slice,E=le.exports=function(I){for(var m=[],y=0,v=I.length;y<v;y++){var p=I[y];x(p)?m=z.call(m,k.call(p)):m.push(p)}return m};E.wrap=function(N){return function(){return N(E(arguments))}}},79590:function(le,S,M){var x;(function(z){var k=/^\s+/,E=/\s+$/,N=0,I=z.round,m=z.min,y=z.max,v=z.random;function p(vt,bt){if(vt=vt||"",bt=bt||{},vt instanceof p)return vt;if(!(this instanceof p))return new p(vt,bt);var wt=g(vt);this._originalInput=vt,this._r=wt.r,this._g=wt.g,this._b=wt.b,this._a=wt.a,this._roundA=I(100*this._a)/100,this._format=bt.format||wt.format,this._gradientType=bt.gradientType,this._r<1&&(this._r=I(this._r)),this._g<1&&(this._g=I(this._g)),this._b<1&&(this._b=I(this._b)),this._ok=wt.ok,this._tc_id=N++}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var vt=this.toRgb();return(vt.r*299+vt.g*587+vt.b*114)/1e3},getLuminance:function(){var vt=this.toRgb(),bt,wt,D,tt,Ot,ct;return bt=vt.r/255,wt=vt.g/255,D=vt.b/255,bt<=.03928?tt=bt/12.92:tt=z.pow((bt+.055)/1.055,2.4),wt<=.03928?Ot=wt/12.92:Ot=z.pow((wt+.055)/1.055,2.4),D<=.03928?ct=D/12.92:ct=z.pow((D+.055)/1.055,2.4),.2126*tt+.7152*Ot+.0722*ct},setAlpha:function(vt){return this._a=qt(vt),this._roundA=I(100*this._a)/100,this},toHsv:function(){var vt=O(this._r,this._g,this._b);return{h:vt.h*360,s:vt.s,v:vt.v,a:this._a}},toHsvString:function(){var vt=O(this._r,this._g,this._b),bt=I(vt.h*360),wt=I(vt.s*100),D=I(vt.v*100);return this._a==1?"hsv("+bt+", "+wt+"%, "+D+"%)":"hsva("+bt+", "+wt+"%, "+D+"%, "+this._roundA+")"},toHsl:function(){var vt=w(this._r,this._g,this._b);return{h:vt.h*360,s:vt.s,l:vt.l,a:this._a}},toHslString:function(){var vt=w(this._r,this._g,this._b),bt=I(vt.h*360),wt=I(vt.s*100),D=I(vt.l*100);return this._a==1?"hsl("+bt+", "+wt+"%, "+D+"%)":"hsla("+bt+", "+wt+"%, "+D+"%, "+this._roundA+")"},toHex:function(vt){return l(this._r,this._g,this._b,vt)},toHexString:function(vt){return"#"+this.toHex(vt)},toHex8:function(vt){return K(this._r,this._g,this._b,this._a,vt)},toHex8String:function(vt){return"#"+this.toHex8(vt)},toRgb:function(){return{r:I(this._r),g:I(this._g),b:I(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+I(this._r)+", "+I(this._g)+", "+I(this._b)+")":"rgba("+I(this._r)+", "+I(this._g)+", "+I(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:I(re(this._r,255)*100)+"%",g:I(re(this._g,255)*100)+"%",b:I(re(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+I(re(this._r,255)*100)+"%, "+I(re(this._g,255)*100)+"%, "+I(re(this._b,255)*100)+"%)":"rgba("+I(re(this._r,255)*100)+"%, "+I(re(this._g,255)*100)+"%, "+I(re(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:st[l(this._r,this._g,this._b,!0)]||!1},toFilter:function(vt){var bt="#"+Z(this._r,this._g,this._b,this._a),wt=bt,D=this._gradientType?"GradientType = 1, ":"";if(vt){var tt=p(vt);wt="#"+Z(tt._r,tt._g,tt._b,tt._a)}return"progid:DXImageTransform.Microsoft.gradient("+D+"startColorstr="+bt+",endColorstr="+wt+")"},toString:function(vt){var bt=!!vt;vt=vt||this._format;var wt=!1,D=this._a<1&&this._a>=0,tt=!bt&&D&&(vt==="hex"||vt==="hex6"||vt==="hex3"||vt==="hex4"||vt==="hex8"||vt==="name");return tt?vt==="name"&&this._a===0?this.toName():this.toRgbString():(vt==="rgb"&&(wt=this.toRgbString()),vt==="prgb"&&(wt=this.toPercentageRgbString()),(vt==="hex"||vt==="hex6")&&(wt=this.toHexString()),vt==="hex3"&&(wt=this.toHexString(!0)),vt==="hex4"&&(wt=this.toHex8String(!0)),vt==="hex8"&&(wt=this.toHex8String()),vt==="name"&&(wt=this.toName()),vt==="hsl"&&(wt=this.toHslString()),vt==="hsv"&&(wt=this.toHsvString()),wt||this.toHexString())},clone:function(){return p(this.toString())},_applyModification:function(vt,bt){var wt=vt.apply(null,[this].concat([].slice.call(bt)));return this._r=wt._r,this._g=wt._g,this._b=wt._b,this.setAlpha(wt._a),this},lighten:function(){return this._applyModification(et,arguments)},brighten:function(){return this._applyModification(it,arguments)},darken:function(){return this._applyModification(J,arguments)},desaturate:function(){return this._applyModification(X,arguments)},saturate:function(){return this._applyModification(W,arguments)},greyscale:function(){return this._applyModification(U,arguments)},spin:function(){return this._applyModification(rt,arguments)},_applyCombination:function(vt,bt){return vt.apply(null,[this].concat([].slice.call(bt)))},analogous:function(){return this._applyCombination(zt,arguments)},complement:function(){return this._applyCombination(mt,arguments)},monochromatic:function(){return this._applyCombination(Vt,arguments)},splitcomplement:function(){return this._applyCombination(Mt,arguments)},triad:function(){return this._applyCombination(pt,arguments)},tetrad:function(){return this._applyCombination(ft,arguments)}},p.fromRatio=function(vt,bt){if(typeof vt=="object"){var wt={};for(var D in vt)vt.hasOwnProperty(D)&&(D==="a"?wt[D]=vt[D]:wt[D]=Dt(vt[D]));vt=wt}return p(vt,bt)};function g(vt){var bt={r:0,g:0,b:0},wt=1,D=null,tt=null,Ot=null,ct=!1,ie=!1;return typeof vt=="string"&&(vt=Kt(vt)),typeof vt=="object"&&(Tt(vt.r)&&Tt(vt.g)&&Tt(vt.b)?(bt=T(vt.r,vt.g,vt.b),ct=!0,ie=String(vt.r).substr(-1)==="%"?"prgb":"rgb"):Tt(vt.h)&&Tt(vt.s)&&Tt(vt.v)?(D=Dt(vt.s),tt=Dt(vt.v),bt=b(vt.h,D,tt),ct=!0,ie="hsv"):Tt(vt.h)&&Tt(vt.s)&&Tt(vt.l)&&(D=Dt(vt.s),Ot=Dt(vt.l),bt=C(vt.h,D,Ot),ct=!0,ie="hsl"),vt.hasOwnProperty("a")&&(wt=vt.a)),wt=qt(wt),{ok:ct,format:vt.format||ie,r:m(255,y(bt.r,0)),g:m(255,y(bt.g,0)),b:m(255,y(bt.b,0)),a:wt}}function T(vt,bt,wt){return{r:re(vt,255)*255,g:re(bt,255)*255,b:re(wt,255)*255}}function w(vt,bt,wt){vt=re(vt,255),bt=re(bt,255),wt=re(wt,255);var D=y(vt,bt,wt),tt=m(vt,bt,wt),Ot,ct,ie=(D+tt)/2;if(D==tt)Ot=ct=0;else{var pe=D-tt;switch(ct=ie>.5?pe/(2-D-tt):pe/(D+tt),D){case vt:Ot=(bt-wt)/pe+(bt<wt?6:0);break;case bt:Ot=(wt-vt)/pe+2;break;case wt:Ot=(vt-bt)/pe+4;break}Ot/=6}return{h:Ot,s:ct,l:ie}}function C(vt,bt,wt){var D,tt,Ot;vt=re(vt,360),bt=re(bt,100),wt=re(wt,100);function ct(Ge,Re,Je){return Je<0&&(Je+=1),Je>1&&(Je-=1),Je<1/6?Ge+(Re-Ge)*6*Je:Je<1/2?Re:Je<2/3?Ge+(Re-Ge)*(2/3-Je)*6:Ge}if(bt===0)D=tt=Ot=wt;else{var ie=wt<.5?wt*(1+bt):wt+bt-wt*bt,pe=2*wt-ie;D=ct(pe,ie,vt+1/3),tt=ct(pe,ie,vt),Ot=ct(pe,ie,vt-1/3)}return{r:D*255,g:tt*255,b:Ot*255}}function O(vt,bt,wt){vt=re(vt,255),bt=re(bt,255),wt=re(wt,255);var D=y(vt,bt,wt),tt=m(vt,bt,wt),Ot,ct,ie=D,pe=D-tt;if(ct=D===0?0:pe/D,D==tt)Ot=0;else{switch(D){case vt:Ot=(bt-wt)/pe+(bt<wt?6:0);break;case bt:Ot=(wt-vt)/pe+2;break;case wt:Ot=(vt-bt)/pe+4;break}Ot/=6}return{h:Ot,s:ct,v:ie}}function b(vt,bt,wt){vt=re(vt,360)*6,bt=re(bt,100),wt=re(wt,100);var D=z.floor(vt),tt=vt-D,Ot=wt*(1-bt),ct=wt*(1-tt*bt),ie=wt*(1-(1-tt)*bt),pe=D%6,Ge=[wt,ct,Ot,Ot,ie,wt][pe],Re=[ie,wt,wt,ct,Ot,Ot][pe],Je=[Ot,Ot,ie,wt,wt,ct][pe];return{r:Ge*255,g:Re*255,b:Je*255}}function l(vt,bt,wt,D){var tt=[Rt(I(vt).toString(16)),Rt(I(bt).toString(16)),Rt(I(wt).toString(16))];return D&&tt[0].charAt(0)==tt[0].charAt(1)&&tt[1].charAt(0)==tt[1].charAt(1)&&tt[2].charAt(0)==tt[2].charAt(1)?tt[0].charAt(0)+tt[1].charAt(0)+tt[2].charAt(0):tt.join("")}function K(vt,bt,wt,D,tt){var Ot=[Rt(I(vt).toString(16)),Rt(I(bt).toString(16)),Rt(I(wt).toString(16)),Rt(At(D))];return tt&&Ot[0].charAt(0)==Ot[0].charAt(1)&&Ot[1].charAt(0)==Ot[1].charAt(1)&&Ot[2].charAt(0)==Ot[2].charAt(1)&&Ot[3].charAt(0)==Ot[3].charAt(1)?Ot[0].charAt(0)+Ot[1].charAt(0)+Ot[2].charAt(0)+Ot[3].charAt(0):Ot.join("")}function Z(vt,bt,wt,D){var tt=[Rt(At(D)),Rt(I(vt).toString(16)),Rt(I(bt).toString(16)),Rt(I(wt).toString(16))];return tt.join("")}p.equals=function(vt,bt){return!vt||!bt?!1:p(vt).toRgbString()==p(bt).toRgbString()},p.random=function(){return p.fromRatio({r:v(),g:v(),b:v()})};function X(vt,bt){bt=bt===0?0:bt||10;var wt=p(vt).toHsl();return wt.s-=bt/100,wt.s=Nt(wt.s),p(wt)}function W(vt,bt){bt=bt===0?0:bt||10;var wt=p(vt).toHsl();return wt.s+=bt/100,wt.s=Nt(wt.s),p(wt)}function U(vt){return p(vt).desaturate(100)}function et(vt,bt){bt=bt===0?0:bt||10;var wt=p(vt).toHsl();return wt.l+=bt/100,wt.l=Nt(wt.l),p(wt)}function it(vt,bt){bt=bt===0?0:bt||10;var wt=p(vt).toRgb();return wt.r=y(0,m(255,wt.r-I(255*-(bt/100)))),wt.g=y(0,m(255,wt.g-I(255*-(bt/100)))),wt.b=y(0,m(255,wt.b-I(255*-(bt/100)))),p(wt)}function J(vt,bt){bt=bt===0?0:bt||10;var wt=p(vt).toHsl();return wt.l-=bt/100,wt.l=Nt(wt.l),p(wt)}function rt(vt,bt){var wt=p(vt).toHsl(),D=(wt.h+bt)%360;return wt.h=D<0?360+D:D,p(wt)}function mt(vt){var bt=p(vt).toHsl();return bt.h=(bt.h+180)%360,p(bt)}function pt(vt){var bt=p(vt).toHsl(),wt=bt.h;return[p(vt),p({h:(wt+120)%360,s:bt.s,l:bt.l}),p({h:(wt+240)%360,s:bt.s,l:bt.l})]}function ft(vt){var bt=p(vt).toHsl(),wt=bt.h;return[p(vt),p({h:(wt+90)%360,s:bt.s,l:bt.l}),p({h:(wt+180)%360,s:bt.s,l:bt.l}),p({h:(wt+270)%360,s:bt.s,l:bt.l})]}function Mt(vt){var bt=p(vt).toHsl(),wt=bt.h;return[p(vt),p({h:(wt+72)%360,s:bt.s,l:bt.l}),p({h:(wt+216)%360,s:bt.s,l:bt.l})]}function zt(vt,bt,wt){bt=bt||6,wt=wt||30;var D=p(vt).toHsl(),tt=360/wt,Ot=[p(vt)];for(D.h=(D.h-(tt*bt>>1)+720)%360;--bt;)D.h=(D.h+tt)%360,Ot.push(p(D));return Ot}function Vt(vt,bt){bt=bt||6;for(var wt=p(vt).toHsv(),D=wt.h,tt=wt.s,Ot=wt.v,ct=[],ie=1/bt;bt--;)ct.push(p({h:D,s:tt,v:Ot})),Ot=(Ot+ie)%1;return ct}p.mix=function(vt,bt,wt){wt=wt===0?0:wt||50;var D=p(vt).toRgb(),tt=p(bt).toRgb(),Ot=wt/100,ct={r:(tt.r-D.r)*Ot+D.r,g:(tt.g-D.g)*Ot+D.g,b:(tt.b-D.b)*Ot+D.b,a:(tt.a-D.a)*Ot+D.a};return p(ct)},p.readability=function(vt,bt){var wt=p(vt),D=p(bt);return(z.max(wt.getLuminance(),D.getLuminance())+.05)/(z.min(wt.getLuminance(),D.getLuminance())+.05)},p.isReadable=function(vt,bt,wt){var D=p.readability(vt,bt),tt,Ot;switch(Ot=!1,tt=Ee(wt),tt.level+tt.size){case"AAsmall":case"AAAlarge":Ot=D>=4.5;break;case"AAlarge":Ot=D>=3;break;case"AAAsmall":Ot=D>=7;break}return Ot},p.mostReadable=function(vt,bt,wt){var D=null,tt=0,Ot,ct,ie,pe;wt=wt||{},ct=wt.includeFallbackColors,ie=wt.level,pe=wt.size;for(var Ge=0;Ge<bt.length;Ge++)Ot=p.readability(vt,bt[Ge]),Ot>tt&&(tt=Ot,D=p(bt[Ge]));return p.isReadable(vt,D,{level:ie,size:pe})||!ct?D:(wt.includeFallbackColors=!1,p.mostReadable(vt,["#fff","#000"],wt))};var kt=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},st=p.hexNames=St(kt);function St(vt){var bt={};for(var wt in vt)vt.hasOwnProperty(wt)&&(bt[vt[wt]]=wt);return bt}function qt(vt){return vt=parseFloat(vt),(isNaN(vt)||vt<0||vt>1)&&(vt=1),vt}function re(vt,bt){Te(vt)&&(vt="100%");var wt=nr(vt);return vt=m(bt,y(0,parseFloat(vt))),wt&&(vt=parseInt(vt*bt,10)/100),z.abs(vt-bt)<1e-6?1:vt%bt/parseFloat(bt)}function Nt(vt){return m(1,y(0,vt))}function be(vt){return parseInt(vt,16)}function Te(vt){return typeof vt=="string"&&vt.indexOf(".")!=-1&&parseFloat(vt)===1}function nr(vt){return typeof vt=="string"&&vt.indexOf("%")!=-1}function Rt(vt){return vt.length==1?"0"+vt:""+vt}function Dt(vt){return vt<=1&&(vt=vt*100+"%"),vt}function At(vt){return z.round(parseFloat(vt)*255).toString(16)}function Xt(vt){return be(vt)/255}var $t=function(){var vt="[-\\+]?\\d+%?",bt="[-\\+]?\\d*\\.\\d+%?",wt="(?:"+bt+")|(?:"+vt+")",D="[\\s|\\(]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")\\s*\\)?",tt="[\\s|\\(]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")\\s*\\)?";return{CSS_UNIT:new RegExp(wt),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+tt),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+tt),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+tt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Tt(vt){return!!$t.CSS_UNIT.exec(vt)}function Kt(vt){vt=vt.replace(k,"").replace(E,"").toLowerCase();var bt=!1;if(kt[vt])vt=kt[vt],bt=!0;else if(vt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var wt;return(wt=$t.rgb.exec(vt))?{r:wt[1],g:wt[2],b:wt[3]}:(wt=$t.rgba.exec(vt))?{r:wt[1],g:wt[2],b:wt[3],a:wt[4]}:(wt=$t.hsl.exec(vt))?{h:wt[1],s:wt[2],l:wt[3]}:(wt=$t.hsla.exec(vt))?{h:wt[1],s:wt[2],l:wt[3],a:wt[4]}:(wt=$t.hsv.exec(vt))?{h:wt[1],s:wt[2],v:wt[3]}:(wt=$t.hsva.exec(vt))?{h:wt[1],s:wt[2],v:wt[3],a:wt[4]}:(wt=$t.hex8.exec(vt))?{r:be(wt[1]),g:be(wt[2]),b:be(wt[3]),a:Xt(wt[4]),format:bt?"name":"hex8"}:(wt=$t.hex6.exec(vt))?{r:be(wt[1]),g:be(wt[2]),b:be(wt[3]),format:bt?"name":"hex"}:(wt=$t.hex4.exec(vt))?{r:be(wt[1]+""+wt[1]),g:be(wt[2]+""+wt[2]),b:be(wt[3]+""+wt[3]),a:Xt(wt[4]+""+wt[4]),format:bt?"name":"hex8"}:(wt=$t.hex3.exec(vt))?{r:be(wt[1]+""+wt[1]),g:be(wt[2]+""+wt[2]),b:be(wt[3]+""+wt[3]),format:bt?"name":"hex"}:!1}function Ee(vt){var bt,wt;return vt=vt||{level:"AA",size:"small"},bt=(vt.level||"AA").toUpperCase(),wt=(vt.size||"small").toLowerCase(),bt!=="AA"&&bt!=="AAA"&&(bt="AA"),wt!=="small"&&wt!=="large"&&(wt="small"),{level:bt,size:wt}}le.exports?le.exports=p:(x=function(){return p}.call(S,M,S,le),x!==void 0&&(le.exports=x))})(Math)},98725:function(le,S,M){"use strict";M.d(S,{Jh:function(){return v},ZT:function(){return z},_T:function(){return E},mG:function(){return y},pi:function(){return k},pr:function(){return O}});var x=function(pt,ft){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,zt){Mt.__proto__=zt}||function(Mt,zt){for(var Vt in zt)Object.prototype.hasOwnProperty.call(zt,Vt)&&(Mt[Vt]=zt[Vt])},x(pt,ft)};function z(pt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");x(pt,ft);function Mt(){this.constructor=pt}pt.prototype=ft===null?Object.create(ft):(Mt.prototype=ft.prototype,new Mt)}var k=function(){return k=Object.assign||function(ft){for(var Mt,zt=1,Vt=arguments.length;zt<Vt;zt++){Mt=arguments[zt];for(var kt in Mt)Object.prototype.hasOwnProperty.call(Mt,kt)&&(ft[kt]=Mt[kt])}return ft},k.apply(this,arguments)};function E(pt,ft){var Mt={};for(var zt in pt)Object.prototype.hasOwnProperty.call(pt,zt)&&ft.indexOf(zt)<0&&(Mt[zt]=pt[zt]);if(pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Vt=0,zt=Object.getOwnPropertySymbols(pt);Vt<zt.length;Vt++)ft.indexOf(zt[Vt])<0&&Object.prototype.propertyIsEnumerable.call(pt,zt[Vt])&&(Mt[zt[Vt]]=pt[zt[Vt]]);return Mt}function N(pt,ft,Mt,zt){var Vt=arguments.length,kt=Vt<3?ft:zt===null?zt=Object.getOwnPropertyDescriptor(ft,Mt):zt,st;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kt=Reflect.decorate(pt,ft,Mt,zt);else for(var St=pt.length-1;St>=0;St--)(st=pt[St])&&(kt=(Vt<3?st(kt):Vt>3?st(ft,Mt,kt):st(ft,Mt))||kt);return Vt>3&&kt&&Object.defineProperty(ft,Mt,kt),kt}function I(pt,ft){return function(Mt,zt){ft(Mt,zt,pt)}}function m(pt,ft){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(pt,ft)}function y(pt,ft,Mt,zt){function Vt(kt){return kt instanceof Mt?kt:new Mt(function(st){st(kt)})}return new(Mt||(Mt=Promise))(function(kt,st){function St(Nt){try{re(zt.next(Nt))}catch(be){st(be)}}function qt(Nt){try{re(zt.throw(Nt))}catch(be){st(be)}}function re(Nt){Nt.done?kt(Nt.value):Vt(Nt.value).then(St,qt)}re((zt=zt.apply(pt,ft||[])).next())})}function v(pt,ft){var Mt={label:0,sent:function(){if(kt[0]&1)throw kt[1];return kt[1]},trys:[],ops:[]},zt,Vt,kt,st;return st={next:St(0),throw:St(1),return:St(2)},typeof Symbol=="function"&&(st[Symbol.iterator]=function(){return this}),st;function St(re){return function(Nt){return qt([re,Nt])}}function qt(re){if(zt)throw new TypeError("Generator is already executing.");for(;st&&(st=0,re[0]&&(Mt=0)),Mt;)try{if(zt=1,Vt&&(kt=re[0]&2?Vt.return:re[0]?Vt.throw||((kt=Vt.return)&&kt.call(Vt),0):Vt.next)&&!(kt=kt.call(Vt,re[1])).done)return kt;switch(Vt=0,kt&&(re=[re[0]&2,kt.value]),re[0]){case 0:case 1:kt=re;break;case 4:return Mt.label++,{value:re[1],done:!1};case 5:Mt.label++,Vt=re[1],re=[0];continue;case 7:re=Mt.ops.pop(),Mt.trys.pop();continue;default:if(kt=Mt.trys,!(kt=kt.length>0&&kt[kt.length-1])&&(re[0]===6||re[0]===2)){Mt=0;continue}if(re[0]===3&&(!kt||re[1]>kt[0]&&re[1]<kt[3])){Mt.label=re[1];break}if(re[0]===6&&Mt.label<kt[1]){Mt.label=kt[1],kt=re;break}if(kt&&Mt.label<kt[2]){Mt.label=kt[2],Mt.ops.push(re);break}kt[2]&&Mt.ops.pop(),Mt.trys.pop();continue}re=ft.call(pt,Mt)}catch(Nt){re=[6,Nt],Vt=0}finally{zt=kt=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}}var p=Object.create?function(pt,ft,Mt,zt){zt===void 0&&(zt=Mt);var Vt=Object.getOwnPropertyDescriptor(ft,Mt);(!Vt||("get"in Vt?!ft.__esModule:Vt.writable||Vt.configurable))&&(Vt={enumerable:!0,get:function(){return ft[Mt]}}),Object.defineProperty(pt,zt,Vt)}:function(pt,ft,Mt,zt){zt===void 0&&(zt=Mt),pt[zt]=ft[Mt]};function g(pt,ft){for(var Mt in pt)Mt!=="default"&&!Object.prototype.hasOwnProperty.call(ft,Mt)&&p(ft,pt,Mt)}function T(pt){var ft=typeof Symbol=="function"&&Symbol.iterator,Mt=ft&&pt[ft],zt=0;if(Mt)return Mt.call(pt);if(pt&&typeof pt.length=="number")return{next:function(){return pt&&zt>=pt.length&&(pt=void 0),{value:pt&&pt[zt++],done:!pt}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(pt,ft){var Mt=typeof Symbol=="function"&&pt[Symbol.iterator];if(!Mt)return pt;var zt=Mt.call(pt),Vt,kt=[],st;try{for(;(ft===void 0||ft-- >0)&&!(Vt=zt.next()).done;)kt.push(Vt.value)}catch(St){st={error:St}}finally{try{Vt&&!Vt.done&&(Mt=zt.return)&&Mt.call(zt)}finally{if(st)throw st.error}}return kt}function C(){for(var pt=[],ft=0;ft<arguments.length;ft++)pt=pt.concat(w(arguments[ft]));return pt}function O(){for(var pt=0,ft=0,Mt=arguments.length;ft<Mt;ft++)pt+=arguments[ft].length;for(var zt=Array(pt),Vt=0,ft=0;ft<Mt;ft++)for(var kt=arguments[ft],st=0,St=kt.length;st<St;st++,Vt++)zt[Vt]=kt[st];return zt}function b(pt,ft,Mt){if(Mt||arguments.length===2)for(var zt=0,Vt=ft.length,kt;zt<Vt;zt++)(kt||!(zt in ft))&&(kt||(kt=Array.prototype.slice.call(ft,0,zt)),kt[zt]=ft[zt]);return pt.concat(kt||Array.prototype.slice.call(ft))}function l(pt){return this instanceof l?(this.v=pt,this):new l(pt)}function K(pt,ft,Mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var zt=Mt.apply(pt,ft||[]),Vt,kt=[];return Vt={},st("next"),st("throw"),st("return"),Vt[Symbol.asyncIterator]=function(){return this},Vt;function st(Te){zt[Te]&&(Vt[Te]=function(nr){return new Promise(function(Rt,Dt){kt.push([Te,nr,Rt,Dt])>1||St(Te,nr)})})}function St(Te,nr){try{qt(zt[Te](nr))}catch(Rt){be(kt[0][3],Rt)}}function qt(Te){Te.value instanceof l?Promise.resolve(Te.value.v).then(re,Nt):be(kt[0][2],Te)}function re(Te){St("next",Te)}function Nt(Te){St("throw",Te)}function be(Te,nr){Te(nr),kt.shift(),kt.length&&St(kt[0][0],kt[0][1])}}function Z(pt){var ft,Mt;return ft={},zt("next"),zt("throw",function(Vt){throw Vt}),zt("return"),ft[Symbol.iterator]=function(){return this},ft;function zt(Vt,kt){ft[Vt]=pt[Vt]?function(st){return(Mt=!Mt)?{value:l(pt[Vt](st)),done:Vt==="return"}:kt?kt(st):st}:kt}}function X(pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ft=pt[Symbol.asyncIterator],Mt;return ft?ft.call(pt):(pt=typeof T=="function"?T(pt):pt[Symbol.iterator](),Mt={},zt("next"),zt("throw"),zt("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt);function zt(kt){Mt[kt]=pt[kt]&&function(st){return new Promise(function(St,qt){st=pt[kt](st),Vt(St,qt,st.done,st.value)})}}function Vt(kt,st,St,qt){Promise.resolve(qt).then(function(re){kt({value:re,done:St})},st)}}function W(pt,ft){return Object.defineProperty?Object.defineProperty(pt,"raw",{value:ft}):pt.raw=ft,pt}var U=Object.create?function(pt,ft){Object.defineProperty(pt,"default",{enumerable:!0,value:ft})}:function(pt,ft){pt.default=ft};function et(pt){if(pt&&pt.__esModule)return pt;var ft={};if(pt!=null)for(var Mt in pt)Mt!=="default"&&Object.prototype.hasOwnProperty.call(pt,Mt)&&p(ft,pt,Mt);return U(ft,pt),ft}function it(pt){return pt&&pt.__esModule?pt:{default:pt}}function J(pt,ft,Mt,zt){if(Mt==="a"&&!zt)throw new TypeError("Private accessor was defined without a getter");if(typeof ft=="function"?pt!==ft||!zt:!ft.has(pt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Mt==="m"?zt:Mt==="a"?zt.call(pt):zt?zt.value:ft.get(pt)}function rt(pt,ft,Mt,zt,Vt){if(zt==="m")throw new TypeError("Private method is not writable");if(zt==="a"&&!Vt)throw new TypeError("Private accessor was defined without a setter");if(typeof ft=="function"?pt!==ft||!Vt:!ft.has(pt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return zt==="a"?Vt.call(pt,Mt):Vt?Vt.value=Mt:ft.set(pt,Mt),Mt}function mt(pt,ft){if(ft===null||typeof ft!="object"&&typeof ft!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof pt=="function"?ft===pt:pt.has(ft)}},87599:function(le,S,M){"use strict";M.r(S),M.d(S,{forceCenter:function(){return x},forceCollide:function(){return m},forceLink:function(){return T},forceManyBody:function(){return Ee},forceRadial:function(){return vt},forceSimulation:function(){return Kt},forceX:function(){return bt},forceY:function(){return wt}});function x(D,tt){var Ot,ct=1;D==null&&(D=0),tt==null&&(tt=0);function ie(){var pe,Ge=Ot.length,Re,Je=0,Ve=0;for(pe=0;pe<Ge;++pe)Re=Ot[pe],Je+=Re.x,Ve+=Re.y;for(Je=(Je/Ge-D)*ct,Ve=(Ve/Ge-tt)*ct,pe=0;pe<Ge;++pe)Re=Ot[pe],Re.x-=Je,Re.y-=Ve}return ie.initialize=function(pe){Ot=pe},ie.x=function(pe){return arguments.length?(D=+pe,ie):D},ie.y=function(pe){return arguments.length?(tt=+pe,ie):tt},ie.strength=function(pe){return arguments.length?(ct=+pe,ie):ct},ie}var z=M(90696);function k(D){return function(){return D}}function E(D){return(D()-.5)*1e-6}function N(D){return D.x+D.vx}function I(D){return D.y+D.vy}function m(D){var tt,Ot,ct,ie=1,pe=1;typeof D!="function"&&(D=k(D==null?1:+D));function Ge(){for(var Ve,ce=tt.length,Le,je,Be,vr,or,Ae,yr=0;yr<pe;++yr)for(Le=(0,z.Z)(tt,N,I).visitAfter(Re),Ve=0;Ve<ce;++Ve)je=tt[Ve],or=Ot[je.index],Ae=or*or,Be=je.x+je.vx,vr=je.y+je.vy,Le.visit(Cr);function Cr(zr,Mr,un,hn,Un){var nn=zr.data,vn=zr.r,ln=or+vn;if(nn){if(nn.index>je.index){var pn=Be-nn.x-nn.vx,Bn=vr-nn.y-nn.vy,Oe=pn*pn+Bn*Bn;Oe<ln*ln&&(pn===0&&(pn=E(ct),Oe+=pn*pn),Bn===0&&(Bn=E(ct),Oe+=Bn*Bn),Oe=(ln-(Oe=Math.sqrt(Oe)))/Oe*ie,je.vx+=(pn*=Oe)*(ln=(vn*=vn)/(Ae+vn)),je.vy+=(Bn*=Oe)*ln,nn.vx-=pn*(ln=1-ln),nn.vy-=Bn*ln)}return}return Mr>Be+ln||hn<Be-ln||un>vr+ln||Un<vr-ln}}function Re(Ve){if(Ve.data)return Ve.r=Ot[Ve.data.index];for(var ce=Ve.r=0;ce<4;++ce)Ve[ce]&&Ve[ce].r>Ve.r&&(Ve.r=Ve[ce].r)}function Je(){if(tt){var Ve,ce=tt.length,Le;for(Ot=new Array(ce),Ve=0;Ve<ce;++Ve)Le=tt[Ve],Ot[Le.index]=+D(Le,Ve,tt)}}return Ge.initialize=function(Ve,ce){tt=Ve,ct=ce,Je()},Ge.iterations=function(Ve){return arguments.length?(pe=+Ve,Ge):pe},Ge.strength=function(Ve){return arguments.length?(ie=+Ve,Ge):ie},Ge.radius=function(Ve){return arguments.length?(D=typeof Ve=="function"?Ve:k(+Ve),Je(),Ge):D},Ge}var y=M(64020),v=M.n(y);function p(D){return D.index}function g(D,tt){var Ot=D.get(tt);if(!Ot)throw new Error("node not found: "+tt);return Ot}function T(D){var tt=p,Ot=Le,ct,ie=k(30),pe,Ge,Re,Je,Ve,ce=1;D==null&&(D=[]);function Le(Ae){return 1/Math.min(Re[Ae.source.index],Re[Ae.target.index])}function je(Ae){for(var yr=0,Cr=D.length;yr<ce;++yr)for(var zr=0,Mr,un,hn,Un,nn,vn,ln;zr<Cr;++zr)Mr=D[zr],un=Mr.source,hn=Mr.target,Un=hn.x+hn.vx-un.x-un.vx||E(Ve),nn=hn.y+hn.vy-un.y-un.vy||E(Ve),vn=Math.sqrt(Un*Un+nn*nn),vn=(vn-pe[zr])/vn*Ae*ct[zr],Un*=vn,nn*=vn,hn.vx-=Un*(ln=Je[zr]),hn.vy-=nn*ln,un.vx+=Un*(ln=1-ln),un.vy+=nn*ln}function Be(){if(Ge){var Ae,yr=Ge.length,Cr=D.length,zr=new Map(Ge.map(function(un,hn){return[tt(un,hn,Ge),un]})),Mr;for(Ae=0,Re=new Array(yr);Ae<Cr;++Ae)Mr=D[Ae],Mr.index=Ae,v()(Mr.source)!=="object"&&(Mr.source=g(zr,Mr.source)),v()(Mr.target)!=="object"&&(Mr.target=g(zr,Mr.target)),Re[Mr.source.index]=(Re[Mr.source.index]||0)+1,Re[Mr.target.index]=(Re[Mr.target.index]||0)+1;for(Ae=0,Je=new Array(Cr);Ae<Cr;++Ae)Mr=D[Ae],Je[Ae]=Re[Mr.source.index]/(Re[Mr.source.index]+Re[Mr.target.index]);ct=new Array(Cr),vr(),pe=new Array(Cr),or()}}function vr(){if(Ge)for(var Ae=0,yr=D.length;Ae<yr;++Ae)ct[Ae]=+Ot(D[Ae],Ae,D)}function or(){if(Ge)for(var Ae=0,yr=D.length;Ae<yr;++Ae)pe[Ae]=+ie(D[Ae],Ae,D)}return je.initialize=function(Ae,yr){Ge=Ae,Ve=yr,Be()},je.links=function(Ae){return arguments.length?(D=Ae,Be(),je):D},je.id=function(Ae){return arguments.length?(tt=Ae,je):tt},je.iterations=function(Ae){return arguments.length?(ce=+Ae,je):ce},je.strength=function(Ae){return arguments.length?(Ot=typeof Ae=="function"?Ae:k(+Ae),vr(),je):Ot},je.distance=function(Ae){return arguments.length?(ie=typeof Ae=="function"?Ae:k(+Ae),or(),je):ie},je}var w={value:function(){}};function C(){for(var D=0,tt=arguments.length,Ot={},ct;D<tt;++D){if(!(ct=arguments[D]+"")||ct in Ot||/[\s.]/.test(ct))throw new Error("illegal type: "+ct);Ot[ct]=[]}return new O(Ot)}function O(D){this._=D}function b(D,tt){return D.trim().split(/^|\s+/).map(function(Ot){var ct="",ie=Ot.indexOf(".");if(ie>=0&&(ct=Ot.slice(ie+1),Ot=Ot.slice(0,ie)),Ot&&!tt.hasOwnProperty(Ot))throw new Error("unknown type: "+Ot);return{type:Ot,name:ct}})}O.prototype=C.prototype={constructor:O,on:function(tt,Ot){var ct=this._,ie=b(tt+"",ct),pe,Ge=-1,Re=ie.length;if(arguments.length<2){for(;++Ge<Re;)if((pe=(tt=ie[Ge]).type)&&(pe=l(ct[pe],tt.name)))return pe;return}if(Ot!=null&&typeof Ot!="function")throw new Error("invalid callback: "+Ot);for(;++Ge<Re;)if(pe=(tt=ie[Ge]).type)ct[pe]=K(ct[pe],tt.name,Ot);else if(Ot==null)for(pe in ct)ct[pe]=K(ct[pe],tt.name,null);return this},copy:function(){var tt={},Ot=this._;for(var ct in Ot)tt[ct]=Ot[ct].slice();return new O(tt)},call:function(tt,Ot){if((pe=arguments.length-2)>0)for(var ct=new Array(pe),ie=0,pe,Ge;ie<pe;++ie)ct[ie]=arguments[ie+2];if(!this._.hasOwnProperty(tt))throw new Error("unknown type: "+tt);for(Ge=this._[tt],ie=0,pe=Ge.length;ie<pe;++ie)Ge[ie].value.apply(Ot,ct)},apply:function(tt,Ot,ct){if(!this._.hasOwnProperty(tt))throw new Error("unknown type: "+tt);for(var ie=this._[tt],pe=0,Ge=ie.length;pe<Ge;++pe)ie[pe].value.apply(Ot,ct)}};function l(D,tt){for(var Ot=0,ct=D.length,ie;Ot<ct;++Ot)if((ie=D[Ot]).name===tt)return ie.value}function K(D,tt,Ot){for(var ct=0,ie=D.length;ct<ie;++ct)if(D[ct].name===tt){D[ct]=w,D=D.slice(0,ct).concat(D.slice(ct+1));break}return Ot!=null&&D.push({name:tt,value:Ot}),D}var Z=C,X=0,W=0,U=0,et=1e3,it,J,rt=0,mt=0,pt=0,ft=typeof performance=="object"&&performance.now?performance:Date,Mt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(D){setTimeout(D,17)};function zt(){return mt||(Mt(Vt),mt=ft.now()+pt)}function Vt(){mt=0}function kt(){this._call=this._time=this._next=null}kt.prototype=st.prototype={constructor:kt,restart:function(D,tt,Ot){if(typeof D!="function")throw new TypeError("callback is not a function");Ot=(Ot==null?zt():+Ot)+(tt==null?0:+tt),!this._next&&J!==this&&(J?J._next=this:it=this,J=this),this._call=D,this._time=Ot,be()},stop:function(){this._call&&(this._call=null,this._time=1/0,be())}};function st(D,tt,Ot){var ct=new kt;return ct.restart(D,tt,Ot),ct}function St(){zt(),++X;for(var D=it,tt;D;)(tt=mt-D._time)>=0&&D._call.call(null,tt),D=D._next;--X}function qt(){mt=(rt=ft.now())+pt,X=W=0;try{St()}finally{X=0,Nt(),mt=0}}function re(){var D=ft.now(),tt=D-rt;tt>et&&(pt-=tt,rt=D)}function Nt(){for(var D,tt=it,Ot,ct=1/0;tt;)tt._call?(ct>tt._time&&(ct=tt._time),D=tt,tt=tt._next):(Ot=tt._next,tt._next=null,tt=D?D._next=Ot:it=Ot);J=D,be(ct)}function be(D){if(!X){W&&(W=clearTimeout(W));var tt=D-mt;tt>24?(D<1/0&&(W=setTimeout(qt,D-ft.now()-pt)),U&&(U=clearInterval(U))):(U||(rt=ft.now(),U=setInterval(re,et)),X=1,Mt(qt))}}var Te=1664525,nr=1013904223,Rt=4294967296;function Dt(){var D=1;return function(){return(D=(Te*D+nr)%Rt)/Rt}}function At(D){return D.x}function Xt(D){return D.y}var $t=10,Tt=Math.PI*(3-Math.sqrt(5));function Kt(D){var tt,Ot=1,ct=.001,ie=1-Math.pow(ct,1/300),pe=0,Ge=.6,Re=new Map,Je=st(Le),Ve=Z("tick","end"),ce=Dt();D==null&&(D=[]);function Le(){je(),Ve.call("tick",tt),Ot<ct&&(Je.stop(),Ve.call("end",tt))}function je(or){var Ae,yr=D.length,Cr;or===void 0&&(or=1);for(var zr=0;zr<or;++zr)for(Ot+=(pe-Ot)*ie,Re.forEach(function(Mr){Mr(Ot)}),Ae=0;Ae<yr;++Ae)Cr=D[Ae],Cr.fx==null?Cr.x+=Cr.vx*=Ge:(Cr.x=Cr.fx,Cr.vx=0),Cr.fy==null?Cr.y+=Cr.vy*=Ge:(Cr.y=Cr.fy,Cr.vy=0);return tt}function Be(){for(var or=0,Ae=D.length,yr;or<Ae;++or){if(yr=D[or],yr.index=or,yr.fx!=null&&(yr.x=yr.fx),yr.fy!=null&&(yr.y=yr.fy),isNaN(yr.x)||isNaN(yr.y)){var Cr=$t*Math.sqrt(.5+or),zr=or*Tt;yr.x=Cr*Math.cos(zr),yr.y=Cr*Math.sin(zr)}(isNaN(yr.vx)||isNaN(yr.vy))&&(yr.vx=yr.vy=0)}}function vr(or){return or.initialize&&or.initialize(D,ce),or}return Be(),tt={tick:je,restart:function(){return Je.restart(Le),tt},stop:function(){return Je.stop(),tt},nodes:function(Ae){return arguments.length?(D=Ae,Be(),Re.forEach(vr),tt):D},alpha:function(Ae){return arguments.length?(Ot=+Ae,tt):Ot},alphaMin:function(Ae){return arguments.length?(ct=+Ae,tt):ct},alphaDecay:function(Ae){return arguments.length?(ie=+Ae,tt):+ie},alphaTarget:function(Ae){return arguments.length?(pe=+Ae,tt):pe},velocityDecay:function(Ae){return arguments.length?(Ge=1-Ae,tt):1-Ge},randomSource:function(Ae){return arguments.length?(ce=Ae,Re.forEach(vr),tt):ce},force:function(Ae,yr){return arguments.length>1?(yr==null?Re.delete(Ae):Re.set(Ae,vr(yr)),tt):Re.get(Ae)},find:function(Ae,yr,Cr){var zr=0,Mr=D.length,un,hn,Un,nn,vn;for(Cr==null?Cr=1/0:Cr*=Cr,zr=0;zr<Mr;++zr)nn=D[zr],un=Ae-nn.x,hn=yr-nn.y,Un=un*un+hn*hn,Un<Cr&&(vn=nn,Cr=Un);return vn},on:function(Ae,yr){return arguments.length>1?(Ve.on(Ae,yr),tt):Ve.on(Ae)}}}function Ee(){var D,tt,Ot,ct,ie=k(-30),pe,Ge=1,Re=1/0,Je=.81;function Ve(Be){var vr,or=D.length,Ae=(0,z.Z)(D,At,Xt).visitAfter(Le);for(ct=Be,vr=0;vr<or;++vr)tt=D[vr],Ae.visit(je)}function ce(){if(D){var Be,vr=D.length,or;for(pe=new Array(vr),Be=0;Be<vr;++Be)or=D[Be],pe[or.index]=+ie(or,Be,D)}}function Le(Be){var vr=0,or,Ae,yr=0,Cr,zr,Mr;if(Be.length){for(Cr=zr=Mr=0;Mr<4;++Mr)(or=Be[Mr])&&(Ae=Math.abs(or.value))&&(vr+=or.value,yr+=Ae,Cr+=Ae*or.x,zr+=Ae*or.y);Be.x=Cr/yr,Be.y=zr/yr}else{or=Be,or.x=or.data.x,or.y=or.data.y;do vr+=pe[or.data.index];while(or=or.next)}Be.value=vr}function je(Be,vr,or,Ae){if(!Be.value)return!0;var yr=Be.x-tt.x,Cr=Be.y-tt.y,zr=Ae-vr,Mr=yr*yr+Cr*Cr;if(zr*zr/Je<Mr)return Mr<Re&&(yr===0&&(yr=E(Ot),Mr+=yr*yr),Cr===0&&(Cr=E(Ot),Mr+=Cr*Cr),Mr<Ge&&(Mr=Math.sqrt(Ge*Mr)),tt.vx+=yr*Be.value*ct/Mr,tt.vy+=Cr*Be.value*ct/Mr),!0;if(Be.length||Mr>=Re)return;(Be.data!==tt||Be.next)&&(yr===0&&(yr=E(Ot),Mr+=yr*yr),Cr===0&&(Cr=E(Ot),Mr+=Cr*Cr),Mr<Ge&&(Mr=Math.sqrt(Ge*Mr)));do Be.data!==tt&&(zr=pe[Be.data.index]*ct/Mr,tt.vx+=yr*zr,tt.vy+=Cr*zr);while(Be=Be.next)}return Ve.initialize=function(Be,vr){D=Be,Ot=vr,ce()},Ve.strength=function(Be){return arguments.length?(ie=typeof Be=="function"?Be:k(+Be),ce(),Ve):ie},Ve.distanceMin=function(Be){return arguments.length?(Ge=Be*Be,Ve):Math.sqrt(Ge)},Ve.distanceMax=function(Be){return arguments.length?(Re=Be*Be,Ve):Math.sqrt(Re)},Ve.theta=function(Be){return arguments.length?(Je=Be*Be,Ve):Math.sqrt(Je)},Ve}function vt(D,tt,Ot){var ct,ie=k(.1),pe,Ge;typeof D!="function"&&(D=k(+D)),tt==null&&(tt=0),Ot==null&&(Ot=0);function Re(Ve){for(var ce=0,Le=ct.length;ce<Le;++ce){var je=ct[ce],Be=je.x-tt||1e-6,vr=je.y-Ot||1e-6,or=Math.sqrt(Be*Be+vr*vr),Ae=(Ge[ce]-or)*pe[ce]*Ve/or;je.vx+=Be*Ae,je.vy+=vr*Ae}}function Je(){if(ct){var Ve,ce=ct.length;for(pe=new Array(ce),Ge=new Array(ce),Ve=0;Ve<ce;++Ve)Ge[Ve]=+D(ct[Ve],Ve,ct),pe[Ve]=isNaN(Ge[Ve])?0:+ie(ct[Ve],Ve,ct)}}return Re.initialize=function(Ve){ct=Ve,Je()},Re.strength=function(Ve){return arguments.length?(ie=typeof Ve=="function"?Ve:k(+Ve),Je(),Re):ie},Re.radius=function(Ve){return arguments.length?(D=typeof Ve=="function"?Ve:k(+Ve),Je(),Re):D},Re.x=function(Ve){return arguments.length?(tt=+Ve,Re):tt},Re.y=function(Ve){return arguments.length?(Ot=+Ve,Re):Ot},Re}function bt(D){var tt=k(.1),Ot,ct,ie;typeof D!="function"&&(D=k(D==null?0:+D));function pe(Re){for(var Je=0,Ve=Ot.length,ce;Je<Ve;++Je)ce=Ot[Je],ce.vx+=(ie[Je]-ce.x)*ct[Je]*Re}function Ge(){if(Ot){var Re,Je=Ot.length;for(ct=new Array(Je),ie=new Array(Je),Re=0;Re<Je;++Re)ct[Re]=isNaN(ie[Re]=+D(Ot[Re],Re,Ot))?0:+tt(Ot[Re],Re,Ot)}}return pe.initialize=function(Re){Ot=Re,Ge()},pe.strength=function(Re){return arguments.length?(tt=typeof Re=="function"?Re:k(+Re),Ge(),pe):tt},pe.x=function(Re){return arguments.length?(D=typeof Re=="function"?Re:k(+Re),Ge(),pe):D},pe}function wt(D){var tt=k(.1),Ot,ct,ie;typeof D!="function"&&(D=k(D==null?0:+D));function pe(Re){for(var Je=0,Ve=Ot.length,ce;Je<Ve;++Je)ce=Ot[Je],ce.vy+=(ie[Je]-ce.y)*ct[Je]*Re}function Ge(){if(Ot){var Re,Je=Ot.length;for(ct=new Array(Je),ie=new Array(Je),Re=0;Re<Je;++Re)ct[Re]=isNaN(ie[Re]=+D(Ot[Re],Re,Ot))?0:+tt(Ot[Re],Re,Ot)}}return pe.initialize=function(Re){Ot=Re,Ge()},pe.strength=function(Re){return arguments.length?(tt=typeof Re=="function"?Re:k(+Re),Ge(),pe):tt},pe.y=function(Re){return arguments.length?(D=typeof Re=="function"?Re:k(+Re),Ge(),pe):D},pe}},60340:function(le,S,M){"use strict";M.r(S),M.d(S,{AbstractMatrix:function(){return D},CHO:function(){return _i},CholeskyDecomposition:function(){return _i},EVD:function(){return Cn},EigenvalueDecomposition:function(){return Cn},LU:function(){return yr},LuDecomposition:function(){return yr},Matrix:function(){return ct},MatrixColumnSelectionView:function(){return Ge},MatrixColumnView:function(){return pe},MatrixFlipColumnView:function(){return Re},MatrixFlipRowView:function(){return Je},MatrixRowSelectionView:function(){return ce},MatrixRowView:function(){return Ve},MatrixSelectionView:function(){return Le},MatrixSubView:function(){return je},MatrixTransposeView:function(){return Be},NIPALS:function(){return pi},Nipals:function(){return pi},QR:function(){return zr},QrDecomposition:function(){return zr},SVD:function(){return Mr},SingularValueDecomposition:function(){return Mr},WrapperMatrix1D:function(){return vr},WrapperMatrix2D:function(){return or},correlation:function(){return Oe},covariance:function(){return Bn},default:function(){return ct},determinant:function(){return Un},inverse:function(){return un},linearDependencies:function(){return ln},pseudoInverse:function(){return pn},solve:function(){return hn},wrap:function(){return Ae}});var x=M(74158),z=M.n(x),k=M(33649),E=M.n(k),N=M(26979),I=M.n(N),m=M(64020),y=M.n(m),v=M(32078),p=M.n(v),g=M(82357),T=M.n(g);const w=Object.prototype.toString;function C(Pt){return w.call(Pt).endsWith("Array]")}function O(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!C(Pt))throw new TypeError("input must be an array");if(Pt.length===0)throw new TypeError("input must not be empty");var H=Lt.fromIndex,G=H===void 0?0:H,F=Lt.toIndex,ot=F===void 0?Pt.length:F;if(G<0||G>=Pt.length||!Number.isInteger(G))throw new Error("fromIndex must be a positive integer smaller than length");if(ot<=G||ot>Pt.length||!Number.isInteger(ot))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Bt=Pt[G],Ht=G+1;Ht<ot;Ht++)Pt[Ht]>Bt&&(Bt=Pt[Ht]);return Bt}function b(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!C(Pt))throw new TypeError("input must be an array");if(Pt.length===0)throw new TypeError("input must not be empty");var H=Lt.fromIndex,G=H===void 0?0:H,F=Lt.toIndex,ot=F===void 0?Pt.length:F;if(G<0||G>=Pt.length||!Number.isInteger(G))throw new Error("fromIndex must be a positive integer smaller than length");if(ot<=G||ot>Pt.length||!Number.isInteger(ot))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Bt=Pt[G],Ht=G+1;Ht<ot;Ht++)Pt[Ht]<Bt&&(Bt=Pt[Ht]);return Bt}function l(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(Pt)){if(Pt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var H;if(Lt.output!==void 0){if(!C(Lt.output))throw new TypeError("output option must be an array if specified");H=Lt.output}else H=new Array(Pt.length);var G=b(Pt),F=O(Pt);if(G===F)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var ot=Lt.min,Bt=ot===void 0?Lt.autoMinMax?G:0:ot,Ht=Lt.max,Yt=Ht===void 0?Lt.autoMinMax?F:1:Ht;if(Bt>=Yt)throw new RangeError("min option must be smaller than max option");for(var he=(Yt-Bt)/(F-G),at=0;at<Pt.length;at++)H[at]=(Pt[at]-G)*he+Bt;return H}var K=" ".repeat(2),Z=" ".repeat(4);function X(){return W(this)}function W(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=Lt.maxRows,G=H===void 0?15:H,F=Lt.maxColumns,ot=F===void 0?10:F,Bt=Lt.maxNumSize,Ht=Bt===void 0?8:Bt;return"".concat(Pt.constructor.name,` {
`).concat(K,`[
`).concat(Z).concat(U(Pt,G,ot,Ht),`
`).concat(K,`]
`).concat(K,"rows: ").concat(Pt.rows,`
`).concat(K,"columns: ").concat(Pt.columns,`
}`)}function U(Pt,Lt,H,G){for(var F=Pt.rows,ot=Pt.columns,Bt=Math.min(F,Lt),Ht=Math.min(ot,H),Yt=[],he=0;he<Bt;he++){for(var at=[],yt=0;yt<Ht;yt++)at.push(et(Pt.get(he,yt),G));Yt.push("".concat(at.join(" ")))}return Ht!==ot&&(Yt[Yt.length-1]+=" ... ".concat(ot-H," more columns")),Bt!==F&&Yt.push("... ".concat(F-Lt," more rows")),Yt.join(`
`.concat(Z))}function et(Pt,Lt){var H=String(Pt);if(H.length<=Lt)return H.padEnd(Lt," ");var G=Pt.toPrecision(Lt-2);if(G.length<=Lt)return G;var F=Pt.toExponential(Lt-2),ot=F.indexOf("e"),Bt=F.slice(ot);return F.slice(0,Lt-Bt.length)+Bt}function it(Pt,Lt){Pt.prototype.add=function(G){return typeof G=="number"?this.addS(G):this.addM(G)},Pt.prototype.addS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)+G);return this},Pt.prototype.addM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)+G.get(F,ot));return this},Pt.add=function(G,F){var ot=new Lt(G);return ot.add(F)},Pt.prototype.sub=function(G){return typeof G=="number"?this.subS(G):this.subM(G)},Pt.prototype.subS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)-G);return this},Pt.prototype.subM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)-G.get(F,ot));return this},Pt.sub=function(G,F){var ot=new Lt(G);return ot.sub(F)},Pt.prototype.subtract=Pt.prototype.sub,Pt.prototype.subtractS=Pt.prototype.subS,Pt.prototype.subtractM=Pt.prototype.subM,Pt.subtract=Pt.sub,Pt.prototype.mul=function(G){return typeof G=="number"?this.mulS(G):this.mulM(G)},Pt.prototype.mulS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)*G);return this},Pt.prototype.mulM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)*G.get(F,ot));return this},Pt.mul=function(G,F){var ot=new Lt(G);return ot.mul(F)},Pt.prototype.multiply=Pt.prototype.mul,Pt.prototype.multiplyS=Pt.prototype.mulS,Pt.prototype.multiplyM=Pt.prototype.mulM,Pt.multiply=Pt.mul,Pt.prototype.div=function(G){return typeof G=="number"?this.divS(G):this.divM(G)},Pt.prototype.divS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)/G);return this},Pt.prototype.divM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)/G.get(F,ot));return this},Pt.div=function(G,F){var ot=new Lt(G);return ot.div(F)},Pt.prototype.divide=Pt.prototype.div,Pt.prototype.divideS=Pt.prototype.divS,Pt.prototype.divideM=Pt.prototype.divM,Pt.divide=Pt.div,Pt.prototype.mod=function(G){return typeof G=="number"?this.modS(G):this.modM(G)},Pt.prototype.modS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)%G);return this},Pt.prototype.modM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)%G.get(F,ot));return this},Pt.mod=function(G,F){var ot=new Lt(G);return ot.mod(F)},Pt.prototype.modulus=Pt.prototype.mod,Pt.prototype.modulusS=Pt.prototype.modS,Pt.prototype.modulusM=Pt.prototype.modM,Pt.modulus=Pt.mod,Pt.prototype.and=function(G){return typeof G=="number"?this.andS(G):this.andM(G)},Pt.prototype.andS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)&G);return this},Pt.prototype.andM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)&G.get(F,ot));return this},Pt.and=function(G,F){var ot=new Lt(G);return ot.and(F)},Pt.prototype.or=function(G){return typeof G=="number"?this.orS(G):this.orM(G)},Pt.prototype.orS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)|G);return this},Pt.prototype.orM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)|G.get(F,ot));return this},Pt.or=function(G,F){var ot=new Lt(G);return ot.or(F)},Pt.prototype.xor=function(G){return typeof G=="number"?this.xorS(G):this.xorM(G)},Pt.prototype.xorS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)^G);return this},Pt.prototype.xorM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)^G.get(F,ot));return this},Pt.xor=function(G,F){var ot=new Lt(G);return ot.xor(F)},Pt.prototype.leftShift=function(G){return typeof G=="number"?this.leftShiftS(G):this.leftShiftM(G)},Pt.prototype.leftShiftS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)<<G);return this},Pt.prototype.leftShiftM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)<<G.get(F,ot));return this},Pt.leftShift=function(G,F){var ot=new Lt(G);return ot.leftShift(F)},Pt.prototype.signPropagatingRightShift=function(G){return typeof G=="number"?this.signPropagatingRightShiftS(G):this.signPropagatingRightShiftM(G)},Pt.prototype.signPropagatingRightShiftS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)>>G);return this},Pt.prototype.signPropagatingRightShiftM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)>>G.get(F,ot));return this},Pt.signPropagatingRightShift=function(G,F){var ot=new Lt(G);return ot.signPropagatingRightShift(F)},Pt.prototype.rightShift=function(G){return typeof G=="number"?this.rightShiftS(G):this.rightShiftM(G)},Pt.prototype.rightShiftS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)>>>G);return this},Pt.prototype.rightShiftM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,this.get(F,ot)>>>G.get(F,ot));return this},Pt.rightShift=function(G,F){var ot=new Lt(G);return ot.rightShift(F)},Pt.prototype.zeroFillRightShift=Pt.prototype.rightShift,Pt.prototype.zeroFillRightShiftS=Pt.prototype.rightShiftS,Pt.prototype.zeroFillRightShiftM=Pt.prototype.rightShiftM,Pt.zeroFillRightShift=Pt.rightShift,Pt.prototype.not=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,~this.get(G,F));return this},Pt.not=function(G){var F=new Lt(G);return F.not()},Pt.prototype.abs=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.abs(this.get(G,F)));return this},Pt.abs=function(G){var F=new Lt(G);return F.abs()},Pt.prototype.acos=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.acos(this.get(G,F)));return this},Pt.acos=function(G){var F=new Lt(G);return F.acos()},Pt.prototype.acosh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.acosh(this.get(G,F)));return this},Pt.acosh=function(G){var F=new Lt(G);return F.acosh()},Pt.prototype.asin=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.asin(this.get(G,F)));return this},Pt.asin=function(G){var F=new Lt(G);return F.asin()},Pt.prototype.asinh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.asinh(this.get(G,F)));return this},Pt.asinh=function(G){var F=new Lt(G);return F.asinh()},Pt.prototype.atan=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.atan(this.get(G,F)));return this},Pt.atan=function(G){var F=new Lt(G);return F.atan()},Pt.prototype.atanh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.atanh(this.get(G,F)));return this},Pt.atanh=function(G){var F=new Lt(G);return F.atanh()},Pt.prototype.cbrt=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.cbrt(this.get(G,F)));return this},Pt.cbrt=function(G){var F=new Lt(G);return F.cbrt()},Pt.prototype.ceil=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.ceil(this.get(G,F)));return this},Pt.ceil=function(G){var F=new Lt(G);return F.ceil()},Pt.prototype.clz32=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.clz32(this.get(G,F)));return this},Pt.clz32=function(G){var F=new Lt(G);return F.clz32()},Pt.prototype.cos=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.cos(this.get(G,F)));return this},Pt.cos=function(G){var F=new Lt(G);return F.cos()},Pt.prototype.cosh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.cosh(this.get(G,F)));return this},Pt.cosh=function(G){var F=new Lt(G);return F.cosh()},Pt.prototype.exp=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.exp(this.get(G,F)));return this},Pt.exp=function(G){var F=new Lt(G);return F.exp()},Pt.prototype.expm1=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.expm1(this.get(G,F)));return this},Pt.expm1=function(G){var F=new Lt(G);return F.expm1()},Pt.prototype.floor=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.floor(this.get(G,F)));return this},Pt.floor=function(G){var F=new Lt(G);return F.floor()},Pt.prototype.fround=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.fround(this.get(G,F)));return this},Pt.fround=function(G){var F=new Lt(G);return F.fround()},Pt.prototype.log=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log(this.get(G,F)));return this},Pt.log=function(G){var F=new Lt(G);return F.log()},Pt.prototype.log1p=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log1p(this.get(G,F)));return this},Pt.log1p=function(G){var F=new Lt(G);return F.log1p()},Pt.prototype.log10=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log10(this.get(G,F)));return this},Pt.log10=function(G){var F=new Lt(G);return F.log10()},Pt.prototype.log2=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log2(this.get(G,F)));return this},Pt.log2=function(G){var F=new Lt(G);return F.log2()},Pt.prototype.round=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.round(this.get(G,F)));return this},Pt.round=function(G){var F=new Lt(G);return F.round()},Pt.prototype.sign=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sign(this.get(G,F)));return this},Pt.sign=function(G){var F=new Lt(G);return F.sign()},Pt.prototype.sin=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sin(this.get(G,F)));return this},Pt.sin=function(G){var F=new Lt(G);return F.sin()},Pt.prototype.sinh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sinh(this.get(G,F)));return this},Pt.sinh=function(G){var F=new Lt(G);return F.sinh()},Pt.prototype.sqrt=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sqrt(this.get(G,F)));return this},Pt.sqrt=function(G){var F=new Lt(G);return F.sqrt()},Pt.prototype.tan=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.tan(this.get(G,F)));return this},Pt.tan=function(G){var F=new Lt(G);return F.tan()},Pt.prototype.tanh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.tanh(this.get(G,F)));return this},Pt.tanh=function(G){var F=new Lt(G);return F.tanh()},Pt.prototype.trunc=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.trunc(this.get(G,F)));return this},Pt.trunc=function(G){var F=new Lt(G);return F.trunc()},Pt.pow=function(G,F){var ot=new Lt(G);return ot.pow(F)},Pt.prototype.pow=function(G){return typeof G=="number"?this.powS(G):this.powM(G)},Pt.prototype.powS=function(G){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,Math.pow(this.get(F,ot),G));return this},Pt.prototype.powM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.set(F,ot,Math.pow(this.get(F,ot),G.get(F,ot)));return this}}function J(Pt,Lt,H){var G=H?Pt.rows:Pt.rows-1;if(Lt<0||Lt>G)throw new RangeError("Row index out of range")}function rt(Pt,Lt,H){var G=H?Pt.columns:Pt.columns-1;if(Lt<0||Lt>G)throw new RangeError("Column index out of range")}function mt(Pt,Lt){if(Lt.to1DArray&&(Lt=Lt.to1DArray()),Lt.length!==Pt.columns)throw new RangeError("vector size must be the same as the number of columns");return Lt}function pt(Pt,Lt){if(Lt.to1DArray&&(Lt=Lt.to1DArray()),Lt.length!==Pt.rows)throw new RangeError("vector size must be the same as the number of rows");return Lt}function ft(Pt,Lt){if(!C(Lt))throw new TypeError("row indices must be an array");for(var H=0;H<Lt.length;H++)if(Lt[H]<0||Lt[H]>=Pt.rows)throw new RangeError("row indices are out of range")}function Mt(Pt,Lt){if(!C(Lt))throw new TypeError("column indices must be an array");for(var H=0;H<Lt.length;H++)if(Lt[H]<0||Lt[H]>=Pt.columns)throw new RangeError("column indices are out of range")}function zt(Pt,Lt,H,G,F){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(kt("startRow",Lt),kt("endRow",H),kt("startColumn",G),kt("endColumn",F),Lt>H||G>F||Lt<0||Lt>=Pt.rows||H<0||H>=Pt.rows||G<0||G>=Pt.columns||F<0||F>=Pt.columns)throw new RangeError("Submatrix indices are out of range")}function Vt(Pt){for(var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],G=0;G<Pt;G++)H.push(Lt);return H}function kt(Pt,Lt){if(typeof Lt!="number")throw new TypeError("".concat(Pt," must be a number"))}function st(Pt){if(Pt.isEmpty())throw new Error("Empty matrix has no elements to index")}function St(Pt){for(var Lt=Vt(Pt.rows),H=0;H<Pt.rows;++H)for(var G=0;G<Pt.columns;++G)Lt[H]+=Pt.get(H,G);return Lt}function qt(Pt){for(var Lt=Vt(Pt.columns),H=0;H<Pt.rows;++H)for(var G=0;G<Pt.columns;++G)Lt[G]+=Pt.get(H,G);return Lt}function re(Pt){for(var Lt=0,H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Lt+=Pt.get(H,G);return Lt}function Nt(Pt){for(var Lt=Vt(Pt.rows,1),H=0;H<Pt.rows;++H)for(var G=0;G<Pt.columns;++G)Lt[H]*=Pt.get(H,G);return Lt}function be(Pt){for(var Lt=Vt(Pt.columns,1),H=0;H<Pt.rows;++H)for(var G=0;G<Pt.columns;++G)Lt[G]*=Pt.get(H,G);return Lt}function Te(Pt){for(var Lt=1,H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Lt*=Pt.get(H,G);return Lt}function nr(Pt,Lt,H){for(var G=Pt.rows,F=Pt.columns,ot=[],Bt=0;Bt<G;Bt++){for(var Ht=0,Yt=0,he=0,at=0;at<F;at++)he=Pt.get(Bt,at)-H[Bt],Ht+=he,Yt+=he*he;Lt?ot.push((Yt-Ht*Ht/F)/(F-1)):ot.push((Yt-Ht*Ht/F)/F)}return ot}function Rt(Pt,Lt,H){for(var G=Pt.rows,F=Pt.columns,ot=[],Bt=0;Bt<F;Bt++){for(var Ht=0,Yt=0,he=0,at=0;at<G;at++)he=Pt.get(at,Bt)-H[Bt],Ht+=he,Yt+=he*he;Lt?ot.push((Yt-Ht*Ht/G)/(G-1)):ot.push((Yt-Ht*Ht/G)/G)}return ot}function Dt(Pt,Lt,H){for(var G=Pt.rows,F=Pt.columns,ot=G*F,Bt=0,Ht=0,Yt=0,he=0;he<G;he++)for(var at=0;at<F;at++)Yt=Pt.get(he,at)-H,Bt+=Yt,Ht+=Yt*Yt;return Lt?(Ht-Bt*Bt/ot)/(ot-1):(Ht-Bt*Bt/ot)/ot}function At(Pt,Lt){for(var H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Pt.set(H,G,Pt.get(H,G)-Lt[H])}function Xt(Pt,Lt){for(var H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Pt.set(H,G,Pt.get(H,G)-Lt[G])}function $t(Pt,Lt){for(var H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Pt.set(H,G,Pt.get(H,G)-Lt)}function Tt(Pt){for(var Lt=[],H=0;H<Pt.rows;H++){for(var G=0,F=0;F<Pt.columns;F++)G+=Math.pow(Pt.get(H,F),2)/(Pt.columns-1);Lt.push(Math.sqrt(G))}return Lt}function Kt(Pt,Lt){for(var H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Pt.set(H,G,Pt.get(H,G)/Lt[H])}function Ee(Pt){for(var Lt=[],H=0;H<Pt.columns;H++){for(var G=0,F=0;F<Pt.rows;F++)G+=Math.pow(Pt.get(F,H),2)/(Pt.rows-1);Lt.push(Math.sqrt(G))}return Lt}function vt(Pt,Lt){for(var H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Pt.set(H,G,Pt.get(H,G)/Lt[G])}function bt(Pt){for(var Lt=Pt.size-1,H=0,G=0;G<Pt.columns;G++)for(var F=0;F<Pt.rows;F++)H+=Math.pow(Pt.get(F,G),2)/Lt;return Math.sqrt(H)}function wt(Pt,Lt){for(var H=0;H<Pt.rows;H++)for(var G=0;G<Pt.columns;G++)Pt.set(H,G,Pt.get(H,G)/Lt)}var D=function(){function Pt(){p()(this,Pt)}return T()(Pt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(H){if(typeof H!="function")throw new TypeError("callback must be a function");for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.call(this,G,F);return this}},{key:"to1DArray",value:function(){for(var H=[],G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.push(this.get(G,F));return H}},{key:"to2DArray",value:function(){for(var H=[],G=0;G<this.rows;G++){H.push([]);for(var F=0;F<this.columns;F++)H[G].push(this.get(G,F))}return H}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var H=0;H<this.rows;H++)for(var G=0;G<=H;G++)if(this.get(H,G)!==this.get(G,H))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var H=0,G=0,F=-1,ot=!0,Bt=!1;H<this.rows&&ot;){for(G=0,Bt=!1;G<this.columns&&Bt===!1;)this.get(H,G)===0?G++:this.get(H,G)===1&&G>F?(Bt=!0,F=G):(ot=!1,Bt=!0);H++}return ot}},{key:"isReducedEchelonForm",value:function(){for(var H=0,G=0,F=-1,ot=!0,Bt=!1;H<this.rows&&ot;){for(G=0,Bt=!1;G<this.columns&&Bt===!1;)this.get(H,G)===0?G++:this.get(H,G)===1&&G>F?(Bt=!0,F=G):(ot=!1,Bt=!0);for(var Ht=G+1;Ht<this.rows;Ht++)this.get(H,Ht)!==0&&(ot=!1);H++}return ot}},{key:"echelonForm",value:function(){for(var H=this.clone(),G=0,F=0;G<H.rows&&F<H.columns;){for(var ot=G,Bt=G;Bt<H.rows;Bt++)H.get(Bt,F)>H.get(ot,F)&&(ot=Bt);if(H.get(ot,F)===0)F++;else{H.swapRows(G,ot);for(var Ht=H.get(G,F),Yt=F;Yt<H.columns;Yt++)H.set(G,Yt,H.get(G,Yt)/Ht);for(var he=G+1;he<H.rows;he++){var at=H.get(he,F)/H.get(G,F);H.set(he,F,0);for(var yt=F+1;yt<H.columns;yt++)H.set(he,yt,H.get(he,yt)-H.get(G,yt)*at)}G++,F++}}return H}},{key:"reducedEchelonForm",value:function(){for(var H=this.echelonForm(),G=H.columns,F=H.rows,ot=F-1;ot>=0;)if(H.maxRow(ot)===0)ot--;else{for(var Bt=0,Ht=!1;Bt<F&&Ht===!1;)H.get(ot,Bt)===1?Ht=!0:Bt++;for(var Yt=0;Yt<ot;Yt++)for(var he=H.get(Yt,Bt),at=Bt;at<G;at++){var yt=H.get(Yt,at)-he*H.get(ot,at);H.set(Yt,at,yt)}ot--}return H}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(H)!=="object")throw new TypeError("options must be an object");var G=H.rows,F=G===void 0?1:G,ot=H.columns,Bt=ot===void 0?1:ot;if(!Number.isInteger(F)||F<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Bt)||Bt<=0)throw new TypeError("columns must be a positive integer");for(var Ht=new ct(this.rows*F,this.columns*Bt),Yt=0;Yt<F;Yt++)for(var he=0;he<Bt;he++)Ht.setSubMatrix(this,this.rows*Yt,this.columns*he);return Ht}},{key:"fill",value:function(H){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,H);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(H){J(this,H);for(var G=[],F=0;F<this.columns;F++)G.push(this.get(H,F));return G}},{key:"getRowVector",value:function(H){return ct.rowVector(this.getRow(H))}},{key:"setRow",value:function(H,G){J(this,H),G=mt(this,G);for(var F=0;F<this.columns;F++)this.set(H,F,G[F]);return this}},{key:"swapRows",value:function(H,G){J(this,H),J(this,G);for(var F=0;F<this.columns;F++){var ot=this.get(H,F);this.set(H,F,this.get(G,F)),this.set(G,F,ot)}return this}},{key:"getColumn",value:function(H){rt(this,H);for(var G=[],F=0;F<this.rows;F++)G.push(this.get(F,H));return G}},{key:"getColumnVector",value:function(H){return ct.columnVector(this.getColumn(H))}},{key:"setColumn",value:function(H,G){rt(this,H),G=pt(this,G);for(var F=0;F<this.rows;F++)this.set(F,H,G[F]);return this}},{key:"swapColumns",value:function(H,G){rt(this,H),rt(this,G);for(var F=0;F<this.rows;F++){var ot=this.get(F,H);this.set(F,H,this.get(F,G)),this.set(F,G,ot)}return this}},{key:"addRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)+H[F]);return this}},{key:"subRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)-H[F]);return this}},{key:"mulRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)*H[F]);return this}},{key:"divRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)/H[F]);return this}},{key:"addColumnVector",value:function(H){H=pt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)+H[G]);return this}},{key:"subColumnVector",value:function(H){H=pt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)-H[G]);return this}},{key:"mulColumnVector",value:function(H){H=pt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)*H[G]);return this}},{key:"divColumnVector",value:function(H){H=pt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)/H[G]);return this}},{key:"mulRow",value:function(H,G){J(this,H);for(var F=0;F<this.columns;F++)this.set(H,F,this.get(H,F)*G);return this}},{key:"mulColumn",value:function(H,G){rt(this,H);for(var F=0;F<this.rows;F++)this.set(F,H,this.get(F,H)*G);return this}},{key:"max",value:function(H){if(this.isEmpty())return NaN;switch(H){case"row":{for(var G=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.get(F,ot)>G[F]&&(G[F]=this.get(F,ot));return G}case"column":{for(var Bt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Ht=0;Ht<this.rows;Ht++)for(var Yt=0;Yt<this.columns;Yt++)this.get(Ht,Yt)>Bt[Yt]&&(Bt[Yt]=this.get(Ht,Yt));return Bt}case void 0:{for(var he=this.get(0,0),at=0;at<this.rows;at++)for(var yt=0;yt<this.columns;yt++)this.get(at,yt)>he&&(he=this.get(at,yt));return he}default:throw new Error("invalid option: ".concat(H))}}},{key:"maxIndex",value:function(){st(this);for(var H=this.get(0,0),G=[0,0],F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.get(F,ot)>H&&(H=this.get(F,ot),G[0]=F,G[1]=ot);return G}},{key:"min",value:function(H){if(this.isEmpty())return NaN;switch(H){case"row":{for(var G=new Array(this.rows).fill(Number.POSITIVE_INFINITY),F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.get(F,ot)<G[F]&&(G[F]=this.get(F,ot));return G}case"column":{for(var Bt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Ht=0;Ht<this.rows;Ht++)for(var Yt=0;Yt<this.columns;Yt++)this.get(Ht,Yt)<Bt[Yt]&&(Bt[Yt]=this.get(Ht,Yt));return Bt}case void 0:{for(var he=this.get(0,0),at=0;at<this.rows;at++)for(var yt=0;yt<this.columns;yt++)this.get(at,yt)<he&&(he=this.get(at,yt));return he}default:throw new Error("invalid option: ".concat(H))}}},{key:"minIndex",value:function(){st(this);for(var H=this.get(0,0),G=[0,0],F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)this.get(F,ot)<H&&(H=this.get(F,ot),G[0]=F,G[1]=ot);return G}},{key:"maxRow",value:function(H){if(J(this,H),this.isEmpty())return NaN;for(var G=this.get(H,0),F=1;F<this.columns;F++)this.get(H,F)>G&&(G=this.get(H,F));return G}},{key:"maxRowIndex",value:function(H){J(this,H),st(this);for(var G=this.get(H,0),F=[H,0],ot=1;ot<this.columns;ot++)this.get(H,ot)>G&&(G=this.get(H,ot),F[1]=ot);return F}},{key:"minRow",value:function(H){if(J(this,H),this.isEmpty())return NaN;for(var G=this.get(H,0),F=1;F<this.columns;F++)this.get(H,F)<G&&(G=this.get(H,F));return G}},{key:"minRowIndex",value:function(H){J(this,H),st(this);for(var G=this.get(H,0),F=[H,0],ot=1;ot<this.columns;ot++)this.get(H,ot)<G&&(G=this.get(H,ot),F[1]=ot);return F}},{key:"maxColumn",value:function(H){if(rt(this,H),this.isEmpty())return NaN;for(var G=this.get(0,H),F=1;F<this.rows;F++)this.get(F,H)>G&&(G=this.get(F,H));return G}},{key:"maxColumnIndex",value:function(H){rt(this,H),st(this);for(var G=this.get(0,H),F=[0,H],ot=1;ot<this.rows;ot++)this.get(ot,H)>G&&(G=this.get(ot,H),F[0]=ot);return F}},{key:"minColumn",value:function(H){if(rt(this,H),this.isEmpty())return NaN;for(var G=this.get(0,H),F=1;F<this.rows;F++)this.get(F,H)<G&&(G=this.get(F,H));return G}},{key:"minColumnIndex",value:function(H){rt(this,H),st(this);for(var G=this.get(0,H),F=[0,H],ot=1;ot<this.rows;ot++)this.get(ot,H)<G&&(G=this.get(ot,H),F[0]=ot);return F}},{key:"diag",value:function(){for(var H=Math.min(this.rows,this.columns),G=[],F=0;F<H;F++)G.push(this.get(F,F));return G}},{key:"norm",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",G=0;if(H==="max")return this.max();if(H==="frobenius"){for(var F=0;F<this.rows;F++)for(var ot=0;ot<this.columns;ot++)G=G+this.get(F,ot)*this.get(F,ot);return Math.sqrt(G)}else throw new RangeError("unknown norm type: ".concat(H))}},{key:"cumulativeSum",value:function(){for(var H=0,G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H+=this.get(G,F),this.set(G,F,H);return this}},{key:"dot",value:function(H){Pt.isMatrix(H)&&(H=H.to1DArray());var G=this.to1DArray();if(G.length!==H.length)throw new RangeError("vectors do not have the same size");for(var F=0,ot=0;ot<G.length;ot++)F+=G[ot]*H[ot];return F}},{key:"mmul",value:function(H){H=ct.checkMatrix(H);for(var G=this.rows,F=this.columns,ot=H.columns,Bt=new ct(G,ot),Ht=new Float64Array(F),Yt=0;Yt<ot;Yt++){for(var he=0;he<F;he++)Ht[he]=H.get(he,Yt);for(var at=0;at<G;at++){for(var yt=0,te=0;te<F;te++)yt+=this.get(at,te)*Ht[te];Bt.set(at,Yt,yt)}}return Bt}},{key:"strassen2x2",value:function(H){H=ct.checkMatrix(H);var G=new ct(2,2),F=this.get(0,0),ot=H.get(0,0),Bt=this.get(0,1),Ht=H.get(0,1),Yt=this.get(1,0),he=H.get(1,0),at=this.get(1,1),yt=H.get(1,1),te=(F+at)*(ot+yt),Me=(Yt+at)*ot,_e=F*(Ht-yt),tr=at*(he-ot),sr=(F+Bt)*yt,ge=(Yt-F)*(ot+Ht),Fe=(Bt-at)*(he+yt),qe=te+tr-sr+Fe,_r=_e+sr,Er=Me+tr,ye=te-Me+_e+ge;return G.set(0,0,qe),G.set(0,1,_r),G.set(1,0,Er),G.set(1,1,ye),G}},{key:"strassen3x3",value:function(H){H=ct.checkMatrix(H);var G=new ct(3,3),F=this.get(0,0),ot=this.get(0,1),Bt=this.get(0,2),Ht=this.get(1,0),Yt=this.get(1,1),he=this.get(1,2),at=this.get(2,0),yt=this.get(2,1),te=this.get(2,2),Me=H.get(0,0),_e=H.get(0,1),tr=H.get(0,2),sr=H.get(1,0),ge=H.get(1,1),Fe=H.get(1,2),qe=H.get(2,0),_r=H.get(2,1),Er=H.get(2,2),ye=(F+ot+Bt-Ht-Yt-yt-te)*ge,Ft=(F-Ht)*(-_e+ge),ne=Yt*(-Me+_e+sr-ge-Fe-qe+Er),Pe=(-F+Ht+Yt)*(Me-_e+ge),Ce=(Ht+Yt)*(-Me+_e),Ue=F*Me,Xe=(-F+at+yt)*(Me-tr+Fe),Wr=(-F+at)*(tr-Fe),$r=(at+yt)*(-Me+tr),mn=(F+ot+Bt-Yt-he-at-yt)*Fe,Nn=yt*(-Me+tr+sr-ge-Fe-qe+_r),kn=(-Bt+yt+te)*(ge+qe-_r),Jn=(Bt-te)*(ge-_r),ri=Bt*qe,Ri=(yt+te)*(-qe+_r),di=(-Bt+Yt+he)*(Fe+qe-Er),Ki=(Bt-he)*(Fe-Er),yo=(Yt+he)*(-qe+Er),Ea=ot*sr,ta=he*_r,mo=Ht*tr,Na=at*_e,To=te*Er,vi=Ue+ri+Ea,xa=ye+Pe+Ce+Ue+kn+ri+Ri,Vo=Ue+Xe+$r+mn+ri+di+yo,zi=Ft+ne+Pe+Ue+ri+di+Ki,ao=Ft+Pe+Ce+Ue+ta,jo=ri+di+Ki+yo+mo,ps=Ue+Xe+Wr+Nn+kn+Jn+ri,Io=kn+Jn+ri+Ri+Na,Ja=Ue+Xe+Wr+$r+To;return G.set(0,0,vi),G.set(0,1,xa),G.set(0,2,Vo),G.set(1,0,zi),G.set(1,1,ao),G.set(1,2,jo),G.set(2,0,ps),G.set(2,1,Io),G.set(2,2,Ja),G}},{key:"mmulStrassen",value:function(H){H=ct.checkMatrix(H);var G=this.clone(),F=G.rows,ot=G.columns,Bt=H.rows,Ht=H.columns;ot!==Bt&&console.warn("Multiplying ".concat(F," x ").concat(ot," and ").concat(Bt," x ").concat(Ht," matrix: dimensions do not match."));function Yt(te,Me,_e){var tr=te.rows,sr=te.columns;if(tr===Me&&sr===_e)return te;var ge=Pt.zeros(Me,_e);return ge=ge.setSubMatrix(te,0,0),ge}var he=Math.max(F,Bt),at=Math.max(ot,Ht);G=Yt(G,he,at),H=Yt(H,he,at);function yt(te,Me,_e,tr){if(_e<=512||tr<=512)return te.mmul(Me);_e%2===1&&tr%2===1?(te=Yt(te,_e+1,tr+1),Me=Yt(Me,_e+1,tr+1)):_e%2===1?(te=Yt(te,_e+1,tr),Me=Yt(Me,_e+1,tr)):tr%2===1&&(te=Yt(te,_e,tr+1),Me=Yt(Me,_e,tr+1));var sr=parseInt(te.rows/2,10),ge=parseInt(te.columns/2,10),Fe=te.subMatrix(0,sr-1,0,ge-1),qe=Me.subMatrix(0,sr-1,0,ge-1),_r=te.subMatrix(0,sr-1,ge,te.columns-1),Er=Me.subMatrix(0,sr-1,ge,Me.columns-1),ye=te.subMatrix(sr,te.rows-1,0,ge-1),Ft=Me.subMatrix(sr,Me.rows-1,0,ge-1),ne=te.subMatrix(sr,te.rows-1,ge,te.columns-1),Pe=Me.subMatrix(sr,Me.rows-1,ge,Me.columns-1),Ce=yt(Pt.add(Fe,ne),Pt.add(qe,Pe),sr,ge),Ue=yt(Pt.add(ye,ne),qe,sr,ge),Xe=yt(Fe,Pt.sub(Er,Pe),sr,ge),Wr=yt(ne,Pt.sub(Ft,qe),sr,ge),$r=yt(Pt.add(Fe,_r),Pe,sr,ge),mn=yt(Pt.sub(ye,Fe),Pt.add(qe,Er),sr,ge),Nn=yt(Pt.sub(_r,ne),Pt.add(Ft,Pe),sr,ge),kn=Pt.add(Ce,Wr);kn.sub($r),kn.add(Nn);var Jn=Pt.add(Xe,$r),ri=Pt.add(Ue,Wr),Ri=Pt.sub(Ce,Ue);Ri.add(Xe),Ri.add(mn);var di=Pt.zeros(2*kn.rows,2*kn.columns);return di=di.setSubMatrix(kn,0,0),di=di.setSubMatrix(Jn,kn.rows,0),di=di.setSubMatrix(ri,0,kn.columns),di=di.setSubMatrix(Ri,kn.rows,kn.columns),di.subMatrix(0,_e-1,0,tr-1)}return yt(G,H,he,at)}},{key:"scaleRows",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(H)!=="object")throw new TypeError("options must be an object");var G=H.min,F=G===void 0?0:G,ot=H.max,Bt=ot===void 0?1:ot;if(!Number.isFinite(F))throw new TypeError("min must be a number");if(!Number.isFinite(Bt))throw new TypeError("max must be a number");if(F>=Bt)throw new RangeError("min must be smaller than max");for(var Ht=new ct(this.rows,this.columns),Yt=0;Yt<this.rows;Yt++){var he=this.getRow(Yt);he.length>0&&l(he,{min:F,max:Bt,output:he}),Ht.setRow(Yt,he)}return Ht}},{key:"scaleColumns",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(H)!=="object")throw new TypeError("options must be an object");var G=H.min,F=G===void 0?0:G,ot=H.max,Bt=ot===void 0?1:ot;if(!Number.isFinite(F))throw new TypeError("min must be a number");if(!Number.isFinite(Bt))throw new TypeError("max must be a number");if(F>=Bt)throw new RangeError("min must be smaller than max");for(var Ht=new ct(this.rows,this.columns),Yt=0;Yt<this.columns;Yt++){var he=this.getColumn(Yt);he.length&&l(he,{min:F,max:Bt,output:he}),Ht.setColumn(Yt,he)}return Ht}},{key:"flipRows",value:function(){for(var H=Math.ceil(this.columns/2),G=0;G<this.rows;G++)for(var F=0;F<H;F++){var ot=this.get(G,F),Bt=this.get(G,this.columns-1-F);this.set(G,F,Bt),this.set(G,this.columns-1-F,ot)}return this}},{key:"flipColumns",value:function(){for(var H=Math.ceil(this.rows/2),G=0;G<this.columns;G++)for(var F=0;F<H;F++){var ot=this.get(F,G),Bt=this.get(this.rows-1-F,G);this.set(F,G,Bt),this.set(this.rows-1-F,G,ot)}return this}},{key:"kroneckerProduct",value:function(H){H=ct.checkMatrix(H);for(var G=this.rows,F=this.columns,ot=H.rows,Bt=H.columns,Ht=new ct(G*ot,F*Bt),Yt=0;Yt<G;Yt++)for(var he=0;he<F;he++)for(var at=0;at<ot;at++)for(var yt=0;yt<Bt;yt++)Ht.set(ot*Yt+at,Bt*he+yt,this.get(Yt,he)*H.get(at,yt));return Ht}},{key:"kroneckerSum",value:function(H){if(H=ct.checkMatrix(H),!this.isSquare()||!H.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var G=this.rows,F=H.rows,ot=this.kroneckerProduct(ct.eye(F,F)),Bt=ct.eye(G,G).kroneckerProduct(H);return ot.add(Bt)}},{key:"transpose",value:function(){for(var H=new ct(this.columns,this.rows),G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.set(F,G,this.get(G,F));return H}},{key:"sortRows",value:function(){for(var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tt,G=0;G<this.rows;G++)this.setRow(G,this.getRow(G).sort(H));return this}},{key:"sortColumns",value:function(){for(var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tt,G=0;G<this.columns;G++)this.setColumn(G,this.getColumn(G).sort(H));return this}},{key:"subMatrix",value:function(H,G,F,ot){zt(this,H,G,F,ot);for(var Bt=new ct(G-H+1,ot-F+1),Ht=H;Ht<=G;Ht++)for(var Yt=F;Yt<=ot;Yt++)Bt.set(Ht-H,Yt-F,this.get(Ht,Yt));return Bt}},{key:"subMatrixRow",value:function(H,G,F){if(G===void 0&&(G=0),F===void 0&&(F=this.columns-1),G>F||G<0||G>=this.columns||F<0||F>=this.columns)throw new RangeError("Argument out of range");for(var ot=new ct(H.length,F-G+1),Bt=0;Bt<H.length;Bt++)for(var Ht=G;Ht<=F;Ht++){if(H[Bt]<0||H[Bt]>=this.rows)throw new RangeError("Row index out of range: ".concat(H[Bt]));ot.set(Bt,Ht-G,this.get(H[Bt],Ht))}return ot}},{key:"subMatrixColumn",value:function(H,G,F){if(G===void 0&&(G=0),F===void 0&&(F=this.rows-1),G>F||G<0||G>=this.rows||F<0||F>=this.rows)throw new RangeError("Argument out of range");for(var ot=new ct(F-G+1,H.length),Bt=0;Bt<H.length;Bt++)for(var Ht=G;Ht<=F;Ht++){if(H[Bt]<0||H[Bt]>=this.columns)throw new RangeError("Column index out of range: ".concat(H[Bt]));ot.set(Ht-G,Bt,this.get(Ht,H[Bt]))}return ot}},{key:"setSubMatrix",value:function(H,G,F){if(H=ct.checkMatrix(H),H.isEmpty())return this;var ot=G+H.rows-1,Bt=F+H.columns-1;zt(this,G,ot,F,Bt);for(var Ht=0;Ht<H.rows;Ht++)for(var Yt=0;Yt<H.columns;Yt++)this.set(G+Ht,F+Yt,H.get(Ht,Yt));return this}},{key:"selection",value:function(H,G){ft(this,H),Mt(this,G);for(var F=new ct(H.length,G.length),ot=0;ot<H.length;ot++)for(var Bt=H[ot],Ht=0;Ht<G.length;Ht++){var Yt=G[Ht];F.set(ot,Ht,this.get(Bt,Yt))}return F}},{key:"trace",value:function(){for(var H=Math.min(this.rows,this.columns),G=0,F=0;F<H;F++)G+=this.get(F,F);return G}},{key:"clone",value:function(){for(var H=new ct(this.rows,this.columns),G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.set(G,F,this.get(G,F));return H}},{key:"sum",value:function(H){switch(H){case"row":return St(this);case"column":return qt(this);case void 0:return re(this);default:throw new Error("invalid option: ".concat(H))}}},{key:"product",value:function(H){switch(H){case"row":return Nt(this);case"column":return be(this);case void 0:return Te(this);default:throw new Error("invalid option: ".concat(H))}}},{key:"mean",value:function(H){var G=this.sum(H);switch(H){case"row":{for(var F=0;F<this.rows;F++)G[F]/=this.columns;return G}case"column":{for(var ot=0;ot<this.columns;ot++)G[ot]/=this.rows;return G}case void 0:return G/this.size;default:throw new Error("invalid option: ".concat(H))}}},{key:"variance",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(H)==="object"&&(G=H,H=void 0),y()(G)!=="object")throw new TypeError("options must be an object");var F=G,ot=F.unbiased,Bt=ot===void 0?!0:ot,Ht=F.mean,Yt=Ht===void 0?this.mean(H):Ht;if(typeof Bt!="boolean")throw new TypeError("unbiased must be a boolean");switch(H){case"row":{if(!C(Yt))throw new TypeError("mean must be an array");return nr(this,Bt,Yt)}case"column":{if(!C(Yt))throw new TypeError("mean must be an array");return Rt(this,Bt,Yt)}case void 0:{if(typeof Yt!="number")throw new TypeError("mean must be a number");return Dt(this,Bt,Yt)}default:throw new Error("invalid option: ".concat(H))}}},{key:"standardDeviation",value:function(H,G){y()(H)==="object"&&(G=H,H=void 0);var F=this.variance(H,G);if(H===void 0)return Math.sqrt(F);for(var ot=0;ot<F.length;ot++)F[ot]=Math.sqrt(F[ot]);return F}},{key:"center",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(H)==="object"&&(G=H,H=void 0),y()(G)!=="object")throw new TypeError("options must be an object");var F=G,ot=F.center,Bt=ot===void 0?this.mean(H):ot;switch(H){case"row":{if(!C(Bt))throw new TypeError("center must be an array");return At(this,Bt),this}case"column":{if(!C(Bt))throw new TypeError("center must be an array");return Xt(this,Bt),this}case void 0:{if(typeof Bt!="number")throw new TypeError("center must be a number");return $t(this,Bt),this}default:throw new Error("invalid option: ".concat(H))}}},{key:"scale",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(H)==="object"&&(G=H,H=void 0),y()(G)!=="object")throw new TypeError("options must be an object");var F=G.scale;switch(H){case"row":{if(F===void 0)F=Tt(this);else if(!C(F))throw new TypeError("scale must be an array");return Kt(this,F),this}case"column":{if(F===void 0)F=Ee(this);else if(!C(F))throw new TypeError("scale must be an array");return vt(this,F),this}case void 0:{if(F===void 0)F=bt(this);else if(typeof F!="number")throw new TypeError("scale must be a number");return wt(this,F),this}default:throw new Error("invalid option: ".concat(H))}}},{key:"toString",value:function(H){return W(this,H)}}],[{key:"from1DArray",value:function(H,G,F){var ot=H*G;if(ot!==F.length)throw new RangeError("data length does not match given dimensions");for(var Bt=new ct(H,G),Ht=0;Ht<H;Ht++)for(var Yt=0;Yt<G;Yt++)Bt.set(Ht,Yt,F[Ht*G+Yt]);return Bt}},{key:"rowVector",value:function(H){for(var G=new ct(1,H.length),F=0;F<H.length;F++)G.set(0,F,H[F]);return G}},{key:"columnVector",value:function(H){for(var G=new ct(H.length,1),F=0;F<H.length;F++)G.set(F,0,H[F]);return G}},{key:"zeros",value:function(H,G){return new ct(H,G)}},{key:"ones",value:function(H,G){return new ct(H,G).fill(1)}},{key:"rand",value:function(H,G){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y()(F)!=="object")throw new TypeError("options must be an object");for(var ot=F.random,Bt=ot===void 0?Math.random:ot,Ht=new ct(H,G),Yt=0;Yt<H;Yt++)for(var he=0;he<G;he++)Ht.set(Yt,he,Bt());return Ht}},{key:"randInt",value:function(H,G){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y()(F)!=="object")throw new TypeError("options must be an object");var ot=F.min,Bt=ot===void 0?0:ot,Ht=F.max,Yt=Ht===void 0?1e3:Ht,he=F.random,at=he===void 0?Math.random:he;if(!Number.isInteger(Bt))throw new TypeError("min must be an integer");if(!Number.isInteger(Yt))throw new TypeError("max must be an integer");if(Bt>=Yt)throw new RangeError("min must be smaller than max");for(var yt=Yt-Bt,te=new ct(H,G),Me=0;Me<H;Me++)for(var _e=0;_e<G;_e++){var tr=Bt+Math.round(at()*yt);te.set(Me,_e,tr)}return te}},{key:"eye",value:function(H,G,F){G===void 0&&(G=H),F===void 0&&(F=1);for(var ot=Math.min(H,G),Bt=this.zeros(H,G),Ht=0;Ht<ot;Ht++)Bt.set(Ht,Ht,F);return Bt}},{key:"diag",value:function(H,G,F){var ot=H.length;G===void 0&&(G=ot),F===void 0&&(F=G);for(var Bt=Math.min(ot,G,F),Ht=this.zeros(G,F),Yt=0;Yt<Bt;Yt++)Ht.set(Yt,Yt,H[Yt]);return Ht}},{key:"min",value:function(H,G){H=this.checkMatrix(H),G=this.checkMatrix(G);for(var F=H.rows,ot=H.columns,Bt=new ct(F,ot),Ht=0;Ht<F;Ht++)for(var Yt=0;Yt<ot;Yt++)Bt.set(Ht,Yt,Math.min(H.get(Ht,Yt),G.get(Ht,Yt)));return Bt}},{key:"max",value:function(H,G){H=this.checkMatrix(H),G=this.checkMatrix(G);for(var F=H.rows,ot=H.columns,Bt=new this(F,ot),Ht=0;Ht<F;Ht++)for(var Yt=0;Yt<ot;Yt++)Bt.set(Ht,Yt,Math.max(H.get(Ht,Yt),G.get(Ht,Yt)));return Bt}},{key:"checkMatrix",value:function(H){return Pt.isMatrix(H)?H:new ct(H)}},{key:"isMatrix",value:function(H){return H!=null&&H.klass==="Matrix"}}]),Pt}();D.prototype.klass="Matrix",typeof Symbol!="undefined"&&(D.prototype[Symbol.for("nodejs.util.inspect.custom")]=X);function tt(Pt,Lt){return Pt-Lt}function Ot(Pt){return Pt.every(function(Lt){return typeof Lt=="number"})}D.random=D.rand,D.randomInt=D.randInt,D.diagonal=D.diag,D.prototype.diagonal=D.prototype.diag,D.identity=D.eye,D.prototype.negate=D.prototype.neg,D.prototype.tensorProduct=D.prototype.kroneckerProduct;var ct=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F){var ot;if(p()(this,H),ot=Lt.call(this),H.isMatrix(G))return z()(ot,G.clone());if(Number.isInteger(G)&&G>=0)if(ot.data=[],Number.isInteger(F)&&F>=0)for(var Bt=0;Bt<G;Bt++)ot.data.push(new Float64Array(F));else throw new TypeError("nColumns must be a positive integer");else if(C(G)){var Ht=G;if(G=Ht.length,F=G?Ht[0].length:0,typeof F!="number")throw new TypeError("Data must be a 2D array with at least one element");ot.data=[];for(var Yt=0;Yt<G;Yt++){if(Ht[Yt].length!==F)throw new RangeError("Inconsistent array dimensions");if(!Ot(Ht[Yt]))throw new TypeError("Input data contains non-numeric values");ot.data.push(Float64Array.from(Ht[Yt]))}}else throw new TypeError("First argument must be a positive number or an array");return ot.rows=G,ot.columns=F,ot}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.data[F][ot]=Bt,this}},{key:"get",value:function(F,ot){return this.data[F][ot]}},{key:"removeRow",value:function(F){return J(this,F),this.data.splice(F,1),this.rows-=1,this}},{key:"addRow",value:function(F,ot){return ot===void 0&&(ot=F,F=this.rows),J(this,F,!0),ot=Float64Array.from(mt(this,ot)),this.data.splice(F,0,ot),this.rows+=1,this}},{key:"removeColumn",value:function(F){rt(this,F);for(var ot=0;ot<this.rows;ot++){for(var Bt=new Float64Array(this.columns-1),Ht=0;Ht<F;Ht++)Bt[Ht]=this.data[ot][Ht];for(var Yt=F+1;Yt<this.columns;Yt++)Bt[Yt-1]=this.data[ot][Yt];this.data[ot]=Bt}return this.columns-=1,this}},{key:"addColumn",value:function(F,ot){typeof ot=="undefined"&&(ot=F,F=this.columns),rt(this,F,!0),ot=pt(this,ot);for(var Bt=0;Bt<this.rows;Bt++){for(var Ht=new Float64Array(this.columns+1),Yt=0;Yt<F;Yt++)Ht[Yt]=this.data[Bt][Yt];for(Ht[Yt++]=ot[Bt];Yt<this.columns+1;Yt++)Ht[Yt]=this.data[Bt][Yt-1];this.data[Bt]=Ht}return this.columns+=1,this}}]),H}(D);it(D,ct);var ie=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F,ot){var Bt;return p()(this,H),Bt=Lt.call(this),Bt.matrix=G,Bt.rows=F,Bt.columns=ot,Bt}return T()(H)}(D),pe=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F){var ot;return p()(this,H),rt(G,F),ot=Lt.call(this,G,G.rows,1),ot.column=F,ot}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(F,this.column,Bt),this}},{key:"get",value:function(F){return this.matrix.get(F,this.column)}}]),H}(ie),Ge=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F){var ot;return p()(this,H),Mt(G,F),ot=Lt.call(this,G,G.rows,F.length),ot.columnIndices=F,ot}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(F,this.columnIndices[ot],Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(F,this.columnIndices[ot])}}]),H}(ie),Re=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G){return p()(this,H),Lt.call(this,G,G.rows,G.columns)}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(F,this.columns-ot-1,Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(F,this.columns-ot-1)}}]),H}(ie),Je=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G){return p()(this,H),Lt.call(this,G,G.rows,G.columns)}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(this.rows-F-1,ot,Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(this.rows-F-1,ot)}}]),H}(ie),Ve=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F){var ot;return p()(this,H),J(G,F),ot=Lt.call(this,G,1,G.columns),ot.row=F,ot}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(this.row,ot,Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(this.row,ot)}}]),H}(ie),ce=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F){var ot;return p()(this,H),ft(G,F),ot=Lt.call(this,G,F.length,G.columns),ot.rowIndices=F,ot}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(this.rowIndices[F],ot,Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(this.rowIndices[F],ot)}}]),H}(ie),Le=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F,ot){var Bt;return p()(this,H),ft(G,F),Mt(G,ot),Bt=Lt.call(this,G,F.length,ot.length),Bt.rowIndices=F,Bt.columnIndices=ot,Bt}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(this.rowIndices[F],this.columnIndices[ot],Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(this.rowIndices[F],this.columnIndices[ot])}}]),H}(ie),je=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G,F,ot,Bt,Ht){var Yt;return p()(this,H),zt(G,F,ot,Bt,Ht),Yt=Lt.call(this,G,ot-F+1,Ht-Bt+1),Yt.startRow=F,Yt.startColumn=Bt,Yt}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(this.startRow+F,this.startColumn+ot,Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(this.startRow+F,this.startColumn+ot)}}]),H}(ie),Be=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G){return p()(this,H),Lt.call(this,G,G.columns,G.rows)}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.matrix.set(ot,F,Bt),this}},{key:"get",value:function(F,ot){return this.matrix.get(ot,F)}}]),H}(ie),vr=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G){var F,ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p()(this,H);var Bt=ot.rows,Ht=Bt===void 0?1:Bt;if(G.length%Ht!==0)throw new Error("the data length is not divisible by the number of rows");return F=Lt.call(this),F.rows=Ht,F.columns=G.length/Ht,F.data=G,F}return T()(H,[{key:"set",value:function(F,ot,Bt){var Ht=this._calculateIndex(F,ot);return this.data[Ht]=Bt,this}},{key:"get",value:function(F,ot){var Bt=this._calculateIndex(F,ot);return this.data[Bt]}},{key:"_calculateIndex",value:function(F,ot){return F*this.columns+ot}}]),H}(D),or=function(Pt){E()(H,Pt);var Lt=I()(H);function H(G){var F;return p()(this,H),F=Lt.call(this),F.data=G,F.rows=G.length,F.columns=G[0].length,F}return T()(H,[{key:"set",value:function(F,ot,Bt){return this.data[F][ot]=Bt,this}},{key:"get",value:function(F,ot){return this.data[F][ot]}}]),H}(D);function Ae(Pt,Lt){if(C(Pt))return Pt[0]&&C(Pt[0])?new or(Pt):new vr(Pt,Lt);throw new Error("the argument is not an array")}var yr=function(){function Pt(Lt){p()(this,Pt),Lt=or.checkMatrix(Lt);var H=Lt.clone(),G=H.rows,F=H.columns,ot=new Float64Array(G),Bt=1,Ht,Yt,he,at,yt,te,Me,_e,tr;for(Ht=0;Ht<G;Ht++)ot[Ht]=Ht;for(_e=new Float64Array(G),Yt=0;Yt<F;Yt++){for(Ht=0;Ht<G;Ht++)_e[Ht]=H.get(Ht,Yt);for(Ht=0;Ht<G;Ht++){for(tr=Math.min(Ht,Yt),yt=0,he=0;he<tr;he++)yt+=H.get(Ht,he)*_e[he];_e[Ht]-=yt,H.set(Ht,Yt,_e[Ht])}for(at=Yt,Ht=Yt+1;Ht<G;Ht++)Math.abs(_e[Ht])>Math.abs(_e[at])&&(at=Ht);if(at!==Yt){for(he=0;he<F;he++)te=H.get(at,he),H.set(at,he,H.get(Yt,he)),H.set(Yt,he,te);Me=ot[at],ot[at]=ot[Yt],ot[Yt]=Me,Bt=-Bt}if(Yt<G&&H.get(Yt,Yt)!==0)for(Ht=Yt+1;Ht<G;Ht++)H.set(Ht,Yt,H.get(Ht,Yt)/H.get(Yt,Yt))}this.LU=H,this.pivotVector=ot,this.pivotSign=Bt}return T()(Pt,[{key:"isSingular",value:function(){for(var H=this.LU,G=H.columns,F=0;F<G;F++)if(H.get(F,F)===0)return!0;return!1}},{key:"solve",value:function(H){H=ct.checkMatrix(H);var G=this.LU,F=G.rows;if(F!==H.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var ot=H.columns,Bt=H.subMatrixRow(this.pivotVector,0,ot-1),Ht=G.columns,Yt,he,at;for(at=0;at<Ht;at++)for(Yt=at+1;Yt<Ht;Yt++)for(he=0;he<ot;he++)Bt.set(Yt,he,Bt.get(Yt,he)-Bt.get(at,he)*G.get(Yt,at));for(at=Ht-1;at>=0;at--){for(he=0;he<ot;he++)Bt.set(at,he,Bt.get(at,he)/G.get(at,at));for(Yt=0;Yt<at;Yt++)for(he=0;he<ot;he++)Bt.set(Yt,he,Bt.get(Yt,he)-Bt.get(at,he)*G.get(Yt,at))}return Bt}},{key:"determinant",get:function(){var H=this.LU;if(!H.isSquare())throw new Error("Matrix must be square");for(var G=this.pivotSign,F=H.columns,ot=0;ot<F;ot++)G*=H.get(ot,ot);return G}},{key:"lowerTriangularMatrix",get:function(){for(var H=this.LU,G=H.rows,F=H.columns,ot=new ct(G,F),Bt=0;Bt<G;Bt++)for(var Ht=0;Ht<F;Ht++)Bt>Ht?ot.set(Bt,Ht,H.get(Bt,Ht)):Bt===Ht?ot.set(Bt,Ht,1):ot.set(Bt,Ht,0);return ot}},{key:"upperTriangularMatrix",get:function(){for(var H=this.LU,G=H.rows,F=H.columns,ot=new ct(G,F),Bt=0;Bt<G;Bt++)for(var Ht=0;Ht<F;Ht++)Bt<=Ht?ot.set(Bt,Ht,H.get(Bt,Ht)):ot.set(Bt,Ht,0);return ot}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),Pt}();function Cr(Pt,Lt){var H=0;return Math.abs(Pt)>Math.abs(Lt)?(H=Lt/Pt,Math.abs(Pt)*Math.sqrt(1+H*H)):Lt!==0?(H=Pt/Lt,Math.abs(Lt)*Math.sqrt(1+H*H)):0}var zr=function(){function Pt(Lt){p()(this,Pt),Lt=or.checkMatrix(Lt);var H=Lt.clone(),G=Lt.rows,F=Lt.columns,ot=new Float64Array(F),Bt,Ht,Yt,he;for(Yt=0;Yt<F;Yt++){var at=0;for(Bt=Yt;Bt<G;Bt++)at=Cr(at,H.get(Bt,Yt));if(at!==0){for(H.get(Yt,Yt)<0&&(at=-at),Bt=Yt;Bt<G;Bt++)H.set(Bt,Yt,H.get(Bt,Yt)/at);for(H.set(Yt,Yt,H.get(Yt,Yt)+1),Ht=Yt+1;Ht<F;Ht++){for(he=0,Bt=Yt;Bt<G;Bt++)he+=H.get(Bt,Yt)*H.get(Bt,Ht);for(he=-he/H.get(Yt,Yt),Bt=Yt;Bt<G;Bt++)H.set(Bt,Ht,H.get(Bt,Ht)+he*H.get(Bt,Yt))}}ot[Yt]=-at}this.QR=H,this.Rdiag=ot}return T()(Pt,[{key:"solve",value:function(H){H=ct.checkMatrix(H);var G=this.QR,F=G.rows;if(H.rows!==F)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var ot=H.columns,Bt=H.clone(),Ht=G.columns,Yt,he,at,yt;for(at=0;at<Ht;at++)for(he=0;he<ot;he++){for(yt=0,Yt=at;Yt<F;Yt++)yt+=G.get(Yt,at)*Bt.get(Yt,he);for(yt=-yt/G.get(at,at),Yt=at;Yt<F;Yt++)Bt.set(Yt,he,Bt.get(Yt,he)+yt*G.get(Yt,at))}for(at=Ht-1;at>=0;at--){for(he=0;he<ot;he++)Bt.set(at,he,Bt.get(at,he)/this.Rdiag[at]);for(Yt=0;Yt<at;Yt++)for(he=0;he<ot;he++)Bt.set(Yt,he,Bt.get(Yt,he)-Bt.get(at,he)*G.get(Yt,at))}return Bt.subMatrix(0,Ht-1,0,ot-1)}},{key:"isFullRank",value:function(){for(var H=this.QR.columns,G=0;G<H;G++)if(this.Rdiag[G]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var H=this.QR,G=H.columns,F=new ct(G,G),ot,Bt;for(ot=0;ot<G;ot++)for(Bt=0;Bt<G;Bt++)ot<Bt?F.set(ot,Bt,H.get(ot,Bt)):ot===Bt?F.set(ot,Bt,this.Rdiag[ot]):F.set(ot,Bt,0);return F}},{key:"orthogonalMatrix",get:function(){var H=this.QR,G=H.rows,F=H.columns,ot=new ct(G,F),Bt,Ht,Yt,he;for(Yt=F-1;Yt>=0;Yt--){for(Bt=0;Bt<G;Bt++)ot.set(Bt,Yt,0);for(ot.set(Yt,Yt,1),Ht=Yt;Ht<F;Ht++)if(H.get(Yt,Yt)!==0){for(he=0,Bt=Yt;Bt<G;Bt++)he+=H.get(Bt,Yt)*ot.get(Bt,Ht);for(he=-he/H.get(Yt,Yt),Bt=Yt;Bt<G;Bt++)ot.set(Bt,Ht,ot.get(Bt,Ht)+he*H.get(Bt,Yt))}}return ot}}]),Pt}(),Mr=function(){function Pt(Lt){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(p()(this,Pt),Lt=or.checkMatrix(Lt),Lt.isEmpty())throw new Error("Matrix must be non-empty");var G=Lt.rows,F=Lt.columns,ot=H.computeLeftSingularVectors,Bt=ot===void 0?!0:ot,Ht=H.computeRightSingularVectors,Yt=Ht===void 0?!0:Ht,he=H.autoTranspose,at=he===void 0?!1:he,yt=Boolean(Bt),te=Boolean(Yt),Me=!1,_e;if(G<F)if(!at)_e=Lt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{_e=Lt.transpose(),G=_e.rows,F=_e.columns,Me=!0;var tr=yt;yt=te,te=tr}else _e=Lt.clone();for(var sr=Math.min(G,F),ge=Math.min(G+1,F),Fe=new Float64Array(ge),qe=new ct(G,sr),_r=new ct(F,F),Er=new Float64Array(F),ye=new Float64Array(G),Ft=new Float64Array(ge),ne=0;ne<ge;ne++)Ft[ne]=ne;for(var Pe=Math.min(G-1,F),Ce=Math.max(0,Math.min(F-2,G)),Ue=Math.max(Pe,Ce),Xe=0;Xe<Ue;Xe++){if(Xe<Pe){Fe[Xe]=0;for(var Wr=Xe;Wr<G;Wr++)Fe[Xe]=Cr(Fe[Xe],_e.get(Wr,Xe));if(Fe[Xe]!==0){_e.get(Xe,Xe)<0&&(Fe[Xe]=-Fe[Xe]);for(var $r=Xe;$r<G;$r++)_e.set($r,Xe,_e.get($r,Xe)/Fe[Xe]);_e.set(Xe,Xe,_e.get(Xe,Xe)+1)}Fe[Xe]=-Fe[Xe]}for(var mn=Xe+1;mn<F;mn++){if(Xe<Pe&&Fe[Xe]!==0){for(var Nn=0,kn=Xe;kn<G;kn++)Nn+=_e.get(kn,Xe)*_e.get(kn,mn);Nn=-Nn/_e.get(Xe,Xe);for(var Jn=Xe;Jn<G;Jn++)_e.set(Jn,mn,_e.get(Jn,mn)+Nn*_e.get(Jn,Xe))}Er[mn]=_e.get(Xe,mn)}if(yt&&Xe<Pe)for(var ri=Xe;ri<G;ri++)qe.set(ri,Xe,_e.get(ri,Xe));if(Xe<Ce){Er[Xe]=0;for(var Ri=Xe+1;Ri<F;Ri++)Er[Xe]=Cr(Er[Xe],Er[Ri]);if(Er[Xe]!==0){Er[Xe+1]<0&&(Er[Xe]=0-Er[Xe]);for(var di=Xe+1;di<F;di++)Er[di]/=Er[Xe];Er[Xe+1]+=1}if(Er[Xe]=-Er[Xe],Xe+1<G&&Er[Xe]!==0){for(var Ki=Xe+1;Ki<G;Ki++)ye[Ki]=0;for(var yo=Xe+1;yo<G;yo++)for(var Ea=Xe+1;Ea<F;Ea++)ye[yo]+=Er[Ea]*_e.get(yo,Ea);for(var ta=Xe+1;ta<F;ta++)for(var mo=-Er[ta]/Er[Xe+1],Na=Xe+1;Na<G;Na++)_e.set(Na,ta,_e.get(Na,ta)+mo*ye[Na])}if(te)for(var To=Xe+1;To<F;To++)_r.set(To,Xe,Er[To])}}var vi=Math.min(F,G+1);if(Pe<F&&(Fe[Pe]=_e.get(Pe,Pe)),G<vi&&(Fe[vi-1]=0),Ce+1<vi&&(Er[Ce]=_e.get(Ce,vi-1)),Er[vi-1]=0,yt){for(var xa=Pe;xa<sr;xa++){for(var Vo=0;Vo<G;Vo++)qe.set(Vo,xa,0);qe.set(xa,xa,1)}for(var zi=Pe-1;zi>=0;zi--)if(Fe[zi]!==0){for(var ao=zi+1;ao<sr;ao++){for(var jo=0,ps=zi;ps<G;ps++)jo+=qe.get(ps,zi)*qe.get(ps,ao);jo=-jo/qe.get(zi,zi);for(var Io=zi;Io<G;Io++)qe.set(Io,ao,qe.get(Io,ao)+jo*qe.get(Io,zi))}for(var Ja=zi;Ja<G;Ja++)qe.set(Ja,zi,-qe.get(Ja,zi));qe.set(zi,zi,1+qe.get(zi,zi));for(var Pn=0;Pn<zi-1;Pn++)qe.set(Pn,zi,0)}else{for(var $s=0;$s<G;$s++)qe.set($s,zi,0);qe.set(zi,zi,1)}}if(te)for(var na=F-1;na>=0;na--){if(na<Ce&&Er[na]!==0)for(var oo=na+1;oo<F;oo++){for(var Xa=0,qo=na+1;qo<F;qo++)Xa+=_r.get(qo,na)*_r.get(qo,oo);Xa=-Xa/_r.get(na+1,na);for(var On=na+1;On<F;On++)_r.set(On,oo,_r.get(On,oo)+Xa*_r.get(On,na))}for(var bo=0;bo<F;bo++)_r.set(bo,na,0);_r.set(na,na,1)}for(var gs=vi-1,ts=0,es=Number.EPSILON;vi>0;){var Wn=void 0,so=void 0;for(Wn=vi-2;Wn>=-1&&Wn!==-1;Wn--){var ia=Number.MIN_VALUE+es*Math.abs(Fe[Wn]+Math.abs(Fe[Wn+1]));if(Math.abs(Er[Wn])<=ia||Number.isNaN(Er[Wn])){Er[Wn]=0;break}}if(Wn===vi-2)so=4;else{var Bi=void 0;for(Bi=vi-1;Bi>=Wn&&Bi!==Wn;Bi--){var rs=(Bi!==vi?Math.abs(Er[Bi]):0)+(Bi!==Wn+1?Math.abs(Er[Bi-1]):0);if(Math.abs(Fe[Bi])<=es*rs){Fe[Bi]=0;break}}Bi===Wn?so=3:Bi===vi-1?so=1:(so=2,Wn=Bi)}switch(Wn++,so){case 1:{var Po=Er[vi-2];Er[vi-2]=0;for(var ga=vi-2;ga>=Wn;ga--){var ys=Cr(Fe[ga],Po),Qs=Fe[ga]/ys,ms=Po/ys;if(Fe[ga]=ys,ga!==Wn&&(Po=-ms*Er[ga-1],Er[ga-1]=Qs*Er[ga-1]),te)for(var Eo=0;Eo<F;Eo++)ys=Qs*_r.get(Eo,ga)+ms*_r.get(Eo,vi-1),_r.set(Eo,vi-1,-ms*_r.get(Eo,ga)+Qs*_r.get(Eo,vi-1)),_r.set(Eo,ga,ys)}break}case 2:{var Ai=Er[Wn-1];Er[Wn-1]=0;for(var Ya=Wn;Ya<vi;Ya++){var bs=Cr(Fe[Ya],Ai),Ha=Fe[Ya]/bs,Ns=Ai/bs;if(Fe[Ya]=bs,Ai=-Ns*Er[Ya],Er[Ya]=Ha*Er[Ya],yt)for(var La=0;La<G;La++)bs=Ha*qe.get(La,Ya)+Ns*qe.get(La,Wn-1),qe.set(La,Wn-1,-Ns*qe.get(La,Ya)+Ha*qe.get(La,Wn-1)),qe.set(La,Ya,bs)}break}case 3:{var ya=Math.max(Math.abs(Fe[vi-1]),Math.abs(Fe[vi-2]),Math.abs(Er[vi-2]),Math.abs(Fe[Wn]),Math.abs(Er[Wn])),Za=Fe[vi-1]/ya,xo=Fe[vi-2]/ya,Ka=Er[vi-2]/ya,Ga=Fe[Wn]/ya,Js=Er[Wn]/ya,ka=((xo+Za)*(xo-Za)+Ka*Ka)/2,$a=Za*Ka*(Za*Ka),wo=0;(ka!==0||$a!==0)&&(ka<0?wo=0-Math.sqrt(ka*ka+$a):wo=Math.sqrt(ka*ka+$a),wo=$a/(ka+wo));for(var qa=(Ga+Za)*(Ga-Za)+wo,Xo=Ga*Js,fi=Wn;fi<vi-1;fi++){var ma=Cr(qa,Xo);ma===0&&(ma=Number.MIN_VALUE);var to=qa/ma,ba=Xo/ma;if(fi!==Wn&&(Er[fi-1]=ma),qa=to*Fe[fi]+ba*Er[fi],Er[fi]=to*Er[fi]-ba*Fe[fi],Xo=ba*Fe[fi+1],Fe[fi+1]=to*Fe[fi+1],te)for(var Mi=0;Mi<F;Mi++)ma=to*_r.get(Mi,fi)+ba*_r.get(Mi,fi+1),_r.set(Mi,fi+1,-ba*_r.get(Mi,fi)+to*_r.get(Mi,fi+1)),_r.set(Mi,fi,ma);if(ma=Cr(qa,Xo),ma===0&&(ma=Number.MIN_VALUE),to=qa/ma,ba=Xo/ma,Fe[fi]=ma,qa=to*Er[fi]+ba*Fe[fi+1],Fe[fi+1]=-ba*Er[fi]+to*Fe[fi+1],Xo=ba*Er[fi+1],Er[fi+1]=to*Er[fi+1],yt&&fi<G-1)for(var ca=0;ca<G;ca++)ma=to*qe.get(ca,fi)+ba*qe.get(ca,fi+1),qe.set(ca,fi+1,-ba*qe.get(ca,fi)+to*qe.get(ca,fi+1)),qe.set(ca,fi,ma)}Er[vi-2]=qa,ts=ts+1;break}case 4:{if(Fe[Wn]<=0&&(Fe[Wn]=Fe[Wn]<0?-Fe[Wn]:0,te))for(var Es=0;Es<=gs;Es++)_r.set(Es,Wn,-_r.get(Es,Wn));for(;Wn<gs&&!(Fe[Wn]>=Fe[Wn+1]);){var aa=Fe[Wn];if(Fe[Wn]=Fe[Wn+1],Fe[Wn+1]=aa,te&&Wn<F-1)for(var uo=0;uo<F;uo++)aa=_r.get(uo,Wn+1),_r.set(uo,Wn+1,_r.get(uo,Wn)),_r.set(uo,Wn,aa);if(yt&&Wn<G-1)for(var eo=0;eo<G;eo++)aa=qe.get(eo,Wn+1),qe.set(eo,Wn+1,qe.get(eo,Wn)),qe.set(eo,Wn,aa);Wn++}ts=0,vi--;break}}}if(Me){var fo=_r;_r=qe,qe=fo}this.m=G,this.n=F,this.s=Fe,this.U=qe,this.V=_r}return T()(Pt,[{key:"solve",value:function(H){for(var G=H,F=this.threshold,ot=this.s.length,Bt=ct.zeros(ot,ot),Ht=0;Ht<ot;Ht++)Math.abs(this.s[Ht])<=F?Bt.set(Ht,Ht,0):Bt.set(Ht,Ht,1/this.s[Ht]);for(var Yt=this.U,he=this.rightSingularVectors,at=he.mmul(Bt),yt=he.rows,te=Yt.rows,Me=ct.zeros(yt,te),_e=0;_e<yt;_e++)for(var tr=0;tr<te;tr++){for(var sr=0,ge=0;ge<ot;ge++)sr+=at.get(_e,ge)*Yt.get(tr,ge);Me.set(_e,tr,sr)}return Me.mmul(G)}},{key:"solveForDiagonal",value:function(H){return this.solve(ct.diag(H))}},{key:"inverse",value:function(){for(var H=this.V,G=this.threshold,F=H.rows,ot=H.columns,Bt=new ct(F,this.s.length),Ht=0;Ht<F;Ht++)for(var Yt=0;Yt<ot;Yt++)Math.abs(this.s[Yt])>G&&Bt.set(Ht,Yt,H.get(Ht,Yt)/this.s[Yt]);for(var he=this.U,at=he.rows,yt=he.columns,te=new ct(F,at),Me=0;Me<F;Me++)for(var _e=0;_e<at;_e++){for(var tr=0,sr=0;sr<yt;sr++)tr+=Bt.get(Me,sr)*he.get(_e,sr);te.set(Me,_e,tr)}return te}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var H=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,G=0,F=this.s,ot=0,Bt=F.length;ot<Bt;ot++)F[ot]>H&&G++;return G}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return ct.diag(this.s)}}]),Pt}();function un(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Pt=or.checkMatrix(Pt),Lt?new Mr(Pt).inverse():hn(Pt,ct.eye(Pt.rows))}function hn(Pt,Lt){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Pt=or.checkMatrix(Pt),Lt=or.checkMatrix(Lt),H?new Mr(Pt).solve(Lt):Pt.isSquare()?new yr(Pt).solve(Lt):new zr(Pt).solve(Lt)}function Un(Pt){if(Pt=ct.checkMatrix(Pt),Pt.isSquare()){if(Pt.columns===0)return 1;var Lt,H,G,F;if(Pt.columns===2)return Lt=Pt.get(0,0),H=Pt.get(0,1),G=Pt.get(1,0),F=Pt.get(1,1),Lt*F-H*G;if(Pt.columns===3){var ot,Bt,Ht;return ot=new Le(Pt,[1,2],[1,2]),Bt=new Le(Pt,[1,2],[0,2]),Ht=new Le(Pt,[1,2],[0,1]),Lt=Pt.get(0,0),H=Pt.get(0,1),G=Pt.get(0,2),Lt*Un(ot)-H*Un(Bt)+G*Un(Ht)}else return new yr(Pt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function nn(Pt,Lt){for(var H=[],G=0;G<Pt;G++)G!==Lt&&H.push(G);return H}function vn(Pt,Lt,H){var G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(Pt>F)return new Array(Lt.rows+1).fill(0);for(var ot=Lt.addRow(H,[0]),Bt=0;Bt<ot.rows;Bt++)Math.abs(ot.get(Bt,0))<G&&ot.set(Bt,0,0);return ot.to1DArray()}function ln(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=Lt.thresholdValue,G=H===void 0?1e-9:H,F=Lt.thresholdError,ot=F===void 0?1e-9:F;Pt=ct.checkMatrix(Pt);for(var Bt=Pt.rows,Ht=new ct(Bt,Bt),Yt=0;Yt<Bt;Yt++){var he=ct.columnVector(Pt.getRow(Yt)),at=Pt.subMatrixRow(nn(Bt,Yt)).transpose(),yt=new Mr(at),te=yt.solve(he),Me=ct.sub(he,at.mmul(te)).abs().max();Ht.setRow(Yt,vn(Me,te,Yt,G,ot))}return Ht}function pn(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(Pt=ct.checkMatrix(Pt),Pt.isEmpty())return Pt.transpose();for(var H=new Mr(Pt,{autoTranspose:!0}),G=H.leftSingularVectors,F=H.rightSingularVectors,ot=H.diagonal,Bt=0;Bt<ot.length;Bt++)Math.abs(ot[Bt])>Lt?ot[Bt]=1/ot[Bt]:ot[Bt]=0;return F.mmul(ct.diag(ot).mmul(G.transpose()))}function Bn(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pt=new ct(Pt);var G=!1;if(y()(Lt)==="object"&&!ct.isMatrix(Lt)&&!C(Lt)?(H=Lt,Lt=Pt,G=!0):Lt=new ct(Lt),Pt.rows!==Lt.rows)throw new TypeError("Both matrices must have the same number of rows");var F=H,ot=F.center,Bt=ot===void 0?!0:ot;Bt&&(Pt=Pt.center("column"),G||(Lt=Lt.center("column")));for(var Ht=Pt.transpose().mmul(Lt),Yt=0;Yt<Ht.rows;Yt++)for(var he=0;he<Ht.columns;he++)Ht.set(Yt,he,Ht.get(Yt,he)*(1/(Pt.rows-1)));return Ht}function Oe(Pt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pt,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pt=new ct(Pt);var G=!1;if(y()(Lt)==="object"&&!ct.isMatrix(Lt)&&!C(Lt)?(H=Lt,Lt=Pt,G=!0):Lt=new ct(Lt),Pt.rows!==Lt.rows)throw new TypeError("Both matrices must have the same number of rows");var F=H,ot=F.center,Bt=ot===void 0?!0:ot,Ht=F.scale,Yt=Ht===void 0?!0:Ht;Bt&&(Pt.center("column"),G||Lt.center("column")),Yt&&(Pt.scale("column"),G||Lt.scale("column"));for(var he=Pt.standardDeviation("column",{unbiased:!0}),at=G?he:Lt.standardDeviation("column",{unbiased:!0}),yt=Pt.transpose().mmul(Lt),te=0;te<yt.rows;te++)for(var Me=0;Me<yt.columns;Me++)yt.set(te,Me,yt.get(te,Me)*(1/(he[te]*at[Me]))*(1/(Pt.rows-1)));return yt}var Cn=function(){function Pt(Lt){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p()(this,Pt);var G=H.assumeSymmetric,F=G===void 0?!1:G;if(Lt=or.checkMatrix(Lt),!Lt.isSquare())throw new Error("Matrix is not a square matrix");if(Lt.isEmpty())throw new Error("Matrix must be non-empty");var ot=Lt.columns,Bt=new ct(ot,ot),Ht=new Float64Array(ot),Yt=new Float64Array(ot),he=Lt,at,yt,te=!1;if(F?te=!0:te=Lt.isSymmetric(),te){for(at=0;at<ot;at++)for(yt=0;yt<ot;yt++)Bt.set(at,yt,he.get(at,yt));Gn(ot,Yt,Ht,Bt),bi(ot,Yt,Ht,Bt)}else{var Me=new ct(ot,ot),_e=new Float64Array(ot);for(yt=0;yt<ot;yt++)for(at=0;at<ot;at++)Me.set(at,yt,he.get(at,yt));zn(ot,Me,_e,Bt),Hn(ot,Yt,Ht,Bt,Me)}this.n=ot,this.e=Yt,this.d=Ht,this.V=Bt}return T()(Pt,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var H=this.n,G=this.e,F=this.d,ot=new ct(H,H),Bt,Ht;for(Bt=0;Bt<H;Bt++){for(Ht=0;Ht<H;Ht++)ot.set(Bt,Ht,0);ot.set(Bt,Bt,F[Bt]),G[Bt]>0?ot.set(Bt,Bt+1,G[Bt]):G[Bt]<0&&ot.set(Bt,Bt-1,G[Bt])}return ot}}]),Pt}();function Gn(Pt,Lt,H,G){var F,ot,Bt,Ht,Yt,he,at,yt;for(Yt=0;Yt<Pt;Yt++)H[Yt]=G.get(Pt-1,Yt);for(Ht=Pt-1;Ht>0;Ht--){for(yt=0,Bt=0,he=0;he<Ht;he++)yt=yt+Math.abs(H[he]);if(yt===0)for(Lt[Ht]=H[Ht-1],Yt=0;Yt<Ht;Yt++)H[Yt]=G.get(Ht-1,Yt),G.set(Ht,Yt,0),G.set(Yt,Ht,0);else{for(he=0;he<Ht;he++)H[he]/=yt,Bt+=H[he]*H[he];for(F=H[Ht-1],ot=Math.sqrt(Bt),F>0&&(ot=-ot),Lt[Ht]=yt*ot,Bt=Bt-F*ot,H[Ht-1]=F-ot,Yt=0;Yt<Ht;Yt++)Lt[Yt]=0;for(Yt=0;Yt<Ht;Yt++){for(F=H[Yt],G.set(Yt,Ht,F),ot=Lt[Yt]+G.get(Yt,Yt)*F,he=Yt+1;he<=Ht-1;he++)ot+=G.get(he,Yt)*H[he],Lt[he]+=G.get(he,Yt)*F;Lt[Yt]=ot}for(F=0,Yt=0;Yt<Ht;Yt++)Lt[Yt]/=Bt,F+=Lt[Yt]*H[Yt];for(at=F/(Bt+Bt),Yt=0;Yt<Ht;Yt++)Lt[Yt]-=at*H[Yt];for(Yt=0;Yt<Ht;Yt++){for(F=H[Yt],ot=Lt[Yt],he=Yt;he<=Ht-1;he++)G.set(he,Yt,G.get(he,Yt)-(F*Lt[he]+ot*H[he]));H[Yt]=G.get(Ht-1,Yt),G.set(Ht,Yt,0)}}H[Ht]=Bt}for(Ht=0;Ht<Pt-1;Ht++){if(G.set(Pt-1,Ht,G.get(Ht,Ht)),G.set(Ht,Ht,1),Bt=H[Ht+1],Bt!==0){for(he=0;he<=Ht;he++)H[he]=G.get(he,Ht+1)/Bt;for(Yt=0;Yt<=Ht;Yt++){for(ot=0,he=0;he<=Ht;he++)ot+=G.get(he,Ht+1)*G.get(he,Yt);for(he=0;he<=Ht;he++)G.set(he,Yt,G.get(he,Yt)-ot*H[he])}}for(he=0;he<=Ht;he++)G.set(he,Ht+1,0)}for(Yt=0;Yt<Pt;Yt++)H[Yt]=G.get(Pt-1,Yt),G.set(Pt-1,Yt,0);G.set(Pt-1,Pt-1,1),Lt[0]=0}function bi(Pt,Lt,H,G){var F,ot,Bt,Ht,Yt,he,at,yt,te,Me,_e,tr,sr,ge,Fe,qe,_r;for(Bt=1;Bt<Pt;Bt++)Lt[Bt-1]=Lt[Bt];Lt[Pt-1]=0;var Er=0,ye=0,Ft=Number.EPSILON;for(he=0;he<Pt;he++){for(ye=Math.max(ye,Math.abs(H[he])+Math.abs(Lt[he])),at=he;at<Pt&&!(Math.abs(Lt[at])<=Ft*ye);)at++;if(at>he){_r=0;do{for(_r=_r+1,F=H[he],yt=(H[he+1]-F)/(2*Lt[he]),te=Cr(yt,1),yt<0&&(te=-te),H[he]=Lt[he]/(yt+te),H[he+1]=Lt[he]*(yt+te),Me=H[he+1],ot=F-H[he],Bt=he+2;Bt<Pt;Bt++)H[Bt]-=ot;for(Er=Er+ot,yt=H[at],_e=1,tr=_e,sr=_e,ge=Lt[he+1],Fe=0,qe=0,Bt=at-1;Bt>=he;Bt--)for(sr=tr,tr=_e,qe=Fe,F=_e*Lt[Bt],ot=_e*yt,te=Cr(yt,Lt[Bt]),Lt[Bt+1]=Fe*te,Fe=Lt[Bt]/te,_e=yt/te,yt=_e*H[Bt]-Fe*F,H[Bt+1]=ot+Fe*(_e*F+Fe*H[Bt]),Yt=0;Yt<Pt;Yt++)ot=G.get(Yt,Bt+1),G.set(Yt,Bt+1,Fe*G.get(Yt,Bt)+_e*ot),G.set(Yt,Bt,_e*G.get(Yt,Bt)-Fe*ot);yt=-Fe*qe*sr*ge*Lt[he]/Me,Lt[he]=Fe*yt,H[he]=_e*yt}while(Math.abs(Lt[he])>Ft*ye)}H[he]=H[he]+Er,Lt[he]=0}for(Bt=0;Bt<Pt-1;Bt++){for(Yt=Bt,yt=H[Bt],Ht=Bt+1;Ht<Pt;Ht++)H[Ht]<yt&&(Yt=Ht,yt=H[Ht]);if(Yt!==Bt)for(H[Yt]=H[Bt],H[Bt]=yt,Ht=0;Ht<Pt;Ht++)yt=G.get(Ht,Bt),G.set(Ht,Bt,G.get(Ht,Yt)),G.set(Ht,Yt,yt)}}function zn(Pt,Lt,H,G){var F=0,ot=Pt-1,Bt,Ht,Yt,he,at,yt,te;for(yt=F+1;yt<=ot-1;yt++){for(te=0,he=yt;he<=ot;he++)te=te+Math.abs(Lt.get(he,yt-1));if(te!==0){for(Yt=0,he=ot;he>=yt;he--)H[he]=Lt.get(he,yt-1)/te,Yt+=H[he]*H[he];for(Ht=Math.sqrt(Yt),H[yt]>0&&(Ht=-Ht),Yt=Yt-H[yt]*Ht,H[yt]=H[yt]-Ht,at=yt;at<Pt;at++){for(Bt=0,he=ot;he>=yt;he--)Bt+=H[he]*Lt.get(he,at);for(Bt=Bt/Yt,he=yt;he<=ot;he++)Lt.set(he,at,Lt.get(he,at)-Bt*H[he])}for(he=0;he<=ot;he++){for(Bt=0,at=ot;at>=yt;at--)Bt+=H[at]*Lt.get(he,at);for(Bt=Bt/Yt,at=yt;at<=ot;at++)Lt.set(he,at,Lt.get(he,at)-Bt*H[at])}H[yt]=te*H[yt],Lt.set(yt,yt-1,te*Ht)}}for(he=0;he<Pt;he++)for(at=0;at<Pt;at++)G.set(he,at,he===at?1:0);for(yt=ot-1;yt>=F+1;yt--)if(Lt.get(yt,yt-1)!==0){for(he=yt+1;he<=ot;he++)H[he]=Lt.get(he,yt-1);for(at=yt;at<=ot;at++){for(Ht=0,he=yt;he<=ot;he++)Ht+=H[he]*G.get(he,at);for(Ht=Ht/H[yt]/Lt.get(yt,yt-1),he=yt;he<=ot;he++)G.set(he,at,G.get(he,at)+Ht*H[he])}}}function Hn(Pt,Lt,H,G,F){var ot=Pt-1,Bt=0,Ht=Pt-1,Yt=Number.EPSILON,he=0,at=0,yt=0,te=0,Me=0,_e=0,tr=0,sr=0,ge,Fe,qe,_r,Er,ye,Ft,ne,Pe,Ce,Ue,Xe,Wr,$r,mn;for(ge=0;ge<Pt;ge++)for((ge<Bt||ge>Ht)&&(H[ge]=F.get(ge,ge),Lt[ge]=0),Fe=Math.max(ge-1,0);Fe<Pt;Fe++)at=at+Math.abs(F.get(ge,Fe));for(;ot>=Bt;){for(_r=ot;_r>Bt&&(_e=Math.abs(F.get(_r-1,_r-1))+Math.abs(F.get(_r,_r)),_e===0&&(_e=at),!(Math.abs(F.get(_r,_r-1))<Yt*_e));)_r--;if(_r===ot)F.set(ot,ot,F.get(ot,ot)+he),H[ot]=F.get(ot,ot),Lt[ot]=0,ot--,sr=0;else if(_r===ot-1){if(Ft=F.get(ot,ot-1)*F.get(ot-1,ot),yt=(F.get(ot-1,ot-1)-F.get(ot,ot))/2,te=yt*yt+Ft,tr=Math.sqrt(Math.abs(te)),F.set(ot,ot,F.get(ot,ot)+he),F.set(ot-1,ot-1,F.get(ot-1,ot-1)+he),ne=F.get(ot,ot),te>=0){for(tr=yt>=0?yt+tr:yt-tr,H[ot-1]=ne+tr,H[ot]=H[ot-1],tr!==0&&(H[ot]=ne-Ft/tr),Lt[ot-1]=0,Lt[ot]=0,ne=F.get(ot,ot-1),_e=Math.abs(ne)+Math.abs(tr),yt=ne/_e,te=tr/_e,Me=Math.sqrt(yt*yt+te*te),yt=yt/Me,te=te/Me,Fe=ot-1;Fe<Pt;Fe++)tr=F.get(ot-1,Fe),F.set(ot-1,Fe,te*tr+yt*F.get(ot,Fe)),F.set(ot,Fe,te*F.get(ot,Fe)-yt*tr);for(ge=0;ge<=ot;ge++)tr=F.get(ge,ot-1),F.set(ge,ot-1,te*tr+yt*F.get(ge,ot)),F.set(ge,ot,te*F.get(ge,ot)-yt*tr);for(ge=Bt;ge<=Ht;ge++)tr=G.get(ge,ot-1),G.set(ge,ot-1,te*tr+yt*G.get(ge,ot)),G.set(ge,ot,te*G.get(ge,ot)-yt*tr)}else H[ot-1]=ne+yt,H[ot]=ne+yt,Lt[ot-1]=tr,Lt[ot]=-tr;ot=ot-2,sr=0}else{if(ne=F.get(ot,ot),Pe=0,Ft=0,_r<ot&&(Pe=F.get(ot-1,ot-1),Ft=F.get(ot,ot-1)*F.get(ot-1,ot)),sr===10){for(he+=ne,ge=Bt;ge<=ot;ge++)F.set(ge,ge,F.get(ge,ge)-ne);_e=Math.abs(F.get(ot,ot-1))+Math.abs(F.get(ot-1,ot-2)),ne=Pe=.75*_e,Ft=-.4375*_e*_e}if(sr===30&&(_e=(Pe-ne)/2,_e=_e*_e+Ft,_e>0)){for(_e=Math.sqrt(_e),Pe<ne&&(_e=-_e),_e=ne-Ft/((Pe-ne)/2+_e),ge=Bt;ge<=ot;ge++)F.set(ge,ge,F.get(ge,ge)-_e);he+=_e,ne=Pe=Ft=.964}for(sr=sr+1,Er=ot-2;Er>=_r&&(tr=F.get(Er,Er),Me=ne-tr,_e=Pe-tr,yt=(Me*_e-Ft)/F.get(Er+1,Er)+F.get(Er,Er+1),te=F.get(Er+1,Er+1)-tr-Me-_e,Me=F.get(Er+2,Er+1),_e=Math.abs(yt)+Math.abs(te)+Math.abs(Me),yt=yt/_e,te=te/_e,Me=Me/_e,!(Er===_r||Math.abs(F.get(Er,Er-1))*(Math.abs(te)+Math.abs(Me))<Yt*(Math.abs(yt)*(Math.abs(F.get(Er-1,Er-1))+Math.abs(tr)+Math.abs(F.get(Er+1,Er+1))))));)Er--;for(ge=Er+2;ge<=ot;ge++)F.set(ge,ge-2,0),ge>Er+2&&F.set(ge,ge-3,0);for(qe=Er;qe<=ot-1&&($r=qe!==ot-1,qe!==Er&&(yt=F.get(qe,qe-1),te=F.get(qe+1,qe-1),Me=$r?F.get(qe+2,qe-1):0,ne=Math.abs(yt)+Math.abs(te)+Math.abs(Me),ne!==0&&(yt=yt/ne,te=te/ne,Me=Me/ne)),ne!==0);qe++)if(_e=Math.sqrt(yt*yt+te*te+Me*Me),yt<0&&(_e=-_e),_e!==0){for(qe!==Er?F.set(qe,qe-1,-_e*ne):_r!==Er&&F.set(qe,qe-1,-F.get(qe,qe-1)),yt=yt+_e,ne=yt/_e,Pe=te/_e,tr=Me/_e,te=te/yt,Me=Me/yt,Fe=qe;Fe<Pt;Fe++)yt=F.get(qe,Fe)+te*F.get(qe+1,Fe),$r&&(yt=yt+Me*F.get(qe+2,Fe),F.set(qe+2,Fe,F.get(qe+2,Fe)-yt*tr)),F.set(qe,Fe,F.get(qe,Fe)-yt*ne),F.set(qe+1,Fe,F.get(qe+1,Fe)-yt*Pe);for(ge=0;ge<=Math.min(ot,qe+3);ge++)yt=ne*F.get(ge,qe)+Pe*F.get(ge,qe+1),$r&&(yt=yt+tr*F.get(ge,qe+2),F.set(ge,qe+2,F.get(ge,qe+2)-yt*Me)),F.set(ge,qe,F.get(ge,qe)-yt),F.set(ge,qe+1,F.get(ge,qe+1)-yt*te);for(ge=Bt;ge<=Ht;ge++)yt=ne*G.get(ge,qe)+Pe*G.get(ge,qe+1),$r&&(yt=yt+tr*G.get(ge,qe+2),G.set(ge,qe+2,G.get(ge,qe+2)-yt*Me)),G.set(ge,qe,G.get(ge,qe)-yt),G.set(ge,qe+1,G.get(ge,qe+1)-yt*te)}}}if(at!==0){for(ot=Pt-1;ot>=0;ot--)if(yt=H[ot],te=Lt[ot],te===0)for(_r=ot,F.set(ot,ot,1),ge=ot-1;ge>=0;ge--){for(Ft=F.get(ge,ge)-yt,Me=0,Fe=_r;Fe<=ot;Fe++)Me=Me+F.get(ge,Fe)*F.get(Fe,ot);if(Lt[ge]<0)tr=Ft,_e=Me;else if(_r=ge,Lt[ge]===0?F.set(ge,ot,Ft!==0?-Me/Ft:-Me/(Yt*at)):(ne=F.get(ge,ge+1),Pe=F.get(ge+1,ge),te=(H[ge]-yt)*(H[ge]-yt)+Lt[ge]*Lt[ge],ye=(ne*_e-tr*Me)/te,F.set(ge,ot,ye),F.set(ge+1,ot,Math.abs(ne)>Math.abs(tr)?(-Me-Ft*ye)/ne:(-_e-Pe*ye)/tr)),ye=Math.abs(F.get(ge,ot)),Yt*ye*ye>1)for(Fe=ge;Fe<=ot;Fe++)F.set(Fe,ot,F.get(Fe,ot)/ye)}else if(te<0)for(_r=ot-1,Math.abs(F.get(ot,ot-1))>Math.abs(F.get(ot-1,ot))?(F.set(ot-1,ot-1,te/F.get(ot,ot-1)),F.set(ot-1,ot,-(F.get(ot,ot)-yt)/F.get(ot,ot-1))):(mn=hi(0,-F.get(ot-1,ot),F.get(ot-1,ot-1)-yt,te),F.set(ot-1,ot-1,mn[0]),F.set(ot-1,ot,mn[1])),F.set(ot,ot-1,0),F.set(ot,ot,1),ge=ot-2;ge>=0;ge--){for(Ce=0,Ue=0,Fe=_r;Fe<=ot;Fe++)Ce=Ce+F.get(ge,Fe)*F.get(Fe,ot-1),Ue=Ue+F.get(ge,Fe)*F.get(Fe,ot);if(Ft=F.get(ge,ge)-yt,Lt[ge]<0)tr=Ft,Me=Ce,_e=Ue;else if(_r=ge,Lt[ge]===0?(mn=hi(-Ce,-Ue,Ft,te),F.set(ge,ot-1,mn[0]),F.set(ge,ot,mn[1])):(ne=F.get(ge,ge+1),Pe=F.get(ge+1,ge),Xe=(H[ge]-yt)*(H[ge]-yt)+Lt[ge]*Lt[ge]-te*te,Wr=(H[ge]-yt)*2*te,Xe===0&&Wr===0&&(Xe=Yt*at*(Math.abs(Ft)+Math.abs(te)+Math.abs(ne)+Math.abs(Pe)+Math.abs(tr))),mn=hi(ne*Me-tr*Ce+te*Ue,ne*_e-tr*Ue-te*Ce,Xe,Wr),F.set(ge,ot-1,mn[0]),F.set(ge,ot,mn[1]),Math.abs(ne)>Math.abs(tr)+Math.abs(te)?(F.set(ge+1,ot-1,(-Ce-Ft*F.get(ge,ot-1)+te*F.get(ge,ot))/ne),F.set(ge+1,ot,(-Ue-Ft*F.get(ge,ot)-te*F.get(ge,ot-1))/ne)):(mn=hi(-Me-Pe*F.get(ge,ot-1),-_e-Pe*F.get(ge,ot),tr,te),F.set(ge+1,ot-1,mn[0]),F.set(ge+1,ot,mn[1]))),ye=Math.max(Math.abs(F.get(ge,ot-1)),Math.abs(F.get(ge,ot))),Yt*ye*ye>1)for(Fe=ge;Fe<=ot;Fe++)F.set(Fe,ot-1,F.get(Fe,ot-1)/ye),F.set(Fe,ot,F.get(Fe,ot)/ye)}for(ge=0;ge<Pt;ge++)if(ge<Bt||ge>Ht)for(Fe=ge;Fe<Pt;Fe++)G.set(ge,Fe,F.get(ge,Fe));for(Fe=Pt-1;Fe>=Bt;Fe--)for(ge=Bt;ge<=Ht;ge++){for(tr=0,qe=Bt;qe<=Math.min(Fe,Ht);qe++)tr=tr+G.get(ge,qe)*F.get(qe,Fe);G.set(ge,Fe,tr)}}}function hi(Pt,Lt,H,G){var F,ot;return Math.abs(H)>Math.abs(G)?(F=G/H,ot=H+F*G,[(Pt+F*Lt)/ot,(Lt-F*Pt)/ot]):(F=H/G,ot=G+F*H,[(F*Pt+Lt)/ot,(F*Lt-Pt)/ot])}var _i=function(){function Pt(Lt){if(p()(this,Pt),Lt=or.checkMatrix(Lt),!Lt.isSymmetric())throw new Error("Matrix is not symmetric");var H=Lt,G=H.rows,F=new ct(G,G),ot=!0,Bt,Ht,Yt;for(Ht=0;Ht<G;Ht++){var he=0;for(Yt=0;Yt<Ht;Yt++){var at=0;for(Bt=0;Bt<Yt;Bt++)at+=F.get(Yt,Bt)*F.get(Ht,Bt);at=(H.get(Ht,Yt)-at)/F.get(Yt,Yt),F.set(Ht,Yt,at),he=he+at*at}for(he=H.get(Ht,Ht)-he,ot&=he>0,F.set(Ht,Ht,Math.sqrt(Math.max(he,0))),Yt=Ht+1;Yt<G;Yt++)F.set(Ht,Yt,0)}this.L=F,this.positiveDefinite=Boolean(ot)}return T()(Pt,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(H){H=or.checkMatrix(H);var G=this.L,F=G.rows;if(H.rows!==F)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var ot=H.columns,Bt=H.clone(),Ht,Yt,he;for(he=0;he<F;he++)for(Yt=0;Yt<ot;Yt++){for(Ht=0;Ht<he;Ht++)Bt.set(he,Yt,Bt.get(he,Yt)-Bt.get(Ht,Yt)*G.get(he,Ht));Bt.set(he,Yt,Bt.get(he,Yt)/G.get(he,he))}for(he=F-1;he>=0;he--)for(Yt=0;Yt<ot;Yt++){for(Ht=he+1;Ht<F;Ht++)Bt.set(he,Yt,Bt.get(he,Yt)-Bt.get(Ht,Yt)*G.get(Ht,he));Bt.set(he,Yt,Bt.get(he,Yt)/G.get(he,he))}return Bt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),Pt}(),pi=T()(function Pt(Lt){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p()(this,Pt),Lt=or.checkMatrix(Lt);var G=H.Y,F=H.scaleScores,ot=F===void 0?!1:F,Bt=H.maxIterations,Ht=Bt===void 0?1e3:Bt,Yt=H.terminationCriteria,he=Yt===void 0?1e-10:Yt,at;if(G){if(C(G)&&typeof G[0]=="number"?G=ct.columnVector(G):G=or.checkMatrix(G),G.rows!==Lt.rows)throw new Error("Y should have the same number of rows as X");at=G.getColumnVector(0)}else at=Lt.getColumnVector(0);for(var yt=1,te,Me,_e,tr,sr=0;sr<Ht&&yt>he;sr++)_e=Lt.transpose().mmul(at).div(at.transpose().mmul(at).get(0,0)),_e=_e.div(_e.norm()),te=Lt.mmul(_e).div(_e.transpose().mmul(_e).get(0,0)),sr>0&&(yt=te.clone().sub(tr).pow(2).sum()),tr=te.clone(),G?(Me=G.transpose().mmul(te).div(te.transpose().mmul(te).get(0,0)),Me=Me.div(Me.norm()),at=G.mmul(Me).div(Me.transpose().mmul(Me).get(0,0))):at=te;if(G){var ge=Lt.transpose().mmul(te).div(te.transpose().mmul(te).get(0,0));ge=ge.div(ge.norm());var Fe=Lt.clone().sub(te.clone().mmul(ge.transpose())),qe=at.transpose().mmul(te).div(te.transpose().mmul(te).get(0,0)),_r=G.clone().sub(te.clone().mulS(qe.get(0,0)).mmul(Me.transpose()));this.t=te,this.p=ge.transpose(),this.w=_e.transpose(),this.q=Me,this.u=at,this.s=te.transpose().mmul(te),this.xResidual=Fe,this.yResidual=_r,this.betas=qe}else this.w=_e.transpose(),this.s=te.transpose().mmul(te).sqrt(),ot?this.t=te.clone().div(this.s.get(0,0)):this.t=te,this.xResidual=Lt.sub(te.mmul(_e.transpose()))})},44220:function(le){function S(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}le.exports=S,le.exports.__esModule=!0,le.exports.default=le.exports},32078:function(le){function S(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}le.exports=S,le.exports.__esModule=!0,le.exports.default=le.exports},82357:function(le,S,M){var x=M(11926);function z(E,N){for(var I=0;I<N.length;I++){var m=N[I];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,x(m.key),m)}}function k(E,N,I){return N&&z(E.prototype,N),I&&z(E,I),Object.defineProperty(E,"prototype",{writable:!1}),E}le.exports=k,le.exports.__esModule=!0,le.exports.default=le.exports},26979:function(le,S,M){var x=M(12982),z=M(52391),k=M(74158);function E(N){var I=z();return function(){var y=x(N),v;if(I){var p=x(this).constructor;v=Reflect.construct(y,arguments,p)}else v=y.apply(this,arguments);return k(this,v)}}le.exports=E,le.exports.__esModule=!0,le.exports.default=le.exports},12982:function(le){function S(M){return le.exports=S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},le.exports.__esModule=!0,le.exports.default=le.exports,S(M)}le.exports=S,le.exports.__esModule=!0,le.exports.default=le.exports},33649:function(le,S,M){var x=M(91337);function z(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),E&&x(k,E)}le.exports=z,le.exports.__esModule=!0,le.exports.default=le.exports},52391:function(le){function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(M){return!1}}le.exports=S,le.exports.__esModule=!0,le.exports.default=le.exports},74158:function(le,S,M){var x=M(64020).default,z=M(44220);function k(E,N){if(N&&(x(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z(E)}le.exports=k,le.exports.__esModule=!0,le.exports.default=le.exports},91337:function(le){function S(M,x){return le.exports=S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,E){return k.__proto__=E,k},le.exports.__esModule=!0,le.exports.default=le.exports,S(M,x)}le.exports=S,le.exports.__esModule=!0,le.exports.default=le.exports},366:function(le,S,M){var x=M(88501)();le.exports=x;try{regeneratorRuntime=x}catch(z){typeof globalThis=="object"?globalThis.regeneratorRuntime=x:Function("r","regeneratorRuntime = r")(x)}}}]);
